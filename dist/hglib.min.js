(function(){"use strict";try{if(typeof document<"u"){var Bt=document.createElement("style");Bt.appendChild(document.createTextNode('._context-menu_18ock_1{position:fixed;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);border-radius:3px;font-size:12px;cursor:default;padding:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d}._context-menu-dark_18ock_12{color:#ccc;background-color:#444444f7}._context-menu-icon_18ock_17{display:inline-block;margin-right:3px;vertical-align:middle}._context-menu-icon_18ock_17>svg{width:30px;height:20px}._context-menu-item_18ock_27{padding:2px;white-space:nowrap;border-radius:2px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._context-menu-item_18ock_27:hover{background:#337ab7;color:#fff}._context-menu-hr_18ock_38{margin-top:5px;margin-bottom:5px;border:0;border-top:1px solid rgba(0,0,0,.1)}._play-icon_18ock_45{width:12px;height:12px;position:absolute;right:5px}._context-menu-span_18ock_52{margin-right:20px;vertical-align:middle;display:inline-block;line-height:normal;white-space:nowrap}._context-menu-thumbnail_18ock_60{margin-right:10px;border:1px solid #888888}._context-menu-thumbnail-inline_18ock_65{display:inline-block;margin-right:10px;vertical-align:middle}._multitrack-header_1yz7l_1,._multitrack-header-focus_1yz7l_2,._multitrack-header-squeazed_1yz7l_3{position:relative;display:flex;justify-content:space-between;height:24px;margin-top:4px;margin-bottom:4px;color:#999;font-size:12px;line-height:24px;vertical-align:middle;border:0;border-radius:3px;background:#e5e5e5;transition:height .15s cubic-bezier(.25,.1,.25,1),margin .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20{background:#222}._multitrack-header-focus_1yz7l_2{height:32px;margin-top:0;margin-bottom:0}._multitrack-header-id_1yz7l_30{padding-left:3px}._multitrack-header-id_1yz7l_30:before{content:"ID:";font-weight:700;padding-right:5px}._multitrack-header-left_1yz7l_39{display:flex;flex-grow:1}._multitrack-header-grabber_1yz7l_44,._multitrack-header-grabber-squeazed_1yz7l_45{display:flex;align-items:center;justify-content:center;width:24px;height:100%;cursor:move;border-radius:3px 0 0 3px;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-grabber_1yz7l_44:hover,._multitrack-header-grabber-squeazed_1yz7l_45:hover{background:#999}._multitrack-header-grabber_1yz7l_44:hover div,._multitrack-header-grabber-squeazed_1yz7l_45:hover div{background:#fff}._multitrack-header-grabber_1yz7l_44 div,._multitrack-header-grabber-squeazed_1yz7l_45 div{width:1px;height:50%;margin:1px;background:#999;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20 ._multitrack-header-grabber_1yz7l_44 div{background:#666}._multitrack-header-grabber-squeazed_1yz7l_45{width:19.2px}._multitrack-header-search_1yz7l_80{position:relative;flex-grow:1;height:100%;margin-right:12px}._multitrack-header-search_1yz7l_80:after{position:absolute;top:3px;bottom:3px;right:-12px;display:block;content:"";width:1px;margin:0 6px;background:#cccccc}._multitrack-header-dark_1yz7l_20 ._multitrack-header-search_1yz7l_80:after{background:#666}._multitrack-header-nav-list_1yz7l_102,._multitrack-header_1yz7l_1>nav{display:flex}._multitrack-header-icon_1yz7l_107,._multitrack-header-icon-squeazed_1yz7l_108{width:24px;height:100%;padding:6px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-icon_1yz7l_107 g,._multitrack-header-icon-squeazed_1yz7l_108 g{stroke:#999}._multitrack-header-icon_1yz7l_107:hover,._multitrack-header-icon_1yz7l_107:active,._multitrack-header-icon_1yz7l_107:focus,._multitrack-header-icon-squeazed_1yz7l_108:hover,._multitrack-header-icon-squeazed_1yz7l_108:active,._multitrack-header-icon-squeazed_1yz7l_108:focus{color:#fff;background:#337ab7}._multitrack-header-icon_1yz7l_107:hover g,._multitrack-header-icon_1yz7l_107:active g,._multitrack-header-icon_1yz7l_107:focus g,._multitrack-header-icon-squeazed_1yz7l_108:hover g,._multitrack-header-icon-squeazed_1yz7l_108:active g,._multitrack-header-icon-squeazed_1yz7l_108:focus g{stroke:#fff}._multitrack-header-icon_1yz7l_107:last-child,._multitrack-header-icon-squeazed_1yz7l_108:last-child{border-radius:0 3px 3px 0}._mouse-tool-selection_1yz7l_136{color:#fff;border-radius:3px 0 0 3px;background:#337ab7}._multitrack-header-icon-squeazed_1yz7l_108{width:20px 5;padding-left:3px;padding-right:3px}._track-control_w7hx2_1,._track-control-vertical_w7hx2_2{position:absolute;z-index:1;display:flex;background:rgba(255,255,255,.75);right:2px;top:2px;border-radius:2.5px;box-shadow:0 0 0 1px #0000000d,0 0 3px #0000001a;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1)}._track-control-dark_w7hx2_15,._track-control-dark_w7hx2_15 ._track-control-active_w7hx2_16{background:rgba(40,40,40,.85)}._track-control-vertical_w7hx2_2{flex-direction:column-reverse}._track-control-left_w7hx2_24{left:2px;right:auto}._track-control-active_w7hx2_16,._track-control-vertical-active_w7hx2_30{opacity:1;z-index:1}._track-control-active_w7hx2_16:hover,._track-control-vertical-active_w7hx2_30:hover{background:rgb(255,255,255);box-shadow:0 0 0 1px #0000001a,0 0 3px #0003}._track-control-dark_w7hx2_15._track-control-active_w7hx2_16:hover{background:rgba(34,34,34,.95)}._track-control-padding-right_w7hx2_48{right:80px}._track-control-button_w7hx2_52{width:20px;height:20px;padding:4px;cursor:pointer;opacity:.66;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button_w7hx2_52:first-child{border-radius:2.5px 0 0 2.5px}._track-control-button_w7hx2_52:last-child{border-radius:0 2.5px 2.5px 0}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52{color:#ccc}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button-vertical_w7hx2_81:first-child{border-radius:0 0 2.5px 2.5px}._track-control-button-vertical_w7hx2_81:last-child{border-radius:2.5px 2.5px 0 0}._center-track_fiu64_1{position:relative;background:transparent}._center-track-container_fiu64_6{position:absolute;z-index:1}._track-range-selection_5bcsr_1{position:absolute;z-index:-1;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1)}._track-range-selection-active_5bcsr_8{z-index:1;opacity:1}._track-range-selection-group-inactive_5bcsr_22{display:none}._track-range-selection-group-brush-selection_5bcsr_26{outline:2px solid rgba(0,0,0,.33);fill:#000;fill-opacity:.1}._drag-listening-div-active_19gkt_1{z-index:10;box-shadow:inset 0 0 3px red}._gallery-tracks_fbxxi_1{position:relative;top:0;left:0;width:100%;height:100%}._gallery-track_fbxxi_1{position:absolute;box-sizing:border-box;top:0;right:0;bottom:0;left:0}._gallery-sub-track_fbxxi_18,._gallery-invisible-track_fbxxi_19{position:absolute}._tiled-plot_1y7td_1{position:relative;flex:1;overflow:hidden}._horizontalList_1y7td_7{display:flex;width:600px;height:300px;white-space:nowrap}._list_1y7td_14{width:400px;height:600px;overflow:hidden;-webkit-overflow-scrolling:touch}._stylizedList_1y7td_21{position:relative;z-index:0;background-color:#f3f3f3;outline:none}._stylizedItem_1y7td_28{position:relative;display:flex;align-items:center;width:100%;background-color:transparent;-webkit-user-select:none;user-select:none;color:#333;font-weight:400}._stylizedHelper_1y7td_39{box-shadow:0 5px 5px -5px #0003,0 -5px 5px -5px #0003;background-color:#fffc;cursor:row-resize}._stylizedHelper_1y7td_39._horizontalItem_1y7td_44{cursor:col-resize}._horizontalItem_1y7td_44{display:flex;flex-shrink:0;align-items:center;justify-content:center}._resizable-track_1y7td_55{width:100%;height:100%}path._domain_1y7td_60{stroke-width:0px}._top-right-handle_cizw2_1,._bottom-right-handle_cizw2_2{border-right:black solid;border-top:black solid}._top-left-handle_cizw2_7,._bottom-left-handle_cizw2_8{border-left:black solid;border-top:black solid}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14,._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{position:absolute;opacity:0;transition:transform .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._draggable-div_cizw2_22{background-color:transparent;box-sizing:border-box}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{width:10px;height:4px;border-top:1px solid black;border-bottom:1px solid black}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{margin:4px 7px}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{width:4px;height:10px;border-left:1px solid black;border-right:1px solid black}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{margin:7px 4px}._draggable-div_cizw2_22:hover ._top-draggable-handle_cizw2_13,._draggable-div_cizw2_22:hover ._bottom-draggable-handle_cizw2_14,._draggable-div_cizw2_22:hover ._left-draggable-handle_cizw2_15,._draggable-div_cizw2_22:hover ._right-draggable-handle_cizw2_16{opacity:.5;background:rgba(255,255,255,.75);box-shadow:0 0 3px 1px #ffffffbf;border-radius:3px}._top-draggable-handle_cizw2_13:hover,._top-draggable-handle_cizw2_13:active,._bottom-draggable-handle_cizw2_14:hover,._bottom-draggable-handle_cizw2_14:active,._left-draggable-handle_cizw2_15:hover,._left-draggable-handle_cizw2_15:active,._right-draggable-handle_cizw2_16:hover,._right-draggable-handle_cizw2_16:active{opacity:1!important;transform:scale(2)}._top-draggable-handle_cizw2_13:hover ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:hover ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:hover ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:hover ._right-draggable-handle-grabber_cizw2_44,._top-draggable-handle_cizw2_13:active ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:active ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:active ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:active ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:hover ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:hover ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:hover ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:hover ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:active ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:active ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:active ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:active ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:hover ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:hover ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:hover ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:hover ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:active ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:active ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:active ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:active ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:hover ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:hover ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:hover ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:hover ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:active ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:active ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:active ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:active ._right-draggable-handle-grabber_cizw2_44{box-shadow:0 0 3px 1px #0089ff;background:#0089ff}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14{height:12px;cursor:row-resize}._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{width:12px;cursor:col-resize}._horizontal-tiled-plot_1bqkg_1{position:relative}._button_1wnjn_1{display:flex;align-items:center;box-sizing:border-box;padding:.5em;color:#000;font-size:1em;line-height:1em;border:0;border-radius:2.5px;background:#fff;box-shadow:0 0 0 1px #ccc;transition:transform .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1);-webkit-appearance:none}._button_1wnjn_1:hover{background:#f2f2f2;box-shadow:0 0 0 1px #ccc}._button_1wnjn_1:focus{box-shadow:0 0 0 2px #0089ff}._button_1wnjn_1:active{transform:scale(.9)}._button_1wnjn_1:hover,._button_1wnjn_1:focus,._button_1wnjn_1:active{cursor:pointer;outline:none}._button-shortcut_1wnjn_35{padding:.1em 5px;color:#999;font-size:.8em;transition:color .15s cubic-bezier(.25,.1,.25,1)}._cross_2ke8w_1{position:relative;width:1em;height:1em}._cross_2ke8w_1:before,._cross_2ke8w_1:after{content:"";display:block;position:absolute;top:50%;left:0;width:1em;height:1px;background:black;transform-origin:center}._cross_2ke8w_1:before{-webkit-transform:translate(0,-50%) rotate(45deg);-moz-transform:translate(0,-50%) rotate(45deg);transform:translateY(-50%) rotate(45deg)}._cross_2ke8w_1:after{-webkit-transform:translate(0,-50%) rotate(-45deg);-moz-transform:translate(0,-50%) rotate(-45deg);transform:translateY(-50%) rotate(-45deg)}._modal-background_zzhoe_1{position:absolute;z-index:1000;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.666);animation:_fade-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1;transition:opacity .2s cubic-bezier(.25,.1,.25,1)}._modal-hide_zzhoe_13{opacity:0}._modal-wrap_zzhoe_17{position:absolute;top:20px;right:20px;bottom:20px;left:20px}._modal-window_zzhoe_25{position:relative;width:100%;max-width:640px;max-height:100%;margin-left:auto;margin-right:auto;color:#000;border-radius:5px;background:#fff;animation:_fade-scale-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1}._modal-window-max-height_zzhoe_38{height:100%}._modal-content_zzhoe_42{padding:10px}@keyframes _fade-in_zzhoe_1{0%{opacity:0}to{opacity:1}}@keyframes _fade-scale-in_zzhoe_1{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}._dialog-header_wp50s_1{position:relative;z-index:2;display:flex;justify-content:space-between;margin:0 -10px 10px;padding:0 10px 10px;border-bottom:1px solid #cccccc}._dialog-header_wp50s_1 h3{margin:0;padding:0;font-size:20px;line-height:1em}._dialog-header_wp50s_1 button{font-size:10px}._dialog-main-max-height_wp50s_20{position:absolute;z-index:1;top:40px;right:0;bottom:50px;left:0;padding:10px;overflow:auto}._dialog-footer_wp50s_31,._dialog-footer-max-height_wp50s_31{display:flex;justify-content:space-between;margin:10px -10px 0;padding:10px 10px 0;border-top:1px solid #cccccc}._dialog-footer_wp50s_31 button,._dialog-footer-max-height_wp50s_31 button{font-size:14px}._dialog-footer-max-height_wp50s_31{position:absolute;z-index:2;left:10px;right:10px;bottom:10px}table.table-track-options{border-collapse:collapse;margin-left:auto;margin-right:auto}td.td-track-options{border:1px solid #fff;outline:none;padding:3px;position:relative;font-family:Roboto,sans-serif;font-size:14px;color:#666}.cell-label{position:absolute;left:0;top:0;margin-left:5px;color:#777}.modal-dialog{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:auto;min-width:300px;margin:auto}._track-renderer_11dwb_1{position:relative}._track-renderer-element_11dwb_5,._track-renderer-events_11dwb_6{position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}._track-renderer-events_11dwb_6{z-index:1}.tileset-finder-label{font-weight:700}.tileset-finder-search-box{margin-left:10px}.tileset-finder-search-bar{display:flex;margin-left:5px;justify-content:space-between;align-items:center}.tileset-finder-checkbox-tree{margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px}.react-checkbox-tree{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;font-size:16px}.react-checkbox-tree>ol{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.react-checkbox-tree ol{margin:0;padding-left:0;list-style-type:none}.react-checkbox-tree ol ol{padding-left:24px}.react-checkbox-tree button{line-height:normal;color:inherit}.react-checkbox-tree button:disabled{cursor:not-allowed}.react-checkbox-tree .rct-bare-label{cursor:default}.react-checkbox-tree label{margin-bottom:0;cursor:pointer}.react-checkbox-tree label:hover{background:rgba(51,51,204,.1)}.react-checkbox-tree label:active,.react-checkbox-tree label:focus{background:rgba(51,51,204,.15)}.react-checkbox-tree:not(.rct-native-display) input{display:none}.react-checkbox-tree.rct-native-display input{margin:0 5px}.react-checkbox-tree .rct-icon{display:inline-block;text-align:center;text-rendering:auto;font-family:"Font Awesome 5 Free",FontAwesome,sans-serif;font-weight:400;font-variant:normal;font-style:normal}.rct-disabled>.rct-text>label{opacity:.75;cursor:not-allowed}.rct-disabled>.rct-text>label:hover{background:transparent}.rct-disabled>.rct-text>label:active{background:transparent}.rct-text{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.rct-options{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:.5rem;text-align:right}.rct-option{opacity:.75;border:0;background:none;cursor:pointer;padding:0 4px;font-size:18px}.rct-option:hover{opacity:1}.rct-option+.rct-option{margin-left:2px}.rct-collapse,.rct-checkbox,.rct-node-icon{padding:0 5px}.rct-collapse *,.rct-checkbox *,.rct-node-icon *{display:inline-block;margin:0;width:14px}.rct-collapse{-ms-flex-item-align:stretch;align-self:stretch;border:0;background:none;line-height:normal;color:inherit;font-size:12px}.rct-collapse.rct-collapse-btn{cursor:pointer}.rct-collapse>.rct-icon-expand-close{opacity:.5}.rct-collapse>.rct-icon-expand-close:hover{opacity:1}.rct-native-display .rct-checkbox{display:none}.rct-node-clickable{cursor:pointer}.rct-node-clickable:hover{background:rgba(51,51,204,.1)}.rct-node-clickable:focus{outline:0;background:rgba(51,51,204,.2)}.rct-node-icon{color:#33c}.rct-title{padding:0 5px}.rct-icons-fa4 .rct-icon-expand-close:before{content:"\uF054"}.rct-icons-fa4 .rct-icon-expand-open:before{content:"\uF078"}.rct-icons-fa4 .rct-icon-uncheck:before{content:"\uF096"}.rct-icons-fa4 .rct-icon-check:before{content:"\uF046"}.rct-icons-fa4 .rct-icon-half-check:before{opacity:.5;content:"\uF046"}.rct-icons-fa4 .rct-icon-leaf:before{content:"\uF016"}.rct-icons-fa4 .rct-icon-parent-open:before{content:"\uF115"}.rct-icons-fa4 .rct-icon-parent-close:before{content:"\uF114"}.rct-icons-fa4 .rct-icon-expand-all:before{content:"\uF0FE"}.rct-icons-fa4 .rct-icon-collapse-all:before{content:"\uF146"}.rct-icons-fa5 .rct-icon-expand-close:before{font-weight:900;content:"\uF054"}.rct-icons-fa5 .rct-icon-expand-open:before{font-weight:900;content:"\uF078"}.rct-icons-fa5 .rct-icon-uncheck:before{content:"\uF0C8"}.rct-icons-fa5 .rct-icon-check:before{content:"\uF14A"}.rct-icons-fa5 .rct-icon-half-check:before{opacity:.5;content:"\uF14A"}.rct-icons-fa5 .rct-icon-leaf:before{content:"\uF15B"}.rct-icons-fa5 .rct-icon-parent-open:before{content:"\uF07C"}.rct-icons-fa5 .rct-icon-parent-close:before{content:"\uF07B"}.rct-icons-fa5 .rct-icon-expand-all:before{content:"\uF0FE"}.rct-icons-fa5 .rct-icon-collapse-all:before{content:"\uF146"}.rct-direction-rtl{direction:rtl}.rct-direction-rtl ol ol{padding-right:24px;padding-left:0}.rct-direction-rtl.rct-icons-fa4 .rct-icon-expand-close:before{content:"\uF105"}.rct-direction-rtl.rct-icons-fa5 .rct-icon-expand-close:before{content:"\uF053"}.plot-type-selected{background-color:#0000ff4d}.plot-type-container{overflow-y:scroll;margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px;max-height:15vh}.plot-type-container-empty{margin:5px;padding:3px 8px;border:1px solid #aaaaaa;background-color:#e8e8e8;border-radius:5px}.plot-type-item{cursor:pointer}.plot-type-item:not(.plot-type-selected):hover{background-color:#3333cc1a}.track-thumbnail{width:30px;height:20px;display:inline-block;margin-right:10;vertical-align:middle}.track-thumbnail>svg{width:20px;height:20px}._collapse-toggle-icon_ub7s6_1:before{font-family:Glyphicons Halflings;content:"\uE159";float:left;padding-right:3px}._collapse-toggle-icon_ub7s6_1._collapsed_ub7s6_9:before{content:"\uE158"}._modal-title_ub7s6_14{font-family:Roboto;font-weight:700}._modal-container_ub7s6_19{position:relative}._modal-container_ub7s6_19 ._modal_ub7s6_14,._modal-container_ub7s6_19 ._modal-backdrop_ub7s6_23{position:absolute}._modal-dialog_ub7s6_27{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:600px;min-width:300px;margin:auto}._vertical-tiled-plot_f3ho8_1{position:relative}._genome-position-search_1l2sx_1,._genome-position-search-focus_1l2sx_2{position:relative;display:flex;align-items:stretch;height:100%;margin-bottom:0;font-size:13.7142857143px;transition:box-shadow .15s cubic-bezier(.25,.1,.25,1),font-size .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-focus_1l2sx_2{box-shadow:0 0 0 1px #337ab7,0 0 3px 1px #337ab7}._genome-position-search-bar_1l2sx_16{position:relative;box-sizing:border-box;width:100%;height:100%;padding:3px;color:#666;font-size:inherit;line-height:24px;border:0;border-radius:3px 0 0 3px;background:transparent}._genome-position-search-bar_1l2sx_16:focus{outline:none;color:#000}._genome-position-search-dark_1l2sx_34 ._genome-position-search-bar_1l2sx_16:focus{color:#e5e5e5}._genome-position-search-bar-button_1l2sx_38,._genome-position-search-bar-button-focus_1l2sx_39{display:block;height:100%;padding:0 8px!important;color:#999;border:0!important;border-radius:0!important;background:transparent;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-button_1l2sx_38:active,._genome-position-search-bar-button_1l2sx_38:focus,._genome-position-search-bar-button_1l2sx_38:hover,._genome-position-search-bar-button-focus_1l2sx_39:active,._genome-position-search-bar-button-focus_1l2sx_39:focus,._genome-position-search-bar-button-focus_1l2sx_39:hover{color:#fff;background:#337ab7}._genome-position-search-bar-button-focus_1l2sx_39{color:#fff;background:#337ab7}._genome-position-search-bar-icon_1l2sx_62,._genome-position-search-bar-icon-focus_1l2sx_63{display:flex;align-items:center;transition:color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-icon_1l2sx_62:first-child,._genome-position-search-bar-icon-focus_1l2sx_63:first-child{margin-left:6px;margin-right:2px}._genome-position-search-bar-icon_1l2sx_62 span,._genome-position-search-bar-icon-focus_1l2sx_63 span{display:block;margin-top:-2px}._genome-position-search-bar-icon-focus_1l2sx_63{color:#337ab7}._genome-position-search-bar-suggestions_1l2sx_83{position:fixed;border-radius:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);padding:2px 0;font-size:90%;overflow:auto;max-height:50%}._btn_1l2sx_95{display:inline-block;margin-bottom:0;font-size:13.7142857143px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}._btn-sm_1l2sx_116{font-size:12px;line-height:1.5;border-radius:3px}._btn-default_1l2sx_122{color:#666;background-color:#fff;border-color:#ccc}._btn-default_1l2sx_122:hover{color:#000;background:#ccc}._btn-default_1l2sx_122:active,._btn-default_1l2sx_122:focus{color:#fff;border-color:#000;background:#000}._genome-position-search_1l2sx_1 ._btn_1l2sx_95{border-radius:0 3px 3px 0}._export-link-dialog-wrapper_p9gxw_1{display:flex}._export-link-dialog-wrapper_p9gxw_1 input{flex-grow:1}._add-track-position-table_wdy5w_1{border-collapse:collapse;margin:5px;color:#666}._add-track-position-table-dark_wdy5w_7{color:#ccc}._add-track-position-other_wdy5w_11{outline:none}._add-track-position-top-center_wdy5w_15{min-width:80px;min-height:20px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-right:1px solid #999;border-radius:2px 2px 0 0}._add-track-position-top-center_wdy5w_15:hover{color:#fff;background-color:#337ab7}._add-track-position-middle-left_wdy5w_30{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-bottom:1px solid #999;border-radius:2px 0 0 2px}._add-track-position-middle-left_wdy5w_30:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-right_wdy5w_45{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 2px 2px 0}._add-track-position-middle-right_wdy5w_45:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-middle_wdy5w_60{text-align:center;outline:none;border:1px solid #999}._add-track-position-middle-middle_wdy5w_60:hover{background-color:#337ab7;color:#fff}._add-track-position-bottom-middle_wdy5w_71{min-height:20px;text-align:center;outline:none;border-left:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 0 2px 2px}._add-track-position-bottom-middle_wdy5w_71:hover{background-color:#337ab7;color:#fff}._add-track-position-span_wdy5w_86{margin:5px}._view-config-editor-header_1hlm6_1{margin:-10px -10px 0;padding:10px;display:flex;justify-content:space-between;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button{display:flex;align-items:center;font-size:14px;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button:hover{background:#e5e5e5}._view-config-editor-header_1hlm6_1 button:hover span{color:#666}._view-config-editor_1hlm6_1{position:absolute;top:50px;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;overflow:auto;font-size:12.5px;height:calc(100% - 80px)}._view-config-log_1hlm6_34{position:absolute;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;min-height:30px;background:#f2f2f2;transition:height .15s cubic-bezier(.25,.1,.25,1)}._view-config-log-header_1hlm6_46{background:#f2f2f2;border-top:1px solid #cccccc;border-bottom:1px solid #cccccc;padding-left:10px;height:30px;display:flex;align-items:center;cursor:pointer;position:sticky;position:-webkit-sticky;top:0}._view-config-log-msg_1hlm6_60{background:#f2f2f2;overflow:auto;height:calc(100% - 30px)}._view-config-log-msg_1hlm6_60 tr,._view-config-log-msg_1hlm6_60 td{outline:none;vertical-align:top}._view-config-log-msg_1hlm6_60 ._title_1hlm6_70{font-weight:700;padding-left:8px;padding-top:8px;width:100px}._view-config-log-msg_1hlm6_60 ._Warning_1hlm6_76{color:orange}._view-config-log-msg_1hlm6_60 ._Success_1hlm6_79{color:green}._view-config-log-msg_1hlm6_60 ._Error_1hlm6_82{color:red}._view-config-log-msg_1hlm6_60 pre{background:white;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._higlass_1uoq8_1{position:relative}._higlass-dark-theme_1uoq8_5{background:black}._higlass-container-overflow_1uoq8_9,._higlass-scroll-container-overflow_1uoq8_10,._higlass-scroll-container-scroll_1uoq8_11{position:absolute;top:0;right:0;bottom:0;left:0}._higlass-scroll-container-overflow_1uoq8_10{overflow:hidden}._higlass-scroll-container-scroll_1uoq8_11{overflow-x:hidden;overflow-y:auto}._higlass-canvas_1uoq8_28{position:absolute;width:100%;height:100%}._higlass-drawing-surface_1uoq8_34{position:relative}._higlass-svg_1uoq8_38{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}._tiled-area_1uoq8_47{display:flex;flex-direction:column}._track-mouseover-menu_1uoq8_52{position:fixed;z-index:1;margin:17px 0 0 9px;padding:0 .25rem;max-width:50vw;word-wrap:break-word;font-size:.8em;pointer-events:none;background:white;border-radius:.25rem;box-shadow:0 0 0 1px #0000001a,0 0 3px #00000013,0 0 7px #0000000d}.react-grid-layout{position:relative;transition:height .2s ease}.react-grid-item{transition:all .2s ease;transition-property:left,top}.react-grid-item.cssTransforms{transition-property:transform}.react-grid-item.resizing{z-index:1;will-change:width,height}.react-grid-item.react-draggable-dragging{transition:none;z-index:3;will-change:transform}.react-grid-item.react-grid-placeholder{background:red;opacity:.2;transition-duration:.1s;z-index:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.react-grid-item>.react-resizable-handle{position:absolute;width:20px;height:20px;bottom:0;right:0;cursor:se-resize}.react-grid-item>.react-resizable-handle:after{content:"";position:absolute;right:3px;bottom:3px;width:5px;height:5px;border-right:2px solid rgba(0,0,0,.4);border-bottom:2px solid rgba(0,0,0,.4)}.react-resizable{position:relative}.react-resizable-handle{position:absolute;width:20px;height:20px;background-repeat:no-repeat;background-origin:content-box;box-sizing:border-box;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+);background-position:bottom right;padding:0 3px 3px 0}.react-resizable-handle-sw{bottom:0;left:0;cursor:sw-resize;transform:rotate(90deg)}.react-resizable-handle-se{bottom:0;right:0;cursor:se-resize}.react-resizable-handle-nw{top:0;left:0;cursor:nw-resize;transform:rotate(180deg)}.react-resizable-handle-ne{top:0;right:0;cursor:ne-resize;transform:rotate(270deg)}.react-resizable-handle-w,.react-resizable-handle-e{top:50%;margin-top:-10px;cursor:ew-resize}.react-resizable-handle-w{left:0;transform:rotate(135deg)}.react-resizable-handle-e{right:0;transform:rotate(315deg)}.react-resizable-handle-n,.react-resizable-handle-s{left:50%;margin-left:-10px;cursor:ns-resize}.react-resizable-handle-n{top:0;transform:rotate(225deg)}.react-resizable-handle-s{bottom:0;transform:rotate(45deg)}code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{background:#b3d4fc}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #dddddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #dddddd}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.string,.token.attr-value{color:#e3116c}.token.punctuation,.token.operator{color:#393a34}.token.entity,.token.url,.token.symbol,.token.number,.token.boolean,.token.variable,.token.constant,.token.property,.token.regex,.token.inserted{color:#36acaa}.token.atrule,.token.keyword,.token.attr-name,.language-autohotkey .token.selector{color:#00a4db}.token.function,.token.deleted,.language-autohotkey .token.tag{color:#9a050f}.token.tag,.token.selector,.language-autohotkey .token.keyword{color:#00009f}.token.important,.token.function,.token.bold{font-weight:700}.token.italic{font-style:italic}.higlass *{box-sizing:border-box}.higlass .react-resizable-handle{z-index:1}')),document.head.appendChild(Bt)}}catch(E){console.error("vite-plugin-css-injected-by-js",E)}})(),function(Bt,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("react-dom"),require("pixi.js")):typeof define=="function"&&define.amd?define(["exports","react","react-dom","pixi.js"],E):(Bt=typeof globalThis<"u"?globalThis:Bt||self,E(Bt.hglib={},Bt.React,Bt.ReactDOM,Bt.PIXI))}(this,function(Bt,E,Br,oX){"use strict";function aX(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const _E=aX(oX);var De=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function ui(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Sa(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var qx={exports:{}},sX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lX=sX,cX=lX;function Xx(){}function Kx(){}Kx.resetWarningCache=Xx;var uX=function(){function e(i,n,o,a,s,c){if(c!==cX){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Kx,resetWarningCache:Xx};return r.PropTypes=r,r};qx.exports=uX();var wa=qx.exports;const N=ui(wa);var TE="http://www.w3.org/1999/xhtml";const EE={svg:"http://www.w3.org/2000/svg",xhtml:TE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Al(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),EE.hasOwnProperty(t)?{space:EE[t],local:e}:e}function fX(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===TE&&t.documentElement.namespaceURI===TE?t.createElement(e):t.createElementNS(r,e)}}function hX(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $g(e){var t=Al(e);return(t.local?hX:fX)(t)}function dX(){}function id(e){return e==null?dX:function(){return this.querySelector(e)}}function pX(e){typeof e!="function"&&(e=id(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var o=t[n],a=o.length,s=i[n]=new Array(a),c,u,l=0;l<a;++l)(c=o[l])&&(u=e.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),s[l]=u);return new In(i,this._parents)}function SE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mX(){return[]}function Fg(e){return e==null?mX:function(){return this.querySelectorAll(e)}}function gX(e){return function(){var t=e.apply(this,arguments);return t==null?[]:SE(t)}}function vX(e){typeof e=="function"?e=gX(e):e=Fg(e);for(var t=this._groups,r=t.length,i=[],n=[],o=0;o<r;++o)for(var a=t[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&(i.push(e.call(c,c.__data__,u,a)),n.push(c));return new In(i,n)}function jg(e){return function(){return this.matches(e)}}function Zx(e){return function(t){return t.matches(e)}}var yX=Array.prototype.find;function bX(e){return function(){return yX.call(this.children,e)}}function _X(){return this.firstElementChild}function TX(e){return this.select(e==null?_X:bX(typeof e=="function"?e:Zx(e)))}var EX=Array.prototype.filter;function SX(){return this.children}function wX(e){return function(){return EX.call(this.children,e)}}function AX(e){return this.selectAll(e==null?SX:wX(typeof e=="function"?e:Zx(e)))}function OX(e){typeof e!="function"&&(e=jg(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var o=t[n],a=o.length,s=i[n]=[],c,u=0;u<a;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&s.push(c);return new In(i,this._parents)}function Qx(e){return new Array(e.length)}function kX(){return new In(this._enter||this._groups.map(Qx),this._parents)}function Ug(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ug.prototype={constructor:Ug,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function IX(e){return function(){return e}}function CX(e,t,r,i,n,o){for(var a=0,s,c=t.length,u=o.length;a<u;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):r[a]=new Ug(e,o[a]);for(;a<c;++a)(s=t[a])&&(n[a]=s)}function PX(e,t,r,i,n,o,a){var s,c,u=new Map,l=t.length,h=o.length,f=new Array(l),d;for(s=0;s<l;++s)(c=t[s])&&(f[s]=d=a.call(c,c.__data__,s,t)+"",u.has(d)?n[s]=c:u.set(d,c));for(s=0;s<h;++s)d=a.call(e,o[s],s,o)+"",(c=u.get(d))?(i[s]=c,c.__data__=o[s],u.delete(d)):r[s]=new Ug(e,o[s]);for(s=0;s<l;++s)(c=t[s])&&u.get(f[s])===c&&(n[s]=c)}function DX(e){return e.__data__}function xX(e,t){if(!arguments.length)return Array.from(this,DX);var r=t?PX:CX,i=this._parents,n=this._groups;typeof e!="function"&&(e=IX(e));for(var o=n.length,a=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var l=i[u],h=n[u],f=h.length,d=SE(e.call(l,l&&l.__data__,u,i)),p=d.length,m=s[u]=new Array(p),g=a[u]=new Array(p),v=c[u]=new Array(f);r(l,h,m,g,v,d,t);for(var _=0,y=0,b,T;_<p;++_)if(b=m[_]){for(_>=y&&(y=_+1);!(T=g[y])&&++y<p;);b._next=T||null}}return a=new In(a,i),a._enter=s,a._exit=c,a}function NX(){return new In(this._exit||this._groups.map(Qx),this._parents)}function RX(e,t,r){var i=this.enter(),n=this,o=this.exit();return i=typeof e=="function"?e(i):i.append(e+""),t!=null&&(n=t(n)),r==null?o.remove():r(o),i&&n?i.merge(n).order():n}function MX(e){if(!(e instanceof In))throw new Error("invalid merge");for(var t=this._groups,r=e._groups,i=t.length,n=r.length,o=Math.min(i,n),a=new Array(i),s=0;s<o;++s)for(var c=t[s],u=r[s],l=c.length,h=a[s]=new Array(l),f,d=0;d<l;++d)(f=c[d]||u[d])&&(h[d]=f);for(;s<i;++s)a[s]=t[s];return new In(a,this._parents)}function LX(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],n=i.length-1,o=i[n],a;--n>=0;)(a=i[n])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function BX(e){e||(e=HX);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var r=this._groups,i=r.length,n=new Array(i),o=0;o<i;++o){for(var a=r[o],s=a.length,c=n[o]=new Array(s),u,l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(t)}return new In(n,this._parents).order()}function HX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $X(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function FX(){return Array.from(this)}function jX(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],n=0,o=i.length;n<o;++n){var a=i[n];if(a)return a}return null}function UX(){let e=0;for(const t of this)++e;return e}function GX(){return!this.node()}function zX(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var n=t[r],o=0,a=n.length,s;o<a;++o)(s=n[o])&&e.call(s,s.__data__,o,n);return this}function VX(e){return function(){this.removeAttribute(e)}}function WX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function YX(e,t){return function(){this.setAttribute(e,t)}}function qX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function XX(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function KX(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function ZX(e,t){var r=Al(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?WX:VX:typeof t=="function"?r.local?KX:XX:r.local?qX:YX)(r,t))}function wE(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function QX(e){return function(){this.style.removeProperty(e)}}function JX(e,t,r){return function(){this.style.setProperty(e,t,r)}}function e2(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function t2(e,t,r){return arguments.length>1?this.each((t==null?QX:typeof t=="function"?e2:JX)(e,t,r??"")):Ui(this.node(),e)}function Ui(e,t){return e.style.getPropertyValue(t)||wE(e).getComputedStyle(e,null).getPropertyValue(t)}function r2(e){return function(){delete this[e]}}function n2(e,t){return function(){this[e]=t}}function i2(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function o2(e,t){return arguments.length>1?this.each((t==null?r2:typeof t=="function"?i2:n2)(e,t)):this.node()[e]}function Jx(e){return e.trim().split(/^|\s+/)}function AE(e){return e.classList||new eN(e)}function eN(e){this._node=e,this._names=Jx(e.getAttribute("class")||"")}eN.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tN(e,t){for(var r=AE(e),i=-1,n=t.length;++i<n;)r.add(t[i])}function rN(e,t){for(var r=AE(e),i=-1,n=t.length;++i<n;)r.remove(t[i])}function a2(e){return function(){tN(this,e)}}function s2(e){return function(){rN(this,e)}}function l2(e,t){return function(){(t.apply(this,arguments)?tN:rN)(this,e)}}function c2(e,t){var r=Jx(e+"");if(arguments.length<2){for(var i=AE(this.node()),n=-1,o=r.length;++n<o;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof t=="function"?l2:t?a2:s2)(r,t))}function u2(){this.textContent=""}function f2(e){return function(){this.textContent=e}}function h2(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function d2(e){return arguments.length?this.each(e==null?u2:(typeof e=="function"?h2:f2)(e)):this.node().textContent}function p2(){this.innerHTML=""}function m2(e){return function(){this.innerHTML=e}}function g2(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function v2(e){return arguments.length?this.each(e==null?p2:(typeof e=="function"?g2:m2)(e)):this.node().innerHTML}function y2(){this.nextSibling&&this.parentNode.appendChild(this)}function b2(){return this.each(y2)}function _2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function T2(){return this.each(_2)}function E2(e){var t=typeof e=="function"?e:$g(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function S2(){return null}function w2(e,t){var r=typeof e=="function"?e:$g(e),i=t==null?S2:typeof t=="function"?t:id(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function A2(){var e=this.parentNode;e&&e.removeChild(this)}function O2(){return this.each(A2)}function k2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function I2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function C2(e){return this.select(e?I2:k2)}function P2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function D2(e){return function(t){e.call(this,t,this.__data__)}}function x2(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function N2(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,n=t.length,o;r<n;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function R2(e,t,r){return function(){var i=this.__on,n,o=D2(t);if(i){for(var a=0,s=i.length;a<s;++a)if((n=i[a]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=o,n.options=r),n.value=t;return}}this.addEventListener(e.type,o,r),n={type:e.type,name:e.name,value:t,listener:o,options:r},i?i.push(n):this.__on=[n]}}function M2(e,t,r){var i=x2(e+""),n,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,l;c<u;++c)for(n=0,l=s[c];n<o;++n)if((a=i[n]).type===l.type&&a.name===l.name)return l.value}return}for(s=t?R2:N2,n=0;n<o;++n)this.each(s(i[n],t,r));return this}function nN(e,t,r){var i=wE(e),n=i.CustomEvent;typeof n=="function"?n=new n(t,r):(n=i.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function L2(e,t){return function(){return nN(this,e,t)}}function B2(e,t){return function(){return nN(this,e,t.apply(this,arguments))}}function H2(e,t){return this.each((typeof t=="function"?B2:L2)(e,t))}function*$2(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],n=0,o=i.length,a;n<o;++n)(a=i[n])&&(yield a)}var OE=[null];function In(e,t){this._groups=e,this._parents=t}function lo(){return new In([[document.documentElement]],OE)}function F2(){return this}In.prototype=lo.prototype={constructor:In,select:pX,selectAll:vX,selectChild:TX,selectChildren:AX,filter:OX,data:xX,enter:kX,exit:NX,join:RX,merge:MX,selection:F2,order:LX,sort:BX,call:$X,nodes:FX,node:jX,size:UX,empty:GX,each:zX,attr:ZX,style:t2,property:o2,classed:c2,text:d2,html:v2,raise:b2,lower:T2,append:E2,insert:w2,remove:O2,clone:C2,datum:P2,on:M2,dispatch:H2,[Symbol.iterator]:$2};function Ht(e){return typeof e=="string"?new In([[document.querySelector(e)]],[document.documentElement]):new In([[e]],OE)}function j2(e){return Ht($g(e).call(document.documentElement))}var U2=0;function iN(){return new kE}function kE(){this._="@"+(++U2).toString(36)}kE.prototype=iN.prototype={constructor:kE,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function oN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lr(e,t){if(e=oN(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}}return[e.pageX,e.pageY]}function G2(e,t){return e.target&&(e=oN(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,r=>lr(r,t))}function z2(e){return typeof e=="string"?new In([document.querySelectorAll(e)],[document.documentElement]):new In([e==null?[]:SE(e)],OE)}const V2=Object.freeze(Object.defineProperty({__proto__:null,create:j2,creator:$g,local:iN,matcher:jg,namespace:Al,namespaces:EE,pointer:lr,pointers:G2,select:Ht,selectAll:z2,selection:lo,selector:id,selectorAll:Fg,style:Ui,window:wE},Symbol.toStringTag,{value:"Module"}));function qr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function su(e){let t=e,r=e;e.length===1&&(t=(a,s)=>e(a)-s,r=W2(e));function i(a,s,c,u){for(c==null&&(c=0),u==null&&(u=a.length);c<u;){const l=c+u>>>1;r(a[l],s)<0?c=l+1:u=l}return c}function n(a,s,c,u){for(c==null&&(c=0),u==null&&(u=a.length);c<u;){const l=c+u>>>1;r(a[l],s)>0?u=l:c=l+1}return c}function o(a,s,c,u){c==null&&(c=0),u==null&&(u=a.length);const l=i(a,s,c,u-1);return l>c&&t(a[l-1],s)>-t(a[l],s)?l-1:l}return{left:i,center:o,right:n}}function W2(e){return(t,r)=>qr(e(t),r)}function aN(e){return e===null?NaN:+e}function*Y2(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&(yield i)}}const sN=su(qr),lN=sN.right,q2=sN.left,X2=su(aN).center,Ol=lN;function Gg(e,t){let r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++r;else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(n=+n)>=n&&++r}return r}function K2(e){return e.length|0}function Z2(e){return!(e>0)}function Q2(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function J2(e){return t=>e(...t)}function eK(...e){const t=typeof e[e.length-1]=="function"&&J2(e.pop());e=e.map(Q2);const r=e.map(K2),i=e.length-1,n=new Array(i+1).fill(0),o=[];if(i<0||r.some(Z2))return o;for(;;){o.push(n.map((s,c)=>e[c][s]));let a=i;for(;++n[a]===r[a];){if(a===0)return t?o.map(t):o;n[a--]=0}}}function tK(e,t){var r=0,i=0;return Float64Array.from(e,t===void 0?n=>r+=+n||0:n=>r+=+t(n,i++,e)||0)}function rK(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function IE(e,t){let r=0,i,n=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(i=a-n,n+=i/++r,o+=i*(a-n));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(i=s-n,n+=i/++r,o+=i*(s-n))}if(r>1)return o/(r-1)}function CE(e,t){const r=IE(e,t);return r&&Math.sqrt(r)}function zg(e,t){let r,i;if(t===void 0)for(const n of e)n!=null&&(r===void 0?n>=n&&(r=i=n):(r>n&&(r=n),i<n&&(i=n)));else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}return[r,i]}function nK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cN(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oK(i.key),i)}}function iK(e,t,r){return t&&cN(e.prototype,t),r&&cN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oK(e){var t=aK(e,"string");return typeof t=="symbol"?t:String(t)}function aK(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let Zr=function(){function e(){nK(this,e),this._partials=new Float64Array(32),this._n=0}return iK(e,[{key:"add",value:function(r){const i=this._partials;let n=0;for(let o=0;o<this._n&&o<32;o++){const a=i[o],s=r+a,c=Math.abs(r)<Math.abs(a)?r-(s-a):a-(s-r);c&&(i[n++]=c),r=s}return i[n]=r,this._n=n+1,this}},{key:"valueOf",value:function(){const r=this._partials;let i=this._n,n,o,a,s=0;if(i>0){for(s=r[--i];i>0&&(n=s,o=r[--i],s=n+o,a=o-(s-n),!a););i>0&&(a<0&&r[i-1]<0||a>0&&r[i-1]>0)&&(o=a*2,n=s+o,o==n-s&&(s=n))}return s}}]),e}();function sK(e,t){const r=new Zr;if(t===void 0)for(let i of e)(i=+i)&&r.add(i);else{let i=-1;for(let n of e)(n=+t(n,++i,e))&&r.add(n)}return+r}function lK(e,t){const r=new Zr;let i=-1;return Float64Array.from(e,t===void 0?n=>r.add(+n||0):n=>r.add(+t(n,++i,e)||0))}function uN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fN(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cK(i.key),i)}}function hN(e,t,r){return t&&fN(e.prototype,t),r&&fN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cK(e){var t=uK(e,"string");return typeof t=="symbol"?t:String(t)}function uK(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ho(){return typeof Reflect<"u"&&Reflect.get?Ho=Reflect.get.bind():Ho=function(t,r,i){var n=fK(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Ho.apply(this,arguments)}function fK(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ai(e),e!==null););return e}function dN(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&od(e,t)}function pN(e){var t=mN();return function(){var i=Ai(e),n;if(t){var o=Ai(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return hK(this,n)}}function hK(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PE(e)}function PE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vg(e){var t=typeof Map=="function"?new Map:void 0;return Vg=function(i){if(i===null||!dK(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(i))return t.get(i);t.set(i,n)}function n(){return Wg(i,arguments,Ai(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),od(n,i)},Vg(e)}function Wg(e,t,r){return mN()?Wg=Reflect.construct.bind():Wg=function(n,o,a){var s=[null];s.push.apply(s,o);var c=Function.bind.apply(n,s),u=new c;return a&&od(u,a.prototype),u},Wg.apply(null,arguments)}function mN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dK(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function od(e,t){return od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},od(e,t)}function Ai(e){return Ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ai(e)}let Yg=function(e){dN(r,e);var t=pN(r);function r(i,n=yN){var o;if(uN(this,r),o=t.call(this),Object.defineProperties(PE(o),{_intern:{value:new Map},_key:{value:n}}),i!=null)for(const[a,s]of i)o.set(a,s);return o}return hN(r,[{key:"get",value:function(n){return Ho(Ai(r.prototype),"get",this).call(this,DE(this,n))}},{key:"has",value:function(n){return Ho(Ai(r.prototype),"has",this).call(this,DE(this,n))}},{key:"set",value:function(n,o){return Ho(Ai(r.prototype),"set",this).call(this,gN(this,n),o)}},{key:"delete",value:function(n){return Ho(Ai(r.prototype),"delete",this).call(this,vN(this,n))}}]),r}(Vg(Map)),pK=function(e){dN(r,e);var t=pN(r);function r(i,n=yN){var o;if(uN(this,r),o=t.call(this),Object.defineProperties(PE(o),{_intern:{value:new Map},_key:{value:n}}),i!=null)for(const a of i)o.add(a);return o}return hN(r,[{key:"has",value:function(n){return Ho(Ai(r.prototype),"has",this).call(this,DE(this,n))}},{key:"add",value:function(n){return Ho(Ai(r.prototype),"add",this).call(this,gN(this,n))}},{key:"delete",value:function(n){return Ho(Ai(r.prototype),"delete",this).call(this,vN(this,n))}}]),r}(Vg(Set));function DE({_intern:e,_key:t},r){const i=t(r);return e.has(i)?e.get(i):r}function gN({_intern:e,_key:t},r){const i=t(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function vN({_intern:e,_key:t},r){const i=t(r);return e.has(i)&&(r=e.get(r),e.delete(i)),r}function yN(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lu(e){return e}function bN(e,...t){return cu(e,lu,lu,t)}function mK(e,...t){return cu(e,Array.from,lu,t)}function _N(e,t,...r){return cu(e,lu,t,r)}function gK(e,t,...r){return cu(e,Array.from,t,r)}function vK(e,...t){return cu(e,lu,TN,t)}function yK(e,...t){return cu(e,Array.from,TN,t)}function TN(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function cu(e,t,r,i){return function n(o,a){if(a>=i.length)return r(o);const s=new Yg,c=i[a++];let u=-1;for(const l of o){const h=c(l,++u,o),f=s.get(h);f?f.push(l):s.set(h,[l])}for(const[l,h]of s)s.set(l,n(h,a));return t(s)}(e,0)}function EN(e,t){return Array.from(t,r=>e[r])}function xE(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[r=qr]=t;if(r.length===1||t.length>1){const i=Uint32Array.from(e,(n,o)=>o);return t.length>1?(t=t.map(n=>e.map(n)),i.sort((n,o)=>{for(const a of t){const s=qr(a[n],a[o]);if(s)return s}})):(r=e.map(r),i.sort((n,o)=>qr(r[n],r[o]))),EN(e,i)}return e.sort(r)}function bK(e,t,r){return(t.length===1?xE(_N(e,t,r),([i,n],[o,a])=>qr(n,a)||qr(i,o)):xE(bN(e,r),([i,n],[o,a])=>t(n,a)||qr(i,o))).map(([i])=>i)}var _K=Array.prototype,TK=_K.slice;function qg(e){return function(){return e}}var NE=Math.sqrt(50),RE=Math.sqrt(10),ME=Math.sqrt(2);function kl(e,t,r){var i,n=-1,o,a,s;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((i=t<e)&&(o=e,e=t,t=o),(s=ad(e,t,r))===0||!isFinite(s))return[];if(s>0){let c=Math.round(e/s),u=Math.round(t/s);for(c*s<e&&++c,u*s>t&&--u,a=new Array(o=u-c+1);++n<o;)a[n]=(c+n)*s}else{s=-s;let c=Math.round(e*s),u=Math.round(t*s);for(c/s<e&&++c,u/s>t&&--u,a=new Array(o=u-c+1);++n<o;)a[n]=(c+n)/s}return i&&a.reverse(),a}function ad(e,t,r){var i=(t-e)/Math.max(0,r),n=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,n);return n>=0?(o>=NE?10:o>=RE?5:o>=ME?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(o>=NE?10:o>=RE?5:o>=ME?2:1)}function Xg(e,t,r){var i=Math.abs(t-e)/Math.max(0,r),n=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/n;return o>=NE?n*=10:o>=RE?n*=5:o>=ME&&(n*=2),t<e?-n:n}function SN(e,t,r){let i;for(;;){const n=ad(e,t,r);if(n===i||n===0||!isFinite(n))return[e,t];n>0?(e=Math.floor(e/n)*n,t=Math.ceil(t/n)*n):n<0&&(e=Math.ceil(e*n)/n,t=Math.floor(t*n)/n),i=n}}function wN(e){return Math.ceil(Math.log(Gg(e))/Math.LN2)+1}function AN(){var e=lu,t=zg,r=wN;function i(n){Array.isArray(n)||(n=Array.from(n));var o,a=n.length,s,c=new Array(a);for(o=0;o<a;++o)c[o]=e(n[o],o,n);var u=t(c),l=u[0],h=u[1],f=r(c,l,h);if(!Array.isArray(f)){const g=h,v=+f;if(t===zg&&([l,h]=SN(l,h,v)),f=kl(l,h,v),f[f.length-1]>=h)if(g>=h&&t===zg){const _=ad(l,h,v);isFinite(_)&&(_>0?h=(Math.floor(h/_)+1)*_:_<0&&(h=(Math.ceil(h*-_)+1)/-_))}else f.pop()}for(var d=f.length;f[0]<=l;)f.shift(),--d;for(;f[d-1]>h;)f.pop(),--d;var p=new Array(d+1),m;for(o=0;o<=d;++o)m=p[o]=[],m.x0=o>0?f[o-1]:l,m.x1=o<d?f[o]:h;for(o=0;o<a;++o)s=c[o],l<=s&&s<=h&&p[Ol(f,s,0,d)].push(n[o]);return p}return i.value=function(n){return arguments.length?(e=typeof n=="function"?n:qg(n),i):e},i.domain=function(n){return arguments.length?(t=typeof n=="function"?n:qg([n[0],n[1]]),i):t},i.thresholds=function(n){return arguments.length?(r=typeof n=="function"?n:Array.isArray(n)?qg(TK.call(n)):qg(n),i):r},i}function LE(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r<n||r===void 0&&n>=n)&&(r=n)}return r}function Kg(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r>n||r===void 0&&n>=n)&&(r=n)}return r}function BE(e,t,r=0,i=e.length-1,n=qr){for(;i>r;){if(i-r>600){const c=i-r+1,u=t-r+1,l=Math.log(c),h=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*h*(c-h)/c)*(u-c/2<0?-1:1),d=Math.max(r,Math.floor(t-u*h/c+f)),p=Math.min(i,Math.floor(t+(c-u)*h/c+f));BE(e,t,d,p,n)}const o=e[t];let a=r,s=i;for(sd(e,r,t),n(e[i],o)>0&&sd(e,r,i);a<s;){for(sd(e,a,s),++a,--s;n(e[a],o)<0;)++a;for(;n(e[s],o)>0;)--s}n(e[r],o)===0?sd(e,r,s):(++s,sd(e,s,i)),s<=t&&(r=s+1),t<=s&&(i=s-1)}return e}function sd(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function ld(e,t,r){if(e=Float64Array.from(Y2(e,r)),!!(i=e.length)){if((t=+t)<=0||i<2)return Kg(e);if(t>=1)return LE(e);var i,n=(i-1)*t,o=Math.floor(n),a=LE(BE(e,o).subarray(0,o+1)),s=Kg(e.subarray(o+1));return a+(s-a)*(n-o)}}function ON(e,t,r=aN){if(i=e.length){if((t=+t)<=0||i<2)return+r(e[0],0,e);if(t>=1)return+r(e[i-1],i-1,e);var i,n=(i-1)*t,o=Math.floor(n),a=+r(e[o],o,e),s=+r(e[o+1],o+1,e);return a+(s-a)*(n-o)}}function EK(e,t,r){return Math.ceil((r-t)/(2*(ld(e,.75)-ld(e,.25))*Math.pow(Gg(e),-1/3)))}function SK(e,t,r){return Math.ceil((r-t)/(3.5*CE(e)*Math.pow(Gg(e),-1/3)))}function kN(e,t){let r,i=-1,n=-1;if(t===void 0)for(const o of e)++n,o!=null&&(r<o||r===void 0&&o>=o)&&(r=o,i=n);else for(let o of e)(o=t(o,++n,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o,i=n);return i}function HE(e,t){let r=0,i=0;if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(++r,i+=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(o=+o)>=o&&(++r,i+=o)}if(r)return i/r}function $E(e,t){return ld(e,.5,t)}function*wK(e){for(const t of e)yield*t}function FE(e){return Array.from(wK(e))}function IN(e,t){let r,i=-1,n=-1;if(t===void 0)for(const o of e)++n,o!=null&&(r>o||r===void 0&&o>=o)&&(r=o,i=n);else for(let o of e)(o=t(o,++n,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o,i=n);return i}function AK(e,t=OK){const r=[];let i,n=!1;for(const o of e)n&&r.push(t(i,o)),i=o,n=!0;return r}function OK(e,t){return[e,t]}function Vn(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var i=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(n);++i<n;)o[i]=e+i*r;return o}function kK(e,t=qr){let r,i=!1;if(t.length===1){let n;for(const o of e){const a=t(o);(i?qr(a,n)<0:qr(a,a)===0)&&(r=o,n=a,i=!0)}}else for(const n of e)(i?t(n,r)<0:t(n,n)===0)&&(r=n,i=!0);return r}function CN(e,t=qr){if(t.length===1)return IN(e,t);let r,i=-1,n=-1;for(const o of e)++n,(i<0?t(o,o)===0:t(o,r)<0)&&(r=o,i=n);return i}function IK(e,t=qr){let r,i=!1;if(t.length===1){let n;for(const o of e){const a=t(o);(i?qr(a,n)>0:qr(a,a)===0)&&(r=o,n=a,i=!0)}}else for(const n of e)(i?t(n,r)>0:t(n,n)===0)&&(r=n,i=!0);return r}function CK(e,t=qr){if(t.length===1)return kN(e,t);let r,i=-1,n=-1;for(const o of e)++n,(i<0?t(o,o)===0:t(o,r)>0)&&(r=o,i=n);return i}function PK(e,t){const r=CN(e,t);return r<0?void 0:r}const DK=PN(Math.random);function PN(e){return function(r,i=0,n=r.length){let o=n-(i=+i);for(;o;){const a=e()*o--|0,s=r[o+i];r[o+i]=r[a+i],r[a+i]=s}return r}}function DN(e,t){let r=0;if(t===void 0)for(let i of e)(i=+i)&&(r+=i);else{let i=-1;for(let n of e)(n=+t(n,++i,e))&&(r+=n)}return r}function xN(e){if(!(o=e.length))return[];for(var t=-1,r=Kg(e,xK),i=new Array(r);++t<r;)for(var n=-1,o,a=i[t]=new Array(o);++n<o;)a[n]=e[n][t];return i}function xK(e){return e.length}function NK(){return xN(arguments)}function RK(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let r=-1;for(const i of e)if(!t(i,++r,e))return!1;return!0}function MK(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let r=-1;for(const i of e)if(t(i,++r,e))return!0;return!1}function LK(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const r=[];let i=-1;for(const n of e)t(n,++i,e)&&r.push(n);return r}function BK(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(r,i)=>t(r,i,e))}function HK(e,t,r){if(typeof t!="function")throw new TypeError("reducer is not a function");const i=e[Symbol.iterator]();let n,o,a=-1;if(arguments.length<3){if({done:n,value:r}=i.next(),n)return;++a}for(;{done:n,value:o}=i.next(),!n;)r=t(r,o,++a,e);return r}function $K(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function FK(e,...t){e=new Set(e);for(const r of t)for(const i of r)e.delete(i);return e}function jK(e,t){const r=t[Symbol.iterator](),i=new Set;for(const n of e){if(i.has(n))return!1;let o,a;for(;({value:o,done:a}=r.next())&&!a;){if(Object.is(n,o))return!1;i.add(o)}}return!0}function UK(e){return e instanceof Set?e:new Set(e)}function GK(e,...t){e=new Set(e),t=t.map(UK);e:for(const r of e)for(const i of t)if(!i.has(r)){e.delete(r);continue e}return e}function NN(e,t){const r=e[Symbol.iterator](),i=new Set;for(const n of t){if(i.has(n))continue;let o,a;for(;{value:o,done:a}=r.next();){if(a)return!1;if(i.add(o),Object.is(n,o))break}}return!0}function zK(e,t){return NN(t,e)}function VK(...e){const t=new Set;for(const r of e)for(const i of r)t.add(i);return t}const WK=Object.freeze(Object.defineProperty({__proto__:null,Adder:Zr,InternMap:Yg,InternSet:pK,ascending:qr,bin:AN,bisect:Ol,bisectCenter:X2,bisectLeft:q2,bisectRight:lN,bisector:su,count:Gg,cross:eK,cumsum:tK,descending:rK,deviation:CE,difference:FK,disjoint:jK,every:RK,extent:zg,fcumsum:lK,filter:LK,fsum:sK,greatest:IK,greatestIndex:CK,group:bN,groupSort:bK,groups:mK,histogram:AN,index:vK,indexes:yK,intersection:GK,least:kK,leastIndex:CN,map:BK,max:LE,maxIndex:kN,mean:HE,median:$E,merge:FE,min:Kg,minIndex:IN,nice:SN,pairs:AK,permute:EN,quantile:ld,quantileSorted:ON,quickselect:BE,range:Vn,reduce:HK,reverse:$K,rollup:_N,rollups:gK,scan:PK,shuffle:DK,shuffler:PN,some:MK,sort:xE,subset:zK,sum:DN,superset:NN,thresholdFreedmanDiaconis:EK,thresholdScott:SK,thresholdSturges:wN,tickIncrement:ad,tickStep:Xg,ticks:kl,transpose:xN,union:VK,variance:IE,zip:NK},Symbol.toStringTag,{value:"Module"}));function Gi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Aa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const jE=Symbol("implicit");function UE(){var e=new Yg,t=[],r=[],i=jE;function n(o){let a=e.get(o);if(a===void 0){if(i!==jE)return i;e.set(o,a=t.push(o)-1)}return r[a%r.length]}return n.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Yg;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return n},n.range=function(o){return arguments.length?(r=Array.from(o),n):r.slice()},n.unknown=function(o){return arguments.length?(i=o,n):i},n.copy=function(){return UE(t,r).unknown(i)},Gi.apply(n,arguments),n}function cd(){var e=UE().unknown(void 0),t=e.domain,r=e.range,i=0,n=1,o,a,s=!1,c=0,u=0,l=.5;delete e.unknown;function h(){var f=t().length,d=n<i,p=d?n:i,m=d?i:n;o=(m-p)/Math.max(1,f-c+u*2),s&&(o=Math.floor(o)),p+=(m-p-o*(f-c))*l,a=o*(1-c),s&&(p=Math.round(p),a=Math.round(a));var g=Vn(f).map(function(v){return p+o*v});return r(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([i,n]=f,i=+i,n=+n,h()):[i,n]},e.rangeRound=function(f){return[i,n]=f,i=+i,n=+n,s=!0,h()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(f){return arguments.length?(s=!!f,h()):s},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),h()):l},e.copy=function(){return cd(t(),[i,n]).round(s).paddingInner(c).paddingOuter(u).align(l)},Gi.apply(h(),arguments)}function RN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return RN(t())},e}function YK(){return RN(cd.apply(null,arguments).paddingInner(1))}function uu(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ud(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function gs(){}var Il=.7,fu=1/Il,hu="\\s*([+-]?\\d+)\\s*",fd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",$o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qK=/^#([0-9a-f]{3,8})$/,XK=new RegExp("^rgb\\("+[hu,hu,hu]+"\\)$"),KK=new RegExp("^rgb\\("+[$o,$o,$o]+"\\)$"),ZK=new RegExp("^rgba\\("+[hu,hu,hu,fd]+"\\)$"),QK=new RegExp("^rgba\\("+[$o,$o,$o,fd]+"\\)$"),JK=new RegExp("^hsl\\("+[fd,$o,$o]+"\\)$"),eZ=new RegExp("^hsla\\("+[fd,$o,$o,fd]+"\\)$"),MN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uu(gs,Qr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:LN,formatHex:LN,formatHsl:tZ,formatRgb:BN,toString:BN});function LN(){return this.rgb().formatHex()}function tZ(){return UN(this).formatHsl()}function BN(){return this.rgb().formatRgb()}function Qr(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=qK.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?HN(t):r===3?new mn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Zg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Zg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=XK.exec(e))?new mn(t[1],t[2],t[3],1):(t=KK.exec(e))?new mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ZK.exec(e))?Zg(t[1],t[2],t[3],t[4]):(t=QK.exec(e))?Zg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=JK.exec(e))?jN(t[1],t[2]/100,t[3]/100,1):(t=eZ.exec(e))?jN(t[1],t[2]/100,t[3]/100,t[4]):MN.hasOwnProperty(e)?HN(MN[e]):e==="transparent"?new mn(NaN,NaN,NaN,0):null}function HN(e){return new mn(e>>16&255,e>>8&255,e&255,1)}function Zg(e,t,r,i){return i<=0&&(e=t=r=NaN),new mn(e,t,r,i)}function GE(e){return e instanceof gs||(e=Qr(e)),e?(e=e.rgb(),new mn(e.r,e.g,e.b,e.opacity)):new mn}function du(e,t,r,i){return arguments.length===1?GE(e):new mn(e,t,r,i??1)}function mn(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}uu(mn,du,ud(gs,{brighter:function(e){return e=e==null?fu:Math.pow(fu,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Il:Math.pow(Il,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$N,formatHex:$N,formatRgb:FN,toString:FN}));function $N(){return"#"+zE(this.r)+zE(this.g)+zE(this.b)}function FN(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function zE(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function jN(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Fo(e,t,r,i)}function UN(e){if(e instanceof Fo)return new Fo(e.h,e.s,e.l,e.opacity);if(e instanceof gs||(e=Qr(e)),!e)return new Fo;if(e instanceof Fo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),o=Math.max(t,r,i),a=NaN,s=o-n,c=(o+n)/2;return s?(t===o?a=(r-i)/s+(r<i)*6:r===o?a=(i-t)/s+2:a=(t-r)/s+4,s/=c<.5?o+n:2-o-n,a*=60):s=c>0&&c<1?0:a,new Fo(a,s,c,e.opacity)}function GN(e,t,r,i){return arguments.length===1?UN(e):new Fo(e,t,r,i??1)}function Fo(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}uu(Fo,GN,ud(gs,{brighter:function(e){return e=e==null?fu:Math.pow(fu,e),new Fo(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Il:Math.pow(Il,e),new Fo(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new mn(VE(e>=240?e-240:e+120,n,i),VE(e,n,i),VE(e<120?e+240:e-120,n,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function VE(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const zN=Math.PI/180,VN=180/Math.PI,Qg=18,WN=.96422,YN=1,qN=.82521,XN=4/29,pu=6/29,KN=3*pu*pu,rZ=pu*pu*pu;function ZN(e){if(e instanceof co)return new co(e.l,e.a,e.b,e.opacity);if(e instanceof jo)return tR(e);e instanceof mn||(e=GE(e));var t=XE(e.r),r=XE(e.g),i=XE(e.b),n=WE((.2225045*t+.7168786*r+.0606169*i)/YN),o,a;return t===r&&r===i?o=a=n:(o=WE((.4360747*t+.3850649*r+.1430804*i)/WN),a=WE((.0139322*t+.0971045*r+.7141733*i)/qN)),new co(116*n-16,500*(o-n),200*(n-a),e.opacity)}function nZ(e,t){return new co(e,0,0,t??1)}function QN(e,t,r,i){return arguments.length===1?ZN(e):new co(e,t,r,i??1)}function co(e,t,r,i){this.l=+e,this.a=+t,this.b=+r,this.opacity=+i}uu(co,QN,ud(gs,{brighter:function(e){return new co(this.l+Qg*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new co(this.l-Qg*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=WN*YE(t),e=YN*YE(e),r=qN*YE(r),new mn(qE(3.1338561*t-1.6168667*e-.4906146*r),qE(-.9787684*t+1.9161415*e+.033454*r),qE(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function WE(e){return e>rZ?Math.pow(e,1/3):e/KN+XN}function YE(e){return e>pu?e*e*e:KN*(e-XN)}function qE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function XE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function JN(e){if(e instanceof jo)return new jo(e.h,e.c,e.l,e.opacity);if(e instanceof co||(e=ZN(e)),e.a===0&&e.b===0)return new jo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*VN;return new jo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function iZ(e,t,r,i){return arguments.length===1?JN(e):new jo(r,t,e,i??1)}function eR(e,t,r,i){return arguments.length===1?JN(e):new jo(e,t,r,i??1)}function jo(e,t,r,i){this.h=+e,this.c=+t,this.l=+r,this.opacity=+i}function tR(e){if(isNaN(e.h))return new co(e.l,0,0,e.opacity);var t=e.h*zN;return new co(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}uu(jo,eR,ud(gs,{brighter:function(e){return new jo(this.h,this.c,this.l+Qg*(e??1),this.opacity)},darker:function(e){return new jo(this.h,this.c,this.l-Qg*(e??1),this.opacity)},rgb:function(){return tR(this).rgb()}}));var rR=-.14861,KE=1.78277,ZE=-.29227,Jg=-.90649,hd=1.97294,nR=hd*Jg,iR=hd*KE,oR=KE*ZE-Jg*rR;function oZ(e){if(e instanceof Cl)return new Cl(e.h,e.s,e.l,e.opacity);e instanceof mn||(e=GE(e));var t=e.r/255,r=e.g/255,i=e.b/255,n=(oR*i+nR*t-iR*r)/(oR+nR-iR),o=i-n,a=(hd*(r-n)-ZE*o)/Jg,s=Math.sqrt(a*a+o*o)/(hd*n*(1-n)),c=s?Math.atan2(a,o)*VN-120:NaN;return new Cl(c<0?c+360:c,s,n,e.opacity)}function aR(e,t,r,i){return arguments.length===1?oZ(e):new Cl(e,t,r,i??1)}function Cl(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}uu(Cl,aR,ud(gs,{brighter:function(e){return e=e==null?fu:Math.pow(fu,e),new Cl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Il:Math.pow(Il,e),new Cl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*zN,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),n=Math.sin(e);return new mn(255*(t+r*(rR*i+KE*n)),255*(t+r*(ZE*i+Jg*n)),255*(t+r*(hd*i)),this.opacity)}}));const aZ=Object.freeze(Object.defineProperty({__proto__:null,color:Qr,cubehelix:aR,gray:nZ,hcl:eR,hsl:GN,lab:QN,lch:iZ,rgb:du},Symbol.toStringTag,{value:"Module"})),QE=e=>()=>e;function sZ(e,t){return function(r){return e+r*t}}function lZ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function cZ(e){return(e=+e)==1?sR:function(t,r){return r-t?lZ(t,r,e):QE(isNaN(t)?r:t)}}function sR(e,t){var r=t-e;return r?sZ(e,r):QE(isNaN(e)?t:e)}const mu=function e(t){var r=cZ(t);function i(n,o){var a=r((n=du(n)).r,(o=du(o)).r),s=r(n.g,o.g),c=r(n.b,o.b),u=sR(n.opacity,o.opacity);return function(l){return n.r=a(l),n.g=s(l),n.b=c(l),n.opacity=u(l),n+""}}return i.gamma=e,i}(1);function uZ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),n;return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function fZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hZ(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,n=new Array(i),o=new Array(r),a;for(a=0;a<i;++a)n[a]=Pl(e[a],t[a]);for(;a<r;++a)o[a]=t[a];return function(s){for(a=0;a<i;++a)o[a]=n[a](s);return o}}function dZ(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function zi(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function pZ(e,t){var r={},i={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=Pl(e[n],t[n]):i[n]=t[n];return function(o){for(n in r)i[n]=r[n](o);return i}}var JE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,e1=new RegExp(JE.source,"g");function mZ(e){return function(){return e}}function gZ(e){return function(t){return e(t)+""}}function t1(e,t){var r=JE.lastIndex=e1.lastIndex=0,i,n,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(i=JE.exec(e))&&(n=e1.exec(t));)(o=n.index)>r&&(o=t.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,c.push({i:a,x:zi(i,n)})),r=e1.lastIndex;return r<t.length&&(o=t.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?gZ(c[0].x):mZ(t):(t=c.length,function(u){for(var l=0,h;l<t;++l)s[(h=c[l]).i]=h.x(u);return s.join("")})}function Pl(e,t){var r=typeof t,i;return t==null||r==="boolean"?QE(t):(r==="number"?zi:r==="string"?(i=Qr(t))?(t=i,mu):t1:t instanceof Qr?mu:t instanceof Date?dZ:fZ(t)?uZ:Array.isArray(t)?hZ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pZ:zi)(e,t)}function r1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var lR=180/Math.PI,n1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cR(e,t,r,i,n,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*r+t*i)&&(r-=e*c,i-=t*c),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,c/=s),e*i<t*r&&(e=-e,t=-t,c=-c,a=-a),{translateX:n,translateY:o,rotate:Math.atan2(t,e)*lR,skewX:Math.atan(c)*lR,scaleX:a,scaleY:s}}var ev;function vZ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?n1:cR(t.a,t.b,t.c,t.d,t.e,t.f)}function yZ(e){return e==null||(ev||(ev=document.createElementNS("http://www.w3.org/2000/svg","g")),ev.setAttribute("transform",e),!(e=ev.transform.baseVal.consolidate()))?n1:(e=e.matrix,cR(e.a,e.b,e.c,e.d,e.e,e.f))}function uR(e,t,r,i){function n(u){return u.length?u.pop()+" ":""}function o(u,l,h,f,d,p){if(u!==h||l!==f){var m=d.push("translate(",null,t,null,r);p.push({i:m-4,x:zi(u,h)},{i:m-2,x:zi(l,f)})}else(h||f)&&d.push("translate("+h+t+f+r)}function a(u,l,h,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:h.push(n(h)+"rotate(",null,i)-2,x:zi(u,l)})):l&&h.push(n(h)+"rotate("+l+i)}function s(u,l,h,f){u!==l?f.push({i:h.push(n(h)+"skewX(",null,i)-2,x:zi(u,l)}):l&&h.push(n(h)+"skewX("+l+i)}function c(u,l,h,f,d,p){if(u!==h||l!==f){var m=d.push(n(d)+"scale(",null,",",null,")");p.push({i:m-4,x:zi(u,h)},{i:m-2,x:zi(l,f)})}else(h!==1||f!==1)&&d.push(n(d)+"scale("+h+","+f+")")}return function(u,l){var h=[],f=[];return u=e(u),l=e(l),o(u.translateX,u.translateY,l.translateX,l.translateY,h,f),a(u.rotate,l.rotate,h,f),s(u.skewX,l.skewX,h,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,f),u=l=null,function(d){for(var p=-1,m=f.length,g;++p<m;)h[(g=f[p]).i]=g.x(d);return h.join("")}}}var fR=uR(vZ,"px, ","px)","deg)"),hR=uR(yZ,", ",")",")"),bZ=1e-12;function dR(e){return((e=Math.exp(e))+1/e)/2}function _Z(e){return((e=Math.exp(e))-1/e)/2}function TZ(e){return((e=Math.exp(2*e))-1)/(e+1)}const EZ=function e(t,r,i){function n(o,a){var s=o[0],c=o[1],u=o[2],l=a[0],h=a[1],f=a[2],d=l-s,p=h-c,m=d*d+p*p,g,v;if(m<bZ)v=Math.log(f/u)/t,g=function(k){return[s+k*d,c+k*p,u*Math.exp(t*k*v)]};else{var _=Math.sqrt(m),y=(f*f-u*u+i*m)/(2*u*r*_),b=(f*f-u*u-i*m)/(2*f*r*_),T=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(b*b+1)-b);v=(S-T)/t,g=function(k){var O=k*v,D=dR(T),R=u/(r*_)*(D*TZ(t*O+T)-_Z(T));return[s+R*d,c+R*p,u*D/dR(t*O+T)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return n.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},n}(Math.SQRT2,2,4);function SZ(e,t){t===void 0&&(t=e,e=Pl);for(var r=0,i=t.length-1,n=t[0],o=new Array(i<0?0:i);r<i;)o[r]=e(n,n=t[++r]);return function(a){var s=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[s](a-s)}}function wZ(e){return function(){return e}}function tv(e){return+e}var pR=[0,1];function Wn(e){return e}function i1(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:wZ(isNaN(t)?NaN:.5)}function AZ(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function OZ(e,t,r){var i=e[0],n=e[1],o=t[0],a=t[1];return n<i?(i=i1(n,i),o=r(a,o)):(i=i1(i,n),o=r(o,a)),function(s){return o(i(s))}}function kZ(e,t,r){var i=Math.min(e.length,t.length)-1,n=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)n[a]=i1(e[a],e[a+1]),o[a]=r(t[a],t[a+1]);return function(s){var c=Ol(e,s,1,i)-1;return o[c](n[c](s))}}function dd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rv(){var e=pR,t=pR,r=Pl,i,n,o,a=Wn,s,c,u;function l(){var f=Math.min(e.length,t.length);return a!==Wn&&(a=AZ(e[0],e[f-1])),s=f>2?kZ:OZ,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?o:(c||(c=s(e.map(i),t,r)))(i(a(f)))}return h.invert=function(f){return a(n((u||(u=s(t,e.map(i),zi)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,tv),l()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),l()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=r1,l()},h.clamp=function(f){return arguments.length?(a=f?!0:Wn,l()):a!==Wn},h.interpolate=function(f){return arguments.length?(r=f,l()):r},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,d){return i=f,n=d,l()}}function o1(){return rv()(Wn,Wn)}function IZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function nv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function gu(e){return e=nv(Math.abs(e)),e?e[1]:NaN}function CZ(e,t){return function(r,i){for(var n=r.length,o=[],a=0,s=e[0],c=0;n>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),o.push(r.substring(n-=s,n+s)),!((c+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function PZ(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var DZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vu(e){if(!(t=DZ.exec(e)))throw new Error("invalid format: "+e);var t;return new iv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vu.prototype=iv.prototype;function iv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}iv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xZ(e){e:for(var t=e.length,r=1,i=-1,n;r<t;++r)switch(e[r]){case".":i=n=r;break;case"0":i===0&&(i=r),n=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(n+1):e}var mR;function NZ(e,t){var r=nv(e,t);if(!r)return e+"";var i=r[0],n=r[1],o=n-(mR=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+nv(e,Math.max(0,t+o-1))[0]}function gR(e,t){var r=nv(e,t);if(!r)return e+"";var i=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}const vR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:IZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gR(e*100,t),r:gR,s:NZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yR(e){return e}var bR=Array.prototype.map,_R=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function TR(e){var t=e.grouping===void 0||e.thousands===void 0?yR:CZ(bR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?yR:PZ(bR.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=vu(h);var f=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,v=h.width,_=h.comma,y=h.precision,b=h.trim,T=h.type;T==="n"?(_=!0,T="g"):vR[T]||(y===void 0&&(y=12),b=!0,T="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var S=m==="$"?r:m==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",k=m==="$"?i:/[%p]/.test(T)?a:"",O=vR[T],D=/[defgprs%]/.test(T);y=y===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function R(w){var L=S,B=k,A,M,j;if(T==="c")B=O(w)+B,w="";else{w=+w;var W=w<0||1/w<0;if(w=isNaN(w)?c:O(Math.abs(w),y),b&&(w=xZ(w)),W&&+w==0&&p!=="+"&&(W=!1),L=(W?p==="("?p:s:p==="-"||p==="("?"":p)+L,B=(T==="s"?_R[8+mR/3]:"")+B+(W&&p==="("?")":""),D){for(A=-1,M=w.length;++A<M;)if(j=w.charCodeAt(A),48>j||j>57){B=(j===46?n+w.slice(A+1):w.slice(A))+B,w=w.slice(0,A);break}}}_&&!g&&(w=t(w,1/0));var K=L.length+w.length+B.length,oe=K<v?new Array(v-K+1).join(f):"";switch(_&&g&&(w=t(oe+w,oe.length?v-B.length:1/0),oe=""),d){case"<":w=L+w+B+oe;break;case"=":w=L+oe+w+B;break;case"^":w=oe.slice(0,K=oe.length>>1)+L+w+B+oe.slice(K);break;default:w=oe+L+w+B;break}return o(w)}return R.toString=function(){return h+""},R}function l(h,f){var d=u((h=vu(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(gu(f)/3)))*3,m=Math.pow(10,-p),g=_R[8+p/3];return function(v){return d(m*v)+g}}return{format:u,formatPrefix:l}}var ov,Oi,Dl;ER({thousands:",",grouping:[3],currency:["$",""]});function ER(e){return ov=TR(e),Oi=ov.format,Dl=ov.formatPrefix,ov}function SR(e){return Math.max(0,-gu(Math.abs(e)))}function yu(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gu(t)/3)))*3-gu(Math.abs(e)))}function wR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gu(t)-gu(e))+1}const RZ=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:iv,get format(){return Oi},formatDefaultLocale:ER,formatLocale:TR,get formatPrefix(){return Dl},formatSpecifier:vu,precisionFixed:SR,precisionPrefix:yu,precisionRound:wR},Symbol.toStringTag,{value:"Module"}));function AR(e,t,r,i){var n=Xg(e,t,r),o;switch(i=vu(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=yu(n,a))&&(i.precision=o),Dl(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=wR(n,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=SR(n))&&(i.precision=o-(i.type==="%")*2);break}}return Oi(i)}function vs(e){var t=e.domain;return e.ticks=function(r){var i=t();return kl(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var n=t();return AR(n[0],n[n.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),n=0,o=i.length-1,a=i[n],s=i[o],c,u,l=10;for(s<a&&(u=a,a=s,s=u,u=n,n=o,o=u);l-- >0;){if(u=ad(a,s,r),u===c)return i[n]=a,i[o]=s,t(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;c=u}return e},e}function bt(){var e=o1();return e.copy=function(){return dd(e,bt())},Gi.apply(e,arguments),vs(e)}function OR(e){var t;function r(i){return i==null||isNaN(i=+i)?t:i}return r.invert=r,r.domain=r.range=function(i){return arguments.length?(e=Array.from(i,tv),r):e.slice()},r.unknown=function(i){return arguments.length?(t=i,r):t},r.copy=function(){return OR(e).unknown(t)},e=arguments.length?Array.from(e,tv):[0,1],vs(r)}function kR(e,t){e=e.slice();var r=0,i=e.length-1,n=e[r],o=e[i],a;return o<n&&(a=r,r=i,i=a,a=n,n=o,o=a),e[r]=t.floor(n),e[i]=t.ceil(o),e}function IR(e){return Math.log(e)}function CR(e){return Math.exp(e)}function MZ(e){return-Math.log(-e)}function LZ(e){return-Math.exp(-e)}function BZ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HZ(e){return e===10?BZ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $Z(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function PR(e){return(t,r)=>-e(-t,r)}function a1(e){const t=e(IR,CR),r=t.domain;let i=10,n,o;function a(){return n=$Z(i),o=HZ(i),r()[0]<0?(n=PR(n),o=PR(o),e(MZ,LZ)):e(IR,CR),t}return t.base=function(s){return arguments.length?(i=+s,a()):i},t.domain=function(s){return arguments.length?(r(s),a()):r()},t.ticks=s=>{const c=r();let u=c[0],l=c[c.length-1];const h=l<u;h&&([u,l]=[l,u]);let f=n(u),d=n(l),p,m;const g=s==null?10:+s;let v=[];if(!(i%1)&&d-f<g){if(f=Math.floor(f),d=Math.ceil(d),u>0){for(;f<=d;++f)for(p=1;p<i;++p)if(m=f<0?p/o(-f):p*o(f),!(m<u)){if(m>l)break;v.push(m)}}else for(;f<=d;++f)for(p=i-1;p>=1;--p)if(m=f>0?p/o(-f):p*o(f),!(m<u)){if(m>l)break;v.push(m)}v.length*2<g&&(v=kl(u,l,g))}else v=kl(f,d,Math.min(d-f,g)).map(o);return h?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=vu(c)).precision==null&&(c.trim=!0),c=Oi(c)),s===1/0)return c;const u=Math.max(1,i*s/t.ticks().length);return l=>{let h=l/o(Math.round(n(l)));return h*i<i-.5&&(h*=i),h<=u?c(l):""}},t.nice=()=>r(kR(r(),{floor:s=>o(Math.floor(n(s))),ceil:s=>o(Math.ceil(n(s)))})),t}function ys(){const e=a1(rv()).domain([1,10]);return e.copy=()=>dd(e,ys()).base(e.base()),Gi.apply(e,arguments),e}function DR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function xR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function s1(e){var t=1,r=e(DR(t),xR(t));return r.constant=function(i){return arguments.length?e(DR(t=+i),xR(t)):t},vs(r)}function NR(){var e=s1(rv());return e.copy=function(){return dd(e,NR()).constant(e.constant())},Gi.apply(e,arguments)}function RR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function FZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function jZ(e){return e<0?-e*e:e*e}function l1(e){var t=e(Wn,Wn),r=1;function i(){return r===1?e(Wn,Wn):r===.5?e(FZ,jZ):e(RR(r),RR(1/r))}return t.exponent=function(n){return arguments.length?(r=+n,i()):r},vs(t)}function c1(){var e=l1(rv());return e.copy=function(){return dd(e,c1()).exponent(e.exponent())},Gi.apply(e,arguments),e}function UZ(){return c1.apply(null,arguments).exponent(.5)}function MR(e){return Math.sign(e)*e*e}function GZ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function LR(){var e=o1(),t=[0,1],r=!1,i;function n(o){var a=GZ(e(o));return isNaN(a)?i:r?Math.round(a):a}return n.invert=function(o){return e.invert(MR(o))},n.domain=function(o){return arguments.length?(e.domain(o),n):e.domain()},n.range=function(o){return arguments.length?(e.range((t=Array.from(o,tv)).map(MR)),n):t.slice()},n.rangeRound=function(o){return n.range(o).round(!0)},n.round=function(o){return arguments.length?(r=!!o,n):r},n.clamp=function(o){return arguments.length?(e.clamp(o),n):e.clamp()},n.unknown=function(o){return arguments.length?(i=o,n):i},n.copy=function(){return LR(e.domain(),t).round(r).clamp(e.clamp()).unknown(i)},Gi.apply(n,arguments),vs(n)}function av(){var e=[],t=[],r=[],i;function n(){var a=0,s=Math.max(1,t.length);for(r=new Array(s-1);++a<s;)r[a-1]=ON(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?i:t[Ol(r,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(qr),n()},o.range=function(a){return arguments.length?(t=Array.from(a),n()):t.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return r.slice()},o.copy=function(){return av().domain(e).range(t).unknown(i)},Gi.apply(o,arguments)}function BR(){var e=0,t=1,r=1,i=[.5],n=[0,1],o;function a(c){return c!=null&&c<=c?n[Ol(i,c,0,r)]:o}function s(){var c=-1;for(i=new Array(r);++c<r;)i[c]=((c+1)*t-(c-r)*e)/(r+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(r=(n=Array.from(c)).length-1,s()):n.slice()},a.invertExtent=function(c){var u=n.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=r?[i[r-1],t]:[i[u-1],i[u]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return i.slice()},a.copy=function(){return BR().domain([e,t]).range(n).unknown(o)},Gi.apply(vs(a),arguments)}function HR(){var e=[.5],t=[0,1],r,i=1;function n(o){return o!=null&&o<=o?t[Ol(e,o,0,i)]:r}return n.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return HR().domain(e).range(t).unknown(r)},Gi.apply(n,arguments)}const u1=new Date,f1=new Date;function Jr(e,t,r,i){function n(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return n.floor=o=>(e(o=new Date(+o)),o),n.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),n.round=o=>{const a=n(o),s=n.ceil(o);return o-a<s-o?a:s},n.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),n.range=(o,a,s)=>{const c=[];if(o=n.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let u;do c.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return c},n.filter=o=>Jr(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),r&&(n.count=(o,a)=>(u1.setTime(+o),f1.setTime(+a),e(u1),e(f1),Math.floor(r(u1,f1))),n.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?n.filter(i?a=>i(a)%o===0:a=>n.count(0,a)%o===0):n)),n}const sv=Jr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);sv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):sv),sv.range;const Oa=1e3,Vi=Oa*60,ka=Vi*60,Ia=ka*24,h1=Ia*7,$R=Ia*30,d1=Ia*365,xl=Jr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getUTCSeconds());xl.range;const p1=Jr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oa)},(e,t)=>{e.setTime(+e+t*Vi)},(e,t)=>(t-e)/Vi,e=>e.getMinutes());p1.range;const m1=Jr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Vi)},(e,t)=>(t-e)/Vi,e=>e.getUTCMinutes());m1.range;const g1=Jr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oa-e.getMinutes()*Vi)},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getHours());g1.range;const v1=Jr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getUTCHours());v1.range;const pd=Jr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vi)/Ia,e=>e.getDate()-1);pd.range;const lv=Jr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>e.getUTCDate()-1);lv.range;const FR=Jr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>Math.floor(e/Ia));FR.range;function Nl(e){return Jr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Vi)/h1)}const cv=Nl(0),uv=Nl(1),zZ=Nl(2),VZ=Nl(3),bu=Nl(4),WZ=Nl(5),YZ=Nl(6);cv.range,uv.range,zZ.range,VZ.range,bu.range,WZ.range,YZ.range;function Rl(e){return Jr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/h1)}const fv=Rl(0),hv=Rl(1),qZ=Rl(2),XZ=Rl(3),_u=Rl(4),KZ=Rl(5),ZZ=Rl(6);fv.range,hv.range,qZ.range,XZ.range,_u.range,KZ.range,ZZ.range;const y1=Jr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());y1.range;const b1=Jr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());b1.range;const Ca=Jr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ca.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}),Ca.range;const Pa=Jr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Pa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}),Pa.range;function jR(e,t,r,i,n,o){const a=[[xl,1,Oa],[xl,5,5*Oa],[xl,15,15*Oa],[xl,30,30*Oa],[o,1,Vi],[o,5,5*Vi],[o,15,15*Vi],[o,30,30*Vi],[n,1,ka],[n,3,3*ka],[n,6,6*ka],[n,12,12*ka],[i,1,Ia],[i,2,2*Ia],[r,1,h1],[t,1,$R],[t,3,3*$R],[e,1,d1]];function s(u,l,h){const f=l<u;f&&([u,l]=[l,u]);const d=h&&typeof h.range=="function"?h:c(u,l,h),p=d?d.range(u,+l+1):[];return f?p.reverse():p}function c(u,l,h){const f=Math.abs(l-u)/h,d=su(([,,g])=>g).right(a,f);if(d===a.length)return e.every(Xg(u/d1,l/d1,h));if(d===0)return sv.every(Math.max(Xg(u,l,h),1));const[p,m]=a[f/a[d-1][2]<a[d][2]/f?d-1:d];return p.every(m)}return[s,c]}const[QZ,JZ]=jR(Pa,b1,fv,FR,v1,m1),[eQ,tQ]=jR(Ca,y1,cv,pd,g1,p1);function _1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function T1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function md(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function rQ(e){var t=e.dateTime,r=e.date,i=e.time,n=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,u=gd(n),l=vd(n),h=gd(o),f=vd(o),d=gd(a),p=vd(a),m=gd(s),g=vd(s),v=gd(c),_=vd(c),y={a:W,A:K,b:oe,B:fe,c:null,d:YR,e:YR,f:AQ,g:MQ,G:BQ,H:EQ,I:SQ,j:wQ,L:qR,m:OQ,M:kQ,p:Ae,q:de,Q:eM,s:tM,S:IQ,u:CQ,U:PQ,V:DQ,w:xQ,W:NQ,x:null,X:null,y:RQ,Y:LQ,Z:HQ,"%":JR},b={a:Z,A:ne,b:ue,B:Oe,c:null,d:KR,e:KR,f:UQ,g:QQ,G:eJ,H:$Q,I:FQ,j:jQ,L:ZR,m:GQ,M:zQ,p:Ce,q:je,Q:eM,s:tM,S:VQ,u:WQ,U:YQ,V:qQ,w:XQ,W:KQ,x:null,X:null,y:ZQ,Y:JQ,Z:tJ,"%":JR},T={a:R,A:w,b:L,B,c:A,d:VR,e:VR,f:yQ,g:zR,G:GR,H:WR,I:WR,j:pQ,L:vQ,m:dQ,M:mQ,p:D,q:hQ,Q:_Q,s:TQ,S:gQ,u:sQ,U:lQ,V:cQ,w:aQ,W:uQ,x:M,X:j,y:zR,Y:GR,Z:fQ,"%":bQ};y.x=S(r,y),y.X=S(i,y),y.c=S(t,y),b.x=S(r,b),b.X=S(i,b),b.c=S(t,b);function S(Pe,Ue){return function(Ye){var xe=[],qe=-1,We=0,vt=Pe.length,dt,Ze,Et;for(Ye instanceof Date||(Ye=new Date(+Ye));++qe<vt;)Pe.charCodeAt(qe)===37&&(xe.push(Pe.slice(We,qe)),(Ze=UR[dt=Pe.charAt(++qe)])!=null?dt=Pe.charAt(++qe):Ze=dt==="e"?" ":"0",(Et=Ue[dt])&&(dt=Et(Ye,Ze)),xe.push(dt),We=qe+1);return xe.push(Pe.slice(We,qe)),xe.join("")}}function k(Pe,Ue){return function(Ye){var xe=md(1900,void 0,1),qe=O(xe,Pe,Ye+="",0),We,vt;if(qe!=Ye.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(Ue&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(We=T1(md(xe.y,0,1)),vt=We.getUTCDay(),We=vt>4||vt===0?hv.ceil(We):hv(We),We=lv.offset(We,(xe.V-1)*7),xe.y=We.getUTCFullYear(),xe.m=We.getUTCMonth(),xe.d=We.getUTCDate()+(xe.w+6)%7):(We=_1(md(xe.y,0,1)),vt=We.getDay(),We=vt>4||vt===0?uv.ceil(We):uv(We),We=pd.offset(We,(xe.V-1)*7),xe.y=We.getFullYear(),xe.m=We.getMonth(),xe.d=We.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),vt="Z"in xe?T1(md(xe.y,0,1)).getUTCDay():_1(md(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(vt+5)%7:xe.w+xe.U*7-(vt+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,T1(xe)):_1(xe)}}function O(Pe,Ue,Ye,xe){for(var qe=0,We=Ue.length,vt=Ye.length,dt,Ze;qe<We;){if(xe>=vt)return-1;if(dt=Ue.charCodeAt(qe++),dt===37){if(dt=Ue.charAt(qe++),Ze=T[dt in UR?Ue.charAt(qe++):dt],!Ze||(xe=Ze(Pe,Ye,xe))<0)return-1}else if(dt!=Ye.charCodeAt(xe++))return-1}return xe}function D(Pe,Ue,Ye){var xe=u.exec(Ue.slice(Ye));return xe?(Pe.p=l.get(xe[0].toLowerCase()),Ye+xe[0].length):-1}function R(Pe,Ue,Ye){var xe=d.exec(Ue.slice(Ye));return xe?(Pe.w=p.get(xe[0].toLowerCase()),Ye+xe[0].length):-1}function w(Pe,Ue,Ye){var xe=h.exec(Ue.slice(Ye));return xe?(Pe.w=f.get(xe[0].toLowerCase()),Ye+xe[0].length):-1}function L(Pe,Ue,Ye){var xe=v.exec(Ue.slice(Ye));return xe?(Pe.m=_.get(xe[0].toLowerCase()),Ye+xe[0].length):-1}function B(Pe,Ue,Ye){var xe=m.exec(Ue.slice(Ye));return xe?(Pe.m=g.get(xe[0].toLowerCase()),Ye+xe[0].length):-1}function A(Pe,Ue,Ye){return O(Pe,t,Ue,Ye)}function M(Pe,Ue,Ye){return O(Pe,r,Ue,Ye)}function j(Pe,Ue,Ye){return O(Pe,i,Ue,Ye)}function W(Pe){return a[Pe.getDay()]}function K(Pe){return o[Pe.getDay()]}function oe(Pe){return c[Pe.getMonth()]}function fe(Pe){return s[Pe.getMonth()]}function Ae(Pe){return n[+(Pe.getHours()>=12)]}function de(Pe){return 1+~~(Pe.getMonth()/3)}function Z(Pe){return a[Pe.getUTCDay()]}function ne(Pe){return o[Pe.getUTCDay()]}function ue(Pe){return c[Pe.getUTCMonth()]}function Oe(Pe){return s[Pe.getUTCMonth()]}function Ce(Pe){return n[+(Pe.getUTCHours()>=12)]}function je(Pe){return 1+~~(Pe.getUTCMonth()/3)}return{format:function(Pe){var Ue=S(Pe+="",y);return Ue.toString=function(){return Pe},Ue},parse:function(Pe){var Ue=k(Pe+="",!1);return Ue.toString=function(){return Pe},Ue},utcFormat:function(Pe){var Ue=S(Pe+="",b);return Ue.toString=function(){return Pe},Ue},utcParse:function(Pe){var Ue=k(Pe+="",!0);return Ue.toString=function(){return Pe},Ue}}}var UR={"-":"",_:" ",0:"0"},ln=/^\s*\d+/,nQ=/^%/,iQ=/[\\^$*+?|[\]().{}]/g;function Jt(e,t,r){var i=e<0?"-":"",n=(i?-e:e)+"",o=n.length;return i+(o<r?new Array(r-o+1).join(t)+n:n)}function oQ(e){return e.replace(iQ,"\\$&")}function gd(e){return new RegExp("^(?:"+e.map(oQ).join("|")+")","i")}function vd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function aQ(e,t,r){var i=ln.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function sQ(e,t,r){var i=ln.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function lQ(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function cQ(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function uQ(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function GR(e,t,r){var i=ln.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function zR(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function fQ(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function hQ(e,t,r){var i=ln.exec(t.slice(r,r+1));return i?(e.q=i[0]*3-3,r+i[0].length):-1}function dQ(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function VR(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function pQ(e,t,r){var i=ln.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function WR(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function mQ(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function gQ(e,t,r){var i=ln.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function vQ(e,t,r){var i=ln.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function yQ(e,t,r){var i=ln.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function bQ(e,t,r){var i=nQ.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function _Q(e,t,r){var i=ln.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function TQ(e,t,r){var i=ln.exec(t.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function YR(e,t){return Jt(e.getDate(),t,2)}function EQ(e,t){return Jt(e.getHours(),t,2)}function SQ(e,t){return Jt(e.getHours()%12||12,t,2)}function wQ(e,t){return Jt(1+pd.count(Ca(e),e),t,3)}function qR(e,t){return Jt(e.getMilliseconds(),t,3)}function AQ(e,t){return qR(e,t)+"000"}function OQ(e,t){return Jt(e.getMonth()+1,t,2)}function kQ(e,t){return Jt(e.getMinutes(),t,2)}function IQ(e,t){return Jt(e.getSeconds(),t,2)}function CQ(e){var t=e.getDay();return t===0?7:t}function PQ(e,t){return Jt(cv.count(Ca(e)-1,e),t,2)}function XR(e){var t=e.getDay();return t>=4||t===0?bu(e):bu.ceil(e)}function DQ(e,t){return e=XR(e),Jt(bu.count(Ca(e),e)+(Ca(e).getDay()===4),t,2)}function xQ(e){return e.getDay()}function NQ(e,t){return Jt(uv.count(Ca(e)-1,e),t,2)}function RQ(e,t){return Jt(e.getFullYear()%100,t,2)}function MQ(e,t){return e=XR(e),Jt(e.getFullYear()%100,t,2)}function LQ(e,t){return Jt(e.getFullYear()%1e4,t,4)}function BQ(e,t){var r=e.getDay();return e=r>=4||r===0?bu(e):bu.ceil(e),Jt(e.getFullYear()%1e4,t,4)}function HQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jt(t/60|0,"0",2)+Jt(t%60,"0",2)}function KR(e,t){return Jt(e.getUTCDate(),t,2)}function $Q(e,t){return Jt(e.getUTCHours(),t,2)}function FQ(e,t){return Jt(e.getUTCHours()%12||12,t,2)}function jQ(e,t){return Jt(1+lv.count(Pa(e),e),t,3)}function ZR(e,t){return Jt(e.getUTCMilliseconds(),t,3)}function UQ(e,t){return ZR(e,t)+"000"}function GQ(e,t){return Jt(e.getUTCMonth()+1,t,2)}function zQ(e,t){return Jt(e.getUTCMinutes(),t,2)}function VQ(e,t){return Jt(e.getUTCSeconds(),t,2)}function WQ(e){var t=e.getUTCDay();return t===0?7:t}function YQ(e,t){return Jt(fv.count(Pa(e)-1,e),t,2)}function QR(e){var t=e.getUTCDay();return t>=4||t===0?_u(e):_u.ceil(e)}function qQ(e,t){return e=QR(e),Jt(_u.count(Pa(e),e)+(Pa(e).getUTCDay()===4),t,2)}function XQ(e){return e.getUTCDay()}function KQ(e,t){return Jt(hv.count(Pa(e)-1,e),t,2)}function ZQ(e,t){return Jt(e.getUTCFullYear()%100,t,2)}function QQ(e,t){return e=QR(e),Jt(e.getUTCFullYear()%100,t,2)}function JQ(e,t){return Jt(e.getUTCFullYear()%1e4,t,4)}function eJ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?_u(e):_u.ceil(e),Jt(e.getUTCFullYear()%1e4,t,4)}function tJ(){return"+0000"}function JR(){return"%"}function eM(e){return+e}function tM(e){return Math.floor(+e/1e3)}var Tu,rM,nM;rJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rJ(e){return Tu=rQ(e),rM=Tu.format,Tu.parse,nM=Tu.utcFormat,Tu.utcParse,Tu}function nJ(e){return new Date(e)}function iJ(e){return e instanceof Date?+e:+new Date(+e)}function E1(e,t,r,i,n,o,a,s,c,u){var l=o1(),h=l.invert,f=l.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),_=u("%b %d"),y=u("%B"),b=u("%Y");function T(S){return(c(S)<S?d:s(S)<S?p:a(S)<S?m:o(S)<S?g:i(S)<S?n(S)<S?v:_:r(S)<S?y:b)(S)}return l.invert=function(S){return new Date(h(S))},l.domain=function(S){return arguments.length?f(Array.from(S,iJ)):f().map(nJ)},l.ticks=function(S){var k=f();return e(k[0],k[k.length-1],S??10)},l.tickFormat=function(S,k){return k==null?T:u(k)},l.nice=function(S){var k=f();return(!S||typeof S.range!="function")&&(S=t(k[0],k[k.length-1],S??10)),S?f(kR(k,S)):l},l.copy=function(){return dd(l,E1(e,t,r,i,n,o,a,s,c,u))},l}function oJ(){return Gi.apply(E1(eQ,tQ,Ca,y1,cv,pd,g1,p1,xl,rM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aJ(){return Gi.apply(E1(QZ,JZ,Pa,b1,fv,lv,v1,m1,xl,nM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dv(){var e=0,t=1,r,i,n,o,a=Wn,s=!1,c;function u(h){return h==null||isNaN(h=+h)?c:a(n===0?.5:(h=(o(h)-r)*n,s?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,r=o(e=+e),i=o(t=+t),n=r===i?0:1/(i-r),u):[e,t]},u.clamp=function(h){return arguments.length?(s=!!h,u):s},u.interpolator=function(h){return arguments.length?(a=h,u):a};function l(h){return function(f){var d,p;return arguments.length?([d,p]=f,a=h(d,p),u):[a(0),a(1)]}}return u.range=l(Pl),u.rangeRound=l(r1),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return o=h,r=h(e),i=h(t),n=r===i?0:1/(i-r),u}}function bs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iM(){var e=vs(dv()(Wn));return e.copy=function(){return bs(e,iM())},Aa.apply(e,arguments)}function oM(){var e=a1(dv()).domain([1,10]);return e.copy=function(){return bs(e,oM()).base(e.base())},Aa.apply(e,arguments)}function aM(){var e=s1(dv());return e.copy=function(){return bs(e,aM()).constant(e.constant())},Aa.apply(e,arguments)}function S1(){var e=l1(dv());return e.copy=function(){return bs(e,S1()).exponent(e.exponent())},Aa.apply(e,arguments)}function sJ(){return S1.apply(null,arguments).exponent(.5)}function sM(){var e=[],t=Wn;function r(i){if(i!=null&&!isNaN(i=+i))return t((Ol(e,i,1)-1)/(e.length-1))}return r.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let n of i)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(qr),r},r.interpolator=function(i){return arguments.length?(t=i,r):t},r.range=function(){return e.map((i,n)=>t(n/(e.length-1)))},r.quantiles=function(i){return Array.from({length:i+1},(n,o)=>ld(e,o/i))},r.copy=function(){return sM(t).domain(e)},Aa.apply(r,arguments)}function pv(){var e=0,t=.5,r=1,i=1,n,o,a,s,c,u=Wn,l,h=!1,f;function d(m){return isNaN(m=+m)?f:(m=.5+((m=+l(m))-o)*(i*m<i*o?s:c),u(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,r]=m,n=l(e=+e),o=l(t=+t),a=l(r=+r),s=n===o?0:.5/(o-n),c=o===a?0:.5/(a-o),i=o<n?-1:1,d):[e,t,r]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(g){var v,_,y;return arguments.length?([v,_,y]=g,u=SZ(m,[v,_,y]),d):[u(0),u(.5),u(1)]}}return d.range=p(Pl),d.rangeRound=p(r1),d.unknown=function(m){return arguments.length?(f=m,d):f},function(m){return l=m,n=m(e),o=m(t),a=m(r),s=n===o?0:.5/(o-n),c=o===a?0:.5/(a-o),i=o<n?-1:1,d}}function lM(){var e=vs(pv()(Wn));return e.copy=function(){return bs(e,lM())},Aa.apply(e,arguments)}function cM(){var e=a1(pv()).domain([.1,1,10]);return e.copy=function(){return bs(e,cM()).base(e.base())},Aa.apply(e,arguments)}function uM(){var e=s1(pv());return e.copy=function(){return bs(e,uM()).constant(e.constant())},Aa.apply(e,arguments)}function w1(){var e=l1(pv());return e.copy=function(){return bs(e,w1()).exponent(e.exponent())},Aa.apply(e,arguments)}function lJ(){return w1.apply(null,arguments).exponent(.5)}const cJ=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cd,scaleDiverging:lM,scaleDivergingLog:cM,scaleDivergingPow:w1,scaleDivergingSqrt:lJ,scaleDivergingSymlog:uM,scaleIdentity:OR,scaleImplicit:jE,scaleLinear:bt,scaleLog:ys,scaleOrdinal:UE,scalePoint:YK,scalePow:c1,scaleQuantile:av,scaleQuantize:BR,scaleRadial:LR,scaleSequential:iM,scaleSequentialLog:oM,scaleSequentialPow:S1,scaleSequentialQuantile:sM,scaleSequentialSqrt:sJ,scaleSequentialSymlog:aM,scaleSqrt:UZ,scaleSymlog:NR,scaleThreshold:HR,scaleTime:oJ,scaleUtc:aJ,tickFormat:AR},Symbol.toStringTag,{value:"Module"}));var yd={},mv,uJ=new Uint8Array(16);function fM(){if(!mv&&(mv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!mv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mv(uJ)}const fJ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gv(e){return typeof e=="string"&&fJ.test(e)}for(var gn=[],A1=0;A1<256;++A1)gn.push((A1+256).toString(16).substr(1));function vv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(gn[e[t+0]]+gn[e[t+1]]+gn[e[t+2]]+gn[e[t+3]]+"-"+gn[e[t+4]]+gn[e[t+5]]+"-"+gn[e[t+6]]+gn[e[t+7]]+"-"+gn[e[t+8]]+gn[e[t+9]]+"-"+gn[e[t+10]]+gn[e[t+11]]+gn[e[t+12]]+gn[e[t+13]]+gn[e[t+14]]+gn[e[t+15]]).toLowerCase();if(!gv(r))throw TypeError("Stringified UUID is invalid");return r}var hM,O1,k1=0,I1=0;function hJ(e,t,r){var i=t&&r||0,n=t||new Array(16);e=e||{};var o=e.node||hM,a=e.clockseq!==void 0?e.clockseq:O1;if(o==null||a==null){var s=e.random||(e.rng||fM)();o==null&&(o=hM=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),a==null&&(a=O1=(s[6]<<8|s[7])&16383)}var c=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:I1+1,l=c-k1+(u-I1)/1e4;if(l<0&&e.clockseq===void 0&&(a=a+1&16383),(l<0||c>k1)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");k1=c,I1=u,O1=a,c+=122192928e5;var h=((c&268435455)*1e4+u)%4294967296;n[i++]=h>>>24&255,n[i++]=h>>>16&255,n[i++]=h>>>8&255,n[i++]=h&255;var f=c/4294967296*1e4&268435455;n[i++]=f>>>8&255,n[i++]=f&255,n[i++]=f>>>24&15|16,n[i++]=f>>>16&255,n[i++]=a>>>8|128,n[i++]=a&255;for(var d=0;d<6;++d)n[i+d]=o[d];return t||vv(n)}function dM(e){if(!gv(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function dJ(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var pJ="6ba7b810-9dad-11d1-80b4-00c04fd430c8",mJ="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function pM(e,t,r){function i(n,o,a,s){if(typeof n=="string"&&(n=dJ(n)),typeof o=="string"&&(o=dM(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+n.length);if(c.set(o),c.set(n,o.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,a){s=s||0;for(var u=0;u<16;++u)a[s+u]=c[u];return a}return vv(c)}try{i.name=e}catch{}return i.DNS=pJ,i.URL=mJ,i}function gJ(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return vJ(yJ(bJ(e),e.length*8))}function vJ(e){for(var t=[],r=e.length*32,i="0123456789abcdef",n=0;n<r;n+=8){var o=e[n>>5]>>>n%32&255,a=parseInt(i.charAt(o>>>4&15)+i.charAt(o&15),16);t.push(a)}return t}function mM(e){return(e+64>>>9<<4)+14+1}function yJ(e,t){e[t>>5]|=128<<t%32,e[mM(t)-1]=t;for(var r=1732584193,i=-271733879,n=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=r,c=i,u=n,l=o;r=Cn(r,i,n,o,e[a],7,-680876936),o=Cn(o,r,i,n,e[a+1],12,-389564586),n=Cn(n,o,r,i,e[a+2],17,606105819),i=Cn(i,n,o,r,e[a+3],22,-1044525330),r=Cn(r,i,n,o,e[a+4],7,-176418897),o=Cn(o,r,i,n,e[a+5],12,1200080426),n=Cn(n,o,r,i,e[a+6],17,-1473231341),i=Cn(i,n,o,r,e[a+7],22,-45705983),r=Cn(r,i,n,o,e[a+8],7,1770035416),o=Cn(o,r,i,n,e[a+9],12,-1958414417),n=Cn(n,o,r,i,e[a+10],17,-42063),i=Cn(i,n,o,r,e[a+11],22,-1990404162),r=Cn(r,i,n,o,e[a+12],7,1804603682),o=Cn(o,r,i,n,e[a+13],12,-40341101),n=Cn(n,o,r,i,e[a+14],17,-1502002290),i=Cn(i,n,o,r,e[a+15],22,1236535329),r=Pn(r,i,n,o,e[a+1],5,-165796510),o=Pn(o,r,i,n,e[a+6],9,-1069501632),n=Pn(n,o,r,i,e[a+11],14,643717713),i=Pn(i,n,o,r,e[a],20,-373897302),r=Pn(r,i,n,o,e[a+5],5,-701558691),o=Pn(o,r,i,n,e[a+10],9,38016083),n=Pn(n,o,r,i,e[a+15],14,-660478335),i=Pn(i,n,o,r,e[a+4],20,-405537848),r=Pn(r,i,n,o,e[a+9],5,568446438),o=Pn(o,r,i,n,e[a+14],9,-1019803690),n=Pn(n,o,r,i,e[a+3],14,-187363961),i=Pn(i,n,o,r,e[a+8],20,1163531501),r=Pn(r,i,n,o,e[a+13],5,-1444681467),o=Pn(o,r,i,n,e[a+2],9,-51403784),n=Pn(n,o,r,i,e[a+7],14,1735328473),i=Pn(i,n,o,r,e[a+12],20,-1926607734),r=Dn(r,i,n,o,e[a+5],4,-378558),o=Dn(o,r,i,n,e[a+8],11,-2022574463),n=Dn(n,o,r,i,e[a+11],16,1839030562),i=Dn(i,n,o,r,e[a+14],23,-35309556),r=Dn(r,i,n,o,e[a+1],4,-1530992060),o=Dn(o,r,i,n,e[a+4],11,1272893353),n=Dn(n,o,r,i,e[a+7],16,-155497632),i=Dn(i,n,o,r,e[a+10],23,-1094730640),r=Dn(r,i,n,o,e[a+13],4,681279174),o=Dn(o,r,i,n,e[a],11,-358537222),n=Dn(n,o,r,i,e[a+3],16,-722521979),i=Dn(i,n,o,r,e[a+6],23,76029189),r=Dn(r,i,n,o,e[a+9],4,-640364487),o=Dn(o,r,i,n,e[a+12],11,-421815835),n=Dn(n,o,r,i,e[a+15],16,530742520),i=Dn(i,n,o,r,e[a+2],23,-995338651),r=xn(r,i,n,o,e[a],6,-198630844),o=xn(o,r,i,n,e[a+7],10,1126891415),n=xn(n,o,r,i,e[a+14],15,-1416354905),i=xn(i,n,o,r,e[a+5],21,-57434055),r=xn(r,i,n,o,e[a+12],6,1700485571),o=xn(o,r,i,n,e[a+3],10,-1894986606),n=xn(n,o,r,i,e[a+10],15,-1051523),i=xn(i,n,o,r,e[a+1],21,-2054922799),r=xn(r,i,n,o,e[a+8],6,1873313359),o=xn(o,r,i,n,e[a+15],10,-30611744),n=xn(n,o,r,i,e[a+6],15,-1560198380),i=xn(i,n,o,r,e[a+13],21,1309151649),r=xn(r,i,n,o,e[a+4],6,-145523070),o=xn(o,r,i,n,e[a+11],10,-1120210379),n=xn(n,o,r,i,e[a+2],15,718787259),i=xn(i,n,o,r,e[a+9],21,-343485551),r=_s(r,s),i=_s(i,c),n=_s(n,u),o=_s(o,l)}return[r,i,n,o]}function bJ(e){if(e.length===0)return[];for(var t=e.length*8,r=new Uint32Array(mM(t)),i=0;i<t;i+=8)r[i>>5]|=(e[i/8]&255)<<i%32;return r}function _s(e,t){var r=(e&65535)+(t&65535),i=(e>>16)+(t>>16)+(r>>16);return i<<16|r&65535}function _J(e,t){return e<<t|e>>>32-t}function yv(e,t,r,i,n,o){return _s(_J(_s(_s(t,e),_s(i,o)),n),r)}function Cn(e,t,r,i,n,o,a){return yv(t&r|~t&i,e,t,n,o,a)}function Pn(e,t,r,i,n,o,a){return yv(t&i|r&~i,e,t,n,o,a)}function Dn(e,t,r,i,n,o,a){return yv(t^r^i,e,t,n,o,a)}function xn(e,t,r,i,n,o,a){return yv(r^(t|~i),e,t,n,o,a)}var TJ=pM("v3",48,gJ);const EJ=TJ;function SJ(e,t,r){e=e||{};var i=e.random||(e.rng||fM)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=i[n];return t}return vv(i)}function wJ(e,t,r,i){switch(e){case 0:return t&r^~t&i;case 1:return t^r^i;case 2:return t&r^t&i^r&i;case 3:return t^r^i}}function C1(e,t){return e<<t|e>>>32-t}function AJ(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var i=unescape(encodeURIComponent(e));e=[];for(var n=0;n<i.length;++n)e.push(i.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[c*64+l*4]<<24|e[c*64+l*4+1]<<16|e[c*64+l*4+2]<<8|e[c*64+l*4+3];s[c]=u}s[a-1][14]=(e.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(e.length-1)*8&4294967295;for(var h=0;h<a;++h){for(var f=new Uint32Array(80),d=0;d<16;++d)f[d]=s[h][d];for(var p=16;p<80;++p)f[p]=C1(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var m=r[0],g=r[1],v=r[2],_=r[3],y=r[4],b=0;b<80;++b){var T=Math.floor(b/20),S=C1(m,5)+wJ(T,g,v,_)+y+t[T]+f[b]>>>0;y=_,_=v,v=C1(g,30)>>>0,g=m,m=S}r[0]=r[0]+m>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+_>>>0,r[4]=r[4]+y>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var OJ=pM("v5",80,AJ);const kJ=OJ,IJ="00000000-0000-0000-0000-000000000000";function CJ(e){if(!gv(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var bv=Sa(Object.freeze(Object.defineProperty({__proto__:null,NIL:IJ,parse:dM,stringify:vv,v1:hJ,v3:EJ,v4:SJ,v5:kJ,validate:gv,version:CJ},Symbol.toStringTag,{value:"Module"}))),P1=typeof Buffer<"u"?e=>Buffer.from(e).toString("base64"):e=>btoa(String.fromCharCode(...e)),PJ=typeof Buffer<"u"?e=>Buffer.from(e,"base64"):e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0));yd.encode=function(e){var t=bv.parse(e),r=P1(t),i=r.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return i},yd.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/")+"==";return bv.stringify(PJ(t))},yd.v4=function(){var e=bv.v4(null,new Uint8Array(16)),t=P1(e),r=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return r},yd.nice=function(){var e=bv.v4(null,new Uint8Array(16));e[0]=e[0]&127;var t=P1(e),r=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return r};var DJ=yd;const xt=ui(DJ);var gM={exports:{}},_v={},Tv={exports:{}};Tv.exports,function(e,t){var r=200,i="__lodash_hash_undefined__",n=1,o=2,a=9007199254740991,s="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",l="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",_="[object Object]",y="[object Promise]",b="[object Proxy]",T="[object RegExp]",S="[object Set]",k="[object String]",O="[object Symbol]",D="[object Undefined]",R="[object WeakMap]",w="[object ArrayBuffer]",L="[object DataView]",B="[object Float32Array]",A="[object Float64Array]",M="[object Int8Array]",j="[object Int16Array]",W="[object Int32Array]",K="[object Uint8Array]",oe="[object Uint8ClampedArray]",fe="[object Uint16Array]",Ae="[object Uint32Array]",de=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,ue={};ue[B]=ue[A]=ue[M]=ue[j]=ue[W]=ue[K]=ue[oe]=ue[fe]=ue[Ae]=!0,ue[s]=ue[c]=ue[w]=ue[l]=ue[L]=ue[h]=ue[f]=ue[d]=ue[m]=ue[g]=ue[_]=ue[T]=ue[S]=ue[k]=ue[R]=!1;var Oe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Ce=typeof self=="object"&&self&&self.Object===Object&&self,je=Oe||Ce||Function("return this")(),Pe=t&&!t.nodeType&&t,Ue=Pe&&!0&&e&&!e.nodeType&&e,Ye=Ue&&Ue.exports===Pe,xe=Ye&&Oe.process,qe=function(){try{return xe&&xe.binding&&xe.binding("util")}catch{}}(),We=qe&&qe.isTypedArray;function vt(ie,Ee){for(var Be=-1,Je=ie==null?0:ie.length,Or=0,It=[];++Be<Je;){var Ur=ie[Be];Ee(Ur,Be,ie)&&(It[Or++]=Ur)}return It}function dt(ie,Ee){for(var Be=-1,Je=Ee.length,Or=ie.length;++Be<Je;)ie[Or+Be]=Ee[Be];return ie}function Ze(ie,Ee){for(var Be=-1,Je=ie==null?0:ie.length;++Be<Je;)if(Ee(ie[Be],Be,ie))return!0;return!1}function Et(ie,Ee){for(var Be=-1,Je=Array(ie);++Be<ie;)Je[Be]=Ee(Be);return Je}function _t(ie){return function(Ee){return ie(Ee)}}function Rt(ie,Ee){return ie.has(Ee)}function Kr(ie,Ee){return ie?.[Ee]}function Mt(ie){var Ee=-1,Be=Array(ie.size);return ie.forEach(function(Je,Or){Be[++Ee]=[Or,Je]}),Be}function ke(ie,Ee){return function(Be){return ie(Ee(Be))}}function te(ie){var Ee=-1,Be=Array(ie.size);return ie.forEach(function(Je){Be[++Ee]=Je}),Be}var ae=Array.prototype,ye=Function.prototype,Q=Object.prototype,he=je["__core-js_shared__"],we=ye.toString,Ie=Q.hasOwnProperty,$e=function(){var ie=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""}(),Ge=Q.toString,Xe=RegExp("^"+we.call(Ie).replace(de,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=Ye?je.Buffer:void 0,ot=je.Symbol,Ot=je.Uint8Array,ft=Q.propertyIsEnumerable,sr=ae.splice,H=ot?ot.toStringTag:void 0,I=Object.getOwnPropertySymbols,x=Qe?Qe.isBuffer:void 0,X=ke(Object.keys,Object),me=nd(je,"DataView"),q=nd(je,"Map"),Y=nd(je,"Promise"),F=nd(je,"Set"),U=nd(je,"WeakMap"),se=nd(Object,"create"),ve=ou(me),ge=ou(q),_e=ou(Y),pe=ou(F),be=ou(U),G=ot?ot.prototype:void 0,$=G?G.valueOf:void 0;function re(ie){var Ee=-1,Be=ie==null?0:ie.length;for(this.clear();++Ee<Be;){var Je=ie[Ee];this.set(Je[0],Je[1])}}function Te(){this.__data__=se?se(null):{},this.size=0}function Se(ie){var Ee=this.has(ie)&&delete this.__data__[ie];return this.size-=Ee?1:0,Ee}function ze(ie){var Ee=this.__data__;if(se){var Be=Ee[ie];return Be===i?void 0:Be}return Ie.call(Ee,ie)?Ee[ie]:void 0}function Ve(ie){var Ee=this.__data__;return se?Ee[ie]!==void 0:Ie.call(Ee,ie)}function ct(ie,Ee){var Be=this.__data__;return this.size+=this.has(ie)?0:1,Be[ie]=se&&Ee===void 0?i:Ee,this}re.prototype.clear=Te,re.prototype.delete=Se,re.prototype.get=ze,re.prototype.has=Ve,re.prototype.set=ct;function yt(ie){var Ee=-1,Be=ie==null?0:ie.length;for(this.clear();++Ee<Be;){var Je=ie[Ee];this.set(Je[0],Je[1])}}function Ut(){this.__data__=[],this.size=0}function pt(ie){var Ee=this.__data__,Be=On(Ee,ie);if(Be<0)return!1;var Je=Ee.length-1;return Be==Je?Ee.pop():sr.call(Ee,Be,1),--this.size,!0}function Lt(ie){var Ee=this.__data__,Be=On(Ee,ie);return Be<0?void 0:Ee[Be][1]}function tr(ie){return On(this.__data__,ie)>-1}function ut(ie,Ee){var Be=this.__data__,Je=On(Be,ie);return Je<0?(++this.size,Be.push([ie,Ee])):Be[Je][1]=Ee,this}yt.prototype.clear=Ut,yt.prototype.delete=pt,yt.prototype.get=Lt,yt.prototype.has=tr,yt.prototype.set=ut;function jt(ie){var Ee=-1,Be=ie==null?0:ie.length;for(this.clear();++Ee<Be;){var Je=ie[Ee];this.set(Je[0],Je[1])}}function rr(){this.size=0,this.__data__={hash:new re,map:new(q||yt),string:new re}}function ir(ie){var Ee=gE(this,ie).delete(ie);return this.size-=Ee?1:0,Ee}function Ar(ie){return gE(this,ie).get(ie)}function Gn(ie){return gE(this,ie).has(ie)}function Fe(ie,Ee){var Be=gE(this,ie),Je=Be.size;return Be.set(ie,Ee),this.size+=Be.size==Je?0:1,this}jt.prototype.clear=rr,jt.prototype.delete=ir,jt.prototype.get=Ar,jt.prototype.has=Gn,jt.prototype.set=Fe;function et(ie){var Ee=-1,Be=ie==null?0:ie.length;for(this.__data__=new jt;++Ee<Be;)this.add(ie[Ee])}function kt(ie){return this.__data__.set(ie,i),this}function Tt(ie){return this.__data__.has(ie)}et.prototype.add=et.prototype.push=kt,et.prototype.has=Tt;function ht(ie){var Ee=this.__data__=new yt(ie);this.size=Ee.size}function Gt(){this.__data__=new yt,this.size=0}function At(ie){var Ee=this.__data__,Be=Ee.delete(ie);return this.size=Ee.size,Be}function Pt(ie){return this.__data__.get(ie)}function Kt(ie){return this.__data__.has(ie)}function or(ie,Ee){var Be=this.__data__;if(Be instanceof yt){var Je=Be.__data__;if(!q||Je.length<r-1)return Je.push([ie,Ee]),this.size=++Be.size,this;Be=this.__data__=new jt(Je)}return Be.set(ie,Ee),this.size=Be.size,this}ht.prototype.clear=Gt,ht.prototype.delete=At,ht.prototype.get=Pt,ht.prototype.has=Kt,ht.prototype.set=or;function ar(ie,Ee){var Be=vE(ie),Je=!Be&&zqe(ie),Or=!Be&&!Je&&Yx(ie),It=!Be&&!Je&&!Or&&nX(ie),Ur=Be||Je||Or||It,pn=Ur?Et(ie.length,String):[],kn=pn.length;for(var Lr in ie)(Ee||Ie.call(ie,Lr))&&!(Ur&&(Lr=="length"||Or&&(Lr=="offset"||Lr=="parent")||It&&(Lr=="buffer"||Lr=="byteLength"||Lr=="byteOffset")||$qe(Lr,kn)))&&pn.push(Lr);return pn}function On(ie,Ee){for(var Be=ie.length;Be--;)if(Jq(ie[Be][0],Ee))return Be;return-1}function oo(ie,Ee,Be){var Je=Ee(ie);return vE(ie)?Je:dt(Je,Be(ie))}function Tl(ie){return ie==null?ie===void 0?D:v:H&&H in Object(ie)?Bqe(ie):Gqe(ie)}function Bg(ie){return Hg(ie)&&Tl(ie)==s}function El(ie,Ee,Be,Je,Or){return ie===Ee?!0:ie==null||Ee==null||!Hg(ie)&&!Hg(Ee)?ie!==ie&&Ee!==Ee:Dqe(ie,Ee,Be,Je,El,Or)}function Dqe(ie,Ee,Be,Je,Or,It){var Ur=vE(ie),pn=vE(Ee),kn=Ur?c:Sl(ie),Lr=pn?c:Sl(Ee);kn=kn==s?_:kn,Lr=Lr==s?_:Lr;var ji=kn==_,Bo=Lr==_,zn=kn==Lr;if(zn&&Yx(ie)){if(!Yx(Ee))return!1;Ur=!0,ji=!1}if(zn&&!ji)return It||(It=new ht),Ur||nX(ie)?Zq(ie,Ee,Be,Je,Or,It):Mqe(ie,Ee,kn,Be,Je,Or,It);if(!(Be&n)){var ao=ji&&Ie.call(ie,"__wrapped__"),so=Bo&&Ie.call(Ee,"__wrapped__");if(ao||so){var wl=ao?ie.value():ie,ms=so?Ee.value():Ee;return It||(It=new ht),Or(wl,ms,Be,Je,It)}}return zn?(It||(It=new ht),Lqe(ie,Ee,Be,Je,Or,It)):!1}function xqe(ie){if(!rX(ie)||jqe(ie))return!1;var Ee=eX(ie)?Xe:Z;return Ee.test(ou(ie))}function Nqe(ie){return Hg(ie)&&tX(ie.length)&&!!ue[Tl(ie)]}function Rqe(ie){if(!Uqe(ie))return X(ie);var Ee=[];for(var Be in Object(ie))Ie.call(ie,Be)&&Be!="constructor"&&Ee.push(Be);return Ee}function Zq(ie,Ee,Be,Je,Or,It){var Ur=Be&n,pn=ie.length,kn=Ee.length;if(pn!=kn&&!(Ur&&kn>pn))return!1;var Lr=It.get(ie);if(Lr&&It.get(Ee))return Lr==Ee;var ji=-1,Bo=!0,zn=Be&o?new et:void 0;for(It.set(ie,Ee),It.set(Ee,ie);++ji<pn;){var ao=ie[ji],so=Ee[ji];if(Je)var wl=Ur?Je(so,ao,ji,Ee,ie,It):Je(ao,so,ji,ie,Ee,It);if(wl!==void 0){if(wl)continue;Bo=!1;break}if(zn){if(!Ze(Ee,function(ms,au){if(!Rt(zn,au)&&(ao===ms||Or(ao,ms,Be,Je,It)))return zn.push(au)})){Bo=!1;break}}else if(!(ao===so||Or(ao,so,Be,Je,It))){Bo=!1;break}}return It.delete(ie),It.delete(Ee),Bo}function Mqe(ie,Ee,Be,Je,Or,It,Ur){switch(Be){case L:if(ie.byteLength!=Ee.byteLength||ie.byteOffset!=Ee.byteOffset)return!1;ie=ie.buffer,Ee=Ee.buffer;case w:return!(ie.byteLength!=Ee.byteLength||!It(new Ot(ie),new Ot(Ee)));case l:case h:case g:return Jq(+ie,+Ee);case f:return ie.name==Ee.name&&ie.message==Ee.message;case T:case k:return ie==Ee+"";case m:var pn=Mt;case S:var kn=Je&n;if(pn||(pn=te),ie.size!=Ee.size&&!kn)return!1;var Lr=Ur.get(ie);if(Lr)return Lr==Ee;Je|=o,Ur.set(ie,Ee);var ji=Zq(pn(ie),pn(Ee),Je,Or,It,Ur);return Ur.delete(ie),ji;case O:if($)return $.call(ie)==$.call(Ee)}return!1}function Lqe(ie,Ee,Be,Je,Or,It){var Ur=Be&n,pn=Qq(ie),kn=pn.length,Lr=Qq(Ee),ji=Lr.length;if(kn!=ji&&!Ur)return!1;for(var Bo=kn;Bo--;){var zn=pn[Bo];if(!(Ur?zn in Ee:Ie.call(Ee,zn)))return!1}var ao=It.get(ie);if(ao&&It.get(Ee))return ao==Ee;var so=!0;It.set(ie,Ee),It.set(Ee,ie);for(var wl=Ur;++Bo<kn;){zn=pn[Bo];var ms=ie[zn],au=Ee[zn];if(Je)var iX=Ur?Je(au,ms,zn,Ee,ie,It):Je(ms,au,zn,ie,Ee,It);if(!(iX===void 0?ms===au||Or(ms,au,Be,Je,It):iX)){so=!1;break}wl||(wl=zn=="constructor")}if(so&&!wl){var yE=ie.constructor,bE=Ee.constructor;yE!=bE&&"constructor"in ie&&"constructor"in Ee&&!(typeof yE=="function"&&yE instanceof yE&&typeof bE=="function"&&bE instanceof bE)&&(so=!1)}return It.delete(ie),It.delete(Ee),so}function Qq(ie){return oo(ie,Yqe,Hqe)}function gE(ie,Ee){var Be=ie.__data__;return Fqe(Ee)?Be[typeof Ee=="string"?"string":"hash"]:Be.map}function nd(ie,Ee){var Be=Kr(ie,Ee);return xqe(Be)?Be:void 0}function Bqe(ie){var Ee=Ie.call(ie,H),Be=ie[H];try{ie[H]=void 0;var Je=!0}catch{}var Or=Ge.call(ie);return Je&&(Ee?ie[H]=Be:delete ie[H]),Or}var Hqe=I?function(ie){return ie==null?[]:(ie=Object(ie),vt(I(ie),function(Ee){return ft.call(ie,Ee)}))}:qqe,Sl=Tl;(me&&Sl(new me(new ArrayBuffer(1)))!=L||q&&Sl(new q)!=m||Y&&Sl(Y.resolve())!=y||F&&Sl(new F)!=S||U&&Sl(new U)!=R)&&(Sl=function(ie){var Ee=Tl(ie),Be=Ee==_?ie.constructor:void 0,Je=Be?ou(Be):"";if(Je)switch(Je){case ve:return L;case ge:return m;case _e:return y;case pe:return S;case be:return R}return Ee});function $qe(ie,Ee){return Ee=Ee??a,!!Ee&&(typeof ie=="number"||ne.test(ie))&&ie>-1&&ie%1==0&&ie<Ee}function Fqe(ie){var Ee=typeof ie;return Ee=="string"||Ee=="number"||Ee=="symbol"||Ee=="boolean"?ie!=="__proto__":ie===null}function jqe(ie){return!!$e&&$e in ie}function Uqe(ie){var Ee=ie&&ie.constructor,Be=typeof Ee=="function"&&Ee.prototype||Q;return ie===Be}function Gqe(ie){return Ge.call(ie)}function ou(ie){if(ie!=null){try{return we.call(ie)}catch{}try{return ie+""}catch{}}return""}function Jq(ie,Ee){return ie===Ee||ie!==ie&&Ee!==Ee}var zqe=Bg(function(){return arguments}())?Bg:function(ie){return Hg(ie)&&Ie.call(ie,"callee")&&!ft.call(ie,"callee")},vE=Array.isArray;function Vqe(ie){return ie!=null&&tX(ie.length)&&!eX(ie)}var Yx=x||Xqe;function Wqe(ie,Ee){return El(ie,Ee)}function eX(ie){if(!rX(ie))return!1;var Ee=Tl(ie);return Ee==d||Ee==p||Ee==u||Ee==b}function tX(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=a}function rX(ie){var Ee=typeof ie;return ie!=null&&(Ee=="object"||Ee=="function")}function Hg(ie){return ie!=null&&typeof ie=="object"}var nX=We?_t(We):Nqe;function Yqe(ie){return Vqe(ie)?ar(ie):Rqe(ie)}function qqe(){return[]}function Xqe(){return!1}e.exports=Wqe}(Tv,Tv.exports);var Ev=Tv.exports,vM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var i=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if(a==="string"||a==="number")i.push(o);else if(Array.isArray(o)){if(o.length){var s=r.apply(null,o);s&&i.push(s)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){i.push(o.toString());continue}for(var c in o)t.call(o,c)&&o[c]&&i.push(c)}}}return i.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(vM);var yM=vM.exports,nr={};nr.__esModule=!0,nr.noop=void 0;var xJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};nr.bottom=Sv,nr.cloneLayout=LJ,nr.cloneLayoutItem=Eu,nr.childrenEqual=BJ,nr.collides=wv,nr.compact=_M,nr.compactItem=TM,nr.correctBounds=EM,nr.getLayoutItem=SM,nr.getFirstCollision=Su,nr.getAllCollisions=wM,nr.getStatics=N1,nr.moveElement=R1,nr.moveElementAwayFromCollision=M1,nr.perc=$J,nr.setTransform=FJ,nr.setTopLeft=jJ,nr.sortLayoutItems=L1,nr.sortLayoutItemsByRowCol=AM,nr.sortLayoutItemsByColRow=OM,nr.synchronizeLayoutWithChildren=UJ,nr.validateLayout=GJ,nr.autoBindHandlers=zJ;var NJ=Ev,RJ=bM(NJ),MJ=E,D1=bM(MJ);function bM(e){return e&&e.__esModule?e:{default:e}}function Sv(e){for(var t=0,r=void 0,i=0,n=e.length;i<n;i++)r=e[i].y+e[i].h,r>t&&(t=r);return t}function LJ(e){for(var t=Array(e.length),r=0,i=e.length;r<i;r++)t[r]=Eu(e[r]);return t}function Eu(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable}}function BJ(e,t){return(0,RJ.default)(D1.default.Children.map(e,function(r){return r.key}),D1.default.Children.map(t,function(r){return r.key}))}function wv(e,t){return!(e===t||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function _M(e,t,r){for(var i=N1(e),n=L1(e,t),o=Array(e.length),a=0,s=n.length;a<s;a++){var c=Eu(n[a]);c.static||(c=TM(i,c,t,r,n),i.push(c)),o[e.indexOf(n[a])]=c,c.moved=!1}return o}var HJ={x:"w",y:"h"};function x1(e,t,r,i){var n=HJ[i];t[i]+=1;for(var o=e.indexOf(t),a=o+1;a<e.length;a++){var s=e[a];if(!s.static){if(s.y>t.y+t.h)break;wv(t,s)&&x1(e,s,r+t[n],i)}}t[i]=r}function TM(e,t,r,i,n){var o=r==="vertical",a=r==="horizontal";if(o)for(t.y=Math.min(Sv(e),t.y);t.y>0&&!Su(e,t);)t.y--;else if(a)for(t.y=Math.min(Sv(e),t.y);t.x>0&&!Su(e,t);)t.x--;for(var s=void 0;s=Su(e,t);)a?x1(n,t,s.x+s.w,"x"):x1(n,t,s.y+s.h,"y"),a&&t.x+t.w>i&&(t.x=i-t.w,t.y++);return t}function EM(e,t){for(var r=N1(e),i=0,n=e.length;i<n;i++){var o=e[i];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),!o.static)r.push(o);else for(;Su(r,o);)o.y++}return e}function SM(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r].i===t)return e[r]}function Su(e,t){for(var r=0,i=e.length;r<i;r++)if(wv(e[r],t))return e[r]}function wM(e,t){return e.filter(function(r){return wv(r,t)})}function N1(e){return e.filter(function(t){return t.static})}function R1(e,t,r,i,n,o,a,s){if(t.static||t.y===i&&t.x===r)return e;""+t.i+String(r)+String(i)+t.x+t.y;var c=t.x,u=t.y;typeof r=="number"&&(t.x=r),typeof i=="number"&&(t.y=i),t.moved=!0;var l=L1(e,a),h=a==="vertical"&&typeof i=="number"?u>=i:a==="horizontal"&&typeof r=="number"?c>=r:!1;h&&(l=l.reverse());var f=wM(l,t);if(o&&f.length)return""+t.i,t.x=c,t.y=u,t.moved=!1,e;for(var d=0,p=f.length;d<p;d++){var m=f[d];""+t.i+t.x+t.y+m.i+m.x+m.y,!m.moved&&(m.static?e=M1(e,m,t,n,a):e=M1(e,t,m,n,a))}return e}function M1(e,t,r,i,n,o){var a=n==="horizontal",s=n==="vertical",c=!1;if(i){i=!1;var u={x:a?Math.max(t.x-r.w,0):r.x,y:s?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"};if(!Su(e,u))return""+r.i+u.x+u.y,R1(e,r,a?u.x:void 0,s?u.y:void 0,i,c,n)}return R1(e,r,a?r.x+1:void 0,s?r.y+1:void 0,i,c,n)}function $J(e){return e*100+"%"}function FJ(e){var t=e.top,r=e.left,i=e.width,n=e.height,o="translate("+r+"px,"+t+"px)";return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:i+"px",height:n+"px",position:"absolute"}}function jJ(e){var t=e.top,r=e.left,i=e.width,n=e.height;return{top:t+"px",left:r+"px",width:i+"px",height:n+"px",position:"absolute"}}function L1(e,t){return t==="horizontal"?OM(e):AM(e)}function AM(e){return[].concat(e).sort(function(t,r){return t.y>r.y||t.y===r.y&&t.x>r.x?1:t.y===r.y&&t.x===r.x?0:-1})}function OM(e){return[].concat(e).sort(function(t,r){return t.x>r.x||t.x===r.x&&t.y>r.y?1:-1})}function UJ(e,t,r,i){e=e||[];var n=[];return D1.default.Children.forEach(t,function(o,a){var s=SM(e,String(o.key));if(s)n[a]=Eu(s);else{var c=o.props["data-grid"]||o.props._grid;c?n[a]=Eu(xJ({},c,{i:o.key})):n[a]=Eu({w:1,h:1,x:0,y:Sv(n),i:String(o.key)})}}),n=EM(n,{cols:r}),n=_M(n,i,r),n}function GJ(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout",r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var i=0,n=e.length;i<n;i++){for(var o=e[i],a=0;a<r.length;a++)if(typeof o[r[a]]!="number")throw new Error("ReactGridLayout: "+t+"["+i+"]."+r[a]+" must be a number!");if(o.i&&typeof o.i!="string")throw new Error("ReactGridLayout: "+t+"["+i+"].i must be a string!");if(o.static!==void 0&&typeof o.static!="boolean")throw new Error("ReactGridLayout: "+t+"["+i+"].static must be a boolean!")}}function zJ(e,t){t.forEach(function(r){return e[r]=e[r].bind(e)})}function Qqe(){}nr.noop=function(){};var B1={},kM={exports:{}};(function(e,t){(function(r,i){e.exports=i(Br,E)})(De,function(r,i){r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i;function n(F,U){return U={exports:{}},F(U,U.exports),U.exports}function o(F){return function(){return F}}var a=function(){};a.thatReturns=o,a.thatReturnsFalse=o(!1),a.thatReturnsTrue=o(!0),a.thatReturnsNull=o(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(F){return F};var s=a,c=function(U){};c=function(U){if(U===void 0)throw new Error("invariant requires an error message argument")};function u(F,U,se,ve,ge,_e,pe,be){if(c(U),!F){var G;if(U===void 0)G=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var $=[se,ve,ge,_e,pe,be],re=0;G=new Error(U.replace(/%s/g,function(){return $[re++]})),G.name="Invariant Violation"}throw G.framesToPop=1,G}}var l=u,h=s;{var f=function(U){for(var se=arguments.length,ve=Array(se>1?se-1:0),ge=1;ge<se;ge++)ve[ge-1]=arguments[ge];var _e=0,pe="Warning: "+U.replace(/%s/g,function(){return ve[_e++]});typeof console<"u"&&console.error(pe);try{throw new Error(pe)}catch{}};h=function(U,se){if(se===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(se.indexOf("Failed Composite propType: ")!==0&&!U){for(var ve=arguments.length,ge=Array(ve>2?ve-2:0),_e=2;_e<ve;_e++)ge[_e-2]=arguments[_e];f.apply(void 0,[se].concat(ge))}}}var d=h;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function v(F){if(F==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(F)}function _(){try{if(!Object.assign)return!1;var F=new String("abc");if(F[5]="de",Object.getOwnPropertyNames(F)[0]==="5")return!1;for(var U={},se=0;se<10;se++)U["_"+String.fromCharCode(se)]=se;var ve=Object.getOwnPropertyNames(U).map(function(_e){return U[_e]});if(ve.join("")!=="0123456789")return!1;var ge={};return"abcdefghijklmnopqrst".split("").forEach(function(_e){ge[_e]=_e}),Object.keys(Object.assign({},ge)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var y=_()?Object.assign:function(F,U){for(var se,ve=v(F),ge,_e=1;_e<arguments.length;_e++){se=Object(arguments[_e]);for(var pe in se)m.call(se,pe)&&(ve[pe]=se[pe]);if(p){ge=p(se);for(var be=0;be<ge.length;be++)g.call(se,ge[be])&&(ve[ge[be]]=se[ge[be]])}}return ve},b="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",T=b,S=l,k=d,O=T,D={};function R(F,U,se,ve,ge){for(var _e in F)if(F.hasOwnProperty(_e)){var pe;try{S(typeof F[_e]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",ve||"React class",se,_e,typeof F[_e]),pe=F[_e](U,_e,ve,se,null,O)}catch(G){pe=G}if(k(!pe||pe instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ve||"React class",se,_e,typeof pe),pe instanceof Error&&!(pe.message in D)){D[pe.message]=!0;var be=ge?ge():"";k(!1,"Failed %s type: %s%s",se,pe.message,be??"")}}}var w=R,L=function(F,U){var se=typeof Symbol=="function"&&Symbol.iterator,ve="@@iterator";function ge(Fe){var et=Fe&&(se&&Fe[se]||Fe[ve]);if(typeof et=="function")return et}var _e="<<anonymous>>",pe={array:re("array"),bool:re("boolean"),func:re("function"),number:re("number"),object:re("object"),string:re("string"),symbol:re("symbol"),any:Te(),arrayOf:Se,element:ze(),instanceOf:Ve,node:pt(),objectOf:yt,oneOf:ct,oneOfType:Ut,shape:Lt,exact:tr};function be(Fe,et){return Fe===et?Fe!==0||1/Fe===1/et:Fe!==Fe&&et!==et}function G(Fe){this.message=Fe,this.stack=""}G.prototype=Error.prototype;function $(Fe){var et={},kt=0;function Tt(Gt,At,Pt,Kt,or,ar,On){if(Kt=Kt||_e,ar=ar||Pt,On!==T){if(U)l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(typeof console<"u"){var oo=Kt+":"+Pt;!et[oo]&&kt<3&&(d(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",ar,Kt),et[oo]=!0,kt++)}}return At[Pt]==null?Gt?At[Pt]===null?new G("The "+or+" `"+ar+"` is marked as required "+("in `"+Kt+"`, but its value is `null`.")):new G("The "+or+" `"+ar+"` is marked as required in "+("`"+Kt+"`, but its value is `undefined`.")):null:Fe(At,Pt,Kt,or,ar)}var ht=Tt.bind(null,!1);return ht.isRequired=Tt.bind(null,!0),ht}function re(Fe){function et(kt,Tt,ht,Gt,At,Pt){var Kt=kt[Tt],or=rr(Kt);if(or!==Fe){var ar=ir(Kt);return new G("Invalid "+Gt+" `"+At+"` of type "+("`"+ar+"` supplied to `"+ht+"`, expected ")+("`"+Fe+"`."))}return null}return $(et)}function Te(){return $(s.thatReturnsNull)}function Se(Fe){function et(kt,Tt,ht,Gt,At){if(typeof Fe!="function")return new G("Property `"+At+"` of component `"+ht+"` has invalid PropType notation inside arrayOf.");var Pt=kt[Tt];if(!Array.isArray(Pt)){var Kt=rr(Pt);return new G("Invalid "+Gt+" `"+At+"` of type "+("`"+Kt+"` supplied to `"+ht+"`, expected an array."))}for(var or=0;or<Pt.length;or++){var ar=Fe(Pt,or,ht,Gt,At+"["+or+"]",T);if(ar instanceof Error)return ar}return null}return $(et)}function ze(){function Fe(et,kt,Tt,ht,Gt){var At=et[kt];if(!F(At)){var Pt=rr(At);return new G("Invalid "+ht+" `"+Gt+"` of type "+("`"+Pt+"` supplied to `"+Tt+"`, expected a single ReactElement."))}return null}return $(Fe)}function Ve(Fe){function et(kt,Tt,ht,Gt,At){if(!(kt[Tt]instanceof Fe)){var Pt=Fe.name||_e,Kt=Gn(kt[Tt]);return new G("Invalid "+Gt+" `"+At+"` of type "+("`"+Kt+"` supplied to `"+ht+"`, expected ")+("instance of `"+Pt+"`."))}return null}return $(et)}function ct(Fe){if(!Array.isArray(Fe))return d(!1,"Invalid argument supplied to oneOf, expected an instance of array."),s.thatReturnsNull;function et(kt,Tt,ht,Gt,At){for(var Pt=kt[Tt],Kt=0;Kt<Fe.length;Kt++)if(be(Pt,Fe[Kt]))return null;var or=JSON.stringify(Fe);return new G("Invalid "+Gt+" `"+At+"` of value `"+Pt+"` "+("supplied to `"+ht+"`, expected one of "+or+"."))}return $(et)}function yt(Fe){function et(kt,Tt,ht,Gt,At){if(typeof Fe!="function")return new G("Property `"+At+"` of component `"+ht+"` has invalid PropType notation inside objectOf.");var Pt=kt[Tt],Kt=rr(Pt);if(Kt!=="object")return new G("Invalid "+Gt+" `"+At+"` of type "+("`"+Kt+"` supplied to `"+ht+"`, expected an object."));for(var or in Pt)if(Pt.hasOwnProperty(or)){var ar=Fe(Pt,or,ht,Gt,At+"."+or,T);if(ar instanceof Error)return ar}return null}return $(et)}function Ut(Fe){if(!Array.isArray(Fe))return d(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),s.thatReturnsNull;for(var et=0;et<Fe.length;et++){var kt=Fe[et];if(typeof kt!="function")return d(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",Ar(kt),et),s.thatReturnsNull}function Tt(ht,Gt,At,Pt,Kt){for(var or=0;or<Fe.length;or++){var ar=Fe[or];if(ar(ht,Gt,At,Pt,Kt,T)==null)return null}return new G("Invalid "+Pt+" `"+Kt+"` supplied to "+("`"+At+"`."))}return $(Tt)}function pt(){function Fe(et,kt,Tt,ht,Gt){return ut(et[kt])?null:new G("Invalid "+ht+" `"+Gt+"` supplied to "+("`"+Tt+"`, expected a ReactNode."))}return $(Fe)}function Lt(Fe){function et(kt,Tt,ht,Gt,At){var Pt=kt[Tt],Kt=rr(Pt);if(Kt!=="object")return new G("Invalid "+Gt+" `"+At+"` of type `"+Kt+"` "+("supplied to `"+ht+"`, expected `object`."));for(var or in Fe){var ar=Fe[or];if(ar){var On=ar(Pt,or,ht,Gt,At+"."+or,T);if(On)return On}}return null}return $(et)}function tr(Fe){function et(kt,Tt,ht,Gt,At){var Pt=kt[Tt],Kt=rr(Pt);if(Kt!=="object")return new G("Invalid "+Gt+" `"+At+"` of type `"+Kt+"` "+("supplied to `"+ht+"`, expected `object`."));var or=y({},kt[Tt],Fe);for(var ar in or){var On=Fe[ar];if(!On)return new G("Invalid "+Gt+" `"+At+"` key `"+ar+"` supplied to `"+ht+"`.\nBad object: "+JSON.stringify(kt[Tt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(Fe),null,"  "));var oo=On(Pt,ar,ht,Gt,At+"."+ar,T);if(oo)return oo}return null}return $(et)}function ut(Fe){switch(typeof Fe){case"number":case"string":case"undefined":return!0;case"boolean":return!Fe;case"object":if(Array.isArray(Fe))return Fe.every(ut);if(Fe===null||F(Fe))return!0;var et=ge(Fe);if(et){var kt=et.call(Fe),Tt;if(et!==Fe.entries){for(;!(Tt=kt.next()).done;)if(!ut(Tt.value))return!1}else for(;!(Tt=kt.next()).done;){var ht=Tt.value;if(ht&&!ut(ht[1]))return!1}}else return!1;return!0;default:return!1}}function jt(Fe,et){return Fe==="symbol"||et["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&et instanceof Symbol}function rr(Fe){var et=typeof Fe;return Array.isArray(Fe)?"array":Fe instanceof RegExp?"object":jt(et,Fe)?"symbol":et}function ir(Fe){if(typeof Fe>"u"||Fe===null)return""+Fe;var et=rr(Fe);if(et==="object"){if(Fe instanceof Date)return"date";if(Fe instanceof RegExp)return"regexp"}return et}function Ar(Fe){var et=ir(Fe);switch(et){case"array":case"object":return"an "+et;case"boolean":case"date":case"regexp":return"a "+et;default:return et}}function Gn(Fe){return!Fe.constructor||!Fe.constructor.name?_e:Fe.constructor.name}return pe.checkPropTypes=w,pe.PropTypes=pe,pe},B=n(function(F){{var U=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,se=function(ge){return typeof ge=="object"&&ge!==null&&ge.$$typeof===U},ve=!0;F.exports=L(se,ve)}}),A=n(function(F){/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var U={}.hasOwnProperty;function se(){for(var ve=[],ge=0;ge<arguments.length;ge++){var _e=arguments[ge];if(_e){var pe=typeof _e;if(pe==="string"||pe==="number")ve.push(_e);else if(Array.isArray(_e))ve.push(se.apply(null,_e));else if(pe==="object")for(var be in _e)U.call(_e,be)&&_e[be]&&ve.push(be)}}return ve.join(" ")}F.exports?F.exports=se:window.classNames=se})()});function M(F,U){for(var se=0,ve=F.length;se<ve;se++)if(U.apply(U,[F[se],se,F]))return F[se]}function j(F){return typeof F=="function"||Object.prototype.toString.call(F)==="[object Function]"}function W(F){return typeof F=="number"&&!isNaN(F)}function K(F){return parseInt(F,10)}function oe(F,U,se){if(F[U])return new Error("Invalid prop "+U+" passed to "+se+" - do not set this, set it on the child.")}var fe=["Moz","Webkit","O","ms"];function Ae(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u"||typeof window.document>"u")return"";var U=window.document.documentElement.style;if(F in U)return"";for(var se=0;se<fe.length;se++)if(de(F,fe[se])in U)return fe[se];return""}function de(F,U){return U?""+U+Z(F):F}function Z(F){for(var U="",se=!0,ve=0;ve<F.length;ve++)se?(U+=F[ve].toUpperCase(),se=!1):F[ve]==="-"?se=!0:U+=F[ve];return U}var ne=Ae(),ue=function(F,U){if(!(F instanceof U))throw new TypeError("Cannot call a class as a function")},Oe=function(){function F(U,se){for(var ve=0;ve<se.length;ve++){var ge=se[ve];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(U,ge.key,ge)}}return function(U,se,ve){return se&&F(U.prototype,se),ve&&F(U,ve),U}}(),Ce=function(F,U,se){return U in F?Object.defineProperty(F,U,{value:se,enumerable:!0,configurable:!0,writable:!0}):F[U]=se,F},je=Object.assign||function(F){for(var U=1;U<arguments.length;U++){var se=arguments[U];for(var ve in se)Object.prototype.hasOwnProperty.call(se,ve)&&(F[ve]=se[ve])}return F},Pe=function(F,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);F.prototype=Object.create(U&&U.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(F,U):F.__proto__=U)},Ue=function(F,U){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:F},Ye=function(){function F(U,se){var ve=[],ge=!0,_e=!1,pe=void 0;try{for(var be=U[Symbol.iterator](),G;!(ge=(G=be.next()).done)&&(ve.push(G.value),!(se&&ve.length===se));ge=!0);}catch($){_e=!0,pe=$}finally{try{!ge&&be.return&&be.return()}finally{if(_e)throw pe}}return ve}return function(U,se){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return F(U,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xe="";function qe(F,U){return xe||(xe=M(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(se){return j(F[se])})),j(F[xe])?F[xe](U):!1}function We(F,U,se){var ve=F;do{if(qe(ve,U))return!0;if(ve===se)return!1;ve=ve.parentNode}while(ve);return!1}function vt(F,U,se){F&&(F.attachEvent?F.attachEvent("on"+U,se):F.addEventListener?F.addEventListener(U,se,!0):F["on"+U]=se)}function dt(F,U,se){F&&(F.detachEvent?F.detachEvent("on"+U,se):F.removeEventListener?F.removeEventListener(U,se,!0):F["on"+U]=null)}function Ze(F){var U=F.clientHeight,se=F.ownerDocument.defaultView.getComputedStyle(F);return U+=K(se.borderTopWidth),U+=K(se.borderBottomWidth),U}function Et(F){var U=F.clientWidth,se=F.ownerDocument.defaultView.getComputedStyle(F);return U+=K(se.borderLeftWidth),U+=K(se.borderRightWidth),U}function _t(F){var U=F.clientHeight,se=F.ownerDocument.defaultView.getComputedStyle(F);return U-=K(se.paddingTop),U-=K(se.paddingBottom),U}function Rt(F){var U=F.clientWidth,se=F.ownerDocument.defaultView.getComputedStyle(F);return U-=K(se.paddingLeft),U-=K(se.paddingRight),U}function Kr(F,U){var se=U===U.ownerDocument.body,ve=se?{left:0,top:0}:U.getBoundingClientRect(),ge=F.clientX+U.scrollLeft-ve.left,_e=F.clientY+U.scrollTop-ve.top;return{x:ge,y:_e}}function Mt(F,U){var se=te(F,U,"px");return Ce({},de("transform",ne),se)}function ke(F,U){var se=te(F,U,"");return se}function te(F,U,se){var ve=F.x,ge=F.y,_e="translate("+ve+se+","+ge+se+")";if(U){var pe=""+(typeof U.x=="string"?U.x:U.x+se),be=""+(typeof U.y=="string"?U.y:U.y+se);_e="translate("+pe+", "+be+")"+_e}return _e}function ae(F,U){return F.targetTouches&&M(F.targetTouches,function(se){return U===se.identifier})||F.changedTouches&&M(F.changedTouches,function(se){return U===se.identifier})}function ye(F){if(F.targetTouches&&F.targetTouches[0])return F.targetTouches[0].identifier;if(F.changedTouches&&F.changedTouches[0])return F.changedTouches[0].identifier}function Q(F){if(F){var U=F.getElementById("react-draggable-style-el");U||(U=F.createElement("style"),U.type="text/css",U.id="react-draggable-style-el",U.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,U.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,F.getElementsByTagName("head")[0].appendChild(U)),F.body&&Ie(F.body,"react-draggable-transparent-selection")}}function he(F){try{F&&F.body&&$e(F.body,"react-draggable-transparent-selection"),F.selection?F.selection.empty():window.getSelection().removeAllRanges()}catch{}}function we(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return je({touchAction:"none"},F)}function Ie(F,U){F.classList?F.classList.add(U):F.className.match(new RegExp("(?:^|\\s)"+U+"(?!\\S)"))||(F.className+=" "+U)}function $e(F,U){F.classList?F.classList.remove(U):F.className=F.className.replace(new RegExp("(?:^|\\s)"+U+"(?!\\S)","g"),"")}function Ge(F,U,se){if(!F.props.bounds)return[U,se];var ve=F.props.bounds;ve=typeof ve=="string"?ve:H(ve);var ge=I(F);if(typeof ve=="string"){var _e=ge.ownerDocument,pe=_e.defaultView,be=void 0;if(ve==="parent"?be=ge.parentNode:be=_e.querySelector(ve),!(be instanceof pe.HTMLElement))throw new Error('Bounds selector "'+ve+'" could not find an element.');var G=pe.getComputedStyle(ge),$=pe.getComputedStyle(be);ve={left:-ge.offsetLeft+K($.paddingLeft)+K(G.marginLeft),top:-ge.offsetTop+K($.paddingTop)+K(G.marginTop),right:Rt(be)-Et(ge)-ge.offsetLeft+K($.paddingRight)-K(G.marginRight),bottom:_t(be)-Ze(ge)-ge.offsetTop+K($.paddingBottom)-K(G.marginBottom)}}return W(ve.right)&&(U=Math.min(U,ve.right)),W(ve.bottom)&&(se=Math.min(se,ve.bottom)),W(ve.left)&&(U=Math.max(U,ve.left)),W(ve.top)&&(se=Math.max(se,ve.top)),[U,se]}function Xe(F,U,se){var ve=Math.round(U/F[0])*F[0],ge=Math.round(se/F[1])*F[1];return[ve,ge]}function Qe(F){return F.props.axis==="both"||F.props.axis==="x"}function ot(F){return F.props.axis==="both"||F.props.axis==="y"}function Ot(F,U,se){var ve=typeof U=="number"?ae(F,U):null;if(typeof U=="number"&&!ve)return null;var ge=I(se),_e=se.props.offsetParent||ge.offsetParent||ge.ownerDocument.body;return Kr(ve||F,_e)}function ft(F,U,se){var ve=F.state,ge=!W(ve.lastX),_e=I(F);return ge?{node:_e,deltaX:0,deltaY:0,lastX:U,lastY:se,x:U,y:se}:{node:_e,deltaX:U-ve.lastX,deltaY:se-ve.lastY,lastX:ve.lastX,lastY:ve.lastY,x:U,y:se}}function sr(F,U){var se=F.props.scale;return{node:U.node,x:F.state.x+U.deltaX/se,y:F.state.y+U.deltaY/se,deltaX:U.deltaX/se,deltaY:U.deltaY/se,lastX:F.state.x,lastY:F.state.y}}function H(F){return{left:F.left,top:F.top,right:F.right,bottom:F.bottom}}function I(F){var U=r.findDOMNode(F);if(!U)throw new Error("<DraggableCore>: Unmounted during event!");return U}function x(){}var X={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},me=X.mouse,q=function(F){Pe(U,F);function U(){var se,ve,ge,_e;ue(this,U);for(var pe=arguments.length,be=Array(pe),G=0;G<pe;G++)be[G]=arguments[G];return _e=(ve=(ge=Ue(this,(se=U.__proto__||Object.getPrototypeOf(U)).call.apply(se,[this].concat(be))),ge),ge.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},ge.handleDragStart=function($){if(ge.props.onMouseDown($),!ge.props.allowAnyClick&&typeof $.button=="number"&&$.button!==0)return!1;var re=r.findDOMNode(ge);if(!re||!re.ownerDocument||!re.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Te=re.ownerDocument;if(!(ge.props.disabled||!($.target instanceof Te.defaultView.Node)||ge.props.handle&&!We($.target,ge.props.handle,re)||ge.props.cancel&&We($.target,ge.props.cancel,re))){var Se=ye($);ge.setState({touchIdentifier:Se});var ze=Ot($,Se,ge);if(ze!=null){var Ve=ze.x,ct=ze.y,yt=ft(ge,Ve,ct);ge.props.onStart;var Ut=ge.props.onStart($,yt);Ut!==!1&&(ge.props.enableUserSelectHack&&Q(Te),ge.setState({dragging:!0,lastX:Ve,lastY:ct}),vt(Te,me.move,ge.handleDrag),vt(Te,me.stop,ge.handleDragStop))}}},ge.handleDrag=function($){$.type==="touchmove"&&$.preventDefault();var re=Ot($,ge.state.touchIdentifier,ge);if(re!=null){var Te=re.x,Se=re.y;if(Array.isArray(ge.props.grid)){var ze=Te-ge.state.lastX,Ve=Se-ge.state.lastY,ct=Xe(ge.props.grid,ze,Ve),yt=Ye(ct,2);if(ze=yt[0],Ve=yt[1],!ze&&!Ve)return;Te=ge.state.lastX+ze,Se=ge.state.lastY+Ve}var Ut=ft(ge,Te,Se),pt=ge.props.onDrag($,Ut);if(pt===!1){try{ge.handleDragStop(new MouseEvent("mouseup"))}catch{var Lt=document.createEvent("MouseEvents");Lt.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),ge.handleDragStop(Lt)}return}ge.setState({lastX:Te,lastY:Se})}},ge.handleDragStop=function($){if(ge.state.dragging){var re=Ot($,ge.state.touchIdentifier,ge);if(re!=null){var Te=re.x,Se=re.y,ze=ft(ge,Te,Se),Ve=r.findDOMNode(ge);Ve&&ge.props.enableUserSelectHack&&he(Ve.ownerDocument),ge.setState({dragging:!1,lastX:NaN,lastY:NaN}),ge.props.onStop($,ze),Ve&&(dt(Ve.ownerDocument,me.move,ge.handleDrag),dt(Ve.ownerDocument,me.stop,ge.handleDragStop))}}},ge.onMouseDown=function($){return me=X.mouse,ge.handleDragStart($)},ge.onMouseUp=function($){return me=X.mouse,ge.handleDragStop($)},ge.onTouchStart=function($){return me=X.touch,ge.handleDragStart($)},ge.onTouchEnd=function($){return me=X.touch,ge.handleDragStop($)},ve),Ue(ge,_e)}return Oe(U,[{key:"componentWillUnmount",value:function(){var ve=r.findDOMNode(this);if(ve){var ge=ve.ownerDocument;dt(ge,X.mouse.move,this.handleDrag),dt(ge,X.touch.move,this.handleDrag),dt(ge,X.mouse.stop,this.handleDragStop),dt(ge,X.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&he(ge)}}},{key:"render",value:function(){return i.cloneElement(i.Children.only(this.props.children),{style:we(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),U}(i.Component);q.displayName="DraggableCore",q.propTypes={allowAnyClick:B.bool,disabled:B.bool,enableUserSelectHack:B.bool,offsetParent:function(U,se){if(U[se]&&U[se].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:B.arrayOf(B.number),scale:B.number,handle:B.string,cancel:B.string,onStart:B.func,onDrag:B.func,onStop:B.func,onMouseDown:B.func,className:oe,style:oe,transform:oe},q.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}};var Y=function(F){Pe(U,F);function U(se){ue(this,U);var ve=Ue(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,se));return ve.onDragStart=function(ge,_e){var pe=ve.props.onStart(ge,sr(ve,_e));if(pe===!1)return!1;ve.setState({dragging:!0,dragged:!0})},ve.onDrag=function(ge,_e){if(!ve.state.dragging)return!1;var pe=sr(ve,_e),be={x:pe.x,y:pe.y};if(ve.props.bounds){var G=be.x,$=be.y;be.x+=ve.state.slackX,be.y+=ve.state.slackY;var re=Ge(ve,be.x,be.y),Te=Ye(re,2),Se=Te[0],ze=Te[1];be.x=Se,be.y=ze,be.slackX=ve.state.slackX+(G-be.x),be.slackY=ve.state.slackY+($-be.y),pe.x=be.x,pe.y=be.y,pe.deltaX=be.x-ve.state.x,pe.deltaY=be.y-ve.state.y}var Ve=ve.props.onDrag(ge,pe);if(Ve===!1)return!1;ve.setState(be)},ve.onDragStop=function(ge,_e){if(!ve.state.dragging)return!1;var pe=ve.props.onStop(ge,sr(ve,_e));if(pe===!1)return!1;var be={dragging:!1,slackX:0,slackY:0},G=!!ve.props.position;if(G){var $=ve.props.position,re=$.x,Te=$.y;be.x=re,be.y=Te}ve.setState(be)},ve.state={dragging:!1,dragged:!1,x:se.position?se.position.x:se.defaultPosition.x,y:se.position?se.position.y:se.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},se.position&&!(se.onDrag||se.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),ve}return Oe(U,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&r.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(ve){ve.position&&(!this.props.position||ve.position.x!==this.props.position.x||ve.position.y!==this.props.position.y)&&this.setState({x:ve.position.x,y:ve.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var ve,ge={},_e=null,pe=!!this.props.position,be=!pe||this.state.dragging,G=this.props.position||this.props.defaultPosition,$={x:Qe(this)&&be?this.state.x:G.x,y:ot(this)&&be?this.state.y:G.y};this.state.isElementSVG?_e=ke($,this.props.positionOffset):ge=Mt($,this.props.positionOffset);var re=this.props,Te=re.defaultClassName,Se=re.defaultClassNameDragging,ze=re.defaultClassNameDragged,Ve=i.Children.only(this.props.children),ct=A(Ve.props.className||"",Te,(ve={},Ce(ve,Se,this.state.dragging),Ce(ve,ze,this.state.dragged),ve));return i.createElement(q,je({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(Ve,{className:ct,style:je({},Ve.props.style,ge),transform:_e}))}}]),U}(i.Component);return Y.displayName="Draggable",Y.propTypes=je({},q.propTypes,{axis:B.oneOf(["both","x","y","none"]),bounds:B.oneOfType([B.shape({left:B.number,right:B.number,top:B.number,bottom:B.number}),B.string,B.oneOf([!1])]),defaultClassName:B.string,defaultClassNameDragging:B.string,defaultClassNameDragged:B.string,defaultPosition:B.shape({x:B.number,y:B.number}),positionOffset:B.shape({x:B.oneOfType([B.number,B.string]),y:B.oneOfType([B.number,B.string])}),position:B.shape({x:B.number,y:B.number}),className:oe,style:oe,transform:oe}),Y.defaultProps=je({},q.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}),Y.default=Y,Y.DraggableCore=q,Y})})(kM);var VJ=kM.exports,Av={exports:{}},bd={},Ov={exports:{}},IM={};function CM(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=CM(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Zt(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=CM(e))&&(i&&(i+=" "),i+=t);return i}const WJ=Sa(Object.freeze(Object.defineProperty({__proto__:null,clsx:Zt,default:Zt},Symbol.toStringTag,{value:"Module"})));var Hr={},Uo={};Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.dontSetMe=ZJ,Uo.findInArray=YJ,Uo.int=KJ,Uo.isFunction=qJ,Uo.isNum=XJ;function YJ(e,t){for(let r=0,i=e.length;r<i;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function qJ(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function XJ(e){return typeof e=="number"&&!isNaN(e)}function KJ(e){return parseInt(e,10)}function ZJ(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))}var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.browserPrefixToKey=DM,Ml.browserPrefixToStyle=QJ,Ml.default=void 0,Ml.getPrefix=PM;const H1=["Moz","Webkit","O","ms"];function PM(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const r=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!r||t in r)return"";for(let i=0;i<H1.length;i++)if(DM(t,H1[i])in r)return H1[i];return""}function DM(e,t){return t?"".concat(t).concat(JJ(e)):e}function QJ(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function JJ(e){let t="",r=!0;for(let i=0;i<e.length;i++)r?(t+=e[i].toUpperCase(),r=!1):e[i]==="-"?r=!0:t+=e[i];return t}Ml.default=PM(),Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.addClassName=MM,Hr.addEvent=ree,Hr.addUserSelectStyles=dee,Hr.createCSSTransform=cee,Hr.createSVGTransform=uee,Hr.getTouch=fee,Hr.getTouchIdentifier=hee,Hr.getTranslation=$1,Hr.innerHeight=aee,Hr.innerWidth=see,Hr.matchesSelector=RM,Hr.matchesSelectorAndParentsTo=tee,Hr.offsetXYFromParent=lee,Hr.outerHeight=iee,Hr.outerWidth=oee,Hr.removeClassName=LM,Hr.removeEvent=nee,Hr.removeUserSelectStyles=pee;var ki=Uo,xM=eee(Ml);function NM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(NM=function(i){return i?r:t})(e)}function eee(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=NM(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}let kv="";function RM(e,t){return kv||(kv=(0,ki.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,ki.isFunction)(e[r])})),(0,ki.isFunction)(e[kv])?e[kv](t):!1}function tee(e,t,r){let i=e;do{if(RM(i,t))return!0;if(i===r)return!1;i=i.parentNode}while(i);return!1}function ree(e,t,r,i){if(!e)return;const n={capture:!0,...i};e.addEventListener?e.addEventListener(t,r,n):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function nee(e,t,r,i){if(!e)return;const n={capture:!0,...i};e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function iee(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ki.int)(r.borderTopWidth),t+=(0,ki.int)(r.borderBottomWidth),t}function oee(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ki.int)(r.borderLeftWidth),t+=(0,ki.int)(r.borderRightWidth),t}function aee(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ki.int)(r.paddingTop),t-=(0,ki.int)(r.paddingBottom),t}function see(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ki.int)(r.paddingLeft),t-=(0,ki.int)(r.paddingRight),t}function lee(e,t,r){const n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-n.left)/r,a=(e.clientY+t.scrollTop-n.top)/r;return{x:o,y:a}}function cee(e,t){const r=$1(e,t,"px");return{[(0,xM.browserPrefixToKey)("transform",xM.default)]:r}}function uee(e,t){return $1(e,t,"")}function $1(e,t,r){let{x:i,y:n}=e,o="translate(".concat(i).concat(r,",").concat(n).concat(r,")");if(t){const a="".concat(typeof t.x=="string"?t.x:t.x+r),s="".concat(typeof t.y=="string"?t.y:t.y+r);o="translate(".concat(a,", ").concat(s,")")+o}return o}function fee(e,t){return e.targetTouches&&(0,ki.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,ki.findInArray)(e.changedTouches,r=>t===r.identifier)}function hee(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function dee(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&MM(e.body,"react-draggable-transparent-selection")}function pee(e){if(e)try{if(e.body&&LM(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function MM(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function LM(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Go={};Object.defineProperty(Go,"__esModule",{value:!0}),Go.canDragX=vee,Go.canDragY=yee,Go.createCoreData=_ee,Go.createDraggableData=Tee,Go.getBoundPosition=mee,Go.getControlPosition=bee,Go.snapToGrid=gee;var Ii=Uo,wu=Hr;function mee(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:i}=e.props;i=typeof i=="string"?i:Eee(i);const n=F1(e);if(typeof i=="string"){const{ownerDocument:o}=n,a=o.defaultView;let s;if(i==="parent"?s=n.parentNode:s=o.querySelector(i),!(s instanceof a.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const c=s,u=a.getComputedStyle(n),l=a.getComputedStyle(c);i={left:-n.offsetLeft+(0,Ii.int)(l.paddingLeft)+(0,Ii.int)(u.marginLeft),top:-n.offsetTop+(0,Ii.int)(l.paddingTop)+(0,Ii.int)(u.marginTop),right:(0,wu.innerWidth)(c)-(0,wu.outerWidth)(n)-n.offsetLeft+(0,Ii.int)(l.paddingRight)-(0,Ii.int)(u.marginRight),bottom:(0,wu.innerHeight)(c)-(0,wu.outerHeight)(n)-n.offsetTop+(0,Ii.int)(l.paddingBottom)-(0,Ii.int)(u.marginBottom)}}return(0,Ii.isNum)(i.right)&&(t=Math.min(t,i.right)),(0,Ii.isNum)(i.bottom)&&(r=Math.min(r,i.bottom)),(0,Ii.isNum)(i.left)&&(t=Math.max(t,i.left)),(0,Ii.isNum)(i.top)&&(r=Math.max(r,i.top)),[t,r]}function gee(e,t,r){const i=Math.round(t/e[0])*e[0],n=Math.round(r/e[1])*e[1];return[i,n]}function vee(e){return e.props.axis==="both"||e.props.axis==="x"}function yee(e){return e.props.axis==="both"||e.props.axis==="y"}function bee(e,t,r){const i=typeof t=="number"?(0,wu.getTouch)(e,t):null;if(typeof t=="number"&&!i)return null;const n=F1(r),o=r.props.offsetParent||n.offsetParent||n.ownerDocument.body;return(0,wu.offsetXYFromParent)(i||e,o,r.props.scale)}function _ee(e,t,r){const i=!(0,Ii.isNum)(e.lastX),n=F1(e);return i?{node:n,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:n,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function Tee(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function Eee(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function F1(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Iv={},Cv={};Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.default=See;function See(){}function wee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BM(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Oee(i.key),i)}}function Aee(e,t,r){return t&&BM(e.prototype,t),r&&BM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oee(e){var t=kee(e,"string");return typeof t=="symbol"?t:String(t)}function kee(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j1(e,t)}function j1(e,t){return j1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},j1(e,t)}function Cee(e){var t=Dee();return function(){var i=Pv(e),n;if(t){var o=Pv(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Pee(this,n)}}function Pee(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return en(e)}function en(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pv(e)}Object.defineProperty(Iv,"__esModule",{value:!0}),Iv.default=void 0;var U1=Nee(E),fi=z1(wa),xee=z1(Br),Nn=Hr,Ts=Go,G1=Uo,_d=z1(Cv);function z1(e){return e&&e.__esModule?e:{default:e}}function HM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(HM=function(i){return i?r:t})(e)}function Nee(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=HM(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}function Yn(e,t,r){return t=Ree(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ree(e){var t=Mee(e,"string");return typeof t=="symbol"?t:String(t)}function Mee(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const uo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Es=uo.mouse,Dv=function(e){Iee(r,e);var t=Cee(r);function r(){var i;return wee(this,r),i=t.apply(this,arguments),Yn(en(i),"dragging",!1),Yn(en(i),"lastX",NaN),Yn(en(i),"lastY",NaN),Yn(en(i),"touchIdentifier",null),Yn(en(i),"mounted",!1),Yn(en(i),"handleDragStart",n=>{if(i.props.onMouseDown(n),!i.props.allowAnyClick&&typeof n.button=="number"&&n.button!==0)return!1;const o=i.findDOMNode();if(!o||!o.ownerDocument||!o.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:a}=o;if(i.props.disabled||!(n.target instanceof a.defaultView.Node)||i.props.handle&&!(0,Nn.matchesSelectorAndParentsTo)(n.target,i.props.handle,o)||i.props.cancel&&(0,Nn.matchesSelectorAndParentsTo)(n.target,i.props.cancel,o))return;n.type==="touchstart"&&n.preventDefault();const s=(0,Nn.getTouchIdentifier)(n);i.touchIdentifier=s;const c=(0,Ts.getControlPosition)(n,s,en(i));if(c==null)return;const{x:u,y:l}=c,h=(0,Ts.createCoreData)(en(i),u,l);(0,_d.default)("DraggableCore: handleDragStart: %j",h),(0,_d.default)("calling",i.props.onStart),!(i.props.onStart(n,h)===!1||i.mounted===!1)&&(i.props.enableUserSelectHack&&(0,Nn.addUserSelectStyles)(a),i.dragging=!0,i.lastX=u,i.lastY=l,(0,Nn.addEvent)(a,Es.move,i.handleDrag),(0,Nn.addEvent)(a,Es.stop,i.handleDragStop))}),Yn(en(i),"handleDrag",n=>{const o=(0,Ts.getControlPosition)(n,i.touchIdentifier,en(i));if(o==null)return;let{x:a,y:s}=o;if(Array.isArray(i.props.grid)){let l=a-i.lastX,h=s-i.lastY;if([l,h]=(0,Ts.snapToGrid)(i.props.grid,l,h),!l&&!h)return;a=i.lastX+l,s=i.lastY+h}const c=(0,Ts.createCoreData)(en(i),a,s);if((0,_d.default)("DraggableCore: handleDrag: %j",c),i.props.onDrag(n,c)===!1||i.mounted===!1){try{i.handleDragStop(new MouseEvent("mouseup"))}catch{const h=document.createEvent("MouseEvents");h.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.handleDragStop(h)}return}i.lastX=a,i.lastY=s}),Yn(en(i),"handleDragStop",n=>{if(!i.dragging)return;const o=(0,Ts.getControlPosition)(n,i.touchIdentifier,en(i));if(o==null)return;let{x:a,y:s}=o;if(Array.isArray(i.props.grid)){let h=a-i.lastX||0,f=s-i.lastY||0;[h,f]=(0,Ts.snapToGrid)(i.props.grid,h,f),a=i.lastX+h,s=i.lastY+f}const c=(0,Ts.createCoreData)(en(i),a,s);if(i.props.onStop(n,c)===!1||i.mounted===!1)return!1;const l=i.findDOMNode();l&&i.props.enableUserSelectHack&&(0,Nn.removeUserSelectStyles)(l.ownerDocument),(0,_d.default)("DraggableCore: handleDragStop: %j",c),i.dragging=!1,i.lastX=NaN,i.lastY=NaN,l&&((0,_d.default)("DraggableCore: Removing handlers"),(0,Nn.removeEvent)(l.ownerDocument,Es.move,i.handleDrag),(0,Nn.removeEvent)(l.ownerDocument,Es.stop,i.handleDragStop))}),Yn(en(i),"onMouseDown",n=>(Es=uo.mouse,i.handleDragStart(n))),Yn(en(i),"onMouseUp",n=>(Es=uo.mouse,i.handleDragStop(n))),Yn(en(i),"onTouchStart",n=>(Es=uo.touch,i.handleDragStart(n))),Yn(en(i),"onTouchEnd",n=>(Es=uo.touch,i.handleDragStop(n))),i}return Aee(r,[{key:"componentDidMount",value:function(){this.mounted=!0;const n=this.findDOMNode();n&&(0,Nn.addEvent)(n,uo.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;const n=this.findDOMNode();if(n){const{ownerDocument:o}=n;(0,Nn.removeEvent)(o,uo.mouse.move,this.handleDrag),(0,Nn.removeEvent)(o,uo.touch.move,this.handleDrag),(0,Nn.removeEvent)(o,uo.mouse.stop,this.handleDragStop),(0,Nn.removeEvent)(o,uo.touch.stop,this.handleDragStop),(0,Nn.removeEvent)(n,uo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Nn.removeUserSelectStyles)(o)}}},{key:"findDOMNode",value:function(){var n,o;return(n=this.props)!==null&&n!==void 0&&n.nodeRef?(o=this.props)===null||o===void 0||(o=o.nodeRef)===null||o===void 0?void 0:o.current:xee.default.findDOMNode(this)}},{key:"render",value:function(){return U1.cloneElement(U1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),r}(U1.Component);Iv.default=Dv,Yn(Dv,"displayName","DraggableCore"),Yn(Dv,"propTypes",{allowAnyClick:fi.default.bool,children:fi.default.node.isRequired,disabled:fi.default.bool,enableUserSelectHack:fi.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:fi.default.arrayOf(fi.default.number),handle:fi.default.string,cancel:fi.default.string,nodeRef:fi.default.object,onStart:fi.default.func,onDrag:fi.default.func,onStop:fi.default.func,onMouseDown:fi.default.func,scale:fi.default.number,className:G1.dontSetMe,style:G1.dontSetMe,transform:G1.dontSetMe}),Yn(Dv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(A,M){if(!(A instanceof M))throw new TypeError("Cannot call a class as a function")}function r(A,M){for(var j=0;j<M.length;j++){var W=M[j];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(A,n(W.key),W)}}function i(A,M,j){return M&&r(A.prototype,M),j&&r(A,j),Object.defineProperty(A,"prototype",{writable:!1}),A}function n(A){var M=o(A,"string");return typeof M=="symbol"?M:String(M)}function o(A,M){if(typeof A!="object"||A===null)return A;var j=A[Symbol.toPrimitive];if(j!==void 0){var W=j.call(A,M||"default");if(typeof W!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(A)}function a(A,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(M&&M.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),M&&s(A,M)}function s(A,M){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,K){return W.__proto__=K,W},s(A,M)}function c(A){var M=h();return function(){var W=f(A),K;if(M){var oe=f(this).constructor;K=Reflect.construct(W,arguments,oe)}else K=W.apply(this,arguments);return u(this,K)}}function u(A,M){if(M&&(typeof M=="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(A)}function l(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(A){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},f(A)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return b.default}}),e.default=void 0;var d=O(E),p=S(wa),m=S(Br),g=S(WJ),v=Hr,_=Go,y=Uo,b=S(Iv),T=S(Cv);function S(A){return A&&A.__esModule?A:{default:A}}function k(A){if(typeof WeakMap!="function")return null;var M=new WeakMap,j=new WeakMap;return(k=function(W){return W?j:M})(A)}function O(A,M){if(!M&&A&&A.__esModule)return A;if(A===null||typeof A!="object"&&typeof A!="function")return{default:A};var j=k(M);if(j&&j.has(A))return j.get(A);var W={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oe in A)if(oe!=="default"&&Object.prototype.hasOwnProperty.call(A,oe)){var fe=K?Object.getOwnPropertyDescriptor(A,oe):null;fe&&(fe.get||fe.set)?Object.defineProperty(W,oe,fe):W[oe]=A[oe]}return W.default=A,j&&j.set(A,W),W}function D(){return D=Object.assign?Object.assign.bind():function(A){for(var M=1;M<arguments.length;M++){var j=arguments[M];for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&(A[W]=j[W])}return A},D.apply(this,arguments)}function R(A,M,j){return M=w(M),M in A?Object.defineProperty(A,M,{value:j,enumerable:!0,configurable:!0,writable:!0}):A[M]=j,A}function w(A){var M=L(A,"string");return typeof M=="symbol"?M:String(M)}function L(A,M){if(typeof A!="object"||A===null)return A;var j=A[Symbol.toPrimitive];if(j!==void 0){var W=j.call(A,M||"default");if(typeof W!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(A)}let B=function(A){a(j,A);var M=c(j);function j(W){var K;return t(this,j),K=M.call(this,W),R(l(K),"onDragStart",(oe,fe)=>{if((0,T.default)("Draggable: onDragStart: %j",fe),K.props.onStart(oe,(0,_.createDraggableData)(l(K),fe))===!1)return!1;K.setState({dragging:!0,dragged:!0})}),R(l(K),"onDrag",(oe,fe)=>{if(!K.state.dragging)return!1;(0,T.default)("Draggable: onDrag: %j",fe);const Ae=(0,_.createDraggableData)(l(K),fe),de={x:Ae.x,y:Ae.y,slackX:0,slackY:0};if(K.props.bounds){const{x:ne,y:ue}=de;de.x+=K.state.slackX,de.y+=K.state.slackY;const[Oe,Ce]=(0,_.getBoundPosition)(l(K),de.x,de.y);de.x=Oe,de.y=Ce,de.slackX=K.state.slackX+(ne-de.x),de.slackY=K.state.slackY+(ue-de.y),Ae.x=de.x,Ae.y=de.y,Ae.deltaX=de.x-K.state.x,Ae.deltaY=de.y-K.state.y}if(K.props.onDrag(oe,Ae)===!1)return!1;K.setState(de)}),R(l(K),"onDragStop",(oe,fe)=>{if(!K.state.dragging||K.props.onStop(oe,(0,_.createDraggableData)(l(K),fe))===!1)return!1;(0,T.default)("Draggable: onDragStop: %j",fe);const de={dragging:!1,slackX:0,slackY:0};if(!!K.props.position){const{x:ne,y:ue}=K.props.position;de.x=ne,de.y=ue}K.setState(de)}),K.state={dragging:!1,dragged:!1,x:W.position?W.position.x:W.defaultPosition.x,y:W.position?W.position.y:W.defaultPosition.y,prevPropsPosition:{...W.position},slackX:0,slackY:0,isElementSVG:!1},W.position&&!(W.onDrag||W.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),K}return i(j,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var K,oe;return(K=(oe=this.props)===null||oe===void 0||(oe=oe.nodeRef)===null||oe===void 0?void 0:oe.current)!==null&&K!==void 0?K:m.default.findDOMNode(this)}},{key:"render",value:function(){const{axis:K,bounds:oe,children:fe,defaultPosition:Ae,defaultClassName:de,defaultClassNameDragging:Z,defaultClassNameDragged:ne,position:ue,positionOffset:Oe,scale:Ce,...je}=this.props;let Pe={},Ue=null;const xe=!!!ue||this.state.dragging,qe=ue||Ae,We={x:(0,_.canDragX)(this)&&xe?this.state.x:qe.x,y:(0,_.canDragY)(this)&&xe?this.state.y:qe.y};this.state.isElementSVG?Ue=(0,v.createSVGTransform)(We,Oe):Pe=(0,v.createCSSTransform)(We,Oe);const vt=(0,g.default)(fe.props.className||"",de,{[Z]:this.state.dragging,[ne]:this.state.dragged});return d.createElement(b.default,D({},je,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),d.cloneElement(d.Children.only(fe),{className:vt,style:{...fe.props.style,...Pe},transform:Ue}))}}],[{key:"getDerivedStateFromProps",value:function(K,oe){let{position:fe}=K,{prevPropsPosition:Ae}=oe;return fe&&(!Ae||fe.x!==Ae.x||fe.y!==Ae.y)?((0,T.default)("Draggable: getDerivedStateFromProps %j",{position:fe,prevPropsPosition:Ae}),{x:fe.x,y:fe.y,prevPropsPosition:{...fe}}):null}}]),j}(d.Component);e.default=B,R(B,"displayName","Draggable"),R(B,"propTypes",{...b.default.propTypes,axis:p.default.oneOf(["both","x","y","none"]),bounds:p.default.oneOfType([p.default.shape({left:p.default.number,right:p.default.number,top:p.default.number,bottom:p.default.number}),p.default.string,p.default.oneOf([!1])]),defaultClassName:p.default.string,defaultClassNameDragging:p.default.string,defaultClassNameDragged:p.default.string,defaultPosition:p.default.shape({x:p.default.number,y:p.default.number}),positionOffset:p.default.shape({x:p.default.oneOfType([p.default.number,p.default.string]),y:p.default.oneOfType([p.default.number,p.default.string])}),position:p.default.shape({x:p.default.number,y:p.default.number}),className:y.dontSetMe,style:y.dontSetMe,transform:y.dontSetMe}),R(B,"defaultProps",{...b.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(IM);const{default:$M,DraggableCore:Lee}=IM;Ov.exports=$M,Ov.exports.default=$M,Ov.exports.DraggableCore=Lee;var Bee=Ov.exports,V1={};V1.__esModule=!0,V1.cloneElement=jee;var Hee=$ee(E);function $ee(e){return e&&e.__esModule?e:{default:e}}function FM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function jM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FM(Object(r),!0).forEach(function(i){Fee(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FM(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Fee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jee(e,t){return t.style&&e.props.style&&(t.style=jM(jM({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),Hee.default.cloneElement(e,t)}var Td={};Td.__esModule=!0,Td.resizableProps=void 0;var $t=Uee(wa);function Uee(e){return e&&e.__esModule?e:{default:e}}var Gee={axis:$t.default.oneOf(["both","x","y","none"]),className:$t.default.string,children:$t.default.element.isRequired,draggableOpts:$t.default.shape({allowAnyClick:$t.default.bool,cancel:$t.default.string,children:$t.default.node,disabled:$t.default.bool,enableUserSelectHack:$t.default.bool,offsetParent:$t.default.node,grid:$t.default.arrayOf($t.default.number),handle:$t.default.string,nodeRef:$t.default.object,onStart:$t.default.func,onDrag:$t.default.func,onStop:$t.default.func,onMouseDown:$t.default.func,scale:$t.default.number}),height:$t.default.number.isRequired,handle:$t.default.oneOfType([$t.default.node,$t.default.func]),handleSize:$t.default.arrayOf($t.default.number),lockAspectRatio:$t.default.bool,maxConstraints:$t.default.arrayOf($t.default.number),minConstraints:$t.default.arrayOf($t.default.number),onResizeStop:$t.default.func,onResizeStart:$t.default.func,onResize:$t.default.func,resizeHandles:$t.default.arrayOf($t.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:$t.default.number,width:$t.default.number.isRequired};Td.resizableProps=Gee,bd.__esModule=!0,bd.default=void 0;var W1=Yee(E),zee=Bee,Vee=V1,Wee=Td;function Yee(e){return e&&e.__esModule?e:{default:e}}function Y1(){return Y1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Y1.apply(this,arguments)}function UM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function GM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UM(Object(r),!0).forEach(function(i){Au(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UM(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function qee(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,o;for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function q1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xee(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Au(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X1=function(e){Xee(t,e);function t(){for(var i,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,Au(q1(i),"state",void 0),Au(q1(i),"lastHandleRect",null),Au(q1(i),"slack",null),i}var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.lockAspectRatio=function(n,o,a){return o=n/a,n=o*a,[n,o]},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(n,o){var a=[this.props.minConstraints,this.props.maxConstraints],s=a[0],c=a[1];if(!s&&!c)return[n,o];if(this.props.lockAspectRatio){var u=o===this.props.height;if(u){var l=this.props.width/this.props.height;o=n/l,n=o*l}else{var h=this.props.height/this.props.width;n=o/h,o=n*h}}var f=n,d=o,p=this.slack||[0,0],m=p[0],g=p[1];return n+=m,o+=g,s&&(n=Math.max(s[0],n),o=Math.max(s[1],o)),c&&(n=Math.min(c[0],n),o=Math.min(c[1],o)),this.slack=[m+(f-n),g+(d-o)],[n,o]},r.resizeHandler=function(n,o){var a=this;return function(s,c){var u=c.node,l=c.deltaX,h=c.deltaY;n==="onResizeStart"&&a.resetData();var f=(a.props.axis==="both"||a.props.axis==="x")&&o!=="n"&&o!=="s",d=(a.props.axis==="both"||a.props.axis==="y")&&o!=="e"&&o!=="w";if(!(!f&&!d)){var p=o[0],m=o[o.length-1],g=u.getBoundingClientRect();if(a.lastHandleRect!=null){if(m==="w"){var v=g.left-a.lastHandleRect.left;l+=v}if(p==="n"){var _=g.top-a.lastHandleRect.top;h+=_}}a.lastHandleRect=g,m==="w"&&(l=-l),p==="n"&&(h=-h);var y=a.props.width+(f?l/a.props.transformScale:0),b=a.props.height+(d?h/a.props.transformScale:0),T=a.runConstraints(y,b);y=T[0],b=T[1];var S=y!==a.props.width||b!==a.props.height,k=typeof a.props[n]=="function"?a.props[n]:null,O=n==="onResize"&&!S;k&&!O&&(typeof s.persist=="function"&&s.persist(),k(s,{node:u,size:{width:y,height:b},handle:o})),n==="onResizeStop"&&a.resetData()}}},r.renderResizeHandle=function(n){var o=this.props.handle;return o?typeof o=="function"?o(n):o:W1.default.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+n})},r.render=function(){var n=this,o=this.props,a=o.children,s=o.className,c=o.draggableOpts;o.width,o.height,o.handle,o.handleSize,o.lockAspectRatio,o.axis,o.minConstraints,o.maxConstraints,o.onResize,o.onResizeStop,o.onResizeStart;var u=o.resizeHandles;o.transformScale;var l=qee(o,["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"]);return(0,Vee.cloneElement)(a,GM(GM({},l),{},{className:(s?s+" ":"")+"react-resizable",children:[].concat(a.props.children,u.map(function(h){return W1.default.createElement(zee.DraggableCore,Y1({},c,{key:"resizableHandle-"+h,onStop:n.resizeHandler("onResizeStop",h),onStart:n.resizeHandler("onResizeStart",h),onDrag:n.resizeHandler("onResize",h)}),n.renderResizeHandle(h))}))}))},t}(W1.default.Component);bd.default=X1,Au(X1,"propTypes",Wee.resizableProps),Au(X1,"defaultProps",{handleSize:[20,20],lockAspectRatio:!1,axis:"both",minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1});var xv={};xv.__esModule=!0,xv.default=void 0;var K1=Jee(E),Kee=zM(wa),Zee=zM(bd),Qee=Td;function zM(e){return e&&e.__esModule?e:{default:e}}function VM(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return VM=function(){return e},e}function Jee(e){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var t=VM();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function Z1(){return Z1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Z1.apply(this,arguments)}function WM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function Nv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WM(Object(r),!0).forEach(function(i){Rv(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WM(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ete(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,o;for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function YM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tte(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Rv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qM=function(e){tte(t,e);function t(){for(var i,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,Rv(YM(i),"state",{width:i.props.width,height:i.props.height,propsWidth:i.props.width,propsHeight:i.props.height}),Rv(YM(i),"onResize",function(s,c){var u=c.size;i.props.onResize?(s.persist&&s.persist(),i.setState(u,function(){return i.props.onResize&&i.props.onResize(s,c)})):i.setState(u)}),i}t.getDerivedStateFromProps=function(n,o){return o.propsWidth!==n.width||o.propsHeight!==n.height?{width:n.width,height:n.height,propsWidth:n.width,propsHeight:n.height}:null};var r=t.prototype;return r.render=function(){var n=this.props,o=n.handle,a=n.handleSize;n.onResize;var s=n.onResizeStart,c=n.onResizeStop,u=n.draggableOpts,l=n.minConstraints,h=n.maxConstraints,f=n.lockAspectRatio,d=n.axis;n.width,n.height;var p=n.resizeHandles,m=n.style,g=n.transformScale,v=ete(n,["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"]);return K1.createElement(Zee.default,{axis:d,draggableOpts:u,handle:o,handleSize:a,height:this.state.height,lockAspectRatio:f,maxConstraints:h,minConstraints:l,onResizeStart:s,onResize:this.onResize,onResizeStop:c,resizeHandles:p,transformScale:g,width:this.state.width},K1.createElement("div",Z1({},v,{style:Nv(Nv({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(K1.Component);xv.default=qM,Rv(qM,"propTypes",Nv(Nv({},Qee.resizableProps),{},{children:Kee.default.element})),Av.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Av.exports.Resizable=bd.default,Av.exports.ResizableBox=xv.default;var rte=Av.exports;B1.__esModule=!0;var nte=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ite=E,Ed=Q1(ite),ote=wa,Er=Q1(ote),ate=VJ,ste=rte,Mv=nr,lte=yM,cte=Q1(lte);function Q1(e){return e&&e.__esModule?e:{default:e}}function ute(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var J1=function(e){fte(t,e);function t(){var r,i,n;ute(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=(r=(i=XM(this,e.call.apply(e,[this].concat(a))),i),i.state={resizing:null,dragging:null,className:""},r),XM(i,n)}return t.prototype.calcColWidth=function(){var i=this.props,n=i.margin,o=i.containerPadding,a=i.containerWidth,s=i.cols;return(a-n[0]*(s-1)-o[0]*2)/s},t.prototype.calcPosition=function(i,n,o,a,s){var c=this.props,u=c.margin,l=c.containerPadding,h=c.rowHeight,f=this.calcColWidth(),d={left:Math.round((f+u[0])*i+l[0]),top:Math.round((h+u[1])*n+l[1]),width:o===1/0?o:Math.round(f*o+Math.max(0,o-1)*u[0]),height:a===1/0?a:Math.round(h*a+Math.max(0,a-1)*u[1])};return s&&s.resizing&&(d.width=Math.round(s.resizing.width),d.height=Math.round(s.resizing.height)),s&&s.dragging&&(d.top=Math.round(s.dragging.top),d.left=Math.round(s.dragging.left)),d},t.prototype.calcXY=function(i,n){var o=this.props,a=o.margin,s=o.cols,c=o.rowHeight,u=o.w,l=o.h,h=o.maxRows,f=this.calcColWidth(),d=Math.round((n-a[0])/(f+a[0])),p=Math.round((i-a[1])/(c+a[1]));return d=Math.max(Math.min(d,s-u),0),p=Math.max(Math.min(p,h-l),0),{x:d,y:p}},t.prototype.calcWH=function(i){var n=i.height,o=i.width,a=this.props,s=a.margin,c=a.maxRows,u=a.cols,l=a.rowHeight,h=a.x,f=a.y,d=this.calcColWidth(),p=Math.round((o+s[0])/(d+s[0])),m=Math.round((n+s[1])/(l+s[1]));return p=Math.max(Math.min(p,u-h),0),m=Math.max(Math.min(m,c-f),0),{w:p,h:m}},t.prototype.createStyle=function(i){var n=this.props,o=n.usePercentages,a=n.containerWidth,s=n.useCSSTransforms,c=void 0;return s?c=(0,Mv.setTransform)(i):(c=(0,Mv.setTopLeft)(i),o&&(c.left=(0,Mv.perc)(i.left/a),c.width=(0,Mv.perc)(i.width/a))),c},t.prototype.mixinDraggable=function(i){return Ed.default.createElement(ate.DraggableCore,{onStart:this.onDragHandler("onDragStart"),onDrag:this.onDragHandler("onDrag"),onStop:this.onDragHandler("onDragStop"),handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:"")},i)},t.prototype.mixinResizable=function(i,n){var o=this.props,a=o.cols,s=o.x,c=o.minW,u=o.minH,l=o.maxW,h=o.maxH,f=this.calcPosition(0,0,a-s,0).width,d=this.calcPosition(0,0,c,u),p=this.calcPosition(0,0,l,h),m=[d.width,d.height],g=[Math.min(p.width,f),Math.min(p.height,1/0)];return Ed.default.createElement(ste.Resizable,{width:n.width,height:n.height,minConstraints:m,maxConstraints:g,onResizeStop:this.onResizeHandler("onResizeStop"),onResizeStart:this.onResizeHandler("onResizeStart"),onResize:this.onResizeHandler("onResize")},i)},t.prototype.onDragHandler=function(i){var n=this;return function(o,a){var s=a.node,c=a.deltaX,u=a.deltaY,l=n.props[i];if(l){var h={top:0,left:0};switch(i){case"onDragStart":{var f=s.offsetParent;if(!f)return;var d=f.getBoundingClientRect(),p=s.getBoundingClientRect();h.left=p.left-d.left+f.scrollLeft,h.top=p.top-d.top+f.scrollTop,n.setState({dragging:h});break}case"onDrag":if(!n.state.dragging)throw new Error("onDrag called before onDragStart.");h.left=n.state.dragging.left+c,h.top=n.state.dragging.top+u,n.setState({dragging:h});break;case"onDragStop":if(!n.state.dragging)throw new Error("onDragEnd called before onDragStart.");h.left=n.state.dragging.left,h.top=n.state.dragging.top,n.setState({dragging:null});break;default:throw new Error("onDragHandler called with unrecognized handlerName: "+i)}var m=n.calcXY(h.top,h.left),g=m.x,v=m.y;return l.call(n,n.props.i,g,v,{e:o,node:s,newPosition:h})}}},t.prototype.onResizeHandler=function(i){var n=this;return function(o,a){var s=a.node,c=a.size,u=n.props[i];if(u){var l=n.props,h=l.cols,f=l.x,d=l.i,p=l.maxW,m=l.minW,g=l.maxH,v=l.minH,_=n.calcWH(c),y=_.w,b=_.h;y=Math.min(y,h-f),y=Math.max(y,1),y=Math.max(Math.min(y,p),m),b=Math.max(Math.min(b,g),v),n.setState({resizing:i==="onResizeStop"?null:c}),u.call(n,d,y,b,{e:o,node:s,size:c})}}},t.prototype.render=function(){var i=this.props,n=i.x,o=i.y,a=i.w,s=i.h,c=i.isDraggable,u=i.isResizable,l=i.useCSSTransforms,h=this.calcPosition(n,o,a,s,this.state),f=Ed.default.Children.only(this.props.children),d=Ed.default.cloneElement(f,{className:(0,cte.default)("react-grid-item",f.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":c,"react-draggable-dragging":!!this.state.dragging,cssTransforms:l}),style:nte({},this.props.style,f.props.style,this.createStyle(h))});return u&&(d=this.mixinResizable(d,h)),c&&(d=this.mixinDraggable(d)),d},t}(Ed.default.Component);J1.propTypes={children:Er.default.element,cols:Er.default.number.isRequired,containerWidth:Er.default.number.isRequired,rowHeight:Er.default.number.isRequired,margin:Er.default.array.isRequired,maxRows:Er.default.number.isRequired,containerPadding:Er.default.array.isRequired,x:Er.default.number.isRequired,y:Er.default.number.isRequired,w:Er.default.number.isRequired,h:Er.default.number.isRequired,minW:function(t,r){var i=t[r];if(typeof i!="number")return new Error("minWidth not Number");if(i>t.w||i>t.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(t,r){var i=t[r];if(typeof i!="number")return new Error("maxWidth not Number");if(i<t.w||i<t.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(t,r){var i=t[r];if(typeof i!="number")return new Error("minHeight not Number");if(i>t.h||i>t.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(t,r){var i=t[r];if(typeof i!="number")return new Error("maxHeight not Number");if(i<t.h||i<t.minH)return new Error("maxHeight smaller than item height/minHeight")},i:Er.default.string.isRequired,onDragStop:Er.default.func,onDragStart:Er.default.func,onDrag:Er.default.func,onResizeStop:Er.default.func,onResizeStart:Er.default.func,onResize:Er.default.func,isDraggable:Er.default.bool.isRequired,isResizable:Er.default.bool.isRequired,static:Er.default.bool,useCSSTransforms:Er.default.bool.isRequired,className:Er.default.string,handle:Er.default.string,cancel:Er.default.string},J1.defaultProps={className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0},B1.default=J1,_v.__esModule=!0;var KM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},hte=E,Ll=Sd(hte),dte=wa,Sr=Sd(dte),pte=Ev,ZM=Sd(pte),mte=yM,gte=Sd(mte),cr=nr,vte=B1,QM=Sd(vte);function Sd(e){return e&&e.__esModule?e:{default:e}}function yte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bte(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function _te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Lv=function(e){_te(t,e);function t(r,i){yte(this,t);var n=bte(this,e.call(this,r,i));return Tte.call(n),(0,cr.autoBindHandlers)(n,["onDragStart","onDrag","onDragStop","onResizeStart","onResize","onResizeStop"]),n}return t.prototype.componentDidMount=function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)},t.prototype.componentWillReceiveProps=function(i){var n=void 0;if(!(0,ZM.default)(i.layout,this.props.layout)||i.compactType!==this.props.compactType?n=i.layout:(0,cr.childrenEqual)(this.props.children,i.children)||(n=this.state.layout),n){var o=(0,cr.synchronizeLayoutWithChildren)(n,i.children,i.cols,this.compactType(i)),a=this.state.layout;this.setState({layout:o}),this.onLayoutMaybeChanged(o,a)}},t.prototype.containerHeight=function(){if(this.props.autoSize){var i=(0,cr.bottom)(this.state.layout),n=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return i*this.props.rowHeight+(i-1)*this.props.margin[1]+n*2+"px"}},t.prototype.compactType=function(i){return i||(i=this.props),i.verticalCompact===!1?null:i.compactType},t.prototype.onDragStart=function(i,n,o,a){var s=a.e,c=a.node,u=this.state.layout,l=(0,cr.getLayoutItem)(u,i);if(l)return this.setState({oldDragItem:(0,cr.cloneLayoutItem)(l),oldLayout:this.state.layout}),this.props.onDragStart(u,l,l,null,s,c)},t.prototype.onDrag=function(i,n,o,a){var s=a.e,c=a.node,u=this.state.oldDragItem,l=this.state.layout,h=this.props.cols,f=(0,cr.getLayoutItem)(l,i);if(f){var d={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i},p=!0;l=(0,cr.moveElement)(l,f,n,o,p,this.props.preventCollision,this.compactType(),h),this.props.onDrag(l,u,f,d,s,c),this.setState({layout:(0,cr.compact)(l,this.compactType(),h),activeDrag:d})}},t.prototype.onDragStop=function(i,n,o,a){var s=a.e,c=a.node,u=this.state.oldDragItem,l=this.state.layout,h=this.props,f=h.cols,d=h.preventCollision,p=(0,cr.getLayoutItem)(l,i);if(p){var m=!0;l=(0,cr.moveElement)(l,p,n,o,m,d,this.compactType(),f),this.props.onDragStop(l,u,p,null,s,c);var g=(0,cr.compact)(l,this.compactType(),f),v=this.state.oldLayout;this.setState({activeDrag:null,layout:g,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(g,v)}},t.prototype.onLayoutMaybeChanged=function(i,n){n||(n=this.state.layout),(0,ZM.default)(n,i)||this.props.onLayoutChange(i)},t.prototype.onResizeStart=function(i,n,o,a){var s=a.e,c=a.node,u=this.state.layout,l=(0,cr.getLayoutItem)(u,i);l&&(this.setState({oldResizeItem:(0,cr.cloneLayoutItem)(l),oldLayout:this.state.layout}),this.props.onResizeStart(u,l,l,null,s,c))},t.prototype.onResize=function(i,n,o,a){var s=a.e,c=a.node,u=this.state,l=u.layout,h=u.oldResizeItem,f=this.props,d=f.cols,p=f.preventCollision,m=(0,cr.getLayoutItem)(l,i);if(m){var g=void 0;if(p){var v=(0,cr.getAllCollisions)(l,KM({},m,{w:n,h:o})).filter(function(T){return T.i!==m.i});if(g=v.length>0,g){var _=1/0,y=1/0;v.forEach(function(T){T.x>m.x&&(_=Math.min(_,T.x)),T.y>m.y&&(y=Math.min(y,T.y))}),Number.isFinite(_)&&(m.w=_-m.x),Number.isFinite(y)&&(m.h=y-m.y)}}g||(m.w=n,m.h=o);var b={w:m.w,h:m.h,x:m.x,y:m.y,static:!0,i};this.props.onResize(l,h,m,b,s,c),this.setState({layout:(0,cr.compact)(l,this.compactType(),d),activeDrag:b})}},t.prototype.onResizeStop=function(i,n,o,a){var s=a.e,c=a.node,u=this.state,l=u.layout,h=u.oldResizeItem,f=this.props.cols,d=(0,cr.getLayoutItem)(l,i);this.props.onResizeStop(l,h,d,null,s,c);var p=(0,cr.compact)(l,this.compactType(),f),m=this.state.oldLayout;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null}),this.onLayoutMaybeChanged(p,m)},t.prototype.placeholder=function(){var i=this.state.activeDrag;if(!i)return null;var n=this.props,o=n.width,a=n.cols,s=n.margin,c=n.containerPadding,u=n.rowHeight,l=n.maxRows,h=n.useCSSTransforms;return Ll.default.createElement(QM.default,{w:i.w,h:i.h,x:i.x,y:i.y,i:i.i,className:"react-grid-placeholder",containerWidth:o,cols:a,margin:s,containerPadding:c||s,maxRows:l,rowHeight:u,isDraggable:!1,isResizable:!1,useCSSTransforms:h},Ll.default.createElement("div",null))},t.prototype.processGridItem=function(i){if(!(!i||!i.key)){var n=(0,cr.getLayoutItem)(this.state.layout,String(i.key));if(!n)return null;var o=this.props,a=o.width,s=o.cols,c=o.margin,u=o.containerPadding,l=o.rowHeight,h=o.maxRows,f=o.isDraggable,d=o.isResizable,p=o.useCSSTransforms,m=o.draggableCancel,g=o.draggableHandle,v=this.state.mounted,_=!!(!n.static&&f&&(n.isDraggable||n.isDraggable==null)),y=!!(!n.static&&d&&(n.isResizable||n.isResizable==null));return Ll.default.createElement(QM.default,{containerWidth:a,cols:s,margin:c,containerPadding:u||c,maxRows:h,rowHeight:l,cancel:m,handle:g,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:_,isResizable:y,useCSSTransforms:p&&v,usePercentages:!v,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static},i)}},t.prototype.render=function(){var i=this,n=this.props,o=n.className,a=n.style,s=(0,gte.default)("react-grid-layout",o),c=KM({height:this.containerHeight()},a);return Ll.default.createElement("div",{className:s,style:c},Ll.default.Children.map(this.props.children,function(u){return i.processGridItem(u)}),this.placeholder())},t}(Ll.default.Component);Lv.displayName="ReactGridLayout",Lv.propTypes={className:Sr.default.string,style:Sr.default.object,width:Sr.default.number,autoSize:Sr.default.bool,cols:Sr.default.number,draggableCancel:Sr.default.string,draggableHandle:Sr.default.string,verticalCompact:function(t){t.verticalCompact},compactType:Sr.default.oneOf(["vertical","horizontal"]),layout:function(t){var r=t.layout;r!==void 0&&(0,cr.validateLayout)(r,"layout")},margin:Sr.default.arrayOf(Sr.default.number),containerPadding:Sr.default.arrayOf(Sr.default.number),rowHeight:Sr.default.number,maxRows:Sr.default.number,isDraggable:Sr.default.bool,isResizable:Sr.default.bool,preventCollision:Sr.default.bool,useCSSTransforms:Sr.default.bool,onLayoutChange:Sr.default.func,onDragStart:Sr.default.func,onDrag:Sr.default.func,onDragStop:Sr.default.func,onResizeStart:Sr.default.func,onResize:Sr.default.func,onResizeStop:Sr.default.func,children:function(t,r){var i=t[r],n={};Ll.default.Children.forEach(i,function(o){if(n[o.key])throw new Error('Duplicate child key "'+o.key+'" found! This will cause problems in ReactGridLayout.');n[o.key]=!0})}},Lv.defaultProps={autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isDraggable:!0,isResizable:!0,useCSSTransforms:!0,verticalCompact:!0,compactType:"vertical",preventCollision:!1,onLayoutChange:cr.noop,onDragStart:cr.noop,onDrag:cr.noop,onDragStop:cr.noop,onResizeStart:cr.noop,onResize:cr.noop,onResizeStop:cr.noop};var Tte=function(){this.state={activeDrag:null,layout:(0,cr.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,this.compactType()),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null}};_v.default=Lv;var eS={},Bl={};Bl.__esModule=!0,Bl.getBreakpointFromWidth=Ete,Bl.getColsFromBreakpoint=Ste,Bl.findOrGenerateResponsiveLayout=wte,Bl.sortBreakpoints=tS;var Bv=nr;function Ete(e,t){for(var r=tS(e),i=r[0],n=1,o=r.length;n<o;n++){var a=r[n];t>e[a]&&(i=a)}return i}function Ste(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function wte(e,t,r,i,n,o){if(e[r])return(0,Bv.cloneLayout)(e[r]);for(var a=e[i],s=tS(t),c=s.slice(s.indexOf(r)),u=0,l=c.length;u<l;u++){var h=c[u];if(e[h]){a=e[h];break}}return a=(0,Bv.cloneLayout)(a||[]),(0,Bv.compact)((0,Bv.correctBounds)(a,{cols:n}),o,n)}function tS(e){var t=Object.keys(e);return t.sort(function(r,i){return e[r]-e[i]})}eS.__esModule=!0;var JM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ate=E,eL=Hv(Ate),Ote=wa,Hl=Hv(Ote),kte=Ev,rS=Hv(kte),Ou=nr,$l=Bl,Ite=_v,Cte=Hv(Ite);function Hv(e){return e&&e.__esModule?e:{default:e}}function Pte(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}function Dte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function xte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rL=function(t){return Object.prototype.toString.call(t)},nS=function(e){xte(t,e);function t(){var r,i,n;Dte(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=(r=(i=tL(this,e.call.apply(e,[this].concat(a))),i),i.state=i.generateInitialState(),i.onLayoutChange=function(c){var u;i.props.onLayoutChange(c,JM({},i.props.layouts,(u={},u[i.state.breakpoint]=c,u)))},r),tL(i,n)}return t.prototype.generateInitialState=function(){var i=this.props,n=i.width,o=i.breakpoints,a=i.layouts,s=i.cols,c=(0,$l.getBreakpointFromWidth)(o,n),u=(0,$l.getColsFromBreakpoint)(c,s),l=this.props.verticalCompact===!1?null:this.props.compactType,h=(0,$l.findOrGenerateResponsiveLayout)(a,o,c,c,u,l);return{layout:h,breakpoint:c,cols:u}},t.prototype.componentWillReceiveProps=function(i){if(i.width!=this.props.width||i.breakpoint!==this.props.breakpoint||!(0,rS.default)(i.breakpoints,this.props.breakpoints)||!(0,rS.default)(i.cols,this.props.cols))this.onWidthChange(i);else if(!(0,rS.default)(i.layouts,this.props.layouts)){var n=this.state,o=n.breakpoint,a=n.cols,s=(0,$l.findOrGenerateResponsiveLayout)(i.layouts,i.breakpoints,o,o,a,i.compactType);this.setState({layout:s})}},t.prototype.onWidthChange=function(i){var n=i.breakpoints,o=i.cols,a=i.layouts,s=i.compactType,c=i.breakpoint||(0,$l.getBreakpointFromWidth)(i.breakpoints,i.width),u=this.state.breakpoint;if(u!==c||this.props.breakpoints!==n||this.props.cols!==o){u in a||(a[u]=(0,Ou.cloneLayout)(this.state.layout));var l=(0,$l.getColsFromBreakpoint)(c,o),h=(0,$l.findOrGenerateResponsiveLayout)(a,n,c,u,l,s);h=(0,Ou.synchronizeLayoutWithChildren)(h,i.children,l,s),a[c]=h,this.props.onLayoutChange(h,a),this.props.onBreakpointChange(c,l),this.props.onWidthChange(i.width,i.margin,l,i.containerPadding),this.setState({breakpoint:c,layout:h,cols:l})}},t.prototype.render=function(){var i=this.props;i.breakpoint,i.breakpoints,i.cols,i.layouts,i.onBreakpointChange,i.onLayoutChange,i.onWidthChange;var n=Pte(i,["breakpoint","breakpoints","cols","layouts","onBreakpointChange","onLayoutChange","onWidthChange"]);return eL.default.createElement(Cte.default,JM({},n,{onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))},t}(eL.default.Component);nS.propTypes={breakpoint:Hl.default.string,breakpoints:Hl.default.object,cols:Hl.default.object,layouts:function(t,r){if(rL(t[r])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+rL(t[r]));Object.keys(t[r]).forEach(function(i){if(!(i in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,Ou.validateLayout)(t.layouts[i],"layouts."+i)})},width:Hl.default.number.isRequired,onBreakpointChange:Hl.default.func,onLayoutChange:Hl.default.func,onWidthChange:Hl.default.func},nS.defaultProps={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},layouts:{},onBreakpointChange:Ou.noop,onLayoutChange:Ou.noop,onWidthChange:Ou.noop},eS.default=nS;var iS={};iS.__esModule=!0;var Nte=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};iS.default=Ute;var Rte=E,oS=aS(Rte),Mte=wa,Lte=aS(Mte),Bte=Br,Hte=aS(Bte);function aS(e){return e&&e.__esModule?e:{default:e}}function $te(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}function Fte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function jte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ute(e){var t,r;return r=t=function(i){jte(n,i);function n(){var o,a,s;Fte(this,n);for(var c=arguments.length,u=Array(c),l=0;l<c;l++)u[l]=arguments[l];return s=(o=(a=nL(this,i.call.apply(i,[this].concat(u))),a),a.state={width:1280},a.mounted=!1,a.onWindowResize=function(){if(a.mounted){var h=Hte.default.findDOMNode(a);h instanceof HTMLElement&&a.setState({width:h.offsetWidth})}},o),nL(a,s)}return n.prototype.componentDidMount=function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},n.prototype.componentWillUnmount=function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)},n.prototype.render=function(){var a=this.props,s=a.measureBeforeMount,c=$te(a,["measureBeforeMount"]);return s&&!this.mounted?oS.default.createElement("div",{className:this.props.className,style:this.props.style}):oS.default.createElement(e,Nte({},c,this.state))},n}(oS.default.Component),t.defaultProps={measureBeforeMount:!1},t.propTypes={measureBeforeMount:Lte.default.bool},r}(function(e){e.exports=_v.default,e.exports.utils=nr,e.exports.Responsive=eS.default,e.exports.Responsive.utils=Bl,e.exports.WidthProvider=iS.default})(gM);var Gte=gM.exports;const zte=ui(Gte);var iL={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(typeof window<"u"?window:De,function(){if(typeof window>"u")return null;var r=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),i=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||function(l){return r.setTimeout(l,20)},n=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||function(l){r.clearTimeout(l)};function o(l,h){var f=Object.prototype.toString.call(l),d=f==="[object Array]"||f==="[object NodeList]"||f==="[object HTMLCollection]"||f==="[object Object]"||typeof jQuery<"u"&&l instanceof jQuery||typeof Elements<"u"&&l instanceof Elements,p=0,m=l.length;if(d)for(;p<m;p++)h(l[p]);else h(l)}function a(l){if(!l.getBoundingClientRect)return{width:l.offsetWidth,height:l.offsetHeight};var h=l.getBoundingClientRect();return{width:Math.round(h.width),height:Math.round(h.height)}}function s(l,h){Object.keys(h).forEach(function(f){l.style[f]=h[f]})}var c=function(l,h){var f=0;function d(){var m=[];this.add=function(_){m.push(_)};var g,v;this.call=function(_){for(g=0,v=m.length;g<v;g++)m[g].call(this,_)},this.remove=function(_){var y=[];for(g=0,v=m.length;g<v;g++)m[g]!==_&&y.push(m[g]);m=y},this.length=function(){return m.length}}function p(m,g){if(m){if(m.resizedAttached){m.resizedAttached.add(g);return}m.resizedAttached=new d,m.resizedAttached.add(g),m.resizeSensor=document.createElement("div"),m.resizeSensor.dir="ltr",m.resizeSensor.className="resize-sensor";var v={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},_={position:"absolute",left:"0px",top:"0px",transition:"0s"};s(m.resizeSensor,v);var y=document.createElement("div");y.className="resize-sensor-expand",s(y,v);var b=document.createElement("div");s(b,_),y.appendChild(b);var T=document.createElement("div");T.className="resize-sensor-shrink",s(T,v);var S=document.createElement("div");s(S,_),s(S,{width:"200%",height:"200%"}),T.appendChild(S),m.resizeSensor.appendChild(y),m.resizeSensor.appendChild(T),m.appendChild(m.resizeSensor);var k=window.getComputedStyle(m),O=k?k.getPropertyValue("position"):null;O!=="absolute"&&O!=="relative"&&O!=="fixed"&&O!=="sticky"&&(m.style.position="relative");var D=!1,R=0,w=a(m),L=0,B=0,A=!0;f=0;var M=function(){var fe=m.offsetWidth,Ae=m.offsetHeight;b.style.width=fe+10+"px",b.style.height=Ae+10+"px",y.scrollLeft=fe+10,y.scrollTop=Ae+10,T.scrollLeft=fe+10,T.scrollTop=Ae+10},j=function(){if(A){var fe=m.offsetWidth===0&&m.offsetHeight===0;if(fe){f||(f=i(function(){f=0,j()}));return}else A=!1}M()};m.resizeSensor.resetSensor=j;var W=function(){R=0,D&&(L=w.width,B=w.height,m.resizedAttached&&m.resizedAttached.call(w))},K=function(){w=a(m),D=w.width!==L||w.height!==B,D&&!R&&(R=i(W)),j()},oe=function(fe,Ae,de){fe.attachEvent?fe.attachEvent("on"+Ae,de):fe.addEventListener(Ae,de)};oe(y,"scroll",K),oe(T,"scroll",K),f=i(function(){f=0,j()})}}o(l,function(m){p(m,h)}),this.detach=function(m){f||(n(f),f=0),c.detach(l,m)},this.reset=function(){l.resizeSensor.resetSensor()}};if(c.reset=function(l){o(l,function(h){h.resizeSensor.resetSensor()})},c.detach=function(l,h){o(l,function(f){f&&(f.resizedAttached&&typeof h=="function"&&(f.resizedAttached.remove(h),f.resizedAttached.length())||f.resizeSensor&&(f.contains(f.resizeSensor)&&f.removeChild(f.resizeSensor),delete f.resizeSensor,delete f.resizedAttached))})},typeof MutationObserver<"u"){var u=new MutationObserver(function(l){for(var h in l)if(l.hasOwnProperty(h))for(var f=l[h].addedNodes,d=0;d<f.length;d++)f[d].resizeSensor&&c.reset(f[d])});document.addEventListener("DOMContentLoaded",function(l){u.observe(document.body,{childList:!0,subtree:!0})})}return c})})(iL);var oL=iL.exports,aL={exports:{}};(function(e,t){(function(r,i){e.exports=i(oL)})(typeof window<"u"?window:De,function(r){var i=function(){var o,a={},s=[];function c(k){k||(k=document.documentElement);var O=window.getComputedStyle(k,null).fontSize;return parseFloat(O)||16}function u(k){if(!k.getBoundingClientRect)return{width:k.offsetWidth,height:k.offsetHeight};var O=k.getBoundingClientRect();return{width:Math.round(O.width),height:Math.round(O.height)}}function l(k,O){var D=O.split(/\d/),R=D[D.length-1];switch(O=parseFloat(O),R){case"px":return O;case"em":return O*c(k);case"rem":return O*c();case"vw":return O*document.documentElement.clientWidth/100;case"vh":return O*document.documentElement.clientHeight/100;case"vmin":case"vmax":var w=document.documentElement.clientWidth/100,L=document.documentElement.clientHeight/100,B=Math[R==="vmin"?"min":"max"];return O*B(w,L);default:return O}}function h(k,O){this.element=k;var D,R,w,L,B,A,M,j,W=["min-width","min-height","max-width","max-height"];this.call=function(){w=u(this.element),A={};for(D in a[O])a[O].hasOwnProperty(D)&&(R=a[O][D],L=l(this.element,R.value),B=R.property==="width"?w.width:w.height,j=R.mode+"-"+R.property,M="",R.mode==="min"&&B>=L&&(M+=R.value),R.mode==="max"&&B<=L&&(M+=R.value),A[j]||(A[j]=""),M&&(" "+A[j]+" ").indexOf(" "+M+" ")===-1&&(A[j]+=" "+M));for(var K in W)W.hasOwnProperty(K)&&(A[W[K]]?this.element.setAttribute(W[K],A[W[K]].substr(1)):this.element.removeAttribute(W[K]))}}function f(k,O){k.elementQueriesSetupInformation||(k.elementQueriesSetupInformation=new h(k,O)),k.elementQueriesSensor||(k.elementQueriesSensor=new r(k,function(){k.elementQueriesSetupInformation.call()}))}function d(k,O,D,R){if(typeof a[k]>"u"){a[k]=[];var w=s.length;o.innerHTML+=`
`+k+" {animation: 0.1s element-queries;}",o.innerHTML+=`
`+k+" > .resize-sensor {min-width: "+w+"px;}",s.push(k)}a[k].push({mode:O,property:D,value:R})}function p(k){var O;if(document.querySelectorAll&&(O=k?k.querySelectorAll.bind(k):document.querySelectorAll.bind(document)),!O&&typeof $$<"u"&&(O=$$),!O&&typeof jQuery<"u"&&(O=jQuery),!O)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return O}function m(k){var O=p(k);for(var D in a)if(a.hasOwnProperty(D))for(var R=O(D,k),w=0,L=R.length;w<L;w++)f(R[w],D)}function g(k){var O=[],D=[],R=[],w=0,L=-1,B=[];for(var A in k.children)if(k.children.hasOwnProperty(A)&&k.children[A].tagName&&k.children[A].tagName.toLowerCase()==="img"){O.push(k.children[A]);var M=k.children[A].getAttribute("min-width")||k.children[A].getAttribute("data-min-width"),j=k.children[A].getAttribute("data-src")||k.children[A].getAttribute("url");R.push(j);var W={minWidth:M};D.push(W),M?k.children[A].style.display="none":(w=O.length-1,k.children[A].style.display="block")}L=w;function K(){var oe=!1,fe;for(fe in O)O.hasOwnProperty(fe)&&D[fe].minWidth&&k.offsetWidth>D[fe].minWidth&&(oe=fe);if(oe||(oe=w),L!==oe)if(B[oe])O[L].style.display="none",O[oe].style.display="block",L=oe;else{var Ae=new Image;Ae.onload=function(){O[oe].src=R[oe],O[L].style.display="none",O[oe].style.display="block",B[oe]=!0,L=oe},Ae.src=R[oe]}else O[oe].src=R[oe]}k.resizeSensorInstance=new r(k,K),K()}function v(){for(var k=p(),O=k("[data-responsive-image],[responsive-image]"),D=0,R=O.length;D<R;D++)g(O[D])}var _=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,y=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;function b(k){var O,D,R,w;for(k=k.replace(/'/g,'"');(O=_.exec(k))!==null;)for(D=O[1]+O[3],R=O[2];(w=y.exec(R))!==null;)d(D,w[1],w[2],w[3])}function T(k){var O="";if(k)if(typeof k=="string")k=k.toLowerCase(),(k.indexOf("min-width")!==-1||k.indexOf("max-width")!==-1)&&b(k);else for(var D=0,R=k.length;D<R;D++)k[D].type===1?(O=k[D].selectorText||k[D].cssText,(O.indexOf("min-height")!==-1||O.indexOf("max-height")!==-1||O.indexOf("min-width")!==-1||O.indexOf("max-width")!==-1)&&b(O)):k[D].type===4?T(k[D].cssRules||k[D].rules):k[D].type===3&&k[D].styleSheet.hasOwnProperty("cssRules")&&T(k[D].styleSheet.cssRules)}var S=!1;this.init=function(){var k="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?k="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?k="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(k="oanimationstart"),document.body.addEventListener(k,function(R){var w=R.target,L=w&&window.getComputedStyle(w,null),B=L&&L.getPropertyValue("animation-name"),A=B&&B.indexOf("element-queries")!==-1;if(A){w.elementQueriesSensor=new r(w,function(){w.elementQueriesSetupInformation&&w.elementQueriesSetupInformation.call()});var M=window.getComputedStyle(w.resizeSensor,null),j=M.getPropertyValue("min-width");j=parseInt(j.replace("px","")),f(R.target,s[j])}}),S||(o=document.createElement("style"),o.type="text/css",o.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",o.innerHTML+=`
@keyframes element-queries { 0% { visibility: inherit; } }`,document.getElementsByTagName("head")[0].appendChild(o),S=!0);for(var O=0,D=document.styleSheets.length;O<D;O++)try{document.styleSheets[O].href&&document.styleSheets[O].href.indexOf("file://")===0&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[O].href),T(document.styleSheets[O].cssRules||document.styleSheets[O].rules||document.styleSheets[O].cssText)}catch{}v()},this.findElementQueriesElements=function(k){m(k)},this.update=function(){this.init()}};i.update=function(){i.instance.update()},i.detach=function(o){o.elementQueriesSetupInformation?(o.elementQueriesSensor.detach(),delete o.elementQueriesSetupInformation,delete o.elementQueriesSensor):o.resizeSensorInstance&&(o.resizeSensorInstance.detach(),delete o.resizeSensorInstance)},i.init=function(){i.instance||(i.instance=new i),i.instance.init()};var n=function(o){if(document.addEventListener)document.addEventListener("DOMContentLoaded",o,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var a=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(o(),clearInterval(a))},10);else window.onload=o};return i.findElementQueriesElements=function(o){i.instance.findElementQueriesElements(o)},i.listen=function(){n(i.init)},i})})(aL);var Vte=aL.exports,$v={ResizeSensor:oL,ElementQueries:Vte};function Fv(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            ";break}for(var r=[`
`],i=0;i<100;i++)r.push(r[i]+t);return r}function Da(){this.step="    ",this.shift=Fv(this.step)}Da.prototype.xml=function(e,t){var r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),i=r.length,n=!1,o=0,a="",s=0,c=t?Fv(t):this.shift;for(s=0;s<i;s++)r[s].search(/<!/)>-1?(a+=c[o]+r[s],n=!0,(r[s].search(/-->/)>-1||r[s].search(/\]>/)>-1||r[s].search(/!DOCTYPE/)>-1)&&(n=!1)):r[s].search(/-->/)>-1||r[s].search(/\]>/)>-1?(a+=r[s],n=!1):/^<\w/.exec(r[s-1])&&/^<\/\w/.exec(r[s])&&/^<[\w:\-\.\,]+/.exec(r[s-1])==/^<\/[\w:\-\.\,]+/.exec(r[s])[0].replace("/","")?(a+=r[s],n||o--):r[s].search(/<\w/)>-1&&r[s].search(/<\//)==-1&&r[s].search(/\/>/)==-1?a=n?a+=r[s]:a+=c[o++]+r[s]:r[s].search(/<\w/)>-1&&r[s].search(/<\//)>-1?a=n?a+=r[s]:a+=c[o]+r[s]:r[s].search(/<\//)>-1?a=n?a+=r[s]:a+=c[--o]+r[s]:r[s].search(/\/>/)>-1?a=n?a+=r[s]:a+=c[o]+r[s]:r[s].search(/<\?/)>-1||r[s].search(/xmlns\:/)>-1||r[s].search(/xmlns\=/)>-1?a+=c[o]+r[s]:a+=r[s];return a[0]==`
`?a.slice(1):a},Da.prototype.json=function(e,r){var r=r||this.step;return typeof JSON>"u"?e:typeof e=="string"?JSON.stringify(JSON.parse(e),null,r):typeof e=="object"?JSON.stringify(e,null,r):e},Da.prototype.css=function(e,t){var r=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),i=r.length,n=0,o="",a=0,s=t?Fv(t):this.shift;for(a=0;a<i;a++)/\{/.exec(r[a])?o+=s[n++]+r[a]:/\}/.exec(r[a])?o+=s[--n]+r[a]:(/\*\\/.exec(r[a]),o+=s[n]+r[a]);return o.replace(/^\n{1,}/,"")};function Wte(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function Yte(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /ig,"~::~"+t+t+"AND ").replace(/ BETWEEN /ig,"~::~"+t+"BETWEEN ").replace(/ CASE /ig,"~::~"+t+"CASE ").replace(/ ELSE /ig,"~::~"+t+"ELSE ").replace(/ END /ig,"~::~"+t+"END ").replace(/ FROM /ig,"~::~FROM ").replace(/ GROUP\s{1,}BY/ig,"~::~GROUP BY ").replace(/ HAVING /ig,"~::~HAVING ").replace(/ IN /ig," IN ").replace(/ JOIN /ig,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /ig,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /ig,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /ig,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /ig,"~::~RIGHT JOIN ").replace(/ ON /ig,"~::~"+t+"ON ").replace(/ OR /ig,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/ig,"~::~ORDER BY ").replace(/ OVER /ig,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /ig,"~::~(SELECT ").replace(/\)\s{0,}SELECT /ig,")~::~SELECT ").replace(/ THEN /ig," THEN~::~"+t).replace(/ UNION /ig,"~::~UNION~::~").replace(/ USING /ig,"~::~USING ").replace(/ WHEN /ig,"~::~"+t+"WHEN ").replace(/ WHERE /ig,"~::~WHERE ").replace(/ WITH /ig,"~::~WITH ").replace(/ ALL /ig," ALL ").replace(/ AS /ig," AS ").replace(/ ASC /ig," ASC ").replace(/ DESC /ig," DESC ").replace(/ DISTINCT /ig," DISTINCT ").replace(/ EXISTS /ig," EXISTS ").replace(/ NOT /ig," NOT ").replace(/ NULL /ig," NULL ").replace(/ LIKE /ig," LIKE ").replace(/\s{0,}SELECT /ig,"SELECT ").replace(/\s{0,}UPDATE /ig,"UPDATE ").replace(/ SET /ig," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}Da.prototype.sql=function(e,t){var r=e.replace(/\s{1,}/g," ").replace(/\'/ig,"~::~'").split("~::~"),i=r.length,n=[],o=0,a=this.step,s=0,c="",u=0,l=t?Fv(t):this.shift;for(u=0;u<i;u++)u%2?n=n.concat(r[u]):n=n.concat(Yte(r[u],a));for(i=n.length,u=0;u<i;u++)s=Wte(n[u],s),/\s{0,}\s{0,}SELECT\s{0,}/.exec(n[u])&&(n[u]=n[u].replace(/\,/g,`,
`+a+a)),/\s{0,}\s{0,}SET\s{0,}/.exec(n[u])&&(n[u]=n[u].replace(/\,/g,`,
`+a+a)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(n[u])?(o++,c+=l[o]+n[u]):/\'/.exec(n[u])?(s<1&&o&&o--,c+=n[u]):(c+=l[o]+n[u],s<1&&o&&o--);return c=c.replace(/^\n{1,}/,"").replace(/\n{1,}/g,`
`),c},Da.prototype.xmlmin=function(e,t){var r=t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return r.replace(/>\s{0,}</g,"><")},Da.prototype.jsonmin=function(e){return typeof JSON>"u"?e:JSON.stringify(JSON.parse(e),null,0)},Da.prototype.cssmin=function(e,t){var r=t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"");return r.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},Da.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};var qte=new Da;const Xte=ui(qte);var Kte=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},sS={},Zte=Object.prototype.hasOwnProperty,Qte;function sL(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function lL(e){try{return encodeURIComponent(e)}catch{return null}}function Jte(e){for(var t=/([^=?#&]+)=?([^&]*)/g,r={},i;i=t.exec(e);){var n=sL(i[1]),o=sL(i[2]);n===null||o===null||n in r||(r[n]=o)}return r}function ere(e,t){t=t||"";var r=[],i,n;typeof t!="string"&&(t="?");for(n in e)if(Zte.call(e,n)){if(i=e[n],!i&&(i===null||i===Qte||isNaN(i))&&(i=""),n=lL(n),i=lL(i),n===null||i===null)continue;r.push(n+"="+i)}return r.length?t+r.join("&"):""}sS.stringify=ere,sS.parse=Jte;var cL=Kte,jv=sS,tre=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,uL=/[\n\r\t]/g,rre=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,fL=/:\d+$/,nre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,ire=/^[a-zA-Z]:/;function lS(e){return(e||"").toString().replace(tre,"")}var cS=[["#","hash"],["?","query"],function(t,r){return zo(r.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],hL={hash:1,query:1};function dL(e){var t;typeof window<"u"?t=window:typeof globalThis<"u"?t=globalThis:typeof self<"u"?t=self:t={};var r=t.location||{};e=e||r;var i={},n=typeof e,o;if(e.protocol==="blob:")i=new Vo(unescape(e.pathname),{});else if(n==="string"){i=new Vo(e,{});for(o in hL)delete i[o]}else if(n==="object"){for(o in e)o in hL||(i[o]=e[o]);i.slashes===void 0&&(i.slashes=rre.test(e.href))}return i}function zo(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function pL(e,t){e=lS(e),e=e.replace(uL,""),t=t||{};var r=nre.exec(e),i=r[1]?r[1].toLowerCase():"",n=!!r[2],o=!!r[3],a=0,s;return n?o?(s=r[2]+r[3]+r[4],a=r[2].length+r[3].length):(s=r[2]+r[4],a=r[2].length):o?(s=r[3]+r[4],a=r[3].length):s=r[4],i==="file:"?a>=2&&(s=s.slice(2)):zo(i)?s=r[4]:i?n&&(s=s.slice(2)):a>=2&&zo(t.protocol)&&(s=r[4]),{protocol:i,slashes:n||zo(i),slashesCount:a,rest:s}}function ore(e,t){if(e==="")return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=r.length,n=r[i-1],o=!1,a=0;i--;)r[i]==="."?r.splice(i,1):r[i]===".."?(r.splice(i,1),a++):a&&(i===0&&(o=!0),r.splice(i,1),a--);return o&&r.unshift(""),(n==="."||n==="..")&&r.push(""),r.join("/")}function Vo(e,t,r){if(e=lS(e),e=e.replace(uL,""),!(this instanceof Vo))return new Vo(e,t,r);var i,n,o,a,s,c,u=cS.slice(),l=typeof t,h=this,f=0;for(l!=="object"&&l!=="string"&&(r=t,t=null),r&&typeof r!="function"&&(r=jv.parse),t=dL(t),n=pL(e||"",t),i=!n.protocol&&!n.slashes,h.slashes=n.slashes||i&&t.slashes,h.protocol=n.protocol||t.protocol||"",e=n.rest,(n.protocol==="file:"&&(n.slashesCount!==2||ire.test(e))||!n.slashes&&(n.protocol||n.slashesCount<2||!zo(h.protocol)))&&(u[3]=[/(.*)/,"pathname"]);f<u.length;f++){if(a=u[f],typeof a=="function"){e=a(e,h);continue}o=a[0],c=a[1],o!==o?h[c]=e:typeof o=="string"?(s=o==="@"?e.lastIndexOf(o):e.indexOf(o),~s&&(typeof a[2]=="number"?(h[c]=e.slice(0,s),e=e.slice(s+a[2])):(h[c]=e.slice(s),e=e.slice(0,s)))):(s=o.exec(e))&&(h[c]=s[1],e=e.slice(0,s.index)),h[c]=h[c]||i&&a[3]&&t[c]||"",a[4]&&(h[c]=h[c].toLowerCase())}r&&(h.query=r(h.query)),i&&t.slashes&&h.pathname.charAt(0)!=="/"&&(h.pathname!==""||t.pathname!=="")&&(h.pathname=ore(h.pathname,t.pathname)),h.pathname.charAt(0)!=="/"&&zo(h.protocol)&&(h.pathname="/"+h.pathname),cL(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(s=h.auth.indexOf(":"),~s?(h.username=h.auth.slice(0,s),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(s+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin=h.protocol!=="file:"&&zo(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}function are(e,t,r){var i=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(r||jv.parse)(t)),i[e]=t;break;case"port":i[e]=t,cL(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,fL.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!r;break;case"pathname":case"hash":if(t){var n=e==="pathname"?"/":"#";i[e]=t.charAt(0)!==n?n+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(i.username=t.slice(0,o),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(o+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<cS.length;a++){var s=cS[a];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin=i.protocol!=="file:"&&zo(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function sre(e){(!e||typeof e!="function")&&(e=jv.stringify);var t,r=this,i=r.host,n=r.protocol;n&&n.charAt(n.length-1)!==":"&&(n+=":");var o=n+(r.protocol&&r.slashes||zo(r.protocol)?"//":"");return r.username?(o+=r.username,r.password&&(o+=":"+r.password),o+="@"):r.password?(o+=":"+r.password,o+="@"):r.protocol!=="file:"&&zo(r.protocol)&&!i&&r.pathname!=="/"&&(o+="@"),(i[i.length-1]===":"||fL.test(r.hostname)&&!r.port)&&(i+=":"),o+=i+r.pathname,t=typeof r.query=="object"?e(r.query):r.query,t&&(o+=t.charAt(0)!=="?"?"?"+t:t),r.hash&&(o+=r.hash),o}Vo.prototype={set:are,toString:sre},Vo.extractProtocol=pL,Vo.location=dL,Vo.trimLeft=lS,Vo.qs=jv;var lre=Vo;const cre=ui(lre),mL=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),uS=(e,t)=>t?e.toLowerCase():e,gL=(e,{caseInsensitive:t}={})=>(r,i,n=1/0)=>{const o=uS(r,t);return e[o]||(e[o]=[],e.__times__[o]=[]),e[o].push(i),e.__times__[o].push(+n||1/0),{event:o,handler:i}},fS=(e,{caseInsensitive:t}={})=>(r,i)=>{typeof r=="object"&&(i=r.handler,r=r.event);const n=uS(r,t);if(!e[n])return;const o=e[n].indexOf(i);o===-1||o>=e[n].length||(e[n].splice(o,1),e.__times__[n].splice(o,1))},vL=(e,t)=>()=>{e.forEach(r=>r(t))},yL=(e,{isGlobal:t,caseInsensitive:r,async:i}={})=>{const n=fS(e);return(o,a,s={})=>{const c=uS(o,r);if(!e[c])return;const u=[...e[c]];if(u.forEach((l,h)=>{--e.__times__[c][h]<1&&n(c,l)}),i||s.async?setTimeout(vL(u,a),0):vL(u,a)(),t&&!s.isNoGlobalBroadcast)try{mL.postMessage({event:c,news:a})}catch(l){if(l instanceof DOMException)console.warn(`Could not broadcast '${c}' globally. Payload is not clonable.`);else throw l}}},bL=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},_L=()=>({__times__:{}}),Uv=(e={})=>{const t=e.async||!1,r=e.caseInsensitive||!1,i=e.stack||_L();return i.__times__||(i.__times__={}),{publish:yL(i,{async:t,caseInsensitive:r}),subscribe:gL(i,{caseInsensitive:r}),unsubscribe:fS(i,{caseInsensitive:r}),clear:bL(i),stack:i}},wd=_L(),Ad={publish:yL(wd,{isGlobal:!0}),subscribe:gL(wd),unsubscribe:fS(wd),clear:bL(wd),stack:wd};mL.onmessage=({data:{event:e,news:t}})=>Ad.publish(e,t,{isNoGlobalBroadcast:!0});const mt={"context-menu":"_context-menu_18ock_1","context-menu-dark":"_context-menu-dark_18ock_12","context-menu-icon":"_context-menu-icon_18ock_17","context-menu-item":"_context-menu-item_18ock_27","context-menu-hr":"_context-menu-hr_18ock_38","play-icon":"_play-icon_18ock_45","context-menu-span":"_context-menu-span_18ock_52","context-menu-thumbnail":"_context-menu-thumbnail_18ock_60","context-menu-thumbnail-inline":"_context-menu-thumbnail-inline_18ock_65"};function St(e){return E.createElement("div",{"data-menu-item-for":typeof e.children=="string"?e.children:null,className:mt["context-menu-item"],onClick:t=>e.onClick(t),onMouseEnter:t=>e.onMouseEnter(t),onMouseLeave:t=>e.onMouseLeave(t),role:"button",tabIndex:0},E.createElement("span",{className:mt["context-menu-span"]},e.children))}St.defaultProps={onMouseEnter:()=>{},onMouseLeave:()=>{}},St.propTypes={children:N.node.isRequired,onClick:N.func.isRequired,onMouseEnter:N.func,onMouseLeave:N.func};var ure={value:()=>{}};function ku(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Gv(r)}function Gv(e){this._=e}function fre(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Gv.prototype=ku.prototype={constructor:Gv,on:function(e,t){var r=this._,i=fre(e+"",r),n,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((n=(e=i[o]).type)&&(n=hre(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=TL(r[n],e.name,t);else if(t==null)for(n in r)r[n]=TL(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Gv(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,o;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,n=o.length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],n=0,o=i.length;n<o;++n)i[n].value.apply(t,r)}};function hre(e,t){for(var r=0,i=e.length,n;r<i;++r)if((n=e[r]).name===t)return n.value}function TL(e,t,r){for(var i=0,n=e.length;i<n;++i)if(e[i].name===t){e[i]=ure,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}function hS(e){e.stopImmediatePropagation()}function Iu(e){e.preventDefault(),e.stopImmediatePropagation()}function zv(e){var t=e.document.documentElement,r=Ht(e).on("dragstart.drag",Iu,!0);"onselectstart"in t?r.on("selectstart.drag",Iu,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vv(e,t){var r=e.document.documentElement,i=Ht(e).on("dragstart.drag",null);t&&(i.on("click.drag",Iu,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Wv=e=>()=>e;function dS(e,{sourceEvent:t,subject:r,target:i,identifier:n,active:o,x:a,y:s,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}dS.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function dre(e){return!e.ctrlKey&&!e.button}function pre(){return this.parentNode}function mre(e,t){return t??{x:e.x,y:e.y}}function gre(){return navigator.maxTouchPoints||"ontouchstart"in this}function xa(){var e=dre,t=pre,r=mre,i=gre,n={},o=ku("start","drag","end"),a=0,s,c,u,l,h=0;function f(b){b.on("mousedown.drag",d).filter(i).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(b,T){if(!(l||!e.call(this,b,T))){var S=y(this,t.call(this,b,T),b,T,"mouse");S&&(Ht(b.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),zv(b.view),hS(b),u=!1,s=b.clientX,c=b.clientY,S("start",b))}}function p(b){if(Iu(b),!u){var T=b.clientX-s,S=b.clientY-c;u=T*T+S*S>h}n.mouse("drag",b)}function m(b){Ht(b.view).on("mousemove.drag mouseup.drag",null),Vv(b.view,u),Iu(b),n.mouse("end",b)}function g(b,T){if(e.call(this,b,T)){var S=b.changedTouches,k=t.call(this,b,T),O=S.length,D,R;for(D=0;D<O;++D)(R=y(this,k,b,T,S[D].identifier,S[D]))&&(hS(b),R("start",b,S[D]))}}function v(b){var T=b.changedTouches,S=T.length,k,O;for(k=0;k<S;++k)(O=n[T[k].identifier])&&(Iu(b),O("drag",b,T[k]))}function _(b){var T=b.changedTouches,S=T.length,k,O;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),k=0;k<S;++k)(O=n[T[k].identifier])&&(hS(b),O("end",b,T[k]))}function y(b,T,S,k,O,D){var R=o.copy(),w=lr(D||S,T),L,B,A;if((A=r.call(b,new dS("beforestart",{sourceEvent:S,target:f,identifier:O,active:a,x:w[0],y:w[1],dx:0,dy:0,dispatch:R}),k))!=null)return L=A.x-w[0]||0,B=A.y-w[1]||0,function M(j,W,K){var oe=w,fe;switch(j){case"start":n[O]=M,fe=a++;break;case"end":delete n[O],--a;case"drag":w=lr(K||W,T),fe=a;break}R.call(j,b,new dS(j,{sourceEvent:W,subject:A,target:f,identifier:O,active:fe,x:w[0]+L,y:w[1]+B,dx:w[0]-oe[0],dy:w[1]-oe[1],dispatch:R}),k)}}return f.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Wv(!!b),f):e},f.container=function(b){return arguments.length?(t=typeof b=="function"?b:Wv(b),f):t},f.subject=function(b){return arguments.length?(r=typeof b=="function"?b:Wv(b),f):r},f.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:Wv(!!b),f):i},f.on=function(){var b=o.on.apply(o,arguments);return b===o?f:b},f.clickDistance=function(b){return arguments.length?(h=(b=+b)*b,f):Math.sqrt(h)},f}const vre=Object.freeze(Object.defineProperty({__proto__:null,drag:xa,dragDisable:zv,dragEnable:Vv},Symbol.toStringTag,{value:"Module"}));var Cu=0,Od=0,kd=0,EL=1e3,Yv,Id,qv=0,Fl=0,Xv=0,Cd=typeof performance=="object"&&performance.now?performance:Date,SL=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pS(){return Fl||(SL(yre),Fl=Cd.now()+Xv)}function yre(){Fl=0}function Kv(){this._call=this._time=this._next=null}Kv.prototype=wL.prototype={constructor:Kv,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?pS():+r)+(t==null?0:+t),!this._next&&Id!==this&&(Id?Id._next=this:Yv=this,Id=this),this._call=e,this._time=r,mS()},stop:function(){this._call&&(this._call=null,this._time=1/0,mS())}};function wL(e,t,r){var i=new Kv;return i.restart(e,t,r),i}function bre(){pS(),++Cu;for(var e=Yv,t;e;)(t=Fl-e._time)>=0&&e._call.call(null,t),e=e._next;--Cu}function AL(){Fl=(qv=Cd.now())+Xv,Cu=Od=0;try{bre()}finally{Cu=0,Tre(),Fl=0}}function _re(){var e=Cd.now(),t=e-qv;t>EL&&(Xv-=t,qv=e)}function Tre(){for(var e,t=Yv,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Yv=r);Id=e,mS(i)}function mS(e){if(!Cu){Od&&(Od=clearTimeout(Od));var t=e-Fl;t>24?(e<1/0&&(Od=setTimeout(AL,e-Cd.now()-Xv)),kd&&(kd=clearInterval(kd))):(kd||(qv=Cd.now(),kd=setInterval(_re,EL)),Cu=1,SL(AL))}}function OL(e,t,r){var i=new Kv;return t=t==null?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,r),i}var Ere=ku("start","end","cancel","interrupt"),Sre=[],kL=0,IL=1,gS=2,Zv=3,CL=4,vS=5,Qv=6;function Jv(e,t,r,i,n,o){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;wre(e,r,{name:t,index:i,group:n,on:Ere,tween:Sre,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:kL})}function yS(e,t){var r=fo(e,t);if(r.state>kL)throw new Error("too late; already scheduled");return r}function Wo(e,t){var r=fo(e,t);if(r.state>Zv)throw new Error("too late; already running");return r}function fo(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function wre(e,t,r){var i=e.__transition,n;i[t]=r,r.timer=wL(o,0,r.time);function o(u){r.state=IL,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var l,h,f,d;if(r.state!==IL)return c();for(l in i)if(d=i[l],d.name===r.name){if(d.state===Zv)return OL(a);d.state===CL?(d.state=Qv,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=Qv,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(OL(function(){r.state===Zv&&(r.state=CL,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=gS,r.on.call("start",e,e.__data__,r.index,r.group),r.state===gS){for(r.state=Zv,n=new Array(f=r.tween.length),l=0,h=-1;l<f;++l)(d=r.tween[l].value.call(e,e.__data__,r.index,r.group))&&(n[++h]=d);n.length=h+1}}function s(u){for(var l=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=vS,1),h=-1,f=n.length;++h<f;)n[h].call(e,l);r.state===vS&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Qv,r.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function bS(e,t){var r=e.__transition,i,n,o=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((i=r[a]).name!==t){o=!1;continue}n=i.state>gS&&i.state<vS,i.state=Qv,i.timer.stop(),i.on.call(n?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[a]}o&&delete e.__transition}}function Are(e){return this.each(function(){bS(this,e)})}function Ore(e,t){var r,i;return function(){var n=Wo(this,e),o=n.tween;if(o!==r){i=r=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}n.tween=i}}function kre(e,t,r){var i,n;if(typeof r!="function")throw new Error;return function(){var o=Wo(this,e),a=o.tween;if(a!==i){n=(i=a).slice();for(var s={name:t,value:r},c=0,u=n.length;c<u;++c)if(n[c].name===t){n[c]=s;break}c===u&&n.push(s)}o.tween=n}}function Ire(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=fo(this.node(),r).tween,n=0,o=i.length,a;n<o;++n)if((a=i[n]).name===e)return a.value;return null}return this.each((t==null?Ore:kre)(r,e,t))}function _S(e,t,r){var i=e._id;return e.each(function(){var n=Wo(this,i);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return fo(n,i).value[t]}}function PL(e,t){var r;return(typeof t=="number"?zi:t instanceof Qr?mu:(r=Qr(t))?(t=r,mu):t1)(e,t)}function Cre(e){return function(){this.removeAttribute(e)}}function Pre(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dre(e,t,r){var i,n=r+"",o;return function(){var a=this.getAttribute(e);return a===n?null:a===i?o:o=t(i=a,r)}}function xre(e,t,r){var i,n=r+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===n?null:a===i?o:o=t(i=a,r)}}function Nre(e,t,r){var i,n,o;return function(){var a,s=r(this),c;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=s+"",a===c?null:a===i&&c===n?o:(n=c,o=t(i=a,s)))}}function Rre(e,t,r){var i,n,o;return function(){var a,s=r(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=s+"",a===c?null:a===i&&c===n?o:(n=c,o=t(i=a,s)))}}function Mre(e,t){var r=Al(e),i=r==="transform"?hR:PL;return this.attrTween(e,typeof t=="function"?(r.local?Rre:Nre)(r,i,_S(this,"attr."+e,t)):t==null?(r.local?Pre:Cre)(r):(r.local?xre:Dre)(r,i,t))}function Lre(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Bre(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Hre(e,t){var r,i;function n(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Bre(e,o)),r}return n._value=t,n}function $re(e,t){var r,i;function n(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Lre(e,o)),r}return n._value=t,n}function Fre(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=Al(e);return this.tween(r,(i.local?Hre:$re)(i,t))}function jre(e,t){return function(){yS(this,e).delay=+t.apply(this,arguments)}}function Ure(e,t){return t=+t,function(){yS(this,e).delay=t}}function Gre(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jre:Ure)(t,e)):fo(this.node(),t).delay}function zre(e,t){return function(){Wo(this,e).duration=+t.apply(this,arguments)}}function Vre(e,t){return t=+t,function(){Wo(this,e).duration=t}}function Wre(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zre:Vre)(t,e)):fo(this.node(),t).duration}function Yre(e,t){if(typeof t!="function")throw new Error;return function(){Wo(this,e).ease=t}}function qre(e){var t=this._id;return arguments.length?this.each(Yre(t,e)):fo(this.node(),t).ease}function Xre(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Wo(this,e).ease=r}}function Kre(e){if(typeof e!="function")throw new Error;return this.each(Xre(this._id,e))}function Zre(e){typeof e!="function"&&(e=jg(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var o=t[n],a=o.length,s=i[n]=[],c,u=0;u<a;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&s.push(c);return new Na(i,this._parents,this._name,this._id)}function Qre(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,n=r.length,o=Math.min(i,n),a=new Array(i),s=0;s<o;++s)for(var c=t[s],u=r[s],l=c.length,h=a[s]=new Array(l),f,d=0;d<l;++d)(f=c[d]||u[d])&&(h[d]=f);for(;s<i;++s)a[s]=t[s];return new Na(a,this._parents,this._name,this._id)}function Jre(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function ene(e,t,r){var i,n,o=Jre(t)?yS:Wo;return function(){var a=o(this,e),s=a.on;s!==i&&(n=(i=s).copy()).on(t,r),a.on=n}}function tne(e,t){var r=this._id;return arguments.length<2?fo(this.node(),r).on.on(e):this.each(ene(r,e,t))}function rne(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function nne(){return this.on("end.remove",rne(this._id))}function ine(e){var t=this._name,r=this._id;typeof e!="function"&&(e=id(e));for(var i=this._groups,n=i.length,o=new Array(n),a=0;a<n;++a)for(var s=i[a],c=s.length,u=o[a]=new Array(c),l,h,f=0;f<c;++f)(l=s[f])&&(h=e.call(l,l.__data__,f,s))&&("__data__"in l&&(h.__data__=l.__data__),u[f]=h,Jv(u[f],t,r,f,u,fo(l,r)));return new Na(o,this._parents,t,r)}function one(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Fg(e));for(var i=this._groups,n=i.length,o=[],a=[],s=0;s<n;++s)for(var c=i[s],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var f=e.call(l,l.__data__,h,c),d,p=fo(l,r),m=0,g=f.length;m<g;++m)(d=f[m])&&Jv(d,t,r,m,f,p);o.push(f),a.push(l)}return new Na(o,a,t,r)}var ane=lo.prototype.constructor;function sne(){return new ane(this._groups,this._parents)}function lne(e,t){var r,i,n;return function(){var o=Ui(this,e),a=(this.style.removeProperty(e),Ui(this,e));return o===a?null:o===r&&a===i?n:n=t(r=o,i=a)}}function DL(e){return function(){this.style.removeProperty(e)}}function cne(e,t,r){var i,n=r+"",o;return function(){var a=Ui(this,e);return a===n?null:a===i?o:o=t(i=a,r)}}function une(e,t,r){var i,n,o;return function(){var a=Ui(this,e),s=r(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Ui(this,e))),a===c?null:a===i&&c===n?o:(n=c,o=t(i=a,s))}}function fne(e,t){var r,i,n,o="style."+t,a="end."+o,s;return function(){var c=Wo(this,e),u=c.on,l=c.value[o]==null?s||(s=DL(t)):void 0;(u!==r||n!==l)&&(i=(r=u).copy()).on(a,n=l),c.on=i}}function hne(e,t,r){var i=(e+="")=="transform"?fR:PL;return t==null?this.styleTween(e,lne(e,i)).on("end.style."+e,DL(e)):typeof t=="function"?this.styleTween(e,une(e,i,_S(this,"style."+e,t))).each(fne(this._id,e)):this.styleTween(e,cne(e,i,t),r).on("end.style."+e,null)}function dne(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function pne(e,t,r){var i,n;function o(){var a=t.apply(this,arguments);return a!==n&&(i=(n=a)&&dne(e,a,r)),i}return o._value=t,o}function mne(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,pne(e,t,r??""))}function gne(e){return function(){this.textContent=e}}function vne(e){return function(){var t=e(this);this.textContent=t??""}}function yne(e){return this.tween("text",typeof e=="function"?vne(_S(this,"text",e)):gne(e==null?"":e+""))}function bne(e){return function(t){this.textContent=e.call(this,t)}}function _ne(e){var t,r;function i(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&bne(n)),t}return i._value=e,i}function Tne(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_ne(e))}function Ene(){for(var e=this._name,t=this._id,r=xL(),i=this._groups,n=i.length,o=0;o<n;++o)for(var a=i[o],s=a.length,c,u=0;u<s;++u)if(c=a[u]){var l=fo(c,t);Jv(c,e,r,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Na(i,this._parents,e,r)}function Sne(){var e,t,r=this,i=r._id,n=r.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--n===0&&o()}};r.each(function(){var u=Wo(this,i),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),u.on=t}),n===0&&o()})}var wne=0;function Na(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function xL(){return++wne}var jl=lo.prototype;Na.prototype={constructor:Na,select:ine,selectAll:one,filter:Zre,merge:Qre,selection:sne,transition:Ene,call:jl.call,nodes:jl.nodes,node:jl.node,size:jl.size,empty:jl.empty,each:jl.each,on:tne,attr:Mre,attrTween:Fre,style:hne,styleTween:mne,text:yne,textTween:Tne,remove:nne,tween:Ire,delay:Gre,duration:Wre,ease:qre,easeVarying:Kre,end:Sne,[Symbol.iterator]:jl[Symbol.iterator]};function Ane(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var One={time:null,delay:0,duration:250,ease:Ane};function kne(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Ine(e){var t,r;e instanceof Na?(t=e._id,e=e._name):(t=xL(),(r=One).time=pS(),e=e==null?null:e+"");for(var i=this._groups,n=i.length,o=0;o<n;++o)for(var a=i[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&Jv(c,e,t,u,a,r||kne(c,t));return new Na(i,this._parents,e,t)}lo.prototype.interrupt=Are,lo.prototype.transition=Ine;const TS=e=>()=>e;function Cne(e,{sourceEvent:t,target:r,selection:i,mode:n,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function Pne(e){e.stopImmediatePropagation()}function ES(e){e.preventDefault(),e.stopImmediatePropagation()}var NL={name:"drag"},SS={name:"space"},Pu={name:"handle"},Du={name:"center"};const{abs:RL,max:Rn,min:Mn}=Math;function ML(e){return[+e[0],+e[1]]}function wS(e){return[ML(e[0]),ML(e[1])]}var ey={name:"x",handles:["w","e"].map(Pd),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ty={name:"y",handles:["n","s"].map(Pd),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Dne={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Pd),input:function(e){return e==null?null:wS(e)},output:function(e){return e}},Ra={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},LL={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},BL={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},xne={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Nne={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Pd(e){return{type:e}}function Rne(e){return!e.ctrlKey&&!e.button}function Mne(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Lne(){return navigator.maxTouchPoints||"ontouchstart"in this}function AS(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Bne(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Hne(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function ry(){return kS(ey)}function Dd(){return kS(ty)}function OS(){return kS(Dne)}function kS(e){var t=Mne,r=Rne,i=Lne,n=!0,o=ku("start","brush","end"),a=6,s;function c(g){var v=g.property("__brush",m).selectAll(".overlay").data([Pd("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ra.overlay).merge(v).each(function(){var y=AS(this).extent;Ht(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),g.selectAll(".selection").data([Pd("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ra.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=g.selectAll(".handle").data(e.handles,function(y){return y.type});_.exit().remove(),_.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return Ra[y.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(g,v){g.tween?g.on("start.brush",function(_){l(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){l(this,arguments).end(_)}).tween("brush",function(){var _=this,y=_.__brush,b=l(_,arguments),T=y.selection,S=e.input(typeof v=="function"?v.apply(this,arguments):v,y.extent),k=Pl(T,S);function O(D){y.selection=D===1&&S===null?null:k(D),u.call(_),b.brush()}return T!==null&&S!==null?O:O(1)}):g.each(function(){var _=this,y=arguments,b=_.__brush,T=e.input(typeof v=="function"?v.apply(_,y):v,b.extent),S=l(_,y).beforestart();bS(_),b.selection=T===null?null:T,u.call(_),S.start().brush().end()})},c.clear=function(g){c.move(g,null)};function u(){var g=Ht(this),v=AS(this).selection;v?(g.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?v[1][0]-a/2:v[0][0]-a/2}).attr("y",function(_){return _.type[0]==="s"?v[1][1]-a/2:v[0][1]-a/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?v[1][0]-v[0][0]+a:a}).attr("height",function(_){return _.type==="e"||_.type==="w"?v[1][1]-v[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(g,v,_){var y=g.__brush.emitter;return y&&(!_||!y.clean)?y:new h(g,v,_)}function h(g,v,_){this.that=g,this.args=v,this.state=g.__brush,this.active=0,this.clean=_}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,v){return this.starting?(this.starting=!1,this.emit("start",g,v)):this.emit("brush",g),this},brush:function(g,v){return this.emit("brush",g,v),this},end:function(g,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,v)),this},emit:function(g,v,_){var y=Ht(this.that).datum();o.call(g,this.that,new Cne(g,{sourceEvent:v,target:c,selection:e.output(this.state.selection),mode:_,dispatch:o}),y)}};function f(g){if(s&&!g.touches||!r.apply(this,arguments))return;var v=this,_=g.target.__data__.type,y=(n&&g.metaKey?_="overlay":_)==="selection"?NL:n&&g.altKey?Du:Pu,b=e===ty?null:xne[_],T=e===ey?null:Nne[_],S=AS(v),k=S.extent,O=S.selection,D=k[0][0],R,w,L=k[0][1],B,A,M=k[1][0],j,W,K=k[1][1],oe,fe,Ae=0,de=0,Z,ne=b&&T&&n&&g.shiftKey,ue,Oe,Ce=Array.from(g.touches||[g],Ze=>{const Et=Ze.identifier;return Ze=lr(Ze,v),Ze.point0=Ze.slice(),Ze.identifier=Et,Ze});if(_==="overlay"){O&&(Z=!0);const Ze=[Ce[0],Ce[1]||Ce[0]];S.selection=O=[[R=e===ty?D:Mn(Ze[0][0],Ze[1][0]),B=e===ey?L:Mn(Ze[0][1],Ze[1][1])],[j=e===ty?M:Rn(Ze[0][0],Ze[1][0]),oe=e===ey?K:Rn(Ze[0][1],Ze[1][1])]],Ce.length>1&&qe()}else R=O[0][0],B=O[0][1],j=O[1][0],oe=O[1][1];w=R,A=B,W=j,fe=oe;var je=Ht(v).attr("pointer-events","none"),Pe=je.selectAll(".overlay").attr("cursor",Ra[_]);bS(v);var Ue=l(v,arguments,!0).beforestart();if(g.touches)Ue.moved=xe,Ue.ended=We;else{var Ye=Ht(g.view).on("mousemove.brush",xe,!0).on("mouseup.brush",We,!0);n&&Ye.on("keydown.brush",vt,!0).on("keyup.brush",dt,!0),zv(g.view)}u.call(v),Ue.start(g,y.name);function xe(Ze){for(const Et of Ze.changedTouches||[Ze])for(const _t of Ce)_t.identifier===Et.identifier&&(_t.cur=lr(Et,v));if(ne&&!ue&&!Oe&&Ce.length===1){const Et=Ce[0];RL(Et.cur[0]-Et[0])>RL(Et.cur[1]-Et[1])?Oe=!0:ue=!0}for(const Et of Ce)Et.cur&&(Et[0]=Et.cur[0],Et[1]=Et.cur[1]);Z=!0,ES(Ze),qe(Ze)}function qe(Ze){const Et=Ce[0],_t=Et.point0;var Rt;switch(Ae=Et[0]-_t[0],de=Et[1]-_t[1],y){case SS:case NL:{b&&(Ae=Rn(D-R,Mn(M-j,Ae)),w=R+Ae,W=j+Ae),T&&(de=Rn(L-B,Mn(K-oe,de)),A=B+de,fe=oe+de);break}case Pu:{Ce[1]?(b&&(w=Rn(D,Mn(M,Ce[0][0])),W=Rn(D,Mn(M,Ce[1][0])),b=1),T&&(A=Rn(L,Mn(K,Ce[0][1])),fe=Rn(L,Mn(K,Ce[1][1])),T=1)):(b<0?(Ae=Rn(D-R,Mn(M-R,Ae)),w=R+Ae,W=j):b>0&&(Ae=Rn(D-j,Mn(M-j,Ae)),w=R,W=j+Ae),T<0?(de=Rn(L-B,Mn(K-B,de)),A=B+de,fe=oe):T>0&&(de=Rn(L-oe,Mn(K-oe,de)),A=B,fe=oe+de));break}case Du:{b&&(w=Rn(D,Mn(M,R-Ae*b)),W=Rn(D,Mn(M,j+Ae*b))),T&&(A=Rn(L,Mn(K,B-de*T)),fe=Rn(L,Mn(K,oe+de*T)));break}}W<w&&(b*=-1,Rt=R,R=j,j=Rt,Rt=w,w=W,W=Rt,_ in LL&&Pe.attr("cursor",Ra[_=LL[_]])),fe<A&&(T*=-1,Rt=B,B=oe,oe=Rt,Rt=A,A=fe,fe=Rt,_ in BL&&Pe.attr("cursor",Ra[_=BL[_]])),S.selection&&(O=S.selection),ue&&(w=O[0][0],W=O[1][0]),Oe&&(A=O[0][1],fe=O[1][1]),(O[0][0]!==w||O[0][1]!==A||O[1][0]!==W||O[1][1]!==fe)&&(S.selection=[[w,A],[W,fe]],u.call(v),Ue.brush(Ze,y.name))}function We(Ze){if(Pne(Ze),Ze.touches){if(Ze.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Vv(Ze.view,Z),Ye.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);je.attr("pointer-events","all"),Pe.attr("cursor",Ra.overlay),S.selection&&(O=S.selection),Bne(O)&&(S.selection=null,u.call(v)),Ue.end(Ze,y.name)}function vt(Ze){switch(Ze.keyCode){case 16:{ne=b&&T;break}case 18:{y===Pu&&(b&&(j=W-Ae*b,R=w+Ae*b),T&&(oe=fe-de*T,B=A+de*T),y=Du,qe());break}case 32:{(y===Pu||y===Du)&&(b<0?j=W-Ae:b>0&&(R=w-Ae),T<0?oe=fe-de:T>0&&(B=A-de),y=SS,Pe.attr("cursor",Ra.selection),qe());break}default:return}ES(Ze)}function dt(Ze){switch(Ze.keyCode){case 16:{ne&&(ue=Oe=ne=!1,qe());break}case 18:{y===Du&&(b<0?j=W:b>0&&(R=w),T<0?oe=fe:T>0&&(B=A),y=Pu,qe());break}case 32:{y===SS&&(Ze.altKey?(b&&(j=W-Ae*b,R=w+Ae*b),T&&(oe=fe-de*T,B=A+de*T),y=Du):(b<0?j=W:b>0&&(R=w),T<0?oe=fe:T>0&&(B=A),y=Pu),Pe.attr("cursor",Ra[_]),qe());break}default:return}ES(Ze)}}function d(g){l(this,arguments).moved(g)}function p(g){l(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=wS(t.apply(this,arguments)),g.dim=e,g}return c.extent=function(g){return arguments.length?(t=typeof g=="function"?g:TS(wS(g)),c):t},c.filter=function(g){return arguments.length?(r=typeof g=="function"?g:TS(!!g),c):r},c.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:TS(!!g),c):i},c.handleSize=function(g){return arguments.length?(a=+g,c):a},c.keyModifiers=function(g){return arguments.length?(n=!!g,c):n},c.on=function(){var g=o.on.apply(o,arguments);return g===o?c:g},c}const $ne=Object.freeze(Object.defineProperty({__proto__:null,brush:OS,brushSelection:Hne,brushX:ry,brushY:Dd},Symbol.toStringTag,{value:"Module"}));function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xd.apply(this,arguments)}function Fne(e){if(Array.isArray(e))return e}function jne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(l){u=!0,n=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return s}}function IS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function HL(e,t){if(e){if(typeof e=="string")return IS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IS(e,t)}}function Une(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $L(e,t){return Fne(e)||jne(e,t)||HL(e,t)||Une()}function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function Gne(e,t){if(xu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(xu(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FL(e){var t=Gne(e,"string");return xu(t)==="symbol"?t:String(t)}function hr(e,t,r){return t=FL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.forEach(function(n){hr(e,n,r[n])})}return e}function Nd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,FL(i.key),i)}}function Rd(e,t,r){return t&&jL(e.prototype,t),r&&jL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PS(e,t){if(t&&(xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}function Md(e){return Md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Md(e)}function DS(e,t){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},DS(e,t)}function xS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DS(e,t)}var zne=function(e,t,r,i,n,o,a,s){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,i,n,o,a,s],l=0;c=new Error(t.replace(/%s/g,function(){return u[l++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Vne=zne;const Ul=ui(Vne);function Wne(e){if(Array.isArray(e))return IS(e)}function Yne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xne(e){return Wne(e)||Yne(e)||HL(e)||qne()}var Kne=function(){function e(){Nd(this,e),hr(this,"refs",{})}return Rd(e,[{key:"add",value:function(r,i){this.refs[r]||(this.refs[r]=[]),this.refs[r].push(i)}},{key:"remove",value:function(r,i){var n=this.getIndex(r,i);n!==-1&&this.refs[r].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var r=this;return this.refs[this.active.collection].find(function(i){var n=i.node;return n.sortableInfo.index==r.active.index})}},{key:"getIndex",value:function(r,i){return this.refs[r].indexOf(i)}},{key:"getOrderedRefs",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[r].sort(Zne)}}]),e}();function Zne(e,t){var r=e.node.sortableInfo.index,i=t.node.sortableInfo.index;return r-i}function Qne(e,t,r){return e=e.slice(),e.splice(r<0?e.length+r:r,0,e.splice(t,1)[0]),e}function UL(e,t){return Object.keys(e).reduce(function(r,i){return t.indexOf(i)===-1&&(r[i]=e[i]),r},{})}var Nu={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},GL=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function ny(e,t){Object.keys(t).forEach(function(r){e.style[r]=t[r]})}function iy(e,t){e.style["".concat(GL,"Transform")]=t==null?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function NS(e,t){e.style["".concat(GL,"TransitionDuration")]=t==null?"":"".concat(t,"ms")}function Ld(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function zL(e,t,r){return Math.max(e,Math.min(r,t))}function Ru(e){return e.substr(-2)==="px"?parseFloat(e):0}function Jne(e){var t=window.getComputedStyle(e);return{bottom:Ru(t.marginBottom),left:Ru(t.marginLeft),right:Ru(t.marginRight),top:Ru(t.marginTop)}}function RS(e,t){var r=t.displayName||t.name;return r?"".concat(e,"(").concat(r,")"):e}function MS(e,t){var r=e.getBoundingClientRect();return{top:r.top+t.top,left:r.left+t.left}}function Bd(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function eie(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function oy(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(e){var i={left:r.left+e.offsetLeft,top:r.top+e.offsetTop};return e.parentNode===t?i:oy(e.parentNode,t,i)}}function tie(e,t,r){return e<r&&e>t?e-1:e>r&&e<t?e+1:e}function VL(e){var t=e.lockOffset,r=e.width,i=e.height,n=t,o=t,a="px";if(typeof t=="string"){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);Ul(s!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),n=parseFloat(t),o=parseFloat(t),a=s[1]}return Ul(isFinite(n)&&isFinite(o),"lockOffset value should be a finite. Given %s",t),a==="%"&&(n=n*r/100,o=o*i/100),{x:n,y:o}}function rie(e){var t=e.height,r=e.width,i=e.lockOffset,n=Array.isArray(i)?i:[i,i];Ul(n.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",i);var o=$L(n,2),a=o[0],s=o[1];return[VL({height:t,lockOffset:a,width:r}),VL({height:t,lockOffset:s,width:r})]}function nie(e){var t=window.getComputedStyle(e),r=/(auto|scroll)/,i=["overflow","overflowX","overflowY"];return i.find(function(n){return r.test(t[n])})}function WL(e){return e instanceof HTMLElement?nie(e)?e:WL(e.parentNode):null}function iie(e){var t=window.getComputedStyle(e);return t.display==="grid"?{x:Ru(t.gridColumnGap),y:Ru(t.gridRowGap)}:{x:0,y:0}}var Gl={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},zl={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function oie(e){var t="input, textarea, select, canvas, [contenteditable]",r=e.querySelectorAll(t),i=e.cloneNode(!0),n=Xne(i.querySelectorAll(t));return n.forEach(function(o,a){if(o.type!=="file"&&(o.value=r[a].value),o.type==="radio"&&o.name&&(o.name="__sortableClone__".concat(o.name)),o.tagName===zl.Canvas&&r[a].width>0&&r[a].height>0){var s=o.getContext("2d");s.drawImage(r[a],0,0)}}),i}function LS(e){var t,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=t=function(n){xS(o,n);function o(){return Nd(this,o),PS(this,Md(o).apply(this,arguments))}return Rd(o,[{key:"componentDidMount",value:function(){var s=Br.findDOMNode(this);s.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Ul(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var s=i.withRef?"wrappedInstance":null;return E.createElement(e,xd({ref:s},this.props))}}]),o}(E.Component),hr(t,"displayName",RS("sortableHandle",e)),r}function YL(e){return e.sortableHandle!=null}var aie=function(){function e(t,r){Nd(this,e),this.container=t,this.onScrollCallback=r}return Rd(e,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(r){var i=this,n=r.translate,o=r.minTranslate,a=r.maxTranslate,s=r.width,c=r.height,u={x:0,y:0},l={x:1,y:1},h={x:10,y:10},f=this.container,d=f.scrollTop,p=f.scrollLeft,m=f.scrollHeight,g=f.scrollWidth,v=f.clientHeight,_=f.clientWidth,y=d===0,b=m-d-v===0,T=p===0,S=g-p-_===0;n.y>=a.y-c/2&&!b?(u.y=1,l.y=h.y*Math.abs((a.y-c/2-n.y)/c)):n.x>=a.x-s/2&&!S?(u.x=1,l.x=h.x*Math.abs((a.x-s/2-n.x)/s)):n.y<=o.y+c/2&&!y?(u.y=-1,l.y=h.y*Math.abs((n.y-c/2-o.y)/c)):n.x<=o.x+s/2&&!T&&(u.x=-1,l.x=h.x*Math.abs((n.x-s/2-o.x)/s)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(u.x!==0||u.y!==0)&&(this.interval=setInterval(function(){i.isAutoScrolling=!0;var k={left:l.x*u.x,top:l.y*u.y};i.container.scrollTop+=k.top,i.container.scrollLeft+=k.left,i.onScrollCallback(k)},5))}}]),e}();function sie(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}}function lie(e){var t=[zl.Input,zl.Textarea,zl.Select,zl.Option,zl.Button];return!!(t.indexOf(e.target.tagName)!==-1||Ld(e.target,function(r){return r.contentEditable==="true"}))}var qL={axis:N.oneOf(["x","y","xy"]),contentWindow:N.any,disableAutoscroll:N.bool,distance:N.number,getContainer:N.func,getHelperDimensions:N.func,helperClass:N.string,helperContainer:N.oneOfType([N.func,typeof HTMLElement>"u"?N.any:N.instanceOf(HTMLElement)]),hideSortableGhost:N.bool,keyboardSortingTransitionDuration:N.number,lockAxis:N.string,lockOffset:N.oneOfType([N.number,N.string,N.arrayOf(N.oneOfType([N.number,N.string]))]),lockToContainerEdges:N.bool,onSortEnd:N.func,onSortMove:N.func,onSortOver:N.func,onSortStart:N.func,pressDelay:N.number,pressThreshold:N.number,keyCodes:N.shape({lift:N.arrayOf(N.number),drop:N.arrayOf(N.number),cancel:N.arrayOf(N.number),up:N.arrayOf(N.number),down:N.arrayOf(N.number)}),shouldCancelStart:N.func,transitionDuration:N.number,updateBeforeSortStart:N.func,useDragHandle:N.bool,useWindowAsScrollContainer:N.bool},XL={lift:[Gl.SPACE],drop:[Gl.SPACE],cancel:[Gl.ESC],up:[Gl.UP,Gl.LEFT],down:[Gl.DOWN,Gl.RIGHT]},cie={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:sie,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:XL,shouldCancelStart:lie,transitionDuration:300,useWindowAsScrollContainer:!1},uie=Object.keys(qL);function fie(e){Ul(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function hie(e,t){try{var r=e()}catch(i){return t(!0,i)}return r&&r.then?r.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}function die(e){var t,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=t=function(n){xS(o,n);function o(a){var s;return Nd(this,o),s=PS(this,Md(o).call(this,a)),hr(zt(zt(s)),"state",{}),hr(zt(zt(s)),"handleStart",function(c){var u=s.props,l=u.distance,h=u.shouldCancelStart;if(!(c.button===2||h(c))){s.touched=!0,s.position=Bd(c);var f=Ld(c.target,function(_){return _.sortableInfo!=null});if(f&&f.sortableInfo&&s.nodeIsChild(f)&&!s.state.sorting){var d=s.props.useDragHandle,p=f.sortableInfo,m=p.index,g=p.collection,v=p.disabled;if(v||d&&!Ld(c.target,YL))return;s.manager.active={collection:g,index:m},!eie(c)&&c.target.tagName===zl.Anchor&&c.preventDefault(),l||(s.props.pressDelay===0?s.handlePress(c):s.pressTimer=setTimeout(function(){return s.handlePress(c)},s.props.pressDelay))}}}),hr(zt(zt(s)),"nodeIsChild",function(c){return c.sortableInfo.manager===s.manager}),hr(zt(zt(s)),"handleMove",function(c){var u=s.props,l=u.distance,h=u.pressThreshold;if(!s.state.sorting&&s.touched&&!s._awaitingUpdateBeforeSortStart){var f=Bd(c),d={x:s.position.x-f.x,y:s.position.y-f.y},p=Math.abs(d.x)+Math.abs(d.y);s.delta=d,!l&&(!h||p>=h)?(clearTimeout(s.cancelTimer),s.cancelTimer=setTimeout(s.cancel,0)):l&&p>=l&&s.manager.isActive()&&s.handlePress(c)}}),hr(zt(zt(s)),"handleEnd",function(){s.touched=!1,s.cancel()}),hr(zt(zt(s)),"cancel",function(){var c=s.props.distance,u=s.state.sorting;u||(c||clearTimeout(s.pressTimer),s.manager.active=null)}),hr(zt(zt(s)),"handlePress",function(c){try{var u=s.manager.getActive(),l=function(){if(u){var h=function(){var D=b.sortableInfo.index,R=Jne(b),w=iie(s.container),L=s.scrollContainer.getBoundingClientRect(),B=p({index:D,node:b,collection:T});if(s.node=b,s.margin=R,s.gridGap=w,s.width=B.width,s.height=B.height,s.marginOffset={x:s.margin.left+s.margin.right+s.gridGap.x,y:Math.max(s.margin.top,s.margin.bottom,s.gridGap.y)},s.boundingClientRect=b.getBoundingClientRect(),s.containerBoundingRect=L,s.index=D,s.newIndex=D,s.axis={x:d.indexOf("x")>=0,y:d.indexOf("y")>=0},s.offsetEdge=oy(b,s.container),S?s.initialOffset=Bd(CS({},c,{pageX:s.boundingClientRect.left,pageY:s.boundingClientRect.top})):s.initialOffset=Bd(c),s.initialScroll={left:s.scrollContainer.scrollLeft,top:s.scrollContainer.scrollTop},s.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},s.helper=s.helperContainer.appendChild(oie(b)),ny(s.helper,{boxSizing:"border-box",height:"".concat(s.height,"px"),left:"".concat(s.boundingClientRect.left-R.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(s.boundingClientRect.top-R.top,"px"),width:"".concat(s.width,"px")}),S&&s.helper.focus(),g&&(s.sortableGhost=b,ny(b,{opacity:0,visibility:"hidden"})),s.minTranslate={},s.maxTranslate={},S){var A=y?{top:0,left:0,width:s.contentWindow.innerWidth,height:s.contentWindow.innerHeight}:s.containerBoundingRect,M=A.top,j=A.left,W=A.width,K=A.height,oe=M+K,fe=j+W;s.axis.x&&(s.minTranslate.x=j-s.boundingClientRect.left,s.maxTranslate.x=fe-(s.boundingClientRect.left+s.width)),s.axis.y&&(s.minTranslate.y=M-s.boundingClientRect.top,s.maxTranslate.y=oe-(s.boundingClientRect.top+s.height))}else s.axis.x&&(s.minTranslate.x=(y?0:L.left)-s.boundingClientRect.left-s.width/2,s.maxTranslate.x=(y?s.contentWindow.innerWidth:L.left+L.width)-s.boundingClientRect.left-s.width/2),s.axis.y&&(s.minTranslate.y=(y?0:L.top)-s.boundingClientRect.top-s.height/2,s.maxTranslate.y=(y?s.contentWindow.innerHeight:L.top+L.height)-s.boundingClientRect.top-s.height/2);m&&m.split(" ").forEach(function(Ae){return s.helper.classList.add(Ae)}),s.listenerNode=c.touches?b:s.contentWindow,S?(s.listenerNode.addEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.addEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.addEventListener("keydown",s.handleKeyDown)):(Nu.move.forEach(function(Ae){return s.listenerNode.addEventListener(Ae,s.handleSortMove,!1)}),Nu.end.forEach(function(Ae){return s.listenerNode.addEventListener(Ae,s.handleSortEnd,!1)})),s.setState({sorting:!0,sortingIndex:D}),_&&_({node:b,index:D,collection:T,isKeySorting:S,nodes:s.manager.getOrderedRefs(),helper:s.helper},c),S&&s.keyMove(0)},f=s.props,d=f.axis,p=f.getHelperDimensions,m=f.helperClass,g=f.hideSortableGhost,v=f.updateBeforeSortStart,_=f.onSortStart,y=f.useWindowAsScrollContainer,b=u.node,T=u.collection,S=s.manager.isKeySorting,k=function(){if(typeof v=="function"){s._awaitingUpdateBeforeSortStart=!0;var O=hie(function(){var D=b.sortableInfo.index;return Promise.resolve(v({collection:T,index:D,node:b,isKeySorting:S},c)).then(function(){})},function(D,R){if(s._awaitingUpdateBeforeSortStart=!1,D)throw R;return R});if(O&&O.then)return O.then(function(){})}}();return k&&k.then?k.then(h):h(k)}}();return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(h){return Promise.reject(h)}}),hr(zt(zt(s)),"handleSortMove",function(c){var u=s.props.onSortMove;typeof c.preventDefault=="function"&&c.preventDefault(),s.updateHelperPosition(c),s.animateNodes(),s.autoscroll(),u&&u(c)}),hr(zt(zt(s)),"handleSortEnd",function(c){var u=s.props,l=u.hideSortableGhost,h=u.onSortEnd,f=s.manager,d=f.active.collection,p=f.isKeySorting,m=s.manager.getOrderedRefs();s.listenerNode&&(p?(s.listenerNode.removeEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("keydown",s.handleKeyDown)):(Nu.move.forEach(function(b){return s.listenerNode.removeEventListener(b,s.handleSortMove)}),Nu.end.forEach(function(b){return s.listenerNode.removeEventListener(b,s.handleSortEnd)}))),s.helper.parentNode.removeChild(s.helper),l&&s.sortableGhost&&ny(s.sortableGhost,{opacity:"",visibility:""});for(var g=0,v=m.length;g<v;g++){var _=m[g],y=_.node;_.edgeOffset=null,_.boundingClientRect=null,iy(y,null),NS(y,null),_.translate=null}s.autoScroller.clear(),s.manager.active=null,s.manager.isKeySorting=!1,s.setState({sorting:!1,sortingIndex:null}),typeof h=="function"&&h({collection:d,newIndex:s.newIndex,oldIndex:s.index,isKeySorting:p,nodes:m},c),s.touched=!1}),hr(zt(zt(s)),"autoscroll",function(){var c=s.props.disableAutoscroll,u=s.manager.isKeySorting;if(c){s.autoScroller.clear();return}if(u){var l=CS({},s.translate),h=0,f=0;s.axis.x&&(l.x=Math.min(s.maxTranslate.x,Math.max(s.minTranslate.x,s.translate.x)),h=s.translate.x-l.x),s.axis.y&&(l.y=Math.min(s.maxTranslate.y,Math.max(s.minTranslate.y,s.translate.y)),f=s.translate.y-l.y),s.translate=l,iy(s.helper,s.translate),s.scrollContainer.scrollLeft+=h,s.scrollContainer.scrollTop+=f;return}s.autoScroller.update({height:s.height,maxTranslate:s.maxTranslate,minTranslate:s.minTranslate,translate:s.translate,width:s.width})}),hr(zt(zt(s)),"onAutoScroll",function(c){s.translate.x+=c.left,s.translate.y+=c.top,s.animateNodes()}),hr(zt(zt(s)),"handleKeyDown",function(c){var u=c.keyCode,l=s.props,h=l.shouldCancelStart,f=l.keyCodes,d=f===void 0?{}:f,p=CS({},XL,d);s.manager.active&&!s.manager.isKeySorting||!s.manager.active&&(!p.lift.includes(u)||h(c)||!s.isValidSortingTarget(c))||(c.stopPropagation(),c.preventDefault(),p.lift.includes(u)&&!s.manager.active?s.keyLift(c):p.drop.includes(u)&&s.manager.active?s.keyDrop(c):p.cancel.includes(u)?(s.newIndex=s.manager.active.index,s.keyDrop(c)):p.up.includes(u)?s.keyMove(-1):p.down.includes(u)&&s.keyMove(1))}),hr(zt(zt(s)),"keyLift",function(c){var u=c.target,l=Ld(u,function(p){return p.sortableInfo!=null}),h=l.sortableInfo,f=h.index,d=h.collection;s.initialFocusedNode=u,s.manager.isKeySorting=!0,s.manager.active={index:f,collection:d},s.handlePress(c)}),hr(zt(zt(s)),"keyMove",function(c){var u=s.manager.getOrderedRefs(),l=u[u.length-1].node.sortableInfo.index,h=s.newIndex+c,f=s.newIndex;if(!(h<0||h>l)){s.prevIndex=f,s.newIndex=h;var d=tie(s.newIndex,s.prevIndex,s.index),p=u.find(function(S){var k=S.node;return k.sortableInfo.index===d}),m=p.node,g=s.containerScrollDelta,v=p.boundingClientRect||MS(m,g),_=p.translate||{x:0,y:0},y={top:v.top+_.y-g.top,left:v.left+_.x-g.left},b=f<h,T={x:b&&s.axis.x?m.offsetWidth-s.width:0,y:b&&s.axis.y?m.offsetHeight-s.height:0};s.handleSortMove({pageX:y.left+T.x,pageY:y.top+T.y,ignoreTransition:c===0})}}),hr(zt(zt(s)),"keyDrop",function(c){s.handleSortEnd(c),s.initialFocusedNode&&s.initialFocusedNode.focus()}),hr(zt(zt(s)),"handleKeyEnd",function(c){s.manager.active&&s.keyDrop(c)}),hr(zt(zt(s)),"isValidSortingTarget",function(c){var u=s.props.useDragHandle,l=c.target,h=Ld(l,function(f){return f.sortableInfo!=null});return h&&h.sortableInfo&&!h.sortableInfo.disabled&&(u?YL(l):l.sortableInfo)}),fie(a),s.manager=new Kne,s.events={end:s.handleEnd,move:s.handleMove,start:s.handleStart},s}return Rd(o,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var s=this,c=this.props.useWindowAsScrollContainer,u=this.getContainer();Promise.resolve(u).then(function(l){s.container=l,s.document=s.container.ownerDocument||document;var h=s.props.contentWindow||s.document.defaultView||window;s.contentWindow=typeof h=="function"?h():h,s.scrollContainer=c?s.document.scrollingElement||s.document.documentElement:WL(s.container)||s.container,s.autoScroller=new aie(s.scrollContainer,s.onAutoScroll),Object.keys(s.events).forEach(function(f){return Nu[f].forEach(function(d){return s.container.addEventListener(d,s.events[f],!1)})}),s.container.addEventListener("keydown",s.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var s=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(c){return Nu[c].forEach(function(u){return s.container.removeEventListener(u,s.events[c])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(s){var c=this.props,u=c.lockAxis,l=c.lockOffset,h=c.lockToContainerEdges,f=c.transitionDuration,d=c.keyboardSortingTransitionDuration,p=d===void 0?f:d,m=this.manager.isKeySorting,g=s.ignoreTransition,v=Bd(s),_={x:v.x-this.initialOffset.x,y:v.y-this.initialOffset.y};if(_.y-=window.pageYOffset-this.initialWindowScroll.top,_.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=_,h){var y=rie({height:this.height,lockOffset:l,width:this.width}),b=$L(y,2),T=b[0],S=b[1],k={x:this.width/2-T.x,y:this.height/2-T.y},O={x:this.width/2-S.x,y:this.height/2-S.y};_.x=zL(this.minTranslate.x+k.x,this.maxTranslate.x-O.x,_.x),_.y=zL(this.minTranslate.y+k.y,this.maxTranslate.y-O.y,_.y)}u==="x"?_.y=0:u==="y"&&(_.x=0),m&&p&&!g&&NS(this.helper,p),iy(this.helper,_)}},{key:"animateNodes",value:function(){var s=this.props,c=s.transitionDuration,u=s.hideSortableGhost,l=s.onSortOver,h=this.containerScrollDelta,f=this.windowScrollDelta,d=this.manager.getOrderedRefs(),p={left:this.offsetEdge.left+this.translate.x+h.left,top:this.offsetEdge.top+this.translate.y+h.top},m=this.manager.isKeySorting,g=this.newIndex;this.newIndex=null;for(var v=0,_=d.length;v<_;v++){var y=d[v].node,b=y.sortableInfo.index,T=y.offsetWidth,S=y.offsetHeight,k={height:this.height>S?S/2:this.height/2,width:this.width>T?T/2:this.width/2},O=m&&b>this.index&&b<=g,D=m&&b<this.index&&b>=g,R={x:0,y:0},w=d[v].edgeOffset;w||(w=oy(y,this.container),d[v].edgeOffset=w,m&&(d[v].boundingClientRect=MS(y,h)));var L=v<d.length-1&&d[v+1],B=v>0&&d[v-1];if(L&&!L.edgeOffset&&(L.edgeOffset=oy(L.node,this.container),m&&(L.boundingClientRect=MS(L.node,h))),b===this.index){u&&(this.sortableGhost=y,ny(y,{opacity:0,visibility:"hidden"}));continue}c&&NS(y,c),this.axis.x?this.axis.y?D||b<this.index&&(p.left+f.left-k.width<=w.left&&p.top+f.top<=w.top+k.height||p.top+f.top+k.height<=w.top)?(R.x=this.width+this.marginOffset.x,w.left+R.x>this.containerBoundingRect.width-k.width&&L&&(R.x=L.edgeOffset.left-w.left,R.y=L.edgeOffset.top-w.top),this.newIndex===null&&(this.newIndex=b)):(O||b>this.index&&(p.left+f.left+k.width>=w.left&&p.top+f.top+k.height>=w.top||p.top+f.top+k.height>=w.top+S))&&(R.x=-(this.width+this.marginOffset.x),w.left+R.x<this.containerBoundingRect.left+k.width&&B&&(R.x=B.edgeOffset.left-w.left,R.y=B.edgeOffset.top-w.top),this.newIndex=b):O||b>this.index&&p.left+f.left+k.width>=w.left?(R.x=-(this.width+this.marginOffset.x),this.newIndex=b):(D||b<this.index&&p.left+f.left<=w.left+k.width)&&(R.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=b)):this.axis.y&&(O||b>this.index&&p.top+f.top+k.height>=w.top?(R.y=-(this.height+this.marginOffset.y),this.newIndex=b):(D||b<this.index&&p.top+f.top<=w.top+k.height)&&(R.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=b))),iy(y,R),d[v].translate=R}this.newIndex==null&&(this.newIndex=this.index),m&&(this.newIndex=g);var A=m?this.prevIndex:g;l&&this.newIndex!==A&&l({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:A,isKeySorting:m,nodes:d,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Ul(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var s=this.props.getContainer;return typeof s!="function"?Br.findDOMNode(this):s(i.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var s=i.withRef?"wrappedInstance":null;return E.createElement(e,xd({ref:s},UL(this.props,uie)))}},{key:"helperContainer",get:function(){var s=this.props.helperContainer;return typeof s=="function"?s():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var s=this.props.useWindowAsScrollContainer;return s?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),o}(E.Component),hr(t,"displayName",RS("sortableList",e)),hr(t,"defaultProps",cie),hr(t,"propTypes",qL),hr(t,"childContextTypes",{manager:N.object.isRequired}),r}var KL={index:N.number.isRequired,collection:N.oneOfType([N.number,N.string]),disabled:N.bool},pie=Object.keys(KL);function ZL(e){var t,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=t=function(n){xS(o,n);function o(){return Nd(this,o),PS(this,Md(o).apply(this,arguments))}return Rd(o,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(s){this.node&&(s.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),s.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),s.collection!==this.props.collection&&(this.unregister(s.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var s=this.props,c=s.collection,u=s.disabled,l=s.index,h=Br.findDOMNode(this);h.sortableInfo={collection:c,disabled:u,index:l,manager:this.context.manager},this.node=h,this.ref={node:h},this.context.manager.add(c,this.ref)}},{key:"unregister",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(s,this.ref)}},{key:"getWrappedInstance",value:function(){return Ul(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var s=i.withRef?"wrappedInstance":null;return E.createElement(e,xd({ref:s},UL(this.props,pie)))}}]),o}(E.Component),hr(t,"displayName",RS("sortableElement",e)),hr(t,"contextTypes",{manager:N.object.isRequired}),hr(t,"propTypes",KL),hr(t,"defaultProps",{collection:0}),r}const BS=su(e=>e.pos).left,Dr=(e,t)=>{if(!t||!t.cumPositions||!t.cumPositions.length)return null;let r=BS(t.cumPositions,e);const i=t.cumPositions[t.cumPositions.length-1].chr,n=t.chromLengths[i];r>0&&(r-=1);let o=Math.floor(e-t.cumPositions[r].pos),a=0;return o<0&&(a=o-1,o=1),r===t.cumPositions.length-1&&o>n&&(a=o-n,o=n),[t.cumPositions[r].chr,o,a,r]},QL=(e,t)=>r=>r%e*t+Math.floor(r/e),mie=e=>e,JL=(e,t,r=mie)=>e.map((i,n)=>i+t[r(n)]),gie="http://www.w3.org/2000/svg",ay=(e,t)=>{if(e.namespaceURI===gie){const r=e.getAttribute("class");return!!r&&!!r.match(new RegExp(`(\\s|^)${t}(\\s|$)`))}return e.classList?e.classList.contains(t):!!e.className.match(new RegExp(`(\\s|^)${t}(\\s|$)`))},vie="http://www.w3.org/2000/svg",yie=(e,t)=>{if(e.namespaceURI===vie){if(!ay(e,t)){const r=e.getAttribute("class")||"";e.setAttribute("class",`${r} ${t}`)}}else e.classList?e.classList.add(t):ay(e,t)||(e.className+=` ${t}`)},bie=(e,t,r)=>{const i=document.createElement("canvas");return new Promise((n,o)=>{const a=new window.Image;a.onload=()=>{i.width=t||a.width,i.height=r||a.height;const s=i.getContext("2d");if(!s){o(new Error("Could not get canvas context"));return}s.drawImage(a,0,0),n(i)},a.onerror=()=>{o(new Error("Could not convert base64 to canvas"))},a.src=`data:image/png;base64,${e}`})},Hd=(e,t,r)=>r.chrPositions[e].pos+t,e5=e=>{if(!(e instanceof Event))throw new Error("Event must be an instance of Event");const t=new e.constructor(e.type,e);return t.sourceUid=e.sourceUid,t.forwarded=e.forwarded,t},Ma=(e,t=!1)=>{const r=e.map((a,s)=>s*(255/(e.length-1))),i=bt().domain(r).range(e),o=Vn(t?255:254,-1,-1).map(i).map(a=>{const s=du(a);return[s.r,s.g,s.b,s.opacity*255]});return o.length<256&&o.push([255,255,255,0]),o},He={PIXI:_E},it=e=>{const t=Qr(e);return He.PIXI.utils.rgb2hex([t.r/255,t.g/255,t.b/255])},t5=e=>{if(e==="transparent")return[255,255,255,0];const t=Qr(e);return[t.r,t.g,t.b,255]},sy=(e,t,r)=>{const i=Dr(e,r),n=Dr(t,r);if(!i||!n)throw new Error("Couldn't convert data to genomic coordinates");return[i[0],Math.round(i[1]),n[0],Math.round(n[1])]},HS=(e,t,r)=>{let i;const n=(...o)=>{const a=()=>{i=void 0,r||e(...o)},s=r&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e(...o)};return n.cancel=()=>{clearTimeout(i),i=void 0},n},$S=e=>(e+16**6).toString(16).substr(-6),r5=e=>{const t={};return e.forEach(r=>{t[r[0]]=r[1]}),t},Wi=e=>{const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push([r,e[r]]);return t};function Yi(e){const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push(r);return t}function ur(e){const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}function $d(e,t){const r=typeof t=="string"?new Blob([t],{type:"application/octet-stream"}):t,i=window.document.createElement("a");i.href=window.URL.createObjectURL(r),i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(i.href)}const Fd=0,jd=5,n5=10,i5=10,o5=300,ly="move",qi="select",FS=100,cy=10,a5=110,Ud=3e3,Gd="locationListenerPrefix",s5=1e3,jS="http://higlass.io/api/v1",l5=400,c5=300,US=["top","left","right","bottom","center","whole","gallery"],u5=20,f5=20,uy=Symbol("Light theme"),mr=Symbol("Dark theme"),_ie=uy,Xi={"multitrack-header":"_multitrack-header_1yz7l_1","multitrack-header-focus":"_multitrack-header-focus_1yz7l_2","multitrack-header-squeazed":"_multitrack-header-squeazed_1yz7l_3","multitrack-header-dark":"_multitrack-header-dark_1yz7l_20","multitrack-header-id":"_multitrack-header-id_1yz7l_30","multitrack-header-left":"_multitrack-header-left_1yz7l_39","multitrack-header-grabber":"_multitrack-header-grabber_1yz7l_44","multitrack-header-grabber-squeazed":"_multitrack-header-grabber-squeazed_1yz7l_45","multitrack-header-search":"_multitrack-header-search_1yz7l_80","multitrack-header-nav-list":"_multitrack-header-nav-list_1yz7l_102","multitrack-header-icon":"_multitrack-header-icon_1yz7l_107","multitrack-header-icon-squeazed":"_multitrack-header-icon-squeazed_1yz7l_108","mouse-tool-selection":"_mouse-tool-selection_1yz7l_136"},Tie=[{id:"cog",paths:["M466.895 305.125c-26.863-46.527-10.708-106.152 36.076-133.244l-50.313-87.146c-14.375 8.427-31.088 13.259-48.923 13.259-53.768 0-97.354-43.873-97.354-97.995h-100.629c0.133 16.705-4.037 33.641-12.979 49.126-26.862 46.528-86.578 62.351-133.431 35.379l-50.312 87.146c14.485 8.236 27.025 20.294 35.943 35.739 26.819 46.454 10.756 105.96-35.854 133.112l50.313 87.146c14.325-8.348 30.958-13.127 48.7-13.127 53.598 0 97.072 43.596 97.35 97.479h100.627c-0.043-16.537 4.136-33.285 12.983-48.609 26.818-46.453 86.388-62.297 133.207-35.506l50.313-87.145c-14.39-8.233-26.846-20.249-35.717-35.614zM256 359.666c-57.254 0-103.668-46.412-103.668-103.667 0-57.254 46.413-103.667 103.668-103.667s103.666 46.413 103.666 103.667c-0.001 57.255-46.412 103.667-103.666 103.667z"],viewBox:"0 0 512 512"},{id:"cross",paths:["M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"],viewBox:"0 0 512 512"},{id:"enlarge",paths:["M512 0h-208l80 80-96 96 48 48 96-96 80 80z","M512 512v-208l-80 80-96-96-48 48 96 96-80 80z","M0 512h208l-80-80 96-96-48-48-96 96-80-80z","M0 0v208l80-80 96 96 48-48-96-96 80-80z"],viewBox:"0 0 512 512"},{id:"minus",paths:["M0 208v96c0 8.836 7.164 16 16 16h480c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16h-480c-8.836 0-16 7.164-16 16z"],viewBox:"0 0 512 512"},{id:"move",paths:["M512,260.096L405.5,161.79v49.155H301.061v-104.45h49.149L251.904,0L160.77,106.495h49.15v104.45H106.495V161.79L0,260.096l106.495,91.135v-49.149h104.45v104.45H161.79L251.904,512l98.306-106.5h-49.149V301.061H405.5v49.149L512,260.096z"],viewBox:"0 0 512 512"},{id:"play",paths:["M96 64l320 192-320 192z"],viewBox:"0 0 512 512"},{id:"plus",paths:["M496 192h-176v-176c0-8.836-7.164-16-16-16h-96c-8.836 0-16 7.164-16 16v176h-176c-8.836 0-16 7.164-16 16v96c0 8.836 7.164 16 16 16h176v176c0 8.836 7.164 16 16 16h96c8.836 0 16-7.164 16-16v-176h176c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16z"],viewBox:"0 0 512 512"},{id:"copy",paths:["M607.5 672v-448.5h-351v448.5h351zM607.5 160.5c34.5 0 64.5 28.5 64.5 63v448.5c0 34.5-30 64.5-64.5 64.5h-351c-34.5 0-64.5-30-64.5-64.5v-448.5c0-34.5 30-63 64.5-63h351zM511.5 31.5v64.5h-384v448.5h-63v-448.5c0-34.5 28.5-64.5 63-64.5h384z"],viewBox:"0 0 712 712"},{id:"select",viewBox:"0 0 16 16",paths:["M2 14h2v1H1v-3h1v2zm8 1H6v-1h4v1zm5 0h-3v-1h2v-2h1v3zm0-5h-1V6h1v4zM2 10H1V6h1v4zm13-6h-1V2h-2V1h3v3zM4 2H2v2H1V1h3v1zm6 0H6V1h4.03L10 2z"]},{id:"check_square_o",viewBox:"0 0 1792 1792",paths:["M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"]},{id:"square_o",viewBox:"0 0 1792 1792",paths:["M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"]},{id:"file_o",viewBox:"0 0 1792 1792",paths:["M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280z"]},{id:"folder_o",viewBox:"0 0 1792 1792",paths:["M1600 1312v-704q0-40-28-68t-68-28h-704q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v960q0 40 28 68t68 28h1216q40 0 68-28t28-68zm128-704v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"]},{id:"folder_open_o",viewBox:"0 0 1792 1792",paths:["M1845 931q0-35-53-35h-1088q-40 0-85.5 21.5t-71.5 52.5l-294 363q-18 24-18 40 0 35 53 35h1088q40 0 86-22t71-53l294-363q18-22 18-39zm-1141-163h768v-160q0-40-28-68t-68-28h-576q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v853l256-315q44-53 116-87.5t140-34.5zm1269 163q0 62-46 120l-295 363q-43 53-116 87.5t-140 34.5h-1088q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h544q92 0 158 66t66 158v160h192q54 0 99 24.5t67 70.5q15 32 15 68z"]},{id:"chevron_right",viewBox:"0 0 1792 1792",paths:["M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"]},{id:"chevron_down",viewBox:"0 0 1792 1792",paths:["M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"]}],ho=new DOMParser,Eie='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268M10.5 3.5v12" fill="none" stroke="currentColor"/><path d="M5.5 13.5v-7" fill="none" stroke="currentColor" stroke-width=".9969299999999999"/><path d="M5.494 0c-1.803 0-3.26 1.496-3.26 3.35 0 .427.124.97.264 1.343L5.5 11l3.003-6.306c.142-.375.263-.916.263-1.342C8.766 1.496 7.3 0 5.494 0zM5.5 4.64c-.76 0-1.375-.616-1.375-1.374 0-.76.616-1.376 1.375-1.376.76 0 1.374.616 1.374 1.376 0 .758-.614 1.375-1.374 1.375z" fill="currentColor"/></svg>',GS=ho.parseFromString(Eie,"text/xml").documentElement,Sie=`
<svg width="20px" height="20px" viewBox="0 0 20 20">
  <rect x="0" y="3" width="4" height="14" fill="#637993"/>
  <rect x="4" y="3" width="2" height="14" fill="#c7d1de"/>
  <rect x="6" y="3" width="5" height="14" fill="#3c5068"/>
  <rect x="11" y="3" width="3" height="14" fill="#92a3ba"/>
  <rect x="14" y="3" width="2" height="14" fill="#000000"/>
  <rect x="16" y="3" width="4" height="14" fill="#637993"/>
</svg>
`,wie=ho.parseFromString(Sie,"text/xml").documentElement,Aie=`
<svg width="20px" height="20px" viewBox="0 0 135 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>line</title>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#4990E2" stroke-width="8" points="2 45.5625 20.7460938 6.3359375 36.828125 86.6484375 59.8945312 17.5742188 79.0390625 70.703125 99.9335938 27 112.769531 81.1601562 132.078125 3"></polyline>
    </g>
</svg>
`,Oie=ho.parseFromString(Aie,"text/xml").documentElement,kie=`
<svg width="20px" height="20px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles2DIconStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-1"></use>
        </mask>
        <rect id="tiles2DIconStr-path-3" x="0" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-3"></use>
        </mask>
        <rect id="tiles2DIconStr-path-5" x="30" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-5"></use>
        </mask>
        <rect id="tiles2DIconStr-path-7" x="30" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-8" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-7"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-2)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-4)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-6)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-5"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-8)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-7"></use>
    </g>
</svg>
`,h5=ho.parseFromString(kie,"text/xml").documentElement,Iie=`
<svg width="20px" height="20px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-heatmap</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="heatmap2DStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-2" x="30" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-3" x="60" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-4" x="0" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-5" x="30" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-6" x="60" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-7" x="0" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-8" x="30" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-9" x="60" y="60" width="30" height="30"></rect>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" fill="#858372" xlink:href="#heatmap2DStr-path-1"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-2"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-3"></use>
        <use id="Rectangle" fill="#BCBD9E" xlink:href="#heatmap2DStr-path-4"></use>
        <use id="Rectangle" fill="#817C7C" xlink:href="#heatmap2DStr-path-5"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-6"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-7"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-8"></use>
        <use id="Rectangle" fill="#7B7777" xlink:href="#heatmap2DStr-path-9"></use>
    </g>
</svg>
`,d5=ho.parseFromString(Iie,"text/xml").documentElement,p5=`
<svg width="20px" height="20px" viewBox="0 0 77 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>axis-1d</title>
    <desc>Created with Sketch.</desc>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#979797" stroke-width="8" transform="translate(38.258485, 27.557860) scale(1, -1) translate(-38.258485, -27.557860) " points="4 27.05786 36.7512307 27.05786 72.5169695 27.05786"></polyline>
        <path d="M38,24.484375 L38,3" id="Path-2" stroke="#979797" stroke-width="4"></path>
    </g>
</svg>
`,Cie=ho.parseFromString(p5,"text/xml").documentElement,Pie=Ht(ho.parseFromString(p5,"text/xml").documentElement).style("transform","rotate(90deg)").node(),Die=`
<svg width="20px" height="20px" viewBox="0 0 171 116" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>gene-annotations</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="geneAnnotations-path-1" x="34" y="0" width="24" height="116"></rect>
        <mask id="geneAnnotations-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-1"></use>
        </mask>
        <rect id="geneAnnotations-path-3" x="80" y="0" width="56" height="116"></rect>
        <mask id="geneAnnotations-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="56" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-3"></use>
        </mask>
        <rect id="geneAnnotations-path-5" x="147" y="40" width="24" height="35"></rect>
        <mask id="geneAnnotations-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="35" fill="white">
            <use xlink:href="#geneAnnotations-path-5"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M12.71875,58 L147.10172,58" id="Path" stroke="#979797" stroke-width="8"></path>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-2)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-4)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-6)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-5"></use>
        <polygon id="Triangle" stroke="#979797" fill="#D8D8D8" points="25 57.5 1 75 1 40"></polygon>
    </g>
</svg>
`,xie=ho.parseFromString(Die,"text/xml").documentElement,m5=`
<svg width="20px" height="20px" viewBox="0 0 180 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>1d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles1DIconStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-1"></use>
        </mask>
        <rect id="tiles1DIconStr-path-3" x="90" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-2)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-4)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-3"></use>
    </g>
</svg>
`,Nie=ho.parseFromString(m5,"text/xml").documentElement,Rie=Ht(ho.parseFromString(m5,"text/xml").documentElement).style("transform","rotate(90deg)").node(),Mie=`
<svg width="20px" height="20px" viewBox="0 0 111 111" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>arrowhead-domains</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="arrowHeadDomainsStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="arrowHeadDomainsStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-1"></use>
        </mask>
        <rect id="arrowHeadDomainsStr-path-3" x="52" y="52" width="59" height="59"></rect>
        <mask id="arrowHeadDomainsStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="59" height="59" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0">
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-2)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-4)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-3"></use>
    </g>
</svg>
`,zd=ho.parseFromString(Mie,"text/xml").documentElement;function g5({theStyle:e,onClick:t}){return E.createElement("svg",{className:Xi[e],viewBox:"0 0 12 13",onClick:t,xmlns:"http://www.w3.org/2000/svg"},E.createElement("g",{fill:"none",stroke:"#6c6c6c",strokeWidth:"2"},E.createElement("path",{d:"M11.29 11.71l-4-4"}),E.createElement("circle",{cx:"5",cy:"5",r:"4"})))}g5.propTypes={theStyle:N.string,onClick:N.func};const v5={type:"osm-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"OSM Tiles",thumbnail:GS,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},y5={type:"mapbox-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Mapbox Tiles",thumbnail:GS,availableOptions:["style","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{style:"mapbox.streets",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},Vl=[v5,{...v5,type:"osm"},y5,{...y5,type:"mapbox"},{type:"left-axis",datatype:["axis"],local:!0,orientation:"1d-vertical",name:"Left Axis",thumbnail:Pie,availableOptions:["minWidth"],defaultOptions:{minWidth:100}},{type:"top-axis",datatype:["axis"],local:!0,orientation:"1d-horizontal",name:"Top Axis",thumbnail:Cie,defaultOptions:{}},{type:"horizontal-rule",datatype:["x-coord"],local:!0,orientation:"whole",name:"Horizontal Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"vertical-rule",datatype:["y-coord"],local:!0,orientation:"whole",name:"Vertical Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"cross-rule",datatype:["xy-coord"],local:!0,orientation:"whole",name:"Cross Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"simple-svg",datatype:[],local:!1,orientation:"2d",exportable:!0,availableOptions:["minWidth","minHeight"],defaultOptions:{minWidth:100,minHeight:100}},{type:"heatmap",datatype:["matrix"],local:!1,orientation:"2d",thumbnail:d5,exportable:!0,availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","maxZoom","minWidth","minHeight","dataTransform","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling","showMousePosition","mousePositionColor","showTooltip","extent","zeroValueColor"],defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],colorbarBackgroundColor:"#ffffff",maxZoom:null,minWidth:100,minHeight:100,colorbarPosition:"topRight",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!0,extent:"full",zeroValueColor:null},defaultOptionsByTheme:{[mr]:{backgroundColor:"#000000",colorRange:["black","rgba(208,2,27,1.0)","rgba(245,166,35,1.0)","white"],colorbarBackgroundColor:"#000000",labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"linear-heatmap",aliases:["horizontal-heatmap","vertical-heatmap"],datatype:["matrix"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:d5,defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,minWidth:100,minHeight:40,trackBorderWidth:0,trackBorderColor:"black"},availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","minWidth","minHeight","dataTransform","oneDHeatmapFlipped","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling"]},{type:"line",aliases:["horizontal-line","vertical-line"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:Oie,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","lineStrokeWidth","lineStrokeColor","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode","minHeight"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelBackgroundColor:"white",labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",lineStrokeColor:"blue",lineStrokeWidth:1,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,minHeight:20,mousePositionColor:"#000000",showTooltip:!0},defaultOptionsByTheme:{[mr]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"1d-heatmap",aliases:["horizontal-1d-heatmap","vertical-1d-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:wie,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin","colorRange","valueScaling","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!0}},{type:"vector-heatmap",aliases:["horizontal-vector-heatmap","vertical-vector-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,minHeight:1,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log"}},{type:"multivec",aliases:["horizontal-multivec","vertical-multivec"],datatype:["multivec"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","minHeight","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling","selectRows","selectRowsAggregationMode","selectRowsAggregationWithRelativeHeight","selectRowsAggregationMethod","colorbarBackgroundColor","colorbarPosition","zeroValueColor"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,minHeight:100,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",selectRows:null,selectRowsAggregationMode:"mean",selectRowsAggregationWithRelativeHeight:!0,selectRowsAggregationMethod:"client",colorbarBackgroundColor:"#ffffff",colorbarPosition:"topRight",zeroValueColor:null},defaultOptionsByTheme:{[mr]:{colorbarBackgroundColor:"#000000"}}},{type:"point",aliases:["horizontal-point","vertical-point"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","pointColor","pointSize","valueScaling","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",pointColor:"red",pointSize:3,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4}},{type:"divergent-bar",aliases:["horizontal-divergent-bar","vertical-divergent-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColorTop","barFillColorBottom","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",axisLabelFormatting:"scientific",barFillColorBottom:"red",barFillColorTop:"green",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"bar",aliases:["horizontal-bar","vertical-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["align","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColor","colorRange","colorRangeGradient","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","barOpacity","showMousePosition","showTooltip","aggregationMode","zeroLineVisible","zeroLineColor","zeroLineOpacity"],defaultOptions:{align:"bottom",labelColor:"[glyph-color]",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",barFillColor:"darkgreen",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"2d-tiles",datatype:["matrix"],local:!1,orientation:"2d",name:"2D Tile Outlines",thumbnail:h5},{type:"1d-value-interval",aliases:["horizontal-1d-value-interval","vertical-1d-value-interval"],datatype:["bed-value"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"1D Rectangles",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,axisPositionHorizontal:"left",lineStrokeColor:"blue",valueScaling:"linear"}},{type:"stacked-interval",aliases:["top-stacked-interval","left-stacked-interval"],datatype:["stacked-interval"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:"horizontal-stacked-interval.png",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity"]},{type:"viewport-projection-vertical",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-vertical",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-horizontal",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-horizontal",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-center",datatype:["2d-projection"],local:!0,hidden:!0,projection:!0,orientation:"2d",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"gene-annotations",aliases:["horizontal-gene-annotations","vertical-gene-annotations"],datatype:["gene-annotation"],local:!1,defaultHeight:90,defaultWidth:90,rotatable:!0,orientation:"1d-horizontal",name:"Gene Annotations",thumbnail:xie,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","minHeight","plusStrandColor","minusStrandColor","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor","fontSize","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing","showTooltip"],defaultOptions:{fontSize:10,labelColor:"black",labelBackgroundColor:"#ffffff",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,plusStrandColor:"blue",minusStrandColor:"red",trackBorderWidth:0,trackBorderColor:"black",showMousePosition:!1,mousePositionColor:"#000000",geneAnnotationHeight:16,geneLabelPosition:"outside",geneStrandSpacing:4,showTooltip:!0},defaultOptionsByTheme:{[mr]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff",plusStrandColor:"#40a0ff"}}},{type:"arrowhead-domains",datatype:["arrowhead-domains"],local:!1,orientation:"2d",name:"Arrowhead Domains",thumbnail:zd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"linear-2d-rectangle-domains",aliases:["horizontal-2d-rectangle-domains","vertical-2d-rectangle-domains"],datatype:["2d-rectangle-domains"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"Horizontal 2D Rectangle Domains",thumbnail:zd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"2d",name:"2D Rectangle Domains",thumbnail:zd,availableOptions:["flipDiagonal","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainFillOpacity","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{flipDiagonal:"none",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainFillOpacity:.4,rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"horizontal-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokePos","regions"],defaultOptions:{fill:"red",fillOpacity:.2,stroke:"red",strokeOpacity:0,strokeWidth:1,regions:[],strokePos:[]}},{type:"vertical-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","regions"],defaultOptions:{fill:"red",fillOpacity:"0.2",stroke:"red",strokeOpacity:"0",regions:[]}},{type:"2d-annotations",datatype:["2d-annotations"],local:!1,orientation:"2d",name:"2D Annotations",thumbnail:zd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize","isClickable","hoverColor","selectColor","exclude","trackBorderBgWidth","trackBorderBgColor","trackBorderBgAlpha"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none",isClickable:!1,hoverColor:"orange",selectColor:"fuchsia",exclude:[],trackBorderBgWidth:0,trackBorderBgColor:"black",trackBorderBgAlpha:.33}},{type:"square-markers",datatype:["bedpe"],local:!1,orientation:"2d",name:"Square Markers",thumbnail:zd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"combined",datatype:"any",local:!0,orientation:"any"},{type:"horizontal-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-horizontal",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"vertical-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-vertical",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"2d-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"2d",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey"}},{type:"2d-chromosome-annotations",datatype:["chromsizes"],local:!0,orientation:"2d",name:"2D Chromosome Annotations",thumbnail:null,hidden:!0},{type:"2d-chromosome-labels",datatype:["chromsizes"],local:!0,orientation:"2d",name:"Pairwise Chromosome Labels",thumbnail:null},{type:"chromosome-labels",aliases:["horizontal-chromosome-labels","vertical-chromosome-labels"],datatype:["chromsizes"],orientation:"1d-horizontal",rotatable:!0,minHeight:35,defaultHeight:30,name:"Chromosome Axis",thumbnail:null,availableOptions:["color","stroke","fontSize","fontIsLeftAligned","showMousePosition","mousePositionColor","tickPositions","tickFormat","reverseOrientation"],defaultOptions:{color:"#808080",stroke:"#ffffff",fontSize:12,fontIsLeftAligned:!1,showMousePosition:!1,mousePositionColor:"#000000",reverseOrientation:!1},defaultOptionsByTheme:{[mr]:{color:"#808080",stroke:"#000000",mousePositionColor:"#ffffff"}}},{type:"vertical-1d-tiles",datatype:["1d-tiles"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Tile Outlines",thumbnail:Rie},{type:"horizontal-1d-tiles",datatype:["vector","stacked-interval","gene-annotation"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Tile Outlines",thumbnail:Nie},{type:"osm-2d-tile-ids",datatype:["map-tiles"],local:!1,orientation:"2d",name:"OSM Tile Outlines",thumbnail:h5,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"raster-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Raster Tiles",thumbnail:GS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"image-tiles",datatype:["image-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Image Tiles",thumbnail:null},{type:"bedlike",datatype:["bedlike"],aliases:["vertical-bedlike"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"BED-like track",thumbnail:null,availableOptions:["alternating","annotationHeight","annotationStyle","fillColor","fillOpacity","fontColor","fontSize","minusStrandColor","plusStrandColor","labelBottomMargin","labelColor","labelLeftMargin","labelPosition","labelRightMargin","labelTopMargin","labelTextOpacity","labelBackgroundOpacity","maxAnnotationHeight","minHeight","trackBorderWidth","trackBorderColor","valueColumn","colorEncoding","colorRange","colorEncodingRange","separatePlusMinusStrands","showTexts","axisPositionHorizontal","axisMargin"],defaultOptions:{alternating:!1,annotationStyle:"box",fillColor:"blue",fillOpacity:.3,fontSize:"10",axisPositionHorizontal:"right",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:20,maxAnnotationHeight:null,trackBorderWidth:0,trackBorderColor:"black",valueColumn:null,colorEncoding:"itemRgb",showTexts:!1,colorRange:["#000000","#652537","#bf5458","#fba273","#ffffe0"],colorEncodingRange:!1,separatePlusMinusStrands:!0,annotationHeight:16}},{type:"empty",datatype:[],orientation:"1d-horizontal",name:"Empty track",thumbnail:null,availableOptions:[],defaultOptions:{}}],zS=e=>{const t={},r=i=>!!(i.orientation===e||e==="1d-vertical"&&i.orientation==="1d-horizontal"&&i.rotatable);return Vl.filter(r).forEach(i=>{let n=i.datatype;Array.isArray(i.datatype)||(n=[n]),n.forEach(o=>{o in t||(t[o]=[]),t[o].push(i)})}),t.none=[],t},Mu=[[0,0,0,255],[35,0,0,255],[52,0,0,255],[60,0,0,255],[63,1,0,255],[64,2,0,255],[68,5,0,255],[69,6,0,255],[72,8,0,255],[74,10,0,255],[77,12,0,255],[78,14,0,255],[81,16,0,255],[83,17,0,255],[85,19,0,255],[86,20,0,255],[89,22,0,255],[91,24,0,255],[92,25,0,255],[94,26,0,255],[95,28,0,255],[98,30,0,255],[100,31,0,255],[102,33,0,255],[103,34,0,255],[105,35,0,255],[106,36,0,255],[108,38,0,255],[109,39,0,255],[111,40,0,255],[112,42,0,255],[114,43,0,255],[115,44,0,255],[117,45,0,255],[119,47,0,255],[119,47,0,255],[120,48,0,255],[122,49,0,255],[123,51,0,255],[125,52,0,255],[125,52,0,255],[126,53,0,255],[128,54,0,255],[129,56,0,255],[129,56,0,255],[131,57,0,255],[132,58,0,255],[134,59,0,255],[134,59,0,255],[136,61,0,255],[137,62,0,255],[137,62,0,255],[139,63,0,255],[139,63,0,255],[140,65,0,255],[142,66,0,255],[142,66,0,255],[143,67,0,255],[143,67,0,255],[145,68,0,255],[145,68,0,255],[146,70,0,255],[146,70,0,255],[148,71,0,255],[148,71,0,255],[149,72,0,255],[149,72,0,255],[151,73,0,255],[151,73,0,255],[153,75,0,255],[153,75,0,255],[154,76,0,255],[154,76,0,255],[154,76,0,255],[156,77,0,255],[156,77,0,255],[157,79,0,255],[157,79,0,255],[159,80,0,255],[159,80,0,255],[159,80,0,255],[160,81,0,255],[160,81,0,255],[162,82,0,255],[162,82,0,255],[163,84,0,255],[163,84,0,255],[165,85,0,255],[165,85,0,255],[166,86,0,255],[166,86,0,255],[166,86,0,255],[168,87,0,255],[168,87,0,255],[170,89,0,255],[170,89,0,255],[171,90,0,255],[171,90,0,255],[173,91,0,255],[173,91,0,255],[174,93,0,255],[174,93,0,255],[176,94,0,255],[176,94,0,255],[177,95,0,255],[177,95,0,255],[179,96,0,255],[179,96,0,255],[180,98,0,255],[182,99,0,255],[182,99,0,255],[183,100,0,255],[183,100,0,255],[185,102,0,255],[185,102,0,255],[187,103,0,255],[187,103,0,255],[188,104,0,255],[188,104,0,255],[190,105,0,255],[191,107,0,255],[191,107,0,255],[193,108,0,255],[193,108,0,255],[194,109,0,255],[196,110,0,255],[196,110,0,255],[197,112,0,255],[197,112,0,255],[199,113,0,255],[200,114,0,255],[200,114,0,255],[202,116,0,255],[202,116,0,255],[204,117,0,255],[205,118,0,255],[205,118,0,255],[207,119,0,255],[208,121,0,255],[208,121,0,255],[210,122,0,255],[211,123,0,255],[211,123,0,255],[213,124,0,255],[214,126,0,255],[214,126,0,255],[216,127,0,255],[217,128,0,255],[217,128,0,255],[219,130,0,255],[221,131,0,255],[221,131,0,255],[222,132,0,255],[224,133,0,255],[224,133,0,255],[225,135,0,255],[227,136,0,255],[227,136,0,255],[228,137,0,255],[230,138,0,255],[230,138,0,255],[231,140,0,255],[233,141,0,255],[233,141,0,255],[234,142,0,255],[236,144,0,255],[236,144,0,255],[238,145,0,255],[239,146,0,255],[241,147,0,255],[241,147,0,255],[242,149,0,255],[244,150,0,255],[244,150,0,255],[245,151,0,255],[247,153,0,255],[247,153,0,255],[248,154,0,255],[250,155,0,255],[251,156,0,255],[251,156,0,255],[253,158,0,255],[255,159,0,255],[255,159,0,255],[255,160,0,255],[255,161,0,255],[255,163,0,255],[255,163,0,255],[255,164,0,255],[255,165,0,255],[255,167,0,255],[255,167,0,255],[255,168,0,255],[255,169,0,255],[255,169,0,255],[255,170,0,255],[255,172,0,255],[255,173,0,255],[255,173,0,255],[255,174,0,255],[255,175,0,255],[255,177,0,255],[255,178,0,255],[255,179,0,255],[255,181,0,255],[255,181,0,255],[255,182,0,255],[255,183,0,255],[255,184,0,255],[255,187,7,255],[255,188,10,255],[255,189,14,255],[255,191,18,255],[255,192,21,255],[255,193,25,255],[255,195,29,255],[255,197,36,255],[255,198,40,255],[255,200,43,255],[255,202,51,255],[255,204,54,255],[255,206,61,255],[255,207,65,255],[255,210,72,255],[255,211,76,255],[255,214,83,255],[255,216,91,255],[255,219,98,255],[255,221,105,255],[255,223,109,255],[255,225,116,255],[255,228,123,255],[255,232,134,255],[255,234,142,255],[255,237,149,255],[255,239,156,255],[255,240,160,255],[255,243,167,255],[255,246,174,255],[255,248,182,255],[255,249,185,255],[255,252,193,255],[255,253,196,255],[255,255,204,255],[255,255,207,255],[255,255,211,255],[255,255,218,255],[255,255,222,255],[255,255,225,255],[255,255,229,255],[255,255,233,255],[255,255,236,255],[255,255,240,255],[255,255,244,255],[255,255,247,255],[255,255,255,0]],dr=Vl.reduce((e,t)=>{if(e[t.type]=t,t.aliases)for(const r of t.aliases)e[r]=t;return e},{}),Lie=Vl.reduce((e,t)=>{for(let r=0;r<t.datatype.length;r++){const i=t.datatype[r];return e[i]?e[i].add(t.orientation):e[i]=new Set,e}return{}},{}),Vd={chromsizes:{center:"2d-chromosome-grid",top:"chromosome-labels",left:"chromosome-labels",bottom:"chromosome-labels",right:"chromosome-labels"},matrix:{center:"heatmap",top:"linear-heatmap",left:"linear-heatmap",right:"linear-heatmap",bottom:"linear-heatmap"},vector:{top:"bar",bottom:"bar",left:"bar",right:"bar"},"geo-json":{center:"geo-json"},"gene-annotation":{top:"gene-annotations",bottom:"gene-annotations",left:"gene-annotations",right:"gene-annotations"},bedlike:{top:"bedlike",bottom:"bedlike",left:"vertical-bedlike",right:"vertical-bedlike"}},fy=(e,t)=>{const r=zS(t);let i=new Set(Object.values(r).flatMap(n=>n));for(const n of e){const o=new Set(n);i=new Set([...i].filter(a=>a.datatype.filter(s=>o.has(s)).length>0))}return[...i]},b5=8,VS=8,Bie=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_TRACK_TYPES:fy,DATATYPE_TO_TRACK_TYPE:zS,DEFAULT_CONTAINER_PADDING_X:n5,DEFAULT_CONTAINER_PADDING_Y:i5,DEFAULT_SERVER:jS,DEFAULT_TRACKS_FOR_DATATYPE:Vd,DEFAULT_VIEW_MARGIN:Fd,DEFAULT_VIEW_PADDING:jd,GLOBALS:He,HEATED_OBJECT_MAP:Mu,LOCATION_LISTENER_PREFIX:Gd,LONG_DRAG_TIMEOUT:Ud,MAX_CLICK_DELAY:o5,MIN_HORIZONTAL_HEIGHT:u5,MIN_VERTICAL_WIDTH:f5,MOUSE_TOOL_MOVE:ly,MOUSE_TOOL_SELECT:qi,NUM_PRECOMP_SUBSETS_PER_1D_TTILE:b5,NUM_PRECOMP_SUBSETS_PER_2D_TTILE:VS,POSITIONS_BY_DATATYPE:Lie,SHORT_DRAG_TIMEOUT:a5,THEME_DARK:mr,THEME_DEFAULT:_ie,THEME_LIGHT:uy,TILE_FETCH_DEBOUNCE:FS,TRACKS_INFO:Vl,TRACKS_INFO_BY_TYPE:dr,TRACK_LOCATIONS:US,VIEW_HEADER_MED_WIDTH_SEARCH_BAR:l5,VIEW_HEADER_MIN_WIDTH_SEARCH_BAR:c5,ZOOM_DEBOUNCE:cy,ZOOM_TRANSITION_DURATION:s5},Symbol.toStringTag,{value:"Module"})),_5=e=>{const t=["top","bottom","gallery"],r=["left","right","gallery"];return e.center=e.center||[],e.left=e.left||[],e.right=e.right||[],e.top=e.top||[],e.bottom=e.bottom||[],e.whole=e.whole||[],e.gallery=e.gallery||[],t.map(i=>e[i]).forEach(i=>i.forEach(n=>{const o=dr[n.type],a=o&&o.defaultOptions||{},s=n.options?{...a,...n.options}:a;s.minHeight!==void 0&&n.height===void 0&&(n.height=s.minHeight),n.height===void 0&&(n.height=o&&o.defaultHeight||u5)})),r.map(i=>e[i]).forEach(i=>i.forEach(n=>{const o=dr[n.type],a=o&&o.defaultOptions||{},s=n.options?{...a,...n.options}:a;s.minWidth!==void 0&&n.width===void 0&&(n.width=s.minWidth),n.width===void 0&&(n.width=o&&o.defaultWidth||f5)})),e},T5=e=>t=>Array.prototype.reduce.call(t,e),Hie=T5((e,t)=>e.concat(t)),$ie=e=>t=>Array.prototype.forEach.call(t,e),hy=(e,t)=>{t.dispatchEvent(e5(e))},Fie=(e,t)=>[Hd(e[0],e[1],t),Hd(e[2],e[3],t)];function jie(e,t,r,i,n){const{chr:o,pos:a}=t,{chr:s,pos:c}=r,u=[];if(o===s){const l=o,h=Math.floor(a/i),f=Math.min(h+n,Math.ceil(c/i));u.push([l,h,f])}else{let l=n;const h=e.findIndex(([d])=>d===o),f=e.findIndex(([d])=>d===s);for(let d=h;d<=f;d++){let p,m;const[g,v]=e[d];d<f?(d===h?p=a:p=0,m=v):(p=0,m=c);const _=Math.floor(p/i),y=Math.min(_+l,Math.ceil(m/i));u.push([g,_,y]),l-=y-_}}return u}const WS=(e,t,r)=>{if(r.length===0)return;if(r.length===1)return r[0];let i=r[0];const n=Vd[e]!==void 0?Vd[e][t]:void 0;return n!==void 0&&(i=r.find(o=>o.type===n)||i),i};var E5={},YS={},qS=34,Wd=10,XS=13;function S5(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function Uie(e,t){var r=S5(e);return function(i,n){return t(r(i),n,e)}}function w5(e){var t=Object.create(null),r=[];return e.forEach(function(i){for(var n in i)n in t||r.push(t[n]=n)}),r}function hi(e,t){var r=e+"",i=r.length;return i<t?new Array(t-i+1).join(0)+r:r}function Gie(e){return e<0?"-"+hi(-e,6):e>9999?"+"+hi(e,6):hi(e,4)}function zie(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),n=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Gie(e.getUTCFullYear())+"-"+hi(e.getUTCMonth()+1,2)+"-"+hi(e.getUTCDate(),2)+(n?"T"+hi(t,2)+":"+hi(r,2)+":"+hi(i,2)+"."+hi(n,3)+"Z":i?"T"+hi(t,2)+":"+hi(r,2)+":"+hi(i,2)+"Z":r||t?"T"+hi(t,2)+":"+hi(r,2)+"Z":"")}function KS(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function i(h,f){var d,p,m=n(h,function(g,v){if(d)return d(g,v-1);p=g,d=f?Uie(g,f):S5(g)});return m.columns=p||[],m}function n(h,f){var d=[],p=h.length,m=0,g=0,v,_=p<=0,y=!1;h.charCodeAt(p-1)===Wd&&--p,h.charCodeAt(p-1)===XS&&--p;function b(){if(_)return YS;if(y)return y=!1,E5;var S,k=m,O;if(h.charCodeAt(k)===qS){for(;m++<p&&h.charCodeAt(m)!==qS||h.charCodeAt(++m)===qS;);return(S=m)>=p?_=!0:(O=h.charCodeAt(m++))===Wd?y=!0:O===XS&&(y=!0,h.charCodeAt(m)===Wd&&++m),h.slice(k+1,S-1).replace(/""/g,'"')}for(;m<p;){if((O=h.charCodeAt(S=m++))===Wd)y=!0;else if(O===XS)y=!0,h.charCodeAt(m)===Wd&&++m;else if(O!==r)continue;return h.slice(k,S)}return _=!0,h.slice(k,p)}for(;(v=b())!==YS;){for(var T=[];v!==E5&&v!==YS;)T.push(v),v=b();f&&(T=f(T,g++))==null||d.push(T)}return d}function o(h,f){return h.map(function(d){return f.map(function(p){return l(d[p])}).join(e)})}function a(h,f){return f==null&&(f=w5(h)),[f.map(l).join(e)].concat(o(h,f)).join(`
`)}function s(h,f){return f==null&&(f=w5(h)),o(h,f).join(`
`)}function c(h){return h.map(u).join(`
`)}function u(h){return h.map(l).join(e)}function l(h){return h==null?"":h instanceof Date?zie(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:n,format:a,formatBody:s,formatRows:c,formatRow:u,formatValue:l}}var Wl=KS(","),Vie=Wl.parse,Wie=Wl.parseRows,Yie=Wl.format,qie=Wl.formatBody,Xie=Wl.formatRows,Kie=Wl.formatRow,Zie=Wl.formatValue,Yl=KS("	"),Qie=Yl.parse,ZS=Yl.parseRows,Jie=Yl.format,eoe=Yl.formatBody,toe=Yl.formatRows,roe=Yl.formatRow,noe=Yl.formatValue;function ioe(e){for(var t in e){var r=e[t].trim(),i,n;if(!r)r=null;else if(r==="true")r=!0;else if(r==="false")r=!1;else if(r==="NaN")r=NaN;else if(!isNaN(i=+r))r=i;else if(n=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))ooe&&n[4]&&!n[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r);else continue;e[t]=r}return e}const ooe=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),aoe=Object.freeze(Object.defineProperty({__proto__:null,autoType:ioe,csvFormat:Yie,csvFormatBody:qie,csvFormatRow:Kie,csvFormatRows:Xie,csvFormatValue:Zie,csvParse:Vie,csvParseRows:Wie,dsvFormat:KS,tsvFormat:Jie,tsvFormatBody:eoe,tsvFormatRow:roe,tsvFormatRows:toe,tsvFormatValue:noe,tsvParse:Qie,tsvParseRows:ZS},Symbol.toStringTag,{value:"Module"})),dy={},soe=(e,t)=>dy[e]?Promise.resolve(dy[e]):t(e),loe=e=>{if(e.length===0)return null;const t=ZS(e);return Ty(t)},coe=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.text()).then(t=>loe(t)).catch(t=>{console.error("Could not retrieve or parse chrom info.",t)}),uoe=(e,t,r)=>t(e,r).then(i=>(dy[e]=i,dy[e])),QS={get:e=>uoe(e,soe,coe)};function foe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A5(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,doe(i.key),i)}}function hoe(e,t,r){return t&&A5(e.prototype,t),r&&A5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function doe(e){var t=poe(e,"string");return typeof t=="symbol"?t:String(t)}function poe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let moe=function(){function e(t){foe(this,e),this.customEventHandlers={},this.registeredEls={},this.pubSub=t}return hoe(e,[{key:"getEventHandler",value:function(r){return this.customEventHandlers[r]?this.customEventHandlers[r]:i=>this.pubSub.publish(r,i)}},{key:"unregister",value:function(r,i){!this.registeredEls[r]&&this.registeredEls[r]!==i||(this.registeredEls[r].removeEventListener(r,this.registeredEls[r].__handler__),this.registeredEls[r]=void 0,delete this.registeredEls[r])}},{key:"register",value:function(r,i,n=!1){!i||this.registeredEls[r]===i||(this.registeredEls[r]&&this.unregister(this.registeredEls[r]),this.registeredEls[r]=i,this.registeredEls[r].__handler__=this.getEventHandler(r),this.registeredEls[r].addEventListener(r,this.registeredEls[r].__handler__,{capture:n,passive:!1}))}}]),e}();const O5=e=>new moe(e);let k5=!1;const I5={listen:()=>{if(k5)return;const[e,t]=G5(),r="102117110099116105111110040041123115101108102046099111110115111108101046108111103040039",i="072",n="105",o="071",a="108097115115",s="032118",c="058032104116116112058047047104105103108097115115046105111039041125",u=[String.fromCharCode(...r.match(/.{1,3}/g).map(k=>+k)).toLowerCase(),String.fromCharCode(...i.match(/.{1,3}/g).map(k=>+k)),String.fromCharCode(...n.match(/.{1,3}/g).map(k=>+k)).toLowerCase(),String.fromCharCode(...o.match(/.{1,3}/g).map(k=>+k)),String.fromCharCode(...a.match(/.{1,3}/g).map(k=>+k)).toLowerCase(),String.fromCharCode(...s.match(/.{1,3}/g).map(k=>+k)).toLowerCase(),String.fromCharCode(...t.match(/.{1,3}/g).map(k=>+k)).toLowerCase(),String.fromCharCode(...c.match(/.{1,3}/g).map(k=>+k)).toLowerCase()].join(""),l="085082076",h="066076079066",f="087111114107101114",d="099114101097116101079098106101099116085082076",p="114101118111107101079098106101099116085082076",m=k=>k.charAt(0).toUpperCase()+k.slice(1),g=k=>k.slice(0,6)+k.charAt(6).toUpperCase()+k.slice(7,12)+k.slice(12).toUpperCase(),v=e[String.fromCharCode(...l.match(/.{1,3}/g).map(k=>+k))],_=e[m(String.fromCharCode(...h.match(/.{1,3}/g).map(k=>+k)).toLowerCase())],y=e[m(String.fromCharCode(...f.match(/.{1,3}/g).map(k=>+k)).toLowerCase())],b=g(String.fromCharCode(...d.match(/.{1,3}/g).map(k=>+k)).toLowerCase()),T=g(String.fromCharCode(...p.match(/.{1,3}/g).map(k=>+k)).toLowerCase()),S=v[b](new _([`(${u})()`],{type:"application/javascript"}));new y(S),v[T](S),k5=!0}};function goe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C5(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,yoe(i.key),i)}}function voe(e,t,r){return t&&C5(e.prototype,t),r&&C5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yoe(e){var t=boe(e,"string");return typeof t=="symbol"?t:String(t)}function boe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let Yd=function(){function e(t){goe(this,e),this.epsilon=1e-6,this.data=t,this.tileSize=this.data.length,this.paddedTileSize=2**Math.ceil(Math.log2(this.tileSize)),this.numSubsets=Math.min(b5,this.paddedTileSize),this.subsetSize=this.paddedTileSize/this.numSubsets,this.subsetMinimums=this.computeSubsetNonZeroMinimums(),this.subsetMaximums=this.computeSubsetNonZeroMaximums(),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return voe(e,[{key:"getMinNonZeroInSubset",value:function(r){const i=r[0],n=r[1];let o=Number.MAX_SAFE_INTEGER;if(i===0&&n===this.tileSize)return this.minNonZeroInTile;const a=Math.ceil(i/this.subsetSize),s=Math.floor((n-1)/this.subsetSize);return a>=s?this.minNonZero(this.data,i,n):(i<a*this.subsetSize&&(o=Math.min(o,this.minNonZero(this.data,i,a*this.subsetSize))),o=Math.min(o,this.minNonZero(this.subsetMinimums,a,s)),n>s*this.subsetSize&&(o=Math.min(o,this.minNonZero(this.data,s*this.subsetSize,n))),o)}},{key:"getMaxNonZeroInSubset",value:function(r){const i=r[0],n=r[1];let o=Number.MIN_SAFE_INTEGER;if(i===0&&n===this.tileSize)return this.maxNonZeroInTile;const a=Math.ceil(i/this.subsetSize),s=Math.floor((n-1)/this.subsetSize);return a>=s?this.maxNonZero(this.data,i,n):(i<a*this.subsetSize&&(o=Math.max(o,this.maxNonZero(this.data,i,a*this.subsetSize))),o=Math.max(o,this.maxNonZero(this.subsetMaximums,a,s)),n>s*this.subsetSize&&(o=Math.max(o,this.maxNonZero(this.data,s*this.subsetSize,n))),o)}},{key:"computeSubsetNonZeroMinimums",value:function(){const r=[];for(let i=0;i<this.numSubsets;i++){let n=Number.MAX_SAFE_INTEGER;for(let o=0;o<this.subsetSize;o++){const a=this.data[i*this.subsetSize+o];a!==void 0&&(a<this.epsilon&&a>-this.epsilon||a<n&&(n=a))}r.push(n)}return r}},{key:"computeSubsetNonZeroMaximums",value:function(){const r=[];for(let i=0;i<this.numSubsets;i++){let n=Number.MIN_SAFE_INTEGER;for(let o=0;o<this.subsetSize;o++){const a=this.data[i*this.subsetSize+o];a!==void 0&&(a<this.epsilon&&a>-this.epsilon||a>n&&(n=a))}r.push(n)}return r}},{key:"getMinNonZeroInTile",value:function(){return Math.min(...this.subsetMinimums)}},{key:"getMaxNonZeroInTile",value:function(){return Math.max(...this.subsetMaximums)}},{key:"minNonZero",value:function(r,i,n){let o=Number.MAX_SAFE_INTEGER;for(let a=i;a<n;a++){const s=r[a];s<this.epsilon&&s>-this.epsilon||s<o&&(o=s)}return o}},{key:"maxNonZero",value:function(r,i,n){let o=Number.MIN_SAFE_INTEGER;for(let a=i;a<n;a++){const s=r[a];s<this.epsilon&&s>-this.epsilon||s>o&&(o=s)}return o}}]),e}();function _oe(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}var Toe=_oe;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Eoe=function(e){return e!=null&&(P5(e)||Soe(e)||!!e._isBuffer)};function P5(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Soe(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&P5(e.slice(0,0))}var woe=Toe,Aoe=Eoe,Ooe=typeof Float64Array<"u";function koe(e,t){return e[0]-t[0]}function Ioe(){var e=this.stride,t=new Array(e.length),r;for(r=0;r<t.length;++r)t[r]=[Math.abs(e[r]),r];t.sort(koe);var i=new Array(t.length);for(r=0;r<i.length;++r)i[r]=t[r][1];return i}function Coe(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var i=e==="generic";if(t===-1){var n="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",m=new Function(n);return m()}else if(t===0){var n="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",m=new Function("TrivialArray",n);return m(py[e][0])}var n=["'use strict'"],o=woe(t),a=o.map(function(g){return"i"+g}),s="this.offset+"+o.map(function(g){return"this.stride["+g+"]*i"+g}).join("+"),c=o.map(function(g){return"b"+g}).join(","),u=o.map(function(g){return"c"+g}).join(",");n.push("function "+r+"(a,"+c+","+u+",d){this.data=a","this.shape=["+c+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),n.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+o.map(function(g){return"this.shape["+g+"]"}).join("*"),"}})"),t===1?n.push("proto.order=[0]"):(n.push("Object.defineProperty(proto,'order',{get:"),t<4?(n.push("function "+r+"_order(){"),t===2?n.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&n.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):n.push("ORDER})")),n.push("proto.set=function "+r+"_set("+a.join(",")+",v){"),i?n.push("return this.data.set("+s+",v)}"):n.push("return this.data["+s+"]=v}"),n.push("proto.get=function "+r+"_get("+a.join(",")+"){"),i?n.push("return this.data.get("+s+")}"):n.push("return this.data["+s+"]}"),n.push("proto.index=function "+r+"_index(",a.join(),"){return "+s+"}"),n.push("proto.hi=function "+r+"_hi("+a.join(",")+"){return new "+r+"(this.data,"+o.map(function(g){return["(typeof i",g,"!=='number'||i",g,"<0)?this.shape[",g,"]:i",g,"|0"].join("")}).join(",")+","+o.map(function(g){return"this.stride["+g+"]"}).join(",")+",this.offset)}");var l=o.map(function(g){return"a"+g+"=this.shape["+g+"]"}),h=o.map(function(g){return"c"+g+"=this.stride["+g+"]"});n.push("proto.lo=function "+r+"_lo("+a.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+h.join(","));for(var f=0;f<t;++f)n.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");n.push("return new "+r+"(this.data,"+o.map(function(g){return"a"+g}).join(",")+","+o.map(function(g){return"c"+g}).join(",")+",b)}"),n.push("proto.step=function "+r+"_step("+a.join(",")+"){var "+o.map(function(g){return"a"+g+"=this.shape["+g+"]"}).join(",")+","+o.map(function(g){return"b"+g+"=this.stride["+g+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var f=0;f<t;++f)n.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");n.push("return new "+r+"(this.data,"+o.map(function(g){return"a"+g}).join(",")+","+o.map(function(g){return"b"+g}).join(",")+",c)}");for(var d=new Array(t),p=new Array(t),f=0;f<t;++f)d[f]="a[i"+f+"]",p[f]="b[i"+f+"]";n.push("proto.transpose=function "+r+"_transpose("+a+"){"+a.map(function(g,v){return g+"=("+g+"===undefined?"+v+":"+g+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+d.join(",")+","+p.join(",")+",this.offset)}"),n.push("proto.pick=function "+r+"_pick("+a+"){var a=[],b=[],c=this.offset");for(var f=0;f<t;++f)n.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");n.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),n.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+o.map(function(g){return"shape["+g+"]"}).join(",")+","+o.map(function(g){return"stride["+g+"]"}).join(",")+",offset)}");var m=new Function("CTOR_LIST","ORDER",n.join(`
`));return m(py[e],Ioe)}function Poe(e){if(Aoe(e))return"buffer";if(Ooe)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var py={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function Doe(e,t,r,i){if(e===void 0){var u=py.array[0];return u([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var n=t.length;if(r===void 0){r=new Array(n);for(var o=n-1,a=1;o>=0;--o)r[o]=a,a*=t[o]}if(i===void 0){i=0;for(var o=0;o<n;++o)r[o]<0&&(i-=(t[o]-1)*r[o])}for(var s=Poe(e),c=py[s];c.length<=n+1;)c.push(Coe(s,c.length-1));var u=c[n+1];return u(e,t,r,i)}var xoe=Doe;const Lu=ui(xoe);function Noe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D5(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Moe(i.key),i)}}function Roe(e,t,r){return t&&D5(e.prototype,t),r&&D5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Moe(e){var t=Loe(e,"string");return typeof t=="symbol"?t:String(t)}function Loe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let JS=function(){function e(t){Noe(this,e),this.epsilon=1e-6,this.tileSize=Math.sqrt(t.length),Number.isSafeInteger(this.tileSize)||console.error("The DenseDataExtrema2D module only works for data of quadratic length."),this.numSubsets=Math.min(VS,this.tileSize),this.subsetSize=this.tileSize/this.numSubsets;const r=Lu(Array.from(t),[this.tileSize,this.tileSize]);this.subsetMinimums=this.computeSubsetNonZeroMinimums(r),this.subsetMaximums=this.computeSubsetNonZeroMaximums(r),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return Roe(e,[{key:"getMinNonZeroInSubset",value:function(r){const i=r[0],n=r[1],o=r[2],a=r[3],s=Math.floor(n/this.subsetSize),c=Math.floor(i/this.subsetSize),u=Math.ceil((a+1)/this.subsetSize)-s,l=Math.ceil((o+1)/this.subsetSize)-c;return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,s,c,l,u)}},{key:"getMaxNonZeroInSubset",value:function(r){const i=r[0],n=r[1],o=r[2],a=r[3],s=Math.floor(n/this.subsetSize),c=Math.floor(i/this.subsetSize),u=Math.ceil((a+1)/this.subsetSize)-s,l=Math.ceil((o+1)/this.subsetSize)-c;return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,s,c,l,u)}},{key:"computeSubsetNonZeroMinimums",value:function(r){const i=Lu(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let n=0;n<this.numSubsets;n++)for(let o=0;o<this.numSubsets;o++){const a=this.getMinNonZeroInNdarraySubset(r,n*this.subsetSize,o*this.subsetSize,this.subsetSize,this.subsetSize);i.set(n,o,a)}return i}},{key:"computeSubsetNonZeroMaximums",value:function(r){const i=Lu(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let n=0;n<this.numSubsets;n++)for(let o=0;o<this.numSubsets;o++){const a=this.getMaxNonZeroInNdarraySubset(r,n*this.subsetSize,o*this.subsetSize,this.subsetSize,this.subsetSize);i.set(n,o,a)}return i}},{key:"getMinNonZeroInNdarraySubset",value:function(r,i,n,o,a){let s=Number.MAX_SAFE_INTEGER;for(let c=0;c<o;c++)for(let u=0;u<a;u++){const l=r.get(i+u,n+c);l<this.epsilon&&l>-this.epsilon||l<s&&(s=l)}return s}},{key:"getMaxNonZeroInNdarraySubset",value:function(r,i,n,o,a){let s=Number.MIN_SAFE_INTEGER;for(let c=0;c<o;c++)for(let u=0;u<a;u++){const l=r.get(i+u,n+c);l<this.epsilon&&l>-this.epsilon||l>s&&(s=l)}return s}},{key:"mirrorPrecomputedExtrema",value:function(){for(let r=1;r<this.numSubsets;r++)for(let i=0;i<r;i++)this.subsetMinimums.set(i,r,this.subsetMinimums.get(r,i)),this.subsetMaximums.set(i,r,this.subsetMaximums.get(r,i))}},{key:"getMinNonZeroInTile",value:function(){return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,0,0,this.numSubsets,this.numSubsets)}},{key:"getMaxNonZeroInTile",value:function(){return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,0,0,this.numSubsets,this.numSubsets)}}]),e}();const ew=e=>{let t;switch(e&&e.toLowerCase()){case"mean":t=HE;break;case"sum":t=DN;break;case"variance":t=IE;break;case"deviation":t=CE;break;default:t=HE,console.warn("Encountered an unsupported selectedRowsAggregationMode option.")}return t},qd=(e,t)=>e.reduce((r,i)=>r+(Array.isArray(i)&&t?i.length:1),0);function Boe(e,t,r,i,n,o,a){let s,c;if(n){const m=ew(n);s=m,c=(g,v)=>m(v.map(_=>e[_*t[1]+g]))??0}let u,l,h,f,d,p;for(h=0;h<t[1];h++)for(l=0,f=0;f<i.length;f++){if(p=i[f],s&&a==="server")u=e[f*t[1]+h];else if(Array.isArray(p)){if(!c)throw new Error("row aggregation requires 'aggFromDataFunc'");u=c(h,p)}else u=e[p*t[1]+h];if(o&&Array.isArray(p))for(d=0;d<p.length;d++)r(l*t[1]+h,u),l++;else r(l*t[1]+h,u),l++}}function Hoe(e,t,r,i,n,o,a=!1,s=!1,c=null,u=null,l=null){let h;r==="log"?h=ys().range([254,0]).domain(i):(r!=="linear"&&console.warn("Unknown value scale type:",r," Defaulting to linear"),h=bt().range([254,0]).domain(i));const{selectedRows:f,selectedRowsAggregationMode:d="mean",selectedRowsAggregationWithRelativeHeight:p=!1,selectedRowsAggregationMethod:m="client"}=l??{};let g=e;c&&f&&(g=qd(f,p)*c[1]);let v,_=0;const y=c?c[1]:Math.sqrt(e),b=new Uint8ClampedArray(g*4),T=O=>{const D=h(O);return Number.isNaN(D)?254:Math.max(0,Math.min(254,Math.floor(D)))},S=(O,D)=>{_=255,!(a&&Math.floor(O/y)<O%y)&&!(s&&Math.floor(O/y)>O%y)&&!Number.isNaN(+D)&&(_=T(D+n)),(_<0||_>255)&&console.warn("out of bounds rgbIdx:",_," (should be 0 <= rgbIdx <= 255)"),u&&!Number.isNaN(+D)&&+D==0?v=u:v=o[_],b[O*4]=v[0],b[O*4+1]=v[1],b[O*4+2]=v[2],b[O*4+3]=v[3]};let k;try{if(f&&c)Boe(t,c,S,f,d,p,m);else for(let O=0;O<t.length;O++)k=t[O],S(O,k)}catch(O){return console.warn("Odd datapoint"),console.warn("d:",k),k=k??0,console.warn("valueScale.domain():",h.domain()),console.warn("valueScale.range():",h.range()),console.warn("value:",h(k+n)),console.warn("pseudocount:",n),console.warn("rgbIdx:",_,"d:",k,"ct:",h(k)),console.error("ERROR:",O),b}return b}function $oe(e){let t=e&31744,r,i,n;const o=(e&32768)<<16;switch(t){case 0:if(r=e&1023,r===0)return o;for(r<<=1;!(r&1024);)r<<=1,t++;return i=112-t<<23,n=(r&1023)<<13,o+i+n;case 31744:return o+2139095040+((e&1023)<<13);default:return o+((e&32767)+114688<<13)}}function Foe(e){const t=atob(e),r=t.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer}function joe(e){const t=new Uint32Array(e.length);for(let i=0;i<e.length;i++)t[i]=$oe(e[i]);return new Float32Array(t.buffer)}function tw(e,t,r){const i=e??{};for(const n of r){n in i||(i[n]={});const o=n,a=o.split(".");i[o].server=t,i[o].tileId=o,i[o].zoomLevel=+a[1];const s=a.slice(2,a.length).map(c=>+c).filter(c=>!Number.isNaN(c));if(i[o].tilePos=s,i[o].tilesetUid=a[0],"dense"in i[o]){const c=i[o].dense,u=Foe(c);let l;if(i[o].dtype==="float16"){const f=new Uint16Array(u);l=joe(f)}else l=new Float32Array(u);const h=s.length===2?new JS(l):new Yd(l);i[o].dense=l,i[o].denseDataExtrema=h,i[o].minNonZero=h.minNonZeroInTile,i[o].maxNonZero=h.maxNonZeroInTile}}return i}function Uoe(e,t,r,i,n,o){const a={"content-type":"application/json"};i&&(a.Authorization=i),fetch(e,{credentials:"same-origin",headers:a,...o&&Object.keys(o).length>0?{method:"POST",body:JSON.stringify(o)}:{}}).then(s=>s.json()).then(s=>{n(tw(s,t,r))}).catch(s=>console.warn("err:",s))}const my=e=>(e||"").replace(/\/$/,""),rw=e=>new Promise(t=>{setTimeout(t,e)}),x5=15,gy=xt.nice();let Xd=0,Bu=null;const Goe=(e,t,r)=>{let i,n=[],o={},a=0;const s=d=>{const p=o[d.id];p&&n[p]?n[p].ids=n[p].ids.concat(d.ids):(o[d.id]=n.length,n.push(d))},c=()=>{i=null,n=[],o={}},u=(d,...p)=>{e({sessionId:gy,requests:n},...p),c()},l=(d,...p)=>{const m=()=>{a>0&&(u(d,...p),a=0)};clearTimeout(i),i=setTimeout(m,r)};l.cancel=()=>{clearTimeout(i),c()},l.immediate=()=>{e({sessionId:gy,requests:n})};let h=!1;return(d,...p)=>{s(d),h?a++:(u(d,...p),l(d,...p),h=!0,a=0,setTimeout(()=>{h=!1},t))}},Kd=e=>{Bu=e},zoe=()=>Bu;function Voe(e,t){const r=e.requests,i=[],n={},o={};for(const s of r){n[s.server]||(n[s.server]={},o[s.server]=[]);for(const c of s.ids)if(n[s.server][c]=!0,s.options){const u=c.indexOf("."),l=c.substring(0,u),h=c.substring(u+1),f=o[s.server].find(d=>d.tilesetUid===l);f?f.tileIds.push(h):o[s.server].push({tilesetUid:l,tileIds:[h],options:s.options})}}const a=Object.keys(n);for(const s of a){const c=Object.keys(n[s]),u=o[s];for(let l=0;l<c.length;l+=x5){const h=c.slice(l,l+Math.min(c.length-l,x5)),f=h.map(m=>`d=${m}`).join("&"),d=`${s}/tiles/?${f}&s=${gy}`,p=new Promise((m,g)=>{t.publish("requestSent",d);const v={};v.outUrl=d,v.server=s,v.theseTileIds=h,v.authHeader=Bu,Uoe(v.outUrl,v.server,v.theseTileIds,v.authHeader,m,u),t.publish("requestReceived",d)});i.push(p)}}Promise.all(i).then(s=>{const c={};for(const u of s){const l=Object.keys(u);for(const h of l)c[`${u[h].server}/${h}`]=u[h]}for(const u of r){const l={},{server:h}=u;for(const f of u.ids)l[f]=c[`${h}/${f}`];u.done(l)}})}const N5=Goe(Voe,FS,FS),nw=(e,t)=>{const r=e.map(s=>+s).sort((s,c)=>c-s),i=t.range()[1]-t.range()[0],o=r.map(s=>(t.domain()[1]-t.domain()[0])/s).map(s=>s/i),a=o.filter(s=>s<1);return a.length===0?0:o.indexOf(a[a.length-1])},R5=(e,t)=>{if(e.resolutions)return e.resolutions.map(s=>+s).sort((s,c)=>c-s)[t];const r=e.max_width,i=+e.bins_per_dimension;return r/(2**t*i)},iw=(e,t,r,i)=>{const n=e.range()[1]-e.range()[0],o=Math.max((r-t)/(e.domain()[1]-e.domain()[0]),1),s=Math.max(0,Math.ceil(Math.log(n/384)/Math.LN2));let c=Math.round(Math.log(o)/Math.LN2)+s,u=0;return i&&(u=Math.floor(Math.log(256)/Math.log(2)-Math.log(i)/Math.log(2))),c+=u,c};function M5(e,t,r,i,n){let o=null;const a=e.bins_per_dimension||256;e.resolutions?o=e.resolutions[i]*a:o=t/2**i;const s=Math.floor((n-r)/o),c=Math.floor(a*(n-s*o)/o);return[s,c]}const vy=(e,t,r,i,n,o)=>{const a=Math.min(e,n),s=o/2**a,c=1e-7;return Vn(Math.max(0,Math.floor((t.domain()[0]-r)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-r-c)/s)))},L5=(e,t,r)=>e.resolutions?e.resolutions.map(n=>+n).sort((n,o)=>o-n)[t]*r:e.max_width/2**t,yy=(e,t,r,i,n)=>{const s=e*(n||256),c=20;i||(i=Number.MAX_VALUE);const u=Math.max(0,Math.floor((t.domain()[0]-r)/s)),l=Math.ceil(Math.min(i,t.domain()[1]-r-1e-7)/s);let h=Vn(u,l);return h.length>c&&(console.warn(`Too many visible tiles: ${h.length} truncating to ${c}`),h=h.slice(0,c)),h},B5=(e,t,r,i,n,o,a,s,c,u)=>{const{tileData:l}=e;if(!l.dense){o(null);return}if(e.mirrored&&!e.isMirrored&&e.tileData.tilePos.length>0&&e.tileData.tilePos[0]===e.tileData.tilePos[1]){e.tileData.dense=e.tileData.dense.slice();const f=Math.floor(Math.sqrt(e.tileData.dense.length));for(let d=0;d<f;d++)for(let p=d+1;p<f;p++)e.tileData.dense[d*f+p]=e.tileData.dense[p*f+d];if(s)for(let d=0;d<f;d++)for(let p=0;p<d;p++)e.tileData.dense[d*f+p]=NaN;e.isMirrored=!0}const h=Hoe(l.dense.length,l.dense,t,r,i,n,a,s,e.tileData.shape,c,u);o({pixData:h})};function H5(e,t,r,i){Xd+=1,i.publish("requestSent",e);let n=null;if(r==="text")n=null;else if(r==="json")n="application/json";else throw new Error(`fetch either "text" or "json", not "${r}"`);const o={};return n&&(o["Content-Type"]=n),Bu&&(o.Authorization=Bu),fetch(e,{credentials:"same-origin",headers:o}).then(a=>{if(!a.ok)throw Error(a.statusText);return a[r]()}).then(a=>(t(void 0,a),a)).catch(a=>(console.error(`Could not fetch ${e}`,a),t(a,void 0),a)).finally(()=>{i.publish("requestReceived",e),Xd-=1})}function Woe(e,t,r){return H5(e,t,"text",r)}async function $5(e,t,r){return e.indexOf("hg19")>=0&&await rw(1),H5(e,t,"json",r)}const F5=(e,t,r,i,n)=>{const o=`${my(e)}/tileset_info/?d=${t}&s=${gy}`;n.publish("requestSent",o),$5(o,(a,s)=>{n.publish("requestReceived",o),a?i?i(`Error retrieving tilesetInfo from: ${e}`):console.warn("Error retrieving: ",o):r(s)},n)},at={calculateResolution:R5,calculateTileAndPosInTile:M5,calculateTiles:vy,calculateTilesFromResolution:yy,calculateTileWidth:L5,calculateZoomLevel:iw,calculateZoomLevelFromResolutions:nw,fetchTilesDebounced:N5,json:$5,text:Woe,tileDataToPixData:B5,trackInfo:F5},Yoe=Object.freeze(Object.defineProperty({__proto__:null,ElementResizeListener:I5,get authHeader(){return Bu},chromInfo:QS,createDomEvent:O5,getTileProxyAuthHeader:zoe,get requestsInFlight(){return Xd},setTileProxyAuthHeader:Kd,tileProxy:at,tileResponseToData:tw},Symbol.toStringTag,{value:"Module"})),j5=e=>(I5.listen(),[e.clientWidth,e.clientHeight]),Ci=(e,t)=>{let r=null;const i=n=>(n.uid===t&&(r=n),n.type.substr(0,8)==="combined"&&n.contents.forEach(i),null);return Object.keys(e).map(n=>e[n]).filter(n=>n.filter).reduce((n,o)=>n.concat(o),[]).forEach(i),r},qoe=(e,t,r)=>{const n=e.state.views[t];if(!n)return null;let o=null;const a=c=>(c.uid===r&&(o=c),c.type.substr(0,8)==="combined"&&c.contents.forEach(a),null),s=n.tracks;return Object.keys(s).map(c=>s[c]).filter(c=>c.filter).reduce((c,u)=>c.concat(u),[]).forEach(a),o},Zd=(e,t,r)=>{const i=t?e[t]:Object.values(e)[0];if(!i){console.warn(t?`Could't find view with id "${t}"`:"No views available.");return}let n=i.trackRenderer.trackDefObjects[r];return n?n=n.trackObject:Object.values(i.trackRenderer.trackDefObjects).map(o=>o.trackObject).filter(o=>o.childTracks).forEach(o=>{o.createdTracks[r]&&(n=o.createdTracks[r])}),n};function by(e){return e.type==="combined"}function Xoe(e){return"deltaY"in e&&"deltaMode"in e}function U5(e){return e!==null&&typeof e=="object"}function Koe(e){return U5(e)&&"max_width"in e}function Zoe(e){return U5(e)&&"resolutions"in e}const ow=(e,t,r=!0,i=null)=>e.forEach(n=>{r&&by(n)&&ow(n.contents,t,r,i),t(n,i)}),La=(e,t,r=!0)=>{const i=[];for(const[n,o]of Object.entries(e))ow(o,t,r,n),i.push(...o);return i},Qd=(e,t)=>{let r=null;return La(e,(i,n)=>{i.uid===t&&(r=n)}),r},aw=e=>t=>Array.prototype.map.call(t,e),G5=()=>[window,aw(e=>e.charCodeAt(0))("1.13.4").map(e=>e<=999?`00${e}`.slice(-3):e).join("")],z5=(e,t=1,r=100,i=0,n=0,o=0,a=100)=>{const s=document.createElement("canvas");s.width=t,s.height=r;const c=s.getContext("2d");if(!c)throw new Error("Could not get canvas context");const u=c.createLinearGradient(i,n,o,a);return e.forEach(l=>{u.addColorStop(l.from,l.color)}),c.fillStyle=u,c.fillRect(0,0,t,r),s},V5=(e,t)=>{let r=e;for(;r&&r!==t&&r.tagName!=="HTML";)r=r.parentNode;return r===t},W5=e=>parseInt(e.replace(/^#/,""),16),Y5=()=>{};function Qoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q5(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,eae(i.key),i)}}function Joe(e,t,r){return t&&q5(e.prototype,t),r&&q5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eae(e){var t=tae(e,"string");return typeof t=="symbol"?t:String(t)}function tae(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let sw=function(){function e(t){Qoe(this,e),this.context=t;const{tracks:r,createTrackObject:i}=t;this.childTracks=r.map(i),this.createdTracks={},this.uid=xt.nice(),this.childTracks.forEach((n,o)=>{this.createdTracks[r[o].uid]=n});for(let n=0;n<this.childTracks.length;n++)this.childTracks[n]||console.error("Empty child track in CombinedTrack:",this)}return Joe(e,[{key:"updateContents",value:function(r,i){const n=[],o=new Set;r.forEach(c=>{if(o.add(c.uid),c.uid in this.createdTracks)n.push(this.createdTracks[c.uid]);else{const u=i(c);u.setPosition(this.position),u.setDimensions(this.dimensions),n.push(u),u.zoomed(this._xScale,this._yScale),this.createdTracks[c.uid]=u}}),this.childTracks=n;const a=new Set(Object.keys(this.createdTracks));return[...new Set([...a].filter(c=>!o.has(c)))].forEach(c=>{this.createdTracks[c].remove(),delete this.createdTracks[c]}),this}},{key:"setPosition",value:function(r){this.position=r;for(let i=0;i<this.childTracks.length;i++)this.childTracks[i].setPosition(r)}},{key:"setDimensions",value:function(r){this.dimensions=r;for(let i=0;i<this.childTracks.length;i++)this.childTracks[i].setDimensions(r)}},{key:"zoomed",value:function(r,i,n,o,a,s,c){this._xScale=r,this._yScale=i;for(let u=0;u<this.childTracks.length;u++)this.childTracks[u].zoomed(r,i,n,o,a,s,c)}},{key:"clickOutside",value:function(){for(let r=0;r<this.childTracks.length;r++)this.childTracks[r].clickOutside()}},{key:"click",value:function(...r){for(let i=0;i<this.childTracks.length;i++)this.childTracks[i].click(...r)}},{key:"draw",value:function(){}},{key:"refScalesChanged",value:function(r,i){for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].refScalesChanged(r,i)}},{key:"remove",value:function(){for(let r=0;r<this.childTracks.length;r++)this.childTracks[r].remove()}},{key:"exportSVG",value:function(){const r=document.createElement("g");for(const i of this.childTracks)i.exportSVG&&r.appendChild(i.exportSVG()[0]);return[r,r]}},{key:"rerender",value:function(r){}},{key:"minValue",value:function(r){if(arguments.length===0){const i=this.childTracks.filter(n=>n.minValue).map(n=>n.minValue()).filter(n=>n);return Math.min(...i)}for(const i of this.childTracks)i.minValue&&i.minValue(r)}},{key:"maxValue",value:function(r){if(arguments.length===0){const i=this.childTracks.filter(n=>n.maxValue).map(n=>n.maxValue()).filter(n=>n);return Math.max(...i)}for(const i of this.childTracks)i.maxValue&&i.maxValue(r)}},{key:"respondsToPosition",value:function(r,i){return r>=this.position[0]&&r<=this.dimensions[0]+this.position[0]&&i>=this.position[1]&&i<=this.dimensions[1]+this.position[1]}},{key:"stopHover",value:function(){for(const r of this.childTracks)r.stopHover&&r.stopHover()}},{key:"getMouseOverHtml",value:function(r,i,n){let o="";for(const a of this.childTracks)if(a.getMouseOverHtml){const s=a.getMouseOverHtml(r,i,n);s&&s.length&&(o+=s)}return o}}]),e}();const X5=(e,t)=>t===e?!0:t instanceof sw?Object.keys(t.createdTracks).map(r=>t.createdTracks[r]).some(r=>X5(e,r)):!1,lw=(e,t,r,i,n,o,a=!1)=>a?e>=r&&e<=i||t>=n&&t<=o:e>=r&&e<=i&&t>=n&&t<=o,rae=e=>Math.log(Math.tan((e+Math.PI/2)/2)),nae=(e,t)=>{let r=e*Math.PI/180;return r=rae(r),2**t*(Math.PI-r)/(2*Math.PI)},_y=e=>aw(t=>e[t])(Object.keys(e)),iae=e=>_y(e).map(t=>t.chromInfoPath).forEach(t=>QS.get(t)),oae=(e,t)=>2**t*(e+180)/360,cw=(e,t)=>e>t?e:t,K5=1e-7;function uw(e){let t=Number.MIN_SAFE_INTEGER;for(let r=0;r<e.length;r++){const i=e[r];i<K5&&i>-K5||i>t&&(t=i)}return t}const Z5=(e,t)=>e<t?e:t,Q5=1e-7;function fw(e){let t=Number.MAX_SAFE_INTEGER;for(let r=0;r<e.length;r++){const i=e[r];i<Q5&&i>-Q5||i<t&&(t=i)}return t}const aae=(e,t)=>(e%t+t)%t,J5=(e,t)=>{const r=+t;if(!Number.isNaN(r))if(e.dimension===1)for(let n=0;n<e.shape[0];++n)e.set(n,r);else for(let n=0;n<e.shape[0];++n)for(let o=0;o<e.shape[1];++o)e.set(n,o,r);else{const n=e.shape[0],o=e.shape[1],a=t.shape[0],s=t.shape[1];if(n!==a||o!==s){console.warn("Cannot assign source to target ndarray as the dimensions do not match",n,a,o,s);return}if(e.dimension===1)for(let c=0;c<e.shape[0];++c)e.set(c,t.get(c));else for(let c=0;c<e.shape[0];++c)for(let u=0;u<e.shape[1];++u)e.set(c,u,t.get(c,u))}},eB=e=>{const t=e.shape.reduce((i,n)=>i*n,1),r=new Array(t);if(e.dimension===1){let i=0;for(let n=0;n<e.shape[0];++n)r[i]=e.get(n),i++}else{let i=0;for(let n=0;n<e.shape[0];++n)for(let o=0;o<e.shape[1];++o)r[i]=e.get(n,o),i++}return r},tB=e=>e.shape.length===1?e:Lu(eB(e)),rB=e=>{const t=e.split("."),r=t.slice(1).join("").length;return+t.join("")/10**r},Jd=(e,t)=>e||t;function Ty(e){const t=[],r={},i={};let n=0;for(let o=0;o<e.length;o++){const a=Number(e[o][1]);n+=a;const s={id:o,chr:e[o][0],pos:n-a};t.push(s),i[s.chr]=s,r[e[o][0]]=a}return{cumPositions:t,chrPositions:i,totalLength:n,chromLengths:r}}const Ey=e=>{const t=document.createElement("g"),r=document.createElement("text");return e.anchor.x===0?r.setAttribute("text-anchor","start"):e.anchor.x===1?r.setAttribute("text-anchor","end"):r.setAttribute("text-anchor","middle"),r.setAttribute("font-family",e.style.fontFamily),r.setAttribute("font-size",e.style.fontSize),t.setAttribute("transform",`scale(${e.scale.x},1)`),r.setAttribute("fill",e.style.fill),r.innerHTML=e.text,t.appendChild(r),t.setAttribute("transform",`translate(${e.x},${e.y})scale(${e.scale.x},1)`),t},sae=e=>{try{const t=e.split(".");return r=>{let i=r;return t.forEach(n=>{i=i[n]}),i}}catch{return}},lae=(e,t,r,i,n,o,a=0,s=0,c)=>{const u=o?n:i,l=o?i:n,h=o?s:a,f=o?a:s,d=Math.max(0,+u[0]||0),p=Math.max(0,+u[1]||0),m=Math.max(0,+l[0]||0),g=Math.max(0,+l[1]||0);let v=[];ArrayBuffer.isView(c)||console.warn("Not supported yet");try{const _=new c.constructor(c.length);let y=0+f;for(let T=m;T<g;T++)_.set(e.slice(T*t+d,T*t+p),h+y*r),y+=1;const b=o?QL(r,r):void 0;v=JL(c,_,b)}catch{}return v},cae=(e,t,r,i)=>[i.chrPositions[e].pos+ +t,i.chrPositions[e].pos+ +r],uae="http://www.w3.org/2000/svg",fae=(e,t)=>{const r=new RegExp(`(\\s|^)${t}(\\s|$)`);if(e.namespaceURI===uae){const i=e.getAttribute("class")||"";e.setAttribute("class",i.replace(r," "))}else e.classList?e.classList.remove(t):ay(e,t)&&(e.className=e.className.replace(r," "))},Hu=(e,t)=>{e.select(".selection").attr("fill",null).attr("fill-opacity",null).attr("stroke",null).classed(t,!0)},hw=e=>{const t=e.toString(16);return t.length===1?`0${t}`:t},hae=(e,t,r)=>`#${hw(e)}${hw(t)}${hw(r)}`,tn=(e,t)=>{const r=e.invert((e.range()[0]+e.range()[1])/2),i=t.invert((t.range()[0]+t.range()[1])/2),n=e.invert(1)-e.invert(0);return[r,i,n]},nB=(e,t,r)=>{if(r===null||!e||!t)return;const i=e.domain()[0],n=e.domain()[1],o=t.domain()[0],a=t.domain()[1];return[...sy(i,n,r),...sy(o,a,r)]},dae=11184810,pae=1,mae=(e,t,r,i,n,o,a,s,c)=>{e.publish("app.animateOnMouseMove",!0);const u=r.mousePositionColor?W5(r.mousePositionColor):dae,l=r.mousePositionAlpha||pae,h=new He.PIXI.Graphics,f=()=>{h&&h._geometry&&h.clear()},d=(m,g,v)=>{if(v||f(),h.lineStyle(1,u,l),g){const _=s?n()[0]:0;h.moveTo(0,m),h.lineTo(o()[0]+_,m)}else{const _=s?n()[1]:0;h.moveTo(m,0),h.lineTo(m,o()[1]+_)}},p=m=>{if(m.noHoveredTracks)return f(),h;let g,v;m.isFromVerticalTrack?(g=m.dataY,v=m.dataY):(g=m.dataX,v=m.isFrom2dTrack?m.dataY:m.dataX);const _=s?n():[0,0],y=a()?i()[0](v)+_[1]:i()[0](g)+_[0];return d(y),s&&d(i()[1](v)+_[1],!0,!0),h};return t.push(e.subscribe("app.mouseMove",p)),t.push(e.subscribe("app.mouseLeave",f)),t.push(e.subscribe("blur",f)),c&&t.push(Ad.subscribe("higlass.mouseMove",p)),h},Ss=(e,t=!1,r=!1)=>{const i=t?e.pMasked:e.pForeground||e.pMain;if(!i)throw new Error("setupShowMousePosition: No scene found. Please make sure to call this method after the scene has been initialized.");const n=()=>[e.xScale(),e.yScale()],o=mae(e.pubSub,e.pubSubs,e.options,n,e.getPosition.bind(e),e.getDimensions.bind(e),e.getProp("flipText"),t,r);return i.addChild(o),()=>{i.removeChild(o)}},gae=e=>t=>Array.prototype.some.call(t,e),ws=(e,t)=>e+t,dw=(e,t,r,i,n,o)=>{const a=document.createElement("line");return a.setAttribute("x1",e),a.setAttribute("x2",r),a.setAttribute("y1",t),a.setAttribute("y2",i),n&&a.setAttribute("stroke-width",n),o&&a.setAttribute("stroke",o),a},iB=(e,t,r)=>{let i,n=0;const o=()=>{i=void 0},a=(...u)=>{const l=()=>{n>0&&(e(...u),n=0)};clearTimeout(i),i=setTimeout(l,r)};a.cancel=()=>{clearTimeout(i),o()},a.immediate=(...u)=>{e(...u)};let s=!1;return(u,...l)=>{s?n++:(e(...l),a(...l),s=!0,n=0,setTimeout(()=>{s=!1},t))}},vae=(e,t=256,r=256)=>{const i=document.createElement("canvas");i.width=t,i.height=r;const n=i.getContext("2d");if(!n)throw new Error("Could not get canvas context");n.fillStyle="transparent",n.fillRect(0,0,i.width,i.height);const o=new ImageData(e,i.width,i.height);return n.putImageData(o,0,0),i},yae=e=>{if(!e.tracks)return 0;let t=0;return e.tracks.top&&(t+=e.tracks.top.map(r=>r.height).reduce((r,i)=>r+i,0)),e.tracks.center&&(t+=e.tracks.center.map(r=>r.height).reduce((r,i)=>r+i,0)),e.tracks.bottom&&(t+=e.tracks.bottom.map(r=>r.height).reduce((r,i)=>r+i,0)),t},ql=()=>{},pw=(e,t,r=0,i=1e-6)=>n=>{let o=255;return n>i&&(o=Math.max(0,Math.min(255,Math.floor(e(n+r))))),t[o]},Sy=e=>{let t=[];for(let r=0;r<e.length;r++)e[r].contents?t=t.concat(e[r].contents):t.push(e[r]);return t};function oB(e,t,r,i){this.interval=[e,t],this.max=-1/0,this.parentNode=null,this.left=r,this.right=i}function Ba(){this.root=null}function aB(e,t,r){let i=new oB(r[0],r[1]);if(i.max=r[1],i.parentNode=e,e[t]=i,e.max<r[1])for(;i;)i.max<r[1]&&(i.max=r[1]),i=i.parentNode}function mw(e,t){e.interval[0]>t[0]?e.left?mw(e.left,t):aB(e,"left",t):e.right?mw(e.right,t):aB(e,"right",t)}Ba.prototype.add=function(t){if(!this.root){this.root=new oB(t[0],t[1]),this.root.max=t[1];return}mw(this.root,t)};function sB(e,t){if(!t)return!1;if(t.interval[0]<=e&&t.interval[1]>=e)return!0;let r=!1,i;return["left","right"].forEach(n=>{i=t[n],i&&i.max>e&&(r=r||sB(e,i))}),r}Ba.prototype.contains=function(t){return sB(t,this.root)};function bae(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]<t[0]&&e[1]>t[0]||e[0]<t[1]&&e[1]>t[1]||t[0]<e[0]&&t[1]>e[0]||t[0]<e[1]&&t[1]>e[1]}function lB(e,t){if(!t)return!1;if(bae(t.interval,e))return!0;let r=!1,i;return["left","right"].forEach(n=>{i=t[n],i&&i.max>=e[0]&&(r=r||lB(e,i))}),r}Ba.prototype.intersects=function(t){return lB(t,this.root)};function gw(e){return e?1+Math.max(gw(e.left),gw(e.right)):0}Ba.prototype.height=function(){return gw(this.root)},Ba.prototype.findMax=function(t){const r=[t];let i,n=-1/0,o;for(;r.length;)i=r.pop(),i.left&&r.push(i.left),i.right&&r.push(i.right),i.interval[1]>n&&(n=i.interval[1],o=i);return o},Ba.prototype._removeHelper=function(t,r){if(r)if(r.interval[0]===t[0]&&r.interval[1]===t[1]){if(r.left&&r.right){let n=r.left;for(;n.left;)n=n.left;const o=n.interval;n.interval=r.interval,r.interval=o,this._removeHelper(n.interval,r)}else{let n="left";r.right&&(n="right");const o=r.parentNode;o?(o.left===r?o.left=r[n]:o.right=r[n],r[n]&&(r[n].parentNode=o)):(this.root=r[n],this.root&&(this.root.parentNode=null))}const i=r.parentNode;if(i){let n=this.findMax(i);const o=n.interval[1];for(;n;)n.max===r.interval[1]?(n.max=o,n=n.parentNode):n=!1}}else this._removeHelper(t,r.left),this._removeHelper(t,r.right)},Ba.prototype.remove=function(t){return this._removeHelper(t,this.root)};function wy(e){e.sort((i,n)=>n.to-n.from-(i.to-i.from));const t=[[]],r=[new Ba];for(let i=0;i<e.length;i++){let n=!1;for(let o=0;o<t.length;o++){const a=r[o],s=[+e[i].from,+e[i].to];if(!a.intersects(s)){a.add(s),t[o].push(e[i]),n=!0;break}}if(!n){const o=new Ba;o.add([e[i].from,e[i].to]),t.push([e[i]]),r.push(o)}}return t}const $u=e=>{switch(e.type){case"heatmap":case"horizontal-1d-heatmap":case"horizontal-bar":case"horizontal-line":case"horizontal-point":case"vertical-1d-heatmap":case"vertical-bar":case"vertical-line":case"vertical-point":case"horizontal-1d-tiles":case"vertical-1d-tiles":case"2d-tiles":case"horizontal-gene-annotations":case"vertical-gene-annotations":case"horizontal-heatmap":case"vertical-heatmap":case"osm-tiles":case"mapbox-tiles":case"horizontal-multivec":return!0;case"combined":return e.contents.map(r=>$u(r)).reduce(Jd,!1);default:return!1}},Ay=(e,t,r)=>{let i=t,n=r;return r||(n=t,i=Object.values(e.state.views)[0].uid),e.tiledPlots[i].trackRenderer.getTrackObject(n)},cB=(e,t)=>e.tiledPlots[t].trackRenderer,_ae=(e,t)=>e.tiledPlots[t];var vw={},uB=Object.prototype.toString,fB=function(t){var r=uB.call(t),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&uB.call(t.callee)==="[object Function]"),i},yw,hB;function Tae(){if(hB)return yw;hB=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=fB,n=Object.prototype.propertyIsEnumerable,o=!n.call({toString:null},"toString"),a=n.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(f){var d=f.constructor;return d&&d.prototype===f},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!u["$"+f]&&t.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{c(window[f])}catch{return!0}}catch{return!0}return!1}(),h=function(f){if(typeof window>"u"||!l)return c(f);try{return c(f)}catch{return!1}};e=function(d){var p=d!==null&&typeof d=="object",m=r.call(d)==="[object Function]",g=i(d),v=p&&r.call(d)==="[object String]",_=[];if(!p&&!m&&!g)throw new TypeError("Object.keys called on a non-object");var y=a&&m;if(v&&d.length>0&&!t.call(d,0))for(var b=0;b<d.length;++b)_.push(String(b));if(g&&d.length>0)for(var T=0;T<d.length;++T)_.push(String(T));else for(var S in d)!(y&&S==="prototype")&&t.call(d,S)&&_.push(String(S));if(o)for(var k=h(d),O=0;O<s.length;++O)!(k&&s[O]==="constructor")&&t.call(d,s[O])&&_.push(s[O]);return _}}return yw=e,yw}var Eae=Array.prototype.slice,Sae=fB,dB=Object.keys,Oy=dB?function(t){return dB(t)}:Tae(),pB=Object.keys;Oy.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(i){return Sae(i)?pB(Eae.call(i)):pB(i)})}else Object.keys=Oy;return Object.keys||Oy};var mB=Oy,bw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==n||a.enumerable!==!0)return!1}return!0},gB=typeof Symbol<"u"&&Symbol,wae=bw,vB=function(){return typeof gB!="function"||typeof Symbol!="function"||typeof gB("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:wae()},yB={foo:{}},Aae=Object,bB=function(){return{__proto__:yB}.foo===yB.foo&&!({__proto__:null}instanceof Aae)},Oae="Function.prototype.bind called on incompatible ",kae=Object.prototype.toString,Iae=Math.max,Cae="[object Function]",_B=function(t,r){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var o=0;o<r.length;o+=1)i[o+t.length]=r[o];return i},Pae=function(t,r){for(var i=[],n=r||0,o=0;n<t.length;n+=1,o+=1)i[o]=t[n];return i},Dae=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r},xae=function(t){var r=this;if(typeof r!="function"||kae.apply(r)!==Cae)throw new TypeError(Oae+r);for(var i=Pae(arguments,1),n,o=function(){if(this instanceof n){var l=r.apply(this,_B(i,arguments));return Object(l)===l?l:this}return r.apply(t,_B(i,arguments))},a=Iae(0,r.length-i.length),s=[],c=0;c<a;c++)s[c]="$"+c;if(n=Function("binder","return function ("+Dae(s,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n},Nae=xae,_w=Function.prototype.bind||Nae,Rae=Function.prototype.call,Mae=Object.prototype.hasOwnProperty,Lae=_w,Ha=Lae.call(Rae,Mae),Vt,Fu=SyntaxError,TB=Function,ju=TypeError,Tw=function(e){try{return TB('"use strict"; return ('+e+").constructor;")()}catch{}},Xl=Object.getOwnPropertyDescriptor;if(Xl)try{Xl({},"")}catch{Xl=null}var Ew=function(){throw new ju},Bae=Xl?function(){try{return arguments.callee,Ew}catch{try{return Xl(arguments,"callee").get}catch{return Ew}}}():Ew,Uu=vB(),Hae=bB(),cn=Object.getPrototypeOf||(Hae?function(e){return e.__proto__}:null),Gu={},$ae=typeof Uint8Array>"u"||!cn?Vt:cn(Uint8Array),Kl={"%AggregateError%":typeof AggregateError>"u"?Vt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Vt:ArrayBuffer,"%ArrayIteratorPrototype%":Uu&&cn?cn([][Symbol.iterator]()):Vt,"%AsyncFromSyncIteratorPrototype%":Vt,"%AsyncFunction%":Gu,"%AsyncGenerator%":Gu,"%AsyncGeneratorFunction%":Gu,"%AsyncIteratorPrototype%":Gu,"%Atomics%":typeof Atomics>"u"?Vt:Atomics,"%BigInt%":typeof BigInt>"u"?Vt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Vt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Vt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Vt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Vt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Vt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Vt:FinalizationRegistry,"%Function%":TB,"%GeneratorFunction%":Gu,"%Int8Array%":typeof Int8Array>"u"?Vt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Vt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Vt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Uu&&cn?cn(cn([][Symbol.iterator]())):Vt,"%JSON%":typeof JSON=="object"?JSON:Vt,"%Map%":typeof Map>"u"?Vt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Uu||!cn?Vt:cn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Vt:Promise,"%Proxy%":typeof Proxy>"u"?Vt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Vt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Vt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Uu||!cn?Vt:cn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Vt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Uu&&cn?cn(""[Symbol.iterator]()):Vt,"%Symbol%":Uu?Symbol:Vt,"%SyntaxError%":Fu,"%ThrowTypeError%":Bae,"%TypedArray%":$ae,"%TypeError%":ju,"%Uint8Array%":typeof Uint8Array>"u"?Vt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Vt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Vt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Vt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Vt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Vt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Vt:WeakSet};if(cn)try{null.error}catch(e){var Fae=cn(cn(e));Kl["%Error.prototype%"]=Fae}var jae=function e(t){var r;if(t==="%AsyncFunction%")r=Tw("async function () {}");else if(t==="%GeneratorFunction%")r=Tw("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Tw("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=e("%AsyncGenerator%");n&&cn&&(r=cn(n.prototype))}return Kl[t]=r,r},EB={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ep=_w,ky=Ha,Uae=ep.call(Function.call,Array.prototype.concat),Gae=ep.call(Function.apply,Array.prototype.splice),SB=ep.call(Function.call,String.prototype.replace),Iy=ep.call(Function.call,String.prototype.slice),zae=ep.call(Function.call,RegExp.prototype.exec),Vae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Wae=/\\(\\)?/g,Yae=function(t){var r=Iy(t,0,1),i=Iy(t,-1);if(r==="%"&&i!=="%")throw new Fu("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new Fu("invalid intrinsic syntax, expected opening `%`");var n=[];return SB(t,Vae,function(o,a,s,c){n[n.length]=s?SB(c,Wae,"$1"):a||o}),n},qae=function(t,r){var i=t,n;if(ky(EB,i)&&(n=EB[i],i="%"+n[0]+"%"),ky(Kl,i)){var o=Kl[i];if(o===Gu&&(o=jae(i)),typeof o>"u"&&!r)throw new ju("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new Fu("intrinsic "+t+" does not exist!")},Qt=function(t,r){if(typeof t!="string"||t.length===0)throw new ju("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ju('"allowMissing" argument must be a boolean');if(zae(/^%?[^%]*%?$/,t)===null)throw new Fu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Yae(t),n=i.length>0?i[0]:"",o=qae("%"+n+"%",r),a=o.name,s=o.value,c=!1,u=o.alias;u&&(n=u[0],Gae(i,Uae([0,1],u)));for(var l=1,h=!0;l<i.length;l+=1){var f=i[l],d=Iy(f,0,1),p=Iy(f,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Fu("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(c=!0),n+="."+f,a="%"+n+"%",ky(Kl,a))s=Kl[a];else if(s!=null){if(!(f in s)){if(!r)throw new ju("base intrinsic for "+t+" exists, but the property is not available.");return}if(Xl&&l+1>=i.length){var m=Xl(s,f);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?s=m.get:s=s[f]}else h=ky(s,f),s=s[f];h&&!c&&(Kl[a]=s)}}return s},Xae=Qt,Sw=Xae("%Object.defineProperty%",!0),ww=function(){if(Sw)try{return Sw({},"a",{value:1}),!0}catch{return!1}return!1};ww.hasArrayLengthDefineBug=function(){if(!ww())return null;try{return Sw([],"length",{value:1}).length!==1}catch{return!0}};var Cy=ww,Kae=Qt,Py=Kae("%Object.getOwnPropertyDescriptor%",!0);if(Py)try{Py([],"length")}catch{Py=null}var Aw=Py,Zae=Cy(),Ow=Qt,tp=Zae&&Ow("%Object.defineProperty%",!0);if(tp)try{tp({},"a",{value:1})}catch{tp=!1}var Qae=Ow("%SyntaxError%"),zu=Ow("%TypeError%"),wB=Aw,AB=function(t,r,i){if(!t||typeof t!="object"&&typeof t!="function")throw new zu("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new zu("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new zu("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new zu("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new zu("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new zu("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,c=!!wB&&wB(t,r);if(tp)tp(t,r,{configurable:a===null&&c?c.configurable:!a,enumerable:n===null&&c?c.enumerable:!n,value:i,writable:o===null&&c?c.writable:!o});else if(s||!n&&!o&&!a)t[r]=i;else throw new Qae("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Jae=mB,ese=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",tse=Object.prototype.toString,rse=Array.prototype.concat,OB=AB,nse=function(e){return typeof e=="function"&&tse.call(e)==="[object Function]"},kB=Cy(),ise=function(e,t,r,i){if(t in e){if(i===!0){if(e[t]===r)return}else if(!nse(i)||!i())return}kB?OB(e,t,r,!0):OB(e,t,r)},IB=function(e,t){var r=arguments.length>2?arguments[2]:{},i=Jae(t);ese&&(i=rse.call(i,Object.getOwnPropertySymbols(t)));for(var n=0;n<i.length;n+=1)ise(e,i[n],t[i[n]],r[i[n]])};IB.supportsDescriptors=!!kB;var Ln=IB,CB={exports:{}},PB=Qt,DB=AB,ose=Cy(),xB=Aw,NB=PB("%TypeError%"),ase=PB("%Math.floor%"),sse=function(t,r){if(typeof t!="function")throw new NB("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||ase(r)!==r)throw new NB("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in t&&xB){var a=xB(t,"length");a&&!a.configurable&&(n=!1),a&&!a.writable&&(o=!1)}return(n||o||!i)&&(ose?DB(t,"length",r,!0,!0):DB(t,"length",r)),t};(function(e){var t=_w,r=Qt,i=sse,n=r("%TypeError%"),o=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||t.call(a,o),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}e.exports=function(f){if(typeof f!="function")throw new n("a function is required");var d=s(t,a,arguments);return i(d,1+u(0,f.length-(arguments.length-1)),!0)};var l=function(){return s(t,o,arguments)};c?c(e.exports,"apply",{value:l}):e.exports.apply=l})(CB);var $a=CB.exports,RB=Qt,MB=$a,lse=MB(RB("String.prototype.indexOf")),qn=function(t,r){var i=RB(t,!!r);return typeof i=="function"&&lse(t,".prototype.")>-1?MB(i):i},cse=mB,LB=bw(),BB=qn,HB=Object,use=BB("Array.prototype.push"),$B=BB("Object.prototype.propertyIsEnumerable"),fse=LB?Object.getOwnPropertySymbols:null,FB=function(t,r){if(t==null)throw new TypeError("target must be an object");var i=HB(t);if(arguments.length===1)return i;for(var n=1;n<arguments.length;++n){var o=HB(arguments[n]),a=cse(o),s=LB&&(Object.getOwnPropertySymbols||fse);if(s)for(var c=s(o),u=0;u<c.length;++u){var l=c[u];$B(o,l)&&use(a,l)}for(var h=0;h<a.length;++h){var f=a[h];if($B(o,f)){var d=o[f];i[f]=d}}}return i},kw=FB,hse=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},i=0;i<t.length;++i)r[t[i]]=t[i];var n=Object.assign({},r),o="";for(var a in n)o+=a;return e!==o},dse=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},jB=function(){return!Object.assign||hse()||dse()?kw:Object.assign},pse=Ln,mse=jB,gse=function(){var t=mse();return pse(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},vse=Ln,yse=$a,bse=FB,UB=jB,_se=gse,Tse=yse.apply(UB()),GB=function(t,r){return Tse(Object,arguments)};vse(GB,{getPolyfill:UB,implementation:bse,shim:_se});var Vu=GB,Dy=Number.isNaN||function(t){return t!==t},Ese=Dy,zB=function(e){return(typeof e=="number"||typeof e=="bigint")&&!Ese(e)&&e!==1/0&&e!==-1/0},Iw,VB;function Cw(){if(VB)return Iw;VB=1;var e=Qt,t=e("%Math.abs%"),r=e("%Math.floor%"),i=Dy,n=zB;return Iw=function(a){if(typeof a!="number"||i(a)||!n(a))return!1;var s=t(a);return r(s)===s},Iw}var Pw,WB;function Sse(){if(WB)return Pw;WB=1;var e=Qt,t=e("%Array.prototype%"),r=e("%RangeError%"),i=e("%SyntaxError%"),n=e("%TypeError%"),o=Cw(),a=Math.pow(2,32)-1,s=bB(),c=e("%Object.setPrototypeOf%",!0)||(s?function(u,l){return u.__proto__=l,u}:null);return Pw=function(l){if(!o(l)||l<0)throw new n("Assertion failed: `length` must be an integer Number >= 0");if(l>a)throw new r("length is greater than (2**32 - 1)");var h=arguments.length>1?arguments[1]:t,f=[];if(h!==t){if(!c)throw new i("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");c(f,h)}return l!==0&&(f.length=l),f},Pw}const wse=Sa(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Dw=typeof Map=="function"&&Map.prototype,xw=Object.getOwnPropertyDescriptor&&Dw?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,xy=Dw&&xw&&typeof xw.get=="function"?xw.get:null,YB=Dw&&Map.prototype.forEach,Nw=typeof Set=="function"&&Set.prototype,Rw=Object.getOwnPropertyDescriptor&&Nw?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ny=Nw&&Rw&&typeof Rw.get=="function"?Rw.get:null,qB=Nw&&Set.prototype.forEach,Ase=typeof WeakMap=="function"&&WeakMap.prototype,rp=Ase?WeakMap.prototype.has:null,Ose=typeof WeakSet=="function"&&WeakSet.prototype,np=Ose?WeakSet.prototype.has:null,kse=typeof WeakRef=="function"&&WeakRef.prototype,XB=kse?WeakRef.prototype.deref:null,Ise=Boolean.prototype.valueOf,Cse=Object.prototype.toString,Pse=Function.prototype.toString,Dse=String.prototype.match,Mw=String.prototype.slice,As=String.prototype.replace,xse=String.prototype.toUpperCase,KB=String.prototype.toLowerCase,ZB=RegExp.prototype.test,QB=Array.prototype.concat,Yo=Array.prototype.join,Nse=Array.prototype.slice,JB=Math.floor,Lw=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Bw=Object.getOwnPropertySymbols,Hw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Bn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Wu||!0)?Symbol.toStringTag:null,eH=Object.prototype.propertyIsEnumerable,tH=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function rH(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||ZB.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var i=e<0?-JB(-e):JB(e);if(i!==e){var n=String(i),o=Mw.call(t,n.length+1);return As.call(n,r,"$&_")+"."+As.call(As.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return As.call(t,r,"$&_")}var $w=wse,nH=$w.custom,iH=lH(nH)?nH:null,oH=function e(t,r,i,n){var o=r||{};if(Os(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Os(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Os(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Os(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Os(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return uH(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return s?rH(t,c):c}if(typeof t=="bigint"){var u=String(t)+"n";return s?rH(t,u):u}var l=typeof o.depth>"u"?5:o.depth;if(typeof i>"u"&&(i=0),i>=l&&l>0&&typeof t=="object")return Fw(t)?"[Array]":"[Object]";var h=Zse(o,i);if(typeof n>"u")n=[];else if(cH(n,t)>=0)return"[Circular]";function f(B,A,M){if(A&&(n=Nse.call(n),n.push(A)),M){var j={depth:o.depth};return Os(o,"quoteStyle")&&(j.quoteStyle=o.quoteStyle),e(B,j,i+1,n)}return e(B,o,i+1,n)}if(typeof t=="function"&&!sH(t)){var d=Use(t),p=Ry(t,f);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+Yo.call(p,", ")+" }":"")}if(lH(t)){var m=Wu?As.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Hw.call(t);return typeof t=="object"&&!Wu?ip(m):m}if(qse(t)){for(var g="<"+KB.call(String(t.nodeName)),v=t.attributes||[],_=0;_<v.length;_++)g+=" "+v[_].name+"="+aH(Rse(v[_].value),"double",o);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+KB.call(String(t.nodeName))+">",g}if(Fw(t)){if(t.length===0)return"[]";var y=Ry(t,f);return h&&!Kse(y)?"["+Uw(y,h)+"]":"[ "+Yo.call(y,", ")+" ]"}if(Lse(t)){var b=Ry(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!eH.call(t,"cause")?"{ ["+String(t)+"] "+Yo.call(QB.call("[cause]: "+f(t.cause),b),", ")+" }":b.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Yo.call(b,", ")+" }"}if(typeof t=="object"&&a){if(iH&&typeof t[iH]=="function"&&$w)return $w(t,{depth:l-i});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Gse(t)){var T=[];return YB&&YB.call(t,function(B,A){T.push(f(A,t,!0)+" => "+f(B,t))}),fH("Map",xy.call(t),T,h)}if(Wse(t)){var S=[];return qB&&qB.call(t,function(B){S.push(f(B,t))}),fH("Set",Ny.call(t),S,h)}if(zse(t))return jw("WeakMap");if(Yse(t))return jw("WeakSet");if(Vse(t))return jw("WeakRef");if(Hse(t))return ip(f(Number(t)));if(Fse(t))return ip(f(Lw.call(t)));if($se(t))return ip(Ise.call(t));if(Bse(t))return ip(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===globalThis)return"{ [object globalThis] }";if(!Mse(t)&&!sH(t)){var k=Ry(t,f),O=tH?tH(t)===Object.prototype:t instanceof Object||t.constructor===Object,D=t instanceof Object?"":"null prototype",R=!O&&Bn&&Object(t)===t&&Bn in t?Mw.call(ks(t),8,-1):D?"Object":"",w=O||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",L=w+(R||D?"["+Yo.call(QB.call([],R||[],D||[]),": ")+"] ":"");return k.length===0?L+"{}":h?L+"{"+Uw(k,h)+"}":L+"{ "+Yo.call(k,", ")+" }"}return String(t)};function aH(e,t,r){var i=(r.quoteStyle||t)==="double"?'"':"'";return i+e+i}function Rse(e){return As.call(String(e),/"/g,"&quot;")}function Fw(e){return ks(e)==="[object Array]"&&(!Bn||!(typeof e=="object"&&Bn in e))}function Mse(e){return ks(e)==="[object Date]"&&(!Bn||!(typeof e=="object"&&Bn in e))}function sH(e){return ks(e)==="[object RegExp]"&&(!Bn||!(typeof e=="object"&&Bn in e))}function Lse(e){return ks(e)==="[object Error]"&&(!Bn||!(typeof e=="object"&&Bn in e))}function Bse(e){return ks(e)==="[object String]"&&(!Bn||!(typeof e=="object"&&Bn in e))}function Hse(e){return ks(e)==="[object Number]"&&(!Bn||!(typeof e=="object"&&Bn in e))}function $se(e){return ks(e)==="[object Boolean]"&&(!Bn||!(typeof e=="object"&&Bn in e))}function lH(e){if(Wu)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Hw)return!1;try{return Hw.call(e),!0}catch{}return!1}function Fse(e){if(!e||typeof e!="object"||!Lw)return!1;try{return Lw.call(e),!0}catch{}return!1}var jse=Object.prototype.hasOwnProperty||function(e){return e in this};function Os(e,t){return jse.call(e,t)}function ks(e){return Cse.call(e)}function Use(e){if(e.name)return e.name;var t=Dse.call(Pse.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function cH(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function Gse(e){if(!xy||!e||typeof e!="object")return!1;try{xy.call(e);try{Ny.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function zse(e){if(!rp||!e||typeof e!="object")return!1;try{rp.call(e,rp);try{np.call(e,np)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function Vse(e){if(!XB||!e||typeof e!="object")return!1;try{return XB.call(e),!0}catch{}return!1}function Wse(e){if(!Ny||!e||typeof e!="object")return!1;try{Ny.call(e);try{xy.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Yse(e){if(!np||!e||typeof e!="object")return!1;try{np.call(e,np);try{rp.call(e,rp)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function qse(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function uH(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return uH(Mw.call(e,0,t.maxStringLength),t)+i}var n=As.call(As.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Xse);return aH(n,"single",t)}function Xse(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+xse.call(t.toString(16))}function ip(e){return"Object("+e+")"}function jw(e){return e+" { ? }"}function fH(e,t,r,i){var n=i?Uw(r,i):Yo.call(r,", ");return e+" ("+t+") {"+n+"}"}function Kse(e){for(var t=0;t<e.length;t++)if(cH(e[t],`
`)>=0)return!1;return!0}function Zse(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=Yo.call(Array(e.indent+1)," ");else return null;return{base:r,prev:Yo.call(Array(t+1),r)}}function Uw(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+Yo.call(e,","+r)+`
`+t.prev}function Ry(e,t){var r=Fw(e),i=[];if(r){i.length=e.length;for(var n=0;n<e.length;n++)i[n]=Os(e,n)?t(e[n],e):""}var o=typeof Bw=="function"?Bw(e):[],a;if(Wu){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var c in e)Os(e,c)&&(r&&String(Number(c))===c&&c<e.length||Wu&&a["$"+c]instanceof Symbol||(ZB.call(/[^\w$]/,c)?i.push(t(c,e)+": "+t(e[c],e)):i.push(c+": "+t(e[c],e))));if(typeof Bw=="function")for(var u=0;u<o.length;u++)eH.call(e,o[u])&&i.push("["+t(o[u])+"]: "+t(e[o[u]],e));return i}var Gw,hH;function Is(){return hH||(hH=1,Gw=function(t){return typeof t=="string"||typeof t=="symbol"}),Gw}var zw,dH;function Qse(){return dH||(dH=1,zw=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(typeof t=="function"||typeof t=="object")return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"}),zw}var Vw,pH;function vn(){if(pH)return Vw;pH=1;var e=Qse();return Vw=function(r){return typeof r=="symbol"?"Symbol":typeof r=="bigint"?"BigInt":e(r)},Vw}var Jse=Qt,mH=Jse("%TypeError%"),ele=oH,tle=Is(),rle=vn(),op=function(t,r){if(rle(t)!=="Object")throw new mH("Assertion failed: Type(O) is not Object");if(!tle(r))throw new mH("Assertion failed: IsPropertyKey(P) is not true, got "+ele(r));return t[r]},Ww,gH;function vH(){if(gH)return Ww;gH=1;var e=Qt,t=e("%Array%"),r=!t.isArray&&qn("Object.prototype.toString");return Ww=t.isArray||function(n){return r(n)==="[object Array]"},Ww}var Yw,yH;function qw(){return yH||(yH=1,Yw=vH()),Yw}var My={exports:{}},Xw,bH;function nle(){return bH||(bH=1,Xw=Qt),Xw}var Kw,_H;function Zw(){if(_H)return Kw;_H=1;var e=Qt,t=Ha,r=e("%TypeError%");return Kw=function(n,o){if(n.Type(o)!=="Object")return!1;var a={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var s in o)if(t(o,s)&&!a[s])return!1;if(n.IsDataDescriptor(o)&&n.IsAccessorDescriptor(o))throw new r("Property Descriptors may not be both accessor and data descriptors");return!0},Kw}var Qw,TH;function EH(){if(TH)return Qw;TH=1;var e=Cy,t=Qt,r=e()&&t("%Object.defineProperty%",!0),i=e.hasArrayLengthDefineBug(),n=i&&vH(),o=qn,a=o("Object.prototype.propertyIsEnumerable");return Qw=function(c,u,l,h,f,d){if(!r){if(!c(d)||!d["[[Configurable]]"]||!d["[[Writable]]"]||f in h&&a(h,f)!==!!d["[[Enumerable]]"])return!1;var p=d["[[Value]]"];return h[f]=p,u(h[f],p)}return i&&f==="length"&&"[[Value]]"in d&&n(h)&&h.length!==d["[[Value]]"]?(h.length=d["[[Value]]"],h.length===d["[[Value]]"]):(r(h,f,l(d)),!0)},Qw}var Jw,SH;function ile(){if(SH)return Jw;SH=1;var e=Ha;return Jw=function(r){return e(r,"[[StartIndex]]")&&e(r,"[[EndIndex]]")&&r["[[StartIndex]]"]>=0&&r["[[EndIndex]]"]>=r["[[StartIndex]]"]&&String(parseInt(r["[[StartIndex]]"],10))===String(r["[[StartIndex]]"])&&String(parseInt(r["[[EndIndex]]"],10))===String(r["[[EndIndex]]"])},Jw}var eA,wH;function Ly(){if(wH)return eA;wH=1;var e=Qt,t=e("%TypeError%"),r=e("%SyntaxError%"),i=Ha,n=Cw(),o=ile(),a={"Property Descriptor":function(c){var u={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};if(!c)return!1;for(var l in c)if(i(c,l)&&!u[l])return!1;var h=i(c,"[[Value]]"),f=i(c,"[[Get]]")||i(c,"[[Set]]");if(h&&f)throw new t("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":o,"Iterator Record":function(c){return i(c,"[[Iterator]]")&&i(c,"[[NextMethod]]")&&i(c,"[[Done]]")},"PromiseCapability Record":function(c){return!!c&&i(c,"[[Resolve]]")&&typeof c["[[Resolve]]"]=="function"&&i(c,"[[Reject]]")&&typeof c["[[Reject]]"]=="function"&&i(c,"[[Promise]]")&&c["[[Promise]]"]&&typeof c["[[Promise]]"].then=="function"},"AsyncGeneratorRequest Record":function(c){return!!c&&i(c,"[[Completion]]")&&i(c,"[[Capability]]")&&a["PromiseCapability Record"](c["[[Capability]]"])},"RegExp Record":function(c){return c&&i(c,"[[IgnoreCase]]")&&typeof c["[[IgnoreCase]]"]=="boolean"&&i(c,"[[Multiline]]")&&typeof c["[[Multiline]]"]=="boolean"&&i(c,"[[DotAll]]")&&typeof c["[[DotAll]]"]=="boolean"&&i(c,"[[Unicode]]")&&typeof c["[[Unicode]]"]=="boolean"&&i(c,"[[CapturingGroupsCount]]")&&typeof c["[[CapturingGroupsCount]]"]=="number"&&n(c["[[CapturingGroupsCount]]"])&&c["[[CapturingGroupsCount]]"]>=0}};return eA=function(c,u,l,h){var f=a[u];if(typeof f!="function")throw new r("unknown record type: "+u);if(c(h)!=="Object"||!f(h))throw new t(l+" must be a "+u)},eA}var tA,AH;function ole(){return AH||(AH=1,tA=function(t){if(typeof t>"u")return t;var r={};return"[[Value]]"in t&&(r.value=t["[[Value]]"]),"[[Writable]]"in t&&(r.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(r.get=t["[[Get]]"]),"[[Set]]"in t&&(r.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(r.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(r.configurable=!!t["[[Configurable]]"]),r}),tA}var rA,OH;function kH(){if(OH)return rA;OH=1;var e=Ly(),t=ole(),r=vn();return rA=function(n){return typeof n<"u"&&e(r,"Property Descriptor","Desc",n),t(n)},rA}var nA,IH;function By(){if(IH)return nA;IH=1;var e=Ha,t=vn(),r=Ly();return nA=function(n){return!(typeof n>"u"||(r(t,"Property Descriptor","Desc",n),!e(n,"[[Get]]")&&!e(n,"[[Set]]")))},nA}var iA,CH;function Hy(){if(CH)return iA;CH=1;var e=Ha,t=vn(),r=Ly();return iA=function(n){return!(typeof n>"u"||(r(t,"Property Descriptor","Desc",n),!e(n,"[[Value]]")&&!e(n,"[[Writable]]")))},iA}var oA,PH;function aA(){if(PH)return oA;PH=1;var e=Dy;return oA=function(r,i){return r===i?r===0?1/r===1/i:!0:e(r)&&e(i)},oA}var DH=function(t){return!!t},xH=Function.prototype.toString,Yu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,sA,$y;if(typeof Yu=="function"&&typeof Object.defineProperty=="function")try{sA=Object.defineProperty({},"length",{get:function(){throw $y}}),$y={},Yu(function(){throw 42},null,sA)}catch(e){e!==$y&&(Yu=null)}else Yu=null;var ale=/^\s*class\b/,lA=function(t){try{var r=xH.call(t);return ale.test(r)}catch{return!1}},cA=function(t){try{return lA(t)?!1:(xH.call(t),!0)}catch{return!1}},Fy=Object.prototype.toString,sle="[object Object]",lle="[object Function]",cle="[object GeneratorFunction]",ule="[object HTMLAllCollection]",fle="[object HTML document.all class]",hle="[object HTMLCollection]",dle=typeof Symbol=="function"&&!!Symbol.toStringTag,ple=!(0 in[,]),uA=function(){return!1};if(typeof document=="object"){var mle=document.all;Fy.call(mle)===Fy.call(document.all)&&(uA=function(t){if((ple||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=Fy.call(t);return(r===ule||r===fle||r===hle||r===sle)&&t("")==null}catch{}return!1})}var fA=Yu?function(t){if(uA(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Yu(t,null,sA)}catch(r){if(r!==$y)return!1}return!lA(t)&&cA(t)}:function(t){if(uA(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(dle)return cA(t);if(lA(t))return!1;var r=Fy.call(t);return r!==lle&&r!==cle&&!/^\[object HTML/.test(r)?!1:cA(t)},hA=fA,dA,NH;function RH(){if(NH)return dA;NH=1;var e=Ha,t=Qt,r=t("%TypeError%"),i=vn(),n=DH,o=hA;return dA=function(s){if(i(s)!=="Object")throw new r("ToPropertyDescriptor requires an object");var c={};if(e(s,"enumerable")&&(c["[[Enumerable]]"]=n(s.enumerable)),e(s,"configurable")&&(c["[[Configurable]]"]=n(s.configurable)),e(s,"value")&&(c["[[Value]]"]=s.value),e(s,"writable")&&(c["[[Writable]]"]=n(s.writable)),e(s,"get")){var u=s.get;if(typeof u<"u"&&!o(u))throw new r("getter must be a function");c["[[Get]]"]=u}if(e(s,"set")){var l=s.set;if(typeof l<"u"&&!o(l))throw new r("setter must be a function");c["[[Set]]"]=l}if((e(c,"[[Get]]")||e(c,"[[Set]]"))&&(e(c,"[[Value]]")||e(c,"[[Writable]]")))throw new r("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return c},dA}var pA,MH;function gle(){if(MH)return pA;MH=1;var e=Qt,t=e("%TypeError%"),r=Zw(),i=EH(),n=kH(),o=By(),a=Hy(),s=Is(),c=aA(),u=RH(),l=vn();return pA=function(f,d,p){if(l(f)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!s(d))throw new t("Assertion failed: IsPropertyKey(P) is not true");var m=r({Type:l,IsDataDescriptor:a,IsAccessorDescriptor:o},p)?p:u(p);if(!r({Type:l,IsDataDescriptor:a,IsAccessorDescriptor:o},m))throw new t("Assertion failed: Desc is not a valid Property Descriptor");return i(a,c,n,f,d,m)},pA}var LH;function vle(){if(LH)return My.exports;LH=1;var e=nle(),t=e("%Reflect.construct%",!0),r=gle();try{r({},"",{"[[Get]]":function(){}})}catch{r=null}if(r&&t){var i={},n={};r(n,"length",{"[[Get]]":function(){throw i},"[[Enumerable]]":!0}),My.exports=function(a){try{t(a,n)}catch(s){return s===i}}}else My.exports=function(a){return typeof a=="function"&&!!a.prototype};return My.exports}var BH=Qt,HH=BH("%Symbol.species%",!0),$H=BH("%TypeError%"),FH=Sse(),jH=op,yle=qw(),ble=vle(),_le=vn(),Tle=Cw(),UH=function(t,r){if(!Tle(r)||r<0)throw new $H("Assertion failed: length must be an integer >= 0");var i=yle(t);if(!i)return FH(r);var n=jH(t,"constructor");if(HH&&_le(n)==="Object"&&(n=jH(n,HH),n===null&&(n=void 0)),typeof n>"u")return FH(r);if(!ble(n))throw new $H("C must be a constructor");return new n(r)},GH=Number.MAX_SAFE_INTEGER||9007199254740991,mA,zH;function VH(){if(zH)return mA;zH=1;var e=Qt,t=qn,r=e("%TypeError%"),i=qw(),n=e("%Reflect.apply%",!0)||t("Function.prototype.apply");return mA=function(a,s){var c=arguments.length>2?arguments[2]:[];if(!i(c))throw new r("Assertion failed: optional `argumentsList`, if provided, must be a List");return n(a,s,c)},mA}var gA,WH;function YH(){return WH||(WH=1,gA=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),gA}var vA,qH;function Ele(){if(qH)return vA;qH=1;var e=Qt,t=e("%Object.preventExtensions%",!0),r=e("%Object.isExtensible%",!0),i=YH();return vA=t?function(o){return!i(o)&&r(o)}:function(o){return!i(o)},vA}var yA,XH;function Sle(){return XH||(XH=1,yA=function(t,r){return!!r&&typeof r=="object"&&"[[Enumerable]]"in r&&"[[Configurable]]"in r&&(t.IsAccessorDescriptor(r)||t.IsDataDescriptor(r))}),yA}var bA,KH;function wle(){if(KH)return bA;KH=1;var e=Ly(),t=By(),r=Hy(),i=vn();return bA=function(o){return typeof o>"u"?!1:(e(i,"Property Descriptor","Desc",o),!t(o)&&!r(o))},bA}var _A,ZH;function Ale(){if(ZH)return _A;ZH=1;var e=Qt,t=e("%TypeError%"),r=EH(),i=Sle(),n=Zw(),o=kH(),a=By(),s=Hy(),c=wle(),u=Is(),l=aA(),h=vn();return _A=function(d,p,m,g,v){var _=h(d);if(_!=="Undefined"&&_!=="Object")throw new t("Assertion failed: O must be undefined or an Object");if(!u(p))throw new t("Assertion failed: P must be a Property Key");if(h(m)!=="Boolean")throw new t("Assertion failed: extensible must be a Boolean");if(!n({Type:h,IsDataDescriptor:s,IsAccessorDescriptor:a},g))throw new t("Assertion failed: Desc must be a Property Descriptor");if(h(v)!=="Undefined"&&!n({Type:h,IsDataDescriptor:s,IsAccessorDescriptor:a},v))throw new t("Assertion failed: current must be a Property Descriptor, or undefined");if(h(v)==="Undefined")return m?_==="Undefined"?!0:a(g)?r(s,l,o,d,p,g):r(s,l,o,d,p,{"[[Configurable]]":!!g["[[Configurable]]"],"[[Enumerable]]":!!g["[[Enumerable]]"],"[[Value]]":g["[[Value]]"],"[[Writable]]":!!g["[[Writable]]"]}):!1;if(!i({IsAccessorDescriptor:a,IsDataDescriptor:s},v))throw new t("`current`, when present, must be a fully populated and valid Property Descriptor");if(!v["[[Configurable]]"]){if("[[Configurable]]"in g&&g["[[Configurable]]"]||"[[Enumerable]]"in g&&!l(g["[[Enumerable]]"],v["[[Enumerable]]"])||!c(g)&&!l(a(g),a(v)))return!1;if(a(v)){if("[[Get]]"in g&&!l(g["[[Get]]"],v["[[Get]]"])||"[[Set]]"in g&&!l(g["[[Set]]"],v["[[Set]]"]))return!1}else if(!v["[[Writable]]"]&&("[[Writable]]"in g&&g["[[Writable]]"]||"[[Value]]"in g&&!l(g["[[Value]]"],v["[[Value]]"])))return!1}if(_!=="Undefined"){var y,b;return s(v)&&a(g)?(y=("[[Configurable]]"in g?g:v)["[[Configurable]]"],b=("[[Enumerable]]"in g?g:v)["[[Enumerable]]"],r(s,l,o,d,p,{"[[Configurable]]":!!y,"[[Enumerable]]":!!b,"[[Get]]":("[[Get]]"in g?g:v)["[[Get]]"],"[[Set]]":("[[Set]]"in g?g:v)["[[Set]]"]})):a(v)&&s(g)?(y=("[[Configurable]]"in g?g:v)["[[Configurable]]"],b=("[[Enumerable]]"in g?g:v)["[[Enumerable]]"],r(s,l,o,d,p,{"[[Configurable]]":!!y,"[[Enumerable]]":!!b,"[[Value]]":("[[Value]]"in g?g:v)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in g?g:v)["[[Writable]]"]})):r(s,l,o,d,p,g)}return!0},_A}var TA,QH;function Ole(){if(QH)return TA;QH=1;var e=Qt,t=Aw,r=e("%SyntaxError%"),i=e("%TypeError%"),n=Zw(),o=By(),a=Hy(),s=Ele(),c=Is(),u=RH(),l=aA(),h=vn(),f=Ale();return TA=function(p,m,g){if(h(p)!=="Object")throw new i("Assertion failed: O must be an Object");if(!c(m))throw new i("Assertion failed: P must be a Property Key");if(!n({Type:h,IsDataDescriptor:a,IsAccessorDescriptor:o},g))throw new i("Assertion failed: Desc must be a Property Descriptor");if(!t){if(o(g))throw new r("This environment does not support accessor property descriptors.");var v=!(m in p)&&g["[[Writable]]"]&&g["[[Enumerable]]"]&&g["[[Configurable]]"]&&"[[Value]]"in g,_=m in p&&(!("[[Configurable]]"in g)||g["[[Configurable]]"])&&(!("[[Enumerable]]"in g)||g["[[Enumerable]]"])&&(!("[[Writable]]"in g)||g["[[Writable]]"])&&"[[Value]]"in g;if(v||_)return p[m]=g["[[Value]]"],l(p[m],g["[[Value]]"]);throw new r("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var y=t(p,m),b=y&&u(y),T=s(p);return f(p,m,T,g,b)},TA}var EA,JH;function kle(){if(JH)return EA;JH=1;var e=Qt,t=e("%TypeError%"),r=Is(),i=Ole(),n=vn();return EA=function(a,s,c){if(n(a)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!r(s))throw new t("Assertion failed: IsPropertyKey(P) is not true");var u={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":c,"[[Writable]]":!0};return i(a,s,u)},EA}var SA,e$;function t$(){if(e$)return SA;e$=1;var e=Qt,t=e("%TypeError%"),r=kle(),i=Is(),n=vn();return SA=function(a,s,c){if(n(a)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!i(s))throw new t("Assertion failed: IsPropertyKey(P) is not true");var u=r(a,s,c);if(!u)throw new t("unable to create data property")},SA}var wA,r$;function n$(){if(r$)return wA;r$=1;var e=Qt,t=e("%TypeError%"),r=Is(),i=vn();return wA=function(o,a){if(i(o)!=="Object")throw new t("Assertion failed: `O` must be an Object");if(!r(a))throw new t("Assertion failed: `P` must be a Property Key");return a in o},wA}var AA,i$;function Ile(){return i$||(i$=1,AA=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),AA}var Cle=bw,ap=function(){return Cle()&&!!Symbol.toStringTag},OA,o$;function Ple(){if(o$)return OA;o$=1;var e=Date.prototype.getDay,t=function(a){try{return e.call(a),!0}catch{return!1}},r=Object.prototype.toString,i="[object Date]",n=ap();return OA=function(a){return typeof a!="object"||a===null?!1:n?t(a):r.call(a)===i},OA}var jy={exports:{}},a$;function Dle(){if(a$)return jy.exports;a$=1;var e=Object.prototype.toString,t=vB();if(t){var r=Symbol.prototype.toString,i=/^Symbol\(.*\)$/,n=function(a){return typeof a.valueOf()!="symbol"?!1:i.test(r.call(a))};jy.exports=function(a){if(typeof a=="symbol")return!0;if(e.call(a)!=="[object Symbol]")return!1;try{return n(a)}catch{return!1}}}else jy.exports=function(a){return!1};return jy.exports}var kA,s$;function xle(){if(s$)return kA;s$=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=Ile(),r=fA,i=Ple(),n=Dle(),o=function(c,u){if(typeof c>"u"||c===null)throw new TypeError("Cannot call method on "+c);if(typeof u!="string"||u!=="number"&&u!=="string")throw new TypeError('hint must be "string" or "number"');var l=u==="string"?["toString","valueOf"]:["valueOf","toString"],h,f,d;for(d=0;d<l.length;++d)if(h=c[l[d]],r(h)&&(f=h.call(c),t(f)))return f;throw new TypeError("No default value")},a=function(c,u){var l=c[u];if(l!==null&&typeof l<"u"){if(!r(l))throw new TypeError(l+" returned for property "+u+" of object "+c+" is not a function");return l}};return kA=function(c){if(t(c))return c;var u="default";arguments.length>1&&(arguments[1]===String?u="string":arguments[1]===Number&&(u="number"));var l;if(e&&(Symbol.toPrimitive?l=a(c,Symbol.toPrimitive):n(c)&&(l=Symbol.prototype.valueOf)),typeof l<"u"){var h=l.call(c,u);if(t(h))return h;throw new TypeError("unable to convert exotic object to primitive")}return u==="default"&&(i(c)||n(c))&&(u="string"),o(c,u==="default"?"number":u)},kA}var IA,l$;function Nle(){if(l$)return IA;l$=1;var e=xle();return IA=function(r){return arguments.length>1?e(r,arguments[1]):e(r)},IA}var CA=qn,c$=ap(),u$,f$,PA,DA;if(c$){u$=CA("Object.prototype.hasOwnProperty"),f$=CA("RegExp.prototype.exec"),PA={};var xA=function(){throw PA};DA={toString:xA,valueOf:xA},typeof Symbol.toPrimitive=="symbol"&&(DA[Symbol.toPrimitive]=xA)}var Rle=CA("Object.prototype.toString"),Mle=Object.getOwnPropertyDescriptor,Lle="[object RegExp]",h$=c$?function(t){if(!t||typeof t!="object")return!1;var r=Mle(t,"lastIndex"),i=r&&u$(r,"value");if(!i)return!1;try{f$(t,DA)}catch(n){return n===PA}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:Rle(t)===Lle},NA,d$;function Ble(){if(d$)return NA;d$=1;var e=qn,t=Qt,r=h$,i=e("RegExp.prototype.exec"),n=t("%TypeError%");return NA=function(a){if(!r(a))throw new n("`regex` must be a RegExp");return function(c){return i(a,c)!==null}},NA}var Hle=Qt,$le=Hle("%TypeError%"),Fle=function(t,r){if(t==null)throw new $le(r||"Cannot call method on "+t);return t},qu=Fle,RA,p$;function MA(){if(p$)return RA;p$=1;var e=Qt,t=e("%String%"),r=e("%TypeError%");return RA=function(n){if(typeof n=="symbol")throw new r("Cannot convert a Symbol value to a string");return t(n)},RA}var jle=qu,Ule=MA(),Gle=qn,m$=Gle("String.prototype.replace"),g$=/^\s$/.test("\u180E"),zle=g$?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Vle=g$?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,v$=function(){var t=Ule(jle(this));return m$(m$(t,zle,""),Vle,"")},Wle=v$,y$="\u200B",Xu="\u180E",b$=function(){return String.prototype.trim&&y$.trim()===y$&&Xu.trim()===Xu&&("_"+Xu).trim()==="_"+Xu&&(Xu+"_").trim()===Xu+"_"?String.prototype.trim:Wle},Yle=Ln,qle=b$,Xle=function(){var t=qle();return Yle(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t},Kle=$a,Zle=Ln,Qle=qu,Jle=v$,_$=b$,ece=Xle,tce=Kle(_$()),T$=function(t){return Qle(t),tce(t)};Zle(T$,{getPolyfill:_$,implementation:Jle,shim:ece});var E$=T$,LA,S$;function rce(){if(S$)return LA;S$=1;var e=Qt,t=e("%Number%"),r=e("%RegExp%"),i=e("%TypeError%"),n=e("%parseInt%"),o=qn,a=Ble(),s=o("String.prototype.slice"),c=a(/^0b[01]+$/i),u=a(/^0o[0-7]+$/i),l=a(/^[-+]0x[0-9a-f]+$/i),h=["\x85","\u200B","\uFFFE"].join(""),f=new r("["+h+"]","g"),d=a(f),p=E$,m=vn();return LA=function g(v){if(m(v)!=="String")throw new i("Assertion failed: `argument` is not a String");if(c(v))return t(n(s(v,2),2));if(u(v))return t(n(s(v,2),8));if(d(v)||l(v))return NaN;var _=p(v);return _!==v?g(_):t(v)},LA}var w$=Qt,A$=w$("%TypeError%"),O$=w$("%Number%"),nce=YH(),ice=Nle(),oce=rce(),ace=function(t){var r=nce(t)?t:ice(t,O$);if(typeof r=="symbol")throw new A$("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new A$("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?oce(r):O$(r)},sce=vn(),lce=Math.floor,cce=function(t){return sce(t)==="BigInt"?t:lce(t)},uce=Qt,k$=cce,fce=uce("%TypeError%"),hce=function(t){if(typeof t!="number"&&typeof t!="bigint")throw new fce("argument must be a Number or a BigInt");var r=t<0?-k$(-t):k$(t);return r===0?0:r},dce=ace,pce=hce,mce=Dy,gce=zB,I$=function(t){var r=dce(t);return mce(r)||r===0?0:gce(r)?pce(r):r},C$=GH,vce=I$,P$=function(t){var r=vce(t);return r<=0?0:r>C$?C$:r},BA,D$;function x$(){if(D$)return BA;D$=1;var e=Qt,t=e("%TypeError%"),r=op,i=P$,n=vn();return BA=function(a){if(n(a)!=="Object")throw new t("Assertion failed: `obj` must be an Object");return i(r(a,"length"))},BA}var yce=Qt,N$=yce("%TypeError%"),bce=GH,_ce=VH(),Tce=t$(),Ece=op,Sce=n$(),wce=qw(),Ace=x$(),R$=MA(),Oce=function e(t,r,i,n,o){var a;arguments.length>5&&(a=arguments[5]);for(var s=n,c=0;c<i;){var u=R$(c),l=Sce(r,u);if(l===!0){var h=Ece(r,u);if(typeof a<"u"){if(arguments.length<=6)throw new N$("Assertion failed: thisArg is required when mapperFunction is provided");h=_ce(a,arguments[6],[h,c,r])}var f=!1;if(o>0&&(f=wce(h)),f){var d=Ace(h);s=e(t,h,d,s,o-1)}else{if(s>=bce)throw new N$("index too large");Tce(t,R$(s),h),s+=1}}c+=1}return s},kce=Qt,Ice=kce("%Object%"),Cce=qu,M$=function(t){return Cce(t),Ice(t)},Pce=UH,Dce=Oce,xce=op,Nce=I$,Rce=P$,Mce=M$,L$=function(){var t=Mce(this),r=Rce(xce(t,"length")),i=1;arguments.length>0&&typeof arguments[0]<"u"&&(i=Nce(arguments[0]));var n=Pce(t,0);return Dce(n,t,r,0,i),n},Lce=L$,B$=function(){return Array.prototype.flat||Lce},HA,H$;function Bce(){if(H$)return HA;H$=1;var e=Ha,t=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",r=t&&Array.prototype[Symbol.unscopables],i=TypeError;return HA=function(o){if(typeof o!="string"||!o)throw new i("method must be a non-empty string");if(!e(Array.prototype,o))throw new i("method must be on Array.prototype");t&&(r[o]=!0)},HA}var $A,F$;function Hce(){if(F$)return $A;F$=1;var e=Ln,t=Bce(),r=B$;return $A=function(){var n=r();return e(Array.prototype,{flat:n},{flat:function(){return Array.prototype.flat!==n}}),t("flat"),n},$A}var $ce=Ln,Fce=$a,jce=L$,j$=B$,Uce=j$(),Gce=Hce(),U$=Fce(Uce);$ce(U$,{getPolyfill:j$,implementation:jce,shim:Gce});var sp=U$,G$={}.hasOwnProperty,FA=Function.prototype.call,Ku=FA.bind?FA.bind(G$):function(e,t){return FA.call(G$,e,t)},lp={},jA={exports:{}},z$=function(e){return e!==e},V$=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||z$(t)&&z$(r))},zce=V$,W$=function(){return typeof Object.is=="function"?Object.is:zce},Vce=W$,Wce=Ln,Yce=function(){var t=Vce();return Wce(Object,{is:t},{is:function(){return Object.is!==t}}),t},qce=Ln,Xce=$a,Kce=V$,Y$=W$,Zce=Yce,q$=Xce(Y$(),Object);qce(q$,{getPolyfill:Y$,implementation:Kce,shim:Zce});var UA=q$;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=n(UA),i=n(Ku);function n(s){return s&&s.__esModule?s:{default:s}}function o(s){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},o(s)}function a(s,c){if((0,r.default)(s,c))return!0;if(!s||!c||o(s)!=="object"||o(c)!=="object")return!1;var u=Object.keys(s),l=Object.keys(c);if(u.length!==l.length)return!1;u.sort(),l.sort();for(var h=0;h<u.length;h+=1)if(!(0,i.default)(c,u[h])||!(0,r.default)(s[u[h]],c[u[h]]))return!1;return!0}e.exports=t.default})(jA,jA.exports);var X$=jA.exports,Qce=qu,K$=qn,Jce=K$("Object.prototype.propertyIsEnumerable"),eue=K$("Array.prototype.push"),Z$=function(t){var r=Qce(t),i=[];for(var n in r)Jce(r,n)&&eue(i,[n,r[n]]);return i},tue=Z$,Q$=function(){return typeof Object.entries=="function"?Object.entries:tue},rue=Q$,nue=Ln,iue=function(){var t=rue();return nue(Object,{entries:t},{entries:function(){return Object.entries!==t}}),t},oue=Ln,aue=$a,sue=Z$,J$=Q$,lue=iue,eF=aue(J$(),Object);oue(eF,{getPolyfill:J$,implementation:sue,shim:lue});var tF=eF,cue=Qt,rF=cue("%TypeError%"),uue=Ha,fue=Is(),hue=vn(),due=function(t,r){if(hue(t)!=="Object")throw new rF("Assertion failed: `O` must be an Object");if(!fue(r))throw new rF("Assertion failed: `P` must be a Property Key");return uue(t,r)},cp=function(){return typeof function(){}.name=="string"},up=Object.getOwnPropertyDescriptor;if(up)try{up([],"length")}catch{up=null}cp.functionsHaveConfigurableNames=function(){if(!cp()||!up)return!1;var t=up(function(){},"name");return!!t&&!!t.configurable};var pue=Function.prototype.bind;cp.boundFunctionsHaveNames=function(){return cp()&&typeof pue=="function"&&function(){}.bind().name!==""};var nF=cp,iF=hA,mue=due,gue=nF(),GA=qn,oF=GA("Function.prototype.toString"),aF=GA("String.prototype.match"),zA=GA("Object.prototype.toString"),vue=/^class /,yue=function(t){if(iF(t)||typeof t!="function")return!1;try{var r=aF(oF(t),vue);return!!r}catch{}return!1},bue=/\s*function\s+([^(\s]*)\s*/,_ue=!(0 in[,]),Tue="[object Object]",Eue="[object HTMLAllCollection]",Sue=Function.prototype,sF=function(){return!1};if(typeof document=="object"){var wue=document.all;zA(wue)===zA(document.all)&&(sF=function(t){if((_ue||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=zA(t);return(r===Eue||r===Tue)&&t("")==null}catch{}return!1})}var lF=function(){if(sF(this)||!yue(this)&&!iF(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(gue&&mue(this,"name"))return this.name;if(this===Sue)return"";var t=oF(this),r=aF(t,bue),i=r&&r[1];return i},Aue=lF,cF=function(){return Aue},Oue=Ln.supportsDescriptors,kue=nF(),Iue=cF,uF=Object.defineProperty,Cue=TypeError,Pue=function(){var t=Iue();if(kue)return t;if(!Oue)throw new Cue("Shimming Function.prototype.name support requires ES5 property descriptor support.");var r=Function.prototype;return uF(r,"name",{configurable:!0,enumerable:!1,get:function(){var i=t.call(this);return this!==r&&uF(this,"name",{configurable:!0,enumerable:!1,value:i,writable:!1}),i}}),t},Due=Ln,xue=$a,fF=lF,Nue=cF,Rue=Pue,hF=xue(fF);Due(hF,{getPolyfill:Nue,implementation:fF,shim:Rue});var VA=hF,dF={},pF={};Object.defineProperty(pF,"__esModule",{value:!0});var Uy={},Zu={},Gy=De&&De.__assign||function(){return Gy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Gy.apply(this,arguments)};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.flatten=void 0;var Mue={xml:!1,decodeEntities:!0};Zu.default=Mue;var mF={_useHtmlParser2:!0,xmlMode:!0};function Lue(e){return e?.xml?typeof e.xml=="boolean"?mF:Gy(Gy({},mF),e.xml):e??void 0}Zu.flatten=Lue;var Gr={},po={},Pi={},Hn={},Qu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function r(i){return i.type===t.Tag||i.type===t.Script||i.type===t.Style}e.isTag=r,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(Qu);var Ft={},Cs=De&&De.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),fp=De&&De.__assign||function(){return fp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},fp.apply(this,arguments)};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.cloneNode=Ft.hasChildren=Ft.isDocument=Ft.isDirective=Ft.isComment=Ft.isText=Ft.isCDATA=Ft.isTag=Ft.Element=Ft.Document=Ft.CDATA=Ft.NodeWithChildren=Ft.ProcessingInstruction=Ft.Comment=Ft.Text=Ft.DataNode=Ft.Node=void 0;var di=Qu,WA=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),YA(this,t)},e}();Ft.Node=WA;var zy=function(e){Cs(t,e);function t(r){var i=e.call(this)||this;return i.data=r,i}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),t}(WA);Ft.DataNode=zy;var gF=function(e){Cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=di.ElementType.Text,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(zy);Ft.Text=gF;var vF=function(e){Cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=di.ElementType.Comment,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(zy);Ft.Comment=vF;var yF=function(e){Cs(t,e);function t(r,i){var n=e.call(this,i)||this;return n.name=r,n.type=di.ElementType.Directive,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(zy);Ft.ProcessingInstruction=yF;var Vy=function(e){Cs(t,e);function t(r){var i=e.call(this)||this;return i.children=r,i}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),t}(WA);Ft.NodeWithChildren=Vy;var bF=function(e){Cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=di.ElementType.CDATA,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Vy);Ft.CDATA=bF;var _F=function(e){Cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=di.ElementType.Root,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Vy);Ft.Document=_F;var TF=function(e){Cs(t,e);function t(r,i,n,o){n===void 0&&(n=[]),o===void 0&&(o=r==="script"?di.ElementType.Script:r==="style"?di.ElementType.Style:di.ElementType.Tag);var a=e.call(this,n)||this;return a.name=r,a.attribs=i,a.type=o,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(i){var n,o;return{name:i,value:r.attribs[i],namespace:(n=r["x-attribsNamespace"])===null||n===void 0?void 0:n[i],prefix:(o=r["x-attribsPrefix"])===null||o===void 0?void 0:o[i]}})},enumerable:!1,configurable:!0}),t}(Vy);Ft.Element=TF;function EF(e){return(0,di.isTag)(e)}Ft.isTag=EF;function SF(e){return e.type===di.ElementType.CDATA}Ft.isCDATA=SF;function wF(e){return e.type===di.ElementType.Text}Ft.isText=wF;function AF(e){return e.type===di.ElementType.Comment}Ft.isComment=AF;function OF(e){return e.type===di.ElementType.Directive}Ft.isDirective=OF;function kF(e){return e.type===di.ElementType.Root}Ft.isDocument=kF;function Bue(e){return Object.prototype.hasOwnProperty.call(e,"children")}Ft.hasChildren=Bue;function YA(e,t){t===void 0&&(t=!1);var r;if(wF(e))r=new gF(e.data);else if(AF(e))r=new vF(e.data);else if(EF(e)){var i=t?qA(e.children):[],n=new TF(e.name,fp({},e.attribs),i);i.forEach(function(c){return c.parent=n}),e.namespace!=null&&(n.namespace=e.namespace),e["x-attribsNamespace"]&&(n["x-attribsNamespace"]=fp({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(n["x-attribsPrefix"]=fp({},e["x-attribsPrefix"])),r=n}else if(SF(e)){var i=t?qA(e.children):[],o=new bF(i);i.forEach(function(u){return u.parent=o}),r=o}else if(kF(e)){var i=t?qA(e.children):[],a=new _F(i);i.forEach(function(u){return u.parent=a}),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),r=a}else if(OF(e)){var s=new yF(e.name,e.data);e["x-name"]!=null&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),r=s}else throw new Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}Ft.cloneNode=YA;function qA(e){for(var t=e.map(function(i){return YA(i,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}(function(e){var t=De&&De.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,h)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),r=De&&De.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&t(c,s,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var i=Qu,n=Ft;r(Ft,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function s(c,u,l){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(l=u,u=o),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??o,this.elementCB=l??null}return s.prototype.onparserinit=function(c){this.parser=c},s.prototype.onreset=function(){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},s.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},s.prototype.onerror=function(c){this.handleCallback(c)},s.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},s.prototype.onopentag=function(c,u){var l=this.options.xmlMode?i.ElementType.Tag:void 0,h=new n.Element(c,u,void 0,l);this.addNode(h),this.tagStack.push(h)},s.prototype.ontext=function(c){var u=this.lastNode;if(u&&u.type===i.ElementType.Text)u.data+=c,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var l=new n.Text(c);this.addNode(l),this.lastNode=l}},s.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=c;return}var u=new n.Comment(c);this.addNode(u),this.lastNode=u},s.prototype.oncommentend=function(){this.lastNode=null},s.prototype.oncdatastart=function(){var c=new n.Text(""),u=new n.CDATA([c]);this.addNode(u),c.parent=u,this.lastNode=c},s.prototype.oncdataend=function(){this.lastNode=null},s.prototype.onprocessinginstruction=function(c,u){var l=new n.ProcessingInstruction(c,u);this.addNode(l)},s.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},s.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],l=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),l&&(c.prev=l,l.next=c),c.parent=u,this.lastNode=null},s}();e.DomHandler=a,e.default=a})(Hn);var Ju={},IF={},Zl={},XA={};Object.defineProperty(XA,"__esModule",{value:!0}),XA.default=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(function(e){return e.charCodeAt(0)}));var KA={};Object.defineProperty(KA,"__esModule",{value:!0}),KA.default=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(function(e){return e.charCodeAt(0)}));var ZA={};(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);e.fromCodePoint=(t=String.fromCodePoint)!==null&&t!==void 0?t:function(o){var a="";return o>65535&&(o-=65536,a+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),a+=String.fromCharCode(o),a};function i(o){var a;return o>=55296&&o<=57343||o>1114111?65533:(a=r.get(o))!==null&&a!==void 0?a:o}e.replaceCodePoint=i;function n(o){return(0,e.fromCodePoint)(i(o))}e.default=n})(ZA),function(e){var t=De&&De.__createBinding||(Object.create?function(w,L,B,A){A===void 0&&(A=B);var M=Object.getOwnPropertyDescriptor(L,B);(!M||("get"in M?!L.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return L[B]}}),Object.defineProperty(w,A,M)}:function(w,L,B,A){A===void 0&&(A=B),w[A]=L[B]}),r=De&&De.__setModuleDefault||(Object.create?function(w,L){Object.defineProperty(w,"default",{enumerable:!0,value:L})}:function(w,L){w.default=L}),i=De&&De.__importStar||function(w){if(w&&w.__esModule)return w;var L={};if(w!=null)for(var B in w)B!=="default"&&Object.prototype.hasOwnProperty.call(w,B)&&t(L,w,B);return r(L,w),L},n=De&&De.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var o=n(XA);e.htmlDecodeTree=o.default;var a=n(KA);e.xmlDecodeTree=a.default;var s=i(ZA);e.decodeCodePoint=s.default;var c=ZA;Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var u;(function(w){w[w.NUM=35]="NUM",w[w.SEMI=59]="SEMI",w[w.EQUALS=61]="EQUALS",w[w.ZERO=48]="ZERO",w[w.NINE=57]="NINE",w[w.LOWER_A=97]="LOWER_A",w[w.LOWER_F=102]="LOWER_F",w[w.LOWER_X=120]="LOWER_X",w[w.LOWER_Z=122]="LOWER_Z",w[w.UPPER_A=65]="UPPER_A",w[w.UPPER_F=70]="UPPER_F",w[w.UPPER_Z=90]="UPPER_Z"})(u||(u={}));var l=32,h;(function(w){w[w.VALUE_LENGTH=49152]="VALUE_LENGTH",w[w.BRANCH_LENGTH=16256]="BRANCH_LENGTH",w[w.JUMP_TABLE=127]="JUMP_TABLE"})(h=e.BinTrieFlags||(e.BinTrieFlags={}));function f(w){return w>=u.ZERO&&w<=u.NINE}function d(w){return w>=u.UPPER_A&&w<=u.UPPER_F||w>=u.LOWER_A&&w<=u.LOWER_F}function p(w){return w>=u.UPPER_A&&w<=u.UPPER_Z||w>=u.LOWER_A&&w<=u.LOWER_Z||f(w)}function m(w){return w===u.EQUALS||p(w)}var g;(function(w){w[w.EntityStart=0]="EntityStart",w[w.NumericStart=1]="NumericStart",w[w.NumericDecimal=2]="NumericDecimal",w[w.NumericHex=3]="NumericHex",w[w.NamedEntity=4]="NamedEntity"})(g||(g={}));var v;(function(w){w[w.Legacy=0]="Legacy",w[w.Strict=1]="Strict",w[w.Attribute=2]="Attribute"})(v=e.DecodingMode||(e.DecodingMode={}));var _=function(){function w(L,B,A){this.decodeTree=L,this.emitCodePoint=B,this.errors=A,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=v.Strict}return w.prototype.startEntity=function(L){this.decodeMode=L,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},w.prototype.write=function(L,B){switch(this.state){case g.EntityStart:return L.charCodeAt(B)===u.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(L,B+1)):(this.state=g.NamedEntity,this.stateNamedEntity(L,B));case g.NumericStart:return this.stateNumericStart(L,B);case g.NumericDecimal:return this.stateNumericDecimal(L,B);case g.NumericHex:return this.stateNumericHex(L,B);case g.NamedEntity:return this.stateNamedEntity(L,B)}},w.prototype.stateNumericStart=function(L,B){return B>=L.length?-1:(L.charCodeAt(B)|l)===u.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(L,B+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(L,B))},w.prototype.addToNumericResult=function(L,B,A,M){if(B!==A){var j=A-B;this.result=this.result*Math.pow(M,j)+parseInt(L.substr(B,j),M),this.consumed+=j}},w.prototype.stateNumericHex=function(L,B){for(var A=B;B<L.length;){var M=L.charCodeAt(B);if(f(M)||d(M))B+=1;else return this.addToNumericResult(L,A,B,16),this.emitNumericEntity(M,3)}return this.addToNumericResult(L,A,B,16),-1},w.prototype.stateNumericDecimal=function(L,B){for(var A=B;B<L.length;){var M=L.charCodeAt(B);if(f(M))B+=1;else return this.addToNumericResult(L,A,B,10),this.emitNumericEntity(M,2)}return this.addToNumericResult(L,A,B,10),-1},w.prototype.emitNumericEntity=function(L,B){var A;if(this.consumed<=B)return(A=this.errors)===null||A===void 0||A.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(L===u.SEMI)this.consumed+=1;else if(this.decodeMode===v.Strict)return 0;return this.emitCodePoint((0,s.replaceCodePoint)(this.result),this.consumed),this.errors&&(L!==u.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},w.prototype.stateNamedEntity=function(L,B){for(var A=this.decodeTree,M=A[this.treeIndex],j=(M&h.VALUE_LENGTH)>>14;B<L.length;B++,this.excess++){var W=L.charCodeAt(B);if(this.treeIndex=b(A,M,this.treeIndex+Math.max(1,j),W),this.treeIndex<0)return this.result===0||this.decodeMode===v.Attribute&&(j===0||m(W))?0:this.emitNotTerminatedNamedEntity();if(M=A[this.treeIndex],j=(M&h.VALUE_LENGTH)>>14,j!==0){if(W===u.SEMI)return this.emitNamedEntityData(this.treeIndex,j,this.consumed+this.excess);this.decodeMode!==v.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},w.prototype.emitNotTerminatedNamedEntity=function(){var L,B=this,A=B.result,M=B.decodeTree,j=(M[A]&h.VALUE_LENGTH)>>14;return this.emitNamedEntityData(A,j,this.consumed),(L=this.errors)===null||L===void 0||L.missingSemicolonAfterCharacterReference(),this.consumed},w.prototype.emitNamedEntityData=function(L,B,A){var M=this.decodeTree;return this.emitCodePoint(B===1?M[L]&~h.VALUE_LENGTH:M[L+1],A),B===3&&this.emitCodePoint(M[L+2],A),A},w.prototype.end=function(){var L;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==v.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(L=this.errors)===null||L===void 0||L.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},w}();e.EntityDecoder=_;function y(w){var L="",B=new _(w,function(A){return L+=(0,s.fromCodePoint)(A)});return function(M,j){for(var W=0,K=0;(K=M.indexOf("&",K))>=0;){L+=M.slice(W,K),B.startEntity(j);var oe=B.write(M,K+1);if(oe<0){W=K+B.end();break}W=K+oe,K=oe===0?W+1:W}var fe=L+M.slice(W);return L="",fe}}function b(w,L,B,A){var M=(L&h.BRANCH_LENGTH)>>7,j=L&h.JUMP_TABLE;if(M===0)return j!==0&&A===j?B:-1;if(j){var W=A-j;return W<0||W>=M?-1:w[B+W]-1}for(var K=B,oe=K+M-1;K<=oe;){var fe=K+oe>>>1,Ae=w[fe];if(Ae<A)K=fe+1;else if(Ae>A)oe=fe-1;else return w[fe+M]}return-1}e.determineBranch=b;var T=y(o.default),S=y(a.default);function k(w,L){return L===void 0&&(L=v.Legacy),T(w,L)}e.decodeHTML=k;function O(w){return T(w,v.Attribute)}e.decodeHTMLAttribute=O;function D(w){return T(w,v.Strict)}e.decodeHTMLStrict=D;function R(w){return S(w,v.Strict)}e.decodeXML=R}(Zl);var Ql={},QA={};Object.defineProperty(QA,"__esModule",{value:!0});function Wy(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}QA.default=new Map(Wy([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(Wy([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(Wy([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(Wy([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var ef={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);e.getCodePoint=String.prototype.codePointAt!=null?function(n,o){return n.codePointAt(o)}:function(n,o){return(n.charCodeAt(o)&64512)===55296?(n.charCodeAt(o)-55296)*1024+n.charCodeAt(o+1)-56320+65536:n.charCodeAt(o)};function r(n){for(var o="",a=0,s;(s=e.xmlReplacer.exec(n))!==null;){var c=s.index,u=n.charCodeAt(c),l=t.get(u);l!==void 0?(o+=n.substring(a,c)+l,a=c+1):(o+="".concat(n.substring(a,c),"&#x").concat((0,e.getCodePoint)(n,c).toString(16),";"),a=e.xmlReplacer.lastIndex+=+((u&64512)===55296))}return o+n.substr(a)}e.encodeXML=r,e.escape=r;function i(n,o){return function(s){for(var c,u=0,l="";c=n.exec(s);)u!==c.index&&(l+=s.substring(u,c.index)),l+=o.get(c[0].charCodeAt(0)),u=c.index+1;return l+s.substring(u)}}e.escapeUTF8=i(/[&<>'"]/g,t),e.escapeAttribute=i(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=i(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(ef);var Hue=De&&De.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.encodeNonAsciiHTML=Ql.encodeHTML=void 0;var $ue=Hue(QA),CF=ef,Fue=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function jue(e){return PF(Fue,e)}Ql.encodeHTML=jue;function Uue(e){return PF(CF.xmlReplacer,e)}Ql.encodeNonAsciiHTML=Uue;function PF(e,t){for(var r="",i=0,n;(n=e.exec(t))!==null;){var o=n.index;r+=t.substring(i,o);var a=t.charCodeAt(o),s=$ue.default.get(a);if(typeof s=="object"){if(o+1<t.length){var c=t.charCodeAt(o+1),u=typeof s.n=="number"?s.n===c?s.o:void 0:s.n.get(c);if(u!==void 0){r+=u,i=e.lastIndex+=1;continue}}s=s.v}if(s!==void 0)r+=s,i=o+1;else{var l=(0,CF.getCodePoint)(t,o);r+="&#x".concat(l.toString(16),";"),i=e.lastIndex+=+(l!==a)}}return r+t.substr(i)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t=Zl,r=Ql,i=ef,n;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(n=e.EntityLevel||(e.EntityLevel={}));var o;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(o=e.EncodingMode||(e.EncodingMode={}));function a(f,d){d===void 0&&(d=n.XML);var p=typeof d=="number"?d:d.level;if(p===n.HTML){var m=typeof d=="object"?d.mode:void 0;return(0,t.decodeHTML)(f,m)}return(0,t.decodeXML)(f)}e.decode=a;function s(f,d){var p;d===void 0&&(d=n.XML);var m=typeof d=="number"?{level:d}:d;return(p=m.mode)!==null&&p!==void 0||(m.mode=t.DecodingMode.Strict),a(f,m)}e.decodeStrict=s;function c(f,d){d===void 0&&(d=n.XML);var p=typeof d=="number"?{level:d}:d;return p.mode===o.UTF8?(0,i.escapeUTF8)(f):p.mode===o.Attribute?(0,i.escapeAttribute)(f):p.mode===o.Text?(0,i.escapeText)(f):p.level===n.HTML?p.mode===o.ASCII?(0,r.encodeNonAsciiHTML)(f):(0,r.encodeHTML)(f):(0,i.encodeXML)(f)}e.encode=c;var u=ef;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return u.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return u.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return u.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return u.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return u.escapeText}});var l=Ql;Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return l.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return l.encodeHTML}});var h=Zl;Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return h.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return h.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return h.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return h.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return h.decodeXML}})})(IF);var tf={};Object.defineProperty(tf,"__esModule",{value:!0}),tf.attributeNames=tf.elementNames=void 0,tf.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),tf.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}));var rf=De&&De.__assign||function(){return rf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},rf.apply(this,arguments)},Gue=De&&De.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),zue=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Vue=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Gue(t,e,r);return zue(t,e),t};Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.render=void 0;var Fa=Vue(Qu),Yy=IF,DF=tf,Wue=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Yue(e){return e.replace(/"/g,"&quot;")}function que(e,t){var r;if(e){var i=((r=t.encodeEntities)!==null&&r!==void 0?r:t.decodeEntities)===!1?Yue:t.xmlMode||t.encodeEntities!=="utf8"?Yy.encodeXML:Yy.escapeAttribute;return Object.keys(e).map(function(n){var o,a,s=(o=e[n])!==null&&o!==void 0?o:"";return t.xmlMode==="foreign"&&(n=(a=DF.attributeNames.get(n))!==null&&a!==void 0?a:n),!t.emptyAttrs&&!t.xmlMode&&s===""?n:"".concat(n,'="').concat(i(s),'"')}).join(" ")}}var xF=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function qy(e,t){t===void 0&&(t={});for(var r=("length"in e)?e:[e],i="",n=0;n<r.length;n++)i+=Xue(r[n],t);return i}Ju.render=qy,Ju.default=qy;function Xue(e,t){switch(e.type){case Fa.Root:return qy(e.children,t);case Fa.Doctype:case Fa.Directive:return Jue(e);case Fa.Comment:return rfe(e);case Fa.CDATA:return tfe(e);case Fa.Script:case Fa.Style:case Fa.Tag:return Que(e,t);case Fa.Text:return efe(e,t)}}var Kue=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Zue=new Set(["svg","math"]);function Que(e,t){var r;t.xmlMode==="foreign"&&(e.name=(r=DF.elementNames.get(e.name))!==null&&r!==void 0?r:e.name,e.parent&&Kue.has(e.parent.name)&&(t=rf(rf({},t),{xmlMode:!1}))),!t.xmlMode&&Zue.has(e.name)&&(t=rf(rf({},t),{xmlMode:"foreign"}));var i="<".concat(e.name),n=que(e.attribs,t);return n&&(i+=" ".concat(n)),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&xF.has(e.name))?(t.xmlMode||(i+=" "),i+="/>"):(i+=">",e.children.length>0&&(i+=qy(e.children,t)),(t.xmlMode||!xF.has(e.name))&&(i+="</".concat(e.name,">"))),i}function Jue(e){return"<".concat(e.data,">")}function efe(e,t){var r,i=e.data||"";return((r=t.encodeEntities)!==null&&r!==void 0?r:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&Wue.has(e.parent.name))&&(i=t.xmlMode||t.encodeEntities!=="utf8"?(0,Yy.encodeXML)(i):(0,Yy.escapeText)(i)),i}function tfe(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}function rfe(e){return"<!--".concat(e.data,"-->")}var nfe=De&&De.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.innerText=Pi.textContent=Pi.getText=Pi.getInnerHTML=Pi.getOuterHTML=void 0;var qo=Hn,ife=nfe(Ju),ofe=Qu;function NF(e,t){return(0,ife.default)(e,t)}Pi.getOuterHTML=NF;function afe(e,t){return(0,qo.hasChildren)(e)?e.children.map(function(r){return NF(r,t)}).join(""):""}Pi.getInnerHTML=afe;function Xy(e){return Array.isArray(e)?e.map(Xy).join(""):(0,qo.isTag)(e)?e.name==="br"?`
`:Xy(e.children):(0,qo.isCDATA)(e)?Xy(e.children):(0,qo.isText)(e)?e.data:""}Pi.getText=Xy;function JA(e){return Array.isArray(e)?e.map(JA).join(""):(0,qo.hasChildren)(e)&&!(0,qo.isComment)(e)?JA(e.children):(0,qo.isText)(e)?e.data:""}Pi.textContent=JA;function eO(e){return Array.isArray(e)?e.map(eO).join(""):(0,qo.hasChildren)(e)&&(e.type===ofe.ElementType.Tag||(0,qo.isCDATA)(e))?eO(e.children):(0,qo.isText)(e)?e.data:""}Pi.innerText=eO;var un={};Object.defineProperty(un,"__esModule",{value:!0}),un.prevElementSibling=un.nextElementSibling=un.getName=un.hasAttrib=un.getAttributeValue=un.getSiblings=un.getParent=un.getChildren=void 0;var tO=Hn;function RF(e){return(0,tO.hasChildren)(e)?e.children:[]}un.getChildren=RF;function MF(e){return e.parent||null}un.getParent=MF;function sfe(e){var t,r,i=MF(e);if(i!=null)return RF(i);for(var n=[e],o=e.prev,a=e.next;o!=null;)n.unshift(o),t=o,o=t.prev;for(;a!=null;)n.push(a),r=a,a=r.next;return n}un.getSiblings=sfe;function lfe(e,t){var r;return(r=e.attribs)===null||r===void 0?void 0:r[t]}un.getAttributeValue=lfe;function cfe(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}un.hasAttrib=cfe;function ufe(e){return e.name}un.getName=ufe;function ffe(e){for(var t,r=e.next;r!==null&&!(0,tO.isTag)(r);)t=r,r=t.next;return r}un.nextElementSibling=ffe;function hfe(e){for(var t,r=e.prev;r!==null&&!(0,tO.isTag)(r);)t=r,r=t.prev;return r}un.prevElementSibling=hfe;var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.prepend=pi.prependChild=pi.append=pi.appendChild=pi.replaceElement=pi.removeElement=void 0;function hp(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,r=t.lastIndexOf(e);r>=0&&t.splice(r,1)}e.next=null,e.prev=null,e.parent=null}pi.removeElement=hp;function dfe(e,t){var r=t.prev=e.prev;r&&(r.next=t);var i=t.next=e.next;i&&(i.prev=t);var n=t.parent=e.parent;if(n){var o=n.children;o[o.lastIndexOf(e)]=t,e.parent=null}}pi.replaceElement=dfe;function pfe(e,t){if(hp(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null}pi.appendChild=pfe;function mfe(e,t){hp(t);var r=e.parent,i=e.next;if(t.next=i,t.prev=e,e.next=t,t.parent=r,i){if(i.prev=t,r){var n=r.children;n.splice(n.lastIndexOf(i),0,t)}}else r&&r.children.push(t)}pi.append=mfe;function gfe(e,t){if(hp(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){var r=e.children[1];r.prev=t,t.next=r}else t.next=null}pi.prependChild=gfe;function vfe(e,t){hp(t);var r=e.parent;if(r){var i=r.children;i.splice(i.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}pi.prepend=vfe;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.findAll=Xn.existsOne=Xn.findOne=Xn.findOneChild=Xn.find=Xn.filter=void 0;var Ky=Hn;function yfe(e,t,r,i){return r===void 0&&(r=!0),i===void 0&&(i=1/0),LF(e,Array.isArray(t)?t:[t],r,i)}Xn.filter=yfe;function LF(e,t,r,i){for(var n=[],o=[t],a=[0];;){if(a[0]>=o[0].length){if(a.length===1)return n;o.shift(),a.shift();continue}var s=o[0][a[0]++];if(e(s)&&(n.push(s),--i<=0))return n;r&&(0,Ky.hasChildren)(s)&&s.children.length>0&&(a.unshift(0),o.unshift(s.children))}}Xn.find=LF;function bfe(e,t){return t.find(e)}Xn.findOneChild=bfe;function BF(e,t,r){r===void 0&&(r=!0);for(var i=null,n=0;n<t.length&&!i;n++){var o=t[n];if((0,Ky.isTag)(o))e(o)?i=o:r&&o.children.length>0&&(i=BF(e,o.children,!0));else continue}return i}Xn.findOne=BF;function HF(e,t){return t.some(function(r){return(0,Ky.isTag)(r)&&(e(r)||HF(e,r.children))})}Xn.existsOne=HF;function _fe(e,t){for(var r=[],i=[t],n=[0];;){if(n[0]>=i[0].length){if(i.length===1)return r;i.shift(),n.shift();continue}var o=i[0][n[0]++];(0,Ky.isTag)(o)&&(e(o)&&r.push(o),o.children.length>0&&(n.unshift(0),i.unshift(o.children)))}}Xn.findAll=_fe;var Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Di.getElementsByTagType=Di.getElementsByTagName=Di.getElementById=Di.getElements=Di.testElement=void 0;var Jl=Hn,Zy=Xn,Qy={tag_name:function(e){return typeof e=="function"?function(t){return(0,Jl.isTag)(t)&&e(t.name)}:e==="*"?Jl.isTag:function(t){return(0,Jl.isTag)(t)&&t.name===e}},tag_type:function(e){return typeof e=="function"?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return typeof e=="function"?function(t){return(0,Jl.isText)(t)&&e(t.data)}:function(t){return(0,Jl.isText)(t)&&t.data===e}}};function $F(e,t){return typeof t=="function"?function(r){return(0,Jl.isTag)(r)&&t(r.attribs[e])}:function(r){return(0,Jl.isTag)(r)&&r.attribs[e]===t}}function Tfe(e,t){return function(r){return e(r)||t(r)}}function FF(e){var t=Object.keys(e).map(function(r){var i=e[r];return Object.prototype.hasOwnProperty.call(Qy,r)?Qy[r](i):$F(r,i)});return t.length===0?null:t.reduce(Tfe)}function Efe(e,t){var r=FF(e);return r?r(t):!0}Di.testElement=Efe;function Sfe(e,t,r,i){i===void 0&&(i=1/0);var n=FF(e);return n?(0,Zy.filter)(n,t,r,i):[]}Di.getElements=Sfe;function wfe(e,t,r){return r===void 0&&(r=!0),Array.isArray(t)||(t=[t]),(0,Zy.findOne)($F("id",e),t,r)}Di.getElementById=wfe;function Afe(e,t,r,i){return r===void 0&&(r=!0),i===void 0&&(i=1/0),(0,Zy.filter)(Qy.tag_name(e),t,r,i)}Di.getElementsByTagName=Afe;function Ofe(e,t,r,i){return r===void 0&&(r=!0),i===void 0&&(i=1/0),(0,Zy.filter)(Qy.tag_type(e),t,r,i)}Di.getElementsByTagType=Ofe;var jF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueSort=e.compareDocumentPosition=e.DocumentPosition=e.removeSubsets=void 0;var t=Hn;function r(a){for(var s=a.length;--s>=0;){var c=a[s];if(s>0&&a.lastIndexOf(c,s-1)>=0){a.splice(s,1);continue}for(var u=c.parent;u;u=u.parent)if(a.includes(u)){a.splice(s,1);break}}return a}e.removeSubsets=r;var i;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(i=e.DocumentPosition||(e.DocumentPosition={}));function n(a,s){var c=[],u=[];if(a===s)return 0;for(var l=(0,t.hasChildren)(a)?a:a.parent;l;)c.unshift(l),l=l.parent;for(l=(0,t.hasChildren)(s)?s:s.parent;l;)u.unshift(l),l=l.parent;for(var h=Math.min(c.length,u.length),f=0;f<h&&c[f]===u[f];)f++;if(f===0)return i.DISCONNECTED;var d=c[f-1],p=d.children,m=c[f],g=u[f];return p.indexOf(m)>p.indexOf(g)?d===s?i.FOLLOWING|i.CONTAINED_BY:i.FOLLOWING:d===a?i.PRECEDING|i.CONTAINS:i.PRECEDING}e.compareDocumentPosition=n;function o(a){return a=a.filter(function(s,c,u){return!u.includes(s,c+1)}),a.sort(function(s,c){var u=n(s,c);return u&i.PRECEDING?-1:u&i.FOLLOWING?1:0}),a}e.uniqueSort=o})(jF);var Jy={};Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.getFeed=void 0;var kfe=Pi,dp=Di;function Ife(e){var t=eb(Nfe,e);return t?t.name==="feed"?Cfe(t):Pfe(t):null}Jy.getFeed=Ife;function Cfe(e){var t,r=e.children,i={type:"atom",items:(0,dp.getElementsByTagName)("entry",r).map(function(a){var s,c=a.children,u={media:UF(c)};mi(u,"id","id",c),mi(u,"title","title",c);var l=(s=eb("link",c))===null||s===void 0?void 0:s.attribs.href;l&&(u.link=l);var h=Ps("summary",c)||Ps("content",c);h&&(u.description=h);var f=Ps("updated",c);return f&&(u.pubDate=new Date(f)),u})};mi(i,"id","id",r),mi(i,"title","title",r);var n=(t=eb("link",r))===null||t===void 0?void 0:t.attribs.href;n&&(i.link=n),mi(i,"description","subtitle",r);var o=Ps("updated",r);return o&&(i.updated=new Date(o)),mi(i,"author","email",r,!0),i}function Pfe(e){var t,r,i=(r=(t=eb("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&r!==void 0?r:[],n={type:e.name.substr(0,3),id:"",items:(0,dp.getElementsByTagName)("item",e.children).map(function(a){var s=a.children,c={media:UF(s)};mi(c,"id","guid",s),mi(c,"title","title",s),mi(c,"link","link",s),mi(c,"description","description",s);var u=Ps("pubDate",s)||Ps("dc:date",s);return u&&(c.pubDate=new Date(u)),c})};mi(n,"title","title",i),mi(n,"link","link",i),mi(n,"description","description",i);var o=Ps("lastBuildDate",i);return o&&(n.updated=new Date(o)),mi(n,"author","managingEditor",i,!0),n}var Dfe=["url","type","lang"],xfe=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function UF(e){return(0,dp.getElementsByTagName)("media:content",e).map(function(t){for(var r=t.attribs,i={medium:r.medium,isDefault:!!r.isDefault},n=0,o=Dfe;n<o.length;n++){var a=o[n];r[a]&&(i[a]=r[a])}for(var s=0,c=xfe;s<c.length;s++){var a=c[s];r[a]&&(i[a]=parseInt(r[a],10))}return r.expression&&(i.expression=r.expression),i})}function eb(e,t){return(0,dp.getElementsByTagName)(e,t,!0,1)[0]}function Ps(e,t,r){return r===void 0&&(r=!1),(0,kfe.textContent)((0,dp.getElementsByTagName)(e,t,r,1)).trim()}function mi(e,t,r,i,n){n===void 0&&(n=!1);var o=Ps(r,i,n);o&&(e[t]=o)}function Nfe(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}(function(e){var t=De&&De.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a);var c=Object.getOwnPropertyDescriptor(o,a);(!c||("get"in c?!o.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(n,s,c)}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=De&&De.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,r(Pi,e),r(un,e),r(pi,e),r(Xn,e),r(Di,e),r(jF,e),r(Jy,e);var i=Hn;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})})(po);var ec=De&&De.__assign||function(){return ec=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ec.apply(this,arguments)},Rfe=De&&De.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Mfe=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Lfe=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Rfe(t,e,r);return Mfe(t,e),t};Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.merge=Gr.contains=Gr.root=Gr.parseHTML=Gr.text=Gr.xml=Gr.html=void 0;var Bfe=po,rO=Lfe(Zu);function GF(e,t,r){return e?e(t??e._root.children,null,void 0,r).toString():""}function Hfe(e,t){return!t&&typeof e=="object"&&e!=null&&!("length"in e)&&!("type"in e)}function $fe(e,t){var r=Hfe(e)?(t=e,void 0):e,i=ec(ec(ec({},rO.default),this===null||this===void 0?void 0:this._options),(0,rO.flatten)(t??{}));return GF(this,r,i)}Gr.html=$fe;function Ffe(e){var t=ec(ec({},this._options),{xmlMode:!0});return GF(this,e,t)}Gr.xml=Ffe;function jfe(e){for(var t=e||(this?this.root():[]),r="",i=0;i<t.length;i++)r+=(0,Bfe.textContent)(t[i]);return r}Gr.text=jfe;function Ufe(e,t,r){if(r===void 0&&(r=typeof t=="boolean"?t:!1),!e||typeof e!="string")return null;typeof t=="boolean"&&(r=t);var i=this.load(e,rO.default,!1);return r||i("script").remove(),i.root()[0].children.slice()}Gr.parseHTML=Ufe;function Gfe(){return this(this._root)}Gr.root=Gfe;function zfe(e,t){if(t===e)return!1;for(var r=t;r&&r!==r.parent;)if(r=r.parent,r===e)return!0;return!1}Gr.contains=zfe;function Vfe(e,t){if(!(!zF(e)||!zF(t))){for(var r=e.length,i=+t.length,n=0;n<i;n++)e[r++]=t[n];return e.length=r,e}}Gr.merge=Vfe;function zF(e){if(Array.isArray(e))return!0;if(typeof e!="object"||!Object.prototype.hasOwnProperty.call(e,"length")||typeof e.length!="number"||e.length<0)return!1;for(var t=0;t<e.length;t++)if(!(t in e))return!1;return!0}var tb={},Xr={},Ds={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isHtml=e.cloneDom=e.domEach=e.cssCase=e.camelCase=e.isCheerio=e.isTag=void 0;var t=Hn,r=Hn;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return r.isTag}});function i(l){return l.cheerio!=null}e.isCheerio=i;function n(l){return l.replace(/[_.-](\w|$)/g,function(h,f){return f.toUpperCase()})}e.camelCase=n;function o(l){return l.replace(/[A-Z]/g,"-$&").toLowerCase()}e.cssCase=o;function a(l,h){for(var f=l.length,d=0;d<f;d++)h(l[d],d);return l}e.domEach=a;function s(l){var h="length"in l?Array.prototype.map.call(l,function(d){return(0,t.cloneNode)(d,!0)}):[(0,t.cloneNode)(l,!0)],f=new t.Document(h);return h.forEach(function(d){d.parent=f}),h}e.cloneDom=s;var c;(function(l){l[l.LowerA=97]="LowerA",l[l.LowerZ=122]="LowerZ",l[l.UpperA=65]="UpperA",l[l.UpperZ=90]="UpperZ",l[l.Exclamation=33]="Exclamation"})(c||(c={}));function u(l){var h=l.indexOf("<");if(h<0||h>l.length-3)return!1;var f=l.charCodeAt(h+1);return(f>=c.LowerA&&f<=c.LowerZ||f>=c.UpperA&&f<=c.UpperZ||f===c.Exclamation)&&l.includes(">",h+2)}e.isHtml=u})(Ds),Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.toggleClass=Xr.removeClass=Xr.addClass=Xr.hasClass=Xr.removeAttr=Xr.val=Xr.data=Xr.prop=Xr.attr=void 0;var VF=Gr,fr=Ds,WF=po,nf=Object.prototype.hasOwnProperty,pp=/\s+/,nO="data-",YF={null:null,true:!0,false:!1},iO=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Wfe=/^{[^]*}$|^\[[^]*]$/;function rb(e,t,r){var i;if(!(!e||!(0,fr.isTag)(e))){if((i=e.attribs)!==null&&i!==void 0||(e.attribs={}),!t)return e.attribs;if(nf.call(e.attribs,t))return!r&&iO.test(t)?t:e.attribs[t];if(e.name==="option"&&t==="value")return(0,VF.text)(e.children);if(e.name==="input"&&(e.attribs.type==="radio"||e.attribs.type==="checkbox")&&t==="value")return"on"}}function of(e,t,r){r===null?ZF(e,t):e.attribs[t]="".concat(r)}function Yfe(e,t){if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e!="string")throw new Error("Bad combination of arguments.");return(0,fr.domEach)(this,function(r,i){(0,fr.isTag)(r)&&of(r,e,t.call(r,i,r.attribs[e]))})}return(0,fr.domEach)(this,function(r){(0,fr.isTag)(r)&&(typeof e=="object"?Object.keys(e).forEach(function(i){var n=e[i];of(r,i,n)}):of(r,e,t))})}return arguments.length>1?this:rb(this[0],e,this.options.xmlMode)}Xr.attr=Yfe;function qF(e,t,r){return t in e?e[t]:!r&&iO.test(t)?rb(e,t,!1)!==void 0:rb(e,t,r)}function oO(e,t,r,i){t in e?e[t]=r:of(e,t,!i&&iO.test(t)?r?"":null:"".concat(r))}function qfe(e,t){var r=this,i;if(typeof e=="string"&&t===void 0){var n=this[0];if(!n||!(0,fr.isTag)(n))return;switch(e){case"style":{var o=this.css(),a=Object.keys(o);return a.forEach(function(c,u){o[u]=c}),o.length=a.length,o}case"tagName":case"nodeName":return n.name.toUpperCase();case"href":case"src":{var s=(i=n.attribs)===null||i===void 0?void 0:i[e];return typeof URL<"u"&&(e==="href"&&(n.tagName==="a"||n.name==="link")||e==="src"&&(n.tagName==="img"||n.tagName==="iframe"||n.tagName==="audio"||n.tagName==="video"||n.tagName==="source"))&&s!==void 0&&this.options.baseURI?new URL(s,this.options.baseURI).href:s}case"innerText":return(0,WF.innerText)(n);case"textContent":return(0,WF.textContent)(n);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return qF(n,e,this.options.xmlMode)}}if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e=="object")throw new Error("Bad combination of arguments.");return(0,fr.domEach)(this,function(c,u){(0,fr.isTag)(c)&&oO(c,e,t.call(c,u,qF(c,e,r.options.xmlMode)),r.options.xmlMode)})}return(0,fr.domEach)(this,function(c){(0,fr.isTag)(c)&&(typeof e=="object"?Object.keys(e).forEach(function(u){var l=e[u];oO(c,u,l,r.options.xmlMode)}):oO(c,e,t,r.options.xmlMode))})}}Xr.prop=qfe;function XF(e,t,r){var i,n=e;(i=n.data)!==null&&i!==void 0||(n.data={}),typeof t=="object"?Object.assign(n.data,t):typeof t=="string"&&r!==void 0&&(n.data[t]=r)}function KF(e,t){var r,i,n;t==null?(r=Object.keys(e.attribs).filter(function(c){return c.startsWith(nO)}),i=r.map(function(c){return(0,fr.camelCase)(c.slice(nO.length))})):(r=[nO+(0,fr.cssCase)(t)],i=[t]);for(var o=0;o<r.length;++o){var a=r[o],s=i[o];if(nf.call(e.attribs,a)&&!nf.call(e.data,s)){if(n=e.attribs[a],nf.call(YF,n))n=YF[n];else if(n===String(Number(n)))n=Number(n);else if(Wfe.test(n))try{n=JSON.parse(n)}catch{}e.data[s]=n}}return t==null?e.data:n}function Xfe(e,t){var r,i=this[0];if(!(!i||!(0,fr.isTag)(i))){var n=i;return(r=n.data)!==null&&r!==void 0||(n.data={}),e?typeof e=="object"||t!==void 0?((0,fr.domEach)(this,function(o){(0,fr.isTag)(o)&&(typeof e=="object"?XF(o,e):XF(o,e,t))}),this):nf.call(n.data,e)?n.data[e]:KF(n,e):KF(n)}}Xr.data=Xfe;function Kfe(e){var t=arguments.length===0,r=this[0];if(!r||!(0,fr.isTag)(r))return t?void 0:this;switch(r.name){case"textarea":return this.text(e);case"select":{var i=this.find("option:selected");if(!t){if(this.attr("multiple")==null&&typeof e=="object")return this;this.find("option").removeAttr("selected");for(var n=typeof e!="object"?[e]:e,o=0;o<n.length;o++)this.find('option[value="'.concat(n[o],'"]')).attr("selected","");return this}return this.attr("multiple")?i.toArray().map(function(a){return(0,VF.text)(a.children)}):i.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}Xr.val=Kfe;function ZF(e,t){!e.attribs||!nf.call(e.attribs,t)||delete e.attribs[t]}function nb(e){return e?e.trim().split(pp):[]}function Zfe(e){for(var t=nb(e),r=function(o){(0,fr.domEach)(i,function(a){(0,fr.isTag)(a)&&ZF(a,t[o])})},i=this,n=0;n<t.length;n++)r(n);return this}Xr.removeAttr=Zfe;function Qfe(e){return this.toArray().some(function(t){var r=(0,fr.isTag)(t)&&t.attribs.class,i=-1;if(r&&e.length)for(;(i=r.indexOf(e,i+1))>-1;){var n=i+e.length;if((i===0||pp.test(r[i-1]))&&(n===r.length||pp.test(r[n])))return!0}return!1})}Xr.hasClass=Qfe;function QF(e){if(typeof e=="function")return(0,fr.domEach)(this,function(u,l){if((0,fr.isTag)(u)){var h=u.attribs.class||"";QF.call([u],e.call(u,l,h))}});if(!e||typeof e!="string")return this;for(var t=e.split(pp),r=this.length,i=0;i<r;i++){var n=this[i];if((0,fr.isTag)(n)){var o=rb(n,"class",!1);if(!o)of(n,"class",t.join(" ").trim());else{for(var a=" ".concat(o," "),s=0;s<t.length;s++){var c="".concat(t[s]," ");a.includes(" ".concat(c))||(a+=c)}of(n,"class",a.trim())}}}return this}Xr.addClass=QF;function JF(e){if(typeof e=="function")return(0,fr.domEach)(this,function(n,o){(0,fr.isTag)(n)&&JF.call([n],e.call(n,o,n.attribs.class||""))});var t=nb(e),r=t.length,i=arguments.length===0;return(0,fr.domEach)(this,function(n){if((0,fr.isTag)(n))if(i)n.attribs.class="";else{for(var o=nb(n.attribs.class),a=!1,s=0;s<r;s++){var c=o.indexOf(t[s]);c>=0&&(o.splice(c,1),a=!0,s--)}a&&(n.attribs.class=o.join(" "))}})}Xr.removeClass=JF;function ej(e,t){if(typeof e=="function")return(0,fr.domEach)(this,function(h,f){(0,fr.isTag)(h)&&ej.call([h],e.call(h,f,h.attribs.class||"",t),t)});if(!e||typeof e!="string")return this;for(var r=e.split(pp),i=r.length,n=typeof t=="boolean"?t?1:-1:0,o=this.length,a=0;a<o;a++){var s=this[a];if((0,fr.isTag)(s)){for(var c=nb(s.attribs.class),u=0;u<i;u++){var l=c.indexOf(r[u]);n>=0&&l<0?c.push(r[u]):n<=0&&l>=0&&c.splice(l,1)}s.attribs.class=c.join(" ")}}return this}Xr.toggleClass=ej;var tt={},tj={},Wt;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(Wt||(Wt={}));const Jfe={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var kr;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(kr||(kr={}));const rj=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,ehe=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,the=new Map([[126,kr.Element],[94,kr.Start],[36,kr.End],[42,kr.Any],[33,kr.Not],[124,kr.Hyphen]]),rhe=new Set(["has","not","matches","is","where","host","host-context"]);function nj(e){switch(e.type){case Wt.Adjacent:case Wt.Child:case Wt.Descendant:case Wt.Parent:case Wt.Sibling:case Wt.ColumnCombinator:return!0;default:return!1}}const nhe=new Set(["contains","icontains"]);function ihe(e,t,r){const i=parseInt(t,16)-65536;return i!==i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)}function mp(e){return e.replace(ehe,ihe)}function aO(e){return e===39||e===34}function ij(e){return e===32||e===9||e===10||e===12||e===13}function ohe(e){const t=[],r=oj(t,`${e}`,0);if(r<e.length)throw new Error(`Unmatched selector: ${e.slice(r)}`);return t}function oj(e,t,r){let i=[];function n(f){const d=t.slice(r+f).match(rj);if(!d)throw new Error(`Expected name, found ${t.slice(r)}`);const[p]=d;return r+=f+p.length,mp(p)}function o(f){for(r+=f;r<t.length&&ij(t.charCodeAt(r));)r++}function a(){r+=1;const f=r;let d=1;for(;d>0&&r<t.length;r++)t.charCodeAt(r)===40&&!s(r)?d++:t.charCodeAt(r)===41&&!s(r)&&d--;if(d)throw new Error("Parenthesis not matched");return mp(t.slice(f,r-1))}function s(f){let d=0;for(;t.charCodeAt(--f)===92;)d++;return(d&1)===1}function c(){if(i.length>0&&nj(i[i.length-1]))throw new Error("Did not expect successive traversals.")}function u(f){if(i.length>0&&i[i.length-1].type===Wt.Descendant){i[i.length-1].type=f;return}c(),i.push({type:f})}function l(f,d){i.push({type:Wt.Attribute,name:f,action:d,value:n(1),namespace:null,ignoreCase:"quirks"})}function h(){if(i.length&&i[i.length-1].type===Wt.Descendant&&i.pop(),i.length===0)throw new Error("Empty sub-selector");e.push(i)}if(o(0),t.length===r)return r;e:for(;r<t.length;){const f=t.charCodeAt(r);switch(f){case 32:case 9:case 10:case 12:case 13:{(i.length===0||i[0].type!==Wt.Descendant)&&(c(),i.push({type:Wt.Descendant})),o(1);break}case 62:{u(Wt.Child),o(1);break}case 60:{u(Wt.Parent),o(1);break}case 126:{u(Wt.Sibling),o(1);break}case 43:{u(Wt.Adjacent),o(1);break}case 46:{l("class",kr.Element);break}case 35:{l("id",kr.Equals);break}case 91:{o(1);let d,p=null;t.charCodeAt(r)===124?d=n(1):t.startsWith("*|",r)?(p="*",d=n(2)):(d=n(0),t.charCodeAt(r)===124&&t.charCodeAt(r+1)!==61&&(p=d,d=n(1))),o(0);let m=kr.Exists;const g=the.get(t.charCodeAt(r));if(g){if(m=g,t.charCodeAt(r+1)!==61)throw new Error("Expected `=`");o(2)}else t.charCodeAt(r)===61&&(m=kr.Equals,o(1));let v="",_=null;if(m!=="exists"){if(aO(t.charCodeAt(r))){const T=t.charCodeAt(r);let S=r+1;for(;S<t.length&&(t.charCodeAt(S)!==T||s(S));)S+=1;if(t.charCodeAt(S)!==T)throw new Error("Attribute value didn't end");v=mp(t.slice(r+1,S)),r=S+1}else{const T=r;for(;r<t.length&&(!ij(t.charCodeAt(r))&&t.charCodeAt(r)!==93||s(r));)r+=1;v=mp(t.slice(T,r))}o(0);const b=t.charCodeAt(r)|32;b===115?(_=!1,o(1)):b===105&&(_=!0,o(1))}if(t.charCodeAt(r)!==93)throw new Error("Attribute selector didn't terminate");r+=1;const y={type:Wt.Attribute,name:d,action:m,value:v,namespace:p,ignoreCase:_};i.push(y);break}case 58:{if(t.charCodeAt(r+1)===58){i.push({type:Wt.PseudoElement,name:n(2).toLowerCase(),data:t.charCodeAt(r)===40?a():null});continue}const d=n(1).toLowerCase();let p=null;if(t.charCodeAt(r)===40)if(rhe.has(d)){if(aO(t.charCodeAt(r+1)))throw new Error(`Pseudo-selector ${d} cannot be quoted`);if(p=[],r=oj(p,t,r+1),t.charCodeAt(r)!==41)throw new Error(`Missing closing parenthesis in :${d} (${t})`);r+=1}else{if(p=a(),nhe.has(d)){const m=p.charCodeAt(0);m===p.charCodeAt(p.length-1)&&aO(m)&&(p=p.slice(1,-1))}p=mp(p)}i.push({type:Wt.Pseudo,name:d,data:p});break}case 44:{h(),i=[],o(1);break}default:{if(t.startsWith("/*",r)){const m=t.indexOf("*/",r+2);if(m<0)throw new Error("Comment was not terminated");r=m+2,i.length===0&&o(0);break}let d=null,p;if(f===42)r+=1,p="*";else if(f===124){if(p="",t.charCodeAt(r+1)===124){u(Wt.ColumnCombinator),o(2);break}}else if(rj.test(t.slice(r)))p=n(0);else break e;t.charCodeAt(r)===124&&t.charCodeAt(r+1)!==124&&(d=p,t.charCodeAt(r+1)===42?(p="*",r+=2):p=n(1)),i.push(p==="*"?{type:Wt.Universal,namespace:d}:{type:Wt.Tag,name:p,namespace:d})}}}return h(),r}const aj=["\\",'"'],sj=[...aj,"(",")"],ahe=new Set(aj.map(e=>e.charCodeAt(0))),lj=new Set(sj.map(e=>e.charCodeAt(0))),af=new Set([...sj,"~","^","$","*","+","!","|",":","[","]"," ","."].map(e=>e.charCodeAt(0)));function cj(e){return e.map(t=>t.map(she).join("")).join(", ")}function she(e,t,r){switch(e.type){case Wt.Child:return t===0?"> ":" > ";case Wt.Parent:return t===0?"< ":" < ";case Wt.Sibling:return t===0?"~ ":" ~ ";case Wt.Adjacent:return t===0?"+ ":" + ";case Wt.Descendant:return" ";case Wt.ColumnCombinator:return t===0?"|| ":" || ";case Wt.Universal:return e.namespace==="*"&&t+1<r.length&&"name"in r[t+1]?"":`${fj(e.namespace)}*`;case Wt.Tag:return uj(e);case Wt.PseudoElement:return`::${ja(e.name,af)}${e.data===null?"":`(${ja(e.data,lj)})`}`;case Wt.Pseudo:return`:${ja(e.name,af)}${e.data===null?"":`(${typeof e.data=="string"?ja(e.data,lj):cj(e.data)})`}`;case Wt.Attribute:{if(e.name==="id"&&e.action===kr.Equals&&e.ignoreCase==="quirks"&&!e.namespace)return`#${ja(e.value,af)}`;if(e.name==="class"&&e.action===kr.Element&&e.ignoreCase==="quirks"&&!e.namespace)return`.${ja(e.value,af)}`;const i=uj(e);return e.action===kr.Exists?`[${i}]`:`[${i}${lhe(e.action)}="${ja(e.value,ahe)}"${e.ignoreCase===null?"":e.ignoreCase?" i":" s"}]`}}}function lhe(e){switch(e){case kr.Equals:return"";case kr.Element:return"~";case kr.Start:return"^";case kr.End:return"$";case kr.Any:return"*";case kr.Not:return"!";case kr.Hyphen:return"|";case kr.Exists:throw new Error("Shouldn't be here")}}function uj(e){return`${fj(e.namespace)}${ja(e.name,af)}`}function fj(e){return e!==null?`${e==="*"?"*":ja(e,af)}|`:""}function ja(e,t){let r=0,i="";for(let n=0;n<e.length;n++)t.has(e.charCodeAt(n))&&(i+=`${e.slice(r,n)}\\${e.charAt(n)}`,r=n+1);return i.length>0?i+e.slice(r):e}const gp=Sa(Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return kr},IgnoreCaseMode:Jfe,get SelectorType(){return Wt},isTraversal:nj,parse:ohe,stringify:cj},Symbol.toStringTag,{value:"Module"})));var sO={},tc={trueFunc:function(){return!0},falseFunc:function(){return!1}},xs={},sf={};Object.defineProperty(sf,"__esModule",{value:!0}),sf.isTraversal=void 0;var xi=gp,hj=new Map([[xi.SelectorType.Universal,50],[xi.SelectorType.Tag,30],[xi.SelectorType.Attribute,1],[xi.SelectorType.Pseudo,0]]);function che(e){return!hj.has(e.type)}sf.isTraversal=che;var uhe=new Map([[xi.AttributeAction.Exists,10],[xi.AttributeAction.Equals,8],[xi.AttributeAction.Not,7],[xi.AttributeAction.Start,6],[xi.AttributeAction.End,6],[xi.AttributeAction.Any,5]]);function fhe(e){for(var t=e.map(dj),r=1;r<e.length;r++){var i=t[r];if(!(i<0))for(var n=r-1;n>=0&&i<t[n];n--){var o=e[n+1];e[n+1]=e[n],e[n]=o,t[n+1]=t[n],t[n]=i}}}sf.default=fhe;function dj(e){var t,r,i=(t=hj.get(e.type))!==null&&t!==void 0?t:-1;return e.type===xi.SelectorType.Attribute?(i=(r=uhe.get(e.action))!==null&&r!==void 0?r:4,e.action===xi.AttributeAction.Equals&&e.name==="id"&&(i=9),e.ignoreCase&&(i>>=1)):e.type===xi.SelectorType.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?i=0:Array.isArray(e.data)?(i=Math.min.apply(Math,e.data.map(function(n){return Math.min.apply(Math,n.map(dj))})),i<0&&(i=0)):i=2:i=3),i}var ib={},ob={},hhe=De&&De.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ob,"__esModule",{value:!0}),ob.attributeRules=void 0;var ab=hhe(tc),dhe=/[-[\]{}()*+?.,\\^$|#\s]/g;function pj(e){return e.replace(dhe,"\\$&")}var phe=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function rc(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&phe.has(e.name)}ob.attributeRules={equals:function(e,t,r){var i=r.adapter,n=t.name,o=t.value;return rc(t,r)?(o=o.toLowerCase(),function(a){var s=i.getAttributeValue(a,n);return s!=null&&s.length===o.length&&s.toLowerCase()===o&&e(a)}):function(a){return i.getAttributeValue(a,n)===o&&e(a)}},hyphen:function(e,t,r){var i=r.adapter,n=t.name,o=t.value,a=o.length;return rc(t,r)?(o=o.toLowerCase(),function(c){var u=i.getAttributeValue(c,n);return u!=null&&(u.length===a||u.charAt(a)==="-")&&u.substr(0,a).toLowerCase()===o&&e(c)}):function(c){var u=i.getAttributeValue(c,n);return u!=null&&(u.length===a||u.charAt(a)==="-")&&u.substr(0,a)===o&&e(c)}},element:function(e,t,r){var i=r.adapter,n=t.name,o=t.value;if(/\s/.test(o))return ab.default.falseFunc;var a=new RegExp("(?:^|\\s)".concat(pj(o),"(?:$|\\s)"),rc(t,r)?"i":"");return function(c){var u=i.getAttributeValue(c,n);return u!=null&&u.length>=o.length&&a.test(u)&&e(c)}},exists:function(e,t,r){var i=t.name,n=r.adapter;return function(o){return n.hasAttrib(o,i)&&e(o)}},start:function(e,t,r){var i=r.adapter,n=t.name,o=t.value,a=o.length;return a===0?ab.default.falseFunc:rc(t,r)?(o=o.toLowerCase(),function(s){var c=i.getAttributeValue(s,n);return c!=null&&c.length>=a&&c.substr(0,a).toLowerCase()===o&&e(s)}):function(s){var c;return!!(!((c=i.getAttributeValue(s,n))===null||c===void 0)&&c.startsWith(o))&&e(s)}},end:function(e,t,r){var i=r.adapter,n=t.name,o=t.value,a=-o.length;return a===0?ab.default.falseFunc:rc(t,r)?(o=o.toLowerCase(),function(s){var c;return((c=i.getAttributeValue(s,n))===null||c===void 0?void 0:c.substr(a).toLowerCase())===o&&e(s)}):function(s){var c;return!!(!((c=i.getAttributeValue(s,n))===null||c===void 0)&&c.endsWith(o))&&e(s)}},any:function(e,t,r){var i=r.adapter,n=t.name,o=t.value;if(o==="")return ab.default.falseFunc;if(rc(t,r)){var a=new RegExp(pj(o),"i");return function(c){var u=i.getAttributeValue(c,n);return u!=null&&u.length>=o.length&&a.test(u)&&e(c)}}return function(s){var c;return!!(!((c=i.getAttributeValue(s,n))===null||c===void 0)&&c.includes(o))&&e(s)}},not:function(e,t,r){var i=r.adapter,n=t.name,o=t.value;return o===""?function(a){return!!i.getAttributeValue(a,n)&&e(a)}:rc(t,r)?(o=o.toLowerCase(),function(a){var s=i.getAttributeValue(a,n);return(s==null||s.length!==o.length||s.toLowerCase()!==o)&&e(a)}):function(a){return i.getAttributeValue(a,n)!==o&&e(a)}}};var lO={},mj={},gj={},sb={};Object.defineProperty(sb,"__esModule",{value:!0}),sb.parse=void 0;var mhe=new Set([9,10,12,13,32]),vj=48,ghe=57;function vhe(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];var t=0,r=0,i=o(),n=a();if(t<e.length&&e.charAt(t)==="n"&&(t++,r=i*(n??1),s(),t<e.length?(i=o(),s(),n=a()):i=n=0),n===null||t<e.length)throw new Error("n-th rule couldn't be parsed ('".concat(e,"')"));return[r,i*n];function o(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function a(){for(var c=t,u=0;t<e.length&&e.charCodeAt(t)>=vj&&e.charCodeAt(t)<=ghe;)u=u*10+(e.charCodeAt(t)-vj),t++;return t===c?null:u}function s(){for(;t<e.length&&mhe.has(e.charCodeAt(t));)t++}}sb.parse=vhe;var lf={},yhe=De&&De.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lf,"__esModule",{value:!0}),lf.generate=lf.compile=void 0;var yj=yhe(tc);function bhe(e){var t=e[0],r=e[1]-1;if(r<0&&t<=0)return yj.default.falseFunc;if(t===-1)return function(o){return o<=r};if(t===0)return function(o){return o===r};if(t===1)return r<0?yj.default.trueFunc:function(o){return o>=r};var i=Math.abs(t),n=(r%i+i)%i;return t>1?function(o){return o>=r&&o%i===n}:function(o){return o<=r&&o%i===n}}lf.compile=bhe;function _he(e){var t=e[0],r=e[1]-1,i=0;if(t<0){var n=-t,o=(r%n+n)%n;return function(){var a=o+n*i++;return a>r?null:a}}return t===0?r<0?function(){return null}:function(){return i++===0?r:null}:(r<0&&(r+=t*Math.ceil(-r/t)),function(){return t*i+++r})}lf.generate=_he,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sequence=e.generate=e.compile=e.parse=void 0;var t=sb;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}});var r=lf;Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return r.compile}}),Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return r.generate}});function i(o){return(0,r.compile)((0,t.parse)(o))}e.default=i;function n(o){return(0,r.generate)((0,t.parse)(o))}e.sequence=n}(gj),function(e){var t=De&&De.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.filters=void 0;var r=t(gj),i=t(tc);function n(a,s){return function(c){var u=s.getParent(c);return u!=null&&s.isTag(u)&&a(c)}}e.filters={contains:function(a,s,c){var u=c.adapter;return function(h){return a(h)&&u.getText(h).includes(s)}},icontains:function(a,s,c){var u=c.adapter,l=s.toLowerCase();return function(f){return a(f)&&u.getText(f).toLowerCase().includes(l)}},"nth-child":function(a,s,c){var u=c.adapter,l=c.equals,h=(0,r.default)(s);return h===i.default.falseFunc?i.default.falseFunc:h===i.default.trueFunc?n(a,u):function(d){for(var p=u.getSiblings(d),m=0,g=0;g<p.length&&!l(d,p[g]);g++)u.isTag(p[g])&&m++;return h(m)&&a(d)}},"nth-last-child":function(a,s,c){var u=c.adapter,l=c.equals,h=(0,r.default)(s);return h===i.default.falseFunc?i.default.falseFunc:h===i.default.trueFunc?n(a,u):function(d){for(var p=u.getSiblings(d),m=0,g=p.length-1;g>=0&&!l(d,p[g]);g--)u.isTag(p[g])&&m++;return h(m)&&a(d)}},"nth-of-type":function(a,s,c){var u=c.adapter,l=c.equals,h=(0,r.default)(s);return h===i.default.falseFunc?i.default.falseFunc:h===i.default.trueFunc?n(a,u):function(d){for(var p=u.getSiblings(d),m=0,g=0;g<p.length;g++){var v=p[g];if(l(d,v))break;u.isTag(v)&&u.getName(v)===u.getName(d)&&m++}return h(m)&&a(d)}},"nth-last-of-type":function(a,s,c){var u=c.adapter,l=c.equals,h=(0,r.default)(s);return h===i.default.falseFunc?i.default.falseFunc:h===i.default.trueFunc?n(a,u):function(d){for(var p=u.getSiblings(d),m=0,g=p.length-1;g>=0;g--){var v=p[g];if(l(d,v))break;u.isTag(v)&&u.getName(v)===u.getName(d)&&m++}return h(m)&&a(d)}},root:function(a,s,c){var u=c.adapter;return function(l){var h=u.getParent(l);return(h==null||!u.isTag(h))&&a(l)}},scope:function(a,s,c,u){var l=c.equals;return!u||u.length===0?e.filters.root(a,s,c):u.length===1?function(h){return l(u[0],h)&&a(h)}:function(h){return u.includes(h)&&a(h)}},hover:o("isHovered"),visited:o("isVisited"),active:o("isActive")};function o(a){return function(c,u,l){var h=l.adapter,f=h[a];return typeof f!="function"?i.default.falseFunc:function(p){return f(p)&&c(p)}}}}(mj);var cf={};Object.defineProperty(cf,"__esModule",{value:!0}),cf.verifyPseudoArgs=cf.pseudos=void 0,cf.pseudos={empty:function(e,t){var r=t.adapter;return!r.getChildren(e).some(function(i){return r.isTag(i)||r.getText(i)!==""})},"first-child":function(e,t){var r=t.adapter,i=t.equals;if(r.prevElementSibling)return r.prevElementSibling(e)==null;var n=r.getSiblings(e).find(function(o){return r.isTag(o)});return n!=null&&i(e,n)},"last-child":function(e,t){for(var r=t.adapter,i=t.equals,n=r.getSiblings(e),o=n.length-1;o>=0;o--){if(i(e,n[o]))return!0;if(r.isTag(n[o]))break}return!1},"first-of-type":function(e,t){for(var r=t.adapter,i=t.equals,n=r.getSiblings(e),o=r.getName(e),a=0;a<n.length;a++){var s=n[a];if(i(e,s))return!0;if(r.isTag(s)&&r.getName(s)===o)break}return!1},"last-of-type":function(e,t){for(var r=t.adapter,i=t.equals,n=r.getSiblings(e),o=r.getName(e),a=n.length-1;a>=0;a--){var s=n[a];if(i(e,s))return!0;if(r.isTag(s)&&r.getName(s)===o)break}return!1},"only-of-type":function(e,t){var r=t.adapter,i=t.equals,n=r.getName(e);return r.getSiblings(e).every(function(o){return i(e,o)||!r.isTag(o)||r.getName(o)!==n})},"only-child":function(e,t){var r=t.adapter,i=t.equals;return r.getSiblings(e).every(function(n){return i(e,n)||!r.isTag(n)})}};function The(e,t,r,i){if(r===null){if(e.length>i)throw new Error("Pseudo-class :".concat(t," requires an argument"))}else if(e.length===i)throw new Error("Pseudo-class :".concat(t," doesn't have any arguments"))}cf.verifyPseudoArgs=The;var lb={};Object.defineProperty(lb,"__esModule",{value:!0}),lb.aliases=void 0,lb.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var cb={};(function(e){var t=De&&De.__spreadArray||function(u,l,h){if(h||arguments.length===2)for(var f=0,d=l.length,p;f<d;f++)(p||!(f in l))&&(p||(p=Array.prototype.slice.call(l,0,f)),p[f]=l[f]);return u.concat(p||Array.prototype.slice.call(l))},r=De&&De.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.subselects=e.getNextSiblings=e.ensureIsTag=e.PLACEHOLDER_ELEMENT=void 0;var i=r(tc),n=sf;e.PLACEHOLDER_ELEMENT={};function o(u,l){return u===i.default.falseFunc?i.default.falseFunc:function(h){return l.isTag(h)&&u(h)}}e.ensureIsTag=o;function a(u,l){var h=l.getSiblings(u);if(h.length<=1)return[];var f=h.indexOf(u);return f<0||f===h.length-1?[]:h.slice(f+1).filter(l.isTag)}e.getNextSiblings=a;function s(u){return{xmlMode:!!u.xmlMode,lowerCaseAttributeNames:!!u.lowerCaseAttributeNames,lowerCaseTags:!!u.lowerCaseTags,quirksMode:!!u.quirksMode,cacheResults:!!u.cacheResults,pseudos:u.pseudos,adapter:u.adapter,equals:u.equals}}var c=function(u,l,h,f,d){var p=d(l,s(h),f);return p===i.default.trueFunc?u:p===i.default.falseFunc?i.default.falseFunc:function(m){return p(m)&&u(m)}};e.subselects={is:c,matches:c,where:c,not:function(u,l,h,f,d){var p=d(l,s(h),f);return p===i.default.falseFunc?u:p===i.default.trueFunc?i.default.falseFunc:function(m){return!p(m)&&u(m)}},has:function(u,l,h,f,d){var p=h.adapter,m=s(h);m.relativeSelector=!0;var g=l.some(function(T){return T.some(n.isTraversal)})?[e.PLACEHOLDER_ELEMENT]:void 0,v=d(l,m,g);if(v===i.default.falseFunc)return i.default.falseFunc;var _=o(v,p);if(g&&v!==i.default.trueFunc){var y=v.shouldTestNextSiblings,b=y===void 0?!1:y;return function(T){if(!u(T))return!1;g[0]=T;var S=p.getChildren(T),k=b?t(t([],S,!0),a(T,p),!0):S;return p.existsOne(_,k)}}return function(T){return u(T)&&p.existsOne(_,p.getChildren(T))}}}})(cb),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compilePseudoSelector=e.aliases=e.pseudos=e.filters=void 0;var t=gp,r=mj;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return r.filters}});var i=cf;Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return i.pseudos}});var n=lb;Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return n.aliases}});var o=cb;function a(s,c,u,l,h){var f,d=c.name,p=c.data;if(Array.isArray(p)){if(!(d in o.subselects))throw new Error("Unknown pseudo-class :".concat(d,"(").concat(p,")"));return o.subselects[d](s,p,u,l,h)}var m=(f=u.pseudos)===null||f===void 0?void 0:f[d],g=typeof m=="string"?m:n.aliases[d];if(typeof g=="string"){if(p!=null)throw new Error("Pseudo ".concat(d," doesn't have any arguments"));var v=(0,t.parse)(g);return o.subselects.is(s,v,u,l,h)}if(typeof m=="function")return(0,i.verifyPseudoArgs)(m,d,p,1),function(y){return m(y,p)&&s(y)};if(d in r.filters)return r.filters[d](s,p,u,l);if(d in i.pseudos){var _=i.pseudos[d];return(0,i.verifyPseudoArgs)(_,d,p,2),function(y){return _(y,u,p)&&s(y)}}throw new Error("Unknown pseudo-class :".concat(d))}e.compilePseudoSelector=a}(lO),Object.defineProperty(ib,"__esModule",{value:!0}),ib.compileGeneralSelector=void 0;var Ehe=ob,She=lO,mo=gp;function cO(e,t){var r=t.getParent(e);return r&&t.isTag(r)?r:null}function whe(e,t,r,i,n){var o=r.adapter,a=r.equals;switch(t.type){case mo.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case mo.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case mo.SelectorType.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!r.xmlMode||r.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),Ehe.attributeRules[t.action](e,t,r)}case mo.SelectorType.Pseudo:return(0,She.compilePseudoSelector)(e,t,r,i,n);case mo.SelectorType.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var s=t.name;return(!r.xmlMode||r.lowerCaseTags)&&(s=s.toLowerCase()),function(l){return o.getName(l)===s&&e(l)}}case mo.SelectorType.Descendant:{if(r.cacheResults===!1||typeof WeakSet>"u")return function(l){for(var h=l;h=cO(h,o);)if(e(h))return!0;return!1};var c=new WeakSet;return function(l){for(var h=l;h=cO(h,o);)if(!c.has(h)){if(o.isTag(h)&&e(h))return!0;c.add(h)}return!1}}case"_flexibleDescendant":return function(l){var h=l;do if(e(h))return!0;while(h=cO(h,o));return!1};case mo.SelectorType.Parent:return function(l){return o.getChildren(l).some(function(h){return o.isTag(h)&&e(h)})};case mo.SelectorType.Child:return function(l){var h=o.getParent(l);return h!=null&&o.isTag(h)&&e(h)};case mo.SelectorType.Sibling:return function(l){for(var h=o.getSiblings(l),f=0;f<h.length;f++){var d=h[f];if(a(l,d))break;if(o.isTag(d)&&e(d))return!0}return!1};case mo.SelectorType.Adjacent:return o.prevElementSibling?function(l){var h=o.prevElementSibling(l);return h!=null&&e(h)}:function(l){for(var h=o.getSiblings(l),f,d=0;d<h.length;d++){var p=h[d];if(a(l,p))break;o.isTag(p)&&(f=p)}return!!f&&e(f)};case mo.SelectorType.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}ib.compileGeneralSelector=whe;var Ahe=De&&De.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Ohe=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),khe=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Ahe(t,e,r);return Ohe(t,e),t},Ihe=De&&De.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xs,"__esModule",{value:!0}),xs.compileToken=xs.compileUnsafe=xs.compile=void 0;var Ua=gp,Ns=Ihe(tc),uO=khe(sf),Che=ib,bj=cb;function Phe(e,t,r){var i=_j(e,t,r);return(0,bj.ensureIsTag)(i,t.adapter)}xs.compile=Phe;function _j(e,t,r){var i=typeof e=="string"?(0,Ua.parse)(e):e;return fO(i,t,r)}xs.compileUnsafe=_j;function Tj(e){return e.type===Ua.SelectorType.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(function(t){return t.some(Tj)}))}var Dhe={type:Ua.SelectorType.Descendant},xhe={type:"_flexibleDescendant"},Nhe={type:Ua.SelectorType.Pseudo,name:"scope",data:null};function Rhe(e,t,r){for(var i=t.adapter,n=!!r?.every(function(c){var u=i.isTag(c)&&i.getParent(c);return c===bj.PLACEHOLDER_ELEMENT||u&&i.isTag(u)}),o=0,a=e;o<a.length;o++){var s=a[o];if(!(s.length>0&&(0,uO.isTraversal)(s[0])&&s[0].type!==Ua.SelectorType.Descendant))if(n&&!s.some(Tj))s.unshift(Dhe);else continue;s.unshift(Nhe)}}function fO(e,t,r){var i;e.forEach(uO.default),r=(i=t.context)!==null&&i!==void 0?i:r;var n=Array.isArray(r),o=r&&(Array.isArray(r)?r:[r]);if(t.relativeSelector!==!1)Rhe(e,t,o);else if(e.some(function(c){return c.length>0&&(0,uO.isTraversal)(c[0])}))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");var a=!1,s=e.map(function(c){if(c.length>=2){var u=c[0],l=c[1];u.type!==Ua.SelectorType.Pseudo||u.name!=="scope"||(n&&l.type===Ua.SelectorType.Descendant?c[1]=xhe:(l.type===Ua.SelectorType.Adjacent||l.type===Ua.SelectorType.Sibling)&&(a=!0))}return Mhe(c,t,o)}).reduce(Lhe,Ns.default.falseFunc);return s.shouldTestNextSiblings=a,s}xs.compileToken=fO;function Mhe(e,t,r){var i;return e.reduce(function(n,o){return n===Ns.default.falseFunc?Ns.default.falseFunc:(0,Che.compileGeneralSelector)(n,o,t,r,fO)},(i=t.rootFunc)!==null&&i!==void 0?i:Ns.default.trueFunc)}function Lhe(e,t){return t===Ns.default.falseFunc||e===Ns.default.trueFunc?e:e===Ns.default.falseFunc||t===Ns.default.trueFunc?t:function(i){return e(i)||t(i)}}(function(e){var t=De&&De.__createBinding||(Object.create?function(_,y,b,T){T===void 0&&(T=b);var S=Object.getOwnPropertyDescriptor(y,b);(!S||("get"in S?!y.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(_,T,S)}:function(_,y,b,T){T===void 0&&(T=b),_[T]=y[b]}),r=De&&De.__setModuleDefault||(Object.create?function(_,y){Object.defineProperty(_,"default",{enumerable:!0,value:y})}:function(_,y){_.default=y}),i=De&&De.__importStar||function(_){if(_&&_.__esModule)return _;var y={};if(_!=null)for(var b in _)b!=="default"&&Object.prototype.hasOwnProperty.call(_,b)&&t(y,_,b);return r(y,_),y},n=De&&De.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.aliases=e.pseudos=e.filters=e.is=e.selectOne=e.selectAll=e.prepareContext=e._compileToken=e._compileUnsafe=e.compile=void 0;var o=i(po),a=n(tc),s=xs,c=cb,u=function(_,y){return _===y},l={adapter:o,equals:u};function h(_){var y,b,T,S,k=_??l;return(y=k.adapter)!==null&&y!==void 0||(k.adapter=o),(b=k.equals)!==null&&b!==void 0||(k.equals=(S=(T=k.adapter)===null||T===void 0?void 0:T.equals)!==null&&S!==void 0?S:u),k}function f(_){return function(b,T,S){var k=h(T);return _(b,k,S)}}e.compile=f(s.compile),e._compileUnsafe=f(s.compileUnsafe),e._compileToken=f(s.compileToken);function d(_){return function(b,T,S){var k=h(S);typeof b!="function"&&(b=(0,s.compileUnsafe)(b,k,T));var O=p(T,k.adapter,b.shouldTestNextSiblings);return _(b,O,k)}}function p(_,y,b){return b===void 0&&(b=!1),b&&(_=m(_,y)),Array.isArray(_)?y.removeSubsets(_):y.getChildren(_)}e.prepareContext=p;function m(_,y){for(var b=Array.isArray(_)?_.slice(0):[_],T=b.length,S=0;S<T;S++){var k=(0,c.getNextSiblings)(b[S],y);b.push.apply(b,k)}return b}e.selectAll=d(function(_,y,b){return _===a.default.falseFunc||!y||y.length===0?[]:b.adapter.findAll(_,y)}),e.selectOne=d(function(_,y,b){return _===a.default.falseFunc||!y||y.length===0?null:b.adapter.findOne(_,y)});function g(_,y,b){var T=h(b);return(typeof y=="function"?y:(0,s.compile)(y,T))(_)}e.is=g,e.default=e.selectAll;var v=lO;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return v.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return v.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return v.aliases}})})(sO);var uf={},hO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLimit=e.isFilter=e.filterNames=void 0,e.filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function t(i){return i.type!=="pseudo"?!1:e.filterNames.has(i.name)?!0:i.name==="not"&&Array.isArray(i.data)?i.data.some(function(n){return n.some(t)}):!1}e.isFilter=t;function r(i,n,o){var a=n!=null?parseInt(n,10):NaN;switch(i){case"first":return 1;case"nth":case"eq":return isFinite(a)?a>=0?a+1:1/0:0;case"lt":return isFinite(a)?a>=0?Math.min(a,o):1/0:0;case"gt":return isFinite(a)?1/0:0;case"odd":return 2*o;case"even":return 2*o-1;case"last":case"not":return 1/0}}e.getLimit=r})(hO),Object.defineProperty(uf,"__esModule",{value:!0}),uf.groupSelectors=uf.getDocumentRoot=void 0;var Bhe=hO;function Hhe(e){for(;e.parent;)e=e.parent;return e}uf.getDocumentRoot=Hhe;function $he(e){for(var t=[],r=[],i=0,n=e;i<n.length;i++){var o=n[i];o.some(Bhe.isFilter)?t.push(o):r.push(o)}return[r,t]}uf.groupSelectors=$he,function(e){var t=De&&De.__assign||function(){return t=Object.assign||function(R){for(var w,L=1,B=arguments.length;L<B;L++){w=arguments[L];for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(R[A]=w[A])}return R},t.apply(this,arguments)},r=De&&De.__createBinding||(Object.create?function(R,w,L,B){B===void 0&&(B=L);var A=Object.getOwnPropertyDescriptor(w,L);(!A||("get"in A?!w.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return w[L]}}),Object.defineProperty(R,B,A)}:function(R,w,L,B){B===void 0&&(B=L),R[B]=w[L]}),i=De&&De.__setModuleDefault||(Object.create?function(R,w){Object.defineProperty(R,"default",{enumerable:!0,value:w})}:function(R,w){R.default=w}),n=De&&De.__importStar||function(R){if(R&&R.__esModule)return R;var w={};if(R!=null)for(var L in R)L!=="default"&&Object.prototype.hasOwnProperty.call(R,L)&&r(w,R,L);return i(w,R),w},o=De&&De.__spreadArray||function(R,w,L){if(L||arguments.length===2)for(var B=0,A=w.length,M;B<A;B++)(M||!(B in w))&&(M||(M=Array.prototype.slice.call(w,0,B)),M[B]=w[B]);return R.concat(M||Array.prototype.slice.call(w))};Object.defineProperty(e,"__esModule",{value:!0}),e.select=e.filter=e.some=e.is=e.aliases=e.pseudos=e.filters=void 0;var a=gp,s=sO,c=n(po),u=n(tc),l=uf,h=hO,f=sO;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return f.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return f.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return f.aliases}});var d={type:a.SelectorType.Universal,namespace:null},p={type:a.SelectorType.Pseudo,name:"scope",data:null};function m(R,w,L){return L===void 0&&(L={}),g([R],w,L)}e.is=m;function g(R,w,L){if(L===void 0&&(L={}),typeof w=="function")return R.some(w);var B=(0,l.groupSelectors)((0,a.parse)(w)),A=B[0],M=B[1];return A.length>0&&R.some((0,s._compileToken)(A,L))||M.some(function(j){return b(j,R,L).length>0})}e.some=g;function v(R,w,L,B){var A=typeof L=="string"?parseInt(L,10):NaN;switch(R){case"first":case"lt":return w;case"last":return w.length>0?[w[w.length-1]]:w;case"nth":case"eq":return isFinite(A)&&Math.abs(A)<w.length?[A<0?w[w.length+A]:w[A]]:[];case"gt":return isFinite(A)?w.slice(A+1):[];case"even":return w.filter(function(j,W){return W%2===0});case"odd":return w.filter(function(j,W){return W%2===1});case"not":{var M=new Set(y(L,w,B));return w.filter(function(j){return!M.has(j)})}}}function _(R,w,L){return L===void 0&&(L={}),y((0,a.parse)(R),w,L)}e.filter=_;function y(R,w,L){if(w.length===0)return[];var B=(0,l.groupSelectors)(R),A=B[0],M=B[1],j;if(A.length){var W=D(w,A,L);if(M.length===0)return W;W.length&&(j=new Set(W))}for(var K=0;K<M.length&&j?.size!==w.length;K++){var oe=M[K],fe=j?w.filter(function(de){return c.isTag(de)&&!j.has(de)}):w;if(fe.length===0)break;var W=b(oe,w,L);if(W.length)if(j)W.forEach(function(de){return j.add(de)});else{if(K===M.length-1)return W;j=new Set(W)}}return typeof j<"u"?j.size===w.length?w:w.filter(function(Ae){return j.has(Ae)}):[]}function b(R,w,L){var B;if(R.some(a.isTraversal)){var A=(B=L.root)!==null&&B!==void 0?B:(0,l.getDocumentRoot)(w[0]),M=t(t({},L),{context:w,relativeSelector:!1});return R.push(p),S(A,R,M,!0,w.length)}return S(w,R,L,!1,w.length)}function T(R,w,L,B){if(L===void 0&&(L={}),B===void 0&&(B=1/0),typeof R=="function")return O(w,R);var A=(0,l.groupSelectors)((0,a.parse)(R)),M=A[0],j=A[1],W=j.map(function(K){return S(w,K,L,!0,B)});return M.length&&W.push(k(w,M,L,B)),W.length===0?[]:W.length===1?W[0]:c.uniqueSort(W.reduce(function(K,oe){return o(o([],K,!0),oe,!0)}))}e.select=T;function S(R,w,L,B,A){var M=w.findIndex(h.isFilter),j=w.slice(0,M),W=w[M],K=w.length-1===M?A:1/0,oe=(0,h.getLimit)(W.name,W.data,K);if(oe===0)return[];var fe=j.length===0&&!Array.isArray(R)?c.getChildren(R).filter(c.isTag):j.length===0?(Array.isArray(R)?R:[R]).filter(c.isTag):B||j.some(a.isTraversal)?k(R,[j],L,oe):D(R,[j],L),Ae=fe.slice(0,oe),de=v(W.name,Ae,W.data,L);if(de.length===0||w.length===M+1)return de;var Z=w.slice(M+1),ne=Z.some(a.isTraversal);if(ne){if((0,a.isTraversal)(Z[0])){var ue=Z[0].type;(ue===a.SelectorType.Sibling||ue===a.SelectorType.Adjacent)&&(de=(0,s.prepareContext)(de,c,!0)),Z.unshift(d)}L=t(t({},L),{relativeSelector:!1,rootFunc:function(Oe){return de.includes(Oe)}})}else L.rootFunc&&L.rootFunc!==u.trueFunc&&(L=t(t({},L),{rootFunc:u.trueFunc}));return Z.some(h.isFilter)?S(de,Z,L,!1,A):ne?k(de,[Z],L,A):D(de,[Z],L)}function k(R,w,L,B){var A=(0,s._compileToken)(w,L,R);return O(R,A,B)}function O(R,w,L){L===void 0&&(L=1/0);var B=(0,s.prepareContext)(R,c,w.shouldTestNextSiblings);return c.find(function(A){return c.isTag(A)&&w(A)},B,!0,L)}function D(R,w,L){var B=(Array.isArray(R)?R:[R]).filter(c.isTag);if(B.length===0)return B;var A=(0,s._compileToken)(w,L);return A===u.trueFunc?B:B.filter(A)}}(tj);var Fhe=De&&De.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),jhe=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Uhe=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Fhe(t,e,r);return jhe(t,e),t},dO=De&&De.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(tt,"__esModule",{value:!0}),tt.addBack=tt.add=tt.end=tt.slice=tt.index=tt.toArray=tt.get=tt.eq=tt.last=tt.first=tt.has=tt.not=tt.is=tt.filterArray=tt.filter=tt.map=tt.each=tt.contents=tt.children=tt.siblings=tt.prevUntil=tt.prevAll=tt.prev=tt.nextUntil=tt.nextAll=tt.next=tt.closest=tt.parentsUntil=tt.parents=tt.parent=tt.find=void 0;var ub=Hn,ff=Uhe(tj),go=Ds,Ghe=Gr,Xo=po,zhe=/^\s*[~+]/;function Vhe(e){var t;if(!e)return this._make([]);var r=this.toArray();if(typeof e!="string"){var i=(0,go.isCheerio)(e)?e.toArray():[e];return this._make(i.filter(function(a){return r.some(function(s){return(0,Ghe.contains)(s,a)})}))}var n=zhe.test(e)?r:this.children().toArray(),o={context:r,root:(t=this._root)===null||t===void 0?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(ff.select(e,n,o))}tt.find=Vhe;function pO(e){return function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(n){var o,a=e(t,this);return n&&(a=vO(a,n,this.options.xmlMode,(o=this._root)===null||o===void 0?void 0:o[0])),this._make(this.length>1&&a.length>1?r.reduce(function(s,c){return c(s)},a):a)}}}var vp=pO(function(e,t){for(var r,i=[],n=0;n<t.length;n++){var o=e(t[n]);i.push(o)}return(r=new Array).concat.apply(r,i)}),mO=pO(function(e,t){for(var r=[],i=0;i<t.length;i++){var n=e(t[i]);n!==null&&r.push(n)}return r});function gO(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=null,n=pO(function(o,a){var s=[];return(0,go.domEach)(a,function(c){for(var u;(u=o(c))&&!i?.(u,s.length);c=u)s.push(u)}),s}).apply(void 0,dO([e],t,!1));return function(o,a){var s=this;i=typeof o=="string"?function(u){return ff.is(u,o,s.options)}:o?yp(o):null;var c=n.call(this,a);return i=null,c}}function hf(e){return Array.from(new Set(e))}tt.parent=mO(function(e){var t=e.parent;return t&&!(0,ub.isDocument)(t)?t:null},hf),tt.parents=vp(function(e){for(var t=[];e.parent&&!(0,ub.isDocument)(e.parent);)t.push(e.parent),e=e.parent;return t},Xo.uniqueSort,function(e){return e.reverse()}),tt.parentsUntil=gO(function(e){var t=e.parent;return t&&!(0,ub.isDocument)(t)?t:null},Xo.uniqueSort,function(e){return e.reverse()});function Whe(e){var t,r=[];if(!e)return this._make(r);var i={xmlMode:this.options.xmlMode,root:(t=this._root)===null||t===void 0?void 0:t[0]},n=typeof e=="string"?function(o){return ff.is(o,e,i)}:yp(e);return(0,go.domEach)(this,function(o){for(;o&&(0,go.isTag)(o);){if(n(o,0)){r.includes(o)||r.push(o);break}o=o.parent}}),this._make(r)}tt.closest=Whe,tt.next=mO(function(e){return(0,Xo.nextElementSibling)(e)}),tt.nextAll=vp(function(e){for(var t=[];e.next;)e=e.next,(0,go.isTag)(e)&&t.push(e);return t},hf),tt.nextUntil=gO(function(e){return(0,Xo.nextElementSibling)(e)},hf),tt.prev=mO(function(e){return(0,Xo.prevElementSibling)(e)}),tt.prevAll=vp(function(e){for(var t=[];e.prev;)e=e.prev,(0,go.isTag)(e)&&t.push(e);return t},hf),tt.prevUntil=gO(function(e){return(0,Xo.prevElementSibling)(e)},hf),tt.siblings=vp(function(e){return(0,Xo.getSiblings)(e).filter(function(t){return(0,go.isTag)(t)&&t!==e})},Xo.uniqueSort),tt.children=vp(function(e){return(0,Xo.getChildren)(e).filter(go.isTag)},hf);function Yhe(){var e=this.toArray().reduce(function(t,r){return(0,ub.hasChildren)(r)?t.concat(r.children):t},[]);return this._make(e)}tt.contents=Yhe;function qhe(e){for(var t=0,r=this.length;t<r&&e.call(this[t],t,this[t])!==!1;)++t;return this}tt.each=qhe;function Xhe(e){for(var t=[],r=0;r<this.length;r++){var i=this[r],n=e.call(i,r,i);n!=null&&(t=t.concat(n))}return this._make(t)}tt.map=Xhe;function yp(e){return typeof e=="function"?function(t,r){return e.call(t,r,t)}:(0,go.isCheerio)(e)?function(t){return Array.prototype.includes.call(e,t)}:function(t){return e===t}}function Khe(e){var t;return this._make(vO(this.toArray(),e,this.options.xmlMode,(t=this._root)===null||t===void 0?void 0:t[0]))}tt.filter=Khe;function vO(e,t,r,i){return typeof t=="string"?ff.filter(t,e,{xmlMode:r,root:i}):e.filter(yp(t))}tt.filterArray=vO;function Zhe(e){var t=this.toArray();return typeof e=="string"?ff.some(t.filter(go.isTag),e,this.options):e?t.some(yp(e)):!1}tt.is=Zhe;function Qhe(e){var t=this.toArray();if(typeof e=="string"){var r=new Set(ff.filter(e,t,this.options));t=t.filter(function(n){return!r.has(n)})}else{var i=yp(e);t=t.filter(function(n,o){return!i(n,o)})}return this._make(t)}tt.not=Qhe;function Jhe(e){var t=this;return this.filter(typeof e=="string"?":has(".concat(e,")"):function(r,i){return t._make(i).find(e).length>0})}tt.has=Jhe;function ede(){return this.length>1?this._make(this[0]):this}tt.first=ede;function tde(){return this.length>0?this._make(this[this.length-1]):this}tt.last=tde;function rde(e){var t;return e=+e,e===0&&this.length<=1?this:(e<0&&(e=this.length+e),this._make((t=this[e])!==null&&t!==void 0?t:[]))}tt.eq=rde;function nde(e){return e==null?this.toArray():this[e<0?this.length+e:e]}tt.get=nde;function ide(){return Array.prototype.slice.call(this)}tt.toArray=ide;function ode(e){var t,r;return e==null?(t=this.parent().children(),r=this[0]):typeof e=="string"?(t=this._make(e),r=this[0]):(t=this,r=(0,go.isCheerio)(e)?e[0]:e),Array.prototype.indexOf.call(t,r)}tt.index=ode;function ade(e,t){return this._make(Array.prototype.slice.call(this,e,t))}tt.slice=ade;function sde(){var e;return(e=this.prevObject)!==null&&e!==void 0?e:this._make([])}tt.end=sde;function lde(e,t){var r=this._make(e,t),i=(0,Xo.uniqueSort)(dO(dO([],this.get(),!0),r.get(),!0));return this._make(i)}tt.add=lde;function cde(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this}tt.addBack=cde;var wt={},nc={};Object.defineProperty(nc,"__esModule",{value:!0}),nc.update=nc.getParse=void 0;var ude=po,Ej=Hn;function fde(e){return function(r,i,n,o){if(typeof Buffer<"u"&&Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string")return e(r,i,n,o);var a=r;if(!Array.isArray(a)&&(0,Ej.isDocument)(a))return a;var s=new Ej.Document([]);return Sj(a,s),s}}nc.getParse=fde;function Sj(e,t){var r=Array.isArray(e)?e:[e];t?t.children=r:t=null;for(var i=0;i<r.length;i++){var n=r[i];n.parent&&n.parent.children!==r&&(0,ude.removeElement)(n),t?(n.prev=r[i-1]||null,n.next=r[i+1]||null):n.prev=n.next=null,n.parent=t}return t}nc.update=Sj;var hde=De&&De.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(wt,"__esModule",{value:!0}),wt.clone=wt.text=wt.toString=wt.html=wt.empty=wt.replaceWith=wt.remove=wt.insertBefore=wt.before=wt.insertAfter=wt.after=wt.wrapAll=wt.unwrap=wt.wrapInner=wt.wrap=wt.prepend=wt.append=wt.prependTo=wt.appendTo=wt._makeDomArray=void 0;var Ko=Hn,df=nc,wj=Gr,rn=Ds,dde=po;function pde(e,t){var r=this;return e==null?[]:(0,rn.isCheerio)(e)?t?(0,rn.cloneDom)(e.get()):e.get():Array.isArray(e)?e.reduce(function(i,n){return i.concat(r._makeDomArray(n,t))},[]):typeof e=="string"?this._parse(e,this.options,!1,null).children:t?(0,rn.cloneDom)([e]):[e]}wt._makeDomArray=pde;function Aj(e){return function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var n=this.length-1;return(0,rn.domEach)(this,function(o,a){if((0,Ko.hasChildren)(o)){var s=typeof r[0]=="function"?r[0].call(o,a,t._render(o.children)):r,c=t._makeDomArray(s,a<n);e(c,o.children,o)}})}}function Rs(e,t,r,i,n){for(var o,a,s=hde([t,r],i,!0),c=t===0?null:e[t-1],u=t+r>=e.length?null:e[t+r],l=0;l<i.length;++l){var h=i[l],f=h.parent;if(f){var d=f.children,p=d.indexOf(h);p>-1&&(f.children.splice(p,1),n===f&&t>p&&s[0]--)}h.parent=n,h.prev&&(h.prev.next=(o=h.next)!==null&&o!==void 0?o:null),h.next&&(h.next.prev=(a=h.prev)!==null&&a!==void 0?a:null),h.prev=l===0?c:i[l-1],h.next=l===i.length-1?u:i[l+1]}return c&&(c.next=i[0]),u&&(u.prev=i[i.length-1]),e.splice.apply(e,s)}function mde(e){var t=(0,rn.isCheerio)(e)?e:this._make(e);return t.append(this),this}wt.appendTo=mde;function gde(e){var t=(0,rn.isCheerio)(e)?e:this._make(e);return t.prepend(this),this}wt.prependTo=gde,wt.append=Aj(function(e,t,r){Rs(t,t.length,0,e,r)}),wt.prepend=Aj(function(e,t,r){Rs(t,0,0,e,r)});function Oj(e){return function(t){for(var r=this.length-1,i=this.parents().last(),n=0;n<this.length;n++){var o=this[n],a=typeof t=="function"?t.call(o,n,o):typeof t=="string"&&!(0,rn.isHtml)(t)?i.find(t).clone():t,s=this._makeDomArray(a,n<r)[0];if(!(!s||!(0,Ko.hasChildren)(s))){for(var c=s,u=0;u<c.children.length;){var l=c.children[u];(0,rn.isTag)(l)?(c=l,u=0):u++}e(o,c,[s])}}return this}}wt.wrap=Oj(function(e,t,r){var i=e.parent;if(i){var n=i.children,o=n.indexOf(e);(0,df.update)([e],t),Rs(n,o,0,r,i)}}),wt.wrapInner=Oj(function(e,t,r){(0,Ko.hasChildren)(e)&&((0,df.update)(e.children,t),(0,df.update)(r,e))});function vde(e){var t=this;return this.parent(e).not("body").each(function(r,i){t._make(i).replaceWith(i.children)}),this}wt.unwrap=vde;function yde(e){var t=this[0];if(t){for(var r=this._make(typeof e=="function"?e.call(t,0,t):e).insertBefore(t),i=void 0,n=0;n<r.length;n++)r[n].type==="tag"&&(i=r[n]);for(var o=0;i&&o<i.children.length;){var a=i.children[o];a.type==="tag"?(i=a,o=0):o++}i&&this._make(i).append(this)}return this}wt.wrapAll=yde;function bde(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=this.length-1;return(0,rn.domEach)(this,function(n,o){var a=n.parent;if(!(!(0,Ko.hasChildren)(n)||!a)){var s=a.children,c=s.indexOf(n);if(!(c<0)){var u=typeof t[0]=="function"?t[0].call(n,o,e._render(n.children)):t,l=e._makeDomArray(u,o<i);Rs(s,c+1,0,l,a)}}})}wt.after=bde;function _de(e){var t=this;typeof e=="string"&&(e=this._make(e)),this.remove();var r=[];return this._makeDomArray(e).forEach(function(i){var n=t.clone().toArray(),o=i.parent;if(o){var a=o.children,s=a.indexOf(i);s<0||(Rs(a,s+1,0,n,o),r.push.apply(r,n))}}),this._make(r)}wt.insertAfter=_de;function Tde(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=this.length-1;return(0,rn.domEach)(this,function(n,o){var a=n.parent;if(!(!(0,Ko.hasChildren)(n)||!a)){var s=a.children,c=s.indexOf(n);if(!(c<0)){var u=typeof t[0]=="function"?t[0].call(n,o,e._render(n.children)):t,l=e._makeDomArray(u,o<i);Rs(s,c,0,l,a)}}})}wt.before=Tde;function Ede(e){var t=this,r=this._make(e);this.remove();var i=[];return(0,rn.domEach)(r,function(n){var o=t.clone().toArray(),a=n.parent;if(a){var s=a.children,c=s.indexOf(n);c<0||(Rs(s,c,0,o,a),i.push.apply(i,o))}}),this._make(i)}wt.insertBefore=Ede;function Sde(e){var t=e?this.filter(e):this;return(0,rn.domEach)(t,function(r){(0,dde.removeElement)(r),r.prev=r.next=r.parent=null}),this}wt.remove=Sde;function wde(e){var t=this;return(0,rn.domEach)(this,function(r,i){var n=r.parent;if(n){var o=n.children,a=typeof e=="function"?e.call(r,i,r):e,s=t._makeDomArray(a);(0,df.update)(s,null);var c=o.indexOf(r);Rs(o,c,1,s,n),s.includes(r)||(r.parent=r.prev=r.next=null)}})}wt.replaceWith=wde;function Ade(){return(0,rn.domEach)(this,function(e){(0,Ko.hasChildren)(e)&&(e.children.forEach(function(t){t.next=t.prev=t.parent=null}),e.children.length=0)})}wt.empty=Ade;function Ode(e){var t=this;if(e===void 0){var r=this[0];return!r||!(0,Ko.hasChildren)(r)?null:this._render(r.children)}return(0,rn.domEach)(this,function(i){if((0,Ko.hasChildren)(i)){i.children.forEach(function(o){o.next=o.prev=o.parent=null});var n=(0,rn.isCheerio)(e)?e.toArray():t._parse("".concat(e),t.options,!1,i).children;(0,df.update)(n,i)}})}wt.html=Ode;function kde(){return this._render(this)}wt.toString=kde;function Ide(e){var t=this;return e===void 0?(0,wj.text)(this):typeof e=="function"?(0,rn.domEach)(this,function(r,i){return t._make(r).text(e.call(r,i,(0,wj.text)([r])))}):(0,rn.domEach)(this,function(r){if((0,Ko.hasChildren)(r)){r.children.forEach(function(n){n.next=n.prev=n.parent=null});var i=new Ko.Text("".concat(e));(0,df.update)(i,r)}})}wt.text=Ide;function Cde(){return this._make((0,rn.cloneDom)(this.get()))}wt.clone=Cde;var fb={};Object.defineProperty(fb,"__esModule",{value:!0}),fb.css=void 0;var yO=Ds;function Pde(e,t){if(e!=null&&t!=null||typeof e=="object"&&!Array.isArray(e))return(0,yO.domEach)(this,function(r,i){(0,yO.isTag)(r)&&kj(r,e,t,i)});if(this.length!==0)return Ij(this[0],e)}fb.css=Pde;function kj(e,t,r,i){if(typeof t=="string"){var n=Ij(e),o=typeof r=="function"?r.call(e,i,n[t]):r;o===""?delete n[t]:o!=null&&(n[t]=o),e.attribs.style=Dde(n)}else typeof t=="object"&&Object.keys(t).forEach(function(a,s){kj(e,a,t[a],s)})}function Ij(e,t){if(!(!e||!(0,yO.isTag)(e))){var r=xde(e.attribs.style);if(typeof t=="string")return r[t];if(Array.isArray(t)){var i={};return t.forEach(function(n){r[n]!=null&&(i[n]=r[n])}),i}return r}}function Dde(e){return Object.keys(e).reduce(function(t,r){return"".concat(t).concat(t?" ":"").concat(r,": ").concat(e[r],";")},"")}function xde(e){if(e=(e||"").trim(),!e)return{};for(var t={},r,i=0,n=e.split(";");i<n.length;i++){var o=n[i],a=o.indexOf(":");if(a<1||a===o.length-1){var s=o.trimEnd();s.length>0&&r!==void 0&&(t[r]+=";".concat(s))}else r=o.slice(0,a).trim(),t[r]=o.slice(a+1).trim()}return t}var pf={};Object.defineProperty(pf,"__esModule",{value:!0}),pf.serializeArray=pf.serialize=void 0;var Nde=Ds,Cj="input,select,textarea,keygen",Rde=/%20/g,Pj=/\r?\n/g;function Mde(){var e=this.serializeArray(),t=e.map(function(r){return"".concat(encodeURIComponent(r.name),"=").concat(encodeURIComponent(r.value))});return t.join("&").replace(Rde,"+")}pf.serialize=Mde;function Lde(){var e=this;return this.map(function(t,r){var i=e._make(r);return(0,Nde.isTag)(r)&&r.name==="form"?i.find(Cj).toArray():i.filter(Cj).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(function(t,r){var i,n=e._make(r),o=n.attr("name"),a=(i=n.val())!==null&&i!==void 0?i:"";return Array.isArray(a)?a.map(function(s){return{name:o,value:s.replace(Pj,`\r
`)}}):{name:o,value:a.replace(Pj,`\r
`)}}).toArray()}pf.serializeArray=Lde;var Bde=De&&De.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Hde=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bp=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Bde(t,e,r);return Hde(t,e),t};Object.defineProperty(tb,"__esModule",{value:!0}),tb.Cheerio=void 0;var $de=bp(Xr),Fde=bp(tt),jde=bp(wt),Ude=bp(fb),Gde=bp(pf),_p=function(){function e(t,r,i){if(this.length=0,this.options=i,this._root=r,t){for(var n=0;n<t.length;n++)this[n]=t[n];this.length=t.length}}return e}();tb.Cheerio=_p,_p.prototype.cheerio="[cheerio object]",_p.prototype.splice=Array.prototype.splice,_p.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(_p.prototype,$de,Fde,jde,Ude,Gde);var zde=De&&De.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),mf=De&&De.__assign||function(){return mf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},mf.apply(this,arguments)},Vde=De&&De.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Wde=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Dj=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Vde(t,e,r);return Wde(t,e),t};Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.getLoad=void 0;var bO=Dj(Zu),Yde=Dj(Gr),qde=tb,Tp=Ds;function Xde(e,t){return function r(i,n,o){if(o===void 0&&(o=!0),i==null)throw new Error("cheerio.load() expects a string");var a=mf(mf({},bO.default),(0,bO.flatten)(n)),s=e(i,a,o,null),c=function(l){zde(h,l);function h(){return l!==null&&l.apply(this,arguments)||this}return h.prototype._make=function(f,d){var p=u(f,d);return p.prevObject=this,p},h.prototype._parse=function(f,d,p,m){return e(f,d,p,m)},h.prototype._render=function(f){return t(f,this.options)},h}(qde.Cheerio);function u(l,h,f,d){if(f===void 0&&(f=s),l&&(0,Tp.isCheerio)(l))return l;var p=mf(mf({},a),(0,bO.flatten)(d)),m=typeof f=="string"?[e(f,p,!1,null)]:"length"in f?f:[f],g=(0,Tp.isCheerio)(m)?m:new c(m,null,p);if(g._root=g,!l)return new c(void 0,g,p);var v=typeof l=="string"&&(0,Tp.isHtml)(l)?e(l,p,!1,null).children:Kde(l)?[l]:Array.isArray(l)?l:void 0,_=new c(v,g,p);if(v)return _;if(typeof l!="string")throw new Error("Unexpected type of selector");var y=l,b=h?typeof h=="string"?(0,Tp.isHtml)(h)?new c([e(h,p,!1,null)],g,p):(y="".concat(h," ").concat(y),g):(0,Tp.isCheerio)(h)?h:new c(Array.isArray(h)?h:[h],g,p):g;return b?b.find(y):_}return Object.assign(u,Yde,{load:r,_root:s,_options:a,fn:c.prototype,prototype:c.prototype}),u}}Uy.getLoad=Xde;function Kde(e){return!!e.name||e.type==="root"||e.type==="text"||e.type==="comment"}var gf={},xj={},Ep={},ic={},hb={},db={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);e.REPLACEMENT_CHARACTER="\uFFFD",function(s){s[s.EOF=-1]="EOF",s[s.NULL=0]="NULL",s[s.TABULATION=9]="TABULATION",s[s.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",s[s.LINE_FEED=10]="LINE_FEED",s[s.FORM_FEED=12]="FORM_FEED",s[s.SPACE=32]="SPACE",s[s.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",s[s.QUOTATION_MARK=34]="QUOTATION_MARK",s[s.NUMBER_SIGN=35]="NUMBER_SIGN",s[s.AMPERSAND=38]="AMPERSAND",s[s.APOSTROPHE=39]="APOSTROPHE",s[s.HYPHEN_MINUS=45]="HYPHEN_MINUS",s[s.SOLIDUS=47]="SOLIDUS",s[s.DIGIT_0=48]="DIGIT_0",s[s.DIGIT_9=57]="DIGIT_9",s[s.SEMICOLON=59]="SEMICOLON",s[s.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",s[s.EQUALS_SIGN=61]="EQUALS_SIGN",s[s.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",s[s.QUESTION_MARK=63]="QUESTION_MARK",s[s.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",s[s.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",s[s.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",s[s.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",s[s.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",s[s.GRAVE_ACCENT=96]="GRAVE_ACCENT",s[s.LATIN_SMALL_A=97]="LATIN_SMALL_A",s[s.LATIN_SMALL_F=102]="LATIN_SMALL_F",s[s.LATIN_SMALL_X=120]="LATIN_SMALL_X",s[s.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",s[s.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(e.CODE_POINTS||(e.CODE_POINTS={})),e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function r(s){return s>=55296&&s<=57343}e.isSurrogate=r;function i(s){return s>=56320&&s<=57343}e.isSurrogatePair=i;function n(s,c){return(s-55296)*1024+9216+c}e.getSurrogatePairCodePoint=n;function o(s){return s!==32&&s!==10&&s!==13&&s!==9&&s!==12&&s>=1&&s<=31||s>=127&&s<=159}e.isControlCodePoint=o;function a(s){return s>=64976&&s<=65007||t.has(s)}e.isUndefinedCodePoint=a})(db);var Sp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(e.ERR||(e.ERR={}))})(Sp);function Zde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nj(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Jde(i.key),i)}}function Qde(e,t,r){return t&&Nj(e.prototype,t),r&&Nj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jde(e){var t=epe(e,"string");return typeof t=="symbol"?t:String(t)}function epe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(hb,"__esModule",{value:!0}),hb.Preprocessor=void 0;const Kn=db,_O=Sp,tpe=65536;let rpe=function(){function e(t){Zde(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=tpe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return Qde(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(r){const{line:i,col:n,offset:o}=this;return{code:r,startLine:i,endLine:i,startCol:n,endCol:n,startOffset:o,endOffset:o}}},{key:"_err",value:function(r){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(r)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(r){if(this.pos!==this.html.length-1){const i=this.html.charCodeAt(this.pos+1);if((0,Kn.isSurrogatePair)(i))return this.pos++,this._addGap(),(0,Kn.getSurrogatePairCodePoint)(r,i)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Kn.CODE_POINTS.EOF;return this._err(_O.ERR.surrogateInInputStream),r}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(r,i){this.html.length>0?this.html+=r:this.html=r,this.endOfChunkHit=!1,this.lastChunkWritten=i}},{key:"insertHtmlAtCurrentPos",value:function(r){this.html=this.html.substring(0,this.pos+1)+r+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(r,i){if(this.pos+r.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(i)return this.html.startsWith(r,this.pos);for(let n=0;n<r.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==r.charCodeAt(n))return!1;return!0}},{key:"peek",value:function(r){const i=this.pos+r;if(i>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Kn.CODE_POINTS.EOF;const n=this.html.charCodeAt(i);return n===Kn.CODE_POINTS.CARRIAGE_RETURN?Kn.CODE_POINTS.LINE_FEED:n}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Kn.CODE_POINTS.EOF;let r=this.html.charCodeAt(this.pos);return r===Kn.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Kn.CODE_POINTS.LINE_FEED):r===Kn.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,Kn.isSurrogate)(r)&&(r=this._processSurrogate(r)),this.handler.onParseError===null||r>31&&r<127||r===Kn.CODE_POINTS.LINE_FEED||r===Kn.CODE_POINTS.CARRIAGE_RETURN||r>159&&r<64976||this._checkForProblematicCharacters(r),r)}},{key:"_checkForProblematicCharacters",value:function(r){(0,Kn.isControlCodePoint)(r)?this._err(_O.ERR.controlCharacterInInputStream):(0,Kn.isUndefinedCodePoint)(r)&&this._err(_O.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(r){for(this.pos-=r;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();hb.Preprocessor=rpe;var pb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,function(r){r[r.CHARACTER=0]="CHARACTER",r[r.NULL_CHARACTER=1]="NULL_CHARACTER",r[r.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",r[r.START_TAG=3]="START_TAG",r[r.END_TAG=4]="END_TAG",r[r.COMMENT=5]="COMMENT",r[r.DOCTYPE=6]="DOCTYPE",r[r.EOF=7]="EOF",r[r.HIBERNATION=8]="HIBERNATION"}(e.TokenType||(e.TokenType={}));function t(r,i){for(let n=r.attrs.length-1;n>=0;n--)if(r.attrs[n].name===i)return r.attrs[n].value;return null}e.getTokenAttr=t})(pb);var Ga={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0;var t;(function(l){l.HTML="http://www.w3.org/1999/xhtml",l.MATHML="http://www.w3.org/1998/Math/MathML",l.SVG="http://www.w3.org/2000/svg",l.XLINK="http://www.w3.org/1999/xlink",l.XML="http://www.w3.org/XML/1998/namespace",l.XMLNS="http://www.w3.org/2000/xmlns/"})(t=e.NS||(e.NS={})),function(l){l.TYPE="type",l.ACTION="action",l.ENCODING="encoding",l.PROMPT="prompt",l.NAME="name",l.COLOR="color",l.FACE="face",l.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(l){l.NO_QUIRKS="no-quirks",l.QUIRKS="quirks",l.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={}));var r;(function(l){l.A="a",l.ADDRESS="address",l.ANNOTATION_XML="annotation-xml",l.APPLET="applet",l.AREA="area",l.ARTICLE="article",l.ASIDE="aside",l.B="b",l.BASE="base",l.BASEFONT="basefont",l.BGSOUND="bgsound",l.BIG="big",l.BLOCKQUOTE="blockquote",l.BODY="body",l.BR="br",l.BUTTON="button",l.CAPTION="caption",l.CENTER="center",l.CODE="code",l.COL="col",l.COLGROUP="colgroup",l.DD="dd",l.DESC="desc",l.DETAILS="details",l.DIALOG="dialog",l.DIR="dir",l.DIV="div",l.DL="dl",l.DT="dt",l.EM="em",l.EMBED="embed",l.FIELDSET="fieldset",l.FIGCAPTION="figcaption",l.FIGURE="figure",l.FONT="font",l.FOOTER="footer",l.FOREIGN_OBJECT="foreignObject",l.FORM="form",l.FRAME="frame",l.FRAMESET="frameset",l.H1="h1",l.H2="h2",l.H3="h3",l.H4="h4",l.H5="h5",l.H6="h6",l.HEAD="head",l.HEADER="header",l.HGROUP="hgroup",l.HR="hr",l.HTML="html",l.I="i",l.IMG="img",l.IMAGE="image",l.INPUT="input",l.IFRAME="iframe",l.KEYGEN="keygen",l.LABEL="label",l.LI="li",l.LINK="link",l.LISTING="listing",l.MAIN="main",l.MALIGNMARK="malignmark",l.MARQUEE="marquee",l.MATH="math",l.MENU="menu",l.META="meta",l.MGLYPH="mglyph",l.MI="mi",l.MO="mo",l.MN="mn",l.MS="ms",l.MTEXT="mtext",l.NAV="nav",l.NOBR="nobr",l.NOFRAMES="noframes",l.NOEMBED="noembed",l.NOSCRIPT="noscript",l.OBJECT="object",l.OL="ol",l.OPTGROUP="optgroup",l.OPTION="option",l.P="p",l.PARAM="param",l.PLAINTEXT="plaintext",l.PRE="pre",l.RB="rb",l.RP="rp",l.RT="rt",l.RTC="rtc",l.RUBY="ruby",l.S="s",l.SCRIPT="script",l.SECTION="section",l.SELECT="select",l.SOURCE="source",l.SMALL="small",l.SPAN="span",l.STRIKE="strike",l.STRONG="strong",l.STYLE="style",l.SUB="sub",l.SUMMARY="summary",l.SUP="sup",l.TABLE="table",l.TBODY="tbody",l.TEMPLATE="template",l.TEXTAREA="textarea",l.TFOOT="tfoot",l.TD="td",l.TH="th",l.THEAD="thead",l.TITLE="title",l.TR="tr",l.TRACK="track",l.TT="tt",l.U="u",l.UL="ul",l.SVG="svg",l.VAR="var",l.WBR="wbr",l.XMP="xmp"})(r=e.TAG_NAMES||(e.TAG_NAMES={}));var i;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.A=1]="A",l[l.ADDRESS=2]="ADDRESS",l[l.ANNOTATION_XML=3]="ANNOTATION_XML",l[l.APPLET=4]="APPLET",l[l.AREA=5]="AREA",l[l.ARTICLE=6]="ARTICLE",l[l.ASIDE=7]="ASIDE",l[l.B=8]="B",l[l.BASE=9]="BASE",l[l.BASEFONT=10]="BASEFONT",l[l.BGSOUND=11]="BGSOUND",l[l.BIG=12]="BIG",l[l.BLOCKQUOTE=13]="BLOCKQUOTE",l[l.BODY=14]="BODY",l[l.BR=15]="BR",l[l.BUTTON=16]="BUTTON",l[l.CAPTION=17]="CAPTION",l[l.CENTER=18]="CENTER",l[l.CODE=19]="CODE",l[l.COL=20]="COL",l[l.COLGROUP=21]="COLGROUP",l[l.DD=22]="DD",l[l.DESC=23]="DESC",l[l.DETAILS=24]="DETAILS",l[l.DIALOG=25]="DIALOG",l[l.DIR=26]="DIR",l[l.DIV=27]="DIV",l[l.DL=28]="DL",l[l.DT=29]="DT",l[l.EM=30]="EM",l[l.EMBED=31]="EMBED",l[l.FIELDSET=32]="FIELDSET",l[l.FIGCAPTION=33]="FIGCAPTION",l[l.FIGURE=34]="FIGURE",l[l.FONT=35]="FONT",l[l.FOOTER=36]="FOOTER",l[l.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",l[l.FORM=38]="FORM",l[l.FRAME=39]="FRAME",l[l.FRAMESET=40]="FRAMESET",l[l.H1=41]="H1",l[l.H2=42]="H2",l[l.H3=43]="H3",l[l.H4=44]="H4",l[l.H5=45]="H5",l[l.H6=46]="H6",l[l.HEAD=47]="HEAD",l[l.HEADER=48]="HEADER",l[l.HGROUP=49]="HGROUP",l[l.HR=50]="HR",l[l.HTML=51]="HTML",l[l.I=52]="I",l[l.IMG=53]="IMG",l[l.IMAGE=54]="IMAGE",l[l.INPUT=55]="INPUT",l[l.IFRAME=56]="IFRAME",l[l.KEYGEN=57]="KEYGEN",l[l.LABEL=58]="LABEL",l[l.LI=59]="LI",l[l.LINK=60]="LINK",l[l.LISTING=61]="LISTING",l[l.MAIN=62]="MAIN",l[l.MALIGNMARK=63]="MALIGNMARK",l[l.MARQUEE=64]="MARQUEE",l[l.MATH=65]="MATH",l[l.MENU=66]="MENU",l[l.META=67]="META",l[l.MGLYPH=68]="MGLYPH",l[l.MI=69]="MI",l[l.MO=70]="MO",l[l.MN=71]="MN",l[l.MS=72]="MS",l[l.MTEXT=73]="MTEXT",l[l.NAV=74]="NAV",l[l.NOBR=75]="NOBR",l[l.NOFRAMES=76]="NOFRAMES",l[l.NOEMBED=77]="NOEMBED",l[l.NOSCRIPT=78]="NOSCRIPT",l[l.OBJECT=79]="OBJECT",l[l.OL=80]="OL",l[l.OPTGROUP=81]="OPTGROUP",l[l.OPTION=82]="OPTION",l[l.P=83]="P",l[l.PARAM=84]="PARAM",l[l.PLAINTEXT=85]="PLAINTEXT",l[l.PRE=86]="PRE",l[l.RB=87]="RB",l[l.RP=88]="RP",l[l.RT=89]="RT",l[l.RTC=90]="RTC",l[l.RUBY=91]="RUBY",l[l.S=92]="S",l[l.SCRIPT=93]="SCRIPT",l[l.SECTION=94]="SECTION",l[l.SELECT=95]="SELECT",l[l.SOURCE=96]="SOURCE",l[l.SMALL=97]="SMALL",l[l.SPAN=98]="SPAN",l[l.STRIKE=99]="STRIKE",l[l.STRONG=100]="STRONG",l[l.STYLE=101]="STYLE",l[l.SUB=102]="SUB",l[l.SUMMARY=103]="SUMMARY",l[l.SUP=104]="SUP",l[l.TABLE=105]="TABLE",l[l.TBODY=106]="TBODY",l[l.TEMPLATE=107]="TEMPLATE",l[l.TEXTAREA=108]="TEXTAREA",l[l.TFOOT=109]="TFOOT",l[l.TD=110]="TD",l[l.TH=111]="TH",l[l.THEAD=112]="THEAD",l[l.TITLE=113]="TITLE",l[l.TR=114]="TR",l[l.TRACK=115]="TRACK",l[l.TT=116]="TT",l[l.U=117]="U",l[l.UL=118]="UL",l[l.SVG=119]="SVG",l[l.VAR=120]="VAR",l[l.WBR=121]="WBR",l[l.XMP=122]="XMP"})(i=e.TAG_ID||(e.TAG_ID={}));const n=new Map([[r.A,i.A],[r.ADDRESS,i.ADDRESS],[r.ANNOTATION_XML,i.ANNOTATION_XML],[r.APPLET,i.APPLET],[r.AREA,i.AREA],[r.ARTICLE,i.ARTICLE],[r.ASIDE,i.ASIDE],[r.B,i.B],[r.BASE,i.BASE],[r.BASEFONT,i.BASEFONT],[r.BGSOUND,i.BGSOUND],[r.BIG,i.BIG],[r.BLOCKQUOTE,i.BLOCKQUOTE],[r.BODY,i.BODY],[r.BR,i.BR],[r.BUTTON,i.BUTTON],[r.CAPTION,i.CAPTION],[r.CENTER,i.CENTER],[r.CODE,i.CODE],[r.COL,i.COL],[r.COLGROUP,i.COLGROUP],[r.DD,i.DD],[r.DESC,i.DESC],[r.DETAILS,i.DETAILS],[r.DIALOG,i.DIALOG],[r.DIR,i.DIR],[r.DIV,i.DIV],[r.DL,i.DL],[r.DT,i.DT],[r.EM,i.EM],[r.EMBED,i.EMBED],[r.FIELDSET,i.FIELDSET],[r.FIGCAPTION,i.FIGCAPTION],[r.FIGURE,i.FIGURE],[r.FONT,i.FONT],[r.FOOTER,i.FOOTER],[r.FOREIGN_OBJECT,i.FOREIGN_OBJECT],[r.FORM,i.FORM],[r.FRAME,i.FRAME],[r.FRAMESET,i.FRAMESET],[r.H1,i.H1],[r.H2,i.H2],[r.H3,i.H3],[r.H4,i.H4],[r.H5,i.H5],[r.H6,i.H6],[r.HEAD,i.HEAD],[r.HEADER,i.HEADER],[r.HGROUP,i.HGROUP],[r.HR,i.HR],[r.HTML,i.HTML],[r.I,i.I],[r.IMG,i.IMG],[r.IMAGE,i.IMAGE],[r.INPUT,i.INPUT],[r.IFRAME,i.IFRAME],[r.KEYGEN,i.KEYGEN],[r.LABEL,i.LABEL],[r.LI,i.LI],[r.LINK,i.LINK],[r.LISTING,i.LISTING],[r.MAIN,i.MAIN],[r.MALIGNMARK,i.MALIGNMARK],[r.MARQUEE,i.MARQUEE],[r.MATH,i.MATH],[r.MENU,i.MENU],[r.META,i.META],[r.MGLYPH,i.MGLYPH],[r.MI,i.MI],[r.MO,i.MO],[r.MN,i.MN],[r.MS,i.MS],[r.MTEXT,i.MTEXT],[r.NAV,i.NAV],[r.NOBR,i.NOBR],[r.NOFRAMES,i.NOFRAMES],[r.NOEMBED,i.NOEMBED],[r.NOSCRIPT,i.NOSCRIPT],[r.OBJECT,i.OBJECT],[r.OL,i.OL],[r.OPTGROUP,i.OPTGROUP],[r.OPTION,i.OPTION],[r.P,i.P],[r.PARAM,i.PARAM],[r.PLAINTEXT,i.PLAINTEXT],[r.PRE,i.PRE],[r.RB,i.RB],[r.RP,i.RP],[r.RT,i.RT],[r.RTC,i.RTC],[r.RUBY,i.RUBY],[r.S,i.S],[r.SCRIPT,i.SCRIPT],[r.SECTION,i.SECTION],[r.SELECT,i.SELECT],[r.SOURCE,i.SOURCE],[r.SMALL,i.SMALL],[r.SPAN,i.SPAN],[r.STRIKE,i.STRIKE],[r.STRONG,i.STRONG],[r.STYLE,i.STYLE],[r.SUB,i.SUB],[r.SUMMARY,i.SUMMARY],[r.SUP,i.SUP],[r.TABLE,i.TABLE],[r.TBODY,i.TBODY],[r.TEMPLATE,i.TEMPLATE],[r.TEXTAREA,i.TEXTAREA],[r.TFOOT,i.TFOOT],[r.TD,i.TD],[r.TH,i.TH],[r.THEAD,i.THEAD],[r.TITLE,i.TITLE],[r.TR,i.TR],[r.TRACK,i.TRACK],[r.TT,i.TT],[r.U,i.U],[r.UL,i.UL],[r.SVG,i.SVG],[r.VAR,i.VAR],[r.WBR,i.WBR],[r.XMP,i.XMP]]);function o(l){var h;return(h=n.get(l))!==null&&h!==void 0?h:i.UNKNOWN}e.getTagID=o;const a=i;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([a.ADDRESS,a.APPLET,a.AREA,a.ARTICLE,a.ASIDE,a.BASE,a.BASEFONT,a.BGSOUND,a.BLOCKQUOTE,a.BODY,a.BR,a.BUTTON,a.CAPTION,a.CENTER,a.COL,a.COLGROUP,a.DD,a.DETAILS,a.DIR,a.DIV,a.DL,a.DT,a.EMBED,a.FIELDSET,a.FIGCAPTION,a.FIGURE,a.FOOTER,a.FORM,a.FRAME,a.FRAMESET,a.H1,a.H2,a.H3,a.H4,a.H5,a.H6,a.HEAD,a.HEADER,a.HGROUP,a.HR,a.HTML,a.IFRAME,a.IMG,a.INPUT,a.LI,a.LINK,a.LISTING,a.MAIN,a.MARQUEE,a.MENU,a.META,a.NAV,a.NOEMBED,a.NOFRAMES,a.NOSCRIPT,a.OBJECT,a.OL,a.P,a.PARAM,a.PLAINTEXT,a.PRE,a.SCRIPT,a.SECTION,a.SELECT,a.SOURCE,a.STYLE,a.SUMMARY,a.TABLE,a.TBODY,a.TD,a.TEMPLATE,a.TEXTAREA,a.TFOOT,a.TH,a.THEAD,a.TITLE,a.TR,a.TRACK,a.UL,a.WBR,a.XMP]),[t.MATHML]:new Set([a.MI,a.MO,a.MN,a.MS,a.MTEXT,a.ANNOTATION_XML]),[t.SVG]:new Set([a.TITLE,a.FOREIGN_OBJECT,a.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set};function s(l){return l===a.H1||l===a.H2||l===a.H3||l===a.H4||l===a.H5||l===a.H6}e.isNumberedHeader=s;const c=new Set([r.STYLE,r.SCRIPT,r.XMP,r.IFRAME,r.NOEMBED,r.NOFRAMES,r.PLAINTEXT]);function u(l,h){return c.has(l)||h&&l===r.NOSCRIPT}e.hasUnescapedText=u})(Ga);function npe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rj(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ope(i.key),i)}}function ipe(e,t,r){return t&&Rj(e.prototype,t),r&&Rj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ope(e){var t=ape(e,"string");return typeof t=="symbol"?t:String(t)}function ape(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(ic,"__esModule",{value:!0}),ic.Tokenizer=ic.TokenizerMode=void 0;const spe=hb,z=db,gi=pb,Zo=Zl,Ne=Sp,TO=Ga,lpe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={})),ic.TokenizerMode={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function wp(e){return e>=z.CODE_POINTS.DIGIT_0&&e<=z.CODE_POINTS.DIGIT_9}function Ap(e){return e>=z.CODE_POINTS.LATIN_CAPITAL_A&&e<=z.CODE_POINTS.LATIN_CAPITAL_Z}function cpe(e){return e>=z.CODE_POINTS.LATIN_SMALL_A&&e<=z.CODE_POINTS.LATIN_SMALL_Z}function Ms(e){return cpe(e)||Ap(e)}function EO(e){return Ms(e)||wp(e)}function Mj(e){return e>=z.CODE_POINTS.LATIN_CAPITAL_A&&e<=z.CODE_POINTS.LATIN_CAPITAL_F}function Lj(e){return e>=z.CODE_POINTS.LATIN_SMALL_A&&e<=z.CODE_POINTS.LATIN_SMALL_F}function upe(e){return wp(e)||Mj(e)||Lj(e)}function mb(e){return e+32}function Bj(e){return e===z.CODE_POINTS.SPACE||e===z.CODE_POINTS.LINE_FEED||e===z.CODE_POINTS.TABULATION||e===z.CODE_POINTS.FORM_FEED}function fpe(e){return e===z.CODE_POINTS.EQUALS_SIGN||EO(e)}function Hj(e){return Bj(e)||e===z.CODE_POINTS.SOLIDUS||e===z.CODE_POINTS.GREATER_THAN_SIGN}let hpe=function(){function e(t,r){npe(this,e),this.options=t,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new spe.Preprocessor(r),this.currentLocation=this.getCurrentLocation(-1)}return ipe(e,[{key:"_err",value:function(r){var i,n;(n=(i=this.handler).onParseError)===null||n===void 0||n.call(i,this.preprocessor.getError(r))}},{key:"getCurrentLocation",value:function(r){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-r,startOffset:this.preprocessor.offset-r,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const r=this._consume();this._ensureHibernation()||this._callState(r)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(r){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||r?.())}},{key:"write",value:function(r,i,n){this.active=!0,this.preprocessor.write(r,i),this._runParsingLoop(),this.paused||n?.()}},{key:"insertHtmlAtCurrentPos",value:function(r){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(r),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(r){this.consumedAfterSnapshot-=r,this.preprocessor.retreat(r)}},{key:"_reconsumeInState",value:function(r,i){this.state=r,this._callState(i)}},{key:"_advanceBy",value:function(r){this.consumedAfterSnapshot+=r;for(let i=0;i<r;i++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(r,i){return this.preprocessor.startsWith(r,i)?(this._advanceBy(r.length-1),!0):!1}},{key:"_createStartTagToken",value:function(){this.currentToken={type:gi.TokenType.START_TAG,tagName:"",tagID:TO.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:gi.TokenType.END_TAG,tagName:"",tagID:TO.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(r){this.currentToken={type:gi.TokenType.COMMENT,data:"",location:this.getCurrentLocation(r)}}},{key:"_createDoctypeToken",value:function(r){this.currentToken={type:gi.TokenType.DOCTYPE,name:r,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(r,i){this.currentCharacterToken={type:r,chars:i,location:this.currentLocation}}},{key:"_createAttr",value:function(r){this.currentAttr={name:r,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var r,i;const n=this.currentToken;if((0,gi.getTokenAttr)(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const o=(r=(i=n.location).attrs)!==null&&r!==void 0?r:i.attrs=Object.create(null);o[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(r){this._emitCurrentCharacterToken(r.location),this.currentToken=null,r.location&&(r.location.endLine=this.preprocessor.line,r.location.endCol=this.preprocessor.col+1,r.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const r=this.currentToken;this.prepareToken(r),r.tagID=(0,TO.getTagID)(r.tagName),r.type===gi.TokenType.START_TAG?(this.lastStartTagName=r.tagName,this.handler.onStartTag(r)):(r.attrs.length>0&&this._err(Ne.ERR.endTagWithAttributes),r.selfClosing&&this._err(Ne.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(r)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(r){this.prepareToken(r),this.handler.onComment(r),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(r){this.prepareToken(r),this.handler.onDoctype(r),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(r){if(this.currentCharacterToken){switch(r&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=r.startLine,this.currentCharacterToken.location.endCol=r.startCol,this.currentCharacterToken.location.endOffset=r.startOffset),this.currentCharacterToken.type){case gi.TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case gi.TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case gi.TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const r=this.getCurrentLocation(0);r&&(r.endLine=r.startLine,r.endCol=r.startCol,r.endOffset=r.startOffset),this._emitCurrentCharacterToken(r),this.handler.onEof({type:gi.TokenType.EOF,location:r}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(r,i){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==r)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=i;return}this._createCharacterToken(r,i)}},{key:"_emitCodePoint",value:function(r){const i=Bj(r)?gi.TokenType.WHITESPACE_CHARACTER:r===z.CODE_POINTS.NULL?gi.TokenType.NULL_CHARACTER:gi.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(i,String.fromCodePoint(r))}},{key:"_emitChars",value:function(r){this._appendCharToCurrentCharacterToken(gi.TokenType.CHARACTER,r)}},{key:"_matchNamedCharacterReference",value:function(r){let i=null,n=0,o=!1;for(let a=0,s=Zo.htmlDecodeTree[0];a>=0&&(a=(0,Zo.determineBranch)(Zo.htmlDecodeTree,s,a+1,r),!(a<0));r=this._consume()){n+=1,s=Zo.htmlDecodeTree[a];const c=s&Zo.BinTrieFlags.VALUE_LENGTH;if(c){const u=(c>>14)-1;if(r!==z.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&fpe(this.preprocessor.peek(1))?(i=[z.CODE_POINTS.AMPERSAND],a+=u):(i=u===0?[Zo.htmlDecodeTree[a]&~Zo.BinTrieFlags.VALUE_LENGTH]:u===1?[Zo.htmlDecodeTree[++a]]:[Zo.htmlDecodeTree[++a],Zo.htmlDecodeTree[++a]],n=0,o=r!==z.CODE_POINTS.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(n),o&&!this.preprocessor.endOfChunkHit&&this._err(Ne.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),i}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(r){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(r):this._emitCodePoint(r)}},{key:"_callState",value:function(r){switch(this.state){case J.DATA:{this._stateData(r);break}case J.RCDATA:{this._stateRcdata(r);break}case J.RAWTEXT:{this._stateRawtext(r);break}case J.SCRIPT_DATA:{this._stateScriptData(r);break}case J.PLAINTEXT:{this._statePlaintext(r);break}case J.TAG_OPEN:{this._stateTagOpen(r);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(r);break}case J.TAG_NAME:{this._stateTagName(r);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(r);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(r);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(r);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(r);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(r);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(r);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(r);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(r);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(r);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(r);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(r);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(r);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(r);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(r);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(r);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(r);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(r);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(r);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(r);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(r);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(r);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(r);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(r);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(r);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(r);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(r);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(r);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(r);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(r);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(r);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(r);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(r);break}case J.BOGUS_COMMENT:{this._stateBogusComment(r);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(r);break}case J.COMMENT_START:{this._stateCommentStart(r);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(r);break}case J.COMMENT:{this._stateComment(r);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(r);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(r);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(r);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(r);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(r);break}case J.COMMENT_END:{this._stateCommentEnd(r);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(r);break}case J.DOCTYPE:{this._stateDoctype(r);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(r);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(r);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(r);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(r);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(r);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(r);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(r);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(r);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(r);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(r);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(r);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(r);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(r);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(r);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(r);break}case J.CDATA_SECTION:{this._stateCdataSection(r);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(r);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(r);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(r);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(r);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(r);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(r);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(r);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(r);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(r);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(r);break}default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(r){switch(r){case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case z.CODE_POINTS.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitCodePoint(r);break}case z.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateRcdata",value:function(r){switch(r){case z.CODE_POINTS.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateRawtext",value:function(r){switch(r){case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateScriptData",value:function(r){switch(r){case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_statePlaintext",value:function(r){switch(r){case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateTagOpen",value:function(r){if(Ms(r))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(r);else switch(r){case z.CODE_POINTS.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case z.CODE_POINTS.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case z.CODE_POINTS.QUESTION_MARK:{this._err(Ne.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(r);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(r)}}},{key:"_stateEndTagOpen",value:function(r){if(Ms(r))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(r);else switch(r){case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingEndTagName),this.state=J.DATA;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(r)}}},{key:"_stateTagName",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case z.CODE_POINTS.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.tagName+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:i.tagName+=String.fromCodePoint(Ap(r)?mb(r):r)}}},{key:"_stateRcdataLessThanSign",value:function(r){r===z.CODE_POINTS.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(r))}},{key:"_stateRcdataEndTagOpen",value:function(r){Ms(r)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(r)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(r))}},{key:"handleSpecialEndTag",value:function(r){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const i=this.currentToken;switch(i.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case z.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case z.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(r))}},{key:"_stateRawtextLessThanSign",value:function(r){r===z.CODE_POINTS.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(r))}},{key:"_stateRawtextEndTagOpen",value:function(r){Ms(r)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(r)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(r))}},{key:"_stateRawtextEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(r))}},{key:"_stateScriptDataLessThanSign",value:function(r){switch(r){case z.CODE_POINTS.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case z.CODE_POINTS.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(r)}}},{key:"_stateScriptDataEndTagOpen",value:function(r){Ms(r)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(r)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEscapeStart",value:function(r){r===z.CODE_POINTS.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEscapeStartDash",value:function(r){r===z.CODE_POINTS.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEscaped",value:function(r){switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateScriptDataEscapedDash",value:function(r){switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataEscapedDashDash",value:function(r){switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(r){r===z.CODE_POINTS.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ms(r)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(r)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(r){Ms(r)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(r)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataEscapedEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(r){if(this.preprocessor.startsWith(z.SEQUENCES.SCRIPT,!1)&&Hj(this.preprocessor.peek(z.SEQUENCES.SCRIPT.length))){this._emitCodePoint(r);for(let i=0;i<z.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataDoubleEscaped",value:function(r){switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(r){switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(r){switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case z.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(z.REPLACEMENT_CHARACTER);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(r){r===z.CODE_POINTS.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(r))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(r){if(this.preprocessor.startsWith(z.SEQUENCES.SCRIPT,!1)&&Hj(this.preprocessor.peek(z.SEQUENCES.SCRIPT.length))){this._emitCodePoint(r);for(let i=0;i<z.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(r))}},{key:"_stateBeforeAttributeName",value:function(r){switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.SOLIDUS:case z.CODE_POINTS.GREATER_THAN_SIGN:case z.CODE_POINTS.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(r);break}case z.CODE_POINTS.EQUALS_SIGN:{this._err(Ne.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(r)}}},{key:"_stateAttributeName",value:function(r){switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:case z.CODE_POINTS.SOLIDUS:case z.CODE_POINTS.GREATER_THAN_SIGN:case z.CODE_POINTS.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(r);break}case z.CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case z.CODE_POINTS.QUOTATION_MARK:case z.CODE_POINTS.APOSTROPHE:case z.CODE_POINTS.LESS_THAN_SIGN:{this._err(Ne.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(r);break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.name+=z.REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(Ap(r)?mb(r):r)}}},{key:"_stateAfterAttributeName",value:function(r){switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case z.CODE_POINTS.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(r)}}},{key:"_stateBeforeAttributeValue",value:function(r){switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case z.CODE_POINTS.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(r)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(r){switch(r){case z.CODE_POINTS.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case z.CODE_POINTS.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.value+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}},{key:"_stateAttributeValueSingleQuoted",value:function(r){switch(r){case z.CODE_POINTS.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case z.CODE_POINTS.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.value+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}},{key:"_stateAttributeValueUnquoted",value:function(r){switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case z.CODE_POINTS.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.value+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.QUOTATION_MARK:case z.CODE_POINTS.APOSTROPHE:case z.CODE_POINTS.LESS_THAN_SIGN:case z.CODE_POINTS.EQUALS_SIGN:case z.CODE_POINTS.GRAVE_ACCENT:{this._err(Ne.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(r);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}},{key:"_stateAfterAttributeValueQuoted",value:function(r){switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case z.CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Ne.ERR.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(r)}}},{key:"_stateSelfClosingStartTag",value:function(r){switch(r){case z.CODE_POINTS.GREATER_THAN_SIGN:{const i=this.currentToken;i.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Ne.ERR.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(r)}}},{key:"_stateBogusComment",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(i);break}case z.CODE_POINTS.EOF:{this.emitCurrentComment(i),this._emitEOFToken();break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.data+=z.REPLACEMENT_CHARACTER;break}default:i.data+=String.fromCodePoint(r)}}},{key:"_stateMarkupDeclarationOpen",value:function(r){this._consumeSequenceIfMatch(z.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(z.SEQUENCES.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(z.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(z.SEQUENCES.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(z.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.ERR.cdataInHtmlContent),this._createCommentToken(z.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(r))}},{key:"_stateCommentStart",value:function(r){switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptClosingOfEmptyComment),this.state=J.DATA;const i=this.currentToken;this.emitCurrentComment(i);break}default:this.state=J.COMMENT,this._stateComment(r)}}},{key:"_stateCommentStartDash",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(i);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=J.COMMENT,this._stateComment(r)}}},{key:"_stateComment",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case z.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.data+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+=String.fromCodePoint(r)}}},{key:"_stateCommentLessThanSign",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.EXCLAMATION_MARK:{i.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case z.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<";break}default:this.state=J.COMMENT,this._stateComment(r)}}},{key:"_stateCommentLessThanSignBang",value:function(r){r===z.CODE_POINTS.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(r))}},{key:"_stateCommentLessThanSignBangDash",value:function(r){r===z.CODE_POINTS.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(r))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(r){r!==z.CODE_POINTS.GREATER_THAN_SIGN&&r!==z.CODE_POINTS.EOF&&this._err(Ne.ERR.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(r)}},{key:"_stateCommentEndDash",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=J.COMMENT,this._stateComment(r)}}},{key:"_stateCommentEnd",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(i);break}case z.CODE_POINTS.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case z.CODE_POINTS.HYPHEN_MINUS:{i.data+="-";break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--",this.state=J.COMMENT,this._stateComment(r)}}},{key:"_stateCommentEndBang",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.HYPHEN_MINUS:{i.data+="--!",this.state=J.COMMENT_END_DASH;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(i);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--!",this.state=J.COMMENT,this._stateComment(r)}}},{key:"_stateDoctype",value:function(r){switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(r);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(r)}}},{key:"_stateBeforeDoctypeName",value:function(r){if(Ap(r))this._createDoctypeToken(String.fromCharCode(mb(r))),this.state=J.DOCTYPE_NAME;else switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._createDoctypeToken(z.REPLACEMENT_CHARACTER),this.state=J.DOCTYPE_NAME;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypeName),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(r)),this.state=J.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(i);break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.name+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.name+=String.fromCodePoint(Ap(r)?mb(r):r)}}},{key:"_stateAfterDoctypeName",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(i);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(z.SEQUENCES.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(z.SEQUENCES.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.ERR.invalidCharacterSequenceAfterDoctypeName),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.CODE_POINTS.QUOTATION_MARK:{this._err(Ne.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case z.CODE_POINTS.APOSTROPHE:{this._err(Ne.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.QUOTATION_MARK:{i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case z.CODE_POINTS.APOSTROPHE:{i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.publicId+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(r)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.publicId+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(r)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(i);break}case z.CODE_POINTS.QUOTATION_MARK:{this._err(Ne.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.CODE_POINTS.APOSTROPHE:{this._err(Ne.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.CODE_POINTS.QUOTATION_MARK:{this._err(Ne.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.CODE_POINTS.APOSTROPHE:{this._err(Ne.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.systemId+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(r)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.systemId+=z.REPLACEMENT_CHARACTER;break}case z.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(r)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.SPACE:case z.CODE_POINTS.LINE_FEED:case z.CODE_POINTS.TABULATION:case z.CODE_POINTS.FORM_FEED:break;case z.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBogusDoctype",value:function(r){const i=this.currentToken;switch(r){case z.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=J.DATA;break}case z.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter);break}case z.CODE_POINTS.EOF:{this.emitCurrentDoctype(i),this._emitEOFToken();break}}}},{key:"_stateCdataSection",value:function(r){switch(r){case z.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case z.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateCdataSectionBracket",value:function(r){r===z.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(r))}},{key:"_stateCdataSectionEnd",value:function(r){switch(r){case z.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA;break}case z.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(r)}}},{key:"_stateCharacterReference",value:function(r){r===z.CODE_POINTS.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:EO(r)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(r)):(this._flushCodePointConsumedAsCharacterReference(z.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,r))}},{key:"_stateNamedCharacterReference",value:function(r){const i=this._matchNamedCharacterReference(r);if(!this._ensureHibernation())if(i){for(let n=0;n<i.length;n++)this._flushCodePointConsumedAsCharacterReference(i[n]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(z.CODE_POINTS.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(r){EO(r)?this._flushCodePointConsumedAsCharacterReference(r):(r===z.CODE_POINTS.SEMICOLON&&this._err(Ne.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,r))}},{key:"_stateNumericCharacterReference",value:function(r){this.charRefCode=0,r===z.CODE_POINTS.LATIN_SMALL_X||r===z.CODE_POINTS.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:wp(r)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(r)):(this._err(Ne.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(z.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(z.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,r))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(r){upe(r)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(r)):(this._err(Ne.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(z.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(z.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}},{key:"_stateHexademicalCharacterReference",value:function(r){Mj(r)?this.charRefCode=this.charRefCode*16+r-55:Lj(r)?this.charRefCode=this.charRefCode*16+r-87:wp(r)?this.charRefCode=this.charRefCode*16+r-48:r===z.CODE_POINTS.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.ERR.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(r))}},{key:"_stateDecimalCharacterReference",value:function(r){wp(r)?this.charRefCode=this.charRefCode*10+r-48:r===z.CODE_POINTS.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.ERR.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(r))}},{key:"_stateNumericCharacterReferenceEnd",value:function(r){if(this.charRefCode===z.CODE_POINTS.NULL)this._err(Ne.ERR.nullCharacterReference),this.charRefCode=z.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=z.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,z.isSurrogate)(this.charRefCode))this._err(Ne.ERR.surrogateCharacterReference),this.charRefCode=z.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,z.isUndefinedCodePoint)(this.charRefCode))this._err(Ne.ERR.noncharacterCharacterReference);else if((0,z.isControlCodePoint)(this.charRefCode)||this.charRefCode===z.CODE_POINTS.CARRIAGE_RETURN){this._err(Ne.ERR.controlCharacterReference);const i=lpe.get(this.charRefCode);i!==void 0&&(this.charRefCode=i)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,r)}}]),e}();ic.Tokenizer=hpe;var gb={};function dpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $j(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,mpe(i.key),i)}}function ppe(e,t,r){return t&&$j(e.prototype,t),r&&$j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mpe(e){var t=gpe(e,"string");return typeof t=="symbol"?t:String(t)}function gpe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(gb,"__esModule",{value:!0}),gb.OpenElementStack=void 0;const Me=Ga,Fj=new Set([Me.TAG_ID.DD,Me.TAG_ID.DT,Me.TAG_ID.LI,Me.TAG_ID.OPTGROUP,Me.TAG_ID.OPTION,Me.TAG_ID.P,Me.TAG_ID.RB,Me.TAG_ID.RP,Me.TAG_ID.RT,Me.TAG_ID.RTC]),jj=new Set([...Fj,Me.TAG_ID.CAPTION,Me.TAG_ID.COLGROUP,Me.TAG_ID.TBODY,Me.TAG_ID.TD,Me.TAG_ID.TFOOT,Me.TAG_ID.TH,Me.TAG_ID.THEAD,Me.TAG_ID.TR]),vb=new Map([[Me.TAG_ID.APPLET,Me.NS.HTML],[Me.TAG_ID.CAPTION,Me.NS.HTML],[Me.TAG_ID.HTML,Me.NS.HTML],[Me.TAG_ID.MARQUEE,Me.NS.HTML],[Me.TAG_ID.OBJECT,Me.NS.HTML],[Me.TAG_ID.TABLE,Me.NS.HTML],[Me.TAG_ID.TD,Me.NS.HTML],[Me.TAG_ID.TEMPLATE,Me.NS.HTML],[Me.TAG_ID.TH,Me.NS.HTML],[Me.TAG_ID.ANNOTATION_XML,Me.NS.MATHML],[Me.TAG_ID.MI,Me.NS.MATHML],[Me.TAG_ID.MN,Me.NS.MATHML],[Me.TAG_ID.MO,Me.NS.MATHML],[Me.TAG_ID.MS,Me.NS.MATHML],[Me.TAG_ID.MTEXT,Me.NS.MATHML],[Me.TAG_ID.DESC,Me.NS.SVG],[Me.TAG_ID.FOREIGN_OBJECT,Me.NS.SVG],[Me.TAG_ID.TITLE,Me.NS.SVG]]),vpe=[Me.TAG_ID.H1,Me.TAG_ID.H2,Me.TAG_ID.H3,Me.TAG_ID.H4,Me.TAG_ID.H5,Me.TAG_ID.H6],ype=[Me.TAG_ID.TR,Me.TAG_ID.TEMPLATE,Me.TAG_ID.HTML],bpe=[Me.TAG_ID.TBODY,Me.TAG_ID.TFOOT,Me.TAG_ID.THEAD,Me.TAG_ID.TEMPLATE,Me.TAG_ID.HTML],_pe=[Me.TAG_ID.TABLE,Me.TAG_ID.TEMPLATE,Me.TAG_ID.HTML],Tpe=[Me.TAG_ID.TD,Me.TAG_ID.TH];let Epe=function(){function e(t,r,i){dpe(this,e),this.treeAdapter=r,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=Me.TAG_ID.UNKNOWN,this.current=t}return ppe(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(r){return this.items.lastIndexOf(r,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===Me.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Me.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(r,i){this.stackTop++,this.items[this.stackTop]=r,this.current=r,this.tagIDs[this.stackTop]=i,this.currentTagId=i,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(r,i,!0)}},{key:"pop",value:function(){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,!0)}},{key:"replace",value:function(r,i){const n=this._indexOf(r);this.items[n]=i,n===this.stackTop&&(this.current=i)}},{key:"insertAfter",value:function(r,i,n){const o=this._indexOf(r)+1;this.items.splice(o,0,i),this.tagIDs.splice(o,0,n),this.stackTop++,o===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,o===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(r){let i=this.stackTop+1;do i=this.tagIDs.lastIndexOf(r,i-1);while(i>0&&this.treeAdapter.getNamespaceURI(this.items[i])!==Me.NS.HTML);this.shortenToLength(i<0?0:i)}},{key:"shortenToLength",value:function(r){for(;this.stackTop>=r;){const i=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(i,this.stackTop<r)}}},{key:"popUntilElementPopped",value:function(r){const i=this._indexOf(r);this.shortenToLength(i<0?0:i)}},{key:"popUntilPopped",value:function(r,i){const n=this._indexOfTagNames(r,i);this.shortenToLength(n<0?0:n)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(vpe,Me.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(Tpe,Me.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(r,i){for(let n=this.stackTop;n>=0;n--)if(r.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===i)return n;return-1}},{key:"clearBackTo",value:function(r,i){const n=this._indexOfTagNames(r,i);this.shortenToLength(n+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(_pe,Me.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(bpe,Me.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(ype,Me.NS.HTML)}},{key:"remove",value:function(r){const i=this._indexOf(r);i>=0&&(i===this.stackTop?this.pop():(this.items.splice(i,1),this.tagIDs.splice(i,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===Me.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(r){return this._indexOf(r)>-1}},{key:"getCommonAncestor",value:function(r){const i=this._indexOf(r)-1;return i>=0?this.items[i]:null}},{key:"isRootHtmlElementCurrent",value:function(){return this.stackTop===0&&this.tagIDs[0]===Me.TAG_ID.HTML}},{key:"hasInScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i],o=this.treeAdapter.getNamespaceURI(this.items[i]);if(n===r&&o===Me.NS.HTML)return!0;if(vb.get(n)===o)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r],n=this.treeAdapter.getNamespaceURI(this.items[r]);if((0,Me.isNumberedHeader)(i)&&n===Me.NS.HTML)return!0;if(vb.get(i)===n)return!1}return!0}},{key:"hasInListItemScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i],o=this.treeAdapter.getNamespaceURI(this.items[i]);if(n===r&&o===Me.NS.HTML)return!0;if((n===Me.TAG_ID.UL||n===Me.TAG_ID.OL)&&o===Me.NS.HTML||vb.get(n)===o)return!1}return!0}},{key:"hasInButtonScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i],o=this.treeAdapter.getNamespaceURI(this.items[i]);if(n===r&&o===Me.NS.HTML)return!0;if(n===Me.TAG_ID.BUTTON&&o===Me.NS.HTML||vb.get(n)===o)return!1}return!0}},{key:"hasInTableScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Me.NS.HTML){if(n===r)return!0;if(n===Me.TAG_ID.TABLE||n===Me.TAG_ID.TEMPLATE||n===Me.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];if(this.treeAdapter.getNamespaceURI(this.items[r])===Me.NS.HTML){if(i===Me.TAG_ID.TBODY||i===Me.TAG_ID.THEAD||i===Me.TAG_ID.TFOOT)return!0;if(i===Me.TAG_ID.TABLE||i===Me.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Me.NS.HTML){if(n===r)return!0;if(n!==Me.TAG_ID.OPTION&&n!==Me.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;Fj.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;jj.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(r){for(;this.currentTagId!==r&&jj.has(this.currentTagId);)this.pop()}}]),e}();gb.OpenElementStack=Epe;var Uj={};(function(e){function t(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}function r(l,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,n(d.key),d)}}function i(l,h,f){return h&&r(l.prototype,h),f&&r(l,f),Object.defineProperty(l,"prototype",{writable:!1}),l}function n(l){var h=o(l,"string");return typeof h=="symbol"?h:String(h)}function o(l,h){if(typeof l!="object"||l===null)return l;var f=l[Symbol.toPrimitive];if(f!==void 0){var d=f.call(l,h||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(l)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;const a=3;var s;(function(l){l[l.Marker=0]="Marker",l[l.Element=1]="Element"})(s=e.EntryType||(e.EntryType={}));const c={type:s.Marker};let u=function(){function l(h){t(this,l),this.treeAdapter=h,this.entries=[],this.bookmark=null}return i(l,[{key:"_getNoahArkConditionCandidates",value:function(f,d){const p=[],m=d.length,g=this.treeAdapter.getTagName(f),v=this.treeAdapter.getNamespaceURI(f);for(let _=0;_<this.entries.length;_++){const y=this.entries[_];if(y.type===s.Marker)break;const{element:b}=y;if(this.treeAdapter.getTagName(b)===g&&this.treeAdapter.getNamespaceURI(b)===v){const T=this.treeAdapter.getAttrList(b);T.length===m&&p.push({idx:_,attrs:T})}}return p}},{key:"_ensureNoahArkCondition",value:function(f){if(this.entries.length<a)return;const d=this.treeAdapter.getAttrList(f),p=this._getNoahArkConditionCandidates(f,d);if(p.length<a)return;const m=new Map(d.map(v=>[v.name,v.value]));let g=0;for(let v=0;v<p.length;v++){const _=p[v];_.attrs.every(y=>m.get(y.name)===y.value)&&(g+=1,g>=a&&this.entries.splice(_.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(c)}},{key:"pushElement",value:function(f,d){this._ensureNoahArkCondition(f),this.entries.unshift({type:s.Element,element:f,token:d})}},{key:"insertElementAfterBookmark",value:function(f,d){const p=this.entries.indexOf(this.bookmark);this.entries.splice(p,0,{type:s.Element,element:f,token:d})}},{key:"removeEntry",value:function(f){const d=this.entries.indexOf(f);d>=0&&this.entries.splice(d,1)}},{key:"clearToLastMarker",value:function(){const f=this.entries.indexOf(c);f>=0?this.entries.splice(0,f+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(f){const d=this.entries.find(p=>p.type===s.Marker||this.treeAdapter.getTagName(p.element)===f);return d&&d.type===s.Element?d:null}},{key:"getElementEntry",value:function(f){return this.entries.find(d=>d.type===s.Element&&d.element===f)}}]),l}();e.FormattingElementList=u})(Uj);var yb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=Ga;function r(i){return{nodeName:"#text",value:i,parentNode:null}}e.defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(i,n,o){return{nodeName:i,tagName:i,attrs:o,namespaceURI:n,childNodes:[],parentNode:null}},createCommentNode(i){return{nodeName:"#comment",data:i,parentNode:null}},appendChild(i,n){i.childNodes.push(n),n.parentNode=i},insertBefore(i,n,o){const a=i.childNodes.indexOf(o);i.childNodes.splice(a,0,n),n.parentNode=i},setTemplateContent(i,n){i.content=n},getTemplateContent(i){return i.content},setDocumentType(i,n,o,a){const s=i.childNodes.find(c=>c.nodeName==="#documentType");if(s)s.name=n,s.publicId=o,s.systemId=a;else{const c={nodeName:"#documentType",name:n,publicId:o,systemId:a,parentNode:null};e.defaultTreeAdapter.appendChild(i,c)}},setDocumentMode(i,n){i.mode=n},getDocumentMode(i){return i.mode},detachNode(i){if(i.parentNode){const n=i.parentNode.childNodes.indexOf(i);i.parentNode.childNodes.splice(n,1),i.parentNode=null}},insertText(i,n){if(i.childNodes.length>0){const o=i.childNodes[i.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(o)){o.value+=n;return}}e.defaultTreeAdapter.appendChild(i,r(n))},insertTextBefore(i,n,o){const a=i.childNodes[i.childNodes.indexOf(o)-1];a&&e.defaultTreeAdapter.isTextNode(a)?a.value+=n:e.defaultTreeAdapter.insertBefore(i,r(n),o)},adoptAttributes(i,n){const o=new Set(i.attrs.map(a=>a.name));for(let a=0;a<n.length;a++)o.has(n[a].name)||i.attrs.push(n[a])},getFirstChild(i){return i.childNodes[0]},getChildNodes(i){return i.childNodes},getParentNode(i){return i.parentNode},getAttrList(i){return i.attrs},getTagName(i){return i.tagName},getNamespaceURI(i){return i.namespaceURI},getTextNodeContent(i){return i.value},getCommentNodeContent(i){return i.data},getDocumentTypeNodeName(i){return i.name},getDocumentTypeNodePublicId(i){return i.publicId},getDocumentTypeNodeSystemId(i){return i.systemId},isTextNode(i){return i.nodeName==="#text"},isCommentNode(i){return i.nodeName==="#comment"},isDocumentTypeNode(i){return i.nodeName==="#documentType"},isElementNode(i){return Object.prototype.hasOwnProperty.call(i,"tagName")},setNodeSourceCodeLocation(i,n){i.sourceCodeLocation=n},getNodeSourceCodeLocation(i){return i.sourceCodeLocation},updateNodeSourceCodeLocation(i,n){i.sourceCodeLocation=Object.assign(Object.assign({},i.sourceCodeLocation),n)}}})(yb);var vf={};Object.defineProperty(vf,"__esModule",{value:!0}),vf.getDocumentMode=vf.isConforming=void 0;const yf=Ga,Gj="html",Spe="about:legacy-compat",wpe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",zj=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Ape=[...zj,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Ope=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Vj=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],kpe=[...Vj,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Wj(e,t){return t.some(r=>e.startsWith(r))}function Ipe(e){return e.name===Gj&&e.publicId===null&&(e.systemId===null||e.systemId===Spe)}vf.isConforming=Ipe;function Cpe(e){if(e.name!==Gj)return yf.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===wpe)return yf.DOCUMENT_MODE.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),Ope.has(r))return yf.DOCUMENT_MODE.QUIRKS;let i=t===null?Ape:zj;if(Wj(r,i))return yf.DOCUMENT_MODE.QUIRKS;if(i=t===null?Vj:kpe,Wj(r,i))return yf.DOCUMENT_MODE.LIMITED_QUIRKS}return yf.DOCUMENT_MODE.NO_QUIRKS}vf.getDocumentMode=Cpe;var SO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=Ga,r={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},i="definitionurl",n="definitionURL",o=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(g=>[g.toLowerCase(),g])),a=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(g=>[g.toLowerCase(),g]));const s=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);function c(g){const v=g.tagID;return v===t.TAG_ID.FONT&&g.attrs.some(({name:y})=>y===t.ATTRS.COLOR||y===t.ATTRS.SIZE||y===t.ATTRS.FACE)||s.has(v)}e.causesExit=c;function u(g){for(let v=0;v<g.attrs.length;v++)if(g.attrs[v].name===i){g.attrs[v].name=n;break}}e.adjustTokenMathMLAttrs=u;function l(g){for(let v=0;v<g.attrs.length;v++){const _=o.get(g.attrs[v].name);_!=null&&(g.attrs[v].name=_)}}e.adjustTokenSVGAttrs=l;function h(g){for(let v=0;v<g.attrs.length;v++){const _=a.get(g.attrs[v].name);_&&(g.attrs[v].prefix=_.prefix,g.attrs[v].name=_.name,g.attrs[v].namespace=_.namespace)}}e.adjustTokenXMLAttrs=h;function f(g){const v=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);v!=null&&(g.tagName=v,g.tagID=(0,t.getTagID)(g.tagName))}e.adjustTokenSVGTagName=f;function d(g,v){return v===t.NS.MATHML&&(g===t.TAG_ID.MI||g===t.TAG_ID.MO||g===t.TAG_ID.MN||g===t.TAG_ID.MS||g===t.TAG_ID.MTEXT)}function p(g,v,_){if(v===t.NS.MATHML&&g===t.TAG_ID.ANNOTATION_XML){for(let y=0;y<_.length;y++)if(_[y].name===t.ATTRS.ENCODING){const b=_[y].value.toLowerCase();return b===r.TEXT_HTML||b===r.APPLICATION_XML}}return v===t.NS.SVG&&(g===t.TAG_ID.FOREIGN_OBJECT||g===t.TAG_ID.DESC||g===t.TAG_ID.TITLE)}function m(g,v,_,y){return(!y||y===t.NS.HTML)&&p(g,v,_)||(!y||y===t.NS.MATHML)&&d(g,v)}e.isIntegrationPoint=m})(SO);function Ppe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yj(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,xpe(i.key),i)}}function Dpe(e,t,r){return t&&Yj(e.prototype,t),r&&Yj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xpe(e){var t=Npe(e,"string");return typeof t=="symbol"?t:String(t)}function Npe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.Parser=void 0;const Zn=ic,Rpe=gb,qj=Uj,Mpe=yb,Xj=vf,Qo=SO,yn=Sp,Kj=db,C=Ga,nn=pb,Lpe="hidden",Bpe=8,Hpe=3;var le;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(le||(le={}));const $pe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Zj=new Set([C.TAG_ID.TABLE,C.TAG_ID.TBODY,C.TAG_ID.TFOOT,C.TAG_ID.THEAD,C.TAG_ID.TR]),Qj={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Mpe.defaultTreeAdapter,onParseError:null};let Fpe=function(){function e(t,r,i=null,n=null){Ppe(this,e),this.fragmentContext=i,this.scriptHandler=n,this.currentToken=null,this.stopped=!1,this.insertionMode=le.INITIAL,this.originalInsertionMode=le.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},Qj),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new Zn.Tokenizer(this.options,this),this.activeFormattingElements=new qj.FormattingElementList(this.treeAdapter),this.fragmentContextID=i?(0,C.getTagID)(this.treeAdapter.getTagName(i)):C.TAG_ID.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new Rpe.OpenElementStack(this.document,this.treeAdapter,this)}return Dpe(e,[{key:"getFragment",value:function(){const r=this.treeAdapter.getFirstChild(this.document),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}},{key:"_err",value:function(r,i,n){var o;if(!this.onParseError)return;const a=(o=r.location)!==null&&o!==void 0?o:$pe,s={code:i,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:n?a.startLine:a.endLine,endCol:n?a.startCol:a.endCol,endOffset:n?a.startOffset:a.endOffset};this.onParseError(s)}},{key:"onItemPush",value:function(r,i,n){var o,a;(a=(o=this.treeAdapter).onItemPush)===null||a===void 0||a.call(o,r),n&&this.openElements.stackTop>0&&this._setContextModes(r,i)}},{key:"onItemPop",value:function(r,i){var n,o;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(r,this.currentToken),(o=(n=this.treeAdapter).onItemPop)===null||o===void 0||o.call(n,r,this.openElements.current),i){let a,s;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,s=this.fragmentContextID):{current:a,currentTagId:s}=this.openElements,this._setContextModes(a,s)}}},{key:"_setContextModes",value:function(r,i){const n=r===this.document||this.treeAdapter.getNamespaceURI(r)===C.NS.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(i,r)}},{key:"_switchToTextParsing",value:function(r,i){this._insertElement(r,C.NS.HTML),this.tokenizer.state=i,this.originalInsertionMode=this.insertionMode,this.insertionMode=le.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=le.TEXT,this.originalInsertionMode=le.IN_BODY,this.tokenizer.state=Zn.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let r=this.fragmentContext;for(;r;){if(this.treeAdapter.getTagName(r)===C.TAG_NAMES.FORM){this.formElement=r;break}r=this.treeAdapter.getParentNode(r)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==C.NS.HTML))switch(this.fragmentContextID){case C.TAG_ID.TITLE:case C.TAG_ID.TEXTAREA:{this.tokenizer.state=Zn.TokenizerMode.RCDATA;break}case C.TAG_ID.STYLE:case C.TAG_ID.XMP:case C.TAG_ID.IFRAME:case C.TAG_ID.NOEMBED:case C.TAG_ID.NOFRAMES:case C.TAG_ID.NOSCRIPT:{this.tokenizer.state=Zn.TokenizerMode.RAWTEXT;break}case C.TAG_ID.SCRIPT:{this.tokenizer.state=Zn.TokenizerMode.SCRIPT_DATA;break}case C.TAG_ID.PLAINTEXT:{this.tokenizer.state=Zn.TokenizerMode.PLAINTEXT;break}}}},{key:"_setDocumentType",value:function(r){const i=r.name||"",n=r.publicId||"",o=r.systemId||"";if(this.treeAdapter.setDocumentType(this.document,i,n,o),r.location){const s=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));s&&this.treeAdapter.setNodeSourceCodeLocation(s,r.location)}}},{key:"_attachElementToTree",value:function(r,i){if(this.options.sourceCodeLocationInfo){const n=i&&Object.assign(Object.assign({},i),{startTag:i});this.treeAdapter.setNodeSourceCodeLocation(r,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(r);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n,r)}}},{key:"_appendElement",value:function(r,i){const n=this.treeAdapter.createElement(r.tagName,i,r.attrs);this._attachElementToTree(n,r.location)}},{key:"_insertElement",value:function(r,i){const n=this.treeAdapter.createElement(r.tagName,i,r.attrs);this._attachElementToTree(n,r.location),this.openElements.push(n,r.tagID)}},{key:"_insertFakeElement",value:function(r,i){const n=this.treeAdapter.createElement(r,C.NS.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,i)}},{key:"_insertTemplate",value:function(r){const i=this.treeAdapter.createElement(r.tagName,C.NS.HTML,r.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(i,n),this._attachElementToTree(i,r.location),this.openElements.push(i,r.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}},{key:"_insertFakeRootElement",value:function(){const r=this.treeAdapter.createElement(C.TAG_NAMES.HTML,C.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null),this.treeAdapter.appendChild(this.openElements.current,r),this.openElements.push(r,C.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(r,i){const n=this.treeAdapter.createCommentNode(r.data);this.treeAdapter.appendChild(i,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,r.location)}},{key:"_insertCharacters",value:function(r){let i,n;if(this._shouldFosterParentOnInsertion()?({parent:i,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(i,r.chars,n):this.treeAdapter.insertText(i,r.chars)):(i=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(i,r.chars)),!r.location)return;const o=this.treeAdapter.getChildNodes(i),a=n?o.lastIndexOf(n):o.length,s=o[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:u,endCol:l,endOffset:h}=r.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:u,endCol:l,endOffset:h})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,r.location)}},{key:"_adoptNodes",value:function(r,i){for(let n=this.treeAdapter.getFirstChild(r);n;n=this.treeAdapter.getFirstChild(r))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(i,n)}},{key:"_setEndLocation",value:function(r,i){if(this.treeAdapter.getNodeSourceCodeLocation(r)&&i.location){const n=i.location,o=this.treeAdapter.getTagName(r),a=i.type===nn.TokenType.END_TAG&&o===i.tagName?{endTag:Object.assign({},n),endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(r,a)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(r){if(!this.currentNotInHTML)return!1;let i,n;return this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,n=this.fragmentContextID):{current:i,currentTagId:n}=this.openElements,r.tagID===C.TAG_ID.SVG&&this.treeAdapter.getTagName(i)===C.TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(i)===C.NS.MATHML?!1:this.tokenizer.inForeignNode||(r.tagID===C.TAG_ID.MGLYPH||r.tagID===C.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(n,i,C.NS.HTML)}},{key:"_processToken",value:function(r){switch(r.type){case nn.TokenType.CHARACTER:{this.onCharacter(r);break}case nn.TokenType.NULL_CHARACTER:{this.onNullCharacter(r);break}case nn.TokenType.COMMENT:{this.onComment(r);break}case nn.TokenType.DOCTYPE:{this.onDoctype(r);break}case nn.TokenType.START_TAG:{this._processStartTag(r);break}case nn.TokenType.END_TAG:{this.onEndTag(r);break}case nn.TokenType.EOF:{this.onEof(r);break}case nn.TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(r);break}}}},{key:"_isIntegrationPoint",value:function(r,i,n){const o=this.treeAdapter.getNamespaceURI(i),a=this.treeAdapter.getAttrList(i);return Qo.isIntegrationPoint(r,o,a,n)}},{key:"_reconstructActiveFormattingElements",value:function(){const r=this.activeFormattingElements.entries.length;if(r){const i=this.activeFormattingElements.entries.findIndex(o=>o.type===qj.EntryType.Marker||this.openElements.contains(o.element)),n=i<0?r-1:i-1;for(let o=n;o>=0;o--){const a=this.activeFormattingElements.entries[o];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=le.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(C.TAG_ID.P),this.openElements.popUntilTagNamePopped(C.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let r=this.openElements.stackTop;r>=0;r--)switch(r===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[r]){case C.TAG_ID.TR:{this.insertionMode=le.IN_ROW;return}case C.TAG_ID.TBODY:case C.TAG_ID.THEAD:case C.TAG_ID.TFOOT:{this.insertionMode=le.IN_TABLE_BODY;return}case C.TAG_ID.CAPTION:{this.insertionMode=le.IN_CAPTION;return}case C.TAG_ID.COLGROUP:{this.insertionMode=le.IN_COLUMN_GROUP;return}case C.TAG_ID.TABLE:{this.insertionMode=le.IN_TABLE;return}case C.TAG_ID.BODY:{this.insertionMode=le.IN_BODY;return}case C.TAG_ID.FRAMESET:{this.insertionMode=le.IN_FRAMESET;return}case C.TAG_ID.SELECT:{this._resetInsertionModeForSelect(r);return}case C.TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case C.TAG_ID.HTML:{this.insertionMode=this.headElement?le.AFTER_HEAD:le.BEFORE_HEAD;return}case C.TAG_ID.TD:case C.TAG_ID.TH:{if(r>0){this.insertionMode=le.IN_CELL;return}break}case C.TAG_ID.HEAD:{if(r>0){this.insertionMode=le.IN_HEAD;return}break}}this.insertionMode=le.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(r){if(r>0)for(let i=r-1;i>0;i--){const n=this.openElements.tagIDs[i];if(n===C.TAG_ID.TEMPLATE)break;if(n===C.TAG_ID.TABLE){this.insertionMode=le.IN_SELECT_IN_TABLE;return}}this.insertionMode=le.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(r){return Zj.has(r)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let r=this.openElements.stackTop;r>=0;r--){const i=this.openElements.items[r];switch(this.openElements.tagIDs[r]){case C.TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(i)===C.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(i),beforeElement:null};break}case C.TAG_ID.TABLE:{const n=this.treeAdapter.getParentNode(i);return n?{parent:n,beforeElement:i}:{parent:this.openElements.items[r-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(r){const i=this._findFosterParentingLocation();i.beforeElement?this.treeAdapter.insertBefore(i.parent,r,i.beforeElement):this.treeAdapter.appendChild(i.parent,r)}},{key:"_isSpecialElement",value:function(r,i){const n=this.treeAdapter.getNamespaceURI(r);return C.SPECIAL_ELEMENTS[n].has(i)}},{key:"onCharacter",value:function(r){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){gge(this,r);return}switch(this.insertionMode){case le.INITIAL:{Op(this,r);break}case le.BEFORE_HTML:{kp(this,r);break}case le.BEFORE_HEAD:{Ip(this,r);break}case le.IN_HEAD:{Cp(this,r);break}case le.IN_HEAD_NO_SCRIPT:{Pp(this,r);break}case le.AFTER_HEAD:{Dp(this,r);break}case le.IN_BODY:case le.IN_CAPTION:case le.IN_CELL:case le.IN_TEMPLATE:{e6(this,r);break}case le.TEXT:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:{this._insertCharacters(r);break}case le.IN_TABLE:case le.IN_TABLE_BODY:case le.IN_ROW:{kO(this,r);break}case le.IN_TABLE_TEXT:{l6(this,r);break}case le.IN_COLUMN_GROUP:{Tb(this,r);break}case le.AFTER_BODY:{wb(this,r);break}case le.AFTER_AFTER_BODY:{Ab(this,r);break}}}},{key:"onNullCharacter",value:function(r){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){mge(this,r);return}switch(this.insertionMode){case le.INITIAL:{Op(this,r);break}case le.BEFORE_HTML:{kp(this,r);break}case le.BEFORE_HEAD:{Ip(this,r);break}case le.IN_HEAD:{Cp(this,r);break}case le.IN_HEAD_NO_SCRIPT:{Pp(this,r);break}case le.AFTER_HEAD:{Dp(this,r);break}case le.TEXT:{this._insertCharacters(r);break}case le.IN_TABLE:case le.IN_TABLE_BODY:case le.IN_ROW:{kO(this,r);break}case le.IN_COLUMN_GROUP:{Tb(this,r);break}case le.AFTER_BODY:{wb(this,r);break}case le.AFTER_AFTER_BODY:{Ab(this,r);break}}}},{key:"onComment",value:function(r){if(this.skipNextNewLine=!1,this.currentNotInHTML){AO(this,r);return}switch(this.insertionMode){case le.INITIAL:case le.BEFORE_HTML:case le.BEFORE_HEAD:case le.IN_HEAD:case le.IN_HEAD_NO_SCRIPT:case le.AFTER_HEAD:case le.IN_BODY:case le.IN_TABLE:case le.IN_CAPTION:case le.IN_COLUMN_GROUP:case le.IN_TABLE_BODY:case le.IN_ROW:case le.IN_CELL:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:case le.IN_TEMPLATE:case le.IN_FRAMESET:case le.AFTER_FRAMESET:{AO(this,r);break}case le.IN_TABLE_TEXT:{Rp(this,r);break}case le.AFTER_BODY:{Ype(this,r);break}case le.AFTER_AFTER_BODY:case le.AFTER_AFTER_FRAMESET:{qpe(this,r);break}}}},{key:"onDoctype",value:function(r){switch(this.skipNextNewLine=!1,this.insertionMode){case le.INITIAL:{Xpe(this,r);break}case le.BEFORE_HEAD:case le.IN_HEAD:case le.IN_HEAD_NO_SCRIPT:case le.AFTER_HEAD:{this._err(r,yn.ERR.misplacedDoctype);break}case le.IN_TABLE_TEXT:{Rp(this,r);break}}}},{key:"onStartTag",value:function(r){this.skipNextNewLine=!1,this.currentToken=r,this._processStartTag(r),r.selfClosing&&!r.ackSelfClosing&&this._err(r,yn.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(r){this.shouldProcessStartTagTokenInForeignContent(r)?vge(this,r):this._startTagOutsideForeignContent(r)}},{key:"_startTagOutsideForeignContent",value:function(r){switch(this.insertionMode){case le.INITIAL:{Op(this,r);break}case le.BEFORE_HTML:{Kpe(this,r);break}case le.BEFORE_HEAD:{Qpe(this,r);break}case le.IN_HEAD:{vo(this,r);break}case le.IN_HEAD_NO_SCRIPT:{tme(this,r);break}case le.AFTER_HEAD:{nme(this,r);break}case le.IN_BODY:{$n(this,r);break}case le.IN_TABLE:{bf(this,r);break}case le.IN_TABLE_TEXT:{Rp(this,r);break}case le.IN_CAPTION:{Jme(this,r);break}case le.IN_COLUMN_GROUP:{IO(this,r);break}case le.IN_TABLE_BODY:{Eb(this,r);break}case le.IN_ROW:{Sb(this,r);break}case le.IN_CELL:{rge(this,r);break}case le.IN_SELECT:{f6(this,r);break}case le.IN_SELECT_IN_TABLE:{ige(this,r);break}case le.IN_TEMPLATE:{age(this,r);break}case le.AFTER_BODY:{lge(this,r);break}case le.IN_FRAMESET:{cge(this,r);break}case le.AFTER_FRAMESET:{fge(this,r);break}case le.AFTER_AFTER_BODY:{dge(this,r);break}case le.AFTER_AFTER_FRAMESET:{pge(this,r);break}}}},{key:"onEndTag",value:function(r){this.skipNextNewLine=!1,this.currentToken=r,this.currentNotInHTML?yge(this,r):this._endTagOutsideForeignContent(r)}},{key:"_endTagOutsideForeignContent",value:function(r){switch(this.insertionMode){case le.INITIAL:{Op(this,r);break}case le.BEFORE_HTML:{Zpe(this,r);break}case le.BEFORE_HEAD:{Jpe(this,r);break}case le.IN_HEAD:{eme(this,r);break}case le.IN_HEAD_NO_SCRIPT:{rme(this,r);break}case le.AFTER_HEAD:{ime(this,r);break}case le.IN_BODY:{_b(this,r);break}case le.TEXT:{Gme(this,r);break}case le.IN_TABLE:{xp(this,r);break}case le.IN_TABLE_TEXT:{Rp(this,r);break}case le.IN_CAPTION:{ege(this,r);break}case le.IN_COLUMN_GROUP:{tge(this,r);break}case le.IN_TABLE_BODY:{CO(this,r);break}case le.IN_ROW:{u6(this,r);break}case le.IN_CELL:{nge(this,r);break}case le.IN_SELECT:{h6(this,r);break}case le.IN_SELECT_IN_TABLE:{oge(this,r);break}case le.IN_TEMPLATE:{sge(this,r);break}case le.AFTER_BODY:{p6(this,r);break}case le.IN_FRAMESET:{uge(this,r);break}case le.AFTER_FRAMESET:{hge(this,r);break}case le.AFTER_AFTER_BODY:{Ab(this,r);break}}}},{key:"onEof",value:function(r){switch(this.insertionMode){case le.INITIAL:{Op(this,r);break}case le.BEFORE_HTML:{kp(this,r);break}case le.BEFORE_HEAD:{Ip(this,r);break}case le.IN_HEAD:{Cp(this,r);break}case le.IN_HEAD_NO_SCRIPT:{Pp(this,r);break}case le.AFTER_HEAD:{Dp(this,r);break}case le.IN_BODY:case le.IN_TABLE:case le.IN_CAPTION:case le.IN_COLUMN_GROUP:case le.IN_TABLE_BODY:case le.IN_ROW:case le.IN_CELL:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:{a6(this,r);break}case le.TEXT:{zme(this,r);break}case le.IN_TABLE_TEXT:{Rp(this,r);break}case le.IN_TEMPLATE:{d6(this,r);break}case le.AFTER_BODY:case le.IN_FRAMESET:case le.AFTER_FRAMESET:case le.AFTER_AFTER_BODY:case le.AFTER_AFTER_FRAMESET:{OO(this,r);break}}}},{key:"onWhitespaceCharacter",value:function(r){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,r.chars.charCodeAt(0)===Kj.CODE_POINTS.LINE_FEED)){if(r.chars.length===1)return;r.chars=r.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(r);return}switch(this.insertionMode){case le.IN_HEAD:case le.IN_HEAD_NO_SCRIPT:case le.AFTER_HEAD:case le.TEXT:case le.IN_COLUMN_GROUP:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:case le.IN_FRAMESET:case le.AFTER_FRAMESET:{this._insertCharacters(r);break}case le.IN_BODY:case le.IN_CAPTION:case le.IN_CELL:case le.IN_TEMPLATE:case le.AFTER_BODY:case le.AFTER_AFTER_BODY:case le.AFTER_AFTER_FRAMESET:{Jj(this,r);break}case le.IN_TABLE:case le.IN_TABLE_BODY:case le.IN_ROW:{kO(this,r);break}case le.IN_TABLE_TEXT:{s6(this,r);break}}}}],[{key:"parse",value:function(r,i){const n=new this(i);return n.tokenizer.write(r,!0),n.document}},{key:"getFragmentParser",value:function(r,i){const n=Object.assign(Object.assign({},Qj),i);r??(r=n.treeAdapter.createElement(C.TAG_NAMES.TEMPLATE,C.NS.HTML,[]));const o=n.treeAdapter.createElement("documentmock",C.NS.HTML,[]),a=new this(n,o,r);return a.fragmentContextID===C.TAG_ID.TEMPLATE&&a.tmplInsertionModeStack.unshift(le.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}}]),e}();Ep.Parser=Fpe;function jpe(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):o6(e,t),r}function Upe(e,t){let r=null,i=e.openElements.stackTop;for(;i>=0;i--){const n=e.openElements.items[i];if(n===t.element)break;e._isSpecialElement(n,e.openElements.tagIDs[i])&&(r=n)}return r||(e.openElements.shortenToLength(i<0?0:i),e.activeFormattingElements.removeEntry(t)),r}function Gpe(e,t,r){let i=t,n=e.openElements.getCommonAncestor(t);for(let o=0,a=n;a!==r;o++,a=n){n=e.openElements.getCommonAncestor(a);const s=e.activeFormattingElements.getElementEntry(a),c=s&&o>=Hpe;!s||c?(c&&e.activeFormattingElements.removeEntry(s),e.openElements.remove(a)):(a=zpe(e,s),i===t&&(e.activeFormattingElements.bookmark=s),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(a,i),i=a)}return i}function zpe(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function Vpe(e,t,r){const i=e.treeAdapter.getTagName(t),n=(0,C.getTagID)(i);if(e._isElementCausesFosterParenting(n))e._fosterParentElement(r);else{const o=e.treeAdapter.getNamespaceURI(t);n===C.TAG_ID.TEMPLATE&&o===C.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function Wpe(e,t,r){const i=e.treeAdapter.getNamespaceURI(r.element),{token:n}=r,o=e.treeAdapter.createElement(n.tagName,i,n.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,n),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,o,n.tagID)}function wO(e,t){for(let r=0;r<Bpe;r++){const i=jpe(e,t);if(!i)break;const n=Upe(e,i);if(!n)break;e.activeFormattingElements.bookmark=i;const o=Gpe(e,n,i.element),a=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(o),a&&Vpe(e,a,o),Wpe(e,n,i)}}function AO(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Ype(e,t){e._appendCommentNode(t,e.openElements.items[0])}function qpe(e,t){e._appendCommentNode(t,e.document)}function OO(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=r;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],n=e.treeAdapter.getNodeSourceCodeLocation(i);if(n&&!n.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(o);a&&!a.endTag&&e._setEndLocation(o,t)}}}}function Xpe(e,t){e._setDocumentType(t);const r=t.forceQuirks?C.DOCUMENT_MODE.QUIRKS:Xj.getDocumentMode(t);Xj.isConforming(t)||e._err(t,yn.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=le.BEFORE_HTML}function Op(e,t){e._err(t,yn.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,C.DOCUMENT_MODE.QUIRKS),e.insertionMode=le.BEFORE_HTML,e._processToken(t)}function Kpe(e,t){t.tagID===C.TAG_ID.HTML?(e._insertElement(t,C.NS.HTML),e.insertionMode=le.BEFORE_HEAD):kp(e,t)}function Zpe(e,t){const r=t.tagID;(r===C.TAG_ID.HTML||r===C.TAG_ID.HEAD||r===C.TAG_ID.BODY||r===C.TAG_ID.BR)&&kp(e,t)}function kp(e,t){e._insertFakeRootElement(),e.insertionMode=le.BEFORE_HEAD,e._processToken(t)}function Qpe(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.HEAD:{e._insertElement(t,C.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=le.IN_HEAD;break}default:Ip(e,t)}}function Jpe(e,t){const r=t.tagID;r===C.TAG_ID.HEAD||r===C.TAG_ID.BODY||r===C.TAG_ID.HTML||r===C.TAG_ID.BR?Ip(e,t):e._err(t,yn.ERR.endTagWithoutMatchingOpenElement)}function Ip(e,t){e._insertFakeElement(C.TAG_NAMES.HEAD,C.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=le.IN_HEAD,e._processToken(t)}function vo(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.BASE:case C.TAG_ID.BASEFONT:case C.TAG_ID.BGSOUND:case C.TAG_ID.LINK:case C.TAG_ID.META:{e._appendElement(t,C.NS.HTML),t.ackSelfClosing=!0;break}case C.TAG_ID.TITLE:{e._switchToTextParsing(t,Zn.TokenizerMode.RCDATA);break}case C.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Zn.TokenizerMode.RAWTEXT):(e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_HEAD_NO_SCRIPT);break}case C.TAG_ID.NOFRAMES:case C.TAG_ID.STYLE:{e._switchToTextParsing(t,Zn.TokenizerMode.RAWTEXT);break}case C.TAG_ID.SCRIPT:{e._switchToTextParsing(t,Zn.TokenizerMode.SCRIPT_DATA);break}case C.TAG_ID.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=le.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(le.IN_TEMPLATE);break}case C.TAG_ID.HEAD:{e._err(t,yn.ERR.misplacedStartTagForHeadElement);break}default:Cp(e,t)}}function eme(e,t){switch(t.tagID){case C.TAG_ID.HEAD:{e.openElements.pop(),e.insertionMode=le.AFTER_HEAD;break}case C.TAG_ID.BODY:case C.TAG_ID.BR:case C.TAG_ID.HTML:{Cp(e,t);break}case C.TAG_ID.TEMPLATE:{oc(e,t);break}default:e._err(t,yn.ERR.endTagWithoutMatchingOpenElement)}}function oc(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==C.TAG_ID.TEMPLATE&&e._err(t,yn.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(C.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,yn.ERR.endTagWithoutMatchingOpenElement)}function Cp(e,t){e.openElements.pop(),e.insertionMode=le.AFTER_HEAD,e._processToken(t)}function tme(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.BASEFONT:case C.TAG_ID.BGSOUND:case C.TAG_ID.HEAD:case C.TAG_ID.LINK:case C.TAG_ID.META:case C.TAG_ID.NOFRAMES:case C.TAG_ID.STYLE:{vo(e,t);break}case C.TAG_ID.NOSCRIPT:{e._err(t,yn.ERR.nestedNoscriptInHead);break}default:Pp(e,t)}}function rme(e,t){switch(t.tagID){case C.TAG_ID.NOSCRIPT:{e.openElements.pop(),e.insertionMode=le.IN_HEAD;break}case C.TAG_ID.BR:{Pp(e,t);break}default:e._err(t,yn.ERR.endTagWithoutMatchingOpenElement)}}function Pp(e,t){const r=t.type===nn.TokenType.EOF?yn.ERR.openElementsLeftAfterEof:yn.ERR.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=le.IN_HEAD,e._processToken(t)}function nme(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.BODY:{e._insertElement(t,C.NS.HTML),e.framesetOk=!1,e.insertionMode=le.IN_BODY;break}case C.TAG_ID.FRAMESET:{e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_FRAMESET;break}case C.TAG_ID.BASE:case C.TAG_ID.BASEFONT:case C.TAG_ID.BGSOUND:case C.TAG_ID.LINK:case C.TAG_ID.META:case C.TAG_ID.NOFRAMES:case C.TAG_ID.SCRIPT:case C.TAG_ID.STYLE:case C.TAG_ID.TEMPLATE:case C.TAG_ID.TITLE:{e._err(t,yn.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,C.TAG_ID.HEAD),vo(e,t),e.openElements.remove(e.headElement);break}case C.TAG_ID.HEAD:{e._err(t,yn.ERR.misplacedStartTagForHeadElement);break}default:Dp(e,t)}}function ime(e,t){switch(t.tagID){case C.TAG_ID.BODY:case C.TAG_ID.HTML:case C.TAG_ID.BR:{Dp(e,t);break}case C.TAG_ID.TEMPLATE:{oc(e,t);break}default:e._err(t,yn.ERR.endTagWithoutMatchingOpenElement)}}function Dp(e,t){e._insertFakeElement(C.TAG_NAMES.BODY,C.TAG_ID.BODY),e.insertionMode=le.IN_BODY,bb(e,t)}function bb(e,t){switch(t.type){case nn.TokenType.CHARACTER:{e6(e,t);break}case nn.TokenType.WHITESPACE_CHARACTER:{Jj(e,t);break}case nn.TokenType.COMMENT:{AO(e,t);break}case nn.TokenType.START_TAG:{$n(e,t);break}case nn.TokenType.END_TAG:{_b(e,t);break}case nn.TokenType.EOF:{a6(e,t);break}}}function Jj(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function e6(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function ome(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function ame(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function sme(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_FRAMESET)}function lme(e,t){e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._insertElement(t,C.NS.HTML)}function cme(e,t){e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),(0,C.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,C.NS.HTML)}function ume(e,t){e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._insertElement(t,C.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function fme(e,t){const r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._insertElement(t,C.NS.HTML),r||(e.formElement=e.openElements.current))}function hme(e,t){e.framesetOk=!1;const r=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const n=e.openElements.tagIDs[i];if(r===C.TAG_ID.LI&&n===C.TAG_ID.LI||(r===C.TAG_ID.DD||r===C.TAG_ID.DT)&&(n===C.TAG_ID.DD||n===C.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n);break}if(n!==C.TAG_ID.ADDRESS&&n!==C.TAG_ID.DIV&&n!==C.TAG_ID.P&&e._isSpecialElement(e.openElements.items[i],n))break}e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._insertElement(t,C.NS.HTML)}function dme(e,t){e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._insertElement(t,C.NS.HTML),e.tokenizer.state=Zn.TokenizerMode.PLAINTEXT}function pme(e,t){e.openElements.hasInScope(C.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,C.NS.HTML),e.framesetOk=!1}function mme(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(C.TAG_NAMES.A);r&&(wO(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,C.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function gme(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,C.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vme(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(C.TAG_ID.NOBR)&&(wO(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,C.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function yme(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,C.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function bme(e,t){e.treeAdapter.getDocumentMode(e.document)!==C.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._insertElement(t,C.NS.HTML),e.framesetOk=!1,e.insertionMode=le.IN_TABLE}function t6(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,C.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function r6(e){const t=(0,nn.getTokenAttr)(e,C.ATTRS.TYPE);return t!=null&&t.toLowerCase()===Lpe}function _me(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,C.NS.HTML),r6(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Tme(e,t){e._appendElement(t,C.NS.HTML),t.ackSelfClosing=!0}function Eme(e,t){e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._appendElement(t,C.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Sme(e,t){t.tagName=C.TAG_NAMES.IMG,t.tagID=C.TAG_ID.IMG,t6(e,t)}function wme(e,t){e._insertElement(t,C.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Zn.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=le.TEXT}function Ame(e,t){e.openElements.hasInButtonScope(C.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Zn.TokenizerMode.RAWTEXT)}function Ome(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Zn.TokenizerMode.RAWTEXT)}function n6(e,t){e._switchToTextParsing(t,Zn.TokenizerMode.RAWTEXT)}function kme(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,C.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===le.IN_TABLE||e.insertionMode===le.IN_CAPTION||e.insertionMode===le.IN_TABLE_BODY||e.insertionMode===le.IN_ROW||e.insertionMode===le.IN_CELL?le.IN_SELECT_IN_TABLE:le.IN_SELECT}function Ime(e,t){e.openElements.currentTagId===C.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,C.NS.HTML)}function Cme(e,t){e.openElements.hasInScope(C.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,C.NS.HTML)}function Pme(e,t){e.openElements.hasInScope(C.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(C.TAG_ID.RTC),e._insertElement(t,C.NS.HTML)}function Dme(e,t){e._reconstructActiveFormattingElements(),Qo.adjustTokenMathMLAttrs(t),Qo.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,C.NS.MATHML):e._insertElement(t,C.NS.MATHML),t.ackSelfClosing=!0}function xme(e,t){e._reconstructActiveFormattingElements(),Qo.adjustTokenSVGAttrs(t),Qo.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,C.NS.SVG):e._insertElement(t,C.NS.SVG),t.ackSelfClosing=!0}function i6(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,C.NS.HTML)}function $n(e,t){switch(t.tagID){case C.TAG_ID.I:case C.TAG_ID.S:case C.TAG_ID.B:case C.TAG_ID.U:case C.TAG_ID.EM:case C.TAG_ID.TT:case C.TAG_ID.BIG:case C.TAG_ID.CODE:case C.TAG_ID.FONT:case C.TAG_ID.SMALL:case C.TAG_ID.STRIKE:case C.TAG_ID.STRONG:{gme(e,t);break}case C.TAG_ID.A:{mme(e,t);break}case C.TAG_ID.H1:case C.TAG_ID.H2:case C.TAG_ID.H3:case C.TAG_ID.H4:case C.TAG_ID.H5:case C.TAG_ID.H6:{cme(e,t);break}case C.TAG_ID.P:case C.TAG_ID.DL:case C.TAG_ID.OL:case C.TAG_ID.UL:case C.TAG_ID.DIV:case C.TAG_ID.DIR:case C.TAG_ID.NAV:case C.TAG_ID.MAIN:case C.TAG_ID.MENU:case C.TAG_ID.ASIDE:case C.TAG_ID.CENTER:case C.TAG_ID.FIGURE:case C.TAG_ID.FOOTER:case C.TAG_ID.HEADER:case C.TAG_ID.HGROUP:case C.TAG_ID.DIALOG:case C.TAG_ID.DETAILS:case C.TAG_ID.ADDRESS:case C.TAG_ID.ARTICLE:case C.TAG_ID.SECTION:case C.TAG_ID.SUMMARY:case C.TAG_ID.FIELDSET:case C.TAG_ID.BLOCKQUOTE:case C.TAG_ID.FIGCAPTION:{lme(e,t);break}case C.TAG_ID.LI:case C.TAG_ID.DD:case C.TAG_ID.DT:{hme(e,t);break}case C.TAG_ID.BR:case C.TAG_ID.IMG:case C.TAG_ID.WBR:case C.TAG_ID.AREA:case C.TAG_ID.EMBED:case C.TAG_ID.KEYGEN:{t6(e,t);break}case C.TAG_ID.HR:{Eme(e,t);break}case C.TAG_ID.RB:case C.TAG_ID.RTC:{Cme(e,t);break}case C.TAG_ID.RT:case C.TAG_ID.RP:{Pme(e,t);break}case C.TAG_ID.PRE:case C.TAG_ID.LISTING:{ume(e,t);break}case C.TAG_ID.XMP:{Ame(e,t);break}case C.TAG_ID.SVG:{xme(e,t);break}case C.TAG_ID.HTML:{ome(e,t);break}case C.TAG_ID.BASE:case C.TAG_ID.LINK:case C.TAG_ID.META:case C.TAG_ID.STYLE:case C.TAG_ID.TITLE:case C.TAG_ID.SCRIPT:case C.TAG_ID.BGSOUND:case C.TAG_ID.BASEFONT:case C.TAG_ID.TEMPLATE:{vo(e,t);break}case C.TAG_ID.BODY:{ame(e,t);break}case C.TAG_ID.FORM:{fme(e,t);break}case C.TAG_ID.NOBR:{vme(e,t);break}case C.TAG_ID.MATH:{Dme(e,t);break}case C.TAG_ID.TABLE:{bme(e,t);break}case C.TAG_ID.INPUT:{_me(e,t);break}case C.TAG_ID.PARAM:case C.TAG_ID.TRACK:case C.TAG_ID.SOURCE:{Tme(e,t);break}case C.TAG_ID.IMAGE:{Sme(e,t);break}case C.TAG_ID.BUTTON:{pme(e,t);break}case C.TAG_ID.APPLET:case C.TAG_ID.OBJECT:case C.TAG_ID.MARQUEE:{yme(e,t);break}case C.TAG_ID.IFRAME:{Ome(e,t);break}case C.TAG_ID.SELECT:{kme(e,t);break}case C.TAG_ID.OPTION:case C.TAG_ID.OPTGROUP:{Ime(e,t);break}case C.TAG_ID.NOEMBED:{n6(e,t);break}case C.TAG_ID.FRAMESET:{sme(e,t);break}case C.TAG_ID.TEXTAREA:{wme(e,t);break}case C.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?n6(e,t):i6(e,t);break}case C.TAG_ID.PLAINTEXT:{dme(e,t);break}case C.TAG_ID.COL:case C.TAG_ID.TH:case C.TAG_ID.TD:case C.TAG_ID.TR:case C.TAG_ID.HEAD:case C.TAG_ID.FRAME:case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:case C.TAG_ID.CAPTION:case C.TAG_ID.COLGROUP:break;default:i6(e,t)}}function Nme(e,t){if(e.openElements.hasInScope(C.TAG_ID.BODY)&&(e.insertionMode=le.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function Rme(e,t){e.openElements.hasInScope(C.TAG_ID.BODY)&&(e.insertionMode=le.AFTER_BODY,p6(e,t))}function Mme(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function Lme(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(C.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(C.TAG_ID.FORM):r&&e.openElements.remove(r))}function Bme(e){e.openElements.hasInButtonScope(C.TAG_ID.P)||e._insertFakeElement(C.TAG_NAMES.P,C.TAG_ID.P),e._closePElement()}function Hme(e){e.openElements.hasInListItemScope(C.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(C.TAG_ID.LI),e.openElements.popUntilTagNamePopped(C.TAG_ID.LI))}function $me(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function Fme(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function jme(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function Ume(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(C.TAG_NAMES.BR,C.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function o6(e,t){const r=t.tagName,i=t.tagID;for(let n=e.openElements.stackTop;n>0;n--){const o=e.openElements.items[n],a=e.openElements.tagIDs[n];if(i===a&&(i!==C.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(o)===r)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=n&&e.openElements.shortenToLength(n);break}if(e._isSpecialElement(o,a))break}}function _b(e,t){switch(t.tagID){case C.TAG_ID.A:case C.TAG_ID.B:case C.TAG_ID.I:case C.TAG_ID.S:case C.TAG_ID.U:case C.TAG_ID.EM:case C.TAG_ID.TT:case C.TAG_ID.BIG:case C.TAG_ID.CODE:case C.TAG_ID.FONT:case C.TAG_ID.NOBR:case C.TAG_ID.SMALL:case C.TAG_ID.STRIKE:case C.TAG_ID.STRONG:{wO(e,t);break}case C.TAG_ID.P:{Bme(e);break}case C.TAG_ID.DL:case C.TAG_ID.UL:case C.TAG_ID.OL:case C.TAG_ID.DIR:case C.TAG_ID.DIV:case C.TAG_ID.NAV:case C.TAG_ID.PRE:case C.TAG_ID.MAIN:case C.TAG_ID.MENU:case C.TAG_ID.ASIDE:case C.TAG_ID.BUTTON:case C.TAG_ID.CENTER:case C.TAG_ID.FIGURE:case C.TAG_ID.FOOTER:case C.TAG_ID.HEADER:case C.TAG_ID.HGROUP:case C.TAG_ID.DIALOG:case C.TAG_ID.ADDRESS:case C.TAG_ID.ARTICLE:case C.TAG_ID.DETAILS:case C.TAG_ID.SECTION:case C.TAG_ID.SUMMARY:case C.TAG_ID.LISTING:case C.TAG_ID.FIELDSET:case C.TAG_ID.BLOCKQUOTE:case C.TAG_ID.FIGCAPTION:{Mme(e,t);break}case C.TAG_ID.LI:{Hme(e);break}case C.TAG_ID.DD:case C.TAG_ID.DT:{$me(e,t);break}case C.TAG_ID.H1:case C.TAG_ID.H2:case C.TAG_ID.H3:case C.TAG_ID.H4:case C.TAG_ID.H5:case C.TAG_ID.H6:{Fme(e);break}case C.TAG_ID.BR:{Ume(e);break}case C.TAG_ID.BODY:{Nme(e,t);break}case C.TAG_ID.HTML:{Rme(e,t);break}case C.TAG_ID.FORM:{Lme(e);break}case C.TAG_ID.APPLET:case C.TAG_ID.OBJECT:case C.TAG_ID.MARQUEE:{jme(e,t);break}case C.TAG_ID.TEMPLATE:{oc(e,t);break}default:o6(e,t)}}function a6(e,t){e.tmplInsertionModeStack.length>0?d6(e,t):OO(e,t)}function Gme(e,t){var r;t.tagID===C.TAG_ID.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function zme(e,t){e._err(t,yn.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function kO(e,t){if(Zj.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=le.IN_TABLE_TEXT,t.type){case nn.TokenType.CHARACTER:{l6(e,t);break}case nn.TokenType.WHITESPACE_CHARACTER:{s6(e,t);break}}else Np(e,t)}function Vme(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_CAPTION}function Wme(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_COLUMN_GROUP}function Yme(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(C.TAG_NAMES.COLGROUP,C.TAG_ID.COLGROUP),e.insertionMode=le.IN_COLUMN_GROUP,IO(e,t)}function qme(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_TABLE_BODY}function Xme(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(C.TAG_NAMES.TBODY,C.TAG_ID.TBODY),e.insertionMode=le.IN_TABLE_BODY,Eb(e,t)}function Kme(e,t){e.openElements.hasInTableScope(C.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(C.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Zme(e,t){r6(t)?e._appendElement(t,C.NS.HTML):Np(e,t),t.ackSelfClosing=!0}function Qme(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,C.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function bf(e,t){switch(t.tagID){case C.TAG_ID.TD:case C.TAG_ID.TH:case C.TAG_ID.TR:{Xme(e,t);break}case C.TAG_ID.STYLE:case C.TAG_ID.SCRIPT:case C.TAG_ID.TEMPLATE:{vo(e,t);break}case C.TAG_ID.COL:{Yme(e,t);break}case C.TAG_ID.FORM:{Qme(e,t);break}case C.TAG_ID.TABLE:{Kme(e,t);break}case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:{qme(e,t);break}case C.TAG_ID.INPUT:{Zme(e,t);break}case C.TAG_ID.CAPTION:{Vme(e,t);break}case C.TAG_ID.COLGROUP:{Wme(e,t);break}default:Np(e,t)}}function xp(e,t){switch(t.tagID){case C.TAG_ID.TABLE:{e.openElements.hasInTableScope(C.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(C.TAG_ID.TABLE),e._resetInsertionMode());break}case C.TAG_ID.TEMPLATE:{oc(e,t);break}case C.TAG_ID.BODY:case C.TAG_ID.CAPTION:case C.TAG_ID.COL:case C.TAG_ID.COLGROUP:case C.TAG_ID.HTML:case C.TAG_ID.TBODY:case C.TAG_ID.TD:case C.TAG_ID.TFOOT:case C.TAG_ID.TH:case C.TAG_ID.THEAD:case C.TAG_ID.TR:break;default:Np(e,t)}}function Np(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,bb(e,t),e.fosterParentingEnabled=r}function s6(e,t){e.pendingCharacterTokens.push(t)}function l6(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Rp(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)Np(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const c6=new Set([C.TAG_ID.CAPTION,C.TAG_ID.COL,C.TAG_ID.COLGROUP,C.TAG_ID.TBODY,C.TAG_ID.TD,C.TAG_ID.TFOOT,C.TAG_ID.TH,C.TAG_ID.THEAD,C.TAG_ID.TR]);function Jme(e,t){const r=t.tagID;c6.has(r)?e.openElements.hasInTableScope(C.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=le.IN_TABLE,bf(e,t)):$n(e,t)}function ege(e,t){const r=t.tagID;switch(r){case C.TAG_ID.CAPTION:case C.TAG_ID.TABLE:{e.openElements.hasInTableScope(C.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=le.IN_TABLE,r===C.TAG_ID.TABLE&&xp(e,t));break}case C.TAG_ID.BODY:case C.TAG_ID.COL:case C.TAG_ID.COLGROUP:case C.TAG_ID.HTML:case C.TAG_ID.TBODY:case C.TAG_ID.TD:case C.TAG_ID.TFOOT:case C.TAG_ID.TH:case C.TAG_ID.THEAD:case C.TAG_ID.TR:break;default:_b(e,t)}}function IO(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.COL:{e._appendElement(t,C.NS.HTML),t.ackSelfClosing=!0;break}case C.TAG_ID.TEMPLATE:{vo(e,t);break}default:Tb(e,t)}}function tge(e,t){switch(t.tagID){case C.TAG_ID.COLGROUP:{e.openElements.currentTagId===C.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=le.IN_TABLE);break}case C.TAG_ID.TEMPLATE:{oc(e,t);break}case C.TAG_ID.COL:break;default:Tb(e,t)}}function Tb(e,t){e.openElements.currentTagId===C.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=le.IN_TABLE,e._processToken(t))}function Eb(e,t){switch(t.tagID){case C.TAG_ID.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_ROW;break}case C.TAG_ID.TH:case C.TAG_ID.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(C.TAG_NAMES.TR,C.TAG_ID.TR),e.insertionMode=le.IN_ROW,Sb(e,t);break}case C.TAG_ID.CAPTION:case C.TAG_ID.COL:case C.TAG_ID.COLGROUP:case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE,bf(e,t));break}default:bf(e,t)}}function CO(e,t){const r=t.tagID;switch(t.tagID){case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE);break}case C.TAG_ID.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE,xp(e,t));break}case C.TAG_ID.BODY:case C.TAG_ID.CAPTION:case C.TAG_ID.COL:case C.TAG_ID.COLGROUP:case C.TAG_ID.HTML:case C.TAG_ID.TD:case C.TAG_ID.TH:case C.TAG_ID.TR:break;default:xp(e,t)}}function Sb(e,t){switch(t.tagID){case C.TAG_ID.TH:case C.TAG_ID.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,C.NS.HTML),e.insertionMode=le.IN_CELL,e.activeFormattingElements.insertMarker();break}case C.TAG_ID.CAPTION:case C.TAG_ID.COL:case C.TAG_ID.COLGROUP:case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:case C.TAG_ID.TR:{e.openElements.hasInTableScope(C.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY,Eb(e,t));break}default:bf(e,t)}}function u6(e,t){switch(t.tagID){case C.TAG_ID.TR:{e.openElements.hasInTableScope(C.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY);break}case C.TAG_ID.TABLE:{e.openElements.hasInTableScope(C.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY,CO(e,t));break}case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(C.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY,CO(e,t));break}case C.TAG_ID.BODY:case C.TAG_ID.CAPTION:case C.TAG_ID.COL:case C.TAG_ID.COLGROUP:case C.TAG_ID.HTML:case C.TAG_ID.TD:case C.TAG_ID.TH:break;default:xp(e,t)}}function rge(e,t){const r=t.tagID;c6.has(r)?(e.openElements.hasInTableScope(C.TAG_ID.TD)||e.openElements.hasInTableScope(C.TAG_ID.TH))&&(e._closeTableCell(),Sb(e,t)):$n(e,t)}function nge(e,t){const r=t.tagID;switch(r){case C.TAG_ID.TD:case C.TAG_ID.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=le.IN_ROW);break}case C.TAG_ID.TABLE:case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:case C.TAG_ID.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),u6(e,t));break}case C.TAG_ID.BODY:case C.TAG_ID.CAPTION:case C.TAG_ID.COL:case C.TAG_ID.COLGROUP:case C.TAG_ID.HTML:break;default:_b(e,t)}}function f6(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.OPTION:{e.openElements.currentTagId===C.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,C.NS.HTML);break}case C.TAG_ID.OPTGROUP:{e.openElements.currentTagId===C.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===C.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,C.NS.HTML);break}case C.TAG_ID.INPUT:case C.TAG_ID.KEYGEN:case C.TAG_ID.TEXTAREA:case C.TAG_ID.SELECT:{e.openElements.hasInSelectScope(C.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(C.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==C.TAG_ID.SELECT&&e._processStartTag(t));break}case C.TAG_ID.SCRIPT:case C.TAG_ID.TEMPLATE:{vo(e,t);break}}}function h6(e,t){switch(t.tagID){case C.TAG_ID.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===C.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===C.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===C.TAG_ID.OPTGROUP&&e.openElements.pop();break}case C.TAG_ID.OPTION:{e.openElements.currentTagId===C.TAG_ID.OPTION&&e.openElements.pop();break}case C.TAG_ID.SELECT:{e.openElements.hasInSelectScope(C.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(C.TAG_ID.SELECT),e._resetInsertionMode());break}case C.TAG_ID.TEMPLATE:{oc(e,t);break}}}function ige(e,t){const r=t.tagID;r===C.TAG_ID.CAPTION||r===C.TAG_ID.TABLE||r===C.TAG_ID.TBODY||r===C.TAG_ID.TFOOT||r===C.TAG_ID.THEAD||r===C.TAG_ID.TR||r===C.TAG_ID.TD||r===C.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(C.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):f6(e,t)}function oge(e,t){const r=t.tagID;r===C.TAG_ID.CAPTION||r===C.TAG_ID.TABLE||r===C.TAG_ID.TBODY||r===C.TAG_ID.TFOOT||r===C.TAG_ID.THEAD||r===C.TAG_ID.TR||r===C.TAG_ID.TD||r===C.TAG_ID.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(C.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):h6(e,t)}function age(e,t){switch(t.tagID){case C.TAG_ID.BASE:case C.TAG_ID.BASEFONT:case C.TAG_ID.BGSOUND:case C.TAG_ID.LINK:case C.TAG_ID.META:case C.TAG_ID.NOFRAMES:case C.TAG_ID.SCRIPT:case C.TAG_ID.STYLE:case C.TAG_ID.TEMPLATE:case C.TAG_ID.TITLE:{vo(e,t);break}case C.TAG_ID.CAPTION:case C.TAG_ID.COLGROUP:case C.TAG_ID.TBODY:case C.TAG_ID.TFOOT:case C.TAG_ID.THEAD:{e.tmplInsertionModeStack[0]=le.IN_TABLE,e.insertionMode=le.IN_TABLE,bf(e,t);break}case C.TAG_ID.COL:{e.tmplInsertionModeStack[0]=le.IN_COLUMN_GROUP,e.insertionMode=le.IN_COLUMN_GROUP,IO(e,t);break}case C.TAG_ID.TR:{e.tmplInsertionModeStack[0]=le.IN_TABLE_BODY,e.insertionMode=le.IN_TABLE_BODY,Eb(e,t);break}case C.TAG_ID.TD:case C.TAG_ID.TH:{e.tmplInsertionModeStack[0]=le.IN_ROW,e.insertionMode=le.IN_ROW,Sb(e,t);break}default:e.tmplInsertionModeStack[0]=le.IN_BODY,e.insertionMode=le.IN_BODY,$n(e,t)}}function sge(e,t){t.tagID===C.TAG_ID.TEMPLATE&&oc(e,t)}function d6(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(C.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):OO(e,t)}function lge(e,t){t.tagID===C.TAG_ID.HTML?$n(e,t):wb(e,t)}function p6(e,t){var r;if(t.tagID===C.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=le.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===C.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(i))===null||r===void 0)&&r.endTag)&&e._setEndLocation(i,t)}}else wb(e,t)}function wb(e,t){e.insertionMode=le.IN_BODY,bb(e,t)}function cge(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.FRAMESET:{e._insertElement(t,C.NS.HTML);break}case C.TAG_ID.FRAME:{e._appendElement(t,C.NS.HTML),t.ackSelfClosing=!0;break}case C.TAG_ID.NOFRAMES:{vo(e,t);break}}}function uge(e,t){t.tagID===C.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==C.TAG_ID.FRAMESET&&(e.insertionMode=le.AFTER_FRAMESET))}function fge(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.NOFRAMES:{vo(e,t);break}}}function hge(e,t){t.tagID===C.TAG_ID.HTML&&(e.insertionMode=le.AFTER_AFTER_FRAMESET)}function dge(e,t){t.tagID===C.TAG_ID.HTML?$n(e,t):Ab(e,t)}function Ab(e,t){e.insertionMode=le.IN_BODY,bb(e,t)}function pge(e,t){switch(t.tagID){case C.TAG_ID.HTML:{$n(e,t);break}case C.TAG_ID.NOFRAMES:{vo(e,t);break}}}function mge(e,t){t.chars=Kj.REPLACEMENT_CHARACTER,e._insertCharacters(t)}function gge(e,t){e._insertCharacters(t),e.framesetOk=!1}function m6(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==C.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function vge(e,t){if(Qo.causesExit(t))m6(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(r);i===C.NS.MATHML?Qo.adjustTokenMathMLAttrs(t):i===C.NS.SVG&&(Qo.adjustTokenSVGTagName(t),Qo.adjustTokenSVGAttrs(t)),Qo.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function yge(e,t){if(t.tagID===C.TAG_ID.P||t.tagID===C.TAG_ID.BR){m6(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){const i=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(i)===C.NS.HTML){e._endTagOutsideForeignContent(t);break}const n=e.treeAdapter.getTagName(i);if(n.toLowerCase()===t.tagName){t.tagName=n,e.openElements.shortenToLength(r);break}}}var _f={};Object.defineProperty(_f,"__esModule",{value:!0}),_f.serializeOuter=_f.serialize=void 0;const yr=Ga,g6=ef,bge=yb,_ge=new Set([yr.TAG_NAMES.AREA,yr.TAG_NAMES.BASE,yr.TAG_NAMES.BASEFONT,yr.TAG_NAMES.BGSOUND,yr.TAG_NAMES.BR,yr.TAG_NAMES.COL,yr.TAG_NAMES.EMBED,yr.TAG_NAMES.FRAME,yr.TAG_NAMES.HR,yr.TAG_NAMES.IMG,yr.TAG_NAMES.INPUT,yr.TAG_NAMES.KEYGEN,yr.TAG_NAMES.LINK,yr.TAG_NAMES.META,yr.TAG_NAMES.PARAM,yr.TAG_NAMES.SOURCE,yr.TAG_NAMES.TRACK,yr.TAG_NAMES.WBR]);function v6(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===yr.NS.HTML&&_ge.has(t.treeAdapter.getTagName(e))}const y6={treeAdapter:bge.defaultTreeAdapter,scriptingEnabled:!0};function Tge(e,t){const r=Object.assign(Object.assign({},y6),t);return v6(e,r)?"":b6(e,r)}_f.serialize=Tge;function Ege(e,t){const r=Object.assign(Object.assign({},y6),t);return _6(e,r)}_f.serializeOuter=Ege;function b6(e,t){let r="";const i=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===yr.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===yr.NS.HTML?t.treeAdapter.getTemplateContent(e):e,n=t.treeAdapter.getChildNodes(i);if(n)for(const o of n)r+=_6(o,t);return r}function _6(e,t){return t.treeAdapter.isElementNode(e)?Sge(e,t):t.treeAdapter.isTextNode(e)?Age(e,t):t.treeAdapter.isCommentNode(e)?Oge(e,t):t.treeAdapter.isDocumentTypeNode(e)?kge(e,t):""}function Sge(e,t){const r=t.treeAdapter.getTagName(e);return`<${r}${wge(e,t)}>${v6(e,t)?"":`${b6(e,t)}</${r}>`}`}function wge(e,{treeAdapter:t}){let r="";for(const i of t.getAttrList(e)){if(r+=" ",!i.namespace)r+=i.name;else switch(i.namespace){case yr.NS.XML:{r+=`xml:${i.name}`;break}case yr.NS.XMLNS:{i.name!=="xmlns"&&(r+="xmlns:"),r+=i.name;break}case yr.NS.XLINK:{r+=`xlink:${i.name}`;break}default:r+=`${i.prefix}:${i.name}`}r+=`="${(0,g6.escapeAttribute)(i.value)}"`}return r}function Age(e,t){const{treeAdapter:r}=t,i=r.getTextNodeContent(e),n=r.getParentNode(e),o=n&&r.isElementNode(n)&&r.getTagName(n);return o&&r.getNamespaceURI(n)===yr.NS.HTML&&(0,yr.hasUnescapedText)(o,t.scriptingEnabled)?i:(0,g6.escapeText)(i)}function Oge(e,{treeAdapter:t}){return`<!--${t.getCommentNodeContent(e)}-->`}function kge(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=Ep;var r=yb;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return r.defaultTreeAdapter}});var i=Ep;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return i.Parser}});var n=_f;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return n.serializeOuter}});var o=Sp;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return o.ERR}}),e.foreignContent=SO,e.html=Ga,e.Token=pb;var a=ic;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return a.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return a.TokenizerMode}});function s(u,l){return t.Parser.parse(u,l)}e.parse=s;function c(u,l,h){typeof u=="string"&&(h=l,l=u,u=null);const f=t.Parser.getFragmentParser(u,h);return f.tokenizer.write(l,!0),f.getFragment()}e.parseFragment=c})(xj);var T6={},E6={},Mp={},ac={},Ob={},kb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);e.REPLACEMENT_CHARACTER="\uFFFD",function(s){s[s.EOF=-1]="EOF",s[s.NULL=0]="NULL",s[s.TABULATION=9]="TABULATION",s[s.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",s[s.LINE_FEED=10]="LINE_FEED",s[s.FORM_FEED=12]="FORM_FEED",s[s.SPACE=32]="SPACE",s[s.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",s[s.QUOTATION_MARK=34]="QUOTATION_MARK",s[s.NUMBER_SIGN=35]="NUMBER_SIGN",s[s.AMPERSAND=38]="AMPERSAND",s[s.APOSTROPHE=39]="APOSTROPHE",s[s.HYPHEN_MINUS=45]="HYPHEN_MINUS",s[s.SOLIDUS=47]="SOLIDUS",s[s.DIGIT_0=48]="DIGIT_0",s[s.DIGIT_9=57]="DIGIT_9",s[s.SEMICOLON=59]="SEMICOLON",s[s.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",s[s.EQUALS_SIGN=61]="EQUALS_SIGN",s[s.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",s[s.QUESTION_MARK=63]="QUESTION_MARK",s[s.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",s[s.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",s[s.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",s[s.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",s[s.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",s[s.GRAVE_ACCENT=96]="GRAVE_ACCENT",s[s.LATIN_SMALL_A=97]="LATIN_SMALL_A",s[s.LATIN_SMALL_F=102]="LATIN_SMALL_F",s[s.LATIN_SMALL_X=120]="LATIN_SMALL_X",s[s.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",s[s.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(e.CODE_POINTS||(e.CODE_POINTS={})),e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function r(s){return s>=55296&&s<=57343}e.isSurrogate=r;function i(s){return s>=56320&&s<=57343}e.isSurrogatePair=i;function n(s,c){return(s-55296)*1024+9216+c}e.getSurrogatePairCodePoint=n;function o(s){return s!==32&&s!==10&&s!==13&&s!==9&&s!==12&&s>=1&&s<=31||s>=127&&s<=159}e.isControlCodePoint=o;function a(s){return s>=64976&&s<=65007||t.has(s)}e.isUndefinedCodePoint=a})(kb);var Lp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(e.ERR||(e.ERR={}))})(Lp);function Ige(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S6(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Pge(i.key),i)}}function Cge(e,t,r){return t&&S6(e.prototype,t),r&&S6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pge(e){var t=Dge(e,"string");return typeof t=="symbol"?t:String(t)}function Dge(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.Preprocessor=void 0;const Qn=kb,PO=Lp,xge=65536;let Nge=function(){function e(t){Ige(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=xge,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return Cge(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(r){const{line:i,col:n,offset:o}=this;return{code:r,startLine:i,endLine:i,startCol:n,endCol:n,startOffset:o,endOffset:o}}},{key:"_err",value:function(r){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(r)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(r){if(this.pos!==this.html.length-1){const i=this.html.charCodeAt(this.pos+1);if((0,Qn.isSurrogatePair)(i))return this.pos++,this._addGap(),(0,Qn.getSurrogatePairCodePoint)(r,i)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Qn.CODE_POINTS.EOF;return this._err(PO.ERR.surrogateInInputStream),r}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(r,i){this.html.length>0?this.html+=r:this.html=r,this.endOfChunkHit=!1,this.lastChunkWritten=i}},{key:"insertHtmlAtCurrentPos",value:function(r){this.html=this.html.substring(0,this.pos+1)+r+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(r,i){if(this.pos+r.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(i)return this.html.startsWith(r,this.pos);for(let n=0;n<r.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==r.charCodeAt(n))return!1;return!0}},{key:"peek",value:function(r){const i=this.pos+r;if(i>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Qn.CODE_POINTS.EOF;const n=this.html.charCodeAt(i);return n===Qn.CODE_POINTS.CARRIAGE_RETURN?Qn.CODE_POINTS.LINE_FEED:n}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Qn.CODE_POINTS.EOF;let r=this.html.charCodeAt(this.pos);return r===Qn.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Qn.CODE_POINTS.LINE_FEED):r===Qn.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,Qn.isSurrogate)(r)&&(r=this._processSurrogate(r)),this.handler.onParseError===null||r>31&&r<127||r===Qn.CODE_POINTS.LINE_FEED||r===Qn.CODE_POINTS.CARRIAGE_RETURN||r>159&&r<64976||this._checkForProblematicCharacters(r),r)}},{key:"_checkForProblematicCharacters",value:function(r){(0,Qn.isControlCodePoint)(r)?this._err(PO.ERR.controlCharacterInInputStream):(0,Qn.isUndefinedCodePoint)(r)&&this._err(PO.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(r){for(this.pos-=r;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();Ob.Preprocessor=Nge;var Ib={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,function(r){r[r.CHARACTER=0]="CHARACTER",r[r.NULL_CHARACTER=1]="NULL_CHARACTER",r[r.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",r[r.START_TAG=3]="START_TAG",r[r.END_TAG=4]="END_TAG",r[r.COMMENT=5]="COMMENT",r[r.DOCTYPE=6]="DOCTYPE",r[r.EOF=7]="EOF",r[r.HIBERNATION=8]="HIBERNATION"}(e.TokenType||(e.TokenType={}));function t(r,i){for(let n=r.attrs.length-1;n>=0;n--)if(r.attrs[n].name===i)return r.attrs[n].value;return null}e.getTokenAttr=t})(Ib);var za={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0;var t;(function(l){l.HTML="http://www.w3.org/1999/xhtml",l.MATHML="http://www.w3.org/1998/Math/MathML",l.SVG="http://www.w3.org/2000/svg",l.XLINK="http://www.w3.org/1999/xlink",l.XML="http://www.w3.org/XML/1998/namespace",l.XMLNS="http://www.w3.org/2000/xmlns/"})(t=e.NS||(e.NS={})),function(l){l.TYPE="type",l.ACTION="action",l.ENCODING="encoding",l.PROMPT="prompt",l.NAME="name",l.COLOR="color",l.FACE="face",l.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(l){l.NO_QUIRKS="no-quirks",l.QUIRKS="quirks",l.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={}));var r;(function(l){l.A="a",l.ADDRESS="address",l.ANNOTATION_XML="annotation-xml",l.APPLET="applet",l.AREA="area",l.ARTICLE="article",l.ASIDE="aside",l.B="b",l.BASE="base",l.BASEFONT="basefont",l.BGSOUND="bgsound",l.BIG="big",l.BLOCKQUOTE="blockquote",l.BODY="body",l.BR="br",l.BUTTON="button",l.CAPTION="caption",l.CENTER="center",l.CODE="code",l.COL="col",l.COLGROUP="colgroup",l.DD="dd",l.DESC="desc",l.DETAILS="details",l.DIALOG="dialog",l.DIR="dir",l.DIV="div",l.DL="dl",l.DT="dt",l.EM="em",l.EMBED="embed",l.FIELDSET="fieldset",l.FIGCAPTION="figcaption",l.FIGURE="figure",l.FONT="font",l.FOOTER="footer",l.FOREIGN_OBJECT="foreignObject",l.FORM="form",l.FRAME="frame",l.FRAMESET="frameset",l.H1="h1",l.H2="h2",l.H3="h3",l.H4="h4",l.H5="h5",l.H6="h6",l.HEAD="head",l.HEADER="header",l.HGROUP="hgroup",l.HR="hr",l.HTML="html",l.I="i",l.IMG="img",l.IMAGE="image",l.INPUT="input",l.IFRAME="iframe",l.KEYGEN="keygen",l.LABEL="label",l.LI="li",l.LINK="link",l.LISTING="listing",l.MAIN="main",l.MALIGNMARK="malignmark",l.MARQUEE="marquee",l.MATH="math",l.MENU="menu",l.META="meta",l.MGLYPH="mglyph",l.MI="mi",l.MO="mo",l.MN="mn",l.MS="ms",l.MTEXT="mtext",l.NAV="nav",l.NOBR="nobr",l.NOFRAMES="noframes",l.NOEMBED="noembed",l.NOSCRIPT="noscript",l.OBJECT="object",l.OL="ol",l.OPTGROUP="optgroup",l.OPTION="option",l.P="p",l.PARAM="param",l.PLAINTEXT="plaintext",l.PRE="pre",l.RB="rb",l.RP="rp",l.RT="rt",l.RTC="rtc",l.RUBY="ruby",l.S="s",l.SCRIPT="script",l.SECTION="section",l.SELECT="select",l.SOURCE="source",l.SMALL="small",l.SPAN="span",l.STRIKE="strike",l.STRONG="strong",l.STYLE="style",l.SUB="sub",l.SUMMARY="summary",l.SUP="sup",l.TABLE="table",l.TBODY="tbody",l.TEMPLATE="template",l.TEXTAREA="textarea",l.TFOOT="tfoot",l.TD="td",l.TH="th",l.THEAD="thead",l.TITLE="title",l.TR="tr",l.TRACK="track",l.TT="tt",l.U="u",l.UL="ul",l.SVG="svg",l.VAR="var",l.WBR="wbr",l.XMP="xmp"})(r=e.TAG_NAMES||(e.TAG_NAMES={}));var i;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.A=1]="A",l[l.ADDRESS=2]="ADDRESS",l[l.ANNOTATION_XML=3]="ANNOTATION_XML",l[l.APPLET=4]="APPLET",l[l.AREA=5]="AREA",l[l.ARTICLE=6]="ARTICLE",l[l.ASIDE=7]="ASIDE",l[l.B=8]="B",l[l.BASE=9]="BASE",l[l.BASEFONT=10]="BASEFONT",l[l.BGSOUND=11]="BGSOUND",l[l.BIG=12]="BIG",l[l.BLOCKQUOTE=13]="BLOCKQUOTE",l[l.BODY=14]="BODY",l[l.BR=15]="BR",l[l.BUTTON=16]="BUTTON",l[l.CAPTION=17]="CAPTION",l[l.CENTER=18]="CENTER",l[l.CODE=19]="CODE",l[l.COL=20]="COL",l[l.COLGROUP=21]="COLGROUP",l[l.DD=22]="DD",l[l.DESC=23]="DESC",l[l.DETAILS=24]="DETAILS",l[l.DIALOG=25]="DIALOG",l[l.DIR=26]="DIR",l[l.DIV=27]="DIV",l[l.DL=28]="DL",l[l.DT=29]="DT",l[l.EM=30]="EM",l[l.EMBED=31]="EMBED",l[l.FIELDSET=32]="FIELDSET",l[l.FIGCAPTION=33]="FIGCAPTION",l[l.FIGURE=34]="FIGURE",l[l.FONT=35]="FONT",l[l.FOOTER=36]="FOOTER",l[l.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",l[l.FORM=38]="FORM",l[l.FRAME=39]="FRAME",l[l.FRAMESET=40]="FRAMESET",l[l.H1=41]="H1",l[l.H2=42]="H2",l[l.H3=43]="H3",l[l.H4=44]="H4",l[l.H5=45]="H5",l[l.H6=46]="H6",l[l.HEAD=47]="HEAD",l[l.HEADER=48]="HEADER",l[l.HGROUP=49]="HGROUP",l[l.HR=50]="HR",l[l.HTML=51]="HTML",l[l.I=52]="I",l[l.IMG=53]="IMG",l[l.IMAGE=54]="IMAGE",l[l.INPUT=55]="INPUT",l[l.IFRAME=56]="IFRAME",l[l.KEYGEN=57]="KEYGEN",l[l.LABEL=58]="LABEL",l[l.LI=59]="LI",l[l.LINK=60]="LINK",l[l.LISTING=61]="LISTING",l[l.MAIN=62]="MAIN",l[l.MALIGNMARK=63]="MALIGNMARK",l[l.MARQUEE=64]="MARQUEE",l[l.MATH=65]="MATH",l[l.MENU=66]="MENU",l[l.META=67]="META",l[l.MGLYPH=68]="MGLYPH",l[l.MI=69]="MI",l[l.MO=70]="MO",l[l.MN=71]="MN",l[l.MS=72]="MS",l[l.MTEXT=73]="MTEXT",l[l.NAV=74]="NAV",l[l.NOBR=75]="NOBR",l[l.NOFRAMES=76]="NOFRAMES",l[l.NOEMBED=77]="NOEMBED",l[l.NOSCRIPT=78]="NOSCRIPT",l[l.OBJECT=79]="OBJECT",l[l.OL=80]="OL",l[l.OPTGROUP=81]="OPTGROUP",l[l.OPTION=82]="OPTION",l[l.P=83]="P",l[l.PARAM=84]="PARAM",l[l.PLAINTEXT=85]="PLAINTEXT",l[l.PRE=86]="PRE",l[l.RB=87]="RB",l[l.RP=88]="RP",l[l.RT=89]="RT",l[l.RTC=90]="RTC",l[l.RUBY=91]="RUBY",l[l.S=92]="S",l[l.SCRIPT=93]="SCRIPT",l[l.SECTION=94]="SECTION",l[l.SELECT=95]="SELECT",l[l.SOURCE=96]="SOURCE",l[l.SMALL=97]="SMALL",l[l.SPAN=98]="SPAN",l[l.STRIKE=99]="STRIKE",l[l.STRONG=100]="STRONG",l[l.STYLE=101]="STYLE",l[l.SUB=102]="SUB",l[l.SUMMARY=103]="SUMMARY",l[l.SUP=104]="SUP",l[l.TABLE=105]="TABLE",l[l.TBODY=106]="TBODY",l[l.TEMPLATE=107]="TEMPLATE",l[l.TEXTAREA=108]="TEXTAREA",l[l.TFOOT=109]="TFOOT",l[l.TD=110]="TD",l[l.TH=111]="TH",l[l.THEAD=112]="THEAD",l[l.TITLE=113]="TITLE",l[l.TR=114]="TR",l[l.TRACK=115]="TRACK",l[l.TT=116]="TT",l[l.U=117]="U",l[l.UL=118]="UL",l[l.SVG=119]="SVG",l[l.VAR=120]="VAR",l[l.WBR=121]="WBR",l[l.XMP=122]="XMP"})(i=e.TAG_ID||(e.TAG_ID={}));const n=new Map([[r.A,i.A],[r.ADDRESS,i.ADDRESS],[r.ANNOTATION_XML,i.ANNOTATION_XML],[r.APPLET,i.APPLET],[r.AREA,i.AREA],[r.ARTICLE,i.ARTICLE],[r.ASIDE,i.ASIDE],[r.B,i.B],[r.BASE,i.BASE],[r.BASEFONT,i.BASEFONT],[r.BGSOUND,i.BGSOUND],[r.BIG,i.BIG],[r.BLOCKQUOTE,i.BLOCKQUOTE],[r.BODY,i.BODY],[r.BR,i.BR],[r.BUTTON,i.BUTTON],[r.CAPTION,i.CAPTION],[r.CENTER,i.CENTER],[r.CODE,i.CODE],[r.COL,i.COL],[r.COLGROUP,i.COLGROUP],[r.DD,i.DD],[r.DESC,i.DESC],[r.DETAILS,i.DETAILS],[r.DIALOG,i.DIALOG],[r.DIR,i.DIR],[r.DIV,i.DIV],[r.DL,i.DL],[r.DT,i.DT],[r.EM,i.EM],[r.EMBED,i.EMBED],[r.FIELDSET,i.FIELDSET],[r.FIGCAPTION,i.FIGCAPTION],[r.FIGURE,i.FIGURE],[r.FONT,i.FONT],[r.FOOTER,i.FOOTER],[r.FOREIGN_OBJECT,i.FOREIGN_OBJECT],[r.FORM,i.FORM],[r.FRAME,i.FRAME],[r.FRAMESET,i.FRAMESET],[r.H1,i.H1],[r.H2,i.H2],[r.H3,i.H3],[r.H4,i.H4],[r.H5,i.H5],[r.H6,i.H6],[r.HEAD,i.HEAD],[r.HEADER,i.HEADER],[r.HGROUP,i.HGROUP],[r.HR,i.HR],[r.HTML,i.HTML],[r.I,i.I],[r.IMG,i.IMG],[r.IMAGE,i.IMAGE],[r.INPUT,i.INPUT],[r.IFRAME,i.IFRAME],[r.KEYGEN,i.KEYGEN],[r.LABEL,i.LABEL],[r.LI,i.LI],[r.LINK,i.LINK],[r.LISTING,i.LISTING],[r.MAIN,i.MAIN],[r.MALIGNMARK,i.MALIGNMARK],[r.MARQUEE,i.MARQUEE],[r.MATH,i.MATH],[r.MENU,i.MENU],[r.META,i.META],[r.MGLYPH,i.MGLYPH],[r.MI,i.MI],[r.MO,i.MO],[r.MN,i.MN],[r.MS,i.MS],[r.MTEXT,i.MTEXT],[r.NAV,i.NAV],[r.NOBR,i.NOBR],[r.NOFRAMES,i.NOFRAMES],[r.NOEMBED,i.NOEMBED],[r.NOSCRIPT,i.NOSCRIPT],[r.OBJECT,i.OBJECT],[r.OL,i.OL],[r.OPTGROUP,i.OPTGROUP],[r.OPTION,i.OPTION],[r.P,i.P],[r.PARAM,i.PARAM],[r.PLAINTEXT,i.PLAINTEXT],[r.PRE,i.PRE],[r.RB,i.RB],[r.RP,i.RP],[r.RT,i.RT],[r.RTC,i.RTC],[r.RUBY,i.RUBY],[r.S,i.S],[r.SCRIPT,i.SCRIPT],[r.SECTION,i.SECTION],[r.SELECT,i.SELECT],[r.SOURCE,i.SOURCE],[r.SMALL,i.SMALL],[r.SPAN,i.SPAN],[r.STRIKE,i.STRIKE],[r.STRONG,i.STRONG],[r.STYLE,i.STYLE],[r.SUB,i.SUB],[r.SUMMARY,i.SUMMARY],[r.SUP,i.SUP],[r.TABLE,i.TABLE],[r.TBODY,i.TBODY],[r.TEMPLATE,i.TEMPLATE],[r.TEXTAREA,i.TEXTAREA],[r.TFOOT,i.TFOOT],[r.TD,i.TD],[r.TH,i.TH],[r.THEAD,i.THEAD],[r.TITLE,i.TITLE],[r.TR,i.TR],[r.TRACK,i.TRACK],[r.TT,i.TT],[r.U,i.U],[r.UL,i.UL],[r.SVG,i.SVG],[r.VAR,i.VAR],[r.WBR,i.WBR],[r.XMP,i.XMP]]);function o(l){var h;return(h=n.get(l))!==null&&h!==void 0?h:i.UNKNOWN}e.getTagID=o;const a=i;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([a.ADDRESS,a.APPLET,a.AREA,a.ARTICLE,a.ASIDE,a.BASE,a.BASEFONT,a.BGSOUND,a.BLOCKQUOTE,a.BODY,a.BR,a.BUTTON,a.CAPTION,a.CENTER,a.COL,a.COLGROUP,a.DD,a.DETAILS,a.DIR,a.DIV,a.DL,a.DT,a.EMBED,a.FIELDSET,a.FIGCAPTION,a.FIGURE,a.FOOTER,a.FORM,a.FRAME,a.FRAMESET,a.H1,a.H2,a.H3,a.H4,a.H5,a.H6,a.HEAD,a.HEADER,a.HGROUP,a.HR,a.HTML,a.IFRAME,a.IMG,a.INPUT,a.LI,a.LINK,a.LISTING,a.MAIN,a.MARQUEE,a.MENU,a.META,a.NAV,a.NOEMBED,a.NOFRAMES,a.NOSCRIPT,a.OBJECT,a.OL,a.P,a.PARAM,a.PLAINTEXT,a.PRE,a.SCRIPT,a.SECTION,a.SELECT,a.SOURCE,a.STYLE,a.SUMMARY,a.TABLE,a.TBODY,a.TD,a.TEMPLATE,a.TEXTAREA,a.TFOOT,a.TH,a.THEAD,a.TITLE,a.TR,a.TRACK,a.UL,a.WBR,a.XMP]),[t.MATHML]:new Set([a.MI,a.MO,a.MN,a.MS,a.MTEXT,a.ANNOTATION_XML]),[t.SVG]:new Set([a.TITLE,a.FOREIGN_OBJECT,a.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set};function s(l){return l===a.H1||l===a.H2||l===a.H3||l===a.H4||l===a.H5||l===a.H6}e.isNumberedHeader=s;const c=new Set([r.STYLE,r.SCRIPT,r.XMP,r.IFRAME,r.NOEMBED,r.NOFRAMES,r.PLAINTEXT]);function u(l,h){return c.has(l)||h&&l===r.NOSCRIPT}e.hasUnescapedText=u})(za);function Rge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w6(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Lge(i.key),i)}}function Mge(e,t,r){return t&&w6(e.prototype,t),r&&w6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lge(e){var t=Bge(e,"string");return typeof t=="symbol"?t:String(t)}function Bge(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(ac,"__esModule",{value:!0}),ac.Tokenizer=ac.TokenizerMode=void 0;const Hge=Ob,V=kb,vi=Ib,Jo=Zl,Re=Lp,DO=za,$ge=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ee;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ee||(ee={})),ac.TokenizerMode={DATA:ee.DATA,RCDATA:ee.RCDATA,RAWTEXT:ee.RAWTEXT,SCRIPT_DATA:ee.SCRIPT_DATA,PLAINTEXT:ee.PLAINTEXT,CDATA_SECTION:ee.CDATA_SECTION};function Bp(e){return e>=V.CODE_POINTS.DIGIT_0&&e<=V.CODE_POINTS.DIGIT_9}function Hp(e){return e>=V.CODE_POINTS.LATIN_CAPITAL_A&&e<=V.CODE_POINTS.LATIN_CAPITAL_Z}function Fge(e){return e>=V.CODE_POINTS.LATIN_SMALL_A&&e<=V.CODE_POINTS.LATIN_SMALL_Z}function Ls(e){return Fge(e)||Hp(e)}function xO(e){return Ls(e)||Bp(e)}function A6(e){return e>=V.CODE_POINTS.LATIN_CAPITAL_A&&e<=V.CODE_POINTS.LATIN_CAPITAL_F}function O6(e){return e>=V.CODE_POINTS.LATIN_SMALL_A&&e<=V.CODE_POINTS.LATIN_SMALL_F}function jge(e){return Bp(e)||A6(e)||O6(e)}function Cb(e){return e+32}function k6(e){return e===V.CODE_POINTS.SPACE||e===V.CODE_POINTS.LINE_FEED||e===V.CODE_POINTS.TABULATION||e===V.CODE_POINTS.FORM_FEED}function Uge(e){return e===V.CODE_POINTS.EQUALS_SIGN||xO(e)}function I6(e){return k6(e)||e===V.CODE_POINTS.SOLIDUS||e===V.CODE_POINTS.GREATER_THAN_SIGN}let Gge=function(){function e(t,r){Rge(this,e),this.options=t,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ee.DATA,this.returnState=ee.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Hge.Preprocessor(r),this.currentLocation=this.getCurrentLocation(-1)}return Mge(e,[{key:"_err",value:function(r){var i,n;(n=(i=this.handler).onParseError)===null||n===void 0||n.call(i,this.preprocessor.getError(r))}},{key:"getCurrentLocation",value:function(r){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-r,startOffset:this.preprocessor.offset-r,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const r=this._consume();this._ensureHibernation()||this._callState(r)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(r){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||r?.())}},{key:"write",value:function(r,i,n){this.active=!0,this.preprocessor.write(r,i),this._runParsingLoop(),this.paused||n?.()}},{key:"insertHtmlAtCurrentPos",value:function(r){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(r),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(r){this.consumedAfterSnapshot-=r,this.preprocessor.retreat(r)}},{key:"_reconsumeInState",value:function(r,i){this.state=r,this._callState(i)}},{key:"_advanceBy",value:function(r){this.consumedAfterSnapshot+=r;for(let i=0;i<r;i++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(r,i){return this.preprocessor.startsWith(r,i)?(this._advanceBy(r.length-1),!0):!1}},{key:"_createStartTagToken",value:function(){this.currentToken={type:vi.TokenType.START_TAG,tagName:"",tagID:DO.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:vi.TokenType.END_TAG,tagName:"",tagID:DO.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(r){this.currentToken={type:vi.TokenType.COMMENT,data:"",location:this.getCurrentLocation(r)}}},{key:"_createDoctypeToken",value:function(r){this.currentToken={type:vi.TokenType.DOCTYPE,name:r,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(r,i){this.currentCharacterToken={type:r,chars:i,location:this.currentLocation}}},{key:"_createAttr",value:function(r){this.currentAttr={name:r,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var r,i;const n=this.currentToken;if((0,vi.getTokenAttr)(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const o=(r=(i=n.location).attrs)!==null&&r!==void 0?r:i.attrs=Object.create(null);o[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Re.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(r){this._emitCurrentCharacterToken(r.location),this.currentToken=null,r.location&&(r.location.endLine=this.preprocessor.line,r.location.endCol=this.preprocessor.col+1,r.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const r=this.currentToken;this.prepareToken(r),r.tagID=(0,DO.getTagID)(r.tagName),r.type===vi.TokenType.START_TAG?(this.lastStartTagName=r.tagName,this.handler.onStartTag(r)):(r.attrs.length>0&&this._err(Re.ERR.endTagWithAttributes),r.selfClosing&&this._err(Re.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(r)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(r){this.prepareToken(r),this.handler.onComment(r),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(r){this.prepareToken(r),this.handler.onDoctype(r),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(r){if(this.currentCharacterToken){switch(r&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=r.startLine,this.currentCharacterToken.location.endCol=r.startCol,this.currentCharacterToken.location.endOffset=r.startOffset),this.currentCharacterToken.type){case vi.TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case vi.TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case vi.TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const r=this.getCurrentLocation(0);r&&(r.endLine=r.startLine,r.endCol=r.startCol,r.endOffset=r.startOffset),this._emitCurrentCharacterToken(r),this.handler.onEof({type:vi.TokenType.EOF,location:r}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(r,i){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==r)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=i;return}this._createCharacterToken(r,i)}},{key:"_emitCodePoint",value:function(r){const i=k6(r)?vi.TokenType.WHITESPACE_CHARACTER:r===V.CODE_POINTS.NULL?vi.TokenType.NULL_CHARACTER:vi.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(i,String.fromCodePoint(r))}},{key:"_emitChars",value:function(r){this._appendCharToCurrentCharacterToken(vi.TokenType.CHARACTER,r)}},{key:"_matchNamedCharacterReference",value:function(r){let i=null,n=0,o=!1;for(let a=0,s=Jo.htmlDecodeTree[0];a>=0&&(a=(0,Jo.determineBranch)(Jo.htmlDecodeTree,s,a+1,r),!(a<0));r=this._consume()){n+=1,s=Jo.htmlDecodeTree[a];const c=s&Jo.BinTrieFlags.VALUE_LENGTH;if(c){const u=(c>>14)-1;if(r!==V.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Uge(this.preprocessor.peek(1))?(i=[V.CODE_POINTS.AMPERSAND],a+=u):(i=u===0?[Jo.htmlDecodeTree[a]&~Jo.BinTrieFlags.VALUE_LENGTH]:u===1?[Jo.htmlDecodeTree[++a]]:[Jo.htmlDecodeTree[++a],Jo.htmlDecodeTree[++a]],n=0,o=r!==V.CODE_POINTS.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(n),o&&!this.preprocessor.endOfChunkHit&&this._err(Re.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),i}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(r){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(r):this._emitCodePoint(r)}},{key:"_callState",value:function(r){switch(this.state){case ee.DATA:{this._stateData(r);break}case ee.RCDATA:{this._stateRcdata(r);break}case ee.RAWTEXT:{this._stateRawtext(r);break}case ee.SCRIPT_DATA:{this._stateScriptData(r);break}case ee.PLAINTEXT:{this._statePlaintext(r);break}case ee.TAG_OPEN:{this._stateTagOpen(r);break}case ee.END_TAG_OPEN:{this._stateEndTagOpen(r);break}case ee.TAG_NAME:{this._stateTagName(r);break}case ee.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(r);break}case ee.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(r);break}case ee.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(r);break}case ee.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(r);break}case ee.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(r);break}case ee.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(r);break}case ee.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(r);break}case ee.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(r);break}case ee.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(r);break}case ee.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(r);break}case ee.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(r);break}case ee.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(r);break}case ee.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(r);break}case ee.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(r);break}case ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(r);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(r);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(r);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(r);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(r);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(r);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(r);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(r);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(r);break}case ee.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(r);break}case ee.ATTRIBUTE_NAME:{this._stateAttributeName(r);break}case ee.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(r);break}case ee.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(r);break}case ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(r);break}case ee.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(r);break}case ee.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(r);break}case ee.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(r);break}case ee.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(r);break}case ee.BOGUS_COMMENT:{this._stateBogusComment(r);break}case ee.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(r);break}case ee.COMMENT_START:{this._stateCommentStart(r);break}case ee.COMMENT_START_DASH:{this._stateCommentStartDash(r);break}case ee.COMMENT:{this._stateComment(r);break}case ee.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(r);break}case ee.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(r);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(r);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(r);break}case ee.COMMENT_END_DASH:{this._stateCommentEndDash(r);break}case ee.COMMENT_END:{this._stateCommentEnd(r);break}case ee.COMMENT_END_BANG:{this._stateCommentEndBang(r);break}case ee.DOCTYPE:{this._stateDoctype(r);break}case ee.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(r);break}case ee.DOCTYPE_NAME:{this._stateDoctypeName(r);break}case ee.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(r);break}case ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(r);break}case ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(r);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(r);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(r);break}case ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(r);break}case ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(r);break}case ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(r);break}case ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(r);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(r);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(r);break}case ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(r);break}case ee.BOGUS_DOCTYPE:{this._stateBogusDoctype(r);break}case ee.CDATA_SECTION:{this._stateCdataSection(r);break}case ee.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(r);break}case ee.CDATA_SECTION_END:{this._stateCdataSectionEnd(r);break}case ee.CHARACTER_REFERENCE:{this._stateCharacterReference(r);break}case ee.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(r);break}case ee.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(r);break}case ee.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(r);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(r);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(r);break}case ee.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(r);break}case ee.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(r);break}default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(r){switch(r){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.TAG_OPEN;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=ee.DATA,this.state=ee.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitCodePoint(r);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateRcdata",value:function(r){switch(r){case V.CODE_POINTS.AMPERSAND:{this.returnState=ee.RCDATA,this.state=ee.CHARACTER_REFERENCE;break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.RCDATA_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateRawtext",value:function(r){switch(r){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.RAWTEXT_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateScriptData",value:function(r){switch(r){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_statePlaintext",value:function(r){switch(r){case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateTagOpen",value:function(r){if(Ls(r))this._createStartTagToken(),this.state=ee.TAG_NAME,this._stateTagName(r);else switch(r){case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=ee.MARKUP_DECLARATION_OPEN;break}case V.CODE_POINTS.SOLIDUS:{this.state=ee.END_TAG_OPEN;break}case V.CODE_POINTS.QUESTION_MARK:{this._err(Re.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(r);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Re.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ee.DATA,this._stateData(r)}}},{key:"_stateEndTagOpen",value:function(r){if(Ls(r))this._createEndTagToken(),this.state=ee.TAG_NAME,this._stateTagName(r);else switch(r){case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingEndTagName),this.state=ee.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Re.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(r)}}},{key:"_stateTagName",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.tagName+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:i.tagName+=String.fromCodePoint(Hp(r)?Cb(r):r)}}},{key:"_stateRcdataLessThanSign",value:function(r){r===V.CODE_POINTS.SOLIDUS?this.state=ee.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RCDATA,this._stateRcdata(r))}},{key:"_stateRcdataEndTagOpen",value:function(r){Ls(r)?(this.state=ee.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(r)):(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(r))}},{key:"handleSpecialEndTag",value:function(r){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const i=this.currentToken;switch(i.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ee.BEFORE_ATTRIBUTE_NAME,!1;case V.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ee.SELF_CLOSING_START_TAG,!1;case V.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ee.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(r))}},{key:"_stateRawtextLessThanSign",value:function(r){r===V.CODE_POINTS.SOLIDUS?this.state=ee.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RAWTEXT,this._stateRawtext(r))}},{key:"_stateRawtextEndTagOpen",value:function(r){Ls(r)?(this.state=ee.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(r)):(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(r))}},{key:"_stateRawtextEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(r))}},{key:"_stateScriptDataLessThanSign",value:function(r){switch(r){case V.CODE_POINTS.SOLIDUS:{this.state=ee.SCRIPT_DATA_END_TAG_OPEN;break}case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=ee.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ee.SCRIPT_DATA,this._stateScriptData(r)}}},{key:"_stateScriptDataEndTagOpen",value:function(r){Ls(r)?(this.state=ee.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(r)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEscapeStart",value:function(r){r===V.CODE_POINTS.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEscapeStartDash",value:function(r){r===V.CODE_POINTS.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(r))}},{key:"_stateScriptDataEscaped",value:function(r){switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateScriptDataEscapedDash",value:function(r){switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataEscapedDashDash",value:function(r){switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(r){r===V.CODE_POINTS.SOLIDUS?this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ls(r)?(this._emitChars("<"),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(r)):(this._emitChars("<"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(r){Ls(r)?(this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(r)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataEscapedEndTagName",value:function(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(r){if(this.preprocessor.startsWith(V.SEQUENCES.SCRIPT,!1)&&I6(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))){this._emitCodePoint(r);for(let i=0;i<V.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}},{key:"_stateScriptDataDoubleEscaped",value:function(r){switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(r){switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(r){switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(r)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(r){r===V.CODE_POINTS.SOLIDUS?(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(r))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(r){if(this.preprocessor.startsWith(V.SEQUENCES.SCRIPT,!1)&&I6(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))){this._emitCodePoint(r);for(let i=0;i<V.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(r))}},{key:"_stateBeforeAttributeName",value:function(r){switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.SOLIDUS:case V.CODE_POINTS.GREATER_THAN_SIGN:case V.CODE_POINTS.EOF:{this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(r);break}case V.CODE_POINTS.EQUALS_SIGN:{this._err(Re.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ee.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(r)}}},{key:"_stateAttributeName",value:function(r){switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:case V.CODE_POINTS.SOLIDUS:case V.CODE_POINTS.GREATER_THAN_SIGN:case V.CODE_POINTS.EOF:{this._leaveAttrName(),this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(r);break}case V.CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case V.CODE_POINTS.QUOTATION_MARK:case V.CODE_POINTS.APOSTROPHE:case V.CODE_POINTS.LESS_THAN_SIGN:{this._err(Re.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(r);break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.name+=V.REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(Hp(r)?Cb(r):r)}}},{key:"_stateAfterAttributeName",value:function(r){switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.EQUALS_SIGN:{this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(r)}}},{key:"_stateBeforeAttributeValue",value:function(r){switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{this.state=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this.state=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingAttributeValue),this.state=ee.DATA,this.emitCurrentTagToken();break}default:this.state=ee.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(r)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(r){switch(r){case V.CODE_POINTS.QUOTATION_MARK:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}},{key:"_stateAttributeValueSingleQuoted",value:function(r){switch(r){case V.CODE_POINTS.APOSTROPHE:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}},{key:"_stateAttributeValueUnquoted",value:function(r){switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_UNQUOTED,this.state=ee.CHARACTER_REFERENCE;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.QUOTATION_MARK:case V.CODE_POINTS.APOSTROPHE:case V.CODE_POINTS.LESS_THAN_SIGN:case V.CODE_POINTS.EQUALS_SIGN:case V.CODE_POINTS.GRAVE_ACCENT:{this._err(Re.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(r);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}},{key:"_stateAfterAttributeValueQuoted",value:function(r){switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=ee.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Re.ERR.missingWhitespaceBetweenAttributes),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(r)}}},{key:"_stateSelfClosingStartTag",value:function(r){switch(r){case V.CODE_POINTS.GREATER_THAN_SIGN:{const i=this.currentToken;i.selfClosing=!0,this.state=ee.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Re.ERR.unexpectedSolidusInTag),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(r)}}},{key:"_stateBogusComment",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EOF:{this.emitCurrentComment(i),this._emitEOFToken();break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.data+=V.REPLACEMENT_CHARACTER;break}default:i.data+=String.fromCodePoint(r)}}},{key:"_stateMarkupDeclarationOpen",value:function(r){this._consumeSequenceIfMatch(V.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(V.SEQUENCES.DASH_DASH.length+1),this.state=ee.COMMENT_START):this._consumeSequenceIfMatch(V.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(V.SEQUENCES.DOCTYPE.length+1),this.state=ee.DOCTYPE):this._consumeSequenceIfMatch(V.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=ee.CDATA_SECTION:(this._err(Re.ERR.cdataInHtmlContent),this._createCommentToken(V.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ee.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Re.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(r))}},{key:"_stateCommentStart",value:function(r){switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.COMMENT_START_DASH;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptClosingOfEmptyComment),this.state=ee.DATA;const i=this.currentToken;this.emitCurrentComment(i);break}default:this.state=ee.COMMENT,this._stateComment(r)}}},{key:"_stateCommentStartDash",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptClosingOfEmptyComment),this.state=ee.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=ee.COMMENT,this._stateComment(r)}}},{key:"_stateComment",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.COMMENT_END_DASH;break}case V.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<",this.state=ee.COMMENT_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.data+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+=String.fromCodePoint(r)}}},{key:"_stateCommentLessThanSign",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.EXCLAMATION_MARK:{i.data+="!",this.state=ee.COMMENT_LESS_THAN_SIGN_BANG;break}case V.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<";break}default:this.state=ee.COMMENT,this._stateComment(r)}}},{key:"_stateCommentLessThanSignBang",value:function(r){r===V.CODE_POINTS.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ee.COMMENT,this._stateComment(r))}},{key:"_stateCommentLessThanSignBangDash",value:function(r){r===V.CODE_POINTS.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ee.COMMENT_END_DASH,this._stateCommentEndDash(r))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(r){r!==V.CODE_POINTS.GREATER_THAN_SIGN&&r!==V.CODE_POINTS.EOF&&this._err(Re.ERR.nestedComment),this.state=ee.COMMENT_END,this._stateCommentEnd(r)}},{key:"_stateCommentEndDash",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=ee.COMMENT,this._stateComment(r)}}},{key:"_stateCommentEnd",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=ee.COMMENT_END_BANG;break}case V.CODE_POINTS.HYPHEN_MINUS:{i.data+="-";break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--",this.state=ee.COMMENT,this._stateComment(r)}}},{key:"_stateCommentEndBang",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.HYPHEN_MINUS:{i.data+="--!",this.state=ee.COMMENT_END_DASH;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.incorrectlyClosedComment),this.state=ee.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--!",this.state=ee.COMMENT,this._stateComment(r)}}},{key:"_stateDoctype",value:function(r){switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(r);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingWhitespaceBeforeDoctypeName),this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(r)}}},{key:"_stateBeforeDoctypeName",value:function(r){if(Hp(r))this._createDoctypeToken(String.fromCharCode(Cb(r))),this.state=ee.DOCTYPE_NAME;else switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._createDoctypeToken(V.REPLACEMENT_CHARACTER),this.state=ee.DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypeName),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(r)),this.state=ee.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=ee.AFTER_DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.name+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.name+=String.fromCodePoint(Hp(r)?Cb(r):r)}}},{key:"_stateAfterDoctypeName",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(V.SEQUENCES.PUBLIC,!1)?this.state=ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(V.SEQUENCES.SYSTEM,!1)?this.state=ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Re.ERR.invalidCharacterSequenceAfterDoctypeName),i.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Re.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Re.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{i.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{i.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.publicId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(r)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.publicId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(r)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Re.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Re.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Re.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Re.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.systemId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(r)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.systemId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(r)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}},{key:"_stateBogusDoctype",value:function(r){const i=this.currentToken;switch(r){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=ee.DATA;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter);break}case V.CODE_POINTS.EOF:{this.emitCurrentDoctype(i),this._emitEOFToken();break}}}},{key:"_stateCdataSection",value:function(r){switch(r){case V.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=ee.CDATA_SECTION_BRACKET;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(r)}}},{key:"_stateCdataSectionBracket",value:function(r){r===V.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=ee.CDATA_SECTION_END:(this._emitChars("]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(r))}},{key:"_stateCdataSectionEnd",value:function(r){switch(r){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=ee.DATA;break}case V.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(r)}}},{key:"_stateCharacterReference",value:function(r){r===V.CODE_POINTS.NUMBER_SIGN?this.state=ee.NUMERIC_CHARACTER_REFERENCE:xO(r)?(this.state=ee.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(r)):(this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,r))}},{key:"_stateNamedCharacterReference",value:function(r){const i=this._matchNamedCharacterReference(r);if(!this._ensureHibernation())if(i){for(let n=0;n<i.length;n++)this._flushCodePointConsumedAsCharacterReference(i[n]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this.state=ee.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(r){xO(r)?this._flushCodePointConsumedAsCharacterReference(r):(r===V.CODE_POINTS.SEMICOLON&&this._err(Re.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,r))}},{key:"_stateNumericCharacterReference",value:function(r){this.charRefCode=0,r===V.CODE_POINTS.LATIN_SMALL_X||r===V.CODE_POINTS.LATIN_CAPITAL_X?this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE_START:Bp(r)?(this.state=ee.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(r)):(this._err(Re.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,r))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(r){jge(r)?(this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(r)):(this._err(Re.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}},{key:"_stateHexademicalCharacterReference",value:function(r){A6(r)?this.charRefCode=this.charRefCode*16+r-55:O6(r)?this.charRefCode=this.charRefCode*16+r-87:Bp(r)?this.charRefCode=this.charRefCode*16+r-48:r===V.CODE_POINTS.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.ERR.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(r))}},{key:"_stateDecimalCharacterReference",value:function(r){Bp(r)?this.charRefCode=this.charRefCode*10+r-48:r===V.CODE_POINTS.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.ERR.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(r))}},{key:"_stateNumericCharacterReferenceEnd",value:function(r){if(this.charRefCode===V.CODE_POINTS.NULL)this._err(Re.ERR.nullCharacterReference),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Re.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,V.isSurrogate)(this.charRefCode))this._err(Re.ERR.surrogateCharacterReference),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,V.isUndefinedCodePoint)(this.charRefCode))this._err(Re.ERR.noncharacterCharacterReference);else if((0,V.isControlCodePoint)(this.charRefCode)||this.charRefCode===V.CODE_POINTS.CARRIAGE_RETURN){this._err(Re.ERR.controlCharacterReference);const i=$ge.get(this.charRefCode);i!==void 0&&(this.charRefCode=i)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,r)}}]),e}();ac.Tokenizer=Gge;var Pb={};function zge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C6(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Wge(i.key),i)}}function Vge(e,t,r){return t&&C6(e.prototype,t),r&&C6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wge(e){var t=Yge(e,"string");return typeof t=="symbol"?t:String(t)}function Yge(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.OpenElementStack=void 0;const Le=za,P6=new Set([Le.TAG_ID.DD,Le.TAG_ID.DT,Le.TAG_ID.LI,Le.TAG_ID.OPTGROUP,Le.TAG_ID.OPTION,Le.TAG_ID.P,Le.TAG_ID.RB,Le.TAG_ID.RP,Le.TAG_ID.RT,Le.TAG_ID.RTC]),D6=new Set([...P6,Le.TAG_ID.CAPTION,Le.TAG_ID.COLGROUP,Le.TAG_ID.TBODY,Le.TAG_ID.TD,Le.TAG_ID.TFOOT,Le.TAG_ID.TH,Le.TAG_ID.THEAD,Le.TAG_ID.TR]),Db=new Map([[Le.TAG_ID.APPLET,Le.NS.HTML],[Le.TAG_ID.CAPTION,Le.NS.HTML],[Le.TAG_ID.HTML,Le.NS.HTML],[Le.TAG_ID.MARQUEE,Le.NS.HTML],[Le.TAG_ID.OBJECT,Le.NS.HTML],[Le.TAG_ID.TABLE,Le.NS.HTML],[Le.TAG_ID.TD,Le.NS.HTML],[Le.TAG_ID.TEMPLATE,Le.NS.HTML],[Le.TAG_ID.TH,Le.NS.HTML],[Le.TAG_ID.ANNOTATION_XML,Le.NS.MATHML],[Le.TAG_ID.MI,Le.NS.MATHML],[Le.TAG_ID.MN,Le.NS.MATHML],[Le.TAG_ID.MO,Le.NS.MATHML],[Le.TAG_ID.MS,Le.NS.MATHML],[Le.TAG_ID.MTEXT,Le.NS.MATHML],[Le.TAG_ID.DESC,Le.NS.SVG],[Le.TAG_ID.FOREIGN_OBJECT,Le.NS.SVG],[Le.TAG_ID.TITLE,Le.NS.SVG]]),qge=[Le.TAG_ID.H1,Le.TAG_ID.H2,Le.TAG_ID.H3,Le.TAG_ID.H4,Le.TAG_ID.H5,Le.TAG_ID.H6],Xge=[Le.TAG_ID.TR,Le.TAG_ID.TEMPLATE,Le.TAG_ID.HTML],Kge=[Le.TAG_ID.TBODY,Le.TAG_ID.TFOOT,Le.TAG_ID.THEAD,Le.TAG_ID.TEMPLATE,Le.TAG_ID.HTML],Zge=[Le.TAG_ID.TABLE,Le.TAG_ID.TEMPLATE,Le.TAG_ID.HTML],Qge=[Le.TAG_ID.TD,Le.TAG_ID.TH];let Jge=function(){function e(t,r,i){zge(this,e),this.treeAdapter=r,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=Le.TAG_ID.UNKNOWN,this.current=t}return Vge(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(r){return this.items.lastIndexOf(r,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===Le.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(r,i){this.stackTop++,this.items[this.stackTop]=r,this.current=r,this.tagIDs[this.stackTop]=i,this.currentTagId=i,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(r,i,!0)}},{key:"pop",value:function(){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,!0)}},{key:"replace",value:function(r,i){const n=this._indexOf(r);this.items[n]=i,n===this.stackTop&&(this.current=i)}},{key:"insertAfter",value:function(r,i,n){const o=this._indexOf(r)+1;this.items.splice(o,0,i),this.tagIDs.splice(o,0,n),this.stackTop++,o===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,o===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(r){let i=this.stackTop+1;do i=this.tagIDs.lastIndexOf(r,i-1);while(i>0&&this.treeAdapter.getNamespaceURI(this.items[i])!==Le.NS.HTML);this.shortenToLength(i<0?0:i)}},{key:"shortenToLength",value:function(r){for(;this.stackTop>=r;){const i=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(i,this.stackTop<r)}}},{key:"popUntilElementPopped",value:function(r){const i=this._indexOf(r);this.shortenToLength(i<0?0:i)}},{key:"popUntilPopped",value:function(r,i){const n=this._indexOfTagNames(r,i);this.shortenToLength(n<0?0:n)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(qge,Le.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(Qge,Le.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(r,i){for(let n=this.stackTop;n>=0;n--)if(r.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===i)return n;return-1}},{key:"clearBackTo",value:function(r,i){const n=this._indexOfTagNames(r,i);this.shortenToLength(n+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(Zge,Le.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(Kge,Le.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(Xge,Le.NS.HTML)}},{key:"remove",value:function(r){const i=this._indexOf(r);i>=0&&(i===this.stackTop?this.pop():(this.items.splice(i,1),this.tagIDs.splice(i,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===Le.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(r){return this._indexOf(r)>-1}},{key:"getCommonAncestor",value:function(r){const i=this._indexOf(r)-1;return i>=0?this.items[i]:null}},{key:"isRootHtmlElementCurrent",value:function(){return this.stackTop===0&&this.tagIDs[0]===Le.TAG_ID.HTML}},{key:"hasInScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i],o=this.treeAdapter.getNamespaceURI(this.items[i]);if(n===r&&o===Le.NS.HTML)return!0;if(Db.get(n)===o)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r],n=this.treeAdapter.getNamespaceURI(this.items[r]);if((0,Le.isNumberedHeader)(i)&&n===Le.NS.HTML)return!0;if(Db.get(i)===n)return!1}return!0}},{key:"hasInListItemScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i],o=this.treeAdapter.getNamespaceURI(this.items[i]);if(n===r&&o===Le.NS.HTML)return!0;if((n===Le.TAG_ID.UL||n===Le.TAG_ID.OL)&&o===Le.NS.HTML||Db.get(n)===o)return!1}return!0}},{key:"hasInButtonScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i],o=this.treeAdapter.getNamespaceURI(this.items[i]);if(n===r&&o===Le.NS.HTML)return!0;if(n===Le.TAG_ID.BUTTON&&o===Le.NS.HTML||Db.get(n)===o)return!1}return!0}},{key:"hasInTableScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Le.NS.HTML){if(n===r)return!0;if(n===Le.TAG_ID.TABLE||n===Le.TAG_ID.TEMPLATE||n===Le.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];if(this.treeAdapter.getNamespaceURI(this.items[r])===Le.NS.HTML){if(i===Le.TAG_ID.TBODY||i===Le.TAG_ID.THEAD||i===Le.TAG_ID.TFOOT)return!0;if(i===Le.TAG_ID.TABLE||i===Le.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(r){for(let i=this.stackTop;i>=0;i--){const n=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Le.NS.HTML){if(n===r)return!0;if(n!==Le.TAG_ID.OPTION&&n!==Le.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;P6.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;D6.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(r){for(;this.currentTagId!==r&&D6.has(this.currentTagId);)this.pop()}}]),e}();Pb.OpenElementStack=Jge;var x6={};(function(e){function t(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}function r(l,h){for(var f=0;f<h.length;f++){var d=h[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,n(d.key),d)}}function i(l,h,f){return h&&r(l.prototype,h),f&&r(l,f),Object.defineProperty(l,"prototype",{writable:!1}),l}function n(l){var h=o(l,"string");return typeof h=="symbol"?h:String(h)}function o(l,h){if(typeof l!="object"||l===null)return l;var f=l[Symbol.toPrimitive];if(f!==void 0){var d=f.call(l,h||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(l)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;const a=3;var s;(function(l){l[l.Marker=0]="Marker",l[l.Element=1]="Element"})(s=e.EntryType||(e.EntryType={}));const c={type:s.Marker};let u=function(){function l(h){t(this,l),this.treeAdapter=h,this.entries=[],this.bookmark=null}return i(l,[{key:"_getNoahArkConditionCandidates",value:function(f,d){const p=[],m=d.length,g=this.treeAdapter.getTagName(f),v=this.treeAdapter.getNamespaceURI(f);for(let _=0;_<this.entries.length;_++){const y=this.entries[_];if(y.type===s.Marker)break;const{element:b}=y;if(this.treeAdapter.getTagName(b)===g&&this.treeAdapter.getNamespaceURI(b)===v){const T=this.treeAdapter.getAttrList(b);T.length===m&&p.push({idx:_,attrs:T})}}return p}},{key:"_ensureNoahArkCondition",value:function(f){if(this.entries.length<a)return;const d=this.treeAdapter.getAttrList(f),p=this._getNoahArkConditionCandidates(f,d);if(p.length<a)return;const m=new Map(d.map(v=>[v.name,v.value]));let g=0;for(let v=0;v<p.length;v++){const _=p[v];_.attrs.every(y=>m.get(y.name)===y.value)&&(g+=1,g>=a&&this.entries.splice(_.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(c)}},{key:"pushElement",value:function(f,d){this._ensureNoahArkCondition(f),this.entries.unshift({type:s.Element,element:f,token:d})}},{key:"insertElementAfterBookmark",value:function(f,d){const p=this.entries.indexOf(this.bookmark);this.entries.splice(p,0,{type:s.Element,element:f,token:d})}},{key:"removeEntry",value:function(f){const d=this.entries.indexOf(f);d>=0&&this.entries.splice(d,1)}},{key:"clearToLastMarker",value:function(){const f=this.entries.indexOf(c);f>=0?this.entries.splice(0,f+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(f){const d=this.entries.find(p=>p.type===s.Marker||this.treeAdapter.getTagName(p.element)===f);return d&&d.type===s.Element?d:null}},{key:"getElementEntry",value:function(f){return this.entries.find(d=>d.type===s.Element&&d.element===f)}}]),l}();e.FormattingElementList=u})(x6);var xb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=za;function r(i){return{nodeName:"#text",value:i,parentNode:null}}e.defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(i,n,o){return{nodeName:i,tagName:i,attrs:o,namespaceURI:n,childNodes:[],parentNode:null}},createCommentNode(i){return{nodeName:"#comment",data:i,parentNode:null}},appendChild(i,n){i.childNodes.push(n),n.parentNode=i},insertBefore(i,n,o){const a=i.childNodes.indexOf(o);i.childNodes.splice(a,0,n),n.parentNode=i},setTemplateContent(i,n){i.content=n},getTemplateContent(i){return i.content},setDocumentType(i,n,o,a){const s=i.childNodes.find(c=>c.nodeName==="#documentType");if(s)s.name=n,s.publicId=o,s.systemId=a;else{const c={nodeName:"#documentType",name:n,publicId:o,systemId:a,parentNode:null};e.defaultTreeAdapter.appendChild(i,c)}},setDocumentMode(i,n){i.mode=n},getDocumentMode(i){return i.mode},detachNode(i){if(i.parentNode){const n=i.parentNode.childNodes.indexOf(i);i.parentNode.childNodes.splice(n,1),i.parentNode=null}},insertText(i,n){if(i.childNodes.length>0){const o=i.childNodes[i.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(o)){o.value+=n;return}}e.defaultTreeAdapter.appendChild(i,r(n))},insertTextBefore(i,n,o){const a=i.childNodes[i.childNodes.indexOf(o)-1];a&&e.defaultTreeAdapter.isTextNode(a)?a.value+=n:e.defaultTreeAdapter.insertBefore(i,r(n),o)},adoptAttributes(i,n){const o=new Set(i.attrs.map(a=>a.name));for(let a=0;a<n.length;a++)o.has(n[a].name)||i.attrs.push(n[a])},getFirstChild(i){return i.childNodes[0]},getChildNodes(i){return i.childNodes},getParentNode(i){return i.parentNode},getAttrList(i){return i.attrs},getTagName(i){return i.tagName},getNamespaceURI(i){return i.namespaceURI},getTextNodeContent(i){return i.value},getCommentNodeContent(i){return i.data},getDocumentTypeNodeName(i){return i.name},getDocumentTypeNodePublicId(i){return i.publicId},getDocumentTypeNodeSystemId(i){return i.systemId},isTextNode(i){return i.nodeName==="#text"},isCommentNode(i){return i.nodeName==="#comment"},isDocumentTypeNode(i){return i.nodeName==="#documentType"},isElementNode(i){return Object.prototype.hasOwnProperty.call(i,"tagName")},setNodeSourceCodeLocation(i,n){i.sourceCodeLocation=n},getNodeSourceCodeLocation(i){return i.sourceCodeLocation},updateNodeSourceCodeLocation(i,n){i.sourceCodeLocation=Object.assign(Object.assign({},i.sourceCodeLocation),n)}}})(xb);var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.getDocumentMode=Tf.isConforming=void 0;const Ef=za,N6="html",eve="about:legacy-compat",tve="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",R6=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],rve=[...R6,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],nve=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),M6=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],ive=[...M6,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function L6(e,t){return t.some(r=>e.startsWith(r))}function ove(e){return e.name===N6&&e.publicId===null&&(e.systemId===null||e.systemId===eve)}Tf.isConforming=ove;function ave(e){if(e.name!==N6)return Ef.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===tve)return Ef.DOCUMENT_MODE.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),nve.has(r))return Ef.DOCUMENT_MODE.QUIRKS;let i=t===null?rve:R6;if(L6(r,i))return Ef.DOCUMENT_MODE.QUIRKS;if(i=t===null?M6:ive,L6(r,i))return Ef.DOCUMENT_MODE.LIMITED_QUIRKS}return Ef.DOCUMENT_MODE.NO_QUIRKS}Tf.getDocumentMode=ave;var NO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=za,r={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},i="definitionurl",n="definitionURL",o=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(g=>[g.toLowerCase(),g])),a=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(g=>[g.toLowerCase(),g]));const s=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);function c(g){const v=g.tagID;return v===t.TAG_ID.FONT&&g.attrs.some(({name:y})=>y===t.ATTRS.COLOR||y===t.ATTRS.SIZE||y===t.ATTRS.FACE)||s.has(v)}e.causesExit=c;function u(g){for(let v=0;v<g.attrs.length;v++)if(g.attrs[v].name===i){g.attrs[v].name=n;break}}e.adjustTokenMathMLAttrs=u;function l(g){for(let v=0;v<g.attrs.length;v++){const _=o.get(g.attrs[v].name);_!=null&&(g.attrs[v].name=_)}}e.adjustTokenSVGAttrs=l;function h(g){for(let v=0;v<g.attrs.length;v++){const _=a.get(g.attrs[v].name);_&&(g.attrs[v].prefix=_.prefix,g.attrs[v].name=_.name,g.attrs[v].namespace=_.namespace)}}e.adjustTokenXMLAttrs=h;function f(g){const v=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);v!=null&&(g.tagName=v,g.tagID=(0,t.getTagID)(g.tagName))}e.adjustTokenSVGTagName=f;function d(g,v){return v===t.NS.MATHML&&(g===t.TAG_ID.MI||g===t.TAG_ID.MO||g===t.TAG_ID.MN||g===t.TAG_ID.MS||g===t.TAG_ID.MTEXT)}function p(g,v,_){if(v===t.NS.MATHML&&g===t.TAG_ID.ANNOTATION_XML){for(let y=0;y<_.length;y++)if(_[y].name===t.ATTRS.ENCODING){const b=_[y].value.toLowerCase();return b===r.TEXT_HTML||b===r.APPLICATION_XML}}return v===t.NS.SVG&&(g===t.TAG_ID.FOREIGN_OBJECT||g===t.TAG_ID.DESC||g===t.TAG_ID.TITLE)}function m(g,v,_,y){return(!y||y===t.NS.HTML)&&p(g,v,_)||(!y||y===t.NS.MATHML)&&d(g,v)}e.isIntegrationPoint=m})(NO);function sve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B6(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cve(i.key),i)}}function lve(e,t,r){return t&&B6(e.prototype,t),r&&B6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cve(e){var t=uve(e,"string");return typeof t=="symbol"?t:String(t)}function uve(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.Parser=void 0;const Jn=ac,fve=Pb,H6=x6,hve=xb,$6=Tf,ea=NO,bn=Lp,F6=kb,P=za,on=Ib,dve="hidden",pve=8,mve=3;var ce;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ce||(ce={}));const gve={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},j6=new Set([P.TAG_ID.TABLE,P.TAG_ID.TBODY,P.TAG_ID.TFOOT,P.TAG_ID.THEAD,P.TAG_ID.TR]),U6={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:hve.defaultTreeAdapter,onParseError:null};let vve=function(){function e(t,r,i=null,n=null){sve(this,e),this.fragmentContext=i,this.scriptHandler=n,this.currentToken=null,this.stopped=!1,this.insertionMode=ce.INITIAL,this.originalInsertionMode=ce.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},U6),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new Jn.Tokenizer(this.options,this),this.activeFormattingElements=new H6.FormattingElementList(this.treeAdapter),this.fragmentContextID=i?(0,P.getTagID)(this.treeAdapter.getTagName(i)):P.TAG_ID.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new fve.OpenElementStack(this.document,this.treeAdapter,this)}return lve(e,[{key:"getFragment",value:function(){const r=this.treeAdapter.getFirstChild(this.document),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}},{key:"_err",value:function(r,i,n){var o;if(!this.onParseError)return;const a=(o=r.location)!==null&&o!==void 0?o:gve,s={code:i,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:n?a.startLine:a.endLine,endCol:n?a.startCol:a.endCol,endOffset:n?a.startOffset:a.endOffset};this.onParseError(s)}},{key:"onItemPush",value:function(r,i,n){var o,a;(a=(o=this.treeAdapter).onItemPush)===null||a===void 0||a.call(o,r),n&&this.openElements.stackTop>0&&this._setContextModes(r,i)}},{key:"onItemPop",value:function(r,i){var n,o;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(r,this.currentToken),(o=(n=this.treeAdapter).onItemPop)===null||o===void 0||o.call(n,r,this.openElements.current),i){let a,s;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,s=this.fragmentContextID):{current:a,currentTagId:s}=this.openElements,this._setContextModes(a,s)}}},{key:"_setContextModes",value:function(r,i){const n=r===this.document||this.treeAdapter.getNamespaceURI(r)===P.NS.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(i,r)}},{key:"_switchToTextParsing",value:function(r,i){this._insertElement(r,P.NS.HTML),this.tokenizer.state=i,this.originalInsertionMode=this.insertionMode,this.insertionMode=ce.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=ce.TEXT,this.originalInsertionMode=ce.IN_BODY,this.tokenizer.state=Jn.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let r=this.fragmentContext;for(;r;){if(this.treeAdapter.getTagName(r)===P.TAG_NAMES.FORM){this.formElement=r;break}r=this.treeAdapter.getParentNode(r)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==P.NS.HTML))switch(this.fragmentContextID){case P.TAG_ID.TITLE:case P.TAG_ID.TEXTAREA:{this.tokenizer.state=Jn.TokenizerMode.RCDATA;break}case P.TAG_ID.STYLE:case P.TAG_ID.XMP:case P.TAG_ID.IFRAME:case P.TAG_ID.NOEMBED:case P.TAG_ID.NOFRAMES:case P.TAG_ID.NOSCRIPT:{this.tokenizer.state=Jn.TokenizerMode.RAWTEXT;break}case P.TAG_ID.SCRIPT:{this.tokenizer.state=Jn.TokenizerMode.SCRIPT_DATA;break}case P.TAG_ID.PLAINTEXT:{this.tokenizer.state=Jn.TokenizerMode.PLAINTEXT;break}}}},{key:"_setDocumentType",value:function(r){const i=r.name||"",n=r.publicId||"",o=r.systemId||"";if(this.treeAdapter.setDocumentType(this.document,i,n,o),r.location){const s=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));s&&this.treeAdapter.setNodeSourceCodeLocation(s,r.location)}}},{key:"_attachElementToTree",value:function(r,i){if(this.options.sourceCodeLocationInfo){const n=i&&Object.assign(Object.assign({},i),{startTag:i});this.treeAdapter.setNodeSourceCodeLocation(r,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(r);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n,r)}}},{key:"_appendElement",value:function(r,i){const n=this.treeAdapter.createElement(r.tagName,i,r.attrs);this._attachElementToTree(n,r.location)}},{key:"_insertElement",value:function(r,i){const n=this.treeAdapter.createElement(r.tagName,i,r.attrs);this._attachElementToTree(n,r.location),this.openElements.push(n,r.tagID)}},{key:"_insertFakeElement",value:function(r,i){const n=this.treeAdapter.createElement(r,P.NS.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,i)}},{key:"_insertTemplate",value:function(r){const i=this.treeAdapter.createElement(r.tagName,P.NS.HTML,r.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(i,n),this._attachElementToTree(i,r.location),this.openElements.push(i,r.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}},{key:"_insertFakeRootElement",value:function(){const r=this.treeAdapter.createElement(P.TAG_NAMES.HTML,P.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null),this.treeAdapter.appendChild(this.openElements.current,r),this.openElements.push(r,P.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(r,i){const n=this.treeAdapter.createCommentNode(r.data);this.treeAdapter.appendChild(i,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,r.location)}},{key:"_insertCharacters",value:function(r){let i,n;if(this._shouldFosterParentOnInsertion()?({parent:i,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(i,r.chars,n):this.treeAdapter.insertText(i,r.chars)):(i=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(i,r.chars)),!r.location)return;const o=this.treeAdapter.getChildNodes(i),a=n?o.lastIndexOf(n):o.length,s=o[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:u,endCol:l,endOffset:h}=r.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:u,endCol:l,endOffset:h})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,r.location)}},{key:"_adoptNodes",value:function(r,i){for(let n=this.treeAdapter.getFirstChild(r);n;n=this.treeAdapter.getFirstChild(r))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(i,n)}},{key:"_setEndLocation",value:function(r,i){if(this.treeAdapter.getNodeSourceCodeLocation(r)&&i.location){const n=i.location,o=this.treeAdapter.getTagName(r),a=i.type===on.TokenType.END_TAG&&o===i.tagName?{endTag:Object.assign({},n),endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(r,a)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(r){if(!this.currentNotInHTML)return!1;let i,n;return this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,n=this.fragmentContextID):{current:i,currentTagId:n}=this.openElements,r.tagID===P.TAG_ID.SVG&&this.treeAdapter.getTagName(i)===P.TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(i)===P.NS.MATHML?!1:this.tokenizer.inForeignNode||(r.tagID===P.TAG_ID.MGLYPH||r.tagID===P.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(n,i,P.NS.HTML)}},{key:"_processToken",value:function(r){switch(r.type){case on.TokenType.CHARACTER:{this.onCharacter(r);break}case on.TokenType.NULL_CHARACTER:{this.onNullCharacter(r);break}case on.TokenType.COMMENT:{this.onComment(r);break}case on.TokenType.DOCTYPE:{this.onDoctype(r);break}case on.TokenType.START_TAG:{this._processStartTag(r);break}case on.TokenType.END_TAG:{this.onEndTag(r);break}case on.TokenType.EOF:{this.onEof(r);break}case on.TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(r);break}}}},{key:"_isIntegrationPoint",value:function(r,i,n){const o=this.treeAdapter.getNamespaceURI(i),a=this.treeAdapter.getAttrList(i);return ea.isIntegrationPoint(r,o,a,n)}},{key:"_reconstructActiveFormattingElements",value:function(){const r=this.activeFormattingElements.entries.length;if(r){const i=this.activeFormattingElements.entries.findIndex(o=>o.type===H6.EntryType.Marker||this.openElements.contains(o.element)),n=i<0?r-1:i-1;for(let o=n;o>=0;o--){const a=this.activeFormattingElements.entries[o];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ce.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(P.TAG_ID.P),this.openElements.popUntilTagNamePopped(P.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let r=this.openElements.stackTop;r>=0;r--)switch(r===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[r]){case P.TAG_ID.TR:{this.insertionMode=ce.IN_ROW;return}case P.TAG_ID.TBODY:case P.TAG_ID.THEAD:case P.TAG_ID.TFOOT:{this.insertionMode=ce.IN_TABLE_BODY;return}case P.TAG_ID.CAPTION:{this.insertionMode=ce.IN_CAPTION;return}case P.TAG_ID.COLGROUP:{this.insertionMode=ce.IN_COLUMN_GROUP;return}case P.TAG_ID.TABLE:{this.insertionMode=ce.IN_TABLE;return}case P.TAG_ID.BODY:{this.insertionMode=ce.IN_BODY;return}case P.TAG_ID.FRAMESET:{this.insertionMode=ce.IN_FRAMESET;return}case P.TAG_ID.SELECT:{this._resetInsertionModeForSelect(r);return}case P.TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case P.TAG_ID.HTML:{this.insertionMode=this.headElement?ce.AFTER_HEAD:ce.BEFORE_HEAD;return}case P.TAG_ID.TD:case P.TAG_ID.TH:{if(r>0){this.insertionMode=ce.IN_CELL;return}break}case P.TAG_ID.HEAD:{if(r>0){this.insertionMode=ce.IN_HEAD;return}break}}this.insertionMode=ce.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(r){if(r>0)for(let i=r-1;i>0;i--){const n=this.openElements.tagIDs[i];if(n===P.TAG_ID.TEMPLATE)break;if(n===P.TAG_ID.TABLE){this.insertionMode=ce.IN_SELECT_IN_TABLE;return}}this.insertionMode=ce.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(r){return j6.has(r)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let r=this.openElements.stackTop;r>=0;r--){const i=this.openElements.items[r];switch(this.openElements.tagIDs[r]){case P.TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(i)===P.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(i),beforeElement:null};break}case P.TAG_ID.TABLE:{const n=this.treeAdapter.getParentNode(i);return n?{parent:n,beforeElement:i}:{parent:this.openElements.items[r-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(r){const i=this._findFosterParentingLocation();i.beforeElement?this.treeAdapter.insertBefore(i.parent,r,i.beforeElement):this.treeAdapter.appendChild(i.parent,r)}},{key:"_isSpecialElement",value:function(r,i){const n=this.treeAdapter.getNamespaceURI(r);return P.SPECIAL_ELEMENTS[n].has(i)}},{key:"onCharacter",value:function(r){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Yye(this,r);return}switch(this.insertionMode){case ce.INITIAL:{$p(this,r);break}case ce.BEFORE_HTML:{Fp(this,r);break}case ce.BEFORE_HEAD:{jp(this,r);break}case ce.IN_HEAD:{Up(this,r);break}case ce.IN_HEAD_NO_SCRIPT:{Gp(this,r);break}case ce.AFTER_HEAD:{zp(this,r);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:{z6(this,r);break}case ce.TEXT:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{this._insertCharacters(r);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{BO(this,r);break}case ce.IN_TABLE_TEXT:{Q6(this,r);break}case ce.IN_COLUMN_GROUP:{Mb(this,r);break}case ce.AFTER_BODY:{Hb(this,r);break}case ce.AFTER_AFTER_BODY:{$b(this,r);break}}}},{key:"onNullCharacter",value:function(r){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Wye(this,r);return}switch(this.insertionMode){case ce.INITIAL:{$p(this,r);break}case ce.BEFORE_HTML:{Fp(this,r);break}case ce.BEFORE_HEAD:{jp(this,r);break}case ce.IN_HEAD:{Up(this,r);break}case ce.IN_HEAD_NO_SCRIPT:{Gp(this,r);break}case ce.AFTER_HEAD:{zp(this,r);break}case ce.TEXT:{this._insertCharacters(r);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{BO(this,r);break}case ce.IN_COLUMN_GROUP:{Mb(this,r);break}case ce.AFTER_BODY:{Hb(this,r);break}case ce.AFTER_AFTER_BODY:{$b(this,r);break}}}},{key:"onComment",value:function(r){if(this.skipNextNewLine=!1,this.currentNotInHTML){MO(this,r);return}switch(this.insertionMode){case ce.INITIAL:case ce.BEFORE_HTML:case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_TEMPLATE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{MO(this,r);break}case ce.IN_TABLE_TEXT:{Yp(this,r);break}case ce.AFTER_BODY:{wve(this,r);break}case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{Ave(this,r);break}}}},{key:"onDoctype",value:function(r){switch(this.skipNextNewLine=!1,this.insertionMode){case ce.INITIAL:{Ove(this,r);break}case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:{this._err(r,bn.ERR.misplacedDoctype);break}case ce.IN_TABLE_TEXT:{Yp(this,r);break}}}},{key:"onStartTag",value:function(r){this.skipNextNewLine=!1,this.currentToken=r,this._processStartTag(r),r.selfClosing&&!r.ackSelfClosing&&this._err(r,bn.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(r){this.shouldProcessStartTagTokenInForeignContent(r)?qye(this,r):this._startTagOutsideForeignContent(r)}},{key:"_startTagOutsideForeignContent",value:function(r){switch(this.insertionMode){case ce.INITIAL:{$p(this,r);break}case ce.BEFORE_HTML:{kve(this,r);break}case ce.BEFORE_HEAD:{Cve(this,r);break}case ce.IN_HEAD:{yo(this,r);break}case ce.IN_HEAD_NO_SCRIPT:{xve(this,r);break}case ce.AFTER_HEAD:{Rve(this,r);break}case ce.IN_BODY:{Fn(this,r);break}case ce.IN_TABLE:{Sf(this,r);break}case ce.IN_TABLE_TEXT:{Yp(this,r);break}case ce.IN_CAPTION:{Pye(this,r);break}case ce.IN_COLUMN_GROUP:{HO(this,r);break}case ce.IN_TABLE_BODY:{Lb(this,r);break}case ce.IN_ROW:{Bb(this,r);break}case ce.IN_CELL:{Nye(this,r);break}case ce.IN_SELECT:{tU(this,r);break}case ce.IN_SELECT_IN_TABLE:{Mye(this,r);break}case ce.IN_TEMPLATE:{Bye(this,r);break}case ce.AFTER_BODY:{$ye(this,r);break}case ce.IN_FRAMESET:{Fye(this,r);break}case ce.AFTER_FRAMESET:{Uye(this,r);break}case ce.AFTER_AFTER_BODY:{zye(this,r);break}case ce.AFTER_AFTER_FRAMESET:{Vye(this,r);break}}}},{key:"onEndTag",value:function(r){this.skipNextNewLine=!1,this.currentToken=r,this.currentNotInHTML?Xye(this,r):this._endTagOutsideForeignContent(r)}},{key:"_endTagOutsideForeignContent",value:function(r){switch(this.insertionMode){case ce.INITIAL:{$p(this,r);break}case ce.BEFORE_HTML:{Ive(this,r);break}case ce.BEFORE_HEAD:{Pve(this,r);break}case ce.IN_HEAD:{Dve(this,r);break}case ce.IN_HEAD_NO_SCRIPT:{Nve(this,r);break}case ce.AFTER_HEAD:{Mve(this,r);break}case ce.IN_BODY:{Rb(this,r);break}case ce.TEXT:{_ye(this,r);break}case ce.IN_TABLE:{Vp(this,r);break}case ce.IN_TABLE_TEXT:{Yp(this,r);break}case ce.IN_CAPTION:{Dye(this,r);break}case ce.IN_COLUMN_GROUP:{xye(this,r);break}case ce.IN_TABLE_BODY:{$O(this,r);break}case ce.IN_ROW:{eU(this,r);break}case ce.IN_CELL:{Rye(this,r);break}case ce.IN_SELECT:{rU(this,r);break}case ce.IN_SELECT_IN_TABLE:{Lye(this,r);break}case ce.IN_TEMPLATE:{Hye(this,r);break}case ce.AFTER_BODY:{iU(this,r);break}case ce.IN_FRAMESET:{jye(this,r);break}case ce.AFTER_FRAMESET:{Gye(this,r);break}case ce.AFTER_AFTER_BODY:{$b(this,r);break}}}},{key:"onEof",value:function(r){switch(this.insertionMode){case ce.INITIAL:{$p(this,r);break}case ce.BEFORE_HTML:{Fp(this,r);break}case ce.BEFORE_HEAD:{jp(this,r);break}case ce.IN_HEAD:{Up(this,r);break}case ce.IN_HEAD_NO_SCRIPT:{Gp(this,r);break}case ce.AFTER_HEAD:{zp(this,r);break}case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{K6(this,r);break}case ce.TEXT:{Tye(this,r);break}case ce.IN_TABLE_TEXT:{Yp(this,r);break}case ce.IN_TEMPLATE:{nU(this,r);break}case ce.AFTER_BODY:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{LO(this,r);break}}}},{key:"onWhitespaceCharacter",value:function(r){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,r.chars.charCodeAt(0)===F6.CODE_POINTS.LINE_FEED)){if(r.chars.length===1)return;r.chars=r.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(r);return}switch(this.insertionMode){case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.TEXT:case ce.IN_COLUMN_GROUP:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{this._insertCharacters(r);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:case ce.AFTER_BODY:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{G6(this,r);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{BO(this,r);break}case ce.IN_TABLE_TEXT:{Z6(this,r);break}}}}],[{key:"parse",value:function(r,i){const n=new this(i);return n.tokenizer.write(r,!0),n.document}},{key:"getFragmentParser",value:function(r,i){const n=Object.assign(Object.assign({},U6),i);r??(r=n.treeAdapter.createElement(P.TAG_NAMES.TEMPLATE,P.NS.HTML,[]));const o=n.treeAdapter.createElement("documentmock",P.NS.HTML,[]),a=new this(n,o,r);return a.fragmentContextID===P.TAG_ID.TEMPLATE&&a.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}}]),e}();Mp.Parser=vve;function yve(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):X6(e,t),r}function bve(e,t){let r=null,i=e.openElements.stackTop;for(;i>=0;i--){const n=e.openElements.items[i];if(n===t.element)break;e._isSpecialElement(n,e.openElements.tagIDs[i])&&(r=n)}return r||(e.openElements.shortenToLength(i<0?0:i),e.activeFormattingElements.removeEntry(t)),r}function _ve(e,t,r){let i=t,n=e.openElements.getCommonAncestor(t);for(let o=0,a=n;a!==r;o++,a=n){n=e.openElements.getCommonAncestor(a);const s=e.activeFormattingElements.getElementEntry(a),c=s&&o>=mve;!s||c?(c&&e.activeFormattingElements.removeEntry(s),e.openElements.remove(a)):(a=Tve(e,s),i===t&&(e.activeFormattingElements.bookmark=s),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(a,i),i=a)}return i}function Tve(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function Eve(e,t,r){const i=e.treeAdapter.getTagName(t),n=(0,P.getTagID)(i);if(e._isElementCausesFosterParenting(n))e._fosterParentElement(r);else{const o=e.treeAdapter.getNamespaceURI(t);n===P.TAG_ID.TEMPLATE&&o===P.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function Sve(e,t,r){const i=e.treeAdapter.getNamespaceURI(r.element),{token:n}=r,o=e.treeAdapter.createElement(n.tagName,i,n.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,n),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,o,n.tagID)}function RO(e,t){for(let r=0;r<pve;r++){const i=yve(e,t);if(!i)break;const n=bve(e,i);if(!n)break;e.activeFormattingElements.bookmark=i;const o=_ve(e,n,i.element),a=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(o),a&&Eve(e,a,o),Sve(e,n,i)}}function MO(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function wve(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Ave(e,t){e._appendCommentNode(t,e.document)}function LO(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=r;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],n=e.treeAdapter.getNodeSourceCodeLocation(i);if(n&&!n.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(o);a&&!a.endTag&&e._setEndLocation(o,t)}}}}function Ove(e,t){e._setDocumentType(t);const r=t.forceQuirks?P.DOCUMENT_MODE.QUIRKS:$6.getDocumentMode(t);$6.isConforming(t)||e._err(t,bn.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=ce.BEFORE_HTML}function $p(e,t){e._err(t,bn.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,P.DOCUMENT_MODE.QUIRKS),e.insertionMode=ce.BEFORE_HTML,e._processToken(t)}function kve(e,t){t.tagID===P.TAG_ID.HTML?(e._insertElement(t,P.NS.HTML),e.insertionMode=ce.BEFORE_HEAD):Fp(e,t)}function Ive(e,t){const r=t.tagID;(r===P.TAG_ID.HTML||r===P.TAG_ID.HEAD||r===P.TAG_ID.BODY||r===P.TAG_ID.BR)&&Fp(e,t)}function Fp(e,t){e._insertFakeRootElement(),e.insertionMode=ce.BEFORE_HEAD,e._processToken(t)}function Cve(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.HEAD:{e._insertElement(t,P.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=ce.IN_HEAD;break}default:jp(e,t)}}function Pve(e,t){const r=t.tagID;r===P.TAG_ID.HEAD||r===P.TAG_ID.BODY||r===P.TAG_ID.HTML||r===P.TAG_ID.BR?jp(e,t):e._err(t,bn.ERR.endTagWithoutMatchingOpenElement)}function jp(e,t){e._insertFakeElement(P.TAG_NAMES.HEAD,P.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=ce.IN_HEAD,e._processToken(t)}function yo(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.BASE:case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.LINK:case P.TAG_ID.META:{e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0;break}case P.TAG_ID.TITLE:{e._switchToTextParsing(t,Jn.TokenizerMode.RCDATA);break}case P.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Jn.TokenizerMode.RAWTEXT):(e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_HEAD_NO_SCRIPT);break}case P.TAG_ID.NOFRAMES:case P.TAG_ID.STYLE:{e._switchToTextParsing(t,Jn.TokenizerMode.RAWTEXT);break}case P.TAG_ID.SCRIPT:{e._switchToTextParsing(t,Jn.TokenizerMode.SCRIPT_DATA);break}case P.TAG_ID.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ce.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE);break}case P.TAG_ID.HEAD:{e._err(t,bn.ERR.misplacedStartTagForHeadElement);break}default:Up(e,t)}}function Dve(e,t){switch(t.tagID){case P.TAG_ID.HEAD:{e.openElements.pop(),e.insertionMode=ce.AFTER_HEAD;break}case P.TAG_ID.BODY:case P.TAG_ID.BR:case P.TAG_ID.HTML:{Up(e,t);break}case P.TAG_ID.TEMPLATE:{sc(e,t);break}default:e._err(t,bn.ERR.endTagWithoutMatchingOpenElement)}}function sc(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==P.TAG_ID.TEMPLATE&&e._err(t,bn.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(P.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,bn.ERR.endTagWithoutMatchingOpenElement)}function Up(e,t){e.openElements.pop(),e.insertionMode=ce.AFTER_HEAD,e._processToken(t)}function xve(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.HEAD:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.NOFRAMES:case P.TAG_ID.STYLE:{yo(e,t);break}case P.TAG_ID.NOSCRIPT:{e._err(t,bn.ERR.nestedNoscriptInHead);break}default:Gp(e,t)}}function Nve(e,t){switch(t.tagID){case P.TAG_ID.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ce.IN_HEAD;break}case P.TAG_ID.BR:{Gp(e,t);break}default:e._err(t,bn.ERR.endTagWithoutMatchingOpenElement)}}function Gp(e,t){const r=t.type===on.TokenType.EOF?bn.ERR.openElementsLeftAfterEof:bn.ERR.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=ce.IN_HEAD,e._processToken(t)}function Rve(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.BODY:{e._insertElement(t,P.NS.HTML),e.framesetOk=!1,e.insertionMode=ce.IN_BODY;break}case P.TAG_ID.FRAMESET:{e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_FRAMESET;break}case P.TAG_ID.BASE:case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.NOFRAMES:case P.TAG_ID.SCRIPT:case P.TAG_ID.STYLE:case P.TAG_ID.TEMPLATE:case P.TAG_ID.TITLE:{e._err(t,bn.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,P.TAG_ID.HEAD),yo(e,t),e.openElements.remove(e.headElement);break}case P.TAG_ID.HEAD:{e._err(t,bn.ERR.misplacedStartTagForHeadElement);break}default:zp(e,t)}}function Mve(e,t){switch(t.tagID){case P.TAG_ID.BODY:case P.TAG_ID.HTML:case P.TAG_ID.BR:{zp(e,t);break}case P.TAG_ID.TEMPLATE:{sc(e,t);break}default:e._err(t,bn.ERR.endTagWithoutMatchingOpenElement)}}function zp(e,t){e._insertFakeElement(P.TAG_NAMES.BODY,P.TAG_ID.BODY),e.insertionMode=ce.IN_BODY,Nb(e,t)}function Nb(e,t){switch(t.type){case on.TokenType.CHARACTER:{z6(e,t);break}case on.TokenType.WHITESPACE_CHARACTER:{G6(e,t);break}case on.TokenType.COMMENT:{MO(e,t);break}case on.TokenType.START_TAG:{Fn(e,t);break}case on.TokenType.END_TAG:{Rb(e,t);break}case on.TokenType.EOF:{K6(e,t);break}}}function G6(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function z6(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Lve(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Bve(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function Hve(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_FRAMESET)}function $ve(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML)}function Fve(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),(0,P.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,P.NS.HTML)}function jve(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Uve(e,t){const r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),r||(e.formElement=e.openElements.current))}function Gve(e,t){e.framesetOk=!1;const r=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const n=e.openElements.tagIDs[i];if(r===P.TAG_ID.LI&&n===P.TAG_ID.LI||(r===P.TAG_ID.DD||r===P.TAG_ID.DT)&&(n===P.TAG_ID.DD||n===P.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n);break}if(n!==P.TAG_ID.ADDRESS&&n!==P.TAG_ID.DIV&&n!==P.TAG_ID.P&&e._isSpecialElement(e.openElements.items[i],n))break}e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML)}function zve(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),e.tokenizer.state=Jn.TokenizerMode.PLAINTEXT}function Vve(e,t){e.openElements.hasInScope(P.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(P.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.framesetOk=!1}function Wve(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(P.TAG_NAMES.A);r&&(RO(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Yve(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function qve(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(P.TAG_ID.NOBR)&&(RO(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Xve(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Kve(e,t){e.treeAdapter.getDocumentMode(e.document)!==P.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),e.framesetOk=!1,e.insertionMode=ce.IN_TABLE}function V6(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,P.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function W6(e){const t=(0,on.getTokenAttr)(e,P.ATTRS.TYPE);return t!=null&&t.toLowerCase()===dve}function Zve(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,P.NS.HTML),W6(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Qve(e,t){e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0}function Jve(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._appendElement(t,P.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function eye(e,t){t.tagName=P.TAG_NAMES.IMG,t.tagID=P.TAG_ID.IMG,V6(e,t)}function tye(e,t){e._insertElement(t,P.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Jn.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ce.TEXT}function rye(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Jn.TokenizerMode.RAWTEXT)}function nye(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Jn.TokenizerMode.RAWTEXT)}function Y6(e,t){e._switchToTextParsing(t,Jn.TokenizerMode.RAWTEXT)}function iye(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ce.IN_TABLE||e.insertionMode===ce.IN_CAPTION||e.insertionMode===ce.IN_TABLE_BODY||e.insertionMode===ce.IN_ROW||e.insertionMode===ce.IN_CELL?ce.IN_SELECT_IN_TABLE:ce.IN_SELECT}function oye(e,t){e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML)}function aye(e,t){e.openElements.hasInScope(P.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,P.NS.HTML)}function sye(e,t){e.openElements.hasInScope(P.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(P.TAG_ID.RTC),e._insertElement(t,P.NS.HTML)}function lye(e,t){e._reconstructActiveFormattingElements(),ea.adjustTokenMathMLAttrs(t),ea.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,P.NS.MATHML):e._insertElement(t,P.NS.MATHML),t.ackSelfClosing=!0}function cye(e,t){e._reconstructActiveFormattingElements(),ea.adjustTokenSVGAttrs(t),ea.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,P.NS.SVG):e._insertElement(t,P.NS.SVG),t.ackSelfClosing=!0}function q6(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML)}function Fn(e,t){switch(t.tagID){case P.TAG_ID.I:case P.TAG_ID.S:case P.TAG_ID.B:case P.TAG_ID.U:case P.TAG_ID.EM:case P.TAG_ID.TT:case P.TAG_ID.BIG:case P.TAG_ID.CODE:case P.TAG_ID.FONT:case P.TAG_ID.SMALL:case P.TAG_ID.STRIKE:case P.TAG_ID.STRONG:{Yve(e,t);break}case P.TAG_ID.A:{Wve(e,t);break}case P.TAG_ID.H1:case P.TAG_ID.H2:case P.TAG_ID.H3:case P.TAG_ID.H4:case P.TAG_ID.H5:case P.TAG_ID.H6:{Fve(e,t);break}case P.TAG_ID.P:case P.TAG_ID.DL:case P.TAG_ID.OL:case P.TAG_ID.UL:case P.TAG_ID.DIV:case P.TAG_ID.DIR:case P.TAG_ID.NAV:case P.TAG_ID.MAIN:case P.TAG_ID.MENU:case P.TAG_ID.ASIDE:case P.TAG_ID.CENTER:case P.TAG_ID.FIGURE:case P.TAG_ID.FOOTER:case P.TAG_ID.HEADER:case P.TAG_ID.HGROUP:case P.TAG_ID.DIALOG:case P.TAG_ID.DETAILS:case P.TAG_ID.ADDRESS:case P.TAG_ID.ARTICLE:case P.TAG_ID.SECTION:case P.TAG_ID.SUMMARY:case P.TAG_ID.FIELDSET:case P.TAG_ID.BLOCKQUOTE:case P.TAG_ID.FIGCAPTION:{$ve(e,t);break}case P.TAG_ID.LI:case P.TAG_ID.DD:case P.TAG_ID.DT:{Gve(e,t);break}case P.TAG_ID.BR:case P.TAG_ID.IMG:case P.TAG_ID.WBR:case P.TAG_ID.AREA:case P.TAG_ID.EMBED:case P.TAG_ID.KEYGEN:{V6(e,t);break}case P.TAG_ID.HR:{Jve(e,t);break}case P.TAG_ID.RB:case P.TAG_ID.RTC:{aye(e,t);break}case P.TAG_ID.RT:case P.TAG_ID.RP:{sye(e,t);break}case P.TAG_ID.PRE:case P.TAG_ID.LISTING:{jve(e,t);break}case P.TAG_ID.XMP:{rye(e,t);break}case P.TAG_ID.SVG:{cye(e,t);break}case P.TAG_ID.HTML:{Lve(e,t);break}case P.TAG_ID.BASE:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.STYLE:case P.TAG_ID.TITLE:case P.TAG_ID.SCRIPT:case P.TAG_ID.BGSOUND:case P.TAG_ID.BASEFONT:case P.TAG_ID.TEMPLATE:{yo(e,t);break}case P.TAG_ID.BODY:{Bve(e,t);break}case P.TAG_ID.FORM:{Uve(e,t);break}case P.TAG_ID.NOBR:{qve(e,t);break}case P.TAG_ID.MATH:{lye(e,t);break}case P.TAG_ID.TABLE:{Kve(e,t);break}case P.TAG_ID.INPUT:{Zve(e,t);break}case P.TAG_ID.PARAM:case P.TAG_ID.TRACK:case P.TAG_ID.SOURCE:{Qve(e,t);break}case P.TAG_ID.IMAGE:{eye(e,t);break}case P.TAG_ID.BUTTON:{Vve(e,t);break}case P.TAG_ID.APPLET:case P.TAG_ID.OBJECT:case P.TAG_ID.MARQUEE:{Xve(e,t);break}case P.TAG_ID.IFRAME:{nye(e,t);break}case P.TAG_ID.SELECT:{iye(e,t);break}case P.TAG_ID.OPTION:case P.TAG_ID.OPTGROUP:{oye(e,t);break}case P.TAG_ID.NOEMBED:{Y6(e,t);break}case P.TAG_ID.FRAMESET:{Hve(e,t);break}case P.TAG_ID.TEXTAREA:{tye(e,t);break}case P.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?Y6(e,t):q6(e,t);break}case P.TAG_ID.PLAINTEXT:{zve(e,t);break}case P.TAG_ID.COL:case P.TAG_ID.TH:case P.TAG_ID.TD:case P.TAG_ID.TR:case P.TAG_ID.HEAD:case P.TAG_ID.FRAME:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:case P.TAG_ID.CAPTION:case P.TAG_ID.COLGROUP:break;default:q6(e,t)}}function uye(e,t){if(e.openElements.hasInScope(P.TAG_ID.BODY)&&(e.insertionMode=ce.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function fye(e,t){e.openElements.hasInScope(P.TAG_ID.BODY)&&(e.insertionMode=ce.AFTER_BODY,iU(e,t))}function hye(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function dye(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(P.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(P.TAG_ID.FORM):r&&e.openElements.remove(r))}function pye(e){e.openElements.hasInButtonScope(P.TAG_ID.P)||e._insertFakeElement(P.TAG_NAMES.P,P.TAG_ID.P),e._closePElement()}function mye(e){e.openElements.hasInListItemScope(P.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(P.TAG_ID.LI),e.openElements.popUntilTagNamePopped(P.TAG_ID.LI))}function gye(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function vye(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function yye(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function bye(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(P.TAG_NAMES.BR,P.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function X6(e,t){const r=t.tagName,i=t.tagID;for(let n=e.openElements.stackTop;n>0;n--){const o=e.openElements.items[n],a=e.openElements.tagIDs[n];if(i===a&&(i!==P.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(o)===r)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=n&&e.openElements.shortenToLength(n);break}if(e._isSpecialElement(o,a))break}}function Rb(e,t){switch(t.tagID){case P.TAG_ID.A:case P.TAG_ID.B:case P.TAG_ID.I:case P.TAG_ID.S:case P.TAG_ID.U:case P.TAG_ID.EM:case P.TAG_ID.TT:case P.TAG_ID.BIG:case P.TAG_ID.CODE:case P.TAG_ID.FONT:case P.TAG_ID.NOBR:case P.TAG_ID.SMALL:case P.TAG_ID.STRIKE:case P.TAG_ID.STRONG:{RO(e,t);break}case P.TAG_ID.P:{pye(e);break}case P.TAG_ID.DL:case P.TAG_ID.UL:case P.TAG_ID.OL:case P.TAG_ID.DIR:case P.TAG_ID.DIV:case P.TAG_ID.NAV:case P.TAG_ID.PRE:case P.TAG_ID.MAIN:case P.TAG_ID.MENU:case P.TAG_ID.ASIDE:case P.TAG_ID.BUTTON:case P.TAG_ID.CENTER:case P.TAG_ID.FIGURE:case P.TAG_ID.FOOTER:case P.TAG_ID.HEADER:case P.TAG_ID.HGROUP:case P.TAG_ID.DIALOG:case P.TAG_ID.ADDRESS:case P.TAG_ID.ARTICLE:case P.TAG_ID.DETAILS:case P.TAG_ID.SECTION:case P.TAG_ID.SUMMARY:case P.TAG_ID.LISTING:case P.TAG_ID.FIELDSET:case P.TAG_ID.BLOCKQUOTE:case P.TAG_ID.FIGCAPTION:{hye(e,t);break}case P.TAG_ID.LI:{mye(e);break}case P.TAG_ID.DD:case P.TAG_ID.DT:{gye(e,t);break}case P.TAG_ID.H1:case P.TAG_ID.H2:case P.TAG_ID.H3:case P.TAG_ID.H4:case P.TAG_ID.H5:case P.TAG_ID.H6:{vye(e);break}case P.TAG_ID.BR:{bye(e);break}case P.TAG_ID.BODY:{uye(e,t);break}case P.TAG_ID.HTML:{fye(e,t);break}case P.TAG_ID.FORM:{dye(e);break}case P.TAG_ID.APPLET:case P.TAG_ID.OBJECT:case P.TAG_ID.MARQUEE:{yye(e,t);break}case P.TAG_ID.TEMPLATE:{sc(e,t);break}default:X6(e,t)}}function K6(e,t){e.tmplInsertionModeStack.length>0?nU(e,t):LO(e,t)}function _ye(e,t){var r;t.tagID===P.TAG_ID.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Tye(e,t){e._err(t,bn.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function BO(e,t){if(j6.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ce.IN_TABLE_TEXT,t.type){case on.TokenType.CHARACTER:{Q6(e,t);break}case on.TokenType.WHITESPACE_CHARACTER:{Z6(e,t);break}}else Wp(e,t)}function Eye(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_CAPTION}function Sye(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_COLUMN_GROUP}function wye(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(P.TAG_NAMES.COLGROUP,P.TAG_ID.COLGROUP),e.insertionMode=ce.IN_COLUMN_GROUP,HO(e,t)}function Aye(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_TABLE_BODY}function Oye(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(P.TAG_NAMES.TBODY,P.TAG_ID.TBODY),e.insertionMode=ce.IN_TABLE_BODY,Lb(e,t)}function kye(e,t){e.openElements.hasInTableScope(P.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Iye(e,t){W6(t)?e._appendElement(t,P.NS.HTML):Wp(e,t),t.ackSelfClosing=!0}function Cye(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,P.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Sf(e,t){switch(t.tagID){case P.TAG_ID.TD:case P.TAG_ID.TH:case P.TAG_ID.TR:{Oye(e,t);break}case P.TAG_ID.STYLE:case P.TAG_ID.SCRIPT:case P.TAG_ID.TEMPLATE:{yo(e,t);break}case P.TAG_ID.COL:{wye(e,t);break}case P.TAG_ID.FORM:{Cye(e,t);break}case P.TAG_ID.TABLE:{kye(e,t);break}case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{Aye(e,t);break}case P.TAG_ID.INPUT:{Iye(e,t);break}case P.TAG_ID.CAPTION:{Eye(e,t);break}case P.TAG_ID.COLGROUP:{Sye(e,t);break}default:Wp(e,t)}}function Vp(e,t){switch(t.tagID){case P.TAG_ID.TABLE:{e.openElements.hasInTableScope(P.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.TABLE),e._resetInsertionMode());break}case P.TAG_ID.TEMPLATE:{sc(e,t);break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TBODY:case P.TAG_ID.TD:case P.TAG_ID.TFOOT:case P.TAG_ID.TH:case P.TAG_ID.THEAD:case P.TAG_ID.TR:break;default:Wp(e,t)}}function Wp(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Nb(e,t),e.fosterParentingEnabled=r}function Z6(e,t){e.pendingCharacterTokens.push(t)}function Q6(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Yp(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)Wp(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const J6=new Set([P.TAG_ID.CAPTION,P.TAG_ID.COL,P.TAG_ID.COLGROUP,P.TAG_ID.TBODY,P.TAG_ID.TD,P.TAG_ID.TFOOT,P.TAG_ID.TH,P.TAG_ID.THEAD,P.TAG_ID.TR]);function Pye(e,t){const r=t.tagID;J6.has(r)?e.openElements.hasInTableScope(P.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(P.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_TABLE,Sf(e,t)):Fn(e,t)}function Dye(e,t){const r=t.tagID;switch(r){case P.TAG_ID.CAPTION:case P.TAG_ID.TABLE:{e.openElements.hasInTableScope(P.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(P.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_TABLE,r===P.TAG_ID.TABLE&&Vp(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TBODY:case P.TAG_ID.TD:case P.TAG_ID.TFOOT:case P.TAG_ID.TH:case P.TAG_ID.THEAD:case P.TAG_ID.TR:break;default:Rb(e,t)}}function HO(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.COL:{e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0;break}case P.TAG_ID.TEMPLATE:{yo(e,t);break}default:Mb(e,t)}}function xye(e,t){switch(t.tagID){case P.TAG_ID.COLGROUP:{e.openElements.currentTagId===P.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ce.IN_TABLE);break}case P.TAG_ID.TEMPLATE:{sc(e,t);break}case P.TAG_ID.COL:break;default:Mb(e,t)}}function Mb(e,t){e.openElements.currentTagId===P.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ce.IN_TABLE,e._processToken(t))}function Lb(e,t){switch(t.tagID){case P.TAG_ID.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_ROW;break}case P.TAG_ID.TH:case P.TAG_ID.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(P.TAG_NAMES.TR,P.TAG_ID.TR),e.insertionMode=ce.IN_ROW,Bb(e,t);break}case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE,Sf(e,t));break}default:Sf(e,t)}}function $O(e,t){const r=t.tagID;switch(t.tagID){case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE);break}case P.TAG_ID.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE,Vp(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TD:case P.TAG_ID.TH:case P.TAG_ID.TR:break;default:Vp(e,t)}}function Bb(e,t){switch(t.tagID){case P.TAG_ID.TH:case P.TAG_ID.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_CELL,e.activeFormattingElements.insertMarker();break}case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:case P.TAG_ID.TR:{e.openElements.hasInTableScope(P.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,Lb(e,t));break}default:Sf(e,t)}}function eU(e,t){switch(t.tagID){case P.TAG_ID.TR:{e.openElements.hasInTableScope(P.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY);break}case P.TAG_ID.TABLE:{e.openElements.hasInTableScope(P.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,$O(e,t));break}case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(P.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,$O(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TD:case P.TAG_ID.TH:break;default:Vp(e,t)}}function Nye(e,t){const r=t.tagID;J6.has(r)?(e.openElements.hasInTableScope(P.TAG_ID.TD)||e.openElements.hasInTableScope(P.TAG_ID.TH))&&(e._closeTableCell(),Bb(e,t)):Fn(e,t)}function Rye(e,t){const r=t.tagID;switch(r){case P.TAG_ID.TD:case P.TAG_ID.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_ROW);break}case P.TAG_ID.TABLE:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:case P.TAG_ID.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),eU(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:break;default:Rb(e,t)}}function tU(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.OPTION:{e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,P.NS.HTML);break}case P.TAG_ID.OPTGROUP:{e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===P.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,P.NS.HTML);break}case P.TAG_ID.INPUT:case P.TAG_ID.KEYGEN:case P.TAG_ID.TEXTAREA:case P.TAG_ID.SELECT:{e.openElements.hasInSelectScope(P.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==P.TAG_ID.SELECT&&e._processStartTag(t));break}case P.TAG_ID.SCRIPT:case P.TAG_ID.TEMPLATE:{yo(e,t);break}}}function rU(e,t){switch(t.tagID){case P.TAG_ID.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===P.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===P.TAG_ID.OPTGROUP&&e.openElements.pop();break}case P.TAG_ID.OPTION:{e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop();break}case P.TAG_ID.SELECT:{e.openElements.hasInSelectScope(P.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode());break}case P.TAG_ID.TEMPLATE:{sc(e,t);break}}}function Mye(e,t){const r=t.tagID;r===P.TAG_ID.CAPTION||r===P.TAG_ID.TABLE||r===P.TAG_ID.TBODY||r===P.TAG_ID.TFOOT||r===P.TAG_ID.THEAD||r===P.TAG_ID.TR||r===P.TAG_ID.TD||r===P.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):tU(e,t)}function Lye(e,t){const r=t.tagID;r===P.TAG_ID.CAPTION||r===P.TAG_ID.TABLE||r===P.TAG_ID.TBODY||r===P.TAG_ID.TFOOT||r===P.TAG_ID.THEAD||r===P.TAG_ID.TR||r===P.TAG_ID.TD||r===P.TAG_ID.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):rU(e,t)}function Bye(e,t){switch(t.tagID){case P.TAG_ID.BASE:case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.NOFRAMES:case P.TAG_ID.SCRIPT:case P.TAG_ID.STYLE:case P.TAG_ID.TEMPLATE:case P.TAG_ID.TITLE:{yo(e,t);break}case P.TAG_ID.CAPTION:case P.TAG_ID.COLGROUP:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{e.tmplInsertionModeStack[0]=ce.IN_TABLE,e.insertionMode=ce.IN_TABLE,Sf(e,t);break}case P.TAG_ID.COL:{e.tmplInsertionModeStack[0]=ce.IN_COLUMN_GROUP,e.insertionMode=ce.IN_COLUMN_GROUP,HO(e,t);break}case P.TAG_ID.TR:{e.tmplInsertionModeStack[0]=ce.IN_TABLE_BODY,e.insertionMode=ce.IN_TABLE_BODY,Lb(e,t);break}case P.TAG_ID.TD:case P.TAG_ID.TH:{e.tmplInsertionModeStack[0]=ce.IN_ROW,e.insertionMode=ce.IN_ROW,Bb(e,t);break}default:e.tmplInsertionModeStack[0]=ce.IN_BODY,e.insertionMode=ce.IN_BODY,Fn(e,t)}}function Hye(e,t){t.tagID===P.TAG_ID.TEMPLATE&&sc(e,t)}function nU(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(P.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):LO(e,t)}function $ye(e,t){t.tagID===P.TAG_ID.HTML?Fn(e,t):Hb(e,t)}function iU(e,t){var r;if(t.tagID===P.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=ce.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===P.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(i))===null||r===void 0)&&r.endTag)&&e._setEndLocation(i,t)}}else Hb(e,t)}function Hb(e,t){e.insertionMode=ce.IN_BODY,Nb(e,t)}function Fye(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.FRAMESET:{e._insertElement(t,P.NS.HTML);break}case P.TAG_ID.FRAME:{e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0;break}case P.TAG_ID.NOFRAMES:{yo(e,t);break}}}function jye(e,t){t.tagID===P.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==P.TAG_ID.FRAMESET&&(e.insertionMode=ce.AFTER_FRAMESET))}function Uye(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.NOFRAMES:{yo(e,t);break}}}function Gye(e,t){t.tagID===P.TAG_ID.HTML&&(e.insertionMode=ce.AFTER_AFTER_FRAMESET)}function zye(e,t){t.tagID===P.TAG_ID.HTML?Fn(e,t):$b(e,t)}function $b(e,t){e.insertionMode=ce.IN_BODY,Nb(e,t)}function Vye(e,t){switch(t.tagID){case P.TAG_ID.HTML:{Fn(e,t);break}case P.TAG_ID.NOFRAMES:{yo(e,t);break}}}function Wye(e,t){t.chars=F6.REPLACEMENT_CHARACTER,e._insertCharacters(t)}function Yye(e,t){e._insertCharacters(t),e.framesetOk=!1}function oU(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==P.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function qye(e,t){if(ea.causesExit(t))oU(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(r);i===P.NS.MATHML?ea.adjustTokenMathMLAttrs(t):i===P.NS.SVG&&(ea.adjustTokenSVGTagName(t),ea.adjustTokenSVGAttrs(t)),ea.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function Xye(e,t){if(t.tagID===P.TAG_ID.P||t.tagID===P.TAG_ID.BR){oU(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){const i=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(i)===P.NS.HTML){e._endTagOutsideForeignContent(t);break}const n=e.treeAdapter.getTagName(i);if(n.toLowerCase()===t.tagName){t.tagName=n,e.openElements.shortenToLength(r);break}}}var wf={};Object.defineProperty(wf,"__esModule",{value:!0}),wf.serializeOuter=wf.serialize=void 0;const br=za,aU=ef,Kye=xb,Zye=new Set([br.TAG_NAMES.AREA,br.TAG_NAMES.BASE,br.TAG_NAMES.BASEFONT,br.TAG_NAMES.BGSOUND,br.TAG_NAMES.BR,br.TAG_NAMES.COL,br.TAG_NAMES.EMBED,br.TAG_NAMES.FRAME,br.TAG_NAMES.HR,br.TAG_NAMES.IMG,br.TAG_NAMES.INPUT,br.TAG_NAMES.KEYGEN,br.TAG_NAMES.LINK,br.TAG_NAMES.META,br.TAG_NAMES.PARAM,br.TAG_NAMES.SOURCE,br.TAG_NAMES.TRACK,br.TAG_NAMES.WBR]);function sU(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===br.NS.HTML&&Zye.has(t.treeAdapter.getTagName(e))}const lU={treeAdapter:Kye.defaultTreeAdapter,scriptingEnabled:!0};function Qye(e,t){const r=Object.assign(Object.assign({},lU),t);return sU(e,r)?"":cU(e,r)}wf.serialize=Qye;function Jye(e,t){const r=Object.assign(Object.assign({},lU),t);return uU(e,r)}wf.serializeOuter=Jye;function cU(e,t){let r="";const i=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===br.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===br.NS.HTML?t.treeAdapter.getTemplateContent(e):e,n=t.treeAdapter.getChildNodes(i);if(n)for(const o of n)r+=uU(o,t);return r}function uU(e,t){return t.treeAdapter.isElementNode(e)?ebe(e,t):t.treeAdapter.isTextNode(e)?rbe(e,t):t.treeAdapter.isCommentNode(e)?nbe(e,t):t.treeAdapter.isDocumentTypeNode(e)?ibe(e,t):""}function ebe(e,t){const r=t.treeAdapter.getTagName(e);return`<${r}${tbe(e,t)}>${sU(e,t)?"":`${cU(e,t)}</${r}>`}`}function tbe(e,{treeAdapter:t}){let r="";for(const i of t.getAttrList(e)){if(r+=" ",!i.namespace)r+=i.name;else switch(i.namespace){case br.NS.XML:{r+=`xml:${i.name}`;break}case br.NS.XMLNS:{i.name!=="xmlns"&&(r+="xmlns:"),r+=i.name;break}case br.NS.XLINK:{r+=`xlink:${i.name}`;break}default:r+=`${i.prefix}:${i.name}`}r+=`="${(0,aU.escapeAttribute)(i.value)}"`}return r}function rbe(e,t){const{treeAdapter:r}=t,i=r.getTextNodeContent(e),n=r.getParentNode(e),o=n&&r.isElementNode(n)&&r.getTagName(n);return o&&r.getNamespaceURI(n)===br.NS.HTML&&(0,br.hasUnescapedText)(o,t.scriptingEnabled)?i:(0,aU.escapeText)(i)}function nbe(e,{treeAdapter:t}){return`<!--${t.getCommentNodeContent(e)}-->`}function ibe(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=Mp;var r=xb;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return r.defaultTreeAdapter}});var i=Mp;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return i.Parser}});var n=wf;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return n.serializeOuter}});var o=Lp;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return o.ERR}}),e.foreignContent=NO,e.html=za,e.Token=Ib;var a=ac;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return a.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return a.TokenizerMode}});function s(u,l){return t.Parser.parse(u,l)}e.parse=s;function c(u,l,h){typeof u=="string"&&(h=l,l=u,u=null);const f=t.Parser.getFragmentParser(u,h);return f.tokenizer.write(l,!0),f.getFragment()}e.parseFragment=c})(E6),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.adapter=e.serializeDoctypeContent=void 0;const t=E6,r=Hn;function i(a){return new r.Text(a)}function n(a){const s=a.includes('"')?"'":'"';return s+a+s}function o(a,s,c){let u="!DOCTYPE ";return a&&(u+=a),s?u+=` PUBLIC ${n(s)}`:c&&(u+=" SYSTEM"),c&&(u+=` ${n(c)}`),u}e.serializeDoctypeContent=o,e.adapter={isCommentNode:r.isComment,isElementNode:r.isTag,isTextNode:r.isText,createDocument(){const a=new r.Document([]);return a["x-mode"]=t.html.DOCUMENT_MODE.NO_QUIRKS,a},createDocumentFragment(){return new r.Document([])},createElement(a,s,c){const u=Object.create(null),l=Object.create(null),h=Object.create(null);for(let d=0;d<c.length;d++){const p=c[d].name;u[p]=c[d].value,l[p]=c[d].namespace,h[p]=c[d].prefix}const f=new r.Element(a,u,[]);return f.namespace=s,f["x-attribsNamespace"]=l,f["x-attribsPrefix"]=h,f},createCommentNode(a){return new r.Comment(a)},appendChild(a,s){const c=a.children[a.children.length-1];c&&(c.next=s,s.prev=c),a.children.push(s),s.parent=a},insertBefore(a,s,c){const u=a.children.indexOf(c),{prev:l}=c;l&&(l.next=s,s.prev=l),c.prev=s,s.next=c,a.children.splice(u,0,s),s.parent=a},setTemplateContent(a,s){e.adapter.appendChild(a,s)},getTemplateContent(a){return a.children[0]},setDocumentType(a,s,c,u){const l=o(s,c,u);let h=a.children.find(f=>(0,r.isDirective)(f)&&f.name==="!doctype");h?h.data=l??null:(h=new r.ProcessingInstruction("!doctype",l),e.adapter.appendChild(a,h)),h["x-name"]=s??void 0,h["x-publicId"]=c??void 0,h["x-systemId"]=u??void 0},setDocumentMode(a,s){a["x-mode"]=s},getDocumentMode(a){return a["x-mode"]},detachNode(a){if(a.parent){const s=a.parent.children.indexOf(a),{prev:c,next:u}=a;a.prev=null,a.next=null,c&&(c.next=u),u&&(u.prev=c),a.parent.children.splice(s,1),a.parent=null}},insertText(a,s){const c=a.children[a.children.length-1];c&&(0,r.isText)(c)?c.data+=s:e.adapter.appendChild(a,i(s))},insertTextBefore(a,s,c){const u=a.children[a.children.indexOf(c)-1];u&&(0,r.isText)(u)?u.data+=s:e.adapter.insertBefore(a,i(s),c)},adoptAttributes(a,s){for(let c=0;c<s.length;c++){const u=s[c].name;typeof a.attribs[u]>"u"&&(a.attribs[u]=s[c].value,a["x-attribsNamespace"][u]=s[c].namespace,a["x-attribsPrefix"][u]=s[c].prefix)}},getFirstChild(a){return a.children[0]},getChildNodes(a){return a.children},getParentNode(a){return a.parent},getAttrList(a){return a.attributes},getTagName(a){return a.name},getNamespaceURI(a){return a.namespace},getTextNodeContent(a){return a.data},getCommentNodeContent(a){return a.data},getDocumentTypeNodeName(a){var s;return(s=a["x-name"])!==null&&s!==void 0?s:""},getDocumentTypeNodePublicId(a){var s;return(s=a["x-publicId"])!==null&&s!==void 0?s:""},getDocumentTypeNodeSystemId(a){var s;return(s=a["x-systemId"])!==null&&s!==void 0?s:""},isDocumentTypeNode(a){return(0,r.isDirective)(a)&&a.name==="!doctype"},setNodeSourceCodeLocation(a,s){s&&(a.startIndex=s.startOffset,a.endIndex=s.endOffset),a.sourceCodeLocation=s},getNodeSourceCodeLocation(a){return a.sourceCodeLocation},updateNodeSourceCodeLocation(a,s){s.endOffset!=null&&(a.endIndex=s.endOffset),a.sourceCodeLocation=Object.assign(Object.assign({},a.sourceCodeLocation),s)}}}(T6);var obe=De&&De.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(gf,"__esModule",{value:!0}),gf.renderWithParse5=gf.parseWithParse5=void 0;var abe=Hn,FO=xj,fU=T6;function sbe(e,t,r,i){var n={scriptingEnabled:typeof t.scriptingEnabled=="boolean"?t.scriptingEnabled:!0,treeAdapter:fU.adapter,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return r?(0,FO.parse)(e,n):(0,FO.parseFragment)(i,e,n)}gf.parseWithParse5=sbe;var lbe={treeAdapter:fU.adapter};function cbe(e){for(var t,r=("length"in e)?e:[e],i=0;i<r.length;i+=1){var n=r[i];(0,abe.isDocument)(n)&&(t=Array.prototype.splice).call.apply(t,obe([r,i,1],n.children,!1))}for(var o="",i=0;i<r.length;i+=1){var n=r[i];o+=(0,FO.serializeOuter)(n,lbe)}return o}gf.renderWithParse5=cbe;var hU={},qp={},jO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t=Zl,r;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var i;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(i||(i={}));function n(f){return f===r.Space||f===r.NewLine||f===r.Tab||f===r.FormFeed||f===r.CarriageReturn}function o(f){return f===r.Slash||f===r.Gt||n(f)}function a(f){return f>=r.Zero&&f<=r.Nine}function s(f){return f>=r.LowerA&&f<=r.LowerZ||f>=r.UpperA&&f<=r.UpperZ}function c(f){return f>=r.UpperA&&f<=r.UpperF||f>=r.LowerA&&f<=r.LowerF}var u;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(u=e.QuoteType||(e.QuoteType={}));var l={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},h=function(){function f(d,p){var m=d.xmlMode,g=m===void 0?!1:m,v=d.decodeEntities,_=v===void 0?!0:v;this.cbs=p,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=_,this.entityTrie=g?t.xmlDecodeTree:t.htmlDecodeTree}return f.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(d){this.offset+=this.buffer.length,this.buffer=d,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(d){d===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&d===r.Amp&&(this.state=i.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(d){var p=this.sequenceIndex===this.currentSequence.length,m=p?o(d):(d|32)===this.currentSequence[this.sequenceIndex];if(!m)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(d)},f.prototype.stateInSpecialTag=function(d){if(this.sequenceIndex===this.currentSequence.length){if(d===r.Gt||n(d)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var m=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=m}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(d);return}this.sequenceIndex=0}(d|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===l.TitleEnd?this.decodeEntities&&d===r.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(d===r.Lt)},f.prototype.stateCDATASequence=function(d){d===l.Cdata[this.sequenceIndex]?++this.sequenceIndex===l.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=l.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(d))},f.prototype.fastForwardTo=function(d){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===d)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(d){d===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):d!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(d){return this.xmlMode?!o(d):s(d)},f.prototype.startSpecial=function(d,p){this.isSpecial=!0,this.currentSequence=d,this.sequenceIndex=p,this.state=i.SpecialStartSequence},f.prototype.stateBeforeTagName=function(d){if(d===r.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(d===r.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(d)){var p=d|32;this.sectionStart=this.index,!this.xmlMode&&p===l.TitleEnd[2]?this.startSpecial(l.TitleEnd,3):this.state=!this.xmlMode&&p===l.ScriptEnd[2]?i.BeforeSpecialS:i.InTagName}else d===r.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(d))},f.prototype.stateInTagName=function(d){o(d)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d))},f.prototype.stateBeforeClosingTagName=function(d){n(d)||(d===r.Gt?this.state=i.Text:(this.state=this.isTagStartChar(d)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(d){(d===r.Gt||n(d))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(d))},f.prototype.stateAfterClosingTagName=function(d){(d===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(d){d===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):d===r.Slash?this.state=i.InSelfClosingTag:n(d)||(this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(d){d===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(d)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d))},f.prototype.stateInAttributeName=function(d){(d===r.Eq||o(d))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(d))},f.prototype.stateAfterAttributeName=function(d){d===r.Eq?this.state=i.BeforeAttributeValue:d===r.Slash||d===r.Gt?(this.cbs.onattribend(u.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d)):n(d)||(this.cbs.onattribend(u.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(d){d===r.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):d===r.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):n(d)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(d))},f.prototype.handleInAttributeValue=function(d,p){d===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===r.DoubleQuote?u.Double:u.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&d===r.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(d){this.handleInAttributeValue(d,r.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(d){this.handleInAttributeValue(d,r.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(d){n(d)||d===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(u.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d)):this.decodeEntities&&d===r.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(d){d===r.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=d===r.Dash?i.BeforeComment:i.InDeclaration},f.prototype.stateInDeclaration=function(d){(d===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(d){(d===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(d){d===r.Dash?(this.state=i.InCommentLike,this.currentSequence=l.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},f.prototype.stateInSpecialComment=function(d){(d===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(d){var p=d|32;p===l.ScriptEnd[3]?this.startSpecial(l.ScriptEnd,4):p===l.StyleEnd[3]?this.startSpecial(l.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(d))},f.prototype.stateBeforeEntity=function(d){this.entityExcess=1,this.entityResult=0,d===r.Number?this.state=i.BeforeNumericEntity:d===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(d))},f.prototype.stateInNamedEntity=function(d){if(this.entityExcess+=1,this.trieIndex=(0,t.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,d),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&t.BinTrieFlags.VALUE_LENGTH;if(p){var m=(p>>14)-1;if(!this.allowLegacyEntity()&&d!==r.Semi)this.trieIndex+=m;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=m,this.entityExcess=0,this.sectionStart=this.index+1,m===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var d=(this.entityTrie[this.entityResult]&t.BinTrieFlags.VALUE_LENGTH)>>14;switch(d){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~t.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(d){(d|32)===r.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(d))},f.prototype.emitNumericEntity=function(d){var p=this.index-this.entityExcess-1,m=p+2+ +(this.state===i.InHexEntity);m!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(d),this.emitCodePoint((0,t.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(d){d===r.Semi?this.emitNumericEntity(!0):a(d)?(this.entityResult=this.entityResult*10+(d-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(d){d===r.Semi?this.emitNumericEntity(!0):a(d)?(this.entityResult=this.entityResult*16+(d-r.Zero),this.entityExcess++):c(d)?(this.entityResult=this.entityResult*16+((d|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var d=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:{this.stateText(d);break}case i.SpecialStartSequence:{this.stateSpecialStartSequence(d);break}case i.InSpecialTag:{this.stateInSpecialTag(d);break}case i.CDATASequence:{this.stateCDATASequence(d);break}case i.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(d);break}case i.InAttributeName:{this.stateInAttributeName(d);break}case i.InCommentLike:{this.stateInCommentLike(d);break}case i.InSpecialComment:{this.stateInSpecialComment(d);break}case i.BeforeAttributeName:{this.stateBeforeAttributeName(d);break}case i.InTagName:{this.stateInTagName(d);break}case i.InClosingTagName:{this.stateInClosingTagName(d);break}case i.BeforeTagName:{this.stateBeforeTagName(d);break}case i.AfterAttributeName:{this.stateAfterAttributeName(d);break}case i.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(d);break}case i.BeforeAttributeValue:{this.stateBeforeAttributeValue(d);break}case i.BeforeClosingTagName:{this.stateBeforeClosingTagName(d);break}case i.AfterClosingTagName:{this.stateAfterClosingTagName(d);break}case i.BeforeSpecialS:{this.stateBeforeSpecialS(d);break}case i.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(d);break}case i.InSelfClosingTag:{this.stateInSelfClosingTag(d);break}case i.InDeclaration:{this.stateInDeclaration(d);break}case i.BeforeDeclaration:{this.stateBeforeDeclaration(d);break}case i.BeforeComment:{this.stateBeforeComment(d);break}case i.InProcessingInstruction:{this.stateInProcessingInstruction(d);break}case i.InNamedEntity:{this.stateInNamedEntity(d);break}case i.BeforeEntity:{this.stateBeforeEntity(d);break}case i.InHexEntity:{this.stateInHexEntity(d);break}case i.InNumericEntity:{this.stateInNumericEntity(d);break}default:this.stateBeforeNumericEntity(d)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var d=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,d,0):this.cbs.oncomment(this.sectionStart,d,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,d)},f.prototype.emitPartial=function(d,p){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(d,p):this.cbs.ontext(d,p)},f.prototype.emitCodePoint=function(d){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(d):this.cbs.ontextentity(d)},f}();e.default=h})(jO);var ube=De&&De.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),fbe=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hbe=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ube(t,e,r);return fbe(t,e),t};Object.defineProperty(qp,"__esModule",{value:!0}),qp.Parser=void 0;var Fb=hbe(jO),dU=Zl,Af=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pr=new Set(["p"]),pU=new Set(["thead","tbody"]),mU=new Set(["dd","dt"]),gU=new Set(["rt","rp"]),dbe=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pr],["h1",pr],["h2",pr],["h3",pr],["h4",pr],["h5",pr],["h6",pr],["select",Af],["input",Af],["output",Af],["button",Af],["datalist",Af],["textarea",Af],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",mU],["dt",mU],["address",pr],["article",pr],["aside",pr],["blockquote",pr],["details",pr],["div",pr],["dl",pr],["fieldset",pr],["figcaption",pr],["figure",pr],["footer",pr],["form",pr],["header",pr],["hr",pr],["main",pr],["nav",pr],["ol",pr],["pre",pr],["section",pr],["table",pr],["ul",pr],["rt",gU],["rp",gU],["tbody",pU],["tfoot",pU]]),pbe=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),vU=new Set(["math","svg"]),yU=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),mbe=/\s|\//,gbe=function(){function e(t,r){r===void 0&&(r={});var i,n,o,a,s;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.lowerCaseTagNames=(i=r.lowerCaseTags)!==null&&i!==void 0?i:!r.xmlMode,this.lowerCaseAttributeNames=(n=r.lowerCaseAttributeNames)!==null&&n!==void 0?n:!r.xmlMode,this.tokenizer=new((o=r.Tokenizer)!==null&&o!==void 0?o:Fb.default)(this.options,this),(s=(a=this.cbs).onparserinit)===null||s===void 0||s.call(a,this)}return e.prototype.ontext=function(t,r){var i,n,o=this.getSlice(t,r);this.endIndex=r-1,(n=(i=this.cbs).ontext)===null||n===void 0||n.call(i,o),this.startIndex=r},e.prototype.ontextentity=function(t){var r,i,n=this.tokenizer.getSectionStart();this.endIndex=n-1,(i=(r=this.cbs).ontext)===null||i===void 0||i.call(r,(0,dU.fromCodePoint)(t)),this.startIndex=n},e.prototype.isVoidElement=function(t){return!this.options.xmlMode&&pbe.has(t)},e.prototype.onopentagname=function(t,r){this.endIndex=r;var i=this.getSlice(t,r);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)},e.prototype.emitOpenTag=function(t){var r,i,n,o;this.openTagStart=this.startIndex,this.tagname=t;var a=!this.options.xmlMode&&dbe.get(t);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){var s=this.stack.pop();(i=(r=this.cbs).onclosetag)===null||i===void 0||i.call(r,s,!0)}this.isVoidElement(t)||(this.stack.push(t),vU.has(t)?this.foreignContext.push(!0):yU.has(t)&&this.foreignContext.push(!1)),(o=(n=this.cbs).onopentagname)===null||o===void 0||o.call(n,t),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(t){var r,i;this.startIndex=this.openTagStart,this.attribs&&((i=(r=this.cbs).onopentag)===null||i===void 0||i.call(r,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1},e.prototype.onclosetag=function(t,r){var i,n,o,a,s,c;this.endIndex=r;var u=this.getSlice(t,r);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),(vU.has(u)||yU.has(u))&&this.foreignContext.pop(),this.isVoidElement(u))!this.options.xmlMode&&u==="br"&&((n=(i=this.cbs).onopentagname)===null||n===void 0||n.call(i,"br"),(a=(o=this.cbs).onopentag)===null||a===void 0||a.call(o,"br",{},!0),(c=(s=this.cbs).onclosetag)===null||c===void 0||c.call(s,"br",!1));else{var l=this.stack.lastIndexOf(u);if(l!==-1)if(this.cbs.onclosetag)for(var h=this.stack.length-l;h--;)this.cbs.onclosetag(this.stack.pop(),h!==0);else this.stack.length=l;else!this.options.xmlMode&&u==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},e.prototype.onselfclosingtag=function(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)},e.prototype.closeCurrentTag=function(t){var r,i,n=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===n&&((i=(r=this.cbs).onclosetag)===null||i===void 0||i.call(r,n,!t),this.stack.pop())},e.prototype.onattribname=function(t,r){this.startIndex=t;var i=this.getSlice(t,r);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i},e.prototype.onattribdata=function(t,r){this.attribvalue+=this.getSlice(t,r)},e.prototype.onattribentity=function(t){this.attribvalue+=(0,dU.fromCodePoint)(t)},e.prototype.onattribend=function(t,r){var i,n;this.endIndex=r,(n=(i=this.cbs).onattribute)===null||n===void 0||n.call(i,this.attribname,this.attribvalue,t===Fb.QuoteType.Double?'"':t===Fb.QuoteType.Single?"'":t===Fb.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(t){var r=t.search(mbe),i=r<0?t:t.substr(0,r);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i},e.prototype.ondeclaration=function(t,r){this.endIndex=r;var i=this.getSlice(t,r);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(n),"!".concat(i))}this.startIndex=r+1},e.prototype.onprocessinginstruction=function(t,r){this.endIndex=r;var i=this.getSlice(t,r);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(n),"?".concat(i))}this.startIndex=r+1},e.prototype.oncomment=function(t,r,i){var n,o,a,s;this.endIndex=r,(o=(n=this.cbs).oncomment)===null||o===void 0||o.call(n,this.getSlice(t,r-i)),(s=(a=this.cbs).oncommentend)===null||s===void 0||s.call(a),this.startIndex=r+1},e.prototype.oncdata=function(t,r,i){var n,o,a,s,c,u,l,h,f,d;this.endIndex=r;var p=this.getSlice(t,r-i);this.options.xmlMode||this.options.recognizeCDATA?((o=(n=this.cbs).oncdatastart)===null||o===void 0||o.call(n),(s=(a=this.cbs).ontext)===null||s===void 0||s.call(a,p),(u=(c=this.cbs).oncdataend)===null||u===void 0||u.call(c)):((h=(l=this.cbs).oncomment)===null||h===void 0||h.call(l,"[CDATA[".concat(p,"]]")),(d=(f=this.cbs).oncommentend)===null||d===void 0||d.call(f)),this.startIndex=r+1},e.prototype.onend=function(){var t,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}(r=(t=this.cbs).onend)===null||r===void 0||r.call(t)},e.prototype.reset=function(){var t,r,i,n;(r=(t=this.cbs).onreset)===null||r===void 0||r.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(n=(i=this.cbs).onparserinit)===null||n===void 0||n.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(t){this.reset(),this.end(t)},e.prototype.getSlice=function(t,r){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var i=this.buffers[0].slice(t-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,r-this.bufferOffset);return i},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(t){var r,i;if(this.ended){(i=(r=this.cbs).onerror)===null||i===void 0||i.call(r,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)},e.prototype.end=function(t){var r,i;if(this.ended){(i=(r=this.cbs).onerror)===null||i===void 0||i.call(r,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(t){this.write(t)},e.prototype.done=function(t){this.end(t)},e}();qp.Parser=gbe,function(e){var t=De&&De.__createBinding||(Object.create?function(v,_,y,b){b===void 0&&(b=y);var T=Object.getOwnPropertyDescriptor(_,y);(!T||("get"in T?!_.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return _[y]}}),Object.defineProperty(v,b,T)}:function(v,_,y,b){b===void 0&&(b=y),v[b]=_[y]}),r=De&&De.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),i=De&&De.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var y in v)y!=="default"&&Object.prototype.hasOwnProperty.call(v,y)&&t(_,v,y);return r(_,v),_},n=De&&De.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0;var o=qp,a=qp;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return a.Parser}});var s=Hn,c=Hn;Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function u(v,_){var y=new s.DomHandler(void 0,_);return new o.Parser(y,_).end(v),y.root}e.parseDocument=u;function l(v,_){return u(v,_).children}e.parseDOM=l;function h(v,_,y){var b=new s.DomHandler(v,_,y);return new o.Parser(b,_)}e.createDomStream=h;var f=jO;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return n(f).default}}),e.ElementType=i(Qu);var d=po,p=po;Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var m={xmlMode:!0};function g(v,_){return _===void 0&&(_=m),(0,d.getFeed)(l(v,_))}e.parseFeed=g,e.DomUtils=i(po)}(hU),function(e){var t=De&&De.__createBinding||(Object.create?function(p,m,g,v){v===void 0&&(v=g);var _=Object.getOwnPropertyDescriptor(m,g);(!_||("get"in _?!m.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return m[g]}}),Object.defineProperty(p,v,_)}:function(p,m,g,v){v===void 0&&(v=g),p[v]=m[g]}),r=De&&De.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),i=De&&De.__exportStar||function(p,m){for(var g in p)g!=="default"&&!Object.prototype.hasOwnProperty.call(m,g)&&t(m,p,g)},n=De&&De.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var g in p)g!=="default"&&Object.prototype.hasOwnProperty.call(p,g)&&t(m,p,g);return r(m,p),m},o=De&&De.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.root=e.parseHTML=e.merge=e.contains=e.text=e.xml=e.html=e.load=void 0,i(pF,e);var a=Uy,s=nc,c=gf,u=o(Ju),l=hU,h=(0,s.getParse)(function(p,m,g,v){return m.xmlMode||m._useHtmlParser2?(0,l.parseDocument)(p,m):(0,c.parseWithParse5)(p,m,g,v)});e.load=(0,a.getLoad)(h,function(p,m){return m.xmlMode||m._useHtmlParser2?(0,u.default)(p,m):(0,c.renderWithParse5)(p)}),e.default=(0,e.load)([]);var f=Gr;Object.defineProperty(e,"html",{enumerable:!0,get:function(){return f.html}}),Object.defineProperty(e,"xml",{enumerable:!0,get:function(){return f.xml}}),Object.defineProperty(e,"text",{enumerable:!0,get:function(){return f.text}});var d=n(Gr);e.contains=d.contains,e.merge=d.merge,e.parseHTML=d.parseHTML,e.root=d.root}(dF);var lc={},jb={},vbe=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function ybe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ub(e,t){return new Error(String(e)+" is a required method of "+String(t)+", but was not implemented.")}var bU=function(){function e(){ybe(this,e),this.options={}}return vbe(e,[{key:"createRenderer",value:function(){function t(r){throw Ub("createRenderer","EnzymeAdapter")}return t}()},{key:"nodeToElement",value:function(){function t(r){throw Ub("nodeToElement","EnzymeAdapter")}return t}()},{key:"matchesElementType",value:function(){function t(r,i){if(!r)return r;var n=r.type;return n===i}return t}()},{key:"isValidElement",value:function(){function t(r){throw Ub("isValidElement","EnzymeAdapter")}return t}()},{key:"createElement",value:function(){function t(r,i){throw Ub("createElement","EnzymeAdapter")}return t}()},{key:"invokeSetStateCallback",value:function(){function t(r,i){i.call(r)}return t}()}]),e}();bU.MODES={STRING:"string",MOUNT:"mount",SHALLOW:"shallow"};var _U=bU;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var t=_U,r=i(t);function i(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!o)throw new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);if(typeof o=="function")throw Object.getPrototypeOf(o)===r.default?new Error(`
        Enzyme Internal Error: Enzyme expects an adapter instance to be configured -
        you provided an adapter *constructor*.
        To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
        before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
        corresponding to the library currently being tested. For example:

        import Adapter from 'enzyme-adapter-react-15';

        To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
      `):new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured -
      an enzyme adapter must be an object instance; you provided a function.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);if(!(o instanceof r.default))throw new Error("Enzyme Internal Error: configured enzyme adapter did not inherit from the EnzymeAdapter base class")}})(jb),Object.defineProperty(lc,"__esModule",{value:!0}),lc.get=Ebe,lc.merge=SU,lc.reset=Sbe;var bbe=Vu,TU=EU(bbe),_be=jb,Tbe=EU(_be);function EU(e){return e&&e.__esModule?e:{default:e}}var UO={};function Ebe(){return(0,TU.default)({},UO)}function SU(e){e.adapter&&(0,Tbe.default)(e.adapter),(0,TU.default)(UO,e)}function Sbe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};UO={},SU(e)}var an={},GO={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(i){function n(o,a){return i.apply(this,arguments)}return n.toString=function(){return i.toString()},n}(function(i,n){return typeof i!="object"||i===null||typeof n!="object"||n===null?!1:Object.keys(n).every(function(o){if(!i.propertyIsEnumerable(o))return!1;var a=n[o],s=i[o];return!(typeof a=="object"&&a!==null?!r(s,a):s!==a)})});t.default=r,e.exports=t.default})(GO,GO.exports);var wbe=GO.exports,Bs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=jb,r=n(t),i=lc;function n(a){return a&&a.__esModule?a:{default:a}}function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(a.adapter)return(0,r.default)(a.adapter),a.adapter;var s=(0,i.get)(),c=s.adapter;return(0,r.default)(c),c}})(Bs),Object.defineProperty(an,"__esModule",{value:!0});var Abe=function(){function e(t,r){var i=[],n=!0,o=!1,a=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(i.push(c.value),!(r&&i.length===r));n=!0);}catch(u){o=!0,a=u}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return i}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();an.propsOfNode=Gb,an.childrenOfNode=Of,an.hasClassName=jbe,an.treeForEach=zO,an.treeFilter=VO,an.findParentNode=Ube,an.pathToNode=AU,an.parentsOfNode=zbe,an.nodeHasId=Vbe,an.nodeMatchesObjectProps=Xbe,an.getTextFromNode=OU,an.getTextFromHostNodes=kU,an.getHTMLFromHostNodes=IU;var Obe=Vu,kbe=cc(Obe),Ibe=sp,wU=cc(Ibe),Cbe=tF,Pbe=cc(Cbe),Dbe=wbe,xbe=cc(Dbe),Nbe=VA,Rbe=cc(Nbe),Mbe=h$,Lbe=cc(Mbe),Bbe=Bs,Hbe=cc(Bbe);function cc(e){return e&&e.__esModule?e:{default:e}}function $be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fbe(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)}function Gb(e){return e&&e.props||{}}function Of(e){if(!e)return[];var t=(0,Hbe.default)(),r=t.isFragment&&typeof t.isFragment=="function",i=Array.isArray(e.rendered)?(0,wU.default)(e.rendered,1):[e.rendered];return r?(0,wU.default)(i.map(function(n){return t.isFragment(n)?Of(n):n}),1):i}function jbe(e,t){var r=Gb(e).className||"";return r=String(r).replace(/\s/g," "),(0,Lbe.default)(t)?t.test(r):(" "+String(r)+" ").indexOf(" "+String(t)+" ")>-1}function zO(e,t){e&&t(e),Of(e).forEach(function(r){return zO(r,t)})}function VO(e,t){var r=[];return zO(e,function(i){t(i)&&r.push(i)}),r}function Ube(e,t){var r=VO(e,function(i){return i.rendered?Of(i).indexOf(t)!==-1:!1});return r[0]||null}function Gbe(e,t){return e.filter(function(r){return VO(r,t).length!==0})}function AU(e,t){for(var r=[t],i=[],n=function(c){return e===c};r.length;){var o=r.pop(),a=Of(o);if(o===e)return Gbe(i,n);i.push(o),a.length===0&&i.pop(),r.push.apply(r,Fbe(a))}return null}function zbe(e,t){return(AU(e,t)||[]).reverse()}function Vbe(e,t){return Gb(e).id===t}var Wbe={};function Ybe(e){return typeof e<"u"?e:Wbe}function qbe(e){return(0,Pbe.default)(e).reduce(function(t,r){var i=Abe(r,2),n=i[0],o=i[1];return(0,kbe.default)({},t,$be({},n,Ybe(o)))},{})}function Xbe(e,t){return(0,xbe.default)(Gb(e),qbe(t))}function Kbe(e){return typeof e=="string"?String(e||""):e&&e.textContent||""}function WO(e,t){var r=t.getCustom,i=t.handleHostNodes,n=t.recurse,o=t.nullRenderReturnsNull,a=o===void 0?!1:o;return e==null?"":typeof e=="string"||typeof e=="number"?String(e):r&&e.type&&typeof e.type=="function"?r(e):i&&e.nodeType==="host"?i(e):e.rendered==null&&a?null:Of(e).map(n).join("")}function OU(e){return WO(e,{recurse:OU,getCustom:function(){function t(r){var i=r.type;return"<"+String(i.displayName||(0,Rbe.default)(i))+" />"}return t}()})}function kU(e,t){return WO(e,{recurse:function(){function r(i){return kU(i,t)}return r}(),handleHostNodes:function(){function r(i){var n=[].concat(t.nodeToHostNode(i,!0));return n.map(Kbe).join("")}return r}()})}function Zbe(e){return e==null?null:e.outerHTML.replace(/\sdata-(reactid|reactroot)+="([^"]*)+"/g,"")}function IU(e,t){return WO(e,{recurse:function(){function r(i){return IU(i,t)}return r}(),handleHostNodes:function(){function r(i){var n=[].concat(t.nodeToHostNode(i,!0));return n.map(Zbe).join("")}return r}(),nullRenderReturnsNull:!0})}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shallowEqual=e.ITERATOR_SYMBOL=void 0;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},r=function(){function Q(he,we){var Ie=[],$e=!0,Ge=!1,Xe=void 0;try{for(var Qe=he[Symbol.iterator](),ot;!($e=(ot=Qe.next()).done)&&(Ie.push(ot.value),!(we&&Ie.length===we));$e=!0);}catch(Ot){Ge=!0,Xe=Ot}finally{try{!$e&&Qe.return&&Qe.return()}finally{if(Ge)throw Xe}}return Ie}return function(he,we){if(Array.isArray(he))return he;if(Symbol.iterator in Object(he))return Q(he,we);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.getAdapter=j,e.makeOptions=K,e.isCustomComponent=oe,e.isCustomComponentElement=fe,e.propsOfNode=Ae,e.typeOfNode=de,e.nodeHasType=Z,e.nodeMatches=Pe,e.nodeEqual=Ue,e.containsChildrenSubArray=Ye,e.childrenToSimplifiedArray=We,e.isReactElementAlike=dt,e.withSetStateAllowed=Ze,e.AND=Et,e.displayNameOfNode=_t,e.sym=Rt,e.privateSet=Kr,e.cloneElement=Mt,e.spyMethod=ke;var i=X$;Object.defineProperty(e,"shallowEqual",{enumerable:!0,get:function(){function Q(){return B(i).default}return Q}()}),e.isEmptyValue=te,e.renderedDive=ae,e.loadCheerioRoot=ye;var n=Vu,o=B(n),a=Ev,s=B(a),c=UA,u=B(c),l=tF,h=B(l),f=VA,d=B(f),p=Ku,m=B(p),g=sp,v=B(g),_=E$,y=B(_),b=dF,T=B(b),S=Ds,k=lc,O=an,D=Bs,R=B(D),w=jb,L=B(w);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function A(Q,he,we){return he in Q?Object.defineProperty(Q,he,{value:we,enumerable:!0,configurable:!0,writable:!0}):Q[he]=we,Q}function M(Q,he){var we={};for(var Ie in Q)he.indexOf(Ie)>=0||Object.prototype.hasOwnProperty.call(Q,Ie)&&(we[Ie]=Q[Ie]);return we}e.ITERATOR_SYMBOL=typeof Symbol=="function"&&Symbol.iterator;function j(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn("getAdapter from Utils is deprecated; please use ./getAdapter instead"),(0,R.default)(Q)}function W(Q,he){if(Q&&he&&Q!==he)throw new TypeError("If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)")}function K(Q){var he=(0,k.get)(),we=he.attachTo,Ie=he.hydrateIn,$e=M(he,["attachTo","hydrateIn"]);W(we,Ie);var Ge=Q.attachTo,Xe=Q.hydrateIn;W(Ge,Xe);var Qe=Xe||Ie||we||Ge||void 0,ot=Xe||Ie||void 0,Ot=(0,o.default)({},Qe&&{attachTo:Qe},ot&&{hydrateIn:ot});return(0,o.default)({},$e,Q,Ot)}function oe(Q,he){return(0,L.default)(he),he.isCustomComponent?!!he.isCustomComponent(Q):typeof Q=="function"}function fe(Q,he){return he.isCustomComponentElement?!!he.isCustomComponentElement(Q):!!Q&&he.isValidElement(Q)&&typeof Q.type=="function"}function Ae(Q){return(0,h.default)(Q&&Q.props||{}).filter(function(he){var we=r(he,2),Ie=we[1];return typeof Ie<"u"}).reduce(function(he,we){var Ie=r(we,2),$e=Ie[0],Ge=Ie[1];return(0,o.default)(he,A({},$e,Ge))},{})}function de(Q){return Q?Q.type:null}function Z(Q,he){if(!he||!Q)return!1;var we=(0,R.default)();if(we.displayNameOfNode){var Ie=we.displayNameOfNode(Q);return Ie===he}return Q.type?typeof Q.type=="string"?Q.type===he:(typeof Q.type=="function"?(0,d.default)(Q.type)===he:Q.type.name===he)||Q.type.displayName===he:!1}function ne(Q,he,we,Ie){var $e=Ie?Pe:Ue;if(Q===he)return!0;if(!Array.isArray(Q)&&!Array.isArray(he))return $e(Q,he,we);var Ge=(0,v.default)(Q,1/0),Xe=(0,v.default)(he,1/0);if(Ge.length!==Xe.length)return!1;if(Ge.length===0&&Xe.length===0)return!0;for(var Qe=0;Qe<Ge.length;Qe+=1)if(!$e(Ge[Qe],Xe[Qe],we))return!1;return!0}function ue(Q,he,we){return ne(Q,he,we,!0)}function Oe(Q,he,we){return ne(Q,he,we,!1)}function Ce(Q,he){var we=r(he,2),Ie=we[0],$e=we[1],Ge=$e==null?{}:A({},Ie,$e);return(0,o.default)({},Q,Ge)}function je(Q,he,we,Ie){if(Q===he)return!0;if(!Q||!he||Q.type!==he.type)return!1;var $e=Ae(Q),Ge=Ae(he);Ie&&($e=(0,h.default)($e).reduce(Ce,{}),Ge=(0,h.default)(Ge).reduce(Ce,{}));for(var Xe=Object.keys($e),Qe=0;Qe<Xe.length;Qe+=1){var ot=Xe[Qe];if(ot!=="children")if(ot in Ge){if(Ge[ot]!==$e[ot])if(t(Ge[ot])===t($e[ot])&&t($e[ot])==="object"){if(!(0,s.default)($e[ot],Ge[ot]))return!1}else return!1}else return!1}var Ot="children"in $e,ft="children"in Ge,sr=Ie?ue:Oe;if((Ot||ft)&&!sr(We($e.children,Ie),We(Ge.children,Ie),we))return!1;if(!vt(Q)){var H=Object.keys(Ge);return we(Xe.length-Ot,H.length-ft)}return!1}function Pe(Q,he){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.default;return je(Q,he,we,!0)}function Ue(Q,he){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.default;return je(Q,he,we,!1)}function Ye(Q,he,we){var Ie=(0,O.childrenOfNode)(he),$e=function(Xe,Qe){return xe(Q,Ie.slice(Qe,Qe+we.length),we)};return Ie.some($e)}function xe(Q,he,we){return he.length===we.length&&he.every(function(Ie,$e){return Q(Ie,we[$e])})}function qe(Q){var he=[],we=function($e){$e===null||$e===!1||typeof $e>"u"||he.push($e)};return Array.isArray(Q)?Q.forEach(we):we(Q),he}function We(Q){for(var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,we=qe(Q),Ie=[],$e=0;$e<we.length;$e+=1){var Ge=we[$e],Xe=Ie.pop();typeof Xe>"u"?Ie.push(Ge):vt(Ge)&&vt(Xe)?Ie.push(Xe+Ge):(Ie.push(Xe),Ie.push(Ge))}return he?Ie.map(function(Qe){return typeof Qe=="string"?(0,y.default)(Qe):Qe}):Ie}function vt(Q){return typeof Q=="string"||typeof Q=="number"}function dt(Q,he){return he.isValidElement(Q)||vt(Q)||Array.isArray(Q)}function Ze(Q){var he=!1;typeof globalThis.document>"u"&&(he=!0,globalThis.document={}),Q(),he&&(globalThis.document=void 0,delete globalThis.document)}function Et(Q){var he=Q.slice().reverse();return function(we){return he.every(function(Ie){return Ie(we)})}}function _t(Q){if(!Q)return null;var he=Q.type;return he?he.displayName||(typeof he=="function"?(0,d.default)(he):he.name||he):null}function Rt(Q){return typeof Symbol=="function"?Symbol.for("enzyme."+String(Q)):Q}function Kr(Q,he,we){Object.defineProperty(Q,he,{value:we,enumerable:!1,writable:!0})}function Mt(Q,he,we){return Q.createElement(he.type,(0,o.default)({},he.props,we))}function ke(Q,he){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},Ie=void 0,$e=Q[he],Ge=(0,m.default)(Q,he),Xe=void 0;return Ge&&(Xe=Object.getOwnPropertyDescriptor(Q,he)),Object.defineProperty(Q,he,{configurable:!0,enumerable:!Xe||!!Xe.enumerable,value:we($e)||function(){function Qe(){for(var ot=arguments.length,Ot=Array(ot),ft=0;ft<ot;ft++)Ot[ft]=arguments[ft];var sr=$e.apply(this,Ot);return Ie=sr,sr}return Qe}()}),{restore:function(){function Qe(){Ge?Xe?Object.defineProperty(Q,he,Xe):Q[he]=$e:delete Q[he]}return Qe}(),getLastReturnValue:function(){function Qe(){return Ie}return Qe}()}}function te(Q){return Q===null||Q===!1}function ae(Q){return te(Q)?!0:[].concat(Q).every(function(he){if(he){var we=he.rendered;return te(we)||ae(we)}return te(he)})}function ye(Q){return Q?(0,S.isHtml)(Q)?T.default.load("")(Q):T.default.load(Q,null,!1).root():T.default.root()}})(lp);var Hs={},Qbe=1/0,Jbe="[object Symbol]",CU=/[&<>"'`]/g,e_e=RegExp(CU.source),t_e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},r_e=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,n_e=typeof self=="object"&&self&&self.Object===Object&&self,i_e=r_e||n_e||Function("return this")();function o_e(e){return function(t){return e?.[t]}}var a_e=o_e(t_e),s_e=Object.prototype,l_e=s_e.toString,PU=i_e.Symbol,DU=PU?PU.prototype:void 0,xU=DU?DU.toString:void 0;function c_e(e){if(typeof e=="string")return e;if(f_e(e))return xU?xU.call(e):"";var t=e+"";return t=="0"&&1/e==-Qbe?"-0":t}function u_e(e){return!!e&&typeof e=="object"}function f_e(e){return typeof e=="symbol"||u_e(e)&&l_e.call(e)==Jbe}function h_e(e){return e==null?"":c_e(e)}function d_e(e){return e=h_e(e),e&&e_e.test(e)?e.replace(CU,a_e):e}var p_e=d_e,m_e=String.prototype.valueOf,g_e=function(t){try{return m_e.call(t),!0}catch{return!1}},v_e=Object.prototype.toString,y_e="[object String]",b_e=ap(),NU=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:b_e?g_e(t):v_e.call(t)===y_e},__e=Number.prototype.toString,T_e=function(t){try{return __e.call(t),!0}catch{return!1}},E_e=Object.prototype.toString,S_e="[object Number]",w_e=ap(),A_e=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:w_e?T_e(t):E_e.call(t)===S_e},RU=qn,O_e=RU("Boolean.prototype.toString"),k_e=RU("Object.prototype.toString"),I_e=function(t){try{return O_e(t),!0}catch{return!1}},C_e="[object Boolean]",P_e=ap(),D_e=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:P_e&&Symbol.toStringTag in t?I_e(t):k_e(t)===C_e};Object.defineProperty(Hs,"__esModule",{value:!0});var MU=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Hs.typeName=HU,Hs.spaces=$U,Hs.indent=FU,Hs.debugNode=qO,Hs.debugNodes=Z_e;var x_e=p_e,N_e=Va(x_e),R_e=VA,LU=Va(R_e),M_e=NU,L_e=Va(M_e),B_e=A_e,H_e=Va(B_e),$_e=fA,F_e=Va($_e),j_e=D_e,U_e=Va(j_e),G_e=oH,kf=Va(G_e),z_e=Ku,If=Va(z_e),BU=an,V_e=Bs,YO=Va(V_e);function Va(e){return e&&e.__esModule?e:{default:e}}var W_e=Function.bind.call(Function.call,Boolean.prototype.valueOf);function HU(e){var t=(0,YO.default)();return t.displayNameOfNode?(0,YO.default)().displayNameOfNode(e)||"Component":typeof e.type=="function"?e.type.displayName||(0,LU.default)(e.type)||"Component":e.type}function $U(e){return Array(e+1).join(" ")}function FU(e,t){return t.split(`
`).map(function(r){return""+String($U(e))+String(r)}).join(`
`)}function Y_e(e,t){return(0,L_e.default)(e)?(0,kf.default)(String(e),{quoteStyle:"double"}):(0,H_e.default)(e)?"{"+String((0,kf.default)(Number(e)))+"}":(0,U_e.default)(e)?"{"+String((0,kf.default)(W_e(e)))+"}":(0,F_e.default)(e)?"{"+String((0,kf.default)(e))+"}":(typeof e>"u"?"undefined":MU(e))==="object"?t.verbose?"{"+String((0,kf.default)(e))+"}":"{{...}}":"{["+(typeof e>"u"?"undefined":MU(e))+"]}"}function q_e(e,t){var r=(0,BU.propsOfNode)(e),i=Object.keys(r).filter(function(n){return n!=="children"});return i.map(function(n){return String(n)+"="+String(Y_e(r[n],t))}).join(" ")}function X_e(e,t){return e.length?`
`+String(e.map(function(r){return FU(t,r)}).join(`
`))+`
`:""}function K_e(e){return(0,If.default)(e,"nodeType")&&typeof e.nodeType=="string"&&(0,If.default)(e,"type")&&(0,If.default)(e,"key")&&(0,If.default)(e,"ref")&&(0,If.default)(e,"instance")&&(0,If.default)(e,"rendered")}function qO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"||typeof e=="number")return(0,N_e.default)(e);if(typeof e=="function"){var i=(0,LU.default)(e);return"[function"+(i?" "+String(i):"")+"]"}if(!e)return"";var n=(0,YO.default)();if(!n.isValidElement(e)&&!K_e(e))return"{"+String((0,kf.default)(e))+"}";var o=(0,BU.childrenOfNode)(e).map(function(f){return qO(f,t,r)}).filter(Boolean),a=HU(e),s=r.ignoreProps?"":q_e(e,r),c=s?" ":"",u=o.length?">":" ",l=X_e(o,t),h=o.length?"</"+String(a)+">":"/>";return"<"+String(a)+c+String(s)+u+String(l)+h}function Z_e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.map(function(r){return qO(r,void 0,t)}).join(`


`)}var Cf={},Pf={},XO={};Object.defineProperty(XO,"__esModule",{value:!0});var jU=function(t){return JSON.stringify(t)},Q_e=function(t){var r=t.body,i=[],n=!0,o=!1,a=void 0;try{for(var s=r[Symbol.iterator](),c;!(n=(c=s.next()).done);n=!0){var u=c.value,l=void 0;if(u.type==="universalSelector")l="*";else if(u.type==="typeSelector")l=u.name;else if(u.type==="idSelector")l="#"+u.name;else if(u.type==="classSelector")l="."+u.name;else if(u.type==="attributePresenceSelector")l="["+u.name+"]";else if(u.type==="attributeValueSelector")l="["+u.name+u.operator+jU(u.value)+"]";else if(u.type==="pseudoClassSelector")l=":"+u.name,u.parameters.length&&(l+="("+u.parameters.map(jU).join(", ")+")");else if(u.type==="pseudoElementSelector")l="::"+u.name;else throw new Error("Unknown token.");i.push(l)}}catch(h){o=!0,a=h}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return i.join("")};XO.default=function(){var e=function(r){var i=[],n=!0,o=!1,a=void 0;try{for(var s=r[Symbol.iterator](),c;!(n=(c=s.next()).done);n=!0){var u=c.value;if(u.type==="selector")i.push(Q_e(u));else if(u.type==="descendantCombinator")i.push(" ");else if(u.type==="childCombinator")i.push(" > ");else if(u.type==="adjacentSiblingCombinator")i.push(" + ");else if(u.type==="generalSiblingCombinator")i.push(" ~ ");else throw new Error("Unknown token.")}}catch(l){o=!0,a=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return i.join("")};return{generate:e}};var KO={},UU={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.nearley=r()})(De,function(){function t(u,l,h){return this.id=++t.highestId,this.name=u,this.symbols=l,this.postprocess=h,this}t.highestId=0,t.prototype.toString=function(u){var l=typeof u>"u"?this.symbols.map(c).join(" "):this.symbols.slice(0,u).map(c).join(" ")+" \u25CF "+this.symbols.slice(u).map(c).join(" ");return this.name+" \u2192 "+l};function r(u,l,h,f){this.rule=u,this.dot=l,this.reference=h,this.data=[],this.wantedBy=f,this.isComplete=this.dot===u.symbols.length}r.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},r.prototype.nextState=function(u){var l=new r(this.rule,this.dot+1,this.reference,this.wantedBy);return l.left=this,l.right=u,l.isComplete&&(l.data=l.build(),l.right=void 0),l},r.prototype.build=function(){var u=[],l=this;do u.push(l.right.data),l=l.left;while(l.left);return u.reverse(),u},r.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,a.fail))};function i(u,l){this.grammar=u,this.index=l,this.states=[],this.wants={},this.scannable=[],this.completed={}}i.prototype.process=function(u){for(var l=this.states,h=this.wants,f=this.completed,d=0;d<l.length;d++){var p=l[d];if(p.isComplete){if(p.finish(),p.data!==a.fail){for(var m=p.wantedBy,g=m.length;g--;){var v=m[g];this.complete(v,p)}if(p.reference===this.index){var _=p.rule.name;(this.completed[_]=this.completed[_]||[]).push(p)}}}else{var _=p.rule.symbols[p.dot];if(typeof _!="string"){this.scannable.push(p);continue}if(h[_]){if(h[_].push(p),f.hasOwnProperty(_))for(var y=f[_],g=0;g<y.length;g++){var b=y[g];this.complete(p,b)}}else h[_]=[p],this.predict(_)}}},i.prototype.predict=function(u){for(var l=this.grammar.byName[u]||[],h=0;h<l.length;h++){var f=l[h],d=this.wants[u],p=new r(f,0,this.index,d);this.states.push(p)}},i.prototype.complete=function(u,l){var h=u.nextState(l);this.states.push(h)};function n(u,l){this.rules=u,this.start=l||this.rules[0].name;var h=this.byName={};this.rules.forEach(function(f){h.hasOwnProperty(f.name)||(h[f.name]=[]),h[f.name].push(f)})}n.fromCompiled=function(f,l){var h=f.Lexer;f.ParserStart&&(l=f.ParserStart,f=f.ParserRules);var f=f.map(function(p){return new t(p.name,p.symbols,p.postprocess)}),d=new n(f,l);return d.lexer=h,d};function o(){this.reset("")}o.prototype.reset=function(u,l){this.buffer=u,this.index=0,this.line=l?l.line:1,this.lastLineBreak=l?-l.col:0},o.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},o.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},o.prototype.formatError=function(u,l){var h=this.buffer;if(typeof h=="string"){var f=h.split(`
`).slice(Math.max(0,this.line-5),this.line),d=h.indexOf(`
`,this.index);d===-1&&(d=h.length);var p=this.index-this.lastLineBreak,m=String(this.line).length;return l+=" at line "+this.line+" col "+p+`:

`,l+=f.map(function(v,_){return g(this.line-f.length+_+1,m)+" "+v},this).join(`
`),l+=`
`+g("",m+p)+`^
`,l}else return l+" at index "+(this.index-1);function g(v,_){var y=String(v);return Array(_-y.length+1).join(" ")+y}};function a(u,l,h){if(u instanceof n)var f=u,h=l;else var f=n.fromCompiled(u,l);this.grammar=f,this.options={keepHistory:!1,lexer:f.lexer||new o};for(var d in h||{})this.options[d]=h[d];this.lexer=this.options.lexer,this.lexerState=void 0;var p=new i(f,0);this.table=[p],p.wants[f.start]=[],p.predict(f.start),p.process(),this.current=0}a.fail={},a.prototype.feed=function(u){var l=this.lexer;l.reset(u,this.lexerState);for(var h;;){try{if(h=l.next(),!h)break}catch(k){var m=new i(this.grammar,this.current+1);this.table.push(m);var f=new Error(this.reportLexerError(k));throw f.offset=this.current,f.token=k.token,f}var d=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var p=this.current+1,m=new i(this.grammar,p);this.table.push(m);for(var g=h.text!==void 0?h.text:h.value,v=l.constructor===o?h.value:h,_=d.scannable,y=_.length;y--;){var b=_[y],T=b.rule.symbols[b.dot];if(T.test?T.test(v):T.type?T.type===h.type:T.literal===g){var S=b.nextState({data:v,token:h,isToken:!0,reference:p-1});m.states.push(S)}}if(m.process(),m.states.length===0){var f=new Error(this.reportError(h));throw f.offset=this.current,f.token=h,f}this.options.keepHistory&&(d.lexerState=l.save()),this.current++}return d&&(this.lexerState=l.save()),this.results=this.finish(),this},a.prototype.reportLexerError=function(u){var l,h,f=u.token;return f?(l="input "+JSON.stringify(f.text[0])+" (lexer error)",h=this.lexer.formatError(f,"Syntax error")):(l="input (lexer error)",h=u.message),this.reportErrorCommon(h,l)},a.prototype.reportError=function(u){var l=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),h=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(h,l)},a.prototype.reportErrorCommon=function(u,l){var h=[];h.push(u);var f=this.table.length-2,d=this.table[f],p=d.states.filter(function(g){var v=g.rule.symbols[g.dot];return v&&typeof v!="string"});if(p.length===0)h.push("Unexpected "+l+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(d.states,h);else{h.push("Unexpected "+l+`. Instead, I was expecting to see one of the following:
`);var m=p.map(function(g){return this.buildFirstStateStack(g,[])||[g]},this);m.forEach(function(g){var v=g[0],_=v.rule.symbols[v.dot],y=this.getSymbolDisplay(_);h.push("A "+y+" based on:"),this.displayStateStack(g,h)},this)}return h.push(""),h.join(`
`)},a.prototype.displayStateStack=function(u,l){for(var h,f=0,d=0;d<u.length;d++){var p=u[d],m=p.rule.toString(p.dot);m===h?f++:(f>0&&l.push("    ^ "+f+" more lines identical to this"),f=0,l.push("    "+m)),h=m}},a.prototype.getSymbolDisplay=function(u){return s(u)},a.prototype.buildFirstStateStack=function(u,l){if(l.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var h=u.wantedBy[0],f=[u].concat(l),d=this.buildFirstStateStack(h,f);return d===null?null:[u].concat(d)},a.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},a.prototype.restore=function(u){var l=u.index;this.current=l,this.table[l]=u,this.table.splice(l+1),this.lexerState=u.lexerState,this.results=this.finish()},a.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},a.prototype.finish=function(){var u=[],l=this.grammar.start,h=this.table[this.table.length-1];return h.states.forEach(function(f){f.rule.name===l&&f.dot===f.rule.symbols.length&&f.reference===0&&f.data!==a.fail&&u.push(f)}),u.map(function(f){return f.data})};function s(u){var l=typeof u;if(l==="string")return u;if(l==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function c(u){var l=typeof u;if(l==="string")return u;if(l==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:a,Grammar:n,Rule:t}})})(UU);var J_e=UU.exports,GU={exports:{}},e0e=1/0,t0e=9007199254740991,r0e="[object Arguments]",n0e="[object Function]",i0e="[object GeneratorFunction]",o0e=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,a0e=typeof self=="object"&&self&&self.Object===Object&&self,s0e=o0e||a0e||Function("return this")();function l0e(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var ZO=Object.prototype,c0e=ZO.hasOwnProperty,zU=ZO.toString,VU=s0e.Symbol,u0e=ZO.propertyIsEnumerable,WU=VU?VU.isConcatSpreadable:void 0;function YU(e,t,r,i,n){var o=-1,a=e.length;for(r||(r=f0e),n||(n=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?YU(s,t-1,r,i,n):l0e(n,s):i||(n[n.length]=s)}return n}function f0e(e){return p0e(e)||d0e(e)||!!(WU&&e&&e[WU])}function h0e(e){var t=e?e.length:0;return t?YU(e,e0e):[]}function d0e(e){return g0e(e)&&c0e.call(e,"callee")&&(!u0e.call(e,"callee")||zU.call(e)==r0e)}var p0e=Array.isArray;function m0e(e){return e!=null&&y0e(e.length)&&!v0e(e)}function g0e(e){return _0e(e)&&m0e(e)}function v0e(e){var t=b0e(e)?zU.call(e):"";return t==n0e||t==i0e}function y0e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=t0e}function b0e(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function _0e(e){return!!e&&typeof e=="object"}var T0e=h0e;(function(e){(function(){function t(h){return h[0]}var r=T0e,i=function(f,d){return function(p){return p[f].concat([p[d]])}},n=function(f){return f=f.filter(function(d){return d!==null}),r(f)},o={" ":"descendantCombinator","+":"adjacentSiblingCombinator",">":"childCombinator","~":"generalSiblingCombinator"},a=function(f){return(Array.isArray(f[0])?f[0]:[f[0]]).concat({type:o[f[2]]}).concat(f[4])},s=function(f,d,p){var m=r(f).join(""),g=parseFloat(m);return isNaN(g)?p:g},c=function(f,d,p){return f[0]==="true"?!0:f[0]==="false"?!1:p},u=function(f,d,p){if(f[0]==="NaN")return NaN;if(f[0]!=="undefined")return f[0]==="null"?null:p},l={Lexer:void 0,ParserRules:[{name:"combinator",symbols:["selector"]},{name:"combinator",symbols:["combinator","_",/[>+~ ]/,"_","selector"],postprocess:a},{name:"selector",symbols:["selectorBody"],postprocess:function(f){return{type:"selector",body:f[0]}}},{name:"selectorBody$ebnf$1",symbols:["typeSelector"],postprocess:t},{name:"selectorBody$ebnf$1",symbols:[],postprocess:function(f){return null}},{name:"selectorBody$ebnf$2",symbols:[]},{name:"selectorBody$ebnf$2",symbols:["selectorBody$ebnf$2","simpleSelector"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"selectorBody",symbols:["selectorBody$ebnf$1","selectorBody$ebnf$2"],postprocess:function(f,d,p){var m=n(f);return m.length?m:p}},{name:"selectorBody$ebnf$3",symbols:[]},{name:"selectorBody$ebnf$3",symbols:["selectorBody$ebnf$3","simpleSelector"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"selectorBody",symbols:["universalSelector","selectorBody$ebnf$3"],postprocess:n},{name:"simpleSelector",symbols:["idSelector"]},{name:"simpleSelector",symbols:["classSelector"]},{name:"simpleSelector",symbols:["attributeValueSelector"]},{name:"simpleSelector",symbols:["attributePresenceSelector"]},{name:"simpleSelector",symbols:["pseudoClassSelector"]},{name:"simpleSelector",symbols:["pseudoElementSelector"]},{name:"typeSelector",symbols:["attributeName"],postprocess:function(f){return{type:"typeSelector",name:f[0]}}},{name:"className$ebnf$1",symbols:[{literal:"-"}],postprocess:t},{name:"className$ebnf$1",symbols:[],postprocess:function(f){return null}},{name:"className$ebnf$2",symbols:[]},{name:"className$ebnf$2",symbols:["className$ebnf$2",/[_a-zA-Z0-9-]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"className",symbols:["className$ebnf$1",/[_a-zA-Z]/,"className$ebnf$2"],postprocess:function(f){return(f[0]||"")+f[1]+f[2].join("")}},{name:"attributeName$ebnf$1",symbols:[]},{name:"attributeName$ebnf$1",symbols:["attributeName$ebnf$1",/[_a-zA-Z()0-9-]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"attributeName",symbols:[/[_a-z()A-Z]/,"attributeName$ebnf$1"],postprocess:function(f){return f[0]+f[1].join("")}},{name:"classSelector",symbols:[{literal:"."},"className"],postprocess:function(f){return{type:"classSelector",name:f[1]}}},{name:"idSelector",symbols:[{literal:"#"},"attributeName"],postprocess:function(f){return{type:"idSelector",name:f[1]}}},{name:"universalSelector",symbols:[{literal:"*"}],postprocess:function(f){return{type:"universalSelector"}}},{name:"attributePresenceSelector",symbols:[{literal:"["},"attributeName",{literal:"]"}],postprocess:function(f){return{type:"attributePresenceSelector",name:f[1]}}},{name:"attributeOperator",symbols:[{literal:"="}]},{name:"attributeOperator$string$1",symbols:[{literal:"~"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$1"]},{name:"attributeOperator$string$2",symbols:[{literal:"|"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$2"]},{name:"attributeOperator$string$3",symbols:[{literal:"^"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$3"]},{name:"attributeOperator$string$4",symbols:[{literal:"$"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$4"]},{name:"attributeOperator$string$5",symbols:[{literal:"*"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$5"]},{name:"attributeValueSelector",symbols:[{literal:"["},"attributeName","attributeOperator","attributeValue",{literal:"]"}],postprocess:function(f){return{type:"attributeValueSelector",name:f[1],value:f[3],operator:f[2][0]}}},{name:"attributeValue",symbols:["falsyPrimitiveStrings"],postprocess:t},{name:"attributeValue",symbols:["numericValue"],postprocess:t},{name:"attributeValue",symbols:["sqstring"],postprocess:t},{name:"attributeValue",symbols:["dqstring"],postprocess:t},{name:"falsyPrimitiveStrings$string$1",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$1"],postprocess:c},{name:"falsyPrimitiveStrings$string$2",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$2"],postprocess:c},{name:"falsyPrimitiveStrings$string$3",symbols:[{literal:"N"},{literal:"a"},{literal:"N"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$3"],postprocess:u},{name:"falsyPrimitiveStrings$string$4",symbols:[{literal:"n"},{literal:"u"},{literal:"l"},{literal:"l"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$4"],postprocess:u},{name:"falsyPrimitiveStrings$string$5",symbols:[{literal:"u"},{literal:"n"},{literal:"d"},{literal:"e"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"e"},{literal:"d"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$5"],postprocess:u},{name:"numericValue",symbols:["int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int"],postprocess:s},{name:"numericValue",symbols:["int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int"],postprocess:s},{name:"numericValue$string$1",symbols:[{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(f){return f.join("")}},{name:"numericValue",symbols:["numericValue$string$1"],postprocess:s},{name:"numericValue$string$2",symbols:[{literal:"+"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(f){return f.join("")}},{name:"numericValue",symbols:["numericValue$string$2"],postprocess:s},{name:"numericValue$string$3",symbols:[{literal:"-"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(f){return f.join("")}},{name:"numericValue",symbols:["numericValue$string$3"],postprocess:s},{name:"int$ebnf$1",symbols:[/[0-9]/]},{name:"int$ebnf$1",symbols:["int$ebnf$1",/[0-9]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"int",symbols:["int$ebnf$1"]},{name:"classParameters",symbols:[]},{name:"classParameters",symbols:["classParameter"]},{name:"classParameters",symbols:["classParameters",{literal:","},"_","classParameter"],postprocess:i(0,3)},{name:"classParameter$ebnf$1",symbols:[/[^()"', ]/]},{name:"classParameter$ebnf$1",symbols:["classParameter$ebnf$1",/[^()"', ]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"classParameter",symbols:["classParameter$ebnf$1"],postprocess:function(f){return f[0].join("")}},{name:"classParameter",symbols:["sqstring"],postprocess:t},{name:"classParameter",symbols:["dqstring"],postprocess:t},{name:"pseudoElementSelector$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:function(f){return f.join("")}},{name:"pseudoElementSelector",symbols:["pseudoElementSelector$string$1","pseudoClassSelectorName"],postprocess:function(f){return{type:"pseudoElementSelector",name:f[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName"],postprocess:function(f){return{type:"pseudoClassSelector",name:f[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName",{literal:"("},"classParameters",{literal:")"}],postprocess:function(f){return{type:"pseudoClassSelector",name:f[1],parameters:f[3]}}},{name:"pseudoClassSelectorName$ebnf$1",symbols:[/[a-zA-Z0-9-_]/]},{name:"pseudoClassSelectorName$ebnf$1",symbols:["pseudoClassSelectorName$ebnf$1",/[a-zA-Z0-9-_]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"pseudoClassSelectorName",symbols:[/[a-zA-Z]/,"pseudoClassSelectorName$ebnf$1"],postprocess:function(f){return f[0]+f[1].join("")}},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(f){return f[1].join("")}},{name:"dstrchar",symbols:[/[^"]/],postprocess:t},{name:"dstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(f){return f.join("")}},{name:"dstrchar",symbols:["dstrchar$string$1"],postprocess:function(f){return'"'}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(f){return f[1].join("")}},{name:"sstrchar",symbols:[/[^']/],postprocess:t},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(f){return f.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(f){return"'"}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[ ]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(f){return null}}],ParserStart:"combinator"};e.exports=l})()})(GU);var E0e=GU.exports;Object.defineProperty(KO,"__esModule",{value:!0});var S0e=J_e,w0e=E0e,qU=A0e(w0e);function A0e(e){return e&&e.__esModule?e:{default:e}}KO.default=function(){var e=function(r){var i=new S0e.Parser(qU.default.ParserRules,qU.default.ParserStart),n=i.feed(r).results;if(n.length===0)throw new Error("Found no parsings.");if(n.length>1)throw new Error("Ambiguous results.");return n[0]};return{parse:e}},Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.createParser=Pf.createGenerator=void 0;var O0e=XO,k0e=XU(O0e),I0e=KO,C0e=XU(I0e);function XU(e){return e&&e.__esModule?e:{default:e}}Pf.createGenerator=k0e.default,Pf.createParser=C0e.default;var P0e=qu,KU=qn,D0e=KU("Object.prototype.propertyIsEnumerable"),x0e=KU("Array.prototype.push"),ZU=function(t){var r=P0e(t),i=[];for(var n in r)D0e(r,n)&&x0e(i,r[n]);return i},N0e=ZU,QU=function(){return typeof Object.values=="function"?Object.values:N0e},R0e=QU,M0e=Ln,L0e=function(){var t=R0e();return M0e(Object,{values:t},{values:function(){return Object.values!==t}}),t},B0e=Ln,H0e=$a,$0e=ZU,JU=QU,F0e=L0e,e4=H0e(JU(),Object);B0e(e4,{getPolyfill:JU,implementation:$0e,shim:F0e});var j0e=e4,U0e=UH,G0e=VH(),z0e=t$(),V0e=op,W0e=n$(),Y0e=hA,q0e=x$(),X0e=DH,K0e=M$,t4=MA(),Z0e=qn,Q0e=NU,r4=Object("a"),J0e=r4[0]!=="a"||!(0 in r4),eTe=Z0e("String.prototype.split"),n4=function(t){var r=K0e(this),i=J0e&&Q0e(r)?eTe(r,""):r,n=q0e(i);if(!Y0e(t))throw new TypeError("Array.prototype.filter callback must be a function");var o;arguments.length>1&&(o=arguments[1]);for(var a=U0e(r,0),s=0,c=0;s<n;){var u=t4(s),l=W0e(r,u);if(l){var h=V0e(r,u),f=X0e(G0e(t,o,[h,s,r]));f&&(z0e(a,t4(c),h),c+=1)}s+=1}return a},tTe=function(t){var r=!0,i=!0,n=!1;if(typeof t=="function"){try{t.call("f",function(o,a,s){typeof s!="object"&&(r=!1)}),t.call([null],function(){"use strict";i=typeof this=="string"},"x")}catch{n=!0}return!n&&r&&i}return!1},rTe=tTe,nTe=n4,i4=function(){var t=Array.prototype.filter;return rTe(t)?t:nTe},QO,o4;function iTe(){if(o4)return QO;o4=1;var e=Ln,t=i4;return QO=function(){var i=t();return e(Array.prototype,{filter:i},{filter:function(){return Array.prototype.filter!==i}}),i},QO}var oTe=Ln,aTe=qu,sTe=$a,lTe=qn,cTe=n4,a4=i4,uTe=sTe.apply(a4()),fTe=iTe(),hTe=lTe("Array.prototype.slice"),s4=function(t,r){return aTe(t),uTe(t,hTe(arguments,1))};oTe(s4,{getPolyfill:a4,implementation:cTe,shim:fTe});var dTe=s4,pTe=qn,mTe=pTe("Array.prototype.push"),gTe=function(e,t){for(var r=[],i=0;i<e.length;i+=1)mTe(r,t(e[i],i));return r},vTe=[["HTMLElement","article"],["HTMLElement","section"],["HTMLBaseFontElement","basefont","HTMLBaseFontElementConstructor"],["HTMLPhraseElement","cite","HTMLElement"],["HTMLElement","noscript"],["HTMLBGSoundElement","bgsound","HTMLElement"],["HTMLPhraseElement","blink","HTMLElement"],["HTMLElement","multicol"],["HTMLNextIdElement","nextid","HTMLElement"],["HTMLElement","rb"],["HTMLElement","spacer"],["HTMLAnchorElement","a","HTMLElement"],["HTMLAreaElement","area","HTMLElement"],["HTMLAudioElement","audio","HTMLElement"],["HTMLBaseElement","base","HTMLElement"],["HTMLBodyElement","body","HTMLElement"],["HTMLBRElement","br","HTMLElement"],["HTMLButtonElement","button"],["HTMLCanvasElement","canvas"],["HTMLContentElement","content","HTMLElement"],["HTMLDataElement","data","HTMLElement"],["HTMLDataListElement","datalist"],["HTMLDialogElement","dialog","HTMLElement"],["HTMLDirectoryElement","dir"],["HTMLDivElement","div"],["HTMLDListElement","dl"],["HTMLEmbedElement","embed"],["HTMLFieldSetElement","fieldset"],["HTMLFontElement","font"],["HTMLFormElement","form"],["HTMLFrameElement","frame"],["HTMLFrameSetElement","frameset"],["HTMLHeadElement","head"],["HTMLHeadingElement","h1"],["HTMLHeadingElement","h2"],["HTMLHeadingElement","h3"],["HTMLHeadingElement","h4"],["HTMLHeadingElement","h5"],["HTMLHeadingElement","h6"],["HTMLHtmlElement","html"],["HTMLHRElement","hr"],["HTMLIFrameElement","iframe"],["HTMLImageElement","img"],["HTMLInputElement","input"],["HTMLIsIndexElement","index","HTMLElement"],["HTMLKeygenElement","keygen","HTMLBlockElement"],["HTMLLabelElement","label"],["HTMLLegendElement","legend"],["HTMLLIElement","li"],["HTMLLinkElement","link"],["HTMLElement","main"],["HTMLMapElement","map"],["HTMLMarqueeElement","marquee"],["HTMLMenuElement","menu"],["HTMLMetaElement","meta"],["HTMLMeterElement","meter","HTMLElement"],["HTMLModElement","del"],["HTMLModElement","ins"],["HTMLObjectElement","object"],["HTMLOListElement","ol"],["HTMLOptGroupElement","optgroup"],["HTMLOptionElement","option"],["HTMLOutputElement","output"],["HTMLParagraphElement","p"],["HTMLParamElement","param"],["HTMLPictureElement","picture","HTMLElement"],["HTMLPreElement","pre"],["HTMLProgressElement","progress","HTMLElement"],["HTMLQuoteElement","q","HTMLBlockquoteElement"],["HTMLQuoteElement","blockquote","HTMLBlockElement","HTMLBlockquoteElement"],["HTMLScriptElement","script"],["HTMLSelectElement","select"],["HTMLShadowElement","shadow","HTMLElement"],["HTMLSourceElement","source"],["HTMLSpanElement","span","HTMLElement"],["HTMLStyleElement","style"],["HTMLTableElement","table"],["HTMLTableCaptionElement","caption"],["HTMLTableCellElement","td","HTMLTableDataCellElement"],["HTMLTableCellElement","th","HTMLTableHeaderCellElement"],["HTMLTableRowElement","tr"],["HTMLTableColElement","col"],["HTMLTableColElement","colgroup"],["HTMLTableSectionElement","tbody"],["HTMLTableSectionElement","thead"],["HTMLTableSectionElement","tfoot"],["HTMLTemplateElement","template","HTMLElement"],["HTMLTextAreaElement","textarea"],["HTMLTimeElement","time","HTMLElement"],["HTMLTitleElement","title"],["HTMLTrackElement","track","HTMLElement"],["HTMLUListElement","ul"],["HTMLVideoElement","video"],["HTMLElement","abbr"],["HTMLElement","address"],["HTMLElement","aside"],["HTMLElement","b"],["HTMLElement","bdi"],["HTMLElement","bdo"],["HTMLElement","code"],["HTMLElement","dd"],["HTMLDetailsElement","details","HTMLElement"],["HTMLElement","dfn"],["HTMLElement","dt"],["HTMLElement","em"],["HTMLElement","figcaption"],["HTMLElement","figure"],["HTMLElement","footer"],["HTMLElement","header"],["HTMLElement","hgroup"],["HTMLElement","i"],["HTMLElement","kbd"],["HTMLElement","mark"],["HTMLElement","nav"],["HTMLElement","rp"],["HTMLElement","rt"],["HTMLElement","ruby"],["HTMLElement","s"],["HTMLElement","samp"],["HTMLSlotElement","slot","HTMLElement"],["HTMLElement","small"],["HTMLElement","strong"],["HTMLElement","summary"],["HTMLElement","u"],["HTMLElement","var"],["HTMLElement","wbr"]],yTe=function(t,r,i){if(typeof document<"u"&&typeof document.createElement=="function"){var n=document.createElement(t).constructor;if(n!==i)return n}},bTe=function(){var t=globalThis.HTMLUnknownElement;return{all:globalThis.HTMLElement,elements:gTe(vTe,function(r){for(var i=r[0],n=r[1],o,a,s=2;s<arguments.length&&!a;s+=1)o=r[s],a=o&&globalThis[o];var c=globalThis[i];return{constructor:yTe(n,a||c,t),constructorName:a?o:i,expectedConstructor:a||c,tag:n}}),unknown:t}},_Te=dTe,TTe=bTe,ETe=function(t){if(!t)return[];var r=TTe();return t===r.unknown?[]:t===r.all?r.elements:_Te(r.elements,function(i){return i.constructor===t})};Object.defineProperty(Cf,"__esModule",{value:!0});var l4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},STe=function(){function e(t,r){var i=[],n=!0,o=!1,a=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(i.push(c.value),!(r&&i.length===r));n=!0);}catch(u){o=!0,a=u}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return i}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Cf.buildPredicate=v4,Cf.reduceTreeBySelector=zb,Cf.reduceTreesBySelector=aEe;var wTe=Pf,ATe=j0e,OTe=Df(ATe),kTe=sp,JO=Df(kTe),ITe=UA,CTe=Df(ITe),PTe=Ku,DTe=Df(PTe),xTe=ETe,NTe=Df(xTe),ei=an,c4=lp,RTe=Bs,u4=Df(RTe);function Df(e){return e&&e.__esModule?e:{default:e}}function MTe(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)}var LTe=(0,wTe.createParser)(),BTe="childCombinator",HTe="adjacentSiblingCombinator",$Te="generalSiblingCombinator",FTe="descendantCombinator",f4="selector",jTe="typeSelector",UTe="classSelector",GTe="idSelector",zTe="universalSelector",h4="attributePresenceSelector",VTe="attributeValueSelector",WTe="pseudoClassSelector",YTe="pseudoElementSelector",d4="=",qTe="~=",XTe="|=",KTe="^=",ZTe="$=",QTe="*=";function p4(e){return[].concat(MTe(new Set(e)))}function ek(e,t){return p4(t.reduce(e,[]))}function m4(e){try{return LTe.parse(e)}catch{throw new Error("Failed to parse selector: "+String(e))}}function g4(e,t){var r=t.operator,i=t.value,n=t.name,o=(0,c4.propsOfNode)(e),a=Object.getOwnPropertyDescriptor(o,n);if(a&&a.get)return!1;var s=o[n];if(typeof s>"u")return!1;if(t.type===h4)return(0,DTe.default)(o,t.name);if((typeof s!="string"||typeof i!="string")&&r!==d4)return!1;switch(r){case d4:return(0,CTe.default)(s,i);case qTe:return s.split(" ").indexOf(i)!==-1;case XTe:return s===i||s.startsWith(String(i)+"-");case KTe:return i===""?!1:s.slice(0,i.length)===i;case ZTe:return i===""?!1:s.slice(-i.length)===i;case QTe:return i===""?!1:s.indexOf(i)!==-1;default:throw new Error('Enzyme::Selector: Unknown attribute selector operator "'+String(r)+'"')}}function JTe(e,t,r){var i=t.name,n=t.parameters;if(i==="not")return n.every(function(f){return zb(f,e).length===0});if(i==="empty")return(0,ei.treeFilter)(e,function(f){return f!==e}).length===0;if(i==="first-child"){var o=(0,ei.findParentNode)(r,e),a=o.rendered,s=STe(a,1),c=s[0];return c===e}if(i==="last-child"){var u=(0,ei.findParentNode)(r,e),l=u.rendered;return l[l.length-1]===e}if(i==="focus"){if(typeof document>"u")throw new Error('Enzyme::Selector does not support the ":focus" pseudo-element without a global `document`.');var h=(0,u4.default)();return document.activeElement&&h.nodeToHostNode(e)===document.activeElement}throw new TypeError('Enzyme::Selector does not support the "'+String(t.name)+'" pseudo-element or pseudo-class selectors.')}function eEe(e,t,r){if(e===null||typeof e=="string")return!1;switch(t.type){case zTe:return!0;case UTe:return(0,ei.hasClassName)(e,t.name);case jTe:return(0,c4.nodeHasType)(e,t.name);case GTe:return(0,ei.nodeHasId)(e,t.name);case h4:return g4(e,t);case VTe:return g4(e,t);case YTe:case WTe:return JTe(e,t,r);default:throw new Error("Unknown token type: "+String(t.type))}}function tk(e,t){return function(r){return e.body.every(function(i){return eEe(r,i,t)})}}function tEe(e){return e.some(function(t){return t.type!==f4})}function v4(e){if(typeof e=="string"){var t=m4(e);if(tEe(t))throw new TypeError("This method does not support complex CSS selectors");return tk(t[0])}var r=(0,u4.default)(),i=r.isValidElementType?r.isValidElementType(e):typeof e=="function";if(i)return function(o){return r.matchesElementType(o,e)};if((typeof e>"u"?"undefined":l4(e))==="object"){if(!Array.isArray(e)&&e!==null&&Object.keys(e).length>0){var n=(0,OTe.default)(e).some(function(o){return typeof o>"u"});if(n)throw new TypeError("Enzyme::Props can\u2019t have `undefined` values. Try using \u2018findWhere()\u2019 instead.");return function(o){return(0,ei.nodeMatchesObjectProps)(o,e)}}throw new TypeError("Enzyme::Selector does not support an array, null, or empty object as a selector")}throw new TypeError("Enzyme::Selector expects a string, object, or valid element type (Component Constructor)")}function rEe(e,t,r){return e.reduce(function(i,n){var o=(0,ei.findParentNode)(r,n);if(!o)return i;var a=(0,ei.childrenOfNode)(o),s=a.indexOf(n),c=a[s+1];return c&&t(c)&&i.push(c),i},[])}function nEe(e,t,r){return ek(function(i,n){var o=(0,ei.findParentNode)(r,n);if(!o)return i;var a=(0,ei.childrenOfNode)(o),s=a.indexOf(n),c=a.slice(s+1);return i.concat(c.filter(t))},e)}function iEe(e,t){return ek(function(r,i){return r.concat((0,ei.childrenOfNode)(i).filter(t))},e)}function oEe(e,t){return ek(function(r,i){return r.concat((0,ei.treeFilter)(i,t))},(0,JO.default)(e.map(ei.childrenOfNode)))}function zb(e,t){if(typeof e!="string"){var r=(0,NTe.default)(e);if(r.length>0)return(0,JO.default)(r.map(function(l){return zb(l.tag,t)}))}if(typeof e=="function"||(typeof e>"u"?"undefined":l4(e))==="object")return(0,ei.treeFilter)(t,v4(e));var i=[];if(typeof e=="string")for(var n=m4(e),o=0;o<n.length;){var a=n[o];if(a.type===f4){var s=tk(a,t);i=i.concat((0,ei.treeFilter)(t,s))}else{var c=a.type;o+=1;var u=tk(n[o],t);switch(c){case HTe:i=rEe(i,u,t);break;case $Te:i=nEe(i,u,t);break;case BTe:i=iEe(i,u);break;case FTe:{i=oEe(i,u);break}default:throw new Error("Unknown combinator selector: "+String(c))}}o+=1}else throw new TypeError("Enzyme::Selector expects a string, object, or Component Constructor");return i}function aEe(e,t){var r=t.map(function(i){return zb(e,i)});return p4((0,JO.default)(r,1))}(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},r=function(){function de(Z,ne){for(var ue=0;ue<ne.length;ue++){var Oe=ne[ue];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(Z,Oe.key,Oe)}}return function(Z,ne,ue){return ne&&de(Z.prototype,ne),ue&&de(Z,ue),Z}}(),i=Vu,n=m(i),o=sp,a=m(o),s=Ku,c=m(s),u=lp,l=Bs,h=m(l),f=Hs,d=an,p=Cf;function m(de){return de&&de.__esModule?de:{default:de}}function g(de,Z,ne){return Z in de?Object.defineProperty(de,Z,{value:ne,enumerable:!0,configurable:!0,writable:!0}):de[Z]=ne,de}function v(de,Z){if(!de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:de}function _(de,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);de.prototype=Object.create(Z&&Z.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(de,Z):de.__proto__=Z)}function y(de,Z){if(!(de instanceof Z))throw new TypeError("Cannot call a class as a function")}var b=(0,u.sym)("__node__"),T=(0,u.sym)("__nodes__"),S=(0,u.sym)("__renderer__"),k=(0,u.sym)("__unrendered__"),O=(0,u.sym)("__root__"),D=(0,u.sym)("__options__"),R=(0,u.sym)("__rootNodes__"),w=(0,u.sym)("__wrappingComponent__"),L=(0,u.sym)("__linkedRoots__"),B=(0,u.sym)("__updatedBy__");function A(de,Z){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.treeFilter;return de.flatMap(function(ue){return ne(ue.getNodeInternal(),Z)})}function M(de,Z){return de.wrap(de.getNodesInternal().filter(Z).filter(Boolean))}function j(de){if(de[O].length!==1)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return de[O]!==de?de[R][0]:de[O][b]}function W(de,Z){return(0,d.parentsOfNode)(Z,j(de))}function K(de,Z){Z?Array.isArray(Z)?((0,u.privateSet)(de,b,Z[0]),(0,u.privateSet)(de,T,Z)):((0,u.privateSet)(de,b,Z),(0,u.privateSet)(de,T,[Z])):((0,u.privateSet)(de,b,null),(0,u.privateSet)(de,T,[])),(0,u.privateSet)(de,"length",de[T].length)}var oe=function(){function de(Z,ne){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y(this,de),!globalThis.window&&!globalThis.document)throw new Error("It looks like you called `mount()` without a global document being loaded.");var Oe=(0,u.makeOptions)(ue);if(ne)(0,u.privateSet)(this,S,ne[S]),(0,u.privateSet)(this,O,ne),K(this,Z),(0,u.privateSet)(this,R,ne[T]),(0,u.privateSet)(this,D,ne[D]),(0,u.privateSet)(this,L,[]);else{var Ce=(0,h.default)(Oe);if(!Ce.isValidElement(Z))throw new TypeError("ReactWrapper can only wrap valid elements");var je=Ce.createRenderer((0,n.default)({mode:"mount"},Oe));if((0,u.privateSet)(this,S,je),je.render(Z,Oe.context),(0,u.privateSet)(this,O,this),K(this,this[S].getNode()),(0,u.privateSet)(this,D,Oe),(0,u.privateSet)(this,L,[]),(0,u.isCustomComponent)(Oe.wrappingComponent,Ce)){if(typeof this[S].getWrappingComponentRenderer!="function")throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");(0,u.privateSet)(this,w,new fe(this,this[S].getWrappingComponentRenderer())),this[L].push(this[w])}}(0,u.privateSet)(this,k,Z),(0,u.privateSet)(this,B,null)}return r(de,[{key:"root",value:function(){function Z(){return this[O]}return Z}()},{key:"getNodeInternal",value:function(){function Z(){if(this.length!==1)throw new Error("ReactWrapper::getNode() can only be called when wrapping one node");return this[T][0]}return Z}()},{key:"getNodesInternal",value:function(){function Z(){return this[T]}return Z}()},{key:"getElement",value:function(){function Z(){var ne=this;return this.single("getElement",function(){return(0,h.default)(ne[D]).nodeToElement(ne[b])})}return Z}()},{key:"getElements",value:function(){function Z(){var ne=this;return this[T].map(function(ue){return(0,h.default)(ne[D]).nodeToElement(ue)})}return Z}()},{key:"getNode",value:function(){function Z(){throw new Error("ReactWrapper::getNode() is no longer supported. Use ReactWrapper::instance() instead")}return Z}()},{key:"getNodes",value:function(){function Z(){throw new Error("ReactWrapper::getNodes() is no longer supported.")}return Z}()},{key:"getDOMNode",value:function(){function Z(){var ne=(0,h.default)(this[D]);return this.single("getDOMNode",function(ue){return ne.nodeToHostNode(ue,!0)})}return Z}()},{key:"ref",value:function(){function Z(ne){if(this[O]!==this)throw new Error("ReactWrapper::ref(refname) can only be called on the root");return this.instance().refs[ne]}return Z}()},{key:"instance",value:function(){function Z(){var ne=this;return this.single("instance",function(){return ne[b].instance})}return Z}()},{key:"getWrappingComponent",value:function(){function Z(){if(this[O]!==this)throw new Error("ReactWrapper::getWrappingComponent() can only be called on the root");if(!this[D].wrappingComponent)throw new Error("ReactWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[w]}return Z}()},{key:"update",value:function(){function Z(){var ne=this,ue=this[O];return this!==ue?ue.update():(K(this,this[S].getNode()),this[L].forEach(function(Oe){if(Oe!==ne[B]){Oe[B]=ne;try{Oe.update()}finally{Oe[B]=null}}}),this)}return Z}()},{key:"unmount",value:function(){function Z(){var ne=this;if(this[O]!==this)throw new Error("ReactWrapper::unmount() can only be called on the root");return this.single("unmount",function(){ne[S].unmount(),ne.update()}),this}return Z}()},{key:"mount",value:function(){function Z(){var ne=this;if(this[O]!==this)throw new Error("ReactWrapper::mount() can only be called on the root");return this[S].render(this[k],this[D].context,function(){return ne.update()}),this}return Z}()},{key:"setProps",value:function(){function Z(ne){var ue=this,Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[O]!==this)throw new Error("ReactWrapper::setProps() can only be called on the root");if(arguments.length>1&&typeof Oe!="function")throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");var Ce=(0,h.default)(this[D]);return this[k]=(0,u.cloneElement)(Ce,this[k],ne),this[S].render(this[k],null,function(){ue.update(),Oe&&Oe()}),this}return Z}()},{key:"setState",value:function(){function Z(ne){var ue=this,Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.instance()===null||this.getNodeInternal().nodeType!=="class")throw new Error("ReactWrapper::setState() can only be called on class components");if(arguments.length>1&&typeof Oe!="function")throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.instance().setState(ne,function(){if(ue.update(),Oe){var Ce=(0,h.default)(ue[D]),je=ue.instance();Ce.invokeSetStateCallback?Ce.invokeSetStateCallback(je,Oe):Oe.call(je)}}),this}return Z}()},{key:"setContext",value:function(){function Z(ne){var ue=this;if(this[O]!==this)throw new Error("ReactWrapper::setContext() can only be called on the root");if(!this[D].context)throw new Error("ReactWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this[S].render(this[k],ne,function(){return ue.update()}),this}return Z}()},{key:"contains",value:function(){function Z(ne){var ue=(0,h.default)(this[D]),Oe=Array.isArray(ne)?function(Ce){return(0,u.containsChildrenSubArray)(u.nodeEqual,Ce,ne.map(function(je){return ue.elementToNode(je)}))}:function(Ce){return(0,u.nodeEqual)(ue.elementToNode(ne),Ce)};return A(this,Oe).length>0}return Z}()},{key:"containsMatchingElement",value:function(){function Z(ne){var ue=(0,h.default)(this[D]).elementToNode(ne),Oe=function(){function Ce(je){return(0,u.nodeMatches)(ue,je,function(Pe,Ue){return Pe<=Ue})}return Ce}();return A(this,Oe).length>0}return Z}()},{key:"containsAllMatchingElements",value:function(){function Z(ne){var ue=this;if(!Array.isArray(ne))throw new TypeError("nodes should be an Array");return ne.every(function(Oe){return ue.containsMatchingElement(Oe)})}return Z}()},{key:"containsAnyMatchingElements",value:function(){function Z(ne){var ue=this;return Array.isArray(ne)&&ne.some(function(Oe){return ue.containsMatchingElement(Oe)})}return Z}()},{key:"equals",value:function(){function Z(ne){var ue=this;return this.single("equals",function(){return(0,u.nodeEqual)(ue.getNodeInternal(),ne)})}return Z}()},{key:"matchesElement",value:function(){function Z(ne){var ue=this;return this.single("matchesElement",function(){var Oe=(0,h.default)(ue[D]),Ce=Oe.elementToNode(ne);return(0,u.nodeMatches)(Ce,ue.getNodeInternal(),function(je,Pe){return je<=Pe})})}return Z}()},{key:"find",value:function(){function Z(ne){return this.wrap((0,p.reduceTreesBySelector)(ne,this.getNodesInternal()))}return Z}()},{key:"is",value:function(){function Z(ne){var ue=(0,p.buildPredicate)(ne);return this.single("is",function(Oe){return ue(Oe)})}return Z}()},{key:"isEmptyRender",value:function(){function Z(){var ne=this.getNodeInternal();return(0,u.renderedDive)(ne)}return Z}()},{key:"filterWhere",value:function(){function Z(ne){var ue=this;return M(this,function(Oe){return ne(ue.wrap(Oe))})}return Z}()},{key:"filter",value:function(){function Z(ne){var ue=(0,p.buildPredicate)(ne);return M(this,ue)}return Z}()},{key:"not",value:function(){function Z(ne){var ue=(0,p.buildPredicate)(ne);return M(this,function(Oe){return!ue(Oe)})}return Z}()},{key:"text",value:function(){function Z(){var ne=(0,h.default)(this[D]);return this.single("text",function(ue){return(0,d.getTextFromHostNodes)(ue,ne)})}return Z}()},{key:"html",value:function(){function Z(){var ne=(0,h.default)(this[D]);return this.single("html",function(ue){return(0,d.getHTMLFromHostNodes)(ue,ne)})}return Z}()},{key:"render",value:function(){function Z(){var ne=this.html();return(0,u.loadCheerioRoot)(ne)}return Z}()},{key:"simulate",value:function(){function Z(ne){var ue=this,Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.single("simulate",function(Ce){return ue[S].simulateEvent(Ce,ne,Oe),ue[O].update(),ue})}return Z}()},{key:"simulateError",value:function(){function Z(ne){var ue=this;if(this[O]===this)throw new Error("ReactWrapper::simulateError() may not be called on the root");return this.single("simulateError",function(Oe){if(Oe.nodeType==="host")throw new Error("ReactWrapper::simulateError() can only be called on custom components");var Ce=ue[S];if(typeof Ce.simulateError!="function")throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var je=j(ue),Pe=[Oe].concat(W(ue,Oe));return Ce.simulateError(Pe,je,ne),ue[O].update(),ue})}return Z}()},{key:"props",value:function(){function Z(){return this.single("props",d.propsOfNode)}return Z}()},{key:"state",value:function(){function Z(ne){var ue=this,Oe=this[O]===this?this[S].getNode():this.getNodeInternal();if(this.instance()===null||Oe.nodeType!=="class")throw new Error("ReactWrapper::state() can only be called on class components");var Ce=this.single("state",function(){return ue.instance().state});if(typeof ne<"u"){if(Ce==null)throw new TypeError('ReactWrapper::state("'+String(ne)+'") requires that `state` not be `null` or `undefined`');return Ce[ne]}return Ce}return Z}()},{key:"context",value:function(){function Z(ne){var ue=this;if(this[O]!==this)throw new Error("ReactWrapper::context() can only be called on the root");var Oe=this.single("context",function(){return ue.instance()});if(Oe===null)throw new Error("ReactWrapper::context() can only be called on components with instances");var Ce=Oe.context;return typeof ne<"u"?Ce[ne]:Ce}return Z}()},{key:"children",value:function(){function Z(ne){var ue=this.flatMap(function(Oe){return(0,d.childrenOfNode)(Oe.getNodeInternal())});return ne?ue.filter(ne):ue}return Z}()},{key:"childAt",value:function(){function Z(ne){var ue=this;return this.single("childAt",function(){return ue.children().at(ne)})}return Z}()},{key:"parents",value:function(){function Z(ne){var ue=this;return this.single("parents",function(Oe){var Ce=ue.wrap(W(ue,Oe));return ne?Ce.filter(ne):Ce})}return Z}()},{key:"parent",value:function(){function Z(){return this.flatMap(function(ne){return[ne.parents().get(0)]})}return Z}()},{key:"closest",value:function(){function Z(ne){if(this.is(ne))return this;var ue=this.parents().filter(ne);return ue.length>0?ue.first():this.findWhere(function(){return!1})}return Z}()},{key:"prop",value:function(){function Z(ne){return this.props()[ne]}return Z}()},{key:"invoke",value:function(){function Z(ne){var ue=this;return this.single("invoke",function(){var Oe=ue.prop(ne);if(typeof Oe!="function")throw new TypeError("ReactWrapper::invoke() requires the name of a prop whose value is a function");return function(){for(var Ce=arguments.length,je=Array(Ce),Pe=0;Pe<Ce;Pe++)je[Pe]=arguments[Pe];var Ue=typeof ue[S].wrapInvoke=="function"?ue[S].wrapInvoke(function(){return Oe.apply(void 0,je)}):Oe.apply(void 0,je);return ue[O].update(),Ue}})}return Z}()},{key:"renderProp",value:function(){function Z(ne){var ue=this,Oe=(0,h.default)(this[D]);if(typeof Oe.wrap!="function")throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(Ce){if(Ce.nodeType==="host")throw new TypeError("ReactWrapper::renderProp() can only be called on custom components");if(typeof ne!="string")throw new TypeError("ReactWrapper::renderProp(): `propName` must be a string");var je=ue.props();if(!(0,c.default)(je,ne))throw new Error("ReactWrapper::renderProp(): no prop called \u201C"+String(ne)+"\u201C found");var Pe=je[ne];if(typeof Pe!="function")throw new TypeError("ReactWrapper::renderProp(): expected prop \u201C"+String(ne)+"\u201C to contain a function, but it holds \u201C"+(typeof Pe>"u"?"undefined":t(Pe))+"\u201C");return function(){var Ue=Pe.apply(void 0,arguments),Ye=Oe.wrap(Ue);return ue.wrap(Ye,null,ue[D])}})}return Z}()},{key:"key",value:function(){function Z(){return this.single("key",function(ne){return ne.key===void 0?null:ne.key})}return Z}()},{key:"type",value:function(){function Z(){return this.single("type",function(ne){return(0,u.typeOfNode)(ne)})}return Z}()},{key:"name",value:function(){function Z(){var ne=(0,h.default)(this[D]);return this.single("name",function(ue){return ne.displayNameOfNode?ne.displayNameOfNode(ue):(0,u.displayNameOfNode)(ue)})}return Z}()},{key:"hasClass",value:function(){function Z(ne){return typeof ne=="string"&&ne.indexOf(".")!==-1&&console.warn("It looks like you're calling `ReactWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(ue){return(0,d.hasClassName)(ue,ne)})}return Z}()},{key:"forEach",value:function(){function Z(ne){var ue=this;return this.getNodesInternal().forEach(function(Oe,Ce){return ne.call(ue,ue.wrap(Oe),Ce)}),this}return Z}()},{key:"map",value:function(){function Z(ne){var ue=this;return this.getNodesInternal().map(function(Oe,Ce){return ne.call(ue,ue.wrap(Oe),Ce)})}return Z}()},{key:"reduce",value:function(){function Z(ne){var ue=this,Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(Ce,je,Pe){return ne.call(ue,Ce,ue.wrap(je),Pe)},Oe):this.getNodesInternal().reduce(function(Ce,je,Pe){return ne.call(ue,Pe===1?ue.wrap(Ce):Ce,ue.wrap(je),Pe)})}return Z}()},{key:"reduceRight",value:function(){function Z(ne){var ue=this,Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(Ce,je,Pe){return ne.call(ue,Ce,ue.wrap(je),Pe)},Oe):this.getNodesInternal().reduceRight(function(Ce,je,Pe){return ne.call(ue,Pe===1?ue.wrap(Ce):Ce,ue.wrap(je),Pe)})}return Z}()},{key:"slice",value:function(){function Z(ne,ue){return this.wrap(this.getNodesInternal().slice(ne,ue))}return Z}()},{key:"some",value:function(){function Z(ne){if(this[O]===this)throw new Error("ReactWrapper::some() can not be called on the root");var ue=(0,p.buildPredicate)(ne);return this.getNodesInternal().some(ue)}return Z}()},{key:"someWhere",value:function(){function Z(ne){var ue=this;return this.getNodesInternal().some(function(Oe,Ce){return ne.call(ue,ue.wrap(Oe),Ce)})}return Z}()},{key:"every",value:function(){function Z(ne){var ue=(0,p.buildPredicate)(ne);return this.getNodesInternal().every(ue)}return Z}()},{key:"everyWhere",value:function(){function Z(ne){var ue=this;return this.getNodesInternal().every(function(Oe,Ce){return ne.call(ue,ue.wrap(Oe),Ce)})}return Z}()},{key:"flatMap",value:function(){function Z(ne){var ue=this,Oe=this.getNodesInternal().map(function(je,Pe){return ne.call(ue,ue.wrap(je),Pe)}),Ce=(0,a.default)(Oe,1);return this.wrap(Ce.filter(Boolean))}return Z}()},{key:"findWhere",value:function(){function Z(ne){var ue=this;return A(this,function(Oe){var Ce=ue.wrap(Oe);return Ce.length>0&&ne(Ce)})}return Z}()},{key:"get",value:function(){function Z(ne){return this.getElements()[ne]}return Z}()},{key:"at",value:function(){function Z(ne){var ue=this.getNodesInternal();return ne<ue.length?this.wrap(ue[ne]):this.wrap([])}return Z}()},{key:"first",value:function(){function Z(){return this.at(0)}return Z}()},{key:"last",value:function(){function Z(){return this.at(this.length-1)}return Z}()},{key:"isEmpty",value:function(){function Z(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}return Z}()},{key:"exists",value:function(){function Z(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return arguments.length>0?this.find(ne).exists():this.length>0}return Z}()},{key:"single",value:function(){function Z(ne,ue){var Oe=typeof ne=="string"?ne:"unknown",Ce=typeof ue=="function"?ue:ne;if(this.length!==1)throw new Error("Method \u201C"+Oe+"\u201D is meant to be run on 1 node. "+String(this.length)+" found instead.");return Ce.call(this,this.getNodeInternal())}return Z}()},{key:"wrap",value:function(){function Z(ne){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[O];if(ne instanceof de)return ne;for(var Oe=arguments.length,Ce=Array(Oe>2?Oe-2:0),je=2;je<Oe;je++)Ce[je-2]=arguments[je];return new(Function.prototype.bind.apply(de,[null].concat([ne,ue],Ce)))}return Z}()},{key:"debug",value:function(){function Z(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,f.debugNodes)(this.getNodesInternal(),ne)}return Z}()},{key:"tap",value:function(){function Z(ne){return ne(this),this}return Z}()},{key:"detach",value:function(){function Z(){if(this[O]!==this)throw new Error("ReactWrapper::detach() can only be called on the root");if(!this[D].attachTo)throw new Error("ReactWrapper::detach() can only be called on when the `attachTo` option was passed into `mount()`.");this[S].unmount()}return Z}()},{key:"hostNodes",value:function(){function Z(){return this.filterWhere(function(ne){return typeof ne.type()=="string"})}return Z}()}]),de}(),fe=function(de){_(Z,de);function Z(ne,ue){y(this,Z);var Oe=v(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,ue.getNode(),ne));return(0,u.privateSet)(Oe,O,Oe),(0,u.privateSet)(Oe,S,ue),Oe[L].push(ne),Oe}return r(Z,[{key:"getWrappingComponent",value:function(){function ne(){throw new TypeError("ReactWrapper::getWrappingComponent() can only be called on the root")}return ne}()}]),Z}(oe);u.ITERATOR_SYMBOL&&Object.defineProperty(oe.prototype,u.ITERATOR_SYMBOL,{configurable:!0,value:function(){function de(){var Z,ne=this[T][u.ITERATOR_SYMBOL](),ue=(0,h.default)(this[D]);return Z={},g(Z,u.ITERATOR_SYMBOL,function(){return this}),g(Z,"next",function(){function Oe(){var Ce=ne.next();return Ce.done?{done:!0}:{done:!1,value:ue.nodeToElement(Ce.value)}}return Oe}()),Z}return de}()});function Ae(de,Z){Object.defineProperty(oe.prototype,de,{get:function(){function ne(){throw new Error(`
        Attempted to access ReactWrapper::`+String(de)+`, which was previously a private property on
        Enzyme ReactWrapper instances, but is no longer and should not be relied upon.
        `+String(Z)+`
      `)}return ne}(),enumerable:!1,configurable:!1})}Ae("node","Consider using the getElement() method instead."),Ae("nodes","Consider using the getElements() method instead."),Ae("renderer",""),Ae("options",""),Ae("complexSelector",""),e.default=oe})(vw);var rk={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function ke(te,ae,ye){te===null&&(te=Function.prototype);var Q=Object.getOwnPropertyDescriptor(te,ae);if(Q===void 0){var he=Object.getPrototypeOf(te);return he===null?void 0:ke(he,ae,ye)}else{if("value"in Q)return Q.value;var we=Q.get;return we===void 0?void 0:we.call(ye)}}return ke}(),r=function(){function ke(te,ae){for(var ye=0;ye<ae.length;ye++){var Q=ae[ye];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(te,Q.key,Q)}}return function(te,ae,ye){return ae&&ke(te.prototype,ae),ye&&ke(te,ye),te}}(),i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},n=Vu,o=_(n),a=sp,s=_(a),c=Ku,u=_(c),l=X$,h=_(l),f=lp,d=Bs,p=_(d),m=Hs,g=an,v=Cf;function _(ke){return ke&&ke.__esModule?ke:{default:ke}}function y(ke,te){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:ke}function b(ke,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);ke.prototype=Object.create(te&&te.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,te):ke.__proto__=te)}function T(ke){if(Array.isArray(ke)){for(var te=0,ae=Array(ke.length);te<ke.length;te++)ae[te]=ke[te];return ae}else return Array.from(ke)}function S(ke,te){if(!(ke instanceof te))throw new TypeError("Cannot call a class as a function")}function k(ke,te,ae){return te in ke?Object.defineProperty(ke,te,{value:ae,enumerable:!0,configurable:!0,writable:!0}):ke[te]=ae,ke}var O=(0,f.sym)("__node__"),D=(0,f.sym)("__nodes__"),R=(0,f.sym)("__renderer__"),w=(0,f.sym)("__unrendered__"),L=(0,f.sym)("__root__"),B=(0,f.sym)("__options__"),A=(0,f.sym)("__setState__"),M=(0,f.sym)("__rootNodes__"),j=(0,f.sym)("__childContext__"),W=(0,f.sym)("__wrappingComponent__"),K=(0,f.sym)("__primaryWrapper__"),oe=(0,f.sym)("__rootFinder__"),fe=(0,f.sym)("__providerValues__");function Ae(ke,te){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.treeFilter;return ke.flatMap(function(ye){return ae(ye.getNodeInternal(),te)})}function de(ke,te){return ke.wrap(ke.getNodesInternal().filter(te).filter(Boolean))}function Z(ke){var te=ke.lifecycleExperimental,ae=ke.disableLifecycleMethods,ye=ke.enableComponentDidUpdateOnSetState,Q=ke.supportPrevContextArgumentOfComponentDidUpdate,he=ke.lifecycles;if(typeof te<"u"&&typeof te!="boolean")throw new Error("lifecycleExperimental must be either true or false if provided");if(typeof ae<"u"&&typeof ae!="boolean")throw new Error("disableLifecycleMethods must be either true or false if provided");if(te!=null&&ae!=null&&te===ae)throw new Error("lifecycleExperimental and disableLifecycleMethods cannot be set to the same value");if(typeof ye<"u"&&he.componentDidUpdate&&he.componentDidUpdate.onSetState!==ye)throw new TypeError("the legacy enableComponentDidUpdateOnSetState option should be matched by `lifecycles: { componentDidUpdate: { onSetState: true } }`, for compatibility");if(typeof Q<"u"&&he.componentDidUpdate&&he.componentDidUpdate.prevContext!==Q)throw new TypeError("the legacy supportPrevContextArgumentOfComponentDidUpdate option should be matched by `lifecycles: { componentDidUpdate: { prevContext: true } }`, for compatibility")}function ne(ke){var te=ke.options,ae=te.lifecycles,ye=ae===void 0?{}:ae,Q=te.enableComponentDidUpdateOnSetState,he=te.supportPrevContextArgumentOfComponentDidUpdate,we=typeof Q<"u",Ie=typeof he<"u",$e=we||Ie?(0,o.default)({},we&&{onSetState:!!Q},Ie&&{prevContext:!!he}):null,Ge=ye.getDerivedStateFromProps,Xe=Ge?{hasShouldComponentUpdateBug:!!Ge.hasShouldComponentUpdateBug}:!1;return(0,o.default)({},ye,{setState:(0,o.default)({},ye.setState),getChildContext:(0,o.default)({calledByRenderer:!0},ye.getChildContext)},$e&&{componentDidUpdate:$e},{getDerivedStateFromProps:Xe})}function ue(ke){return ke.nodeType==="host"?ke:ke.rendered}function Oe(ke){if(ke[L].length!==1)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return ke[L]!==ke?ke[M][0]:ke[L][O]}function Ce(ke,te){return(0,g.parentsOfNode)(te,Oe(ke))}function je(ke,te){Array.isArray(te)?((0,f.privateSet)(ke,O,te[0]),(0,f.privateSet)(ke,D,te)):((0,f.privateSet)(ke,O,te),(0,f.privateSet)(ke,D,[te])),(0,f.privateSet)(ke,"length",ke[D].length)}function Pe(ke,te,ae,ye){return!(0,h.default)(ke,te)||!(0,h.default)(ae,ye)}function Ue(ke){return ke&&ke.isPureReactComponent}function Ye(ke,te,ae){var ye=ke.instance,Q=ke.type,he=(0,f.displayNameOfNode)(ke);if(i(Q.childContextTypes)!=="object")return console.warn(String(he)+".getChildContext(): childContextTypes must be defined in order to use getChildContext()."),{};var we=ye.getChildContext();return Object.keys(we).forEach(function(Ie){if(!(Ie in Q.childContextTypes))throw new Error(String(he)+'.getChildContext(): key "'+String(Ie)+'" is not defined in childContextTypes.')}),typeof ae.checkPropTypes=="function"&&ae.checkPropTypes(Q.childContextTypes,we,"child context",te),we}function xe(ke,te){return!(0,f.isCustomComponentElement)(ke,te)||!ke.type.prototype||typeof ke.type.prototype.getChildContext!="function"?null:(0,f.spyMethod)(ke.type.prototype,"getChildContext")}function qe(ke,te,ae,ye,Q){var he=te[R];if(ke.options.legacyContextMode==="parent")if(Q)(0,f.privateSet)(te,j,Q.getLastReturnValue()),Q.restore();else if(typeof ae.getChildContext=="function"){var we=[te[O]].concat(Ce(te,te[O])),Ie=Ye(ye,we,he);(0,f.privateSet)(te,j,Ie)}else(0,f.privateSet)(te,j,null)}function We(ke,te){var ae=ke.type.getDerivedStateFromProps;if(typeof ae=="function")var ye=ke.instance,Q=(0,f.spyMethod)(ye,"shouldComponentUpdate",function(we){return function(){function Ie(){ye.state=te;for(var $e=arguments.length,Ge=Array($e),Xe=0;Xe<$e;Xe++)Ge[Xe]=arguments[Xe];var Qe=we.apply(ye,Ge),ot=Ge[1];return ye.state=ot,he(),Qe}return Ie}()}),he=Q.restore}function vt(ke,te,ae){var ye=ke[O],Q=ye&&ae.nodeToElement(ye);if(ke.type()===te)return ke.dive();if(Q&&(0,f.isCustomComponentElement)(Q,ae))return vt(ke.dive(),te,ae);for(var he=ke.children(),we=0;we<he.length;we+=1){var Ie=vt(he.at(we),te,ae);if(typeof Ie<"u")return Ie}}function dt(ke,te){var ae=vt(ke,ke[oe],te);if(!ae)throw new Error("`wrappingComponent` must render its children!");return{legacyContext:ae[B].context,providerValues:ae[fe]}}function Ze(ke,te,ae,ye){var Q=(0,f.makeOptions)(ae),he=(0,p.default)(ae);if((0,f.privateSet)(Q,fe,ae[fe]),te||!(0,f.isCustomComponent)(Q.wrappingComponent,he))return Q;if(typeof he.wrapWithWrappingComponent!="function")throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");var we=he.wrapWithWrappingComponent(ke,Q),Ie=we.node,$e=we.RootFinder,Ge=new Kr(Ie,ye,$e),Xe=dt(Ge,he),Qe=Xe.legacyContext,ot=Xe.providerValues;return(0,f.privateSet)(ye,W,Ge),(0,o.default)({},Q,k({context:(0,o.default)({},Q.context,Qe)},fe,ot))}function Et(ke){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=(0,o.default)({},ke[B],te,{context:te.context||(0,o.default)({},ke[B].context,ke[L][j])});return(0,f.privateSet)(ae,fe,ke[L][fe]),ae}var _t=function(){function ke(te,ae){var ye=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};S(this,ke),Z(Q);var he=Ze(te,ae,Q,this),we=(0,p.default)(he),Ie=ne(we);if(ae)(0,f.privateSet)(this,L,ae),(0,f.privateSet)(this,w,null),(0,f.privateSet)(this,R,ae[R]),je(this,te),(0,f.privateSet)(this,B,ae[B]),(0,f.privateSet)(this,M,ae[D]),(0,f.privateSet)(this,fe,null);else{if(!we.isValidElement(te))throw new TypeError("ShallowWrapper can only wrap valid elements");var $e=Ie.getChildContext.calledByRenderer?xe(te,we):null;(0,f.privateSet)(this,L,this),(0,f.privateSet)(this,w,te);var Ge=we.createRenderer((0,o.default)({mode:"shallow"},he));(0,f.privateSet)(this,R,Ge);var Xe=new Map(he[fe]||[]);this[R].render(te,he.context,{providerValues:Xe});var Qe=this[R].getNode();je(this,ue(Qe)),(0,f.privateSet)(this,B,he),(0,f.privateSet)(this,fe,Xe);var ot=Qe.instance;ot&&!he.disableLifecycleMethods&&(Ie.componentDidUpdate.onSetState&&!ot[A]&&((0,f.privateSet)(ot,A,ot.setState),ot.setState=function(Ot){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return ye.setState.apply(ye,T(ft==null?[Ot]:[Ot,ft]))}),typeof ot.componentDidMount=="function"&&this[R].batchedUpdates(function(){ot.componentDidMount()}),qe(we,this,ot,Qe,$e))}}return r(ke,[{key:"root",value:function(){function te(){return this[L]}return te}()},{key:"getNodeInternal",value:function(){function te(){if(this.length!==1)throw new Error("ShallowWrapper::getNode() can only be called when wrapping one node");return this[L]===this&&this.update(),this[O]}return te}()},{key:"getNodesInternal",value:function(){function te(){return this[L]===this&&this.length===1&&this.update(),this[D]}return te}()},{key:"getElement",value:function(){function te(){var ae=this;return this.single("getElement",function(ye){return(0,p.default)(ae[B]).nodeToElement(ye)})}return te}()},{key:"getElements",value:function(){function te(){var ae=this;return this.getNodesInternal().map(function(ye){return(0,p.default)(ae[B]).nodeToElement(ye)})}return te}()},{key:"getNode",value:function(){function te(){throw new Error("ShallowWrapper::getNode() is no longer supported. Use ShallowWrapper::getElement() instead")}return te}()},{key:"getNodes",value:function(){function te(){throw new Error("ShallowWrapper::getNodes() is no longer supported. Use ShallowWrapper::getElements() instead")}return te}()},{key:"instance",value:function(){function te(){if(this[L]!==this)throw new Error("ShallowWrapper::instance() can only be called on the root");return this[R].getNode().instance}return te}()},{key:"getWrappingComponent",value:function(){function te(){if(this[L]!==this)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root");if(!this[B].wrappingComponent)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[W]}return te}()},{key:"update",value:function(){function te(){if(this[L]!==this)throw new Error("ShallowWrapper::update() can only be called on the root");if(this.length!==1)throw new Error("ShallowWrapper::update() can only be called when wrapping one node");return je(this,ue(this[R].getNode())),this}return te}()},{key:"unmount",value:function(){function te(){return this[R].unmount(),this[L][W]&&this[L][W].unmount(),this}return te}()},{key:"rerender",value:function(){function te(ae,ye){var Q=this,he=(0,p.default)(this[B]);return this.single("rerender",function(){(0,f.withSetStateAllowed)(function(){var we=Q[R].getNode(),Ie=we.instance||{},$e=we.type||{},Ge=Ie.state,Xe=Ie.props||Q[w].props,Qe=Ie.context||Q[B].context,ot=ye||Qe;ye&&(Q[B]=(0,o.default)({},Q[B],{context:ot})),Q[R].batchedUpdates(function(){var Ot=ne(he),ft=!0,sr=void 0,H=void 0;if(!Q[B].disableLifecycleMethods&&Ie){if(typeof Ie.shouldComponentUpdate=="function"){var I=Ot.getDerivedStateFromProps;I&&I.hasShouldComponentUpdateBug&&We(we,Ge),sr=(0,f.spyMethod)(Ie,"shouldComponentUpdate")}Ot.getChildContext.calledByRenderer&&typeof Ie.getChildContext=="function"&&(H=(0,f.spyMethod)(Ie,"getChildContext"))}if(!sr&&Ue(Ie)&&(ft=Pe(Xe,ae,Ge,Ie.state)),ae&&(Q[w]=(0,f.cloneElement)(he,Q[w],ae)),Q[R].render(Q[w],ot,{providerValues:Q[fe]}),sr&&(ft=sr.getLastReturnValue(),sr.restore()),ft&&!Q[B].disableLifecycleMethods&&Ie)if(qe(he,Q,Ie,we,H),Ot.getSnapshotBeforeUpdate){var x=void 0;typeof Ie.getSnapshotBeforeUpdate=="function"&&(x=Ie.getSnapshotBeforeUpdate(Xe,Ge)),Ot.componentDidUpdate&&typeof Ie.componentDidUpdate=="function"&&(!Ge||(0,h.default)(Ge,Q.instance().state)||typeof $e.getDerivedStateFromProps=="function")&&Ie.componentDidUpdate(Xe,Ge,x)}else Ot.componentDidUpdate&&typeof Ie.componentDidUpdate=="function"&&(Ot.componentDidUpdate.prevContext?Ie.componentDidUpdate(Xe,Ge,Qe):(!Ge||(0,h.default)(Q.instance().state,Ge))&&Ie.componentDidUpdate(Xe,Ge));else(0,h.default)(ae,Ie.props)||(Ie.props=(Object.freeze||Object)((0,o.default)({},Ie.props,ae)));Q.update()})})}),this}return te}()},{key:"setProps",value:function(){function te(ae){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[L]!==this)throw new Error("ShallowWrapper::setProps() can only be called on the root");if(arguments.length>1&&typeof ye!="function")throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");return this.rerender(ae),ye&&ye(),this}return te}()},{key:"setState",value:function(){function te(ae){var ye=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[L]!==this)throw new Error("ShallowWrapper::setState() can only be called on the root");if(this.instance()===null||this[R].getNode().nodeType!=="class")throw new Error("ShallowWrapper::setState() can only be called on class components");if(arguments.length>1&&typeof Q!="function")throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.single("setState",function(){(0,f.withSetStateAllowed)(function(){var he=(0,p.default)(ye[B]),we=ne(he),Ie=ye[R].getNode(),$e=Ie.instance,Ge=$e.props,Xe=$e.state,Qe=$e.context,ot=typeof ae=="function"?ae.call($e,Xe,Ge):ae,Ot=!we.setState.skipsComponentDidUpdateOnNullish||ot!=null,ft=void 0,sr=void 0,H=!0;if(!ye[B].disableLifecycleMethods&&$e){if(we.componentDidUpdate&&we.componentDidUpdate.onSetState&&typeof $e.shouldComponentUpdate=="function"){var I=we.getDerivedStateFromProps;I&&I.hasShouldComponentUpdateBug&&We(Ie,ae),ft=(0,f.spyMethod)($e,"shouldComponentUpdate")}we.getChildContext.calledByRenderer&&typeof $e.getChildContext=="function"&&(sr=(0,f.spyMethod)($e,"getChildContext"))}if(!ft&&Ue($e)&&(H=Pe(Ge,$e.props,Xe,(0,o.default)({},Xe,ot))),$e[A]?$e[A](ot):$e.setState(ot),ft&&(H=ft.getLastReturnValue(),ft.restore()),Ot&&H&&!ye[B].disableLifecycleMethods&&(qe(he,ye,$e,Ie,sr),we.componentDidUpdate&&we.componentDidUpdate.onSetState))if(we.getSnapshotBeforeUpdate&&typeof $e.getSnapshotBeforeUpdate=="function"){var x=$e.getSnapshotBeforeUpdate(Ge,Xe);typeof $e.componentDidUpdate=="function"&&$e.componentDidUpdate(Ge,Xe,x)}else typeof $e.componentDidUpdate=="function"&&(we.componentDidUpdate.prevContext?$e.componentDidUpdate(Ge,Xe,Qe):$e.componentDidUpdate(Ge,Xe));ye.update(),Q&&(he.invokeSetStateCallback?he.invokeSetStateCallback($e,Q):Q.call($e))})}),this}return te}()},{key:"setContext",value:function(){function te(ae){if(this[L]!==this)throw new Error("ShallowWrapper::setContext() can only be called on the root");if(!this[B].context)throw new Error("ShallowWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this.rerender(null,ae)}return te}()},{key:"contains",value:function(){function te(ae){var ye=(0,p.default)(this[B]);if(!(0,f.isReactElementAlike)(ae,ye))throw new Error("ShallowWrapper::contains() can only be called with a ReactElement (or an array of them), a string, or a number as an argument.");var Q=Array.isArray(ae)?function(he){return(0,f.containsChildrenSubArray)(f.nodeEqual,he,ae.map(function(we){return ye.elementToNode(we)}))}:function(he){return(0,f.nodeEqual)(ye.elementToNode(ae),he)};return Ae(this,Q).length>0}return te}()},{key:"containsMatchingElement",value:function(){function te(ae){var ye=(0,p.default)(this[B]),Q=ye.elementToNode(ae),he=function(){function we(Ie){return(0,f.nodeMatches)(Q,Ie,function($e,Ge){return $e<=Ge})}return we}();return Ae(this,he).length>0}return te}()},{key:"containsAllMatchingElements",value:function(){function te(ae){var ye=this;if(!Array.isArray(ae))throw new TypeError("nodes should be an Array");return ae.every(function(Q){return ye.containsMatchingElement(Q)})}return te}()},{key:"containsAnyMatchingElements",value:function(){function te(ae){var ye=this;return Array.isArray(ae)&&ae.some(function(Q){return ye.containsMatchingElement(Q)})}return te}()},{key:"equals",value:function(){function te(ae){var ye=this;return this.single("equals",function(){return(0,f.nodeEqual)(ye.getNodeInternal(),ae)})}return te}()},{key:"matchesElement",value:function(){function te(ae){var ye=this;return this.single("matchesElement",function(){var Q=(0,p.default)(ye[B]),he=Q.elementToNode(ae);return(0,f.nodeMatches)(he,ye.getNodeInternal(),function(we,Ie){return we<=Ie})})}return te}()},{key:"find",value:function(){function te(ae){return this.wrap((0,v.reduceTreesBySelector)(ae,this.getNodesInternal()))}return te}()},{key:"is",value:function(){function te(ae){var ye=(0,v.buildPredicate)(ae);return this.single("is",function(Q){return ye(Q)})}return te}()},{key:"isEmptyRender",value:function(){function te(){var ae=this.getNodesInternal();return ae.every(function(ye){return(0,f.isEmptyValue)(ye)})}return te}()},{key:"filterWhere",value:function(){function te(ae){var ye=this;return de(this,function(Q){return ae(ye.wrap(Q))})}return te}()},{key:"filter",value:function(){function te(ae){var ye=(0,v.buildPredicate)(ae);return de(this,ye)}return te}()},{key:"not",value:function(){function te(ae){var ye=(0,v.buildPredicate)(ae);return de(this,function(Q){return!ye(Q)})}return te}()},{key:"text",value:function(){function te(){return this.single("text",g.getTextFromNode)}return te}()},{key:"html",value:function(){function te(){var ae=this;return this.single("html",function(ye){if(ae.type()===null)return null;var Q=(0,p.default)(ae[B]),he=Q.createRenderer((0,o.default)({},ae[B],{mode:"string"}));return he.render(Q.nodeToElement(ye))})}return te}()},{key:"render",value:function(){function te(){var ae=this.html();return(0,f.loadCheerioRoot)(ae)}return te}()},{key:"simulate",value:function(){function te(ae){for(var ye=this,Q=arguments.length,he=Array(Q>1?Q-1:0),we=1;we<Q;we++)he[we-1]=arguments[we];return this.single("simulate",function(Ie){var $e;return($e=ye[R]).simulateEvent.apply($e,[Ie,ae].concat(he)),ye[L].update(),ye})}return te}()},{key:"simulateError",value:function(){function te(ae){var ye=this;return this.single("simulateError",function(Q){if(Q.nodeType==="host")throw new TypeError("ShallowWrapper::simulateError() can only be called on custom components");var he=ye[R];if(typeof he.simulateError!="function")throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var we=Oe(ye),Ie=[Q].concat(Ce(ye,Q));return he.simulateError(Ie,we,ae),ye})}return te}()},{key:"props",value:function(){function te(){return this.single("props",g.propsOfNode)}return te}()},{key:"state",value:function(){function te(ae){var ye=this;if(this[L]!==this)throw new Error("ShallowWrapper::state() can only be called on the root");if(this.instance()===null||this[R].getNode().nodeType!=="class")throw new Error("ShallowWrapper::state() can only be called on class components");var Q=this.single("state",function(){return ye.instance().state});if(typeof ae<"u"){if(Q==null)throw new TypeError('ShallowWrapper::state("'+String(ae)+'") requires that `state` not be `null` or `undefined`');return Q[ae]}return Q}return te}()},{key:"context",value:function(){function te(ae){var ye=this;if(this[L]!==this)throw new Error("ShallowWrapper::context() can only be called on the root");if(!this[B].context)throw new Error("ShallowWrapper::context() can only be called on a wrapper that was originally passed a context option");if(this.instance()===null)throw new Error("ShallowWrapper::context() can only be called on wrapped nodes that have a non-null instance");var Q=this.single("context",function(){return ye.instance().context});return ae?Q[ae]:Q}return te}()},{key:"children",value:function(){function te(ae){var ye=this.flatMap(function(Q){return(0,g.childrenOfNode)(Q.getNodeInternal())});return ae?ye.filter(ae):ye}return te}()},{key:"childAt",value:function(){function te(ae){var ye=this;return this.single("childAt",function(){return ye.children().at(ae)})}return te}()},{key:"parents",value:function(){function te(ae){var ye=this;return this.single("parents",function(Q){var he=ye.wrap(Ce(ye,Q));return ae?he.filter(ae):he})}return te}()},{key:"parent",value:function(){function te(){return this.flatMap(function(ae){return[ae.parents().get(0)]})}return te}()},{key:"closest",value:function(){function te(ae){if(this.is(ae))return this;var ye=this.parents().filter(ae);return ye.length>0?ye.first():this.findWhere(function(){return!1})}return te}()},{key:"shallow",value:function(){function te(){var ae=this,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.single("shallow",function(Q){var he=Et(ae,ye);return ae.wrap((0,p.default)(ae[B]).nodeToElement(Q),null,he)})}return te}()},{key:"prop",value:function(){function te(ae){return this.props()[ae]}return te}()},{key:"invoke",value:function(){function te(ae){var ye=this;return this.single("invoke",function(){var Q=ye.prop(ae);if(typeof Q!="function")throw new TypeError("ShallowWrapper::invoke() requires the name of a prop whose value is a function");return function(){var he=Q.apply(void 0,arguments);return ye[L].update(),he}})}return te}()},{key:"renderProp",value:function(){function te(ae){var ye=this,Q=(0,p.default)(this[B]);if(typeof Q.wrap!="function")throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(he){if(he.nodeType==="host")throw new TypeError("ShallowWrapper::renderProp() can only be called on custom components");if(typeof ae!="string")throw new TypeError("ShallowWrapper::renderProp(): `propName` must be a string");var we=ye.props();if(!(0,u.default)(we,ae))throw new Error("ShallowWrapper::renderProp(): no prop called \u201C"+String(ae)+"\u201C found");var Ie=we[ae];if(typeof Ie!="function")throw new TypeError("ShallowWrapper::renderProp(): expected prop \u201C"+String(ae)+"\u201C to contain a function, but it holds \u201C"+(typeof Ie>"u"?"undefined":i(Ie))+"\u201C");return function(){var $e=Ie.apply(void 0,arguments),Ge=Q.wrap($e);return ye.wrap(Ge,null,ye[B])}})}return te}()},{key:"key",value:function(){function te(){return this.single("key",function(ae){return ae.key===void 0?null:ae.key})}return te}()},{key:"type",value:function(){function te(){return this.single("type",function(ae){return(0,f.typeOfNode)(ae)})}return te}()},{key:"name",value:function(){function te(){var ae=(0,p.default)(this[B]);return this.single("name",function(ye){return ae.displayNameOfNode?ae.displayNameOfNode(ye):(0,f.displayNameOfNode)(ye)})}return te}()},{key:"hasClass",value:function(){function te(ae){return typeof ae=="string"&&ae.indexOf(".")!==-1&&console.warn("It looks like you're calling `ShallowWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(ye){return(0,g.hasClassName)(ye,ae)})}return te}()},{key:"forEach",value:function(){function te(ae){var ye=this;return this.getNodesInternal().forEach(function(Q,he){return ae.call(ye,ye.wrap(Q),he)}),this}return te}()},{key:"map",value:function(){function te(ae){var ye=this;return this.getNodesInternal().map(function(Q,he){return ae.call(ye,ye.wrap(Q),he)})}return te}()},{key:"reduce",value:function(){function te(ae){var ye=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(he,we,Ie){return ae.call(ye,he,ye.wrap(we),Ie)},Q):this.getNodesInternal().reduce(function(he,we,Ie){return ae.call(ye,Ie===1?ye.wrap(he):he,ye.wrap(we),Ie)})}return te}()},{key:"reduceRight",value:function(){function te(ae){var ye=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(he,we,Ie){return ae.call(ye,he,ye.wrap(we),Ie)},Q):this.getNodesInternal().reduceRight(function(he,we,Ie){return ae.call(ye,Ie===1?ye.wrap(he):he,ye.wrap(we),Ie)})}return te}()},{key:"slice",value:function(){function te(ae,ye){return this.wrap(this.getNodesInternal().slice(ae,ye))}return te}()},{key:"some",value:function(){function te(ae){if(this[L]===this)throw new Error("ShallowWrapper::some() can not be called on the root");var ye=(0,v.buildPredicate)(ae);return this.getNodesInternal().some(ye)}return te}()},{key:"someWhere",value:function(){function te(ae){var ye=this;return this.getNodesInternal().some(function(Q,he){return ae.call(ye,ye.wrap(Q),he)})}return te}()},{key:"every",value:function(){function te(ae){var ye=(0,v.buildPredicate)(ae);return this.getNodesInternal().every(ye)}return te}()},{key:"everyWhere",value:function(){function te(ae){var ye=this;return this.getNodesInternal().every(function(Q,he){return ae.call(ye,ye.wrap(Q),he)})}return te}()},{key:"flatMap",value:function(){function te(ae){var ye=this,Q=this.getNodesInternal().map(function(we,Ie){return ae.call(ye,ye.wrap(we),Ie)}),he=(0,s.default)(Q,1);return this.wrap(he.filter(Boolean))}return te}()},{key:"findWhere",value:function(){function te(ae){var ye=this;return Ae(this,function(Q){var he=ye.wrap(Q);return he.length>0&&ae(he)})}return te}()},{key:"get",value:function(){function te(ae){return this.getElements()[ae]}return te}()},{key:"at",value:function(){function te(ae){var ye=this.getNodesInternal();return ae<ye.length?this.wrap(ye[ae]):this.wrap([])}return te}()},{key:"first",value:function(){function te(){return this.at(0)}return te}()},{key:"last",value:function(){function te(){return this.at(this.length-1)}return te}()},{key:"isEmpty",value:function(){function te(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}return te}()},{key:"exists",value:function(){function te(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return arguments.length>0?this.find(ae).exists():this.length>0}return te}()},{key:"single",value:function(){function te(ae,ye){var Q=typeof ae=="string"?ae:"unknown",he=typeof ye=="function"?ye:ae;if(this.length!==1)throw new Error("Method \u201C"+Q+"\u201D is meant to be run on 1 node. "+String(this.length)+" found instead.");return he.call(this,this.getNodeInternal())}return te}()},{key:"wrap",value:function(){function te(ae){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[L];if(ae instanceof ke)return ae;for(var Q=arguments.length,he=Array(Q>2?Q-2:0),we=2;we<Q;we++)he[we-2]=arguments[we];return new(Function.prototype.bind.apply(ke,[null].concat([ae,ye],he)))}return te}()},{key:"debug",value:function(){function te(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,m.debugNodes)(this.getNodesInternal(),ae)}return te}()},{key:"tap",value:function(){function te(ae){return ae(this),this}return te}()},{key:"dive",value:function(){function te(){var ae=this,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=(0,p.default)(this[B]),he="dive";return this.single(he,function(we){if(we&&we.nodeType==="host")throw new TypeError("ShallowWrapper::"+he+"() can not be called on Host Components");var Ie=(0,p.default)(ae[B]).nodeToElement(we);if(!(0,f.isCustomComponentElement)(Ie,Q))throw new TypeError("ShallowWrapper::"+he+"() can only be called on components");var $e=Et(ae,ye);return ae.wrap(Ie,null,$e)})}return te}()},{key:"hostNodes",value:function(){function te(){return this.filterWhere(function(ae){return typeof ae.type()=="string"})}return te}()}]),ke}();function Rt(ke){var te=(0,p.default)(ke[B]),ae=ke[K],ye=ae[R],Q=ye.getNode(),he=dt(ke,te),we=he.legacyContext,Ie=he.providerValues,$e=ae[fe];if(ae.setContext((0,o.default)({},ke[K][B].context,we)),ae[fe]=new Map([].concat(T($e),T(Ie))),typeof te.isContextConsumer=="function"&&te.isContextConsumer(Q.type)){var Ge=Q.type,Xe=te.getProviderFromConsumer(Ge),Qe=Ie.get(Xe),ot=$e.get(Xe);Qe!==ot&&ae.rerender()}}var Kr=function(ke){b(te,ke);function te(ae,ye,Q){S(this,te);var he=y(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,ae));return(0,f.privateSet)(he,K,ye),(0,f.privateSet)(he,oe,Q),he}return r(te,[{key:"rerender",value:function(){function ae(){for(var ye,Q=arguments.length,he=Array(Q),we=0;we<Q;we++)he[we]=arguments[we];var Ie=(ye=t(te.prototype.__proto__||Object.getPrototypeOf(te.prototype),"rerender",this)).call.apply(ye,[this].concat(he));return Rt(this),Ie}return ae}()},{key:"setState",value:function(){function ae(){for(var ye,Q=arguments.length,he=Array(Q),we=0;we<Q;we++)he[we]=arguments[we];var Ie=(ye=t(te.prototype.__proto__||Object.getPrototypeOf(te.prototype),"setState",this)).call.apply(ye,[this].concat(he));return Rt(this),Ie}return ae}()},{key:"getWrappingComponent",value:function(){function ae(){throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root")}return ae}()}]),te}(_t);f.ITERATOR_SYMBOL&&Object.defineProperty(_t.prototype,f.ITERATOR_SYMBOL,{configurable:!0,value:function(){function ke(){var te,ae=this.getNodesInternal()[f.ITERATOR_SYMBOL](),ye=(0,p.default)(this[B]);return te={},k(te,f.ITERATOR_SYMBOL,function(){return this}),k(te,"next",function(){function Q(){var he=ae.next();return he.done?{done:!0}:{done:!1,value:ye.nodeToElement(he.value)}}return Q}()),te}return ke}()});function Mt(ke,te){Object.defineProperty(_t.prototype,ke,{get:function(){function ae(){throw new Error(`
        Attempted to access ShallowWrapper::`+String(ke)+`, which was previously a private property on
        Enzyme ShallowWrapper instances, but is no longer and should not be relied upon.
        `+String(te)+`
      `)}return ae}(),enumerable:!1,configurable:!1})}Mt("node","Consider using the getElement() method instead."),Mt("nodes","Consider using the getElements() method instead."),Mt("renderer",""),Mt("options",""),Mt("complexSelector",""),e.default=_t})(rk);var y4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var t=vw,r=i(t);function i(o){return o&&o.__esModule?o:{default:o}}function n(o,a){return new r.default(o,null,a)}})(y4);var b4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var t=rk,r=i(t);function i(o){return o&&o.__esModule?o:{default:o}}function n(o,a){return new r.default(o,null,a)}})(b4);var _4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=Vu,r=a(t),i=Bs,n=a(i),o=lp;function a(c){return c&&c.__esModule?c:{default:c}}function s(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(0,n.default)(u),h=l.createRenderer((0,r.default)({mode:"string"},u)),f=h.render(c,u.context);return(0,o.loadCheerioRoot)(f)}})(_4);var sEe=vw,lEe=xf(sEe),cEe=rk,uEe=xf(cEe),fEe=_U,hEe=xf(fEe),dEe=y4,pEe=xf(dEe),mEe=b4,gEe=xf(mEe),vEe=_4,yEe=xf(vEe),bEe=lc;function xf(e){return e&&e.__esModule?e:{default:e}}var _Ee={render:yEe.default,shallow:gEe.default,mount:pEe.default,ShallowWrapper:uEe.default,ReactWrapper:lEe.default,configure:bEe.merge,EnzymeAdapter:hEe.default};const nk=100,TEe=(e,t,r,i)=>{for(const{viewId:n,trackId:o,track:a}of e.instance().iterateOverTracks())n===t&&o===r&&(a.options={...a.options,...i});e.setState(e.instance().state)},EEe=e=>{for(const t of e.iterateOverTracks())if(cB(e,t.viewId,t.trackId).activeTransitions>0)return!0;return!1},ik=(e,t)=>{EEe(e)?setTimeout(()=>{ik(e,t)},nk):t()},Vb=e=>{Xd>0?setTimeout(()=>Vb(e),nk):e()},SEe=e=>{for(const t of e.iterateOverTracks()){let r=Ay(e,t.viewId,t.trackId);if(!(!t.track.server&&!t.track.tilesetUid&&!(t.track.data&&t.track.data.type==="divided")))if(t.track.data&&t.track.data.type==="divided"||t.track.server&&t.track.tilesetUid){if(r.originalTrack&&(r=r.originalTrack),!(r.tilesetInfo||r.chromInfo)||r.fetching&&r.fetching.size)return!0}else throw Error('"server" and "tilesetUid" belong together')}return!1},Xp=(e,t)=>{SEe(e)?setTimeout(()=>{Xp(e,t)},nk):t()},ok=(e,t,r,i,n={})=>{const{style:o="width:800px; background-color: lightgreen;",bounded:a=!1,extendedDelay:s=!1}=n;t&&(t.unmount(),t.detach()),e&&globalThis.document.body.removeChild(e);const c=globalThis.document.createElement("div");globalThis.document.body.appendChild(c),c.setAttribute("style",o),c.setAttribute("id","simple-hg-component");const u=_Ee.mount(E.createElement(rd,{options:{bounded:a},viewConfig:r}),{attachTo:c});return u.update(),Vb(()=>{if(s){const l=()=>setTimeout(()=>{i()},1e3);Xp(u.instance(),l)}else Xp(u.instance(),i)}),[c,u]},wEe=e=>{e&&(Br.unmountComponentAtNode(e),document.body.removeChild(e))};async function AEe(e,t,r,i){let n;return await new Promise(o=>{n=ok(e,t,r,o,i)}),n}var Nf=0,Kp=0,Zp=0,T4=1e3,Wb,Qp,Yb=0,uc=0,qb=0,Jp=typeof performance=="object"&&performance.now?performance:Date,E4=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ak(){return uc||(E4(OEe),uc=Jp.now()+qb)}function OEe(){uc=0}function Xb(){this._call=this._time=this._next=null}Xb.prototype=S4.prototype={constructor:Xb,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?ak():+r)+(t==null?0:+t),!this._next&&Qp!==this&&(Qp?Qp._next=this:Wb=this,Qp=this),this._call=e,this._time=r,sk()},stop:function(){this._call&&(this._call=null,this._time=1/0,sk())}};function S4(e,t,r){var i=new Xb;return i.restart(e,t,r),i}function kEe(){ak(),++Nf;for(var e=Wb,t;e;)(t=uc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nf}function w4(){uc=(Yb=Jp.now())+qb,Nf=Kp=0;try{kEe()}finally{Nf=0,CEe(),uc=0}}function IEe(){var e=Jp.now(),t=e-Yb;t>T4&&(qb-=t,Yb=e)}function CEe(){for(var e,t=Wb,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Wb=r);Qp=e,sk(i)}function sk(e){if(!Nf){Kp&&(Kp=clearTimeout(Kp));var t=e-uc;t>24?(e<1/0&&(Kp=setTimeout(w4,e-Jp.now()-qb)),Zp&&(Zp=clearInterval(Zp))):(Zp||(Yb=Jp.now(),Zp=setInterval(IEe,T4)),Nf=1,E4(w4))}}function A4(e,t,r){var i=new Xb;return t=t==null?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,r),i}var PEe=ku("start","end","cancel","interrupt"),DEe=[],O4=0,lk=1,ck=2,Kb=3,k4=4,uk=5,Zb=6;function Qb(e,t,r,i,n,o){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;xEe(e,r,{name:t,index:i,group:n,on:PEe,tween:DEe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:O4})}function fk(e,t){var r=bo(e,t);if(r.state>O4)throw new Error("too late; already scheduled");return r}function ta(e,t){var r=bo(e,t);if(r.state>Kb)throw new Error("too late; already running");return r}function bo(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function xEe(e,t,r){var i=e.__transition,n;i[t]=r,r.timer=S4(o,0,r.time);function o(u){r.state=lk,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var l,h,f,d;if(r.state!==lk)return c();for(l in i)if(d=i[l],d.name===r.name){if(d.state===Kb)return A4(a);d.state===k4?(d.state=Zb,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=Zb,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(A4(function(){r.state===Kb&&(r.state=k4,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=ck,r.on.call("start",e,e.__data__,r.index,r.group),r.state===ck){for(r.state=Kb,n=new Array(f=r.tween.length),l=0,h=-1;l<f;++l)(d=r.tween[l].value.call(e,e.__data__,r.index,r.group))&&(n[++h]=d);n.length=h+1}}function s(u){for(var l=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=uk,1),h=-1,f=n.length;++h<f;)n[h].call(e,l);r.state===uk&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Zb,r.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function em(e,t){var r=e.__transition,i,n,o=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((i=r[a]).name!==t){o=!1;continue}n=i.state>ck&&i.state<uk,i.state=Zb,i.timer.stop(),i.on.call(n?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[a]}o&&delete e.__transition}}function NEe(e){return this.each(function(){em(this,e)})}function REe(e,t){var r,i;return function(){var n=ta(this,e),o=n.tween;if(o!==r){i=r=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}n.tween=i}}function MEe(e,t,r){var i,n;if(typeof r!="function")throw new Error;return function(){var o=ta(this,e),a=o.tween;if(a!==i){n=(i=a).slice();for(var s={name:t,value:r},c=0,u=n.length;c<u;++c)if(n[c].name===t){n[c]=s;break}c===u&&n.push(s)}o.tween=n}}function LEe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=bo(this.node(),r).tween,n=0,o=i.length,a;n<o;++n)if((a=i[n]).name===e)return a.value;return null}return this.each((t==null?REe:MEe)(r,e,t))}function hk(e,t,r){var i=e._id;return e.each(function(){var n=ta(this,i);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return bo(n,i).value[t]}}function I4(e,t){var r;return(typeof t=="number"?zi:t instanceof Qr?mu:(r=Qr(t))?(t=r,mu):t1)(e,t)}function BEe(e){return function(){this.removeAttribute(e)}}function HEe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $Ee(e,t,r){var i,n=r+"",o;return function(){var a=this.getAttribute(e);return a===n?null:a===i?o:o=t(i=a,r)}}function FEe(e,t,r){var i,n=r+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===n?null:a===i?o:o=t(i=a,r)}}function jEe(e,t,r){var i,n,o;return function(){var a,s=r(this),c;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=s+"",a===c?null:a===i&&c===n?o:(n=c,o=t(i=a,s)))}}function UEe(e,t,r){var i,n,o;return function(){var a,s=r(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=s+"",a===c?null:a===i&&c===n?o:(n=c,o=t(i=a,s)))}}function GEe(e,t){var r=Al(e),i=r==="transform"?hR:I4;return this.attrTween(e,typeof t=="function"?(r.local?UEe:jEe)(r,i,hk(this,"attr."+e,t)):t==null?(r.local?HEe:BEe)(r):(r.local?FEe:$Ee)(r,i,t))}function zEe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function VEe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function WEe(e,t){var r,i;function n(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&VEe(e,o)),r}return n._value=t,n}function YEe(e,t){var r,i;function n(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&zEe(e,o)),r}return n._value=t,n}function qEe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=Al(e);return this.tween(r,(i.local?WEe:YEe)(i,t))}function XEe(e,t){return function(){fk(this,e).delay=+t.apply(this,arguments)}}function KEe(e,t){return t=+t,function(){fk(this,e).delay=t}}function ZEe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?XEe:KEe)(t,e)):bo(this.node(),t).delay}function QEe(e,t){return function(){ta(this,e).duration=+t.apply(this,arguments)}}function JEe(e,t){return t=+t,function(){ta(this,e).duration=t}}function e1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QEe:JEe)(t,e)):bo(this.node(),t).duration}function t1e(e,t){if(typeof t!="function")throw new Error;return function(){ta(this,e).ease=t}}function r1e(e){var t=this._id;return arguments.length?this.each(t1e(t,e)):bo(this.node(),t).ease}function n1e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;ta(this,e).ease=r}}function i1e(e){if(typeof e!="function")throw new Error;return this.each(n1e(this._id,e))}function o1e(e){typeof e!="function"&&(e=jg(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var o=t[n],a=o.length,s=i[n]=[],c,u=0;u<a;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&s.push(c);return new ra(i,this._parents,this._name,this._id)}function a1e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,n=r.length,o=Math.min(i,n),a=new Array(i),s=0;s<o;++s)for(var c=t[s],u=r[s],l=c.length,h=a[s]=new Array(l),f,d=0;d<l;++d)(f=c[d]||u[d])&&(h[d]=f);for(;s<i;++s)a[s]=t[s];return new ra(a,this._parents,this._name,this._id)}function s1e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function l1e(e,t,r){var i,n,o=s1e(t)?fk:ta;return function(){var a=o(this,e),s=a.on;s!==i&&(n=(i=s).copy()).on(t,r),a.on=n}}function c1e(e,t){var r=this._id;return arguments.length<2?bo(this.node(),r).on.on(e):this.each(l1e(r,e,t))}function u1e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function f1e(){return this.on("end.remove",u1e(this._id))}function h1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=id(e));for(var i=this._groups,n=i.length,o=new Array(n),a=0;a<n;++a)for(var s=i[a],c=s.length,u=o[a]=new Array(c),l,h,f=0;f<c;++f)(l=s[f])&&(h=e.call(l,l.__data__,f,s))&&("__data__"in l&&(h.__data__=l.__data__),u[f]=h,Qb(u[f],t,r,f,u,bo(l,r)));return new ra(o,this._parents,t,r)}function d1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Fg(e));for(var i=this._groups,n=i.length,o=[],a=[],s=0;s<n;++s)for(var c=i[s],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var f=e.call(l,l.__data__,h,c),d,p=bo(l,r),m=0,g=f.length;m<g;++m)(d=f[m])&&Qb(d,t,r,m,f,p);o.push(f),a.push(l)}return new ra(o,a,t,r)}var p1e=lo.prototype.constructor;function m1e(){return new p1e(this._groups,this._parents)}function g1e(e,t){var r,i,n;return function(){var o=Ui(this,e),a=(this.style.removeProperty(e),Ui(this,e));return o===a?null:o===r&&a===i?n:n=t(r=o,i=a)}}function C4(e){return function(){this.style.removeProperty(e)}}function v1e(e,t,r){var i,n=r+"",o;return function(){var a=Ui(this,e);return a===n?null:a===i?o:o=t(i=a,r)}}function y1e(e,t,r){var i,n,o;return function(){var a=Ui(this,e),s=r(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Ui(this,e))),a===c?null:a===i&&c===n?o:(n=c,o=t(i=a,s))}}function b1e(e,t){var r,i,n,o="style."+t,a="end."+o,s;return function(){var c=ta(this,e),u=c.on,l=c.value[o]==null?s||(s=C4(t)):void 0;(u!==r||n!==l)&&(i=(r=u).copy()).on(a,n=l),c.on=i}}function _1e(e,t,r){var i=(e+="")=="transform"?fR:I4;return t==null?this.styleTween(e,g1e(e,i)).on("end.style."+e,C4(e)):typeof t=="function"?this.styleTween(e,y1e(e,i,hk(this,"style."+e,t))).each(b1e(this._id,e)):this.styleTween(e,v1e(e,i,t),r).on("end.style."+e,null)}function T1e(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function E1e(e,t,r){var i,n;function o(){var a=t.apply(this,arguments);return a!==n&&(i=(n=a)&&T1e(e,a,r)),i}return o._value=t,o}function S1e(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,E1e(e,t,r??""))}function w1e(e){return function(){this.textContent=e}}function A1e(e){return function(){var t=e(this);this.textContent=t??""}}function O1e(e){return this.tween("text",typeof e=="function"?A1e(hk(this,"text",e)):w1e(e==null?"":e+""))}function k1e(e){return function(t){this.textContent=e.call(this,t)}}function I1e(e){var t,r;function i(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&k1e(n)),t}return i._value=e,i}function C1e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,I1e(e))}function P1e(){for(var e=this._name,t=this._id,r=D4(),i=this._groups,n=i.length,o=0;o<n;++o)for(var a=i[o],s=a.length,c,u=0;u<s;++u)if(c=a[u]){var l=bo(c,t);Qb(c,e,r,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ra(i,this._parents,e,r)}function D1e(){var e,t,r=this,i=r._id,n=r.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--n===0&&o()}};r.each(function(){var u=ta(this,i),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),u.on=t}),n===0&&o()})}var x1e=0;function ra(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function P4(e){return lo().transition(e)}function D4(){return++x1e}var Wa=lo.prototype;ra.prototype=P4.prototype={constructor:ra,select:h1e,selectAll:d1e,selectChild:Wa.selectChild,selectChildren:Wa.selectChildren,filter:o1e,merge:a1e,selection:m1e,transition:P1e,call:Wa.call,nodes:Wa.nodes,node:Wa.node,size:Wa.size,empty:Wa.empty,each:Wa.each,on:c1e,attr:GEe,attrTween:qEe,style:_1e,styleTween:S1e,text:O1e,textTween:C1e,remove:f1e,tween:LEe,delay:ZEe,duration:e1e,ease:r1e,easeVarying:i1e,end:D1e,[Symbol.iterator]:Wa[Symbol.iterator]};function N1e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var R1e={time:null,delay:0,duration:250,ease:N1e};function M1e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function L1e(e){var t,r;e instanceof ra?(t=e._id,e=e._name):(t=D4(),(r=R1e).time=ak(),e=e==null?null:e+"");for(var i=this._groups,n=i.length,o=0;o<n;++o)for(var a=i[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&Qb(c,e,t,u,a,r||M1e(c,t));return new ra(i,this._parents,e,t)}lo.prototype.interrupt=NEe,lo.prototype.transition=L1e;var B1e=[null];function H1e(e,t){var r=e.__transition,i,n;if(r){t=t==null?null:t+"";for(n in r)if((i=r[n]).state>lk&&i.name===t)return new ra([[e]],B1e,t,+n)}return null}const $1e=Object.freeze(Object.defineProperty({__proto__:null,active:H1e,interrupt:em,transition:P4},Symbol.toStringTag,{value:"Module"})),Jb=e=>()=>e;function F1e(e,{sourceEvent:t,target:r,transform:i,dispatch:n}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:n}})}function na(e,t,r){this.k=e,this.x=t,this.y=r}na.prototype={constructor:na,scale:function(e){return e===1?this:new na(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new na(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fn=new na(1,0,0);x4.prototype=na.prototype;function x4(e){for(;!e.__zoom;)if(!(e=e.parentNode))return fn;return e.__zoom}function dk(e){e.stopImmediatePropagation()}function tm(e){e.preventDefault(),e.stopImmediatePropagation()}function j1e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function U1e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function N4(){return this.__zoom||fn}function G1e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function z1e(){return navigator.maxTouchPoints||"ontouchstart"in this}function V1e(e,t,r){var i=e.invertX(t[0][0])-r[0][0],n=e.invertX(t[1][0])-r[1][0],o=e.invertY(t[0][1])-r[0][1],a=e.invertY(t[1][1])-r[1][1];return e.translate(n>i?(i+n)/2:Math.min(0,i)||Math.max(0,n),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function pk(){var e=j1e,t=U1e,r=V1e,i=G1e,n=z1e,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=EZ,u=ku("start","zoom","end"),l,h,f,d=500,p=150,m=0,g=10;function v(A){A.property("__zoom",N4).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",R).filter(n).on("touchstart.zoom",w).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(A,M,j,W){var K=A.selection?A.selection():A;K.property("__zoom",N4),A!==K?T(A,M,j,W):K.interrupt().each(function(){S(this,arguments).event(W).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},v.scaleBy=function(A,M,j,W){v.scaleTo(A,function(){var K=this.__zoom.k,oe=typeof M=="function"?M.apply(this,arguments):M;return K*oe},j,W)},v.scaleTo=function(A,M,j,W){v.transform(A,function(){var K=t.apply(this,arguments),oe=this.__zoom,fe=j==null?b(K):typeof j=="function"?j.apply(this,arguments):j,Ae=oe.invert(fe),de=typeof M=="function"?M.apply(this,arguments):M;return r(y(_(oe,de),fe,Ae),K,a)},j,W)},v.translateBy=function(A,M,j,W){v.transform(A,function(){return r(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof j=="function"?j.apply(this,arguments):j),t.apply(this,arguments),a)},null,W)},v.translateTo=function(A,M,j,W,K){v.transform(A,function(){var oe=t.apply(this,arguments),fe=this.__zoom,Ae=W==null?b(oe):typeof W=="function"?W.apply(this,arguments):W;return r(fn.translate(Ae[0],Ae[1]).scale(fe.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof j=="function"?-j.apply(this,arguments):-j),oe,a)},W,K)};function _(A,M){return M=Math.max(o[0],Math.min(o[1],M)),M===A.k?A:new na(M,A.x,A.y)}function y(A,M,j){var W=M[0]-j[0]*A.k,K=M[1]-j[1]*A.k;return W===A.x&&K===A.y?A:new na(A.k,W,K)}function b(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function T(A,M,j,W){A.on("start.zoom",function(){S(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(W).end()}).tween("zoom",function(){var K=this,oe=arguments,fe=S(K,oe).event(W),Ae=t.apply(K,oe),de=j==null?b(Ae):typeof j=="function"?j.apply(K,oe):j,Z=Math.max(Ae[1][0]-Ae[0][0],Ae[1][1]-Ae[0][1]),ne=K.__zoom,ue=typeof M=="function"?M.apply(K,oe):M,Oe=c(ne.invert(de).concat(Z/ne.k),ue.invert(de).concat(Z/ue.k));return function(Ce){if(Ce===1)Ce=ue;else{var je=Oe(Ce),Pe=Z/je[2];Ce=new na(Pe,de[0]-je[0]*Pe,de[1]-je[1]*Pe)}fe.zoom(null,Ce)}})}function S(A,M,j){return!j&&A.__zooming||new k(A,M)}function k(A,M){this.that=A,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(A,M),this.taps=0}k.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,M){return this.mouse&&A!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var M=Ht(this.that).datum();u.call(A,this.that,new F1e(A,{sourceEvent:this.sourceEvent,target:v,type:A,transform:this.that.__zoom,dispatch:u}),M)}};function O(A,...M){if(!e.apply(this,arguments))return;var j=S(this,M).event(A),W=this.__zoom,K=Math.max(o[0],Math.min(o[1],W.k*Math.pow(2,i.apply(this,arguments)))),oe=lr(A);if(j.wheel)(j.mouse[0][0]!==oe[0]||j.mouse[0][1]!==oe[1])&&(j.mouse[1]=W.invert(j.mouse[0]=oe)),clearTimeout(j.wheel);else{if(W.k===K)return;j.mouse=[oe,W.invert(oe)],em(this),j.start()}tm(A),j.wheel=setTimeout(fe,p),j.zoom("mouse",r(y(_(W,K),j.mouse[0],j.mouse[1]),j.extent,a));function fe(){j.wheel=null,j.end()}}function D(A,...M){if(f||!e.apply(this,arguments))return;var j=A.currentTarget,W=S(this,M,!0).event(A),K=Ht(A.view).on("mousemove.zoom",de,!0).on("mouseup.zoom",Z,!0),oe=lr(A,j),fe=A.clientX,Ae=A.clientY;zv(A.view),dk(A),W.mouse=[oe,this.__zoom.invert(oe)],em(this),W.start();function de(ne){if(tm(ne),!W.moved){var ue=ne.clientX-fe,Oe=ne.clientY-Ae;W.moved=ue*ue+Oe*Oe>m}W.event(ne).zoom("mouse",r(y(W.that.__zoom,W.mouse[0]=lr(ne,j),W.mouse[1]),W.extent,a))}function Z(ne){K.on("mousemove.zoom mouseup.zoom",null),Vv(ne.view,W.moved),tm(ne),W.event(ne).end()}}function R(A,...M){if(e.apply(this,arguments)){var j=this.__zoom,W=lr(A.changedTouches?A.changedTouches[0]:A,this),K=j.invert(W),oe=j.k*(A.shiftKey?.5:2),fe=r(y(_(j,oe),W,K),t.apply(this,M),a);tm(A),s>0?Ht(this).transition().duration(s).call(T,fe,W,A):Ht(this).call(v.transform,fe,W,A)}}function w(A,...M){if(e.apply(this,arguments)){var j=A.touches,W=j.length,K=S(this,M,A.changedTouches.length===W).event(A),oe,fe,Ae,de;for(dk(A),fe=0;fe<W;++fe)Ae=j[fe],de=lr(Ae,this),de=[de,this.__zoom.invert(de),Ae.identifier],K.touch0?!K.touch1&&K.touch0[2]!==de[2]&&(K.touch1=de,K.taps=0):(K.touch0=de,oe=!0,K.taps=1+!!l);l&&(l=clearTimeout(l)),oe&&(K.taps<2&&(h=de[0],l=setTimeout(function(){l=null},d)),em(this),K.start())}}function L(A,...M){if(this.__zooming){var j=S(this,M).event(A),W=A.changedTouches,K=W.length,oe,fe,Ae,de;for(tm(A),oe=0;oe<K;++oe)fe=W[oe],Ae=lr(fe,this),j.touch0&&j.touch0[2]===fe.identifier?j.touch0[0]=Ae:j.touch1&&j.touch1[2]===fe.identifier&&(j.touch1[0]=Ae);if(fe=j.that.__zoom,j.touch1){var Z=j.touch0[0],ne=j.touch0[1],ue=j.touch1[0],Oe=j.touch1[1],Ce=(Ce=ue[0]-Z[0])*Ce+(Ce=ue[1]-Z[1])*Ce,je=(je=Oe[0]-ne[0])*je+(je=Oe[1]-ne[1])*je;fe=_(fe,Math.sqrt(Ce/je)),Ae=[(Z[0]+ue[0])/2,(Z[1]+ue[1])/2],de=[(ne[0]+Oe[0])/2,(ne[1]+Oe[1])/2]}else if(j.touch0)Ae=j.touch0[0],de=j.touch0[1];else return;j.zoom("touch",r(y(fe,Ae,de),j.extent,a))}}function B(A,...M){if(this.__zooming){var j=S(this,M).event(A),W=A.changedTouches,K=W.length,oe,fe;for(dk(A),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),oe=0;oe<K;++oe)fe=W[oe],j.touch0&&j.touch0[2]===fe.identifier?delete j.touch0:j.touch1&&j.touch1[2]===fe.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(fe=lr(fe,this),Math.hypot(h[0]-fe[0],h[1]-fe[1])<g)){var Ae=Ht(this).on("dblclick.zoom");Ae&&Ae.apply(this,arguments)}}}return v.wheelDelta=function(A){return arguments.length?(i=typeof A=="function"?A:Jb(+A),v):i},v.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Jb(!!A),v):e},v.touchable=function(A){return arguments.length?(n=typeof A=="function"?A:Jb(!!A),v):n},v.extent=function(A){return arguments.length?(t=typeof A=="function"?A:Jb([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),v):t},v.scaleExtent=function(A){return arguments.length?(o[0]=+A[0],o[1]=+A[1],v):[o[0],o[1]]},v.translateExtent=function(A){return arguments.length?(a[0][0]=+A[0][0],a[1][0]=+A[1][0],a[0][1]=+A[0][1],a[1][1]=+A[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(A){return arguments.length?(r=A,v):r},v.duration=function(A){return arguments.length?(s=+A,v):s},v.interpolate=function(A){return arguments.length?(c=A,v):c},v.on=function(){var A=u.on.apply(u,arguments);return A===u?v:A},v.clickDistance=function(A){return arguments.length?(m=(A=+A)*A,v):Math.sqrt(m)},v.tapDistance=function(A){return arguments.length?(g=+A,v):g},v}const W1e=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:na,zoom:pk,zoomIdentity:fn,zoomTransform:x4},Symbol.toStringTag,{value:"Module"}));function Y1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,X1e(i.key),i)}}function q1e(e,t,r){return t&&R4(e.prototype,t),r&&R4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function X1e(e){var t=K1e(e,"string");return typeof t=="symbol"?t:String(t)}function K1e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Z1e=40,hn=0,yi=5,M4=4;let e_=function(){function e(t){Y1e(this,e),this.pAxis=new He.PIXI.Graphics,this.track=t,this.axisTexts=[],this.axisTextFontFamily="Arial",this.axisTextFontSize=10}return q1e(e,[{key:"startAxis",value:function(r){const i=this.pAxis;i.clear(),i.lineStyle(1,this.track.getTheme()===mr?it("#ffffff"):0,1),i.moveTo(0,0),i.lineTo(0,r)}},{key:"createAxisTexts",value:function(r,i){this.tickValues=this.calculateAxisTickValues(r,i);let n=0;const o=this.track.getTheme()===mr?"white":"black";for(!this.track.options||!this.track.options.axisLabelFormatting||this.track.options.axisLabelFormatting==="scientific"?this.tickFormat=Oi(".2"):this.tickFormat=a=>a;n<this.tickValues.length;){const a=this.tickValues[n];for(;this.axisTexts.length<=n;){const s=new He.PIXI.Text(a,{fontSize:`${this.axisTextFontSize}px`,fontFamily:this.axisTextFontFamily,fill:o});this.axisTexts.push(s),this.pAxis.addChild(s)}this.axisTexts[n].text=this.tickFormat(a),this.axisTexts[n].anchor.y=.5,this.axisTexts[n].anchor.x=.5,n++}for(;this.axisTexts.length>this.tickValues.length;){const a=this.axisTexts.pop();this.pAxis.removeChild(a),a.destroy(!0)}}},{key:"calculateAxisTickValues",value:function(r,i){const n=Math.max(Math.ceil(i/Z1e),1);let o=r.ticks(n);return o.length<1&&(o=r.ticks(n+1),o.length>1&&(o=[o[0]])),o}},{key:"drawAxisLeft",value:function(r,i){this.startAxis(i),this.createAxisTexts(r,i);const n=this.pAxis;this.track.getTheme()===mr&&n.lineStyle(n.lineWidth||n._lineStyle.width,it("#ffffff")),n.moveTo(0,0),n.lineTo(-(hn+yi),0),n.moveTo(0,i),n.lineTo(-(hn+yi),i);for(let o=0;o<this.axisTexts.length;o++){const a=this.tickValues[o];this.axisTexts[o].x=-(hn+yi+M4+this.axisTexts[o].width/2),this.axisTexts[o].y=r(a),n.moveTo(-hn,r(a)),n.lineTo(-(hn+yi),r(a)),this.track&&this.track.flipText&&(this.axisTexts[o].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"drawAxisRight",value:function(r,i){this.startAxis(i),this.createAxisTexts(r,i);const n=this.pAxis;this.track.getTheme()===mr&&n.lineStyle(n.lineWidth||n._lineStyle.width,it("#ffffff")),n.moveTo(0,0),n.lineTo(hn+yi,0),n.moveTo(0,i),n.lineTo(hn+yi,i);for(let o=0;o<this.axisTexts.length;o++){const a=this.tickValues[o];this.axisTexts[o].x=hn+yi+M4+this.axisTexts[o].width/2,this.axisTexts[o].y=r(a),n.moveTo(hn,r(a)),n.lineTo(hn+yi,r(a)),this.track&&this.track.flipText&&(this.axisTexts[o].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"hideOverlappingAxisLabels",value:function(){for(let r=this.axisTexts.length-1;r>=0;r--)this.axisTexts[r].visible=!0;for(let r=this.axisTexts.length-1;r>=0;r--){if(!this.axisTexts[r].visible)continue;let i=r-1;for(;i>=0&&this.axisTexts[r].y+this.axisTexts[r].height/2>this.axisTexts[i].y-this.axisTexts[i].height/2;){this.axisTexts[i].visible=!1;i-=1}}}},{key:"exportVerticalAxis",value:function(r){const i=document.createElement("g");i.setAttribute("class","axis-vertical");let n="black";this.track&&this.track.options.lineStrokeColor&&(n=this.track.options.lineStrokeColor),this.track.getTheme()===mr&&(n="#cccccc");const o=document.createElement("path"),a=Math.random().toString(36).substring(7);return o.setAttribute("fill","transparent"),o.setAttribute("stroke",n),o.setAttribute("id",`axis-line-${a}`),o.setAttribute("d",`M0,0 L0,${r}`),i.appendChild(o),i}},{key:"createAxisSVGLine",value:function(){let r="black";this.track&&this.track.options.lineStrokeColor&&(r=this.track.options.lineStrokeColor),this.track.getTheme()===mr&&(r="#cccccc");const i=document.createElement("path"),n=Math.random().toString(36).substring(7);return i.setAttribute("id",`tick-mark-${n}`),i.setAttribute("fill","transparent"),i.setAttribute("stroke",r),i}},{key:"createAxisSVGText",value:function(r){const i=document.createElement("text"),n=Math.random().toString(36).substring(7);return i.innerHTML=r,i.setAttribute("id",`axis-text-${n}`),i.setAttribute("text-anchor","middle"),i.setAttribute("font-family",this.axisTextFontFamily),i.setAttribute("font-size",this.axisTextFontSize),i.setAttribute("dy",this.axisTextFontSize/2-2),i}},{key:"exportAxisLeftSVG",value:function(r,i){const n=this.exportVerticalAxis(i),o=this.createAxisSVGLine();n.appendChild(o),o.setAttribute("d",`M0,0 L${+(hn+yi)},0`);const a=this.createAxisSVGLine();n.appendChild(a),a.setAttribute("d",`M0,${i} L${+(hn+yi)},${i}`);for(let s=0;s<this.axisTexts.length;s++){const c=this.tickValues[s],u=this.axisTexts[s],l=this.createAxisSVGLine();n.appendChild(l),l.setAttribute("d",`M${+hn},${r(c)} L${+(hn+yi)},${r(c)}`);const h=document.createElement("g");if(n.appendChild(h),u.visible){const f=this.createAxisSVGText(u.text);h.appendChild(f)}h.setAttribute("transform",`translate(${u.position.x},${u.position.y})
             scale(${u.scale.x},${u.scale.y})`)}return n}},{key:"exportAxisRightSVG",value:function(r,i){const n=this.exportVerticalAxis(i),o=this.createAxisSVGLine();n.appendChild(o),o.setAttribute("d",`M0,0 L${-(hn+yi)},0`);const a=this.createAxisSVGLine();n.appendChild(a),a.setAttribute("d",`M0,${i} L${-(hn+yi)},${i}`);for(let s=0;s<this.axisTexts.length;s++){const c=this.tickValues[s],u=this.axisTexts[s],l=this.createAxisSVGLine();n.appendChild(l),l.setAttribute("d",`M${-hn},${r(c)} L${-(hn+yi)},${r(c)}`);const h=document.createElement("g");if(n.appendChild(h),u.visible){const f=this.createAxisSVGText(u.text);h.appendChild(f)}h.setAttribute("transform",`translate(${u.position.x},${u.position.y})
             scale(${u.scale.x},${u.scale.y})`)}return n}},{key:"clearAxis",value:function(){const r=this.pAxis;for(;this.axisTexts.length;){const i=this.axisTexts.pop();r.removeChild(i)}r.clear()}}]),e}();const L4=(e,t)=>{const r=[];for(let i=e;i<t;i++)r.push(i);return r},Q1e=(e,t)=>{const r=e.map(s=>+s).sort((s,c)=>c-s),i=t.range()[1]-t.range()[0],o=r.map(s=>(t.domain()[1]-t.domain()[0])/s).map(s=>s/i),a=o.filter(s=>s<1);return a.length===0?0:o.indexOf(a[a.length-1])},J1e=(e,t,r,i)=>{const n=e.range()[1]-e.range()[0],o=Math.max((r-t)/(e.domain()[1]-e.domain()[0]),1),s=Math.max(0,Math.ceil(Math.log(n/384)/Math.LN2));let c=Math.round(Math.log(o)/Math.LN2)+s,u=0;return i&&(u=Math.floor(Math.log(256)/Math.log(2)-Math.log(i)/Math.log(2))),c+=u,c},B4=(e,t,r)=>{if(typeof r>"u"&&(r=Number.MAX_SAFE_INTEGER),e.resolutions)return Q1e(e.resolutions,t,e.min_pos[0],e.max_pos[0]-2);const i=J1e(t,e.min_pos[0],e.max_pos[0],e.bins_per_dimension||e.tile_size),n=Math.min(i,r);return Math.max(n,0)},eSe=(e,t,r,i,n,o)=>{const a=Math.min(e,n),s=o/2**a,c=1e-7;return L4(Math.max(0,Math.floor((t.domain()[0]-r)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-r-c)/s)))},tSe=(e,t,r,i=Number.MAX_VALUE,n=256)=>{const a=e*n,s=20,c=Math.max(0,Math.floor((t.domain()[0]-r)/a)),u=Math.ceil(Math.min(i,t.domain()[1]-r-1e-7)/a);let l=L4(c,u);return l.length>s&&(console.warn(`Too many visible tiles: ${l.length} truncating to ${s}`),l=l.slice(0,s)),l},rSe=(e,t)=>{if(!e)return[];const r=B4(e,t,e.max_zoom);if(e.resolutions){const o=e.resolutions.map(c=>+c).sort((c,u)=>u-c);return tSe(o[r],t,e.min_pos[0],e.max_pos[0]).map(c=>[r,c])}return eSe(r,t,e.min_pos[0],e.max_pos[0],e.max_zoom,e.max_width).map(o=>[r,o])},nSe=(e,t)=>{if(e.axis||(e.axis=new e_(e),e.pBase.addChild(e.axis.pAxis)),!e.options.axisPositionVertical&&!e.options.axisPositionHorizontal){e.axis.clearAxis();return}if(e.options.axisPositionVertical&&e.options.axisPositionVertical==="hidden"){e.axis.clearAxis();return}if(e.options.axisPositionHorizontal&&e.options.axisPositionHorizontal==="hidden"){e.axis.clearAxis();return}const r=e.options.axisMargin||0;e.options.axisPositionHorizontal==="left"||e.options.axisPositionVertical==="top"?(e.axis.pAxis.position.x=e.position[0]+r,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1])):e.options.axisPositionHorizontal==="outsideLeft"||e.options.axisPositionVertical==="outsideTop"?(e.axis.pAxis.position.x=e.position[0]+r,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):e.options.axisPositionHorizontal==="right"||e.options.axisPositionVertical==="bottom"?(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-r,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):(e.options.axisPositionHorizontal==="outsideRight"||e.options.axisPositionVertical==="outsideBottom")&&(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-r,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1]))},iSe=(e,t)=>{const r=e.valueScaleTransform,{y:i,k:n}=r,o=e.dimensions[1];i+t/n>-(n-1)*o&&i+t/n<0&&(e.valueScaleTransform=r.translate(0,t/n)),Object.values(e.fetchedTiles).forEach(a=>{a.graphics.position.y=e.valueScaleTransform.y}),e.animate()},oSe=(e,t,r,i)=>{const n=r.k,o=r.y,a=(e-o)/n,s=Math.max(n/t,1);let c=n*a+o-s*a;return c=Math.max(c,-(s-1)*i),c=Math.min(c,0),fn.translate(0,c).scale(s)},aSe=(e,t)=>{const r=+t.split(".")[0],i=+t.split(".")[1],n=e.max_width,o=e.min_pos[0],a=n/2**r;return{tileX:o+i*a,tileWidth:a}};function sSe(e,t){Object.values(e.fetchedTiles).forEach(r=>{if(!r.drawnAtScale)return;const i=r.drawnAtScale.range(),n=e._xScale.range();if(i[0]!==n[0]||i[1]!==n[1]){e.renderTile(r);return}const o=(r.drawnAtScale.domain()[1]-r.drawnAtScale.domain()[0])/(e._xScale.domain()[1]-e._xScale.domain()[0]);if(o>2||o<.5)e.renderTile(r);else{const s=e._xScale.domain().map(r.drawnAtScale)[0];for(const c of t)try{c(r).scale.x=o,c(r).x=-s*o}catch{}}})}const fc={calculate1DVisibleTiles:rSe,calculate1DZoomLevel:B4,drawAxis:nSe,movedY:iSe,getTilePosAndDimensions:aSe,stretchRects:sSe,zoomedY:oSe},lSe=Object.freeze(Object.defineProperty({__proto__:null,DenseDataExtrema1D:Yd,DenseDataExtrema2D:JS,IS_TRACK_RANGE_SELECTABLE:$u,absToChr:Dr,accessorTransposition:QL,addArrays:JL,addClass:yie,base64ToCanvas:bie,changeOptions:TEe,chrToAbs:Hd,chromInfoBisector:BS,cloneEvent:e5,colorDomainToRgbaArray:Ma,colorToHex:it,colorToRgba:t5,dataToGenomicLoci:sy,debounce:HS,decToHexStr:$S,dictFromTuples:r5,dictItems:Wi,dictKeys:Yi,dictValues:ur,download:$d,expandCombinedTracks:Sy,fillInMinWidths:_5,flatten:Hie,forEach:$ie,forwardEvent:hy,genomeLociToPixels:Fie,genomicRangeToChromosomeChunks:jie,getAggregationFunction:ew,getDefaultTrackForDatatype:WS,getElementDim:j5,getTiledPlot:_ae,getTrackByUid:Ci,getTrackConfFromHGC:qoe,getTrackObjById:Zd,getTrackObjectFromHGC:Ay,getTrackPositionByUid:Qd,getTrackRenderer:cB,getXylofon:G5,gradient:z5,hasClass:ay,hasParent:V5,hexStrToInt:W5,intoTheVoid:Y5,isTrackOrChildTrack:X5,isWithin:lw,latToY:nae,lngToX:oae,loadChromInfos:iae,map:aw,max:cw,maxNonZero:uw,min:Z5,minNonZero:fw,mod:aae,mountHGComponent:ok,mountHGComponentAsync:AEe,ndarrayAssign:J5,ndarrayFlatten:tB,ndarrayToList:eB,numericifyVersion:rB,objVals:_y,or:Jd,parseChromsizesRows:Ty,pixiTextToSvg:Ey,q:sae,rangeQuery2d:lae,reduce:T5,relToAbsChromPos:cae,removeClass:fae,removeHGComponent:wEe,resetD3BrushStyle:Hu,rgbToHex:hae,scalesCenterAndK:tn,scalesToGenomeLoci:nB,segmentsToRows:wy,selectedItemsToSize:qd,showMousePosition:Ss,some:gae,sum:ws,svgLine:dw,throttleAndDebounce:iB,tileToCanvas:vae,timeout:rw,toVoid:ql,totalTrackPixelHeight:yae,trackUtils:fc,trimTrailingSlash:my,valueToColor:pw,visitPositionedTracks:La,visitTracks:ow,waitForJsonComplete:Vb,waitForTilesLoaded:Xp,waitForTransitionsFinished:ik},Symbol.toStringTag,{value:"Module"}));function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},mk.apply(this,arguments)}const{Provider:cSe,Consumer:uSe}=E.createContext({close:ql,open:ql}),hc=e=>E.forwardRef((t,r)=>E.createElement(uSe,null,i=>E.createElement(e,mk({ref:r},t,{theme:i})))),$s={"track-control":"_track-control_w7hx2_1","track-control-vertical":"_track-control-vertical_w7hx2_2","track-control-dark":"_track-control-dark_w7hx2_15","track-control-active":"_track-control-active_w7hx2_16 _track-control_w7hx2_1","track-control-left":"_track-control-left_w7hx2_24","track-control-vertical-active":"_track-control-vertical-active_w7hx2_30","track-control-padding-right":"_track-control-padding-right_w7hx2_48","track-control-button":"_track-control-button_w7hx2_52","track-control-button-vertical":"_track-control-button-vertical_w7hx2_81"},fSe=e=>Zt({[$s["track-control-active"]]:e.isVisible,[$s["track-control"]]:!e.isVisible,[$s["track-control-left"]]:e.isAlignLeft,[$s["track-control-vertical"]]:e.isVertical,[$s["track-control-padding-right"]]:e.paddingRight,[$s["track-control-dark"]]:e.theme===mr}),t_=e=>Zt("no-zoom",$s["track-control-button"],{[$s["track-control-button-vertical"]]:e.isVertical});let gk=null,H4=null;function $4(e){(!e||!gk||Object.keys(e).some(i=>gk[i]!==e[i]))&&(gk=e,H4=LS(()=>E.createElement("svg",{className:t_(e),style:{height:"20px",width:"20px",...e.imgStyleMove}},E.createElement("title",null,"Move track"),E.createElement("use",{xlinkHref:"#move"}))));let t,r;return E.createElement("div",{className:fSe(e)},e.isMoveable&&E.createElement(H4,null),E.createElement("svg",{ref:i=>{t=i},className:t_(e),onClick:()=>{e.onConfigTrackMenuOpened(e.uid,t.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleSettings}},E.createElement("title",null,"Configure track"),E.createElement("use",{xlinkHref:"#cog"})),e.onAddSeries&&E.createElement("svg",{className:t_(e),onClick:()=>e.onAddSeries(e.uid),style:{height:"20px",width:"20px",...e.imgStyleAdd}},E.createElement("title",null,"Add series"),E.createElement("use",{xlinkHref:"#plus"})),E.createElement("svg",{ref:i=>{r=i},className:t_(e),onClick:()=>{e.onCloseTrackMenuOpened(e.uid,r.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleClose}},E.createElement("title",null,"Close track"),E.createElement("use",{xlinkHref:"#cross"})))}$4.propTypes={imgStyleAdd:N.object,imgStyleClose:N.object,imgStyleMove:N.object,imgStyleSettings:N.object,isAlignLeft:N.bool,isMoveable:N.bool,isVertical:N.bool,isVisible:N.bool,onConfigTrackMenuOpened:N.func,onCloseTrackMenuOpened:N.func,onAddSeries:N.func,paddingRight:N.bool,theme:N.symbol.isRequired,uid:N.string};const r_=hc($4),vk={"center-track":"_center-track_fiu64_1","center-track-container":"_center-track-container_fiu64_6"},_o={"track-range-selection":"_track-range-selection_5bcsr_1","track-range-selection-active":"_track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-primary":"_track-range-selection-active-primary_5bcsr_14 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-secondary":"_track-range-selection-active-secondary_5bcsr_18 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-group-inactive":"_track-range-selection-group-inactive_5bcsr_22","track-range-selection-group-brush-selection":"_track-range-selection-group-brush-selection_5bcsr_26"};function hSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,pSe(i.key),i)}}function dSe(e,t,r){return t&&F4(e.prototype,t),r&&F4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pSe(e){var t=mSe(e,"string");return typeof t=="symbol"?t:String(t)}function mSe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yk(e,t)}function yk(e,t){return yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},yk(e,t)}function vSe(e){var t=bSe();return function(){var i=n_(e),n;if(t){var o=n_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ySe(this,n)}}function ySe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fs(e)}function Fs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n_(e)}const i_={pointerEvents:"all"};function Rf(e){return e&&e.sourceEvent}let bk=function(e){gSe(r,e);var t=vSe(r);function r(i){var n;return hSe(this,r),n=t.call(this,i),n.state={isVisible:!1},n.brushBehaviorX=ry().on("brush",n.brushedX.bind(Fs(n))).on("end",n.brushedXEnded.bind(Fs(n))),n.brushBehaviorY=Dd().on("brush",n.brushedY.bind(Fs(n))).on("end",n.brushedYEnded.bind(Fs(n))),n.brushBehaviorXY=OS().on("start",n.brushStarted.bind(Fs(n))).on("brush",n.brushedXY.bind(Fs(n))).on("end",n.brushedXYEnded.bind(Fs(n))),n}return dSe(r,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush2d()}},{key:"shouldComponentUpdate",value:function(n,o){if(this.rangeSelectionTriggeredXY){if(this.rangeSelectionTriggeredXY=!1,this.rangeSelectionTriggeredXYEnd){const a=n.rangeSelection[0]||null;this.moveBrushXY([a,n.rangeSelection[1]],!0),this.rangeSelectionTriggeredXYEnd=!1}return this.state!==o}if(this.props.rangeSelection!==n.rangeSelection){const a=n.rangeSelection[0]||null;this.props.is1dRangeSelection?(this.rangeSelectionTriggeredX||this.moveBrushX(a,n.rangeSelectionEnd),this.rangeSelectionTriggeredXEnd&&this.moveBrushX(a,n.rangeSelectionEnd,!0),this.rangeSelectionTriggeredY||this.moveBrushY(a,n.rangeSelectionEnd),this.rangeSelectionTriggeredYEnd&&this.moveBrushY(a,n.rangeSelectionEnd,!0),this.rangeSelectionTriggeredX=!1,this.rangeSelectionTriggeredXEnd=!1,this.rangeSelectionTriggeredY=!1,this.rangeSelectionTriggeredYEnd=!1):this.moveBrushXY([a,n.rangeSelection[1]],n.rangeSelectionEnd);const s=this.props.is1dRangeSelection&&!n.is1dRangeSelection&&a===null;return this.state!==o||s}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush2d():(this.removeBrush1d(),this.removeBrush2d())}},{key:"addBrush1d",value:function(){!this.brushElX||!this.brushElY||this.brushElXOld===this.brushElX&&this.brushElYOld===this.brushElY||(this.brushElXOld&&this.brushElXOld.on(".brush",null),this.brushElYOld&&this.brushElYOld.on(".brush",null),this.brushElX.call(this.brushBehaviorX),this.brushElY.call(this.brushBehaviorY),Hu(this.brushElX,_o["track-range-selection-group-brush-selection"]),Hu(this.brushElY,_o["track-range-selection-group-brush-selection"]),this.brushElXOld=this.brushElX,this.brushElYOld=this.brushElY,this.brushIs1dBound=!0)}},{key:"addBrush2d",value:function(){!this.brushElXY||this.brushElXYOld===this.brushElXY||(this.brushElXYOld&&this.brushElXYOld.on(".brush",null),this.brushElXY.call(this.brushBehaviorXY),this.brushElXYOld=this.brushElXY,this.brushIs2dBound=!0,Hu(this.brushElXY,_o["track-range-selection-group-brush-selection"]))}},{key:"brushedX",value:function(n){const o=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Rf(n)||!this.props.onRangeSelectionX||!this.props.is1dRangeSelection||o)&&(this.rangeSelectionTriggeredX=!0,this.props.onRangeSelectionX(n.selection))}},{key:"brushedXEnded",value:function(n){const o=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,!(!Rf(n)||!this.props.onRangeSelectionX||!this.props.is1dRangeSelection||o)&&(this.rangeSelectionTriggeredX=!0,this.rangeSelectionTriggeredXEnd=!0,this.props.onRangeSelectionXEnd(n.selection))}},{key:"brushedY",value:function(n){const o=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Rf(n)||!this.props.onRangeSelectionY||!this.props.is1dRangeSelection||o)&&(this.rangeSelectionTriggeredY=!0,this.props.onRangeSelectionY(n.selection))}},{key:"brushedYEnded",value:function(n){const o=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,!(!Rf(n)||!this.props.onRangeSelectionY||!this.props.is1dRangeSelection||o)&&(this.rangeSelectionTriggeredY=!0,this.rangeSelectionTriggeredYEnd=!0,this.props.onRangeSelectionYEnd(n.selection))}},{key:"brushedXY",value:function(n){const o=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Rf(n)||!this.props.onRangeSelectionXY||o||this.props.is1dRangeSelection)&&(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionXY([[n.selection[0][0],n.selection[1][0]],[n.selection[0][1],n.selection[1][1]]]))}},{key:"brushedXYEnded",value:function(n){if(this.props.is1dRangeSelection)return;const o=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,n.selection&&n.sourceEvent&&this.props.onRangeSelectionXY&&!o&&(this.rangeSelectionTriggeredXY=!0,this.rangeSelectionTriggeredXYEnd=!0,this.props.onRangeSelectionXYEnd([[n.selection[0][0],n.selection[1][0]],[n.selection[0][1],n.selection[1][1]]])),n.selection||(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionReset())}},{key:"brushStarted",value:function(n){Rf(n)&&this.props.onRangeSelectionStart()}},{key:"moveBrushX",value:function(n,o=!1){if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const a=n?[this.props.scaleX(n[0]),this.props.scaleX(n[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,o?this.brushElX.transition().call(this.brushBehaviorX.move,a):this.brushElX.call(this.brushBehaviorX.move,a)}},{key:"moveBrushY",value:function(n,o=!1){if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const a=n?[this.props.scaleY(n[0]),this.props.scaleY(n[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,o?this.brushElY.transition().call(this.brushBehaviorY.move,a):this.brushElY.call(this.brushBehaviorY.move,a)}},{key:"moveBrushXY",value:function(n,o=!1){if(!this.brushEl)return;const a=[[this.props.scaleX(n[0][0]),this.props.scaleY(n[1][0])],[this.props.scaleX(n[0][1]),this.props.scaleY(n[1][1])]];this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,o?this.brushElXY.transition().call(this.brushBehaviorXY.move,a):this.brushElXY.call(this.brushBehaviorXY.move,a)}},{key:"mouseEnterHandler",value:function(){this.props.isRangeSelectionActive||this.setState({isVisible:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({isVisible:!1})}},{key:"removeBrush1d",value:function(){this.brushIs1dBound&&(this.brushElX&&(this.brushElX.call(this.brushBehaviorX.move,null),this.brushElX.on(".brush",null)),this.brushElY&&(this.brushElY.call(this.brushBehaviorY.move,null),this.brushElY.on(".brush",null)),this.brushIs1dBound=!1)}},{key:"removeBrush2d",value:function(){this.brushIs2dBound&&this.brushElXY&&(this.brushElXY.call(this.brushBehaviorXY.move,null),this.brushElXY.on(".brush",null),this.brushElXYOld=void 0,this.brushIs2dBound=!1,this.props.is1dRangeSelection||this.props.onRangeSelectionReset())}},{key:"render",value:function(){const n=this.props.tracks.map(u=>$u(u)).reduce(Jd,!1),o=this.props.tracks.some(u=>u.contents?u.contents.some(l=>l.type==="heatmap"?l.options.colorbarPosition==="topRight":!1):u.type==="heatmap"?u.options.colorbarPosition==="topRight":!1);let a="track-range-selection";this.props.isRangeSelectionActive&&(a+=this.props.is1dRangeSelection?"-active-secondary":"-active-primary");const s=Zt(!this.props.is1dRangeSelection&&_o["track-range-selection-group-inactive"]),c=Zt(this.props.is1dRangeSelection&&_o["track-range-selection-group-inactive"]);return E.createElement("div",{className:Zt(this.props.className,vk["center-track"]),onMouseEnter:this.mouseEnterHandler.bind(this),onMouseLeave:this.mouseLeaveHandler.bind(this),style:{height:this.props.height,width:this.props.width}},n&&E.createElement("svg",{className:_o[a],style:{height:this.props.height,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"},E.createElement("g",{ref:u=>{this.brushElX=Ht(u)},className:s}),E.createElement("g",{ref:u=>{this.brushElY=Ht(u)},className:s}),E.createElement("g",{ref:u=>{this.brushElXY=Ht(u)},className:c})),this.props.editable&&E.createElement(r_,{imgStyleAdd:i_,imgStyleClose:i_,imgStyleMove:i_,imgStyleSettings:i_,isMoveable:!1,isVisible:this.state.isVisible||this.props.uid===this.props.configTrackMenuId,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,paddingRight:o,uid:this.props.uid}))}}]),r}(E.Component);bk.defaultProps={className:"center-track",configTrackMenuId:null,is1dRangeSelection:!1,rangeSelectionEnd:N.bool,isRangeSelectionActive:!1,scaleX:e=>e,scaleY:e=>e},bk.propTypes={className:N.string,configTrackMenuId:N.string,editable:N.bool,height:N.number.isRequired,is1dRangeSelection:N.bool,isRangeSelectionActive:N.bool,onAddSeries:N.func.isRequired,onCloseTrackMenuOpened:N.func.isRequired,onConfigTrackMenuOpened:N.func.isRequired,onRangeSelectionX:N.func.isRequired,onRangeSelectionXEnd:N.func.isRequired,onRangeSelectionY:N.func.isRequired,onRangeSelectionYEnd:N.func.isRequired,onRangeSelectionXY:N.func.isRequired,onRangeSelectionXYEnd:N.func.isRequired,onRangeSelectionReset:N.func.isRequired,onRangeSelectionStart:N.func.isRequired,rangeSelection:N.array.isRequired,rangeSelectionEnd:N.bool,scaleX:N.func,scaleY:N.func,tracks:N.array.isRequired,uid:N.string.isRequired,width:N.number.isRequired};const o_={__fake__:!0,publish:()=>{},subscribe:()=>({event:"",handler:()=>{}}),unsubscribe:()=>{},clear:()=>{}},{Provider:_Se,Consumer:TSe}=E.createContext(o_);function Mf(e){return E.forwardRef((t,r)=>E.createElement(TSe,null,i=>E.createElement(e,{ref:r,...t,pubSub:i})))}const ESe={"drag-listening-div-active":"_drag-listening-div-active_19gkt_1"};function SSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ASe(i.key),i)}}function wSe(e,t,r){return t&&j4(e.prototype,t),r&&j4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ASe(e){var t=OSe(e,"string");return typeof t=="symbol"?t:String(t)}function OSe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_k(e,t)}function _k(e,t){return _k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},_k(e,t)}function ISe(e){var t=DSe();return function(){var i=a_(e),n;if(t){var o=a_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return CSe(this,n)}}function CSe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PSe(e)}function PSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function a_(e){return a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a_(e)}let Tk=function(e){kSe(r,e);var t=ISe(r);function r(i){var n;return SSe(this,r),n=t.call(this,i),n.state={dragOnTop:!1},n}return wSe(r,[{key:"render",value:function(){let n="red";return this.props.enabled&&this.state.dragOnTop?n="green":this.props.enabled&&(n="blue"),E.createElement("div",{className:Zt("DragListeningDiv",{[ESe["drag-listening-div-active"]]:this.props.enabled}),onDragEnter:()=>{this.setState({dragOnTop:!0})},onDragLeave:()=>{this.setState({dragOnTop:!1})},onDragOver:o=>{o.preventDefault()},onDrop:()=>{if(!this.props.enabled)return;const o=this.props.draggingHappening,a={type:this.props.defaultTrackType,uid:xt.nice(),tilesetUid:o.tilesetUid,server:o.server};this.props.onTrackDropped(a),this.props.pubSub.publish("trackDropped",a)},style:{background:n,opacity:.6,...this.props.style}})}}]),r}(E.Component);Tk.defaultProps={enabled:!1,style:{},draggingHappening:{},onTrackDropped:()=>{}},Tk.propTypes={enabled:N.bool,style:N.object,defaultTrackType:N.object,draggingHappening:N.object,onTrackDropped:N.func,position:N.string.isRequired,pubSub:N.object.isRequired};const s_=Mf(Tk),dc={"gallery-tracks":"_gallery-tracks_fbxxi_1","gallery-track":"_gallery-track_fbxxi_1","gallery-sub-track":"_gallery-sub-track_fbxxi_18","gallery-invisible-track":"_gallery-invisible-track_fbxxi_19"},To={"tiled-plot":"_tiled-plot_1y7td_1",horizontalList:"_horizontalList_1y7td_7",list:"_list_1y7td_14",stylizedList:"_stylizedList_1y7td_21",stylizedItem:"_stylizedItem_1y7td_28",stylizedHelper:"_stylizedHelper_1y7td_39",horizontalItem:"_horizontalItem_1y7td_44","resizable-track":"_resizable-track_1y7td_55",domain:"_domain_1y7td_60"};function xSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,RSe(i.key),i)}}function NSe(e,t,r){return t&&U4(e.prototype,t),r&&U4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RSe(e){var t=MSe(e,"string");return typeof t=="symbol"?t:String(t)}function MSe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ek(e,t)}function Ek(e,t){return Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Ek(e,t)}function BSe(e){var t=FSe();return function(){var i=l_(e),n;if(t){var o=l_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return HSe(this,n)}}function HSe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Se(e)}function $Se(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l_(e){return l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l_(e)}const c_={pointerEvents:"all"};let G4=function(e){LSe(r,e);var t=BSe(r);function r(i){var n;return xSe(this,r),n=t.call(this,i),n.state={hovering:!1},n}return NSe(r,[{key:"mouseEnterHandler",value:function(){this.setState({hovering:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({hovering:!1})}},{key:"render",value:function(){return E.createElement("div",{className:Zt("gallery-tracks",dc["gallery-tracks"])},this.props.tracks&&this.props.tracks.map((n,o)=>E.createElement("div",{key:n.uid||o,className:dc["gallery-track"],onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:n.height*o,right:n.height*o,bottom:n.height*o,left:n.height*o}},E.createElement("div",{className:dc["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,left:0,height:n.height}}),E.createElement("div",{className:dc["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,bottom:0,width:n.height}}),E.createElement("div",{className:dc["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{right:0,bottom:0,left:0,height:n.height}}),E.createElement("div",{className:dc["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,bottom:0,left:0,width:n.height}}),E.createElement("div",{className:dc["gallery-invisible-track"],onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:n.height,right:n.height,bottom:n.height,left:n.height}}),this.props.editable&&E.createElement(r_,{configMenuVisible:!0,imgStyleAdd:c_,imgStyleClose:c_,imgStyleMove:c_,imgStyleSettings:c_,isMoveable:!1,isVisible:this.state.hovering,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:n.uid||o}))))}}]),r}(E.Component);G4.propTypes={editable:N.bool,onCloseTrackMenuOpened:N.func.isRequired,onConfigTrackMenuOpened:N.func.isRequired,tracks:N.array};function jSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,GSe(i.key),i)}}function USe(e,t,r){return t&&z4(e.prototype,t),r&&z4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GSe(e){var t=zSe(e,"string");return typeof t=="symbol"?t:String(t)}function zSe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let pc=function(){function e(t,r){jSe(this,e),this.context=t;const{id:i,pubSub:n,getTheme:o}=t;this.pubSub=n??o_,this.id=i,this._xScale=bt(),this._yScale=bt(),this._refXScale=bt(),this._refYScale=bt(),this.position=[0,0],this.dimensions=[1,1],this.options=r,this.pubSubs=[],this.getTheme=o??(()=>{}),this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.defaultMouseMoveHandler.bind(this))),this.isLeftModified=!1}return USe(e,[{key:"isWithin",value:function(r,i){let n=r,o=i,a=this.position[0],s=this.position[1];return this.isLeftModified&&(n=i,o=r,a=this.position[1],s=this.position[0]),lw(n,o,a,this.dimensions[0]+a,s,this.dimensions[1]+s)}},{key:"getProp",value:function(r){return()=>this[r]}},{key:"getData",value:function(){}},{key:"click",value:function(r,i,n){return{type:"generic",event:n,payload:null}}},{key:"clickOutside",value:function(){}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"setDimensions",value:function(r){this.dimensions=r,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]])}},{key:"refXScale",value:function(r){return r?(this._refXScale=r,this):this._refXScale}},{key:"refYScale",value:function(r){return r?(this._refYScale=r,this):this._refYScale}},{key:"xScale",value:function(r){return r?(this._xScale=r,this):this._xScale}},{key:"yScale",value:function(r){return r?(this._yScale=r,this):this._yScale}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i)}},{key:"refScalesChanged",value:function(r,i){this._refXScale=r,this._refYScale=i}},{key:"draw",value:function(){}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(r){this.position=r}},{key:"defaultMouseMoveHandler",value:function(r){}},{key:"remove",value:function(){this.pubSubs.forEach(r=>this.pubSub.unsubscribe(r)),this.pubSubs=[]}},{key:"rerender",value:function(r){}},{key:"respondsToPosition",value:function(r,i){return this.isWithin(r,i)}},{key:"zoomedY",value:function(r,i){}},{key:"movedY",value:function(r){}}]),e}();function VSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,YSe(i.key),i)}}function WSe(e,t,r){return t&&V4(e.prototype,t),r&&V4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function YSe(e){var t=qSe(e,"string");return typeof t=="symbol"?t:String(t)}function qSe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u_(){return typeof Reflect<"u"&&Reflect.get?u_=Reflect.get.bind():u_=function(t,r,i){var n=XSe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},u_.apply(this,arguments)}function XSe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Lf(e),e!==null););return e}function KSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sk(e,t)}function Sk(e,t){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Sk(e,t)}function ZSe(e){var t=ewe();return function(){var i=Lf(e),n;if(t){var o=Lf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return QSe(this,n)}}function QSe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JSe(e)}function JSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ewe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lf(e){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lf(e)}function twe(e,t){const r=yu(t,e);return Dl(`.${r}`,e)(e)}function rwe(e,t){const r=e.map(o=>+o).sort((o,a)=>a-o),i=r[t],n=r[r.length-1];return twe(i,n)}function nwe(e,t,r,i){const n=t/(2**e*r);if(!Number.isNaN(n)){const o=t/(2**i*r),a=yu(o,n);return Dl(`.${a}`,n)(n)}return console.warn("NaN resolution, screen is probably too small."),""}let jn=function(e){KSe(r,e);var t=ZSe(r);function r(i,n){var o;VSe(this,r),o=t.call(this,i,n);const{scene:a}=i;o.scene=a,o.delayDrawing=!1,o.pBase=new He.PIXI.Graphics,o.pMasked=new He.PIXI.Graphics,o.pMask=new He.PIXI.Graphics,o.pMain=new He.PIXI.Graphics,o.pBorder=new He.PIXI.Graphics,o.pBackground=new He.PIXI.Graphics,o.pForeground=new He.PIXI.Graphics,o.pLabel=new He.PIXI.Graphics,o.pMobile=new He.PIXI.Graphics,o.pAxis=new He.PIXI.Graphics,o.pMouseOver=new He.PIXI.Graphics,o.scene.addChild(o.pBase),o.pBase.addChild(o.pMasked),o.pMasked.addChild(o.pBackground),o.pMasked.addChild(o.pMain),o.pMasked.addChild(o.pMask),o.pMasked.addChild(o.pMobile),o.pMasked.addChild(o.pBorder),o.pMasked.addChild(o.pLabel),o.pMasked.addChild(o.pForeground),o.pMasked.addChild(o.pMouseOver),o.pBase.addChild(o.pAxis),o.pMasked.mask=o.pMask,o.prevOptions="",o.options=Object.assign(o.options,n);const s=o.getName();return o.labelTextFontFamily="Arial",o.labelTextFontSize=12,o.labelXOffset=0,o.labelText=new He.PIXI.Text(s,{fontSize:`${o.labelTextFontSize}px`,fontFamily:o.labelTextFontFamily,fill:"black"}),o.pLabel.addChild(o.labelText),o.errorText=new He.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"red"}),o.errorText.anchor.x=.5,o.errorText.anchor.y=.5,o.pLabel.addChild(o.errorText),o.errorTextText="",o.flipText=!1,o.tilesetInfo=void 0,o}return WSe(r,[{key:"setLabelText",value:function(){}},{key:"setPosition",value:function(n){this.position=n,this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setDimensions",value:function(n){u_(Lf(r.prototype),"setDimensions",this).call(this,n),this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setMask",value:function(n,o){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(n[0],n[1],o[0],o[1]),this.pMask.endFill()}},{key:"setForeground",value:function(){this.pForeground.position.y=this.position[1],this.pForeground.position.x=this.position[0]}},{key:"remove",value:function(){this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"drawBorder",value:function(){const n=this.pBorder;if(!n||!n._geometry||(n.clear(),!this.options||!this.options.trackBorderWidth))return;const o=it(this.options.trackBorderColor?this.options.trackBorderColor:"white");n.lineStyle(this.options.trackBorderWidth,o),n.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"drawError",value:function(){if(this&&this.position&&this.errorText&&this.errorTextText&&this.errorTextText.length){this.errorText.x=this.position[0]+this.dimensions[0]/2,this.errorText.y=this.position[1]+this.dimensions[1]/2,this.errorText.text=this.errorTextText;const n=this.pBorder;if(!n||!n._geometry)return;n.clear(),n.lineStyle(1,it("red")),n.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}else{this.errorText.text="";const n=this.pBorder;if(!n||!n._geometry)return;n.clear()}}},{key:"drawBackground",value:function(){const n=this.pBackground;if(!n||!n._geometry||(n.clear(),!this.options||!this.options.backgroundColor))return;let o=1,a=this.options.backgroundColor;this.options.backgroundColor==="transparent"&&(o=0,a="white");const s=it(a);n.beginFill(s,o),n.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"getLabelColor",value:function(){return this.options.labelColor&&this.options.labelColor!=="[glyph-color]"?this.options.labelColor:this.options.lineStrokeColor||this.options.barFillColor||"black"}},{key:"getName",value:function(){return this.options.name?this.options.name:this.tilesetInfo&&this.tilesetInfo.name||""}},{key:"drawLabel",value:function(){if(!this.labelText)return;const n=this.pLabel;if(!n||!n._geometry)return;if(n.clear(),!this.options||!this.options.labelPosition||this.options.labelPosition==="hidden"){this.labelText.alpha=0;return}const{labelBackgroundColor:o="white",labelBackgroundOpacity:a=.5}=this.options;n.beginFill(it(o),+a);const s=it(this.getLabelColor()),c=2;if(this.dimensions[0]<0)return;let u=this.options.labelShowAssembly&&this.tilesetInfo&&this.tilesetInfo.coordSystem?`${this.tilesetInfo.coordSystem} | `:"";if(u+=this.getName(),this.options.labelShowResolution&&Koe(this.tilesetInfo)&&this.tilesetInfo.bins_per_dimension){const p=nwe(this.calculateZoomLevel(),this.tilesetInfo.max_width,this.tilesetInfo.bins_per_dimension,this.tilesetInfo.max_zoom);u+=`
[Current data resolution: ${p}]`}else if(this.options.labelShowResolution&&Zoe(this.tilesetInfo)){const p=rwe(this.tilesetInfo.resolutions,this.calculateZoomLevel());u+=`
[Current data resolution: ${p}]`}if(this.options&&this.options.dataTransform){let p=null;if(this.tilesetInfo&&this.tilesetInfo.transforms)for(const m of this.tilesetInfo.transforms)m.value===this.options.dataTransform&&(p=m);p?u+=`
[Transform: ${p.name}]`:this.options.dataTransform==="None"?u+=`
[Transform: None ]`:u+=`
[Transform: Default ]`}this.labelText.text=u,this.labelText.style={fontSize:`${this.labelTextFontSize}px`,fontFamily:this.labelTextFontFamily,fill:s},this.labelText.alpha=typeof this.options.labelTextOpacity<"u"?this.options.labelTextOpacity:1,this.labelText.visible=!0,this.flipText&&(this.labelText.scale.x=-1);const{labelLeftMargin:l=0,labelRightMargin:h=0,labelTopMargin:f=0,labelBottomMargin:d=0}=this.options;this.options.labelPosition==="topLeft"?(this.labelText.x=this.position[0]+l+this.labelXOffset,this.labelText.y=this.position[1]+f,this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x+=this.labelText.width/2,n.drawRect(this.position[0]+l+this.labelXOffset,this.position[1]+f,this.labelText.width+c,this.labelText.height+c)):this.options.labelPosition==="bottomLeft"&&!this.flipText||this.options.labelPosition==="topRight"&&this.flipText?(this.labelText.x=this.position[0]+(l||f),this.labelText.y=this.position[1]+this.dimensions[1]-(d||h),this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x+=this.labelText.width/2+this.labelXOffset,n.drawRect(this.position[0]+(l||f)+this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-c-(d||h),this.labelText.width+c,this.labelText.height+c)):this.options.labelPosition==="topRight"&&!this.flipText||this.options.labelPosition==="bottomLeft"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]-(h||d),this.labelText.y=this.position[1]+(f||l),this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x-=this.labelText.width/2+this.labelXOffset,n.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-c-(h||d)-this.labelXOffset,this.position[1]+(f||l),this.labelText.width+c,this.labelText.height+c)):this.options.labelPosition==="bottomRight"?(this.labelText.x=this.position[0]+this.dimensions[0]-h,this.labelText.y=this.position[1]+this.dimensions[1]-d,this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x-=this.labelText.width/2+this.labelXOffset,n.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-c-h-this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-c-d,this.labelText.width+c,this.labelText.height+c)):this.options.labelPosition==="outerLeft"&&!this.flipText||this.options.labelPosition==="outerTop"&&this.flipText?(this.labelText.x=this.position[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x-=this.labelText.width/2+3):this.options.labelPosition==="outerTop"&&!this.flipText||this.options.labelPosition==="outerLeft"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y-=this.labelText.height/2+3):this.options.labelPosition==="outerBottom"&&!this.flipText||this.options.labelPosition==="outerRight"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y+=this.labelText.height/2+3):this.options.labelPosition==="outerRight"&&!this.flipText||this.options.labelPosition==="outerBottom"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x+=this.labelText.width/2+3):this.labelText.visible=!1,this.options.labelPosition==="outerLeft"||this.options.labelPosition==="outerRight"||this.options.labelPosition==="outerTop"||this.options.labelPosition==="outerBottom"?this.pLabel.setParent(this.pBase):this.pLabel.setParent(this.pMasked)}},{key:"rerender",value:function(n){this.options=n,this.draw(),this.drawBackground(),this.drawLabel(),this.drawError(),this.drawBorder()}},{key:"draw",value:function(){this.drawError()}},{key:"exportSVG",value:function(){const n=document.createElement("g"),o=document.createElement("rect");o.setAttribute("x",`${this.position[0]}`),o.setAttribute("y",`${this.position[1]}`),o.setAttribute("width",`${this.dimensions[0]}`),o.setAttribute("height",`${this.dimensions[1]}`),this.options&&this.options.backgroundColor?o.setAttribute("fill",this.options.backgroundColor):o.setAttribute("fill-opacity","0");const a=document.createElement("g");a.setAttribute("class","g-clipped"),n.appendChild(a),a.appendChild(o);const s=document.createElement("g");a.setAttribute("class","g-track"),a.appendChild(s);const c=document.createElement("g");a.setAttribute("class","g-labels"),a.appendChild(c);const u=document.createElementNS("http://www.w3.org/2000/svg","clipPath");n.appendChild(u);const l=document.createElementNS("http://www.w3.org/2000/svg","polygon");u.appendChild(l),l.setAttribute("points",`${this.position[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]+this.dimensions[1]} ${this.position[0]},${this.position[1]+this.dimensions[1]} `);const h=xt.nice();u.setAttribute("id",h),a.setAttribute("style",`clip-path:url(#${h});`);const f=this.labelText.text.split(`
`);let d=0;const p=3,m=(this.labelTextFontSize+2)*f.length+p;this.labelText.anchor.y===.5?d=m/2:this.labelText.anchor.y===1&&(d=-m);for(let g=0;g<f.length;g++){const v=document.createElement("text");if(v.setAttribute("font-family",this.labelTextFontFamily),v.setAttribute("font-size",`${this.labelTextFontSize}px`),v.innerText=f[g],this.options.labelPosition==="topLeft"||this.options.labelPosition==="topRight"){const _=d+(g+1)*(this.labelTextFontSize+2);v.setAttribute("dy",String(_))}else(this.options.labelPosition==="bottomLeft"||this.options.labelPosition==="bottomRight")&&v.setAttribute("dy",String(d+g*(this.labelTextFontSize+2)));v.setAttribute("fill",this.options.labelColor??""),this.labelText.anchor.x===.5?v.setAttribute("text-anchor","middle"):this.labelText.anchor.x===1&&v.setAttribute("text-anchor","end"),c.appendChild(v)}return c.setAttribute("transform",`translate(${this.labelText.x},${this.labelText.y})scale(${this.labelText.scale.x},1)`),[n,s]}},{key:"calculateZoomLevel",value:function(){throw new Error("Must be implemented by subclass")}}]),r}(pc);function iwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,awe(i.key),i)}}function owe(e,t,r){return t&&W4(e.prototype,t),r&&W4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function awe(e){var t=swe(e,"string");return typeof t=="symbol"?t:String(t)}function swe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lwe(e){return e.length===2}function cwe(e){return{fetchTiles(t){const r=t.tileIds;return new Promise((i,n)=>{N5({...t,ids:r,done:i},e,!0)})},fetchTilesetInfo({server:t,tilesetUid:r}){return new Promise((i,n)=>{F5(t,r,i,n,e)})},registerTileset({server:t,url:r,filetype:i,coordSystem:n}){const o=`${my(t)}/register_url/`;return fetch(o,{method:"POST",body:JSON.stringify({fileurl:r,filetype:i,coordSystem:n}),headers:{"Content-Type":"application/json; charset=utf-8"}})}}}let rm=function(){function e(t,r,i){if(iwe(this,e),this.tileSource=i||cwe(r),this.tilesetInfoLoading=!0,!t){console.error("No dataconfig provided");return}this.dataConfig=JSON.parse(JSON.stringify(t)),this.uuid=xt.nice(),this.pubSub=r,t.children&&(this.dataConfig.children=t.children.map(n=>new e(n,r)))}return owe(e,[{key:"registerFileUrl",value:async function({server:r,url:i,filetype:n,coordSystem:o}){return this.tileSource.registerTileset({server:r,url:i,filetype:n,coordSystem:o})}},{key:"tilesetInfo",value:function(r){const{server:i,url:n,filetype:o,coordSystem:a}=this.dataConfig;return i&&n&&o?this.registerFileUrl({server:i,url:n,filetype:o,coordSystem:a}).then(s=>s.json()).then(s=>{this.dataConfig.tilesetUid=s.uid,this.tilesetInfoAfterRegister(r)}).catch(s=>{console.error("Error registering url",s)}):new Promise(()=>{this.tilesetInfoAfterRegister(r)})}},{key:"tilesetInfoAfterRegister",value:function(r){if(this.dataConfig.children){const i=this.dataConfig.children.map(n=>new Promise(o=>{n.tilesetInfo(o)}));Promise.all(i).then(n=>{r(n[0])})}else{const{server:i,tilesetUid:n}=this.dataConfig;!i||!n?(console.warn("No dataConfig children, server or tilesetUid:",this.dataConfig),r(null)):this.tileSource.fetchTilesetInfo({server:i,tilesetUid:n}).then(o=>{this.dataConfig.tilesetInfo=o[n],r(o[n],n)}).catch(o=>{this.tilesetInfoLoading=!1,r({error:o})})}}},{key:"fullTileId",value:function(r,i){return`${r}.${i}`}},{key:"fetchTilesDebounced",value:function(r,i){var n;if(this.dataConfig.type==="horizontal-section")return this.fetchHorizontalSection(r,i);if(this.dataConfig.type==="vertical-section")return this.fetchHorizontalSection(r,i,!0);if(!this.dataConfig.children&&this.dataConfig.tilesetUid)return this.tileSource.fetchTiles({id:xt.nice(),server:this.dataConfig.server,tileIds:i.map(s=>`${this.dataConfig.tilesetUid}.${s}`),options:this.dataConfig.options}).then(s=>{const c=ur(s)[0].tilesetUid,u={};for(let l=0;l<i.length;l++){const h=this.fullTileId(c,i[l]);s[h].tilePositionId=i[l],u[i[l]]=s[h]}return r(u),u});const o=((n=this.dataConfig.children)==null?void 0:n.map(a=>new Promise(s=>{a.fetchTilesDebounced(s,i)})))??[];return Promise.all(o).then(a=>{if(this.dataConfig.type==="divided"&&lwe(a)){const s=this.makeDivided(a,i);return r(s),s}return console.warn("Unimplemented dataConfig type. Returning first data source.",this.dataConfig),r(a[0]),a[0]})}},{key:"divideData",value:function(r,i){const n=new Float32Array(r.length);for(let o=0;o<n.length;o++)i[o]===0?n[o]=NaN:n[o]=r[o]/i[o];return n}},{key:"horizontalSlice",value:function(){return null}},{key:"extractDataSlice",value:function(r,i,n,o){if(!o)return r.slice(i[1]*n,i[1]*(n+1));const a=new Array(i[1]);for(let s=n;s<r.length;s+=i[0])a[Math.floor(s/i[0])]=r[s];return a}},{key:"fetchHorizontalSection",value:function(r,i,n=!1){const o=[],a=[],{slicePos:s,tilesetInfo:c}=this.dataConfig;if(!s||!c)throw new Error("No slice position or tileset info");for(const l of i){const h=l.split("."),f=+h[0],d=+h[1],p=bt().domain([s,s]);let m=[];if("resolutions"in c){const _=c.resolutions.map(y=>+y).sort((y,b)=>b-y);m=yy(_[f],p,c.min_pos[n?1:0],c.max_pos[n?1:0])}else m=vy(f,p,c.min_pos[n?1:0],c.max_pos[n?1:0],c.max_zoom,c.max_width);const g=[d,m[0]].sort((_,y)=>_-y);g[0]===d?a.push(!1):a.push(!0);const v=`${f}.${g[0]}.${g[1]}`;o.push(v)}return this.tileSource.fetchTiles({id:xt.nice(),server:this.dataConfig.server,tileIds:o.map(l=>`${this.dataConfig.tilesetUid}.${l}`)}).then(l=>{const h=ur(l)[0].tilesetUid,f={};for(let d=0;d<o.length;d++){const p=o[d].split("."),m=+p[0],g=+p[1],v=+p[2],_=M5(c,c.max_width,c.min_pos[1],m,+s)[1],y=this.fullTileId(h,o[d]),b=l[y];let T=null;if(g===v){T=this.extractDataSlice(b.dense,[256,256],_);const k=this.extractDataSlice(b.dense,[256,256],_,1);for(let O=0;O<T.length;O++)T[O]+=k[O]}else a[d]?T=this.extractDataSlice(b.dense,[256,256],_,1):T=this.extractDataSlice(b.dense,[256,256],_);const S={min_value:Math.min.apply(null,T),max_value:Math.max.apply(null,T),denseDataExtrema:new Yd(T),minNonZero:fw(T),maxNonZero:uw(T),dense:T,dtype:b.dtype,server:b.server,tilePos:a[d]?[v]:[g],tilePositionId:i[d],tilesetUid:h,zoomLevel:b.zoomLevel};f[i[d]]=S}return r(f),f})}},{key:"makeDivided",value:function(r,i){r.length<2&&console.warn("Only one tileset specified for a divided datafetcher:",this.dataConfig);const n={};for(let o=0;o<i.length;o++){const a=r[0][i[o]].zoomLevel,s=r[0][i[o]].tilePos;let c={zoomLevel:a,tilePos:s,tilePositionId:i[o]};const u=r[0][i[o]].dense,l=r[1][i[o]].dense;if(u&&l){const h=this.divideData(u,l),f=s.length===2?new JS(h):new Yd(h);c={dense:h,denseDataExtrema:f,minNonZero:fw(h),maxNonZero:uw(h),zoomLevel:a,tilePos:s,tilePositionId:i[o]}}n[i[o]]=c}return n}}]),e}();function uwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,hwe(i.key),i)}}function fwe(e,t,r){return t&&Y4(e.prototype,t),r&&Y4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hwe(e){var t=dwe(e,"string");return typeof t=="symbol"?t:String(t)}function dwe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pwe(e){return e.data===null}let mwe=function(){function e(){uwe(this,e),this.taskList=[],this.taskHandle=null,this.requestIdleCallbackTimeout=300}return fwe(e,[{key:"enqueueTask",value:function(r,i,n=null){n===null?this.taskList.push({handler:r,data:i}):(this.taskList=this.taskList.filter(o=>o.trackId!==n),this.taskList.push({handler:r,data:i,trackId:n})),this.taskHandle||(this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}))}},{key:"runTaskQueue",value:function(r){for(;(r.timeRemaining()>0||r.didTimeout)&&this.taskList.length;){const i=this.taskList.shift();i&&pwe(i)?i.handler():i&&i.handler(i.data)}this.taskList.length?this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}):this.taskHandle=0}}]),e}();const gwe=new mwe;function vwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,bwe(i.key),i)}}function ywe(e,t,r){return t&&q4(e.prototype,t),r&&q4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bwe(e){var t=_we(e,"string");return typeof t=="symbol"?t:String(t)}function _we(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mc(){return typeof Reflect<"u"&&Reflect.get?mc=Reflect.get.bind():mc=function(t,r,i){var n=Twe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},mc.apply(this,arguments)}function Twe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ya(e),e!==null););return e}function Ewe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wk(e,t)}function wk(e,t){return wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},wk(e,t)}function Swe(e){var t=Awe();return function(){var i=Ya(e),n;if(t){var o=Ya(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return wwe(this,n)}}function wwe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ak(e)}function Ak(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Awe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ya(e){return Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ya(e)}function Owe(e,t,r,i,n){const o=e||n,a=0;return o==="log"&&t>0?["log",ys().range([254,0]).domain([t+a,i+a])]:["linear",bt().range([254,0]).domain([t,i])]}let qa=function(e){Ewe(r,e);var t=Swe(r);function r(i,n){var o;vwe(this,r),o=t.call(this,i,n);const{pubSub:a,dataConfig:s,handleTilesetInfoReceived:c,animate:u,onValueScaleChanged:l}=i;return o.renderVersion=1,o.visibleTiles=new Set,o.visibleTileIds=new Set,o.renderingTiles=new Set,o.fetching=new Set,o.scale={},o.fetchedTiles={},o.tileGraphics={},o.maxZoom=0,o.medianVisibleValue=null,o.backgroundTaskScheduler=gwe,o.continuousScaling="requestIdleCallback"in window,o.valueScaleMin=null,o.fixedValueScaleMin=null,o.valueScaleMax=null,o.fixedValueScaleMax=null,o.listeners={},o.pubSub=a,o.animate=u,o.onValueScaleChanged=l,o.prevValueScale=null,i.dataFetcher?o.dataFetcher=i.dataFetcher:o.dataFetcher=new rm(s,o.pubSub),o.tilesetInfo=null,o.uuid=xt.nice(),o.trackNotFoundText=new He.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"black"}),o.pLabel.addChild(o.trackNotFoundText),o.refreshTilesDebounced=iB(o.refreshTiles.bind(Ak(o)),cy,cy),o.dataFetcher.tilesetInfo((h,f)=>{if(h){if(o.tilesetInfo=h,o.dataFetcher.dataConfig.tilesetUid||(o.dataFetcher.dataConfig.tilesetUid=f),o.tilesetUid=o.dataFetcher.dataConfig.tilesetUid,o.server=o.dataFetcher.dataConfig.server||"unknown",o.tilesetInfo&&o.tilesetInfo.chromsizes&&(o.chromInfo=Ty(o.tilesetInfo.chromsizes)),"error"in o.tilesetInfo){console.warn("Error retrieving tilesetInfo:",s,o.tilesetInfo.error),o.tilesetInfo=null,o.setError(o.tilesetInfo.error);return}o.tilesetInfo.resolutions?o.maxZoom=o.tilesetInfo.resolutions.length:o.maxZoom=+o.tilesetInfo.max_zoom,o.options&&o.options.maxZoom&&(o.options.maxZoom>=0?o.maxZoom=Math.min(o.options.maxZoom,o.maxZoom):console.error("Invalid maxZoom on track:",Ak(o))),o.refreshTiles(),c&&c(h),o.options||(o.options={}),o.options.name=o.options.name||h.name,o.checkValueScaleLimits(),o.draw(),o.drawLabel(),o.animate()}}),o}return ywe(r,[{key:"setError",value:function(n){this.errorTextText=n,this.draw(),this.animate()}},{key:"setFixedValueScaleMin",value:function(n){Number.isNaN(+n)?this.fixedValueScaleMin=null:this.fixedValueScaleMin=+n}},{key:"setFixedValueScaleMax",value:function(n){Number.isNaN(+n)?this.fixedValueScaleMax=null:this.fixedValueScaleMax=+n}},{key:"checkValueScaleLimits",value:function(){this.valueScaleMin=typeof this.options.valueScaleMin<"u"?+this.options.valueScaleMin:null,this.fixedValueScaleMin!==null&&(this.valueScaleMin=this.fixedValueScaleMin),this.valueScaleMax=typeof this.options.valueScaleMax<"u"?+this.options.valueScaleMax:null,this.fixedValueScaleMax!==null&&(this.valueScaleMax=this.fixedValueScaleMax)}},{key:"on",value:function(n,o){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(o)}},{key:"off",value:function(n,o){const a=this.listeners[n].indexOf(o);a===-1||a>=this.listeners[n].length||this.listeners[n].splice(a,1)}},{key:"rerender",value:function(n){mc(Ya(r.prototype),"rerender",this).call(this,n),this.renderVersion+=1,this.tilesetInfo&&(this.checkValueScaleLimits(),this.tilesetInfo.resolutions?this.maxZoom=this.tilesetInfo.resolutions.length:this.maxZoom=+this.tilesetInfo.max_zoom,this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?this.maxZoom=Math.min(this.options.maxZoom,this.maxZoom):console.error("Invalid maxZoom on track:",this)))}},{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(n=>this.visibleTileIds.has(n))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(n=>this.fetchedTiles[n])}},{key:"setVisibleTiles",value:function(n){this.visibleTiles=n.map(o=>({tileId:this.tileToLocalId(o),remoteId:this.tileToRemoteId(o),mirrored:o.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(o=>o.tileId))}},{key:"removeOldTiles",value:function(){this.calculateVisibleTiles();const o=[...new Set(Object.keys(this.fetchedTiles))].filter(a=>!this.visibleTileIds.has(a));this.removeTiles(o)}},{key:"refreshTiles",value:function(){if(!this.tilesetInfo)return;this.calculateVisibleTiles();const n=new Set(Object.keys(this.fetchedTiles)),o=[...this.visibleTiles].filter(a=>!this.fetching.has(a.remoteId)&&!n.has(a.tileId));for(let a=0;a<o.length;a++)this.fetching.add(o[a].remoteId);this.removeOldTiles(),this.fetchNewTiles(o)}},{key:"parentInFetched",value:function(n){const o=n.tileData.tilesetUid;let a=n.tileData.zoomLevel,s=n.tileData.tilePos;for(;a>0;)if(a-=1,s=s.map(u=>Math.floor(u/2)),`${o}.${a}.${s.join(".")}`in this.fetchedTiles)return!0;return!1}},{key:"parentTileId",value:function(n){const o=n.tileData.zoomLevel-1,a=n.tileData.tilePos.map(c=>Math.floor(c/2));return`${n.tileData.tilesetUid}.${o}.${a.join(".")}`}},{key:"removeTiles",value:function(n){!n.length||!this.areAllVisibleTilesLoaded()||this.renderingTiles.size||(n.forEach(o=>{const a=o;this.destroyTile(this.fetchedTiles[a]),a in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[a]),delete this.tileGraphics[a]),delete this.fetchedTiles[a]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"zoomed",value:function(n,o,a=1,s=0,c=0){this.xScale(n),this.yScale(o),this.refreshTilesDebounced(),this.pMobile.position.x=s,this.pMobile.position.y=this.position[1],this.pMobile.scale.x=a,this.pMobile.scale.y=1}},{key:"setPosition",value:function(n){mc(Ya(r.prototype),"setPosition",this).call(this,n)}},{key:"setDimensions",value:function(n){mc(Ya(r.prototype),"setDimensions",this).call(this,n)}},{key:"areAllVisibleTilesLoaded",value:function(){const n=new Set(Object.keys(this.fetchedTiles)),o=[...this.visibleTileIds];for(let a=0;a<o.length;a++)if(!n.has(o[a]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(n){return n?(this.scale.minValue=n,this):this.valueScaleMin!==null?this.valueScaleMin:this.scale.minValue}},{key:"maxValue",value:function(n){return n?(this.scale.maxValue=n,this):this.valueScaleMax!==null?this.valueScaleMax:this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"initTile",value:function(){this.scale.minRawValue=this.continuousScaling?this.minVisibleValue():this.minVisibleValueInTiles(),this.scale.maxRawValue=this.continuousScaling?this.maxVisibleValue():this.maxVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue}},{key:"updateTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"addMissingGraphics",value:function(){const n=Object.keys(this.fetchedTiles);this.renderVersion+=1;for(let o=0;o<n.length;o++)if(!(n[o]in this.tileGraphics)){const a=new He.PIXI.Graphics;this.pMain.addChild(a),this.fetchedTiles[n[o]].graphics=a,this.initTile(this.fetchedTiles[n[o]]),this.tileGraphics[n[o]]=a}}},{key:"updateExistingGraphics",value:function(){const n=Object.keys(this.fetchedTiles);for(let o=0;o<n.length;o++){const a=this.fetchedTiles[n[o]];this.updateTile(a)}}},{key:"synchronizeTilesAndGraphics",value:function(){try{if(this.addMissingGraphics(),this.removeOldTiles(),this.updateExistingGraphics(),this.listeners.dataChanged)for(const n of this.listeners.dataChanged)n(this.visibleAndFetchedTiles().map(o=>o.tileData))}catch{}}},{key:"loadTileData",value:function(n,o){let a=this.lruCache.get(n.tileId);return a||(a=o(n.data,n.type),this.lruCache.put(n.tileId,a)),a}},{key:"fetchNewTiles",value:function(n){if(n.length>0){const o=[...new Set(n.map(a=>a.remoteId))];this.dataFetcher.fetchTilesDebounced(this.receivedTiles.bind(this),o)}}},{key:"receivedTiles",value:function(n){for(let o=0;o<this.visibleTiles.length;o++){const{tileId:a}=this.visibleTiles[o];if(n[this.visibleTiles[o].remoteId]&&this.visibleTiles[o].remoteId in n){if(a in this.fetchedTiles||(this.fetchedTiles[a]=this.visibleTiles[o]),Array.isArray(n[this.visibleTiles[o].remoteId])){const s=n[this.visibleTiles[o].remoteId];this.fetchedTiles[a].tileData=[...s],Object.keys(s).filter(c=>Number.isNaN(+c)).forEach(c=>{this.fetchedTiles[a].tileData[c]=s[c]})}else this.fetchedTiles[a].tileData={...n[this.visibleTiles[o].remoteId]};this.fetchedTiles[a].tileData.error&&console.warn("Error in loaded tile",a,this.fetchedTiles[a].tileData)}}for(const o in n)if(n[o]){const a=n[o].tilePositionId;this.fetching.has(a)&&this.fetching.delete(a)}this.synchronizeTilesAndGraphics(),this.draw(),this.drawLabel(),this.valueScale&&(!this.prevValueScale||JSON.stringify(this.valueScale.domain())!==JSON.stringify(this.prevValueScale.domain()))&&(this.prevValueScale=this.valueScale.copy(),this.onValueScaleChanged&&this.onValueScaleChanged()),this.animate(),this.areAllVisibleTilesLoaded()&&this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesLoaded",{uuid:this.uuid})}},{key:"draw",value:function(){if(this.delayDrawing)return;this.tilesetInfo?this.trackNotFoundText.visible=!1:(this.dataFetcher.tilesetInfoLoading?this.trackNotFoundText.text="Loading...":this.trackNotFoundText.text=`Tileset info not found. Server: [${this.server}] tilesetUid: [${this.tilesetUid}]`,[this.trackNotFoundText.x,this.trackNotFoundText.y]=this.position,this.flipText&&(this.trackNotFoundText.anchor.x=1,this.trackNotFoundText.scale.x=-1),this.trackNotFoundText.visible=!0),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnStart",{uuid:this.uuid});const n=Object.values(this.fetchedTiles).map(o=>o.tileData&&o.tileData.error&&`${o.tileId}: ${o.tileData.error}`).filter(o=>o);n.length?this.errorTextText=n.join(`
`):this.errorTextText="",mc(Ya(r.prototype),"draw",this).call(this),Object.keys(this.fetchedTiles).forEach(o=>{this.drawTile(this.fetchedTiles[o])}),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnEnd",{uuid:this.uuid})}},{key:"drawTile",value:function(){}},{key:"calculateMedianVisibleValue",value:function(){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let n=this.visibleAndFetchedIds();n.length===0&&(n=Object.keys(this.fetchedTiles));const o=[].concat(...n.filter(a=>this.fetchedTiles[a].tileData.dense).map(a=>Array.from(this.fetchedTiles[a].tileData.dense))).filter(a=>a>0);return this.medianVisibleValue=$E(o),this.medianVisibleValue}},{key:"allVisibleValues",value:function(){return[].concat(...this.visibleAndFetchedIds().map(n=>Array.from(this.fetchedTiles[n].tileData.dense)))}},{key:"minVisibleValue",value:function(n=!1){return this.minVisibleValueInTiles(n)}},{key:"minVisibleValueInTiles",value:function(n=!1){let o=this.visibleAndFetchedIds();o.length===0&&(o=Object.keys(this.fetchedTiles));let a=Math.min(...o.map(s=>this.fetchedTiles[s].tileData.minNonZero));return a===Number.MAX_SAFE_INTEGER&&(a=null),n?a:this.valueScaleMin!==null?this.valueScaleMin:a}},{key:"maxVisibleValue",value:function(n=!1){return this.maxVisibleValueInTiles(n)}},{key:"maxVisibleValueInTiles",value:function(n=!1){let o=this.visibleAndFetchedIds();o.length===0&&(o=Object.keys(this.fetchedTiles));let a=Math.max(...o.map(s=>this.fetchedTiles[s].tileData.maxNonZero));return a===Number.MIN_SAFE_INTEGER&&(a=null),n?a:this.valueScaleMax!==null?this.valueScaleMax:a}},{key:"makeValueScale",value:function(n,o,a,s){let c=null,u=0,l=s;(l===null||typeof l>"u")&&(l=6);let h=Math.min(this.dimensions[1]-l,l),f=Math.max(this.dimensions[1]-l,l);if(this.dimensions[1]-l<l&&(h=this.dimensions[1]/2,f=this.dimensions[1]/2),this.options.valueScaling==="log")u=o,u||(u=n),c=ys().domain([u,a+u]).range([h,f]);else if(this.options.valueScaling==="quantile"){const d=this.dimensions[1]-l,p=l,m=av().domain(this.allVisibleValues()).range(Vn(d,p,(p-d)/256));return m.ticks=g=>kl(d,p,g),[m,0]}else if(this.options.valueScaling==="setquantile"){const d=this.dimensions[1]-l,p=l,m=new Set(this.allVisibleValues()),g=av().domain([...m]).range(Vn(d,p,(p-d)/256));return g.ticks=v=>kl(d,p,v),[g,0]}else c=bt().domain([n,a]).range([f,h]);return[c,u]}}]),r}(jn);function kwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Cwe(i.key),i)}}function Iwe(e,t,r){return t&&X4(e.prototype,t),r&&X4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cwe(e){var t=Pwe(e,"string");return typeof t=="symbol"?t:String(t)}function Pwe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zr(){return typeof Reflect<"u"&&Reflect.get?zr=Reflect.get.bind():zr=function(t,r,i){var n=Dwe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},zr.apply(this,arguments)}function Dwe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=xr(e),e!==null););return e}function xwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ok(e,t)}function Ok(e,t){return Ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Ok(e,t)}function Nwe(e){var t=Mwe();return function(){var i=xr(e),n;if(t){var o=xr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Rwe(this,n)}}function Rwe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f_(e)}function f_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xr(e){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xr(e)}const K4=200,js=10,nm=40,Un=10,Us=Un,Z4=4,Bf=1,Gs=4,Q4=5,Lwe=256,im=js+nm+Un+Bf+Us+Gs;let Hf=function(e){xwe(r,e);var t=Nwe(r);function r(i,n){var o;kwe(this,r);const a={...i};a.onValueScaleChanged=()=>{i.onValueScaleChanged(),o.drawColorbar()},o=t.call(this,a,n);const{pubSub:s,animate:c,svgElement:u,onTrackOptionsChanged:l,onMouseMoveZoom:h,isShowGlobalMousePosition:f,isValueScaleLocked:d}=i;return o.pubSub=s,o.is2d=!0,o.animate=c,o.uid=xt.nice(),o.scaleBrush=Dd(),o.onTrackOptionsChanged=l,o.isShowGlobalMousePosition=f,o.isValueScaleLocked=d,o.pColorbarArea=new He.PIXI.Graphics,o.pMasked.addChild(o.pColorbarArea),o.pColorbar=new He.PIXI.Graphics,o.pColorbarArea.addChild(o.pColorbar),o.axis=new e_(f_(o)),o.pColorbarArea.addChild(o.axis.pAxis),o.colorScale=Mu,n&&n.colorRange&&(o.colorScale=Ma(n.colorRange)),o.gBase=Ht(u).append("g"),o.gMain=o.gBase.append("g"),o.gColorscaleBrush=o.gMain.append("g"),o.brushing=!1,o.prevOptions="",o.prevIndUpperLeftTile="",o.onMouseMoveZoom=h,o.setDataLensSize(11),o.dataLens=new Float32Array(o.dataLensSize**2),o.mouseMoveHandlerBound=o.mouseMoveHandler.bind(f_(o)),o.onMouseMoveZoom&&o.pubSubs.push(o.pubSub.subscribe("app.mouseMove",o.mouseMoveHandlerBound)),o.options&&o.options.showMousePosition&&!o.hideMousePosition&&(o.hideMousePosition=Ss(f_(o),o.is2d,o.isShowGlobalMousePosition())),o.prevOptions=JSON.stringify(n),o}return Iwe(r,[{key:"mouseMoveHandler",value:function(n){this.isWithin(n.x,n.y)&&(this.mouseX=n.x,this.mouseY=n.y,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(n=this.mouseX,o=this.mouseY){if(typeof n>"u"||typeof o>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;const a=n-this.position[0],s=o-this.position[1];let c,u;try{u=this.getVisibleRectangleData(a-this.dataLensPadding,s-this.dataLensPadding,this.dataLensSize,this.dataLensSize),c=u.get(this.dataLensPadding,this.dataLensPadding)}catch{return}const l=this.dataLensSize;let h;try{h=pw(this.limitedValueScale,this.colorScale,this.valueScale.domain()[0])}catch{return}if(!h)return;const f=Math.round(this._xScale.invert(a)),d=Math.round(this._yScale.invert(s));let p=[f,d],m=[Math.round(this._xScale.invert(a-this.dataLensPadding)),Math.round(this._xScale.invert(a+this.dataLensPadding))],g=[Math.round(this._yScale.invert(s-this.dataLensPadding)),Math.round(this._yScale.invert(s+this.dataLensPadding))];this.chromInfo&&(p=p.map(v=>Dr(v,this.chromInfo).slice(0,2)),m=m.map(v=>Dr(v,this.chromInfo).slice(0,2)),g=g.map(v=>Dr(v,this.chromInfo).slice(0,2))),this.onMouseMoveZoom({trackId:this.id,data:c,absX:n,absY:o,relX:a,relY:s,dataX:f,dataY:d,orientation:"2d",dataLens:u,dim:l,toRgb:h,center:p,xRange:m,yRange:g,isGenomicCoords:!!this.chromInfo})}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!0)}},{key:"getAbsTileDim",value:function(n,o,a){const{tileX:s,tileY:c,tileWidth:u,tileHeight:l}=this.getTilePosAndDimensions(n,o),h={};return h.width=this._refXScale(s+u)-this._refXScale(s),h.height=this._refYScale(c+l)-this._refYScale(c),a?(h.x=this._refXScale(c),h.y=this._refYScale(s)):(h.x=this._refXScale(s),h.y=this._refYScale(c)),h}},{key:"updateValueScale",value:function(){let n=this.minValue(),o=this.maxValue();const a=1e-6;n!=null&&o!==void 0&&o!==null&&Math.abs(n-o)<a&&(n=Math.max(a,n-.001),o+=.001);const[s,c]=Owe(this.options&&this.options.heatmapValueScaling||"log",n,this.medianVisibleValue,o,"log");return this.valueScale=c,this.limitedValueScale=this.valueScale.copy(),this.options&&typeof this.options.scaleStartPercent<"u"&&typeof this.options.scaleEndPercent<"u"&&this.limitedValueScale.domain([this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleStartPercent,this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleEndPercent]),[s,c]}},{key:"rerender",value:function(n,o){zr(xr(r.prototype),"rerender",this).call(this,n,o),this.updateValueScale();const a=JSON.stringify(n);this.drawColorbar(),!(!o&&a===this.prevOptions)&&(this.prevOptions=a,this.options=n,zr(xr(r.prototype),"rerender",this).call(this,n,o),this.calculateVisibleTiles(),n&&n.colorRange&&(this.colorScale=Ma(n.colorRange)),this.visibleAndFetchedTiles().forEach(s=>this.renderTile(s)),this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0),this.options&&this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=Ss(this,this.is2d,this.isShowGlobalMousePosition())))}},{key:"drawLabel",value:function(){this.options.labelPosition===this.options.colorbarPosition?this.labelXOffset=im:this.labelXOffset=0,zr(xr(r.prototype),"drawLabel",this).call(this)}},{key:"tileDataToCanvas",value:function(n){const o=document.createElement("canvas");o.width=this.binsPerTile(),o.height=this.binsPerTile();const a=o.getContext("2d");a.fillStyle="transparent",a.fillRect(0,0,o.width,o.height);const s=new ImageData(n,o.width,o.height);return a.putImageData(s,0,0),o}},{key:"exportData",value:function(){if(this.tilesetInfo){const n=this.getVisibleRectangleData(0,0,this.dimensions[0],this.dimensions[1]),o={bounds:[this._xScale.domain(),this._yScale.domain()],dimensions:n.shape,data:tB(n)};$d("data.json",JSON.stringify(o))}}},{key:"setSpriteProperties",value:function(n,o,a,s){const c=this.getAbsTileDim(o,a,s);n.width=c.width,n.height=c.height,n.x=c.x,n.y=c.y,s&&a[0]!==a[1]&&(n.rotation=-Math.PI/2,n.scale.x=Math.abs(n.scale.x)*-1)}},{key:"refXScale",value:function(n){zr(xr(r.prototype),"refXScale",this).call(this,n),this.draw()}},{key:"refYScale",value:function(n){zr(xr(r.prototype),"refYScale",this).call(this,n),this.draw()}},{key:"draw",value:function(){zr(xr(r.prototype),"draw",this).call(this)}},{key:"newBrushOptions",value:function(n){const o=JSON.parse(JSON.stringify(this.options)),a=this.valueScale.copy().range([this.colorbarHeight,0]),s=a.invert(n[0]),u=(a.invert(n[1])-a.domain()[0])/(a.domain()[1]-a.domain()[0]),l=(s-a.domain()[0])/(a.domain()[1]-a.domain()[0]);return o.scaleStartPercent=u.toFixed(Q4),o.scaleEndPercent=l.toFixed(Q4),o}},{key:"brushStart",value:function(){this.brushing=!0}},{key:"brushMoved",value:function(n){if(!n.selection)return;const o=this.newBrushOptions(n.selection),a=JSON.stringify(o);this.gColorscaleBrush.selectAll(".handle--custom").attr("y",s=>s.type==="n"?n.selection[0]:n.selection[1]-Z4/2),a!==this.prevOptions&&(this.prevOptions=a,this.rerender(o,!0),this.onTrackOptionsChanged(o),this.isValueScaleLocked()&&this.onValueScaleChanged())}},{key:"brushEnd",value:function(){this.brushing=!1}},{key:"setPosition",value:function(n){zr(xr(r.prototype),"setPosition",this).call(this,n),this.drawColorbar()}},{key:"setDimensions",value:function(n){zr(xr(r.prototype),"setDimensions",this).call(this,n),this.drawColorbar()}},{key:"removeColorbar",value:function(){this.pColorbarArea.visible=!1,this.scaleBrush.on(".brush")&&this.gColorscaleBrush.call(this.scaleBrush.move,null),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.selectAll("rect").remove()}},{key:"drawColorbar",value:function(){if(this.pColorbar.clear(),!this.options||!this.options.colorbarPosition||this.options.colorbarPosition==="hidden"){this.removeColorbar();return}if(this.pColorbarArea.visible=!0,!this.valueScale||Number.isNaN(+this.valueScale.domain()[0])||Number.isNaN(+this.valueScale.domain()[1]))return;const n=Math.min(this.dimensions[1]/2,K4);if(this.colorbarHeight=n-2*Un,this.colorbarHeight<0){this.removeColorbar();return}if(this.valueScale.domain()[1]===this.valueScale.domain()[0]){this.removeColorbar();return}const o=this.valueScale.copy().range([this.colorbarHeight,0]);this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?this.scaleBrush.extent([[Gs,0],[Us,this.colorbarHeight]]):this.scaleBrush.extent([[0,0],[Us-Gs,this.colorbarHeight]]),this.options.colorbarPosition==="topLeft"&&([this.pColorbarArea.x,this.pColorbarArea.y]=this.position,this.pColorbar.y=Un,this.axis.pAxis.y=Un,this.axis.pAxis.x=Gs+Us+Bf+js,this.pColorbar.x=Gs+Us+Bf,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+Gs},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="topRight"&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-im,this.pColorbarArea.y=this.position[1],this.pColorbar.y=Un,this.axis.pAxis.y=Un,this.axis.pAxis.x=nm+Un,this.pColorbar.x=nm+Un,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+js+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="bottomRight"&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-im,this.pColorbarArea.y=this.position[1]+this.dimensions[1]-n,this.pColorbar.y=Un,this.axis.pAxis.y=Un,this.axis.pAxis.x=nm+Un,this.pColorbar.x=nm+Un,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+js+Bf},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="bottomLeft"&&(this.pColorbarArea.x=this.position[0],this.pColorbarArea.y=this.position[1]+this.dimensions[1]-n,this.pColorbar.y=Un,this.axis.pAxis.y=Un,this.axis.pAxis.x=Gs+Us+Bf+js,this.pColorbar.x=Gs+Us+Bf,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.pColorbarArea.clear(),this.pColorbarArea.beginFill(it(this.options.colorbarBackgroundColor||"white"),+this.options.colorbarBackgroundOpacity>=0?+this.options.colorbarBackgroundOpacity:.6),this.pColorbarArea.drawRect(0,0,im,n),this.options?(this.options.scaleStartPercent||(this.options.scaleStartPercent=0),this.options.scaleEndPercent||(this.options.scaleEndPercent=1)):this.options={scaleStartPercent:0,scaleEndPercent:1};const a=o.domain()[1]-o.domain()[0],s=o(this.options.scaleStartPercent*a+o.domain()[0]),c=o(this.options.scaleEndPercent*a+o.domain()[0]);this.brushing||(this.scaleBrush.on("start",this.brushStart.bind(this)).on("brush",this.brushMoved.bind(this)).on("end",this.brushEnd.bind(this)).handleSize(0),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.call(this.scaleBrush),this.northHandle=this.gColorscaleBrush.selectAll(".handle--custom").data([{type:"n"},{type:"s"}]).enter().append("rect").classed("handle--custom",!0).attr("cursor","ns-resize").attr("width",Us).attr("height",Z4).style("fill","#666").style("stroke","white"),this.flipText&&this.northHandle.attr("cursor","ew-resize"),this.gColorscaleBrush.call(this.scaleBrush.move,[c,s]));const u=bt().domain([0,255]).range([0,this.colorbarHeight]);for(let l=0;l<this.colorbarHeight;l++){const h=this.limitedValueScale(o.invert(l)),f=Math.max(0,Math.min(254,Math.floor(h)));this.pColorbar.beginFill(it(`rgb(${this.colorScale[f][0]},${this.colorScale[f][1]},${this.colorScale[f][2]})`)),this.pColorbar.drawRect(0,l,js,1)}this.pAxis.position.x=js,this.pAxis.position.y=u(0),this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?this.axis.drawAxisRight(o,this.colorbarHeight):(this.options.colorbarPosition==="topRight"||this.options.colorbarPosition==="bottomRight")&&this.axis.drawAxisLeft(o,this.colorbarHeight)}},{key:"exportColorBarSVG",value:function(){const n=document.createElement("g");if(n.setAttribute("class","color-bar"),!this.options.colorbarPosition||this.options.colorbarPosition==="hidden"||!this.valueScale)return n;n.setAttribute("transform",`translate(${this.pColorbarArea.x}, ${this.pColorbarArea.y})`);const o=document.createElement("rect");n.appendChild(o);const a=document.createElement("g");n.appendChild(a),a.setAttribute("transform",`translate(${this.pColorbar.x}, ${this.pColorbar.y})`);const s=Math.min(this.dimensions[1]/2,K4);this.colorbarHeight=s-2*Un,o.setAttribute("x",0),o.setAttribute("y",0),o.setAttribute("width",im),o.setAttribute("height",s),o.setAttribute("style","fill: white; stroke-width: 0; opacity: 0.7");const c=256,u=bt().domain([0,c-1]).range([0,this.colorbarHeight]),l=this.colorbarHeight/c;for(let p=0;p<c;p++){const m=document.createElement("rect");a.appendChild(m),m.setAttribute("x",0),m.setAttribute("y",u(p)),m.setAttribute("width",js),m.setAttribute("height",l),m.setAttribute("class","color-rect");const g=Math.min(this.colorScale.length-1,Math.max(0,Math.floor(this.limitedValueScale(this.valueScale.invert(p))))),v=this.colorScale[g];v?m.setAttribute("style",`fill: rgb(${v[0]}, ${v[1]}, ${v[2]})`):m.setAttribute("style","fill: rgb(255,255,255,0)")}const h=document.createElement("g");n.appendChild(h),h.setAttribute("transform",`translate(${this.axis.pAxis.position.x},${this.axis.pAxis.position.y})`);let f=null;const d=this.valueScale.copy().range([this.colorbarHeight,0]);return this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?f=this.axis.exportAxisRightSVG(d,this.colorbarHeight):(this.options.colorbarPosition==="topRight"||this.options.colorbarPosition==="bottomRight")&&(f=this.axis.exportAxisLeftSVG(d,this.colorbarHeight)),h.appendChild(f),n}},{key:"setDataLensSize",value:function(n){this.dataLensPadding=Math.max(0,Math.floor((n-1)/2)),this.dataLensSize=this.dataLensPadding*2+1}},{key:"binsPerTile",value:function(){return this.tilesetInfo.bins_per_dimension||Lwe}},{key:"getVisibleRectangleData",value:function(n,o,a,s){let c=this.calculateZoomLevel();c=this.tilesetInfo.max_zoom?Math.min(this.tilesetInfo.max_zoom,c):c;const l=L5(this.tilesetInfo,c,this.binsPerTile())/this.binsPerTile(),h=[this._xScale.invert(n),this._xScale.invert(n+a)],f=[this._yScale.invert(o),this._yScale.invert(o+s)],d=[Math.max(h[0],this.tilesetInfo.min_pos[0]),Math.min(h[1],this.tilesetInfo.max_pos[0])],p=[Math.max(f[0],this.tilesetInfo.min_pos[1]),Math.min(f[1],this.tilesetInfo.max_pos[1])],m=Math.floor(d[0]/l),g=Math.floor(p[0]/l),v=Math.max(0,Math.ceil((d[1]-d[0])/l)),_=Math.max(0,Math.ceil((p[1]-p[0])/l)),y=Lu(new Array(_*v).fill(NaN),[_,v]);return this.visibleAndFetchedTiles().forEach(b=>{const T=b.mirrored?[b.tileData.tilePos[1],b.tileData.tilePos[0]]:b.tileData.tilePos,{tileX:S,tileY:k,tileWidth:O,tileHeight:D}=this.getTilePosAndDimensions(b.tileData.zoomLevel,T,this.binsPerTile()),R=Math.floor(S/l),w=Math.floor((S+O)/l),L=Math.floor(k/l),B=Math.floor((k+D)/l);let A=Math.max(m,R)-R,M=Math.max(g,L)-L;const j=Math.min(m+v,w)-R,W=Math.min(g+_,B)-L,K=Math.max(R-m,0),oe=Math.max(L-g,0),fe=j-A,Ae=W-M;if(!(fe<0||Ae<0)){if(b.mirrored&&A>M){const de=A;A=M,M=de}J5(y.hi(oe+Ae,K+fe).lo(oe,K),b.dataArray.hi(M+Ae,A+fe).lo(M,A))}}),y}},{key:"initTile",value:function(n){zr(xr(r.prototype),"initTile",this).call(this,n),n.tileData.dense.length===this.binsPerTile()**2&&(n.dataArray=Lu(Array.from(n.tileData.dense),[this.binsPerTile(),this.binsPerTile()]),this.continuousScaling&&n.tileData.tilePos[0]===n.tileData.tilePos[1]&&n.mirrored&&(n.tileData.denseDataExtrema.mirrorPrecomputedExtrema(),zr(xr(r.prototype),"initTile",this).call(this,n))),!(this.scale.minValue===null||this.scale.maxValue===null)&&this.renderTile(n)}},{key:"updateTile",value:function(n){n.scale&&this.scale&&this.scale.minValue===n.scale.minValue&&this.scale.maxValue===n.scale.maxValue||(this.renderTile(n),this.drawColorbar())}},{key:"destroyTile",value:function(n){n.sprite.destroy(!0),n.canvas=null,n.sprite=null,n.texture=null}},{key:"pixDataFunction",value:function(n,o){if(o){const{graphics:a}=n,s=this.tileDataToCanvas(o.pixData);n.sprite&&n.sprite.destroy(!0);const c=He.PIXI.VERSION[0]==="4"?He.PIXI.Texture.fromCanvas(s,He.PIXI.SCALE_MODES.NEAREST):He.PIXI.Texture.from(s,{scaleMode:He.PIXI.SCALE_MODES.NEAREST}),u=new He.PIXI.Sprite(c);n.sprite=u,n.texture=c,n.canvas=s,this.setSpriteProperties(n.sprite,n.tileData.zoomLevel,n.tileData.tilePos,n.mirrored),a.removeChildren(),a.addChild(n.sprite)}this.renderingTiles.delete(n.tileId)}},{key:"renderTile",value:function(n){const[o]=this.updateValueScale(),a=0;if(this.renderingTiles.add(n.tileId),this.tilesetInfo.tile_size&&n.tileData.dense.length<this.tilesetInfo.tile_size){const s=new Float32Array(this.tilesetInfo.tile_size);s.fill(NaN),s.set(n.tileData.dense),n.tileData.dense=s}B5(n,o,this.limitedValueScale.domain(),a,this.colorScale,s=>this.pixDataFunction(n,s),this.mirrorTiles()&&!n.mirrored&&n.tileData.tilePos[0]===n.tileData.tilePos[1],this.options.extent==="upper-right"&&n.tileData.tilePos[0]===n.tileData.tilePos[1],this.options.zeroValueColor?t5(this.options.zeroValueColor):void 0,{selectedRows:this.options.selectRows,selectedRowsAggregationMode:this.options.selectRowsAggregationMode,selectedRowsAggregationWithRelativeHeight:this.options.selectRowsAggregationWithRelativeHeight,selectedRowsAggregationMethod:this.options.selectRowsAggregationMethod})}},{key:"remove",value:function(){this.visibleAndFetchedTiles().forEach(n=>this.destroyTile(n)),this.gMain.remove(),this.gMain=null,zr(xr(r.prototype),"remove",this).call(this)}},{key:"refScalesChanged",value:function(n,o){zr(xr(r.prototype),"refScalesChanged",this).call(this,n,o),_y(this.fetchedTiles).filter(a=>a.sprite).forEach(a=>this.setSpriteProperties(a.sprite,a.tileData.zoomLevel,a.tileData.tilePos,a.mirrored))}},{key:"superSVG",value:function(){return zr(xr(r.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let n=null,o=null;zr(xr(r.prototype),"exportSVG",this)?[o,n]=zr(xr(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");n.appendChild(a),a.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const c of this.visibleAndFetchedTiles()){const u=c.sprite.rotation*180/Math.PI,l=document.createElement("g");l.setAttribute("transform",`translate(${c.sprite.x},${c.sprite.y}) rotate(${u}) scale(${c.sprite.scale.x},${c.sprite.scale.y})`);const h=document.createElement("image");h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c.canvas.toDataURL()),h.setAttribute("width",c.canvas.width),h.setAttribute("height",c.canvas.height),h.setAttribute("style","image-rendering: pixelated"),l.appendChild(h),a.appendChild(l)}const s=this.exportColorBarSVG();return n.appendChild(s),[o,o]}},{key:"getVisiblePartOfUppLeftTile",value:function(){const n=this.visibleAndFetchedTiles().map(p=>{const m=p.mirrored?[p.tileData.tilePos[1],p.tileData.tilePos[0]]:p.tileData.tilePos;return[m[0],m[1],p.tileId]});if(n.length===0)return null;let o=n[0];for(let p=0;p<n.length;p++){const m=n[p];(m[0]<o[0]||m[1]<o[1])&&(o=m)}const a=Math.min(VS,this.binsPerTile()),s=this.binsPerTile()/a,c=this.visibleAndFetchedTiles().filter(p=>p.tileId===o[2])[0],u=this.getIndicesOfVisibleDataInTile(c),l=u[0],h=u[1],f=l-l%s,d=h-h%s;return[c.tileId,f,d]}},{key:"getIndicesOfVisibleDataInTile",value:function(n){const o=this._xScale.range(),a=this._yScale.range(),s=n.mirrored?[n.tileData.tilePos[1],n.tileData.tilePos[0]]:n.tileData.tilePos,{tileX:c,tileY:u,tileWidth:l,tileHeight:h}=this.getTilePosAndDimensions(n.tileData.zoomLevel,s,this.binsPerTile()),f=bt().domain([0,this.binsPerTile()]).range([c,c+l]),d=Math.max(0,Math.round(f.invert(this._xScale.invert(o[0])))-1),p=Math.min(this.binsPerTile(),Math.round(f.invert(this._xScale.invert(o[1])))),m=bt().domain([0,this.binsPerTile()]).range([u,u+h]),g=Math.max(0,Math.round(m.invert(this._yScale.invert(a[0])))-1),v=Math.min(this.binsPerTile(),Math.round(m.invert(this._yScale.invert(a[1]))));return n.mirrored&&s[0]!==s[1]?[g,d,v,p]:[d,g,p,v]}},{key:"minVisibleValue",value:function(n=!1){const o=this.visibleAndFetchedTiles().map(s=>{if(s.tileData.denseDataExtrema===void 0)return null;const c=this.getIndicesOfVisibleDataInTile(s);return s.tileData.denseDataExtrema.getMinNonZeroInSubset(c)});if(o.length===0&&this.valueScaleMax===null)return null;const a=Math.min.apply(null,o);return a===Number.MAX_SAFE_INTEGER?zr(xr(r.prototype),"minVisibleValue",this).call(this,n):n?a:this.valueScaleMin!==null?this.valueScaleMin:a}},{key:"maxVisibleValue",value:function(n=!1){const o=this.visibleAndFetchedTiles().map(s=>{if(s.tileData.denseDataExtrema===void 0)return null;const c=this.getIndicesOfVisibleDataInTile(s);return s.tileData.denseDataExtrema.getMaxNonZeroInSubset(c)});if(o.length===0&&this.valueScaleMax===null)return null;const a=Math.max.apply(null,o);return a===Number.MIN_SAFE_INTEGER?zr(xr(r.prototype),"maxVisibleValue",this).call(this,n):n?a:this.valueScaleMax!==null?this.valueScaleMax:a}},{key:"zoomed",value:function(n,o,a,s,c){if(this.brushing)return;zr(xr(r.prototype),"zoomed",this).call(this,n,o),this.pMain.position.x=s,this.pMain.position.y=c,this.pMain.scale.x=a,this.pMain.scale.y=a;const u=this.isValueScaleLocked();if(this.continuousScaling&&this.minValue()!==void 0&&this.maxValue()!==void 0){const l=JSON.stringify(this.getVisiblePartOfUppLeftTile());if(this.valueScaleMin===null&&this.valueScaleMax===null&&!u&&l!==this.prevIndUpperLeftTile){const h=this.minVisibleValue(),f=this.maxVisibleValue(),d=1e-6;h!==null&&f!==null&&(Math.abs(this.minValue()-h)>d||Math.abs(this.maxValue()-f)>d)&&(this.minValue(h),this.maxValue(f),this.scheduleRerender()),this.prevIndUpperLeftTile=l}u&&this.onValueScaleChanged()}this.mouseMoveZoomHandler()}},{key:"addTileId",value:function(n,o,a,s,c,u=!1){const l=[o,a,s];l.mirrored=u,l.dataTransform=c,n.push(l)}},{key:"tilesToId",value:function(n,o,a){const s=n,c=o,u=this.options&&this.options.dataTransform||"default",l=[];for(let h=0;h<s.length;h++)for(let f=0;f<c.length;f++)this.mirrorTiles()?(s[h]>=c[f]?this.options.extent!=="lower-left"&&this.addTileId(l,a,c[f],s[h],u,!0):this.options.extent!=="upper-right"&&this.addTileId(l,a,s[h],c[f],u),s[h]===c[f]&&this.options.extent==="lower-left"&&this.addTileId(l,a,s[h],c[f],u)):this.addTileId(l,a,s[h],c[f],u);return l}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const n=this.tilesetInfo.resolutions.map(o=>+o).sort((o,a)=>a-o);this.xTiles=yy(n[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=yy(n[this.zoomLevel],this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=vy(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=vy(this.zoomLevel,this._yScale,this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],this.options.reverseYAxis?-this.tilesetInfo.min_pos[1]:this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width1||this.tilesetInfo.max_width);this.setVisibleTiles(this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel))}}},{key:"mirrorTiles",value:function(){return!(this.tilesetInfo.mirror_tiles&&(this.tilesetInfo.mirror_tiles===!1||this.tilesetInfo.mirror_tiles==="false"))}},{key:"getMouseOverHtml",value:function(n,o,a){if(!this.options||!this.options.showTooltip&&!a||!this.tilesetInfo)return"";const s=R5(this.tilesetInfo,this.zoomLevel),c=Math.max(this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0]),u=Math.ceil(Math.log(c/s)/Math.log(10));this.setDataLensSize(1);const l=this._xScale.invert(n),h=this._yScale.invert(o);let f="<b>Position:</b> ";if(this.chromInfo){const p=Dr(l,this.chromInfo),m=Dr(h,this.chromInfo),g=v=>Oi(`.${u}s`)(v);f+=`${p[0]}:${g(p[1])} & ${m[0]}:${g(m[1])}`,f+="<br/>"}let d=null;try{d=this.getVisibleRectangleData(n,o,1,1).get(0,0)}catch{return""}return this.options&&this.options.heatmapValueScaling==="log"?d>0?`${f}<b>Value:</b> 1e${Oi(".3f")(Math.log(d)/Math.log(10))}`:d===0?`${f}<b>Value:</b> 0`:`${f}<b>Value:</b> N/A`:`${f}<b>Value:</b> ${Oi(".3f")(d)}`}},{key:"getTilePosAndDimensions",value:function(n,o,a){const s=a||this.binsPerTile();if(this.tilesetInfo.resolutions){const v=this.tilesetInfo.resolutions.map(S=>+S).sort((S,k)=>k-S)[n],_=v*s,y=_,b=v*s*o[0],T=v*s*o[1];return{tileX:b,tileY:T,tileWidth:_,tileHeight:y}}const c=o[0],u=o[1],l=this.tilesetInfo.min_pos[0],h=this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],f=this.tilesetInfo.max_width/2**n,d=this.tilesetInfo.max_width/2**n,p=l+c*f,m=h+u*d;return{tileX:p,tileY:m,tileWidth:f,tileHeight:d}}},{key:"calculateZoomLevel",value:function(){this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1];let n=null;if(this.tilesetInfo.resolutions){const o=nw(this.tilesetInfo.resolutions,this._xScale),a=nw(this.tilesetInfo.resolutions,this._yScale);n=Math.min(o,a)}else{const o=iw(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.binsPerTile()),a=iw(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.binsPerTile());n=Math.max(o,a),n=Math.min(n,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?n=Math.min(this.options.maxZoom,n):console.error("Invalid maxZoom on track:",this)),n}},{key:"tileToLocalId",value:function(n){return n.dataTransform&&n.dataTransform!=="default"?`${n.join(".")}.${n.mirrored}.${n.dataTransform}`:`${n.join(".")}.${n.mirrored}`}},{key:"tileToRemoteId",value:function(n){return n.dataTransform&&n.dataTransform!=="default"?`${n.join(".")}.${n.dataTransform}`:`${n.join(".")}`}},{key:"localToRemoteId",value:function(n){const o=n.split(".");return o.slice(0,o.length-1).join(".")}}]),r}(qa);function Bwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,$we(i.key),i)}}function Hwe(e,t,r){return t&&J4(e.prototype,t),r&&J4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $we(e){var t=Fwe(e,"string");return typeof t=="symbol"?t:String(t)}function Fwe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kk(e,t)}function kk(e,t){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},kk(e,t)}function Uwe(e){var t=Vwe();return function(){var i=h_(e),n;if(t){var o=h_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Gwe(this,n)}}function Gwe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zwe(e)}function zwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h_(e){return h_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h_(e)}function eG(e){if(!e.graphics)return;const t=e.graphics,{tileX:r,tileY:i,tileWidth:n}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos);e.drawnAtScale=this._xScale.copy();const o=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0))),a=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=o,e.text.scale.y=a;const s=this._xScale(n)-this._xScale(0);if(e.textGraphics.scale.x=s/256,e.textGraphics.scale.y=s/256,t.clear(),t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5,e.mirrored){const c=this._refXScale(i+n)-this._refXScale(i),u=this._refYScale(r+n)-this._refYScale(r);e.textGraphics.position.x=this._refXScale(i)+c/2,e.textGraphics.position.y=this._refYScale(r)+u/2,t.drawRect(this._refXScale(i),this._refYScale(r),c,u)}else{const c=this._refXScale(r+n)-this._refXScale(r),u=this._refYScale(i+n)-this._refYScale(i);e.textGraphics.position.x=this._refXScale(r)+c/2,e.textGraphics.position.y=this._refYScale(i)+u/2,t.drawRect(this._refXScale(r),this._refYScale(i),c,u)}}function tG(e){const t=e.graphics;e.textGraphics=new He.PIXI.Graphics,e.mirrored?e.text=new He.PIXI.Text(`${e.tileData.zoomLevel}/${[e.tileData.tilePos[1],e.tileData.tilePos[0]].join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}):e.text=new He.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics)}let rG=function(e){jwe(r,e);var t=Uwe(r);function r(){return Bwe(this,r),t.apply(this,arguments)}return Hwe(r,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(n){tG.bind(this)(n),this.drawTile(n)}},{key:"destroyTile",value:function(n,o){}},{key:"drawTile",value:function(n){eG.bind(this)(n)}},{key:"fetchNewTiles",value:function(n){n.forEach(o=>{const s=o.remoteId.split("."),c={zoomLevel:s[0],tilePos:s.slice(1,s.length).map(u=>+u)};this.fetchedTiles[o.tileId]=o,this.fetchedTiles[o.tileId].tileData=c,this.fetching.has(o.remoteId)&&this.fetching.delete(o.remoteId)}),this.synchronizeTilesAndGraphics()}}]),r}(Hf);function Wwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,qwe(i.key),i)}}function Ywe(e,t,r){return t&&nG(e.prototype,t),r&&nG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qwe(e){var t=Xwe(e,"string");return typeof t=="symbol"?t:String(t)}function Xwe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function om(){return typeof Reflect<"u"&&Reflect.get?om=Reflect.get.bind():om=function(t,r,i){var n=Kwe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},om.apply(this,arguments)}function Kwe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=gc(e),e!==null););return e}function Zwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ik(e,t)}function Ik(e,t){return Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Ik(e,t)}function Qwe(e){var t=eAe();return function(){var i=gc(e),n;if(t){var o=gc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Jwe(this,n)}}function Jwe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iG(e)}function iG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gc(e){return gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gc(e)}const tAe=1024;let Ck=function(e){Zwe(r,e);var t=Qwe(r);function r(i,n){var o;Wwe(this,r),o=t.call(this,i,n);const{onMouseMoveZoom:a,isValueScaleLocked:s,getLockGroupExtrema:c}=i;return o.onMouseMoveZoom=a,o.isValueScaleLocked=s,o.getLockGroupExtrema=c,o.onMouseMoveZoom&&o.pubSubs.push(o.pubSub.subscribe("app.mouseMove",o.mouseMoveHandler.bind(iG(o)))),o}return Ywe(r,[{key:"initTile",value:function(n){om(gc(r.prototype),"initTile",this).call(this,n)}},{key:"tileToLocalId",value:function(n){return`${n.join(".")}`}},{key:"tileToRemoteId",value:function(n){return`${n.join(".")}`}},{key:"relevantScale",value:function(){return null}},{key:"setVisibleTiles",value:function(n){this.visibleTiles=n.map(o=>({tileId:this.tileToLocalId(o),remoteId:this.tileToRemoteId(o)})),this.visibleTileIds=new Set(this.visibleTiles.map(o=>o.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const a=this.tilesetInfo.resolutions.map(u=>+u).sort((u,l)=>l-u),c=at.calculateTilesFromResolution(a[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]).map(u=>[this.zoomLevel,u]);this.setVisibleTiles(c);return}const o=at.calculateTiles(this.zoomLevel,this.relevantScale(),this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width).map(a=>[this.zoomLevel,a]);this.setVisibleTiles(o)}},{key:"getTilePosAndDimensions",value:function(n,o,a){const s=o[0],c=o[0];if(this.tilesetInfo.resolutions){const v=a||tAe,y=this.tilesetInfo.resolutions.map(O=>+O).sort((O,D)=>D-O)[n],b=y*v,T=b,S=y*v*o[0],k=y*v*o[1];return{tileX:S,tileY:k,tileWidth:b,tileHeight:T}}const u=this.tilesetInfo.max_width,l=this.tilesetInfo.max_width,h=this.tilesetInfo.min_pos[0],f=this.tilesetInfo.min_pos[1],d=u/2**n,p=l/2**n,m=h+s*d,g=f+c*p;return{tileX:m,tileY:g,tileWidth:d,tileHeight:p}}},{key:"updateTile",value:function(n){}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!1)}},{key:"getIndicesOfVisibleDataInTile",value:function(n){const o=this._xScale.range();if(!this.tilesetInfo)return[null,null];const{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),c=bt().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([a,a+s]),u=Math.max(0,Math.round(c.invert(this._xScale.invert(o[0])))),l=Math.min(n.tileData.dense.length,Math.round(c.invert(this._xScale.invert(o[1]))));return[u,l]}},{key:"minVisibleValue",value:function(n=!1){let o=this.visibleAndFetchedIds();o.length===0&&(o=Object.keys(this.fetchedTiles));const a=o.map(c=>this.fetchedTiles[c]).map(c=>{const u=this.getIndicesOfVisibleDataInTile(c);return c.tileData.denseDataExtrema.getMinNonZeroInSubset(u)}),s=Math.min(...a);return n?s:this.valueScaleMin!==null?this.valueScaleMin:s}},{key:"maxVisibleValue",value:function(n=!1){let o=this.visibleAndFetchedIds();o.length===0&&(o=Object.keys(this.fetchedTiles));const a=o.map(c=>this.fetchedTiles[c]).map(c=>{const u=this.getIndicesOfVisibleDataInTile(c);return c.tileData.denseDataExtrema.getMaxNonZeroInSubset(u)}),s=Math.max(...a);return n?s:this.valueScaleMax!==null?this.valueScaleMax:s}},{key:"getAggregatedVisibleValue",value:function(n="max"){const o=n==="min"?Math.min:Math.max,a=n==="min"?1/0:-1/0;let s=this.visibleAndFetchedIds();s.length===0&&(s=Object.keys(this.fetchedTiles));const c=this._xScale.range();return s.map(u=>this.fetchedTiles[u]).map(u=>{if(!u.tileData.tilePos)return n==="min"?this.minVisibleValue():this.maxVisibleValue();const{tileX:l,tileWidth:h}=this.getTilePosAndDimensions(u.tileData.zoomLevel,u.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),f=bt().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([l,l+h]),d=Math.max(0,Math.round(f.invert(this._xScale.invert(c[0])))),p=Math.min(u.tileData.dense.length,Math.round(f.invert(this._xScale.invert(c[1]))));return u.tileData.dense.slice(d,p)}).reduce((u,l)=>o(u,...l),a)}},{key:"getDataAtPos",value:function(n){let o;if(!this.tilesetInfo)return o;const a=this.calculateZoomLevel(),s=at.calculateTileWidth(this.tilesetInfo,a,this.tilesetInfo.tile_size),c=this._xScale.invert(n)/s,u=this.tileToLocalId([a,Math.floor(c)]),l=this.fetchedTiles[u];if(!l)return o;const h=this.tilesetInfo.tile_size*(c-Math.floor(c));return l.tileData.dense?l.tileData.dense[Math.floor(h)]:null}},{key:"mouseMoveHandler",value:function({x:n,y:o}={}){this.isWithin(n,o)&&(this.mouseX=n,this.mouseY=o,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){}},{key:"zoomed",value:function(...n){om(gc(r.prototype),"zoomed",this).call(this,...n),this.mouseMoveZoomHandler()}}]),r}(qa);function rAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,iAe(i.key),i)}}function nAe(e,t,r){return t&&oG(e.prototype,t),r&&oG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iAe(e){var t=oAe(e,"string");return typeof t=="symbol"?t:String(t)}function oAe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vc(){return typeof Reflect<"u"&&Reflect.get?vc=Reflect.get.bind():vc=function(t,r,i){var n=aAe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},vc.apply(this,arguments)}function aAe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Xa(e),e!==null););return e}function sAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pk(e,t)}function Pk(e,t){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Pk(e,t)}function lAe(e){var t=uAe();return function(){var i=Xa(e),n;if(t){var o=Xa(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cAe(this,n)}}function cAe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dk(e)}function Dk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xa(e){return Xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xa(e)}let $f=function(e){sAe(r,e);var t=lAe(r);function r(i,n){var o;rAe(this,r),o=t.call(this,i,n);const{animate:a,isShowGlobalMousePosition:s}=i;return o.constIndicator=new He.PIXI.Graphics,o.pMain.addChild(o.constIndicator),o.axis=new e_(Dk(o)),o.pBase.addChild(o.axis.pAxis),o.animate=a,o.options=n,o.isShowGlobalMousePosition=s,o.pubSubs=[],o.options.showMousePosition&&!o.hideMousePosition&&(o.hideMousePosition=Ss(Dk(o),o.is2d,o.isShowGlobalMousePosition())),o}return nAe(r,[{key:"rerender",value:function(n,o){const a=JSON.stringify(n);!o&&a===this.prevOptions||(vc(Xa(r.prototype),"rerender",this).call(this,n,o),this.prevOptions=a,this.options=n,this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=Ss(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo.resolutions)return at.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]-2);const n=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size);let o=Math.min(n,this.maxZoom);return o=Math.max(o,0),o}},{key:"relevantScale",value:function(){return this._xScale}},{key:"draw",value:function(){vc(Xa(r.prototype),"draw",this).call(this),this.drawConstIndicator()}},{key:"drawAxis",value:function(n){if(!this.options.axisPositionVertical&&!this.options.axisPositionHorizontal){this.axis.clearAxis();return}if(this.options.axisPositionVertical&&this.options.axisPositionVertical==="hidden"){this.axis.clearAxis();return}if(this.options.axisPositionHorizontal&&this.options.axisPositionHorizontal==="hidden"){this.axis.clearAxis();return}const o=this.options.axisMargin||0;this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"?(this.axis.pAxis.position.x=this.position[0]+o,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(n,this.dimensions[1])):this.options.axisPositionHorizontal==="outsideLeft"||this.options.axisPositionVertical==="outsideTop"?(this.axis.pAxis.position.x=this.position[0]+o,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(n,this.dimensions[1])):this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"?(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-o,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(n,this.dimensions[1])):(this.options.axisPositionHorizontal==="outsideRight"||this.options.axisPositionVertical==="outsideBottom")&&(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-o,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(n,this.dimensions[1]))}},{key:"mouseMoveZoomHandler",value:function(n=this.mouseX,o=this.mouseY){if(typeof n>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;let a=0,s=0,c="1d-horizontal";this.isLeftModified?(a=o-this.position[1],s=n-this.position[0],c="1d-vertical"):(a=n-this.position[0],s=o-this.position[1]);const u=n-this.position[0],l=o-this.position[1],h=this._xScale.invert(a),f=this._yScale.invert(s),d=this.getDataAtPos(a);d&&this.onMouseMoveZoom({trackId:this.id,data:d,absX:n,absY:o,relX:u,relY:l,dataX:h,dataY:f,orientation:c})}},{key:"drawConstIndicator",value:function(){if(!(!this.constIndicator||!this.constIndicator._graphics))try{for(this.constIndicator.clear();this.constIndicator.children[0];)this.constIndicator.removeChild(this.constIndicator.children[0]);if(!this.options.constIndicators||!this.valueScale)return;this.options.constIndicators.forEach(({color:n="black",opacity:o=1,label:a=null,labelColor:s="black",labelOpacity:c=1,labelPosition:u="leftTop",labelSize:l=12,value:h=0}={})=>{const f=it(n),d=it(s);this.constIndicator.beginFill(f,o);const p=this.valueScale(h);let m=0,g=0;if(a){const v=new He.PIXI.Text(a,{fontFamily:"Arial",fontSize:l,fill:d});switch(v.alpha=c,u){case"right":v.anchor.x=1,v.anchor.y=.5,v.x=this.position[0]+this.dimensions[0]-6,v.y=p,g=v.width+8;break;case"rightBottom":v.anchor.x=1,v.anchor.y=0,v.x=this.position[0]+this.dimensions[0]-6,v.y=p;break;case"rightTop":v.anchor.x=1,v.anchor.y=1,v.x=this.position[0]+this.dimensions[0]-6,v.y=p;break;case"left":v.anchor.x=0,v.anchor.y=.5,v.x=this.position[0]+2,v.y=p,m=v.width+4;break;case"leftBottom":v.anchor.x=0,v.anchor.y=0,v.x=this.position[0]+2,v.y=p;break;case"leftTop":default:v.anchor.x=0,v.anchor.y=1,v.x=this.position[0]+2,v.y=p;break}this.constIndicator.addChild(v)}this.constIndicator.drawRect(this.position[0]+m,p,this.dimensions[0]-g,1)})}catch{}}},{key:"exportSVG",value:function(){let n=null,o=null;vc(Xa(r.prototype),"exportSVG",this)?[o,n]=vc(Xa(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o),o.setAttribute("class","horizontal-tiled-1d-track");const a=document.createElement("g");return n.appendChild(a),this.options.constIndicators&&this.options.constIndicators.forEach(({color:s="black",opacity:c=1,label:u=null,labelColor:l="black",labelOpacity:h=1,labelPosition:f="leftTop",labelSize:d=12,value:p=0}={})=>{const m=this.valueScale(p);if(u){const v=document.createElement("text");switch(v.textContent=u,v.setAttribute("x",this.position[0]),v.setAttribute("y",m),v.setAttribute("style",`font-family: 'Arial'; font-size: ${d}px; fill: ${l}; fill-opacity: ${h};`),f){case"rightBottom":v.setAttribute("x",this.position[0]+this.dimensions[0]-6),v.setAttribute("y",m+d+2),v.setAttribute("text-anchor","end");break;case"right":case"rightTop":v.setAttribute("x",this.position[0]+this.dimensions[0]-6),v.setAttribute("y",m-2),v.setAttribute("text-anchor","end");break;case"leftBottom":v.setAttribute("x",this.position[0]+2),v.setAttribute("y",m+d+2);break;case"left":case"leftTop":default:v.setAttribute("x",this.position[0]+2),v.setAttribute("y",m-2);break}a.appendChild(v)}const g=document.createElement("line");g.setAttribute("x1",this.position[0]),g.setAttribute("y1",m),g.setAttribute("x2",this.dimensions[0]),g.setAttribute("y2",m),g.setAttribute("stroke",s),g.setAttribute("stroke-opacity",c),a.appendChild(g)}),[o,n]}}]),r}(Ck);function fAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,dAe(i.key),i)}}function hAe(e,t,r){return t&&aG(e.prototype,t),r&&aG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function dAe(e){var t=pAe(e,"string");return typeof t=="symbol"?t:String(t)}function pAe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d_(){return typeof Reflect<"u"&&Reflect.get?d_=Reflect.get.bind():d_=function(t,r,i){var n=mAe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},d_.apply(this,arguments)}function mAe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ff(e),e!==null););return e}function gAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xk(e,t)}function xk(e,t){return xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},xk(e,t)}function vAe(e){var t=_Ae();return function(){var i=Ff(e),n;if(t){var o=Ff(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return yAe(this,n)}}function yAe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bAe(e)}function bAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _Ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ff(e){return Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ff(e)}let sG=function(e){gAe(r,e);var t=vAe(r);function r(i,n){var o;return fAe(this,r),o=t.call(this,i,n),o.pMain=o.pMobile,o}return hAe(r,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(n){const o=n.graphics;n.textGraphics=new He.PIXI.Graphics,n.text=new He.PIXI.Text(`${n.tileData.zoomLevel}/${n.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),n.textGraphics.addChild(n.text),n.text.anchor.x=.5,n.text.anchor.y=.5,o.addChild(n.textGraphics),this.drawTile(n)}},{key:"destroyTile",value:function(n){n.graphics.destroy(!0)}},{key:"remove",value:function(){this.visibleAndFetchedTiles().forEach(n=>this.destroyTile(n))}},{key:"drawTile",value:function(n){if(d_(Ff(r.prototype),"drawTile",this).call(this,n),!n.graphics)return;const o=n.graphics,{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos),c=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0)));n.text.scale.x=c,o.clear();const u=this.dimensions[1],l=this._refXScale(a+s)-this._refXScale(a);n.textGraphics.position.x=this._refXScale(a)+l/2,n.textGraphics.position.y=u/2;const h=this._refXScale(a);o.lineStyle(4*c,255,1),o.beginFill(16740363,.4),o.alpha=.5,o.moveTo(h,0),o.lineTo(h,u),o.moveTo(h+l,0),o.lineTo(h+l,u),o.lineStyle(0,255,1),o.drawRect(h,0,l,u)}}]),r}($f);function TAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,SAe(i.key),i)}}function EAe(e,t,r){return t&&lG(e.prototype,t),r&&lG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function SAe(e){var t=wAe(e,"string");return typeof t=="symbol"?t:String(t)}function wAe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p_(){return typeof Reflect<"u"&&Reflect.get?p_=Reflect.get.bind():p_=function(t,r,i){var n=AAe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},p_.apply(this,arguments)}function AAe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=jf(e),e!==null););return e}function OAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nk(e,t)}function Nk(e,t){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Nk(e,t)}function kAe(e){var t=PAe();return function(){var i=jf(e),n;if(t){var o=jf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return IAe(this,n)}}function IAe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CAe(e)}function CAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jf(e){return jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jf(e)}let cG=function(e){OAe(r,e);var t=kAe(r);function r(){return TAe(this,r),t.apply(this,arguments)}return EAe(r,[{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);return Math.min(n,this.maxZoom)}},{key:"relevantScale",value:function(){return this._yScale}},{key:"zoomed",value:function(n,o){p_(jf(r.prototype),"zoomed",this).call(this,n,o);const a=1,s=(o(1)-o(0))/(this._refYScale(1)-this._refYScale(0)),c=this.position[0],u=o(0)+this.position[1]-this._refYScale(1)*s;this.pMain.position.x=c,this.pMain.position.y=u,this.pMain.scale.x=a,this.pMain.scale.y=s}}]),r}(Ck);function DAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,NAe(i.key),i)}}function xAe(e,t,r){return t&&uG(e.prototype,t),r&&uG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NAe(e){var t=RAe(e,"string");return typeof t=="symbol"?t:String(t)}function RAe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m_(){return typeof Reflect<"u"&&Reflect.get?m_=Reflect.get.bind():m_=function(t,r,i){var n=MAe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},m_.apply(this,arguments)}function MAe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Uf(e),e!==null););return e}function LAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rk(e,t)}function Rk(e,t){return Rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Rk(e,t)}function BAe(e){var t=FAe();return function(){var i=Uf(e),n;if(t){var o=Uf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return HAe(this,n)}}function HAe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Ae(e)}function $Ae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uf(e){return Uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uf(e)}let fG=function(e){LAe(r,e);var t=BAe(r);function r(){return DAe(this,r),t.apply(this,arguments)}return xAe(r,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(n){const o=n.graphics;n.textGraphics=new He.PIXI.Graphics,n.text=new He.PIXI.Text(`${n.tileData.zoomLevel}/${n.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),n.textGraphics.addChild(n.text),n.text.anchor.x=.5,n.text.anchor.y=.5,n.text.rotation=-Math.PI/2,o.addChild(n.textGraphics),this.drawTile(n,o)}},{key:"destroyTile",value:function(n,o){}},{key:"drawTile",value:function(n){if(m_(Uf(r.prototype),"drawTile",this).call(this,n),!n.graphics)return;const o=n.graphics,{tileY:a,tileHeight:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos),c=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));n.text.scale.x=c,o.clear(),o.lineStyle(4*c,255,1),o.beginFill(16740363,.4),o.alpha=.5;const u=this.dimensions[0],l=this._refYScale(a+s)-this._refYScale(a);n.textGraphics.position.x=u/2,n.textGraphics.position.y=this._refYScale(a)+l/2,o.drawRect(0,this._refYScale(a),u,l)}},{key:"fetchNewTiles",value:function(n){n.forEach(o=>{const s=o.remoteId.split("."),c={zoomLevel:s[1],tilePos:s.slice(2,s.length).map(u=>+u)};this.fetchedTiles[o.tileId]=o,this.fetchedTiles[o.tileId].tileData=c,this.fetching.has(o.remoteId)&&this.fetching.delete(o.remoteId)}),this.synchronizeTilesAndGraphics()}}]),r}(cG);var Mk=Array.prototype.slice;function jAe(e){return e}var g_=1,v_=2,Lk=3,am=4,hG=1e-6;function UAe(e){return"translate("+e+",0)"}function GAe(e){return"translate(0,"+e+")"}function zAe(e){return t=>+e(t)}function VAe(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function WAe(){return!this.__axis}function y_(e,t){var r=[],i=null,n=null,o=6,a=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===g_||e===am?-1:1,l=e===am||e===v_?"x":"y",h=e===g_||e===Lk?UAe:GAe;function f(d){var p=i??(t.ticks?t.ticks.apply(t,r):t.domain()),m=n??(t.tickFormat?t.tickFormat.apply(t,r):jAe),g=Math.max(o,0)+s,v=t.range(),_=+v[0]+c,y=+v[v.length-1]+c,b=(t.bandwidth?VAe:zAe)(t.copy(),c),T=d.selection?d.selection():d,S=T.selectAll(".domain").data([null]),k=T.selectAll(".tick").data(p,t).order(),O=k.exit(),D=k.enter().append("g").attr("class","tick"),R=k.select("line"),w=k.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(D),R=R.merge(D.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),w=w.merge(D.append("text").attr("fill","currentColor").attr(l,u*g).attr("dy",e===g_?"0em":e===Lk?"0.71em":"0.32em")),d!==T&&(S=S.transition(d),k=k.transition(d),R=R.transition(d),w=w.transition(d),O=O.transition(d).attr("opacity",hG).attr("transform",function(L){return isFinite(L=b(L))?h(L+c):this.getAttribute("transform")}),D.attr("opacity",hG).attr("transform",function(L){var B=this.parentNode.__axis;return h((B&&isFinite(B=B(L))?B:b(L))+c)})),O.remove(),S.attr("d",e===am||e===v_?a?"M"+u*a+","+_+"H"+c+"V"+y+"H"+u*a:"M"+c+","+_+"V"+y:a?"M"+_+","+u*a+"V"+c+"H"+y+"V"+u*a:"M"+_+","+c+"H"+y),k.attr("opacity",1).attr("transform",function(L){return h(b(L)+c)}),R.attr(l+"2",u*o),w.attr(l,u*g).text(m),T.filter(WAe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===v_?"start":e===am?"end":"middle"),T.each(function(){this.__axis=b})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return r=Mk.call(arguments),f},f.tickArguments=function(d){return arguments.length?(r=d==null?[]:Mk.call(d),f):r.slice()},f.tickValues=function(d){return arguments.length?(i=d==null?null:Mk.call(d),f):i&&i.slice()},f.tickFormat=function(d){return arguments.length?(n=d,f):n},f.tickSize=function(d){return arguments.length?(o=a=+d,f):o},f.tickSizeInner=function(d){return arguments.length?(o=+d,f):o},f.tickSizeOuter=function(d){return arguments.length?(a=+d,f):a},f.tickPadding=function(d){return arguments.length?(s=+d,f):s},f.offset=function(d){return arguments.length?(c=+d,f):c},f}function dG(e){return y_(g_,e)}function YAe(e){return y_(v_,e)}function qAe(e){return y_(Lk,e)}function pG(e){return y_(am,e)}const XAe=Object.freeze(Object.defineProperty({__proto__:null,axisBottom:qAe,axisLeft:pG,axisRight:YAe,axisTop:dG},Symbol.toStringTag,{value:"Module"}));function KAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,QAe(i.key),i)}}function ZAe(e,t,r){return t&&mG(e.prototype,t),r&&mG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function QAe(e){var t=JAe(e,"string");return typeof t=="symbol"?t:String(t)}function JAe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bk(e,t)}function Bk(e,t){return Bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Bk(e,t)}function tOe(e){var t=iOe();return function(){var i=b_(e),n;if(t){var o=b_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return rOe(this,n)}}function rOe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nOe(e)}function nOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b_(e){return b_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b_(e)}let Ka=function(e){eOe(r,e);var t=tOe(r);function r(i,n){var o;KAe(this,r),o=t.call(this,i,n);const{svgElement:a}=i;return o.gMain=Ht(a).append("g"),o.clipUid=xt.nice(),o.clipRect=o.gMain.append("clipPath").attr("id",`track-bounds-${o.clipUid}`).append("rect"),o.gMain.attr("clip-path",`url(#track-bounds-${o.clipUid})`),o}return ZAe(r,[{key:"setPosition",value:function(n){this.position=n,this.gMain.attr("transform",`translate(${this.position[0]},${this.position[1]})`),this.draw()}},{key:"setDimensions",value:function(n){this.dimensions=n,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]]),n[0]>=0&&n[1]>=0?(this.clipRect.attr("width",n[0]),this.clipRect.attr("height",n[1])):(this.clipRect.attr("width",0),this.clipRect.attr("height",0)),this.draw()}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null}},{key:"draw",value:function(){return this}}]),r}(pc);function oOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,sOe(i.key),i)}}function aOe(e,t,r){return t&&gG(e.prototype,t),r&&gG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sOe(e){var t=lOe(e,"string");return typeof t=="symbol"?t:String(t)}function lOe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sm(){return typeof Reflect<"u"&&Reflect.get?sm=Reflect.get.bind():sm=function(t,r,i){var n=cOe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},sm.apply(this,arguments)}function cOe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=yc(e),e!==null););return e}function uOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hk(e,t)}function Hk(e,t){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Hk(e,t)}function fOe(e){var t=pOe();return function(){var i=yc(e),n;if(t){var o=yc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return hOe(this,n)}}function hOe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dOe(e)}function dOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yc(e){return yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yc(e)}let vG=function(e){uOe(r,e);var t=fOe(r);function r(i,n){var o;return oOe(this,r),o=t.call(this,i,n),o.axis=dG(o._xScale),o.gAxis=o.gMain.append("g"),o.tilesetInfo=!0,o}return aOe(r,[{key:"setDimensions",value:function(n){sm(yc(r.prototype),"setDimensions",this).call(this,n),this.axis.ticks(Math.ceil(this.dimensions[0]/150)),this.gAxis.attr("transform",`translate(0,${n[1]})`)}},{key:"draw",value:function(){return this.axis.scale(this._xScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(n,o){sm(yc(r.prototype),"zoomed",this).call(this,n,o),this.draw()}}]),r}(Ka);function mOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yG(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,vOe(i.key),i)}}function gOe(e,t,r){return t&&yG(e.prototype,t),r&&yG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vOe(e){var t=yOe(e,"string");return typeof t=="symbol"?t:String(t)}function yOe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lm(){return typeof Reflect<"u"&&Reflect.get?lm=Reflect.get.bind():lm=function(t,r,i){var n=bOe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},lm.apply(this,arguments)}function bOe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=bc(e),e!==null););return e}function _Oe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$k(e,t)}function $k(e,t){return $k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},$k(e,t)}function TOe(e){var t=wOe();return function(){var i=bc(e),n;if(t){var o=bc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return EOe(this,n)}}function EOe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SOe(e)}function SOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bc(e){return bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bc(e)}let bG=function(e){_Oe(r,e);var t=TOe(r);function r(i,n){var o;return mOe(this,r),o=t.call(this,i,n),o.axis=pG(o._yScale),o.gAxis=o.gMain.append("g"),o.tilesetInfo=!0,o}return gOe(r,[{key:"setDimensions",value:function(n){lm(bc(r.prototype),"setDimensions",this).call(this,n),this.axis.ticks(Math.ceil(this.dimensions[1]/150)),this.gAxis.attr("transform",`translate(${n[0]},0)`)}},{key:"draw",value:function(){return this.axis.scale(this._yScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(n,o){lm(bc(r.prototype),"zoomed",this).call(this,n,o),this.draw()}}]),r}(Ka);var Nt={},Ir={},Fk=32;Ir.INT_BITS=Fk,Ir.INT_MAX=2147483647,Ir.INT_MIN=-1<<Fk-1,Ir.sign=function(e){return(e>0)-(e<0)},Ir.abs=function(e){var t=e>>Fk-1;return(e^t)-t},Ir.min=function(e,t){return t^(e^t)&-(e<t)},Ir.max=function(e,t){return e^(e^t)&-(e<t)},Ir.isPow2=function(e){return!(e&e-1)&&!!e},Ir.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1},Ir.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},Ir.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function _G(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}Ir.countTrailingZeros=_G,Ir.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},Ir.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},Ir.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var cm=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,i=t,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=r&1,--n;e[t]=i<<n&255}})(cm),Ir.reverse=function(e){return cm[e&255]<<24|cm[e>>>8&255]<<16|cm[e>>>16&255]<<8|cm[e>>>24&255]},Ir.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1},Ir.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16},Ir.interleave3=function(e,t,r){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,e|r<<2},Ir.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22},Ir.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>_G(e)+1};function TG(e,t,r){var i=e[r]|0;if(i<=0)return[];var n=new Array(i),o;if(r===e.length-1)for(o=0;o<i;++o)n[o]=t;else for(o=0;o<i;++o)n[o]=TG(e,t,r+1);return n}function AOe(e,t){var r,i;for(r=new Array(e),i=0;i<e;++i)r[i]=t;return r}function OOe(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return AOe(e|0,t);break;case"object":if(typeof e.length=="number")return TG(e,t,0);break}return[]}var kOe=OOe,EG={},__={};__.byteLength=POe,__.toByteArray=xOe,__.fromByteArray=MOe;for(var ia=[],Ki=[],IOe=typeof Uint8Array<"u"?Uint8Array:Array,jk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gf=0,COe=jk.length;Gf<COe;++Gf)ia[Gf]=jk[Gf],Ki[jk.charCodeAt(Gf)]=Gf;Ki[45]=62,Ki[95]=63;function SG(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function POe(e){var t=SG(e),r=t[0],i=t[1];return(r+i)*3/4-i}function DOe(e,t,r){return(t+r)*3/4-r}function xOe(e){var t,r=SG(e),i=r[0],n=r[1],o=new IOe(DOe(e,i,n)),a=0,s=n>0?i-4:i,c;for(c=0;c<s;c+=4)t=Ki[e.charCodeAt(c)]<<18|Ki[e.charCodeAt(c+1)]<<12|Ki[e.charCodeAt(c+2)]<<6|Ki[e.charCodeAt(c+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return n===2&&(t=Ki[e.charCodeAt(c)]<<2|Ki[e.charCodeAt(c+1)]>>4,o[a++]=t&255),n===1&&(t=Ki[e.charCodeAt(c)]<<10|Ki[e.charCodeAt(c+1)]<<4|Ki[e.charCodeAt(c+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function NOe(e){return ia[e>>18&63]+ia[e>>12&63]+ia[e>>6&63]+ia[e&63]}function ROe(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),n.push(NOe(i));return n.join("")}function MOe(e){for(var t,r=e.length,i=r%3,n=[],o=16383,a=0,s=r-i;a<s;a+=o)n.push(ROe(e,a,a+o>s?s:a+o));return i===1?(t=e[r-1],n.push(ia[t>>2]+ia[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],n.push(ia[t>>10]+ia[t>>4&63]+ia[t<<2&63]+"=")),n.join("")}var Uk={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Uk.read=function(e,t,r,i,n){var o,a,s=n*8-i-1,c=(1<<s)-1,u=c>>1,l=-7,h=r?n-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=o*256+e[t+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=i;l>0;a=a*256+e[t+h],h+=f,l-=8);if(o===0)o=1-u;else{if(o===c)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,i),o=o-u}return(d?-1:1)*a*Math.pow(2,o-i)},Uk.write=function(e,t,r,i,n,o){var a,s,c,u=o*8-n-1,l=(1<<u)-1,h=l>>1,f=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?t+=f/c:t+=f*Math.pow(2,1-h),t*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*c-1)*Math.pow(2,n),a=a+h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[r+d]=s&255,d+=p,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;e[r+d]=a&255,d+=p,a/=256,u-=8);e[r+d-p]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){function t(H,I){if(!(H instanceof I))throw new TypeError("Cannot call a class as a function")}function r(H,I){for(var x=0;x<I.length;x++){var X=I[x];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(H,n(X.key),X)}}function i(H,I,x){return I&&r(H.prototype,I),x&&r(H,x),Object.defineProperty(H,"prototype",{writable:!1}),H}function n(H){var I=o(H,"string");return typeof I=="symbol"?I:String(I)}function o(H,I){if(typeof H!="object"||H===null)return H;var x=H[Symbol.toPrimitive];if(x!==void 0){var X=x.call(H,I||"default");if(typeof X!="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(H)}function a(H,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(I&&I.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),I&&s(H,I)}function s(H,I){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,me){return X.__proto__=me,X},s(H,I)}function c(H){var I=h();return function(){var X=f(H),me;if(I){var q=f(this).constructor;me=Reflect.construct(X,arguments,q)}else me=X.apply(this,arguments);return u(this,me)}}function u(H,I){if(I&&(typeof I=="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(H)}function l(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(H){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(x){return x.__proto__||Object.getPrototypeOf(x)},f(H)}const d=__,p=Uk,m=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=y,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const g=2147483647;e.kMaxLength=g,y.TYPED_ARRAY_SUPPORT=v(),!y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const H=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(H,I),H.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function _(H){if(H>g)throw new RangeError('The value "'+H+'" is invalid for option "size"');const I=new Uint8Array(H);return Object.setPrototypeOf(I,y.prototype),I}function y(H,I,x){if(typeof H=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(H)}return b(H,I,x)}y.poolSize=8192;function b(H,I,x){if(typeof H=="string")return O(H,I);if(ArrayBuffer.isView(H))return R(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Qe(H,ArrayBuffer)||H&&Qe(H.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Qe(H,SharedArrayBuffer)||H&&Qe(H.buffer,SharedArrayBuffer)))return w(H,I,x);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const X=H.valueOf&&H.valueOf();if(X!=null&&X!==H)return y.from(X,I,x);const me=L(H);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return y.from(H[Symbol.toPrimitive]("string"),I,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}y.from=function(H,I,x){return b(H,I,x)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array);function T(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function S(H,I,x){return T(H),H<=0?_(H):I!==void 0?typeof x=="string"?_(H).fill(I,x):_(H).fill(I):_(H)}y.alloc=function(H,I,x){return S(H,I,x)};function k(H){return T(H),_(H<0?0:B(H)|0)}y.allocUnsafe=function(H){return k(H)},y.allocUnsafeSlow=function(H){return k(H)};function O(H,I){if((typeof I!="string"||I==="")&&(I="utf8"),!y.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const x=M(H,I)|0;let X=_(x);const me=X.write(H,I);return me!==x&&(X=X.slice(0,me)),X}function D(H){const I=H.length<0?0:B(H.length)|0,x=_(I);for(let X=0;X<I;X+=1)x[X]=H[X]&255;return x}function R(H){if(Qe(H,Uint8Array)){const I=new Uint8Array(H);return w(I.buffer,I.byteOffset,I.byteLength)}return D(H)}function w(H,I,x){if(I<0||H.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<I+(x||0))throw new RangeError('"length" is outside of buffer bounds');let X;return I===void 0&&x===void 0?X=new Uint8Array(H):x===void 0?X=new Uint8Array(H,I):X=new Uint8Array(H,I,x),Object.setPrototypeOf(X,y.prototype),X}function L(H){if(y.isBuffer(H)){const I=B(H.length)|0,x=_(I);return x.length===0||H.copy(x,0,0,I),x}if(H.length!==void 0)return typeof H.length!="number"||ot(H.length)?_(0):D(H);if(H.type==="Buffer"&&Array.isArray(H.data))return D(H.data)}function B(H){if(H>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return H|0}function A(H){return+H!=H&&(H=0),y.alloc(+H)}y.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==y.prototype},y.compare=function(I,x){if(Qe(I,Uint8Array)&&(I=y.from(I,I.offset,I.byteLength)),Qe(x,Uint8Array)&&(x=y.from(x,x.offset,x.byteLength)),!y.isBuffer(I)||!y.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===x)return 0;let X=I.length,me=x.length;for(let q=0,Y=Math.min(X,me);q<Y;++q)if(I[q]!==x[q]){X=I[q],me=x[q];break}return X<me?-1:me<X?1:0},y.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(I,x){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return y.alloc(0);let X;if(x===void 0)for(x=0,X=0;X<I.length;++X)x+=I[X].length;const me=y.allocUnsafe(x);let q=0;for(X=0;X<I.length;++X){let Y=I[X];if(Qe(Y,Uint8Array))q+Y.length>me.length?(y.isBuffer(Y)||(Y=y.from(Y)),Y.copy(me,q)):Uint8Array.prototype.set.call(me,Y,q);else if(y.isBuffer(Y))Y.copy(me,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=Y.length}return me};function M(H,I){if(y.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||Qe(H,ArrayBuffer))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const x=H.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&x===0)return 0;let me=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return we(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return Ge(H).length;default:if(me)return X?-1:we(H).length;I=(""+I).toLowerCase(),me=!0}}y.byteLength=M;function j(H,I,x){let X=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,I>>>=0,x<=I))return"";for(H||(H="utf8");;)switch(H){case"hex":return Ye(this,I,x);case"utf8":case"utf-8":return Oe(this,I,x);case"ascii":return Pe(this,I,x);case"latin1":case"binary":return Ue(this,I,x);case"base64":return ue(this,I,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,I,x);default:if(X)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),X=!0}}y.prototype._isBuffer=!0;function W(H,I,x){const X=H[I];H[I]=H[x],H[x]=X}y.prototype.swap16=function(){const I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<I;x+=2)W(this,x,x+1);return this},y.prototype.swap32=function(){const I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<I;x+=4)W(this,x,x+3),W(this,x+1,x+2);return this},y.prototype.swap64=function(){const I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<I;x+=8)W(this,x,x+7),W(this,x+1,x+6),W(this,x+2,x+5),W(this,x+3,x+4);return this},y.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?Oe(this,0,I):j.apply(this,arguments)},y.prototype.toLocaleString=y.prototype.toString,y.prototype.equals=function(I){if(!y.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:y.compare(this,I)===0},y.prototype.inspect=function(){let I="";const x=e.INSPECT_MAX_BYTES;return I=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(I+=" ... "),"<Buffer "+I+">"},m&&(y.prototype[m]=y.prototype.inspect),y.prototype.compare=function(I,x,X,me,q){if(Qe(I,Uint8Array)&&(I=y.from(I,I.offset,I.byteLength)),!y.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(x===void 0&&(x=0),X===void 0&&(X=I?I.length:0),me===void 0&&(me=0),q===void 0&&(q=this.length),x<0||X>I.length||me<0||q>this.length)throw new RangeError("out of range index");if(me>=q&&x>=X)return 0;if(me>=q)return-1;if(x>=X)return 1;if(x>>>=0,X>>>=0,me>>>=0,q>>>=0,this===I)return 0;let Y=q-me,F=X-x;const U=Math.min(Y,F),se=this.slice(me,q),ve=I.slice(x,X);for(let ge=0;ge<U;++ge)if(se[ge]!==ve[ge]){Y=se[ge],F=ve[ge];break}return Y<F?-1:F<Y?1:0};function K(H,I,x,X,me){if(H.length===0)return-1;if(typeof x=="string"?(X=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,ot(x)&&(x=me?0:H.length-1),x<0&&(x=H.length+x),x>=H.length){if(me)return-1;x=H.length-1}else if(x<0)if(me)x=0;else return-1;if(typeof I=="string"&&(I=y.from(I,X)),y.isBuffer(I))return I.length===0?-1:oe(H,I,x,X,me);if(typeof I=="number")return I=I&255,typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(H,I,x):Uint8Array.prototype.lastIndexOf.call(H,I,x):oe(H,[I],x,X,me);throw new TypeError("val must be string, number or Buffer")}function oe(H,I,x,X,me){let q=1,Y=H.length,F=I.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(H.length<2||I.length<2)return-1;q=2,Y/=2,F/=2,x/=2}function U(ve,ge){return q===1?ve[ge]:ve.readUInt16BE(ge*q)}let se;if(me){let ve=-1;for(se=x;se<Y;se++)if(U(H,se)===U(I,ve===-1?0:se-ve)){if(ve===-1&&(ve=se),se-ve+1===F)return ve*q}else ve!==-1&&(se-=se-ve),ve=-1}else for(x+F>Y&&(x=Y-F),se=x;se>=0;se--){let ve=!0;for(let ge=0;ge<F;ge++)if(U(H,se+ge)!==U(I,ge)){ve=!1;break}if(ve)return se}return-1}y.prototype.includes=function(I,x,X){return this.indexOf(I,x,X)!==-1},y.prototype.indexOf=function(I,x,X){return K(this,I,x,X,!0)},y.prototype.lastIndexOf=function(I,x,X){return K(this,I,x,X,!1)};function fe(H,I,x,X){x=Number(x)||0;const me=H.length-x;X?(X=Number(X),X>me&&(X=me)):X=me;const q=I.length;X>q/2&&(X=q/2);let Y;for(Y=0;Y<X;++Y){const F=parseInt(I.substr(Y*2,2),16);if(ot(F))return Y;H[x+Y]=F}return Y}function Ae(H,I,x,X){return Xe(we(I,H.length-x),H,x,X)}function de(H,I,x,X){return Xe(Ie(I),H,x,X)}function Z(H,I,x,X){return Xe(Ge(I),H,x,X)}function ne(H,I,x,X){return Xe($e(I,H.length-x),H,x,X)}y.prototype.write=function(I,x,X,me){if(x===void 0)me="utf8",X=this.length,x=0;else if(X===void 0&&typeof x=="string")me=x,X=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(X)?(X=X>>>0,me===void 0&&(me="utf8")):(me=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-x;if((X===void 0||X>q)&&(X=q),I.length>0&&(X<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");let Y=!1;for(;;)switch(me){case"hex":return fe(this,I,x,X);case"utf8":case"utf-8":return Ae(this,I,x,X);case"ascii":case"latin1":case"binary":return de(this,I,x,X);case"base64":return Z(this,I,x,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,I,x,X);default:if(Y)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Y=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(H,I,x){return I===0&&x===H.length?d.fromByteArray(H):d.fromByteArray(H.slice(I,x))}function Oe(H,I,x){x=Math.min(H.length,x);const X=[];let me=I;for(;me<x;){const q=H[me];let Y=null,F=q>239?4:q>223?3:q>191?2:1;if(me+F<=x){let U,se,ve,ge;switch(F){case 1:q<128&&(Y=q);break;case 2:U=H[me+1],(U&192)===128&&(ge=(q&31)<<6|U&63,ge>127&&(Y=ge));break;case 3:U=H[me+1],se=H[me+2],(U&192)===128&&(se&192)===128&&(ge=(q&15)<<12|(U&63)<<6|se&63,ge>2047&&(ge<55296||ge>57343)&&(Y=ge));break;case 4:U=H[me+1],se=H[me+2],ve=H[me+3],(U&192)===128&&(se&192)===128&&(ve&192)===128&&(ge=(q&15)<<18|(U&63)<<12|(se&63)<<6|ve&63,ge>65535&&ge<1114112&&(Y=ge))}}Y===null?(Y=65533,F=1):Y>65535&&(Y-=65536,X.push(Y>>>10&1023|55296),Y=56320|Y&1023),X.push(Y),me+=F}return je(X)}const Ce=4096;function je(H){const I=H.length;if(I<=Ce)return String.fromCharCode.apply(String,H);let x="",X=0;for(;X<I;)x+=String.fromCharCode.apply(String,H.slice(X,X+=Ce));return x}function Pe(H,I,x){let X="";x=Math.min(H.length,x);for(let me=I;me<x;++me)X+=String.fromCharCode(H[me]&127);return X}function Ue(H,I,x){let X="";x=Math.min(H.length,x);for(let me=I;me<x;++me)X+=String.fromCharCode(H[me]);return X}function Ye(H,I,x){const X=H.length;(!I||I<0)&&(I=0),(!x||x<0||x>X)&&(x=X);let me="";for(let q=I;q<x;++q)me+=Ot[H[q]];return me}function xe(H,I,x){const X=H.slice(I,x);let me="";for(let q=0;q<X.length-1;q+=2)me+=String.fromCharCode(X[q]+X[q+1]*256);return me}y.prototype.slice=function(I,x){const X=this.length;I=~~I,x=x===void 0?X:~~x,I<0?(I+=X,I<0&&(I=0)):I>X&&(I=X),x<0?(x+=X,x<0&&(x=0)):x>X&&(x=X),x<I&&(x=I);const me=this.subarray(I,x);return Object.setPrototypeOf(me,y.prototype),me};function qe(H,I,x){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+I>x)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(I,x,X){I=I>>>0,x=x>>>0,X||qe(I,x,this.length);let me=this[I],q=1,Y=0;for(;++Y<x&&(q*=256);)me+=this[I+Y]*q;return me},y.prototype.readUintBE=y.prototype.readUIntBE=function(I,x,X){I=I>>>0,x=x>>>0,X||qe(I,x,this.length);let me=this[I+--x],q=1;for(;x>0&&(q*=256);)me+=this[I+--x]*q;return me},y.prototype.readUint8=y.prototype.readUInt8=function(I,x){return I=I>>>0,x||qe(I,1,this.length),this[I]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(I,x){return I=I>>>0,x||qe(I,2,this.length),this[I]|this[I+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(I,x){return I=I>>>0,x||qe(I,2,this.length),this[I]<<8|this[I+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(I,x){return I=I>>>0,x||qe(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(I,x){return I=I>>>0,x||qe(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},y.prototype.readBigUInt64LE=ft(function(I){I=I>>>0,ae(I,"offset");const x=this[I],X=this[I+7];(x===void 0||X===void 0)&&ye(I,this.length-8);const me=x+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24,q=this[++I]+this[++I]*2**8+this[++I]*2**16+X*2**24;return BigInt(me)+(BigInt(q)<<BigInt(32))}),y.prototype.readBigUInt64BE=ft(function(I){I=I>>>0,ae(I,"offset");const x=this[I],X=this[I+7];(x===void 0||X===void 0)&&ye(I,this.length-8);const me=x*2**24+this[++I]*2**16+this[++I]*2**8+this[++I],q=this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+X;return(BigInt(me)<<BigInt(32))+BigInt(q)}),y.prototype.readIntLE=function(I,x,X){I=I>>>0,x=x>>>0,X||qe(I,x,this.length);let me=this[I],q=1,Y=0;for(;++Y<x&&(q*=256);)me+=this[I+Y]*q;return q*=128,me>=q&&(me-=Math.pow(2,8*x)),me},y.prototype.readIntBE=function(I,x,X){I=I>>>0,x=x>>>0,X||qe(I,x,this.length);let me=x,q=1,Y=this[I+--me];for(;me>0&&(q*=256);)Y+=this[I+--me]*q;return q*=128,Y>=q&&(Y-=Math.pow(2,8*x)),Y},y.prototype.readInt8=function(I,x){return I=I>>>0,x||qe(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},y.prototype.readInt16LE=function(I,x){I=I>>>0,x||qe(I,2,this.length);const X=this[I]|this[I+1]<<8;return X&32768?X|4294901760:X},y.prototype.readInt16BE=function(I,x){I=I>>>0,x||qe(I,2,this.length);const X=this[I+1]|this[I]<<8;return X&32768?X|4294901760:X},y.prototype.readInt32LE=function(I,x){return I=I>>>0,x||qe(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},y.prototype.readInt32BE=function(I,x){return I=I>>>0,x||qe(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},y.prototype.readBigInt64LE=ft(function(I){I=I>>>0,ae(I,"offset");const x=this[I],X=this[I+7];(x===void 0||X===void 0)&&ye(I,this.length-8);const me=this[I+4]+this[I+5]*2**8+this[I+6]*2**16+(X<<24);return(BigInt(me)<<BigInt(32))+BigInt(x+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24)}),y.prototype.readBigInt64BE=ft(function(I){I=I>>>0,ae(I,"offset");const x=this[I],X=this[I+7];(x===void 0||X===void 0)&&ye(I,this.length-8);const me=(x<<24)+this[++I]*2**16+this[++I]*2**8+this[++I];return(BigInt(me)<<BigInt(32))+BigInt(this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+X)}),y.prototype.readFloatLE=function(I,x){return I=I>>>0,x||qe(I,4,this.length),p.read(this,I,!0,23,4)},y.prototype.readFloatBE=function(I,x){return I=I>>>0,x||qe(I,4,this.length),p.read(this,I,!1,23,4)},y.prototype.readDoubleLE=function(I,x){return I=I>>>0,x||qe(I,8,this.length),p.read(this,I,!0,52,8)},y.prototype.readDoubleBE=function(I,x){return I=I>>>0,x||qe(I,8,this.length),p.read(this,I,!1,52,8)};function We(H,I,x,X,me,q){if(!y.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>me||I<q)throw new RangeError('"value" argument is out of bounds');if(x+X>H.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(I,x,X,me){if(I=+I,x=x>>>0,X=X>>>0,!me){const F=Math.pow(2,8*X)-1;We(this,I,x,X,F,0)}let q=1,Y=0;for(this[x]=I&255;++Y<X&&(q*=256);)this[x+Y]=I/q&255;return x+X},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(I,x,X,me){if(I=+I,x=x>>>0,X=X>>>0,!me){const F=Math.pow(2,8*X)-1;We(this,I,x,X,F,0)}let q=X-1,Y=1;for(this[x+q]=I&255;--q>=0&&(Y*=256);)this[x+q]=I/Y&255;return x+X},y.prototype.writeUint8=y.prototype.writeUInt8=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,1,255,0),this[x]=I&255,x+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,2,65535,0),this[x]=I&255,this[x+1]=I>>>8,x+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,2,65535,0),this[x]=I>>>8,this[x+1]=I&255,x+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,4,4294967295,0),this[x+3]=I>>>24,this[x+2]=I>>>16,this[x+1]=I>>>8,this[x]=I&255,x+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,4,4294967295,0),this[x]=I>>>24,this[x+1]=I>>>16,this[x+2]=I>>>8,this[x+3]=I&255,x+4};function vt(H,I,x,X,me){te(I,X,me,H,x,7);let q=Number(I&BigInt(4294967295));H[x++]=q,q=q>>8,H[x++]=q,q=q>>8,H[x++]=q,q=q>>8,H[x++]=q;let Y=Number(I>>BigInt(32)&BigInt(4294967295));return H[x++]=Y,Y=Y>>8,H[x++]=Y,Y=Y>>8,H[x++]=Y,Y=Y>>8,H[x++]=Y,x}function dt(H,I,x,X,me){te(I,X,me,H,x,7);let q=Number(I&BigInt(4294967295));H[x+7]=q,q=q>>8,H[x+6]=q,q=q>>8,H[x+5]=q,q=q>>8,H[x+4]=q;let Y=Number(I>>BigInt(32)&BigInt(4294967295));return H[x+3]=Y,Y=Y>>8,H[x+2]=Y,Y=Y>>8,H[x+1]=Y,Y=Y>>8,H[x]=Y,x+8}y.prototype.writeBigUInt64LE=ft(function(I,x=0){return vt(this,I,x,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=ft(function(I,x=0){return dt(this,I,x,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(I,x,X,me){if(I=+I,x=x>>>0,!me){const U=Math.pow(2,8*X-1);We(this,I,x,X,U-1,-U)}let q=0,Y=1,F=0;for(this[x]=I&255;++q<X&&(Y*=256);)I<0&&F===0&&this[x+q-1]!==0&&(F=1),this[x+q]=(I/Y>>0)-F&255;return x+X},y.prototype.writeIntBE=function(I,x,X,me){if(I=+I,x=x>>>0,!me){const U=Math.pow(2,8*X-1);We(this,I,x,X,U-1,-U)}let q=X-1,Y=1,F=0;for(this[x+q]=I&255;--q>=0&&(Y*=256);)I<0&&F===0&&this[x+q+1]!==0&&(F=1),this[x+q]=(I/Y>>0)-F&255;return x+X},y.prototype.writeInt8=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,1,127,-128),I<0&&(I=255+I+1),this[x]=I&255,x+1},y.prototype.writeInt16LE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,2,32767,-32768),this[x]=I&255,this[x+1]=I>>>8,x+2},y.prototype.writeInt16BE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,2,32767,-32768),this[x]=I>>>8,this[x+1]=I&255,x+2},y.prototype.writeInt32LE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,4,2147483647,-2147483648),this[x]=I&255,this[x+1]=I>>>8,this[x+2]=I>>>16,this[x+3]=I>>>24,x+4},y.prototype.writeInt32BE=function(I,x,X){return I=+I,x=x>>>0,X||We(this,I,x,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[x]=I>>>24,this[x+1]=I>>>16,this[x+2]=I>>>8,this[x+3]=I&255,x+4},y.prototype.writeBigInt64LE=ft(function(I,x=0){return vt(this,I,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=ft(function(I,x=0){return dt(this,I,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ze(H,I,x,X,me,q){if(x+X>H.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function Et(H,I,x,X,me){return I=+I,x=x>>>0,me||Ze(H,I,x,4),p.write(H,I,x,X,23,4),x+4}y.prototype.writeFloatLE=function(I,x,X){return Et(this,I,x,!0,X)},y.prototype.writeFloatBE=function(I,x,X){return Et(this,I,x,!1,X)};function _t(H,I,x,X,me){return I=+I,x=x>>>0,me||Ze(H,I,x,8),p.write(H,I,x,X,52,8),x+8}y.prototype.writeDoubleLE=function(I,x,X){return _t(this,I,x,!0,X)},y.prototype.writeDoubleBE=function(I,x,X){return _t(this,I,x,!1,X)},y.prototype.copy=function(I,x,X,me){if(!y.isBuffer(I))throw new TypeError("argument should be a Buffer");if(X||(X=0),!me&&me!==0&&(me=this.length),x>=I.length&&(x=I.length),x||(x=0),me>0&&me<X&&(me=X),me===X||I.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),I.length-x<me-X&&(me=I.length-x+X);const q=me-X;return this===I&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,X,me):Uint8Array.prototype.set.call(I,this.subarray(X,me),x),q},y.prototype.fill=function(I,x,X,me){if(typeof I=="string"){if(typeof x=="string"?(me=x,x=0,X=this.length):typeof X=="string"&&(me=X,X=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!y.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(I.length===1){const Y=I.charCodeAt(0);(me==="utf8"&&Y<128||me==="latin1")&&(I=Y)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(x<0||this.length<x||this.length<X)throw new RangeError("Out of range index");if(X<=x)return this;x=x>>>0,X=X===void 0?this.length:X>>>0,I||(I=0);let q;if(typeof I=="number")for(q=x;q<X;++q)this[q]=I;else{const Y=y.isBuffer(I)?I:y.from(I,me),F=Y.length;if(F===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(q=0;q<X-x;++q)this[q+x]=Y[q%F]}return this};const Rt={};function Kr(H,I,x){Rt[H]=function(X){a(q,X);var me=c(q);function q(){var Y;return t(this,q),Y=me.call(this),Object.defineProperty(l(Y),"message",{value:I.apply(l(Y),arguments),writable:!0,configurable:!0}),Y.name=`${Y.name} [${H}]`,Y.stack,delete Y.name,Y}return i(q,[{key:"code",get:function(){return H},set:function(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}},{key:"toString",value:function(){return`${this.name} [${H}]: ${this.message}`}}]),q}(x)}Kr("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Kr("ERR_INVALID_ARG_TYPE",function(H,I){return`The "${H}" argument must be of type number. Received type ${typeof I}`},TypeError),Kr("ERR_OUT_OF_RANGE",function(H,I,x){let X=`The value of "${H}" is out of range.`,me=x;return Number.isInteger(x)&&Math.abs(x)>2**32?me=Mt(String(x)):typeof x=="bigint"&&(me=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(me=Mt(me)),me+="n"),X+=` It must be ${I}. Received ${me}`,X},RangeError);function Mt(H){let I="",x=H.length;const X=H[0]==="-"?1:0;for(;x>=X+4;x-=3)I=`_${H.slice(x-3,x)}${I}`;return`${H.slice(0,x)}${I}`}function ke(H,I,x){ae(I,"offset"),(H[I]===void 0||H[I+x]===void 0)&&ye(I,H.length-(x+1))}function te(H,I,x,X,me,q){if(H>x||H<I){const Y=typeof I=="bigint"?"n":"";let F;throw q>3?I===0||I===BigInt(0)?F=`>= 0${Y} and < 2${Y} ** ${(q+1)*8}${Y}`:F=`>= -(2${Y} ** ${(q+1)*8-1}${Y}) and < 2 ** ${(q+1)*8-1}${Y}`:F=`>= ${I}${Y} and <= ${x}${Y}`,new Rt.ERR_OUT_OF_RANGE("value",F,H)}ke(X,me,q)}function ae(H,I){if(typeof H!="number")throw new Rt.ERR_INVALID_ARG_TYPE(I,"number",H)}function ye(H,I,x){throw Math.floor(H)!==H?(ae(H,x),new Rt.ERR_OUT_OF_RANGE(x||"offset","an integer",H)):I<0?new Rt.ERR_BUFFER_OUT_OF_BOUNDS:new Rt.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${I}`,H)}const Q=/[^+/0-9A-Za-z-_]/g;function he(H){if(H=H.split("=")[0],H=H.trim().replace(Q,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function we(H,I){I=I||1/0;let x;const X=H.length;let me=null;const q=[];for(let Y=0;Y<X;++Y){if(x=H.charCodeAt(Y),x>55295&&x<57344){if(!me){if(x>56319){(I-=3)>-1&&q.push(239,191,189);continue}else if(Y+1===X){(I-=3)>-1&&q.push(239,191,189);continue}me=x;continue}if(x<56320){(I-=3)>-1&&q.push(239,191,189),me=x;continue}x=(me-55296<<10|x-56320)+65536}else me&&(I-=3)>-1&&q.push(239,191,189);if(me=null,x<128){if((I-=1)<0)break;q.push(x)}else if(x<2048){if((I-=2)<0)break;q.push(x>>6|192,x&63|128)}else if(x<65536){if((I-=3)<0)break;q.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((I-=4)<0)break;q.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return q}function Ie(H){const I=[];for(let x=0;x<H.length;++x)I.push(H.charCodeAt(x)&255);return I}function $e(H,I){let x,X,me;const q=[];for(let Y=0;Y<H.length&&!((I-=2)<0);++Y)x=H.charCodeAt(Y),X=x>>8,me=x%256,q.push(me),q.push(X);return q}function Ge(H){return d.toByteArray(he(H))}function Xe(H,I,x,X){let me;for(me=0;me<X&&!(me+x>=I.length||me>=H.length);++me)I[me+x]=H[me];return me}function Qe(H,I){return H instanceof I||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===I.name}function ot(H){return H!==H}const Ot=function(){const H="0123456789abcdef",I=new Array(256);for(let x=0;x<16;++x){const X=x*16;for(let me=0;me<16;++me)I[X+me]=H[x]+H[me]}return I}();function ft(H){return typeof BigInt>"u"?sr:H}function sr(){throw new Error("BigInt not supported")}})(EG);var zs=Ir,_n=kOe,wG=EG.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:_n([32,0]),UINT16:_n([32,0]),UINT32:_n([32,0]),BIGUINT64:_n([32,0]),INT8:_n([32,0]),INT16:_n([32,0]),INT32:_n([32,0]),BIGINT64:_n([32,0]),FLOAT:_n([32,0]),DOUBLE:_n([32,0]),DATA:_n([32,0]),UINT8C:_n([32,0]),BUFFER:_n([32,0])});var LOe=typeof Uint8ClampedArray<"u",BOe=typeof BigUint64Array<"u",HOe=typeof BigInt64Array<"u",Vr=globalThis.__TYPEDARRAY_POOL;Vr.UINT8C||(Vr.UINT8C=_n([32,0])),Vr.BIGUINT64||(Vr.BIGUINT64=_n([32,0])),Vr.BIGINT64||(Vr.BIGINT64=_n([32,0])),Vr.BUFFER||(Vr.BUFFER=_n([32,0]));var T_=Vr.DATA,E_=Vr.BUFFER;Nt.free=function(t){if(wG.isBuffer(t))E_[zs.log2(t.length)].push(t);else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,i=zs.log2(r)|0;T_[i].push(t)}};function AG(e){if(e){var t=e.length||e.byteLength,r=zs.log2(t);T_[r].push(e)}}function $Oe(e){AG(e.buffer)}Nt.freeUint8=Nt.freeUint16=Nt.freeUint32=Nt.freeBigUint64=Nt.freeInt8=Nt.freeInt16=Nt.freeInt32=Nt.freeBigInt64=Nt.freeFloat32=Nt.freeFloat=Nt.freeFloat64=Nt.freeDouble=Nt.freeUint8Clamped=Nt.freeDataView=$Oe,Nt.freeArrayBuffer=AG,Nt.freeBuffer=function(t){E_[zs.log2(t.length)].push(t)},Nt.malloc=function(t,r){if(r===void 0||r==="arraybuffer")return bi(t);switch(r){case"uint8":return Gk(t);case"uint16":return OG(t);case"uint32":return kG(t);case"int8":return IG(t);case"int16":return CG(t);case"int32":return PG(t);case"float":case"float32":return DG(t);case"double":case"float64":return xG(t);case"uint8_clamped":return NG(t);case"bigint64":return MG(t);case"biguint64":return RG(t);case"buffer":return BG(t);case"data":case"dataview":return LG(t);default:return null}return null};function bi(t){var t=zs.nextPow2(t),r=zs.log2(t),i=T_[r];return i.length>0?i.pop():new ArrayBuffer(t)}Nt.mallocArrayBuffer=bi;function Gk(e){return new Uint8Array(bi(e),0,e)}Nt.mallocUint8=Gk;function OG(e){return new Uint16Array(bi(2*e),0,e)}Nt.mallocUint16=OG;function kG(e){return new Uint32Array(bi(4*e),0,e)}Nt.mallocUint32=kG;function IG(e){return new Int8Array(bi(e),0,e)}Nt.mallocInt8=IG;function CG(e){return new Int16Array(bi(2*e),0,e)}Nt.mallocInt16=CG;function PG(e){return new Int32Array(bi(4*e),0,e)}Nt.mallocInt32=PG;function DG(e){return new Float32Array(bi(4*e),0,e)}Nt.mallocFloat32=Nt.mallocFloat=DG;function xG(e){return new Float64Array(bi(8*e),0,e)}Nt.mallocFloat64=Nt.mallocDouble=xG;function NG(e){return LOe?new Uint8ClampedArray(bi(e),0,e):Gk(e)}Nt.mallocUint8Clamped=NG;function RG(e){return BOe?new BigUint64Array(bi(8*e),0,e):null}Nt.mallocBigUint64=RG;function MG(e){return HOe?new BigInt64Array(bi(8*e),0,e):null}Nt.mallocBigInt64=MG;function LG(e){return new DataView(bi(e),0,e)}Nt.mallocDataView=LG;function BG(e){e=zs.nextPow2(e);var t=zs.log2(e),r=E_[t];return r.length>0?r.pop():new wG(e)}Nt.mallocBuffer=BG,Nt.clearCache=function(){for(var t=0;t<32;++t)Vr.UINT8[t].length=0,Vr.UINT16[t].length=0,Vr.UINT32[t].length=0,Vr.INT8[t].length=0,Vr.INT16[t].length=0,Vr.INT32[t].length=0,Vr.FLOAT[t].length=0,Vr.DOUBLE[t].length=0,Vr.BIGUINT64[t].length=0,Vr.BIGINT64[t].length=0,Vr.UINT8C[t].length=0,T_[t].length=0,E_[t].length=0};var FOe=jOe,S_=32;function jOe(e,t){t<=4*S_?w_(0,t-1,e):O_(0,t-1,e)}function w_(e,t,r){for(var i=2*(e+1),n=e+1;n<=t;++n){for(var o=r[i++],a=r[i++],s=n,c=i-2;s-- >e;){var u=r[c-2],l=r[c-1];if(u<o)break;if(u===o&&l<a)break;r[c]=u,r[c+1]=l,c-=2}r[c]=o,r[c+1]=a}}function HG(e,t,r){e*=2,t*=2;var i=r[e],n=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=i,r[t+1]=n}function $G(e,t,r){e*=2,t*=2,r[e]=r[t],r[e+1]=r[t+1]}function UOe(e,t,r,i){e*=2,t*=2,r*=2;var n=i[e],o=i[e+1];i[e]=i[t],i[e+1]=i[t+1],i[t]=i[r],i[t+1]=i[r+1],i[r]=n,i[r+1]=o}function FG(e,t,r,i,n){e*=2,t*=2,n[e]=n[t],n[t]=r,n[e+1]=n[t+1],n[t+1]=i}function Za(e,t,r){e*=2,t*=2;var i=r[e],n=r[t];return i<n?!1:i===n?r[e+1]>r[t+1]:!0}function A_(e,t,r,i){e*=2;var n=i[e];return n<t?!0:n===t?i[e+1]<r:!1}function O_(e,t,r){var i=(t-e+1)/6|0,n=e+i,o=t-i,a=e+t>>1,s=a-i,c=a+i,u=n,l=s,h=a,f=c,d=o,p=e+1,m=t-1,g=0;Za(u,l,r)&&(g=u,u=l,l=g),Za(f,d,r)&&(g=f,f=d,d=g),Za(u,h,r)&&(g=u,u=h,h=g),Za(l,h,r)&&(g=l,l=h,h=g),Za(u,f,r)&&(g=u,u=f,f=g),Za(h,f,r)&&(g=h,h=f,f=g),Za(l,d,r)&&(g=l,l=d,d=g),Za(l,h,r)&&(g=l,l=h,h=g),Za(f,d,r)&&(g=f,f=d,d=g);for(var v=r[2*l],_=r[2*l+1],y=r[2*f],b=r[2*f+1],T=2*u,S=2*h,k=2*d,O=2*n,D=2*a,R=2*o,w=0;w<2;++w){var L=r[T+w],B=r[S+w],A=r[k+w];r[O+w]=L,r[D+w]=B,r[R+w]=A}$G(s,e,r),$G(c,t,r);for(var M=p;M<=m;++M)if(A_(M,v,_,r))M!==p&&HG(M,p,r),++p;else if(!A_(M,y,b,r))for(;;)if(A_(m,y,b,r)){A_(m,v,_,r)?(UOe(M,p,m,r),++p,--m):(HG(M,m,r),--m);break}else{if(--m<M)break;continue}FG(e,p-1,v,_,r),FG(t,m+1,y,b,r),p-2-e<=S_?w_(e,p-2,r):O_(e,p-2,r),t-(m+2)<=S_?w_(m+2,t,r):O_(m+2,t,r),m-p<=S_?w_(p,m,r):O_(p,m,r)}var jG={init:zOe,sweepBipartite:VOe,sweepComplete:WOe,scanBipartite:YOe,scanComplete:qOe},Wr=Nt,GOe=Ir,k_=FOe,Ni=1<<28,_c=1024,Tn=Wr.mallocInt32(_c),Qa=Wr.mallocInt32(_c),Ja=Wr.mallocInt32(_c),Tc=Wr.mallocInt32(_c),zf=Wr.mallocInt32(_c),um=Wr.mallocInt32(_c),Ct=Wr.mallocDouble(_c*8);function zOe(e){var t=GOe.nextPow2(e);Tn.length<t&&(Wr.free(Tn),Tn=Wr.mallocInt32(t)),Qa.length<t&&(Wr.free(Qa),Qa=Wr.mallocInt32(t)),Ja.length<t&&(Wr.free(Ja),Ja=Wr.mallocInt32(t)),Tc.length<t&&(Wr.free(Tc),Tc=Wr.mallocInt32(t)),zf.length<t&&(Wr.free(zf),zf=Wr.mallocInt32(t)),um.length<t&&(Wr.free(um),um=Wr.mallocInt32(t));var r=8*t;Ct.length<r&&(Wr.free(Ct),Ct=Wr.mallocDouble(r))}function Vf(e,t,r,i){var n=t[i],o=e[r-1];e[n]=o,t[o]=n}function Wf(e,t,r,i){e[r]=i,t[i]=r}function VOe(e,t,r,i,n,o,a,s,c,u){for(var l=0,h=2*e,f=e-1,d=h-1,p=r;p<i;++p){var m=o[p],g=h*p;Ct[l++]=n[g+f],Ct[l++]=-(m+1),Ct[l++]=n[g+d],Ct[l++]=m}for(var p=a;p<s;++p){var m=u[p]+Ni,v=h*p;Ct[l++]=c[v+f],Ct[l++]=-m,Ct[l++]=c[v+d],Ct[l++]=m}var _=l>>>1;k_(Ct,_);for(var y=0,b=0,p=0;p<_;++p){var T=Ct[2*p+1]|0;if(T>=Ni)T=T-Ni|0,Vf(Ja,Tc,b--,T);else if(T>=0)Vf(Tn,Qa,y--,T);else if(T<=-Ni){T=-T-Ni|0;for(var S=0;S<y;++S){var k=t(Tn[S],T);if(k!==void 0)return k}Wf(Ja,Tc,b++,T)}else{T=-T-1|0;for(var S=0;S<b;++S){var k=t(T,Ja[S]);if(k!==void 0)return k}Wf(Tn,Qa,y++,T)}}}function WOe(e,t,r,i,n,o,a,s,c,u){for(var l=0,h=2*e,f=e-1,d=h-1,p=r;p<i;++p){var m=o[p]+1<<1,g=h*p;Ct[l++]=n[g+f],Ct[l++]=-m,Ct[l++]=n[g+d],Ct[l++]=m}for(var p=a;p<s;++p){var m=u[p]+1<<1,v=h*p;Ct[l++]=c[v+f],Ct[l++]=-m|1,Ct[l++]=c[v+d],Ct[l++]=m|1}var _=l>>>1;k_(Ct,_);for(var y=0,b=0,T=0,p=0;p<_;++p){var S=Ct[2*p+1]|0,k=S&1;if(p<_-1&&S>>1===Ct[2*p+3]>>1&&(k=2,p+=1),S<0){for(var O=-(S>>1)-1,D=0;D<T;++D){var R=t(zf[D],O);if(R!==void 0)return R}if(k!==0)for(var D=0;D<y;++D){var R=t(Tn[D],O);if(R!==void 0)return R}if(k!==1)for(var D=0;D<b;++D){var R=t(Ja[D],O);if(R!==void 0)return R}k===0?Wf(Tn,Qa,y++,O):k===1?Wf(Ja,Tc,b++,O):k===2&&Wf(zf,um,T++,O)}else{var O=(S>>1)-1;k===0?Vf(Tn,Qa,y--,O):k===1?Vf(Ja,Tc,b--,O):k===2&&Vf(zf,um,T--,O)}}}function YOe(e,t,r,i,n,o,a,s,c,u,l,h){var f=0,d=2*e,p=t,m=t+e,g=1,v=1;i?v=Ni:g=Ni;for(var _=n;_<o;++_){var y=_+g,b=d*_;Ct[f++]=a[b+p],Ct[f++]=-y,Ct[f++]=a[b+m],Ct[f++]=y}for(var _=c;_<u;++_){var y=_+v,T=d*_;Ct[f++]=l[T+p],Ct[f++]=-y}var S=f>>>1;k_(Ct,S);for(var k=0,_=0;_<S;++_){var O=Ct[2*_+1]|0;if(O<0){var y=-O,D=!1;if(y>=Ni?(D=!i,y-=Ni):(D=!!i,y-=1),D)Wf(Tn,Qa,k++,y);else{var R=h[y],w=d*y,L=l[w+t+1],B=l[w+t+1+e];e:for(var A=0;A<k;++A){var M=Tn[A],j=d*M;if(!(B<a[j+t+1]||a[j+t+1+e]<L)){for(var W=t+2;W<e;++W)if(l[w+W+e]<a[j+W]||a[j+W+e]<l[w+W])continue e;var K=s[M],oe;if(i?oe=r(R,K):oe=r(K,R),oe!==void 0)return oe}}}}else Vf(Tn,Qa,k--,O-g)}}function qOe(e,t,r,i,n,o,a,s,c,u,l){for(var h=0,f=2*e,d=t,p=t+e,m=i;m<n;++m){var g=m+Ni,v=f*m;Ct[h++]=o[v+d],Ct[h++]=-g,Ct[h++]=o[v+p],Ct[h++]=g}for(var m=s;m<c;++m){var g=m+1,_=f*m;Ct[h++]=u[_+d],Ct[h++]=-g}var y=h>>>1;k_(Ct,y);for(var b=0,m=0;m<y;++m){var T=Ct[2*m+1]|0;if(T<0){var g=-T;if(g>=Ni)Tn[b++]=g-Ni;else{g-=1;var S=l[g],k=f*g,O=u[k+t+1],D=u[k+t+1+e];e:for(var R=0;R<b;++R){var w=Tn[R],L=a[w];if(L===S)break;var B=f*w;if(!(D<o[B+t+1]||o[B+t+1+e]<O)){for(var A=t+2;A<e;++A)if(u[k+A+e]<o[B+A]||o[B+A+e]<u[k+A])continue e;var M=r(L,S);if(M!==void 0)return M}}}}else{for(var g=T-Ni,R=b-1;R>=0;--R)if(Tn[R]===g){for(var A=R+1;A<b;++A)Tn[A-1]=Tn[A];break}--b}}}var zk={},Ec="d",Yf="ax",UG="vv",Vk="fp",fm="es",I_="rs",Wk="re",hm="rb",GG="ri",qf="rp",C_="bs",Yk="be",dm="bb",zG="bi",Xf="bp",qk="rv",Xk="Q",Kk=[Ec,Yf,UG,I_,Wk,hm,GG,C_,Yk,dm,zG];function XOe(e,t,r){var i="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(r?"Full":""),n=["function ",i,"(",Kk.join(),"){","var ",fm,"=2*",Ec,";"],o="for(var i="+I_+","+qf+"="+fm+"*"+I_+";i<"+Wk+";++i,"+qf+"+="+fm+"){var x0="+hm+"["+Yf+"+"+qf+"],x1="+hm+"["+Yf+"+"+qf+"+"+Ec+"],xi="+GG+"[i];",a="for(var j="+C_+","+Xf+"="+fm+"*"+C_+";j<"+Yk+";++j,"+Xf+"+="+fm+"){var y0="+dm+"["+Yf+"+"+Xf+"],"+(r?"y1="+dm+"["+Yf+"+"+Xf+"+"+Ec+"],":"")+"yi="+zG+"[j];";return e?n.push(o,Xk,":",a):n.push(a,Xk,":",o),r?n.push("if(y1<x0||x1<y0)continue;"):t?n.push("if(y0<=x0||x1<y0)continue;"):n.push("if(y0<x0||x1<y0)continue;"),n.push("for(var k="+Yf+"+1;k<"+Ec+";++k){var r0="+hm+"[k+"+qf+"],r1="+hm+"[k+"+Ec+"+"+qf+"],b0="+dm+"[k+"+Xf+"],b1="+dm+"[k+"+Ec+"+"+Xf+"];if(r1<b0||b1<r0)continue "+Xk+";}var "+qk+"="+UG+"("),t?n.push("yi,xi"):n.push("xi,yi"),n.push(");if("+qk+"!==void 0)return "+qk+";}}}"),{name:i,code:n.join("")}}function VG(e){var t="bruteForce"+(e?"Full":"Partial"),r=[],i=Kk.slice();e||i.splice(3,0,Vk);var n=["function "+t+"("+i.join()+"){"];function o(c,u){var l=XOe(c,u,e);r.push(l.code),n.push("return "+l.name+"("+Kk.join()+");")}n.push("if("+Wk+"-"+I_+">"+Yk+"-"+C_+"){"),e?(o(!0,!1),n.push("}else{"),o(!1,!1)):(n.push("if("+Vk+"){"),o(!0,!0),n.push("}else{"),o(!0,!1),n.push("}}else{if("+Vk+"){"),o(!1,!0),n.push("}else{"),o(!1,!1),n.push("}")),n.push("}}return "+t);var a=r.join("")+n.join(""),s=new Function(a);return s()}zk.partial=VG(!1),zk.full=VG(!0);var WG=ZOe,KOe="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";function ZOe(e,t){var r="abcdef".split("").concat(t),i=[];return e.indexOf("lo")>=0&&i.push("lo=e[k+n]"),e.indexOf("hi")>=0&&i.push("hi=e[k+o]"),r.push(KOe.replace("_",i.join()).replace("$",e)),Function.apply(void 0,r)}var QOe=rke,JOe=WG,YG=JOe("lo<p0",["p0"]),eke=8;function tke(e,t,r,i,n,o){for(var a=2*e,s=a*(r+1)+t,c=r+1;c<i;++c,s+=a)for(var u=n[s],l=c,h=a*(c-1);l>r&&n[h+t]>u;--l,h-=a){for(var f=h,d=h+a,p=0;p<a;++p,++f,++d){var m=n[f];n[f]=n[d],n[d]=m}var g=o[l];o[l]=o[l-1],o[l-1]=g}}function rke(e,t,r,i,n,o){if(i<=r+1)return r;for(var a=r,s=i,c=i+r>>>1,u=2*e,l=c,h=n[u*c+t];a<s;){if(s-a<eke){tke(e,t,a,s,n,o),h=n[u*c+t];break}var f=s-a,d=Math.random()*f+a|0,p=n[u*d+t],m=Math.random()*f+a|0,g=n[u*m+t],v=Math.random()*f+a|0,_=n[u*v+t];p<=g?_>=g?(l=m,h=g):p>=_?(l=d,h=p):(l=v,h=_):g>=_?(l=m,h=g):_>=p?(l=d,h=p):(l=v,h=_);for(var T=u*(s-1),S=u*l,y=0;y<u;++y,++T,++S){var b=n[T];n[T]=n[S],n[S]=b}var k=o[s-1];o[s-1]=o[l],o[l]=k,l=YG(e,t,a,s-1,n,o,h);for(var T=u*(s-1),S=u*l,y=0;y<u;++y,++T,++S){var b=n[T];n[T]=n[S],n[S]=b}var k=o[s-1];if(o[s-1]=o[l],o[l]=k,c<l){for(s=l-1;a<s&&n[u*(s-1)+t]===h;)s-=1;s+=1}else if(l<c)for(a=l+1;a<s&&n[u*a+t]===h;)a+=1;else break}return YG(e,t,r,c,n,o,n[u*c+t])}var nke=gke,Kf=Nt,Zk=Ir,qG=zk,ike=qG.partial,oke=qG.full,Vs=jG,ake=QOe,Zf=WG,XG=128,ske=1<<22,lke=1<<22,cke=Zf("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),KG=Zf("lo===p0",["p0"]),uke=Zf("lo<p0",["p0"]),fke=Zf("hi<=p0",["p0"]),ZG=Zf("lo<=p0&&p0<=hi",["p0"]),hke=Zf("lo<p0&&p0<=hi",["p0"]),Qk=6,Jk=2,QG=1024,ti=Kf.mallocInt32(QG),Sc=Kf.mallocDouble(QG);function dke(e,t){var r=8*Zk.log2(t+1)*(e+1)|0,i=Zk.nextPow2(Qk*r);ti.length<i&&(Kf.free(ti),ti=Kf.mallocInt32(i));var n=Zk.nextPow2(Jk*r);Sc.length<n&&(Kf.free(Sc),Sc=Kf.mallocDouble(n))}function Eo(e,t,r,i,n,o,a,s,c){var u=Qk*e;ti[u]=t,ti[u+1]=r,ti[u+2]=i,ti[u+3]=n,ti[u+4]=o,ti[u+5]=a;var l=Jk*e;Sc[l]=s,Sc[l+1]=c}function pke(e,t,r,i,n,o,a,s,c,u,l){var h=2*e,f=c*h,d=u[f+t];e:for(var p=n,m=n*h;p<o;++p,m+=h){var g=a[m+t],v=a[m+t+e];if(!(d<g||v<d)&&!(i&&d===g)){for(var _=s[p],y=t+1;y<e;++y){var g=a[m+y],v=a[m+y+e],b=u[f+y],T=u[f+y+e];if(v<b||T<g)continue e}var S;if(i?S=r(l,_):S=r(_,l),S!==void 0)return S}}}function mke(e,t,r,i,n,o,a,s,c,u){var l=2*e,h=s*l,f=c[h+t];e:for(var d=i,p=i*l;d<n;++d,p+=l){var m=a[d];if(m!==u){var g=o[p+t],v=o[p+t+e];if(!(f<g||v<f)){for(var _=t+1;_<e;++_){var g=o[p+_],v=o[p+_+e],y=c[h+_],b=c[h+_+e];if(v<y||b<g)continue e}var T=r(m,u);if(T!==void 0)return T}}}}function gke(e,t,r,i,n,o,a,s,c){dke(e,i+a);var u=0,l=2*e,h;for(Eo(u++,0,0,i,0,a,r?16:0,-1/0,1/0),r||Eo(u++,0,0,a,0,i,1,-1/0,1/0);u>0;){u-=1;var f=u*Qk,d=ti[f],p=ti[f+1],m=ti[f+2],g=ti[f+3],v=ti[f+4],_=ti[f+5],y=u*Jk,b=Sc[y],T=Sc[y+1],S=_&1,k=!!(_&16),O=n,D=o,R=s,w=c;if(S&&(O=s,D=c,R=n,w=o),!(_&2&&(m=uke(e,d,p,m,O,D,T),p>=m))&&!(_&4&&(p=fke(e,d,p,m,O,D,b),p>=m))){var L=m-p,B=v-g;if(k){if(e*L*(L+B)<lke){if(h=Vs.scanComplete(e,d,t,p,m,O,D,g,v,R,w),h!==void 0)return h;continue}}else if(e*Math.min(L,B)<XG){if(h=ike(e,d,t,S,p,m,O,D,g,v,R,w),h!==void 0)return h;continue}else if(e*L*B<ske){if(h=Vs.scanBipartite(e,d,t,S,p,m,O,D,g,v,R,w),h!==void 0)return h;continue}var A=cke(e,d,p,m,O,D,b,T);if(p<A)if(e*(A-p)<XG){if(h=oke(e,d+1,t,p,A,O,D,g,v,R,w),h!==void 0)return h}else if(d===e-2){if(S?h=Vs.sweepBipartite(e,t,g,v,R,w,p,A,O,D):h=Vs.sweepBipartite(e,t,p,A,O,D,g,v,R,w),h!==void 0)return h}else Eo(u++,d+1,p,A,g,v,S,-1/0,1/0),Eo(u++,d+1,g,v,p,A,S^1,-1/0,1/0);if(A<m){var M=ake(e,d,g,v,R,w),j=R[l*M+d],W=KG(e,d,M,v,R,w,j);if(W<v&&Eo(u++,d,A,m,W,v,(S|4)+(k?16:0),j,T),g<M&&Eo(u++,d,A,m,g,M,(S|2)+(k?16:0),b,j),M+1===W){if(k?h=mke(e,d,t,A,m,O,D,M,R,w[M]):h=pke(e,d,t,S,A,m,O,D,M,R,w[M]),h!==void 0)return h}else if(M<W){var K;if(k){if(K=ZG(e,d,A,m,O,D,j),A<K){var oe=KG(e,d,A,K,O,D,j);if(d===e-2){if(A<oe&&(h=Vs.sweepComplete(e,t,A,oe,O,D,M,W,R,w),h!==void 0)||oe<K&&(h=Vs.sweepBipartite(e,t,oe,K,O,D,M,W,R,w),h!==void 0))return h}else A<oe&&Eo(u++,d+1,A,oe,M,W,16,-1/0,1/0),oe<K&&(Eo(u++,d+1,oe,K,M,W,0,-1/0,1/0),Eo(u++,d+1,M,W,oe,K,1,-1/0,1/0))}}else S?K=hke(e,d,A,m,O,D,j):K=ZG(e,d,A,m,O,D,j),A<K&&(d===e-2?S?h=Vs.sweepBipartite(e,t,M,W,R,w,A,K,O,D):h=Vs.sweepBipartite(e,t,A,K,O,D,M,W,R,w):(Eo(u++,d+1,A,K,M,W,S,-1/0,1/0),Eo(u++,d+1,M,W,A,K,S^1,-1/0,1/0)))}}}}}var vke=Eke,Ws=Nt,P_=jG,yke=nke;function bke(e,t){for(var r=0;r<e;++r)if(!(t[r]<=t[r+e]))return!0;return!1}function JG(e,t,r,i){for(var n=0,o=0,a=0,s=e.length;a<s;++a){var c=e[a];if(!bke(t,c)){for(var u=0;u<2*t;++u)r[n++]=c[u];i[o++]=a}}return o}function D_(e,t,r,i){var n=e.length,o=t.length;if(!(n<=0||o<=0)){var a=e[0].length>>>1;if(!(a<=0)){var s,c=Ws.mallocDouble(2*a*n),u=Ws.mallocInt32(n);if(n=JG(e,a,c,u),n>0){if(a===1&&i)P_.init(n),s=P_.sweepComplete(a,r,0,n,c,u,0,n,c,u);else{var l=Ws.mallocDouble(2*a*o),h=Ws.mallocInt32(o);o=JG(t,a,l,h),o>0&&(P_.init(n+o),a===1?s=P_.sweepBipartite(a,r,0,n,c,u,0,o,l,h):s=yke(a,r,i,n,c,u,o,l,h),Ws.free(l),Ws.free(h))}Ws.free(c),Ws.free(u)}return s}}}var pm;function ez(e,t){pm.push([e,t])}function _ke(e){return pm=[],D_(e,e,ez,!0),pm}function Tke(e,t){return pm=[],D_(e,t,ez,!1),pm}function Eke(e,t,r){switch(arguments.length){case 1:return _ke(e);case 2:return typeof t=="function"?D_(e,e,t,!0):Tke(e,t);case 3:return D_(e,t,r,!1);default:throw new Error("box-intersect: Invalid arguments")}}const mm=ui(vke);var tz={exports:{}},rz=Ske,nz=+(Math.pow(2,27)+1);function Ske(e,t,r){var i=e*t,n=nz*e,o=n-e,a=n-o,s=e-a,c=nz*t,u=c-t,l=c-u,h=t-l,f=i-a*l,d=f-s*l,p=d-a*h,m=s*h-p;return r?(r[0]=m,r[1]=i,r):[m,i]}var wke=Oke;function Ake(e,t){var r=e+t,i=r-e,n=r-i,o=t-i,a=e-n,s=a+o;return s?[s,r]:[r]}function Oke(e,t){var r=e.length|0,i=t.length|0;if(r===1&&i===1)return Ake(e[0],t[0]);var n=r+i,o=new Array(n),a=0,s=0,c=0,u=Math.abs,l=e[s],h=u(l),f=t[c],d=u(f),p,m;h<d?(m=l,s+=1,s<r&&(l=e[s],h=u(l))):(m=f,c+=1,c<i&&(f=t[c],d=u(f))),s<r&&h<d||c>=i?(p=l,s+=1,s<r&&(l=e[s],h=u(l))):(p=f,c+=1,c<i&&(f=t[c],d=u(f)));for(var g=p+m,v=g-p,_=m-v,y=_,b=g,T,S,k,O,D;s<r&&c<i;)h<d?(p=l,s+=1,s<r&&(l=e[s],h=u(l))):(p=f,c+=1,c<i&&(f=t[c],d=u(f))),m=y,g=p+m,v=g-p,_=m-v,_&&(o[a++]=_),T=b+g,S=T-b,k=T-S,O=g-S,D=b-k,y=D+O,b=T;for(;s<r;)p=l,m=y,g=p+m,v=g-p,_=m-v,_&&(o[a++]=_),T=b+g,S=T-b,k=T-S,O=g-S,D=b-k,y=D+O,b=T,s+=1,s<r&&(l=e[s]);for(;c<i;)p=f,m=y,g=p+m,v=g-p,_=m-v,_&&(o[a++]=_),T=b+g,S=T-b,k=T-S,O=g-S,D=b-k,y=D+O,b=T,c+=1,c<i&&(f=t[c]);return y&&(o[a++]=y),b&&(o[a++]=b),a||(o[a++]=0),o.length=a,o}var kke=Ike;function Ike(e,t,r){var i=e+t,n=i-e,o=i-n,a=t-n,s=e-o;return r?(r[0]=s+a,r[1]=i,r):[s+a,i]}var eI=rz,Cke=kke,Pke=Dke;function Dke(e,t){var r=e.length;if(r===1){var i=eI(e[0],t);return i[0]?i:[i[1]]}var n=new Array(2*r),o=[.1,.1],a=[.1,.1],s=0;eI(e[0],t,o),o[0]&&(n[s++]=o[0]);for(var c=1;c<r;++c){eI(e[c],t,a);var u=o[1];Cke(u,a[0],o),o[0]&&(n[s++]=o[0]);var l=a[1],h=o[1],f=l+h,d=f-l,p=h-d;o[1]=f,p&&(n[s++]=p)}return o[1]&&(n[s++]=o[1]),s===0&&(n[s++]=0),n.length=s,n}var xke=Rke;function Nke(e,t){var r=e+t,i=r-e,n=r-i,o=t-i,a=e-n,s=a+o;return s?[s,r]:[r]}function Rke(e,t){var r=e.length|0,i=t.length|0;if(r===1&&i===1)return Nke(e[0],-t[0]);var n=r+i,o=new Array(n),a=0,s=0,c=0,u=Math.abs,l=e[s],h=u(l),f=-t[c],d=u(f),p,m;h<d?(m=l,s+=1,s<r&&(l=e[s],h=u(l))):(m=f,c+=1,c<i&&(f=-t[c],d=u(f))),s<r&&h<d||c>=i?(p=l,s+=1,s<r&&(l=e[s],h=u(l))):(p=f,c+=1,c<i&&(f=-t[c],d=u(f)));for(var g=p+m,v=g-p,_=m-v,y=_,b=g,T,S,k,O,D;s<r&&c<i;)h<d?(p=l,s+=1,s<r&&(l=e[s],h=u(l))):(p=f,c+=1,c<i&&(f=-t[c],d=u(f))),m=y,g=p+m,v=g-p,_=m-v,_&&(o[a++]=_),T=b+g,S=T-b,k=T-S,O=g-S,D=b-k,y=D+O,b=T;for(;s<r;)p=l,m=y,g=p+m,v=g-p,_=m-v,_&&(o[a++]=_),T=b+g,S=T-b,k=T-S,O=g-S,D=b-k,y=D+O,b=T,s+=1,s<r&&(l=e[s]);for(;c<i;)p=f,m=y,g=p+m,v=g-p,_=m-v,_&&(o[a++]=_),T=b+g,S=T-b,k=T-S,O=g-S,D=b-k,y=D+O,b=T,c+=1,c<i&&(f=-t[c]);return y&&(o[a++]=y),b&&(o[a++]=b),a||(o[a++]=0),o.length=a,o}(function(e){var t=rz,r=wke,i=Pke,n=xke,o=5,a=11102230246251565e-32,s=(3+16*a)*a,c=(7+56*a)*a;function u(y,b,T,S){return function(O,D,R){var w=y(y(b(D[1],R[0]),b(-R[1],D[0])),y(b(O[1],D[0]),b(-D[1],O[0]))),L=y(b(O[1],R[0]),b(-R[1],O[0])),B=S(w,L);return B[B.length-1]}}function l(y,b,T,S){return function(O,D,R,w){var L=y(y(T(y(b(R[1],w[0]),b(-w[1],R[0])),D[2]),y(T(y(b(D[1],w[0]),b(-w[1],D[0])),-R[2]),T(y(b(D[1],R[0]),b(-R[1],D[0])),w[2]))),y(T(y(b(D[1],w[0]),b(-w[1],D[0])),O[2]),y(T(y(b(O[1],w[0]),b(-w[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),w[2])))),B=y(y(T(y(b(R[1],w[0]),b(-w[1],R[0])),O[2]),y(T(y(b(O[1],w[0]),b(-w[1],O[0])),-R[2]),T(y(b(O[1],R[0]),b(-R[1],O[0])),w[2]))),y(T(y(b(D[1],R[0]),b(-R[1],D[0])),O[2]),y(T(y(b(O[1],R[0]),b(-R[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),R[2])))),A=S(L,B);return A[A.length-1]}}function h(y,b,T,S){return function(O,D,R,w,L){var B=y(y(y(T(y(T(y(b(w[1],L[0]),b(-L[1],w[0])),R[2]),y(T(y(b(R[1],L[0]),b(-L[1],R[0])),-w[2]),T(y(b(R[1],w[0]),b(-w[1],R[0])),L[2]))),D[3]),y(T(y(T(y(b(w[1],L[0]),b(-L[1],w[0])),D[2]),y(T(y(b(D[1],L[0]),b(-L[1],D[0])),-w[2]),T(y(b(D[1],w[0]),b(-w[1],D[0])),L[2]))),-R[3]),T(y(T(y(b(R[1],L[0]),b(-L[1],R[0])),D[2]),y(T(y(b(D[1],L[0]),b(-L[1],D[0])),-R[2]),T(y(b(D[1],R[0]),b(-R[1],D[0])),L[2]))),w[3]))),y(T(y(T(y(b(R[1],w[0]),b(-w[1],R[0])),D[2]),y(T(y(b(D[1],w[0]),b(-w[1],D[0])),-R[2]),T(y(b(D[1],R[0]),b(-R[1],D[0])),w[2]))),-L[3]),y(T(y(T(y(b(w[1],L[0]),b(-L[1],w[0])),D[2]),y(T(y(b(D[1],L[0]),b(-L[1],D[0])),-w[2]),T(y(b(D[1],w[0]),b(-w[1],D[0])),L[2]))),O[3]),T(y(T(y(b(w[1],L[0]),b(-L[1],w[0])),O[2]),y(T(y(b(O[1],L[0]),b(-L[1],O[0])),-w[2]),T(y(b(O[1],w[0]),b(-w[1],O[0])),L[2]))),-D[3])))),y(y(T(y(T(y(b(D[1],L[0]),b(-L[1],D[0])),O[2]),y(T(y(b(O[1],L[0]),b(-L[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),L[2]))),w[3]),y(T(y(T(y(b(D[1],w[0]),b(-w[1],D[0])),O[2]),y(T(y(b(O[1],w[0]),b(-w[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),w[2]))),-L[3]),T(y(T(y(b(R[1],w[0]),b(-w[1],R[0])),D[2]),y(T(y(b(D[1],w[0]),b(-w[1],D[0])),-R[2]),T(y(b(D[1],R[0]),b(-R[1],D[0])),w[2]))),O[3]))),y(T(y(T(y(b(R[1],w[0]),b(-w[1],R[0])),O[2]),y(T(y(b(O[1],w[0]),b(-w[1],O[0])),-R[2]),T(y(b(O[1],R[0]),b(-R[1],O[0])),w[2]))),-D[3]),y(T(y(T(y(b(D[1],w[0]),b(-w[1],D[0])),O[2]),y(T(y(b(O[1],w[0]),b(-w[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),w[2]))),R[3]),T(y(T(y(b(D[1],R[0]),b(-R[1],D[0])),O[2]),y(T(y(b(O[1],R[0]),b(-R[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),R[2]))),-w[3]))))),A=y(y(y(T(y(T(y(b(w[1],L[0]),b(-L[1],w[0])),R[2]),y(T(y(b(R[1],L[0]),b(-L[1],R[0])),-w[2]),T(y(b(R[1],w[0]),b(-w[1],R[0])),L[2]))),O[3]),T(y(T(y(b(w[1],L[0]),b(-L[1],w[0])),O[2]),y(T(y(b(O[1],L[0]),b(-L[1],O[0])),-w[2]),T(y(b(O[1],w[0]),b(-w[1],O[0])),L[2]))),-R[3])),y(T(y(T(y(b(R[1],L[0]),b(-L[1],R[0])),O[2]),y(T(y(b(O[1],L[0]),b(-L[1],O[0])),-R[2]),T(y(b(O[1],R[0]),b(-R[1],O[0])),L[2]))),w[3]),T(y(T(y(b(R[1],w[0]),b(-w[1],R[0])),O[2]),y(T(y(b(O[1],w[0]),b(-w[1],O[0])),-R[2]),T(y(b(O[1],R[0]),b(-R[1],O[0])),w[2]))),-L[3]))),y(y(T(y(T(y(b(R[1],L[0]),b(-L[1],R[0])),D[2]),y(T(y(b(D[1],L[0]),b(-L[1],D[0])),-R[2]),T(y(b(D[1],R[0]),b(-R[1],D[0])),L[2]))),O[3]),T(y(T(y(b(R[1],L[0]),b(-L[1],R[0])),O[2]),y(T(y(b(O[1],L[0]),b(-L[1],O[0])),-R[2]),T(y(b(O[1],R[0]),b(-R[1],O[0])),L[2]))),-D[3])),y(T(y(T(y(b(D[1],L[0]),b(-L[1],D[0])),O[2]),y(T(y(b(O[1],L[0]),b(-L[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),L[2]))),R[3]),T(y(T(y(b(D[1],R[0]),b(-R[1],D[0])),O[2]),y(T(y(b(O[1],R[0]),b(-R[1],O[0])),-D[2]),T(y(b(O[1],D[0]),b(-D[1],O[0])),R[2]))),-L[3])))),M=S(B,A);return M[M.length-1]}}function f(y){var b=y===3?u:y===4?l:h;return b(r,t,i,n)}var d=f(3),p=f(4),m=[function(){return 0},function(){return 0},function(b,T){return T[0]-b[0]},function(b,T,S){var k=(b[1]-S[1])*(T[0]-S[0]),O=(b[0]-S[0])*(T[1]-S[1]),D=k-O,R;if(k>0){if(O<=0)return D;R=k+O}else if(k<0){if(O>=0)return D;R=-(k+O)}else return D;var w=s*R;return D>=w||D<=-w?D:d(b,T,S)},function(b,T,S,k){var O=b[0]-k[0],D=T[0]-k[0],R=S[0]-k[0],w=b[1]-k[1],L=T[1]-k[1],B=S[1]-k[1],A=b[2]-k[2],M=T[2]-k[2],j=S[2]-k[2],W=D*B,K=R*L,oe=R*w,fe=O*B,Ae=O*L,de=D*w,Z=A*(W-K)+M*(oe-fe)+j*(Ae-de),ne=(Math.abs(W)+Math.abs(K))*Math.abs(A)+(Math.abs(oe)+Math.abs(fe))*Math.abs(M)+(Math.abs(Ae)+Math.abs(de))*Math.abs(j),ue=c*ne;return Z>ue||-Z>ue?Z:p(b,T,S,k)}];function g(y){var b=m[y.length];return b||(b=m[y.length]=f(y.length)),b.apply(void 0,y)}function v(y,b,T,S,k,O,D){return function(w,L,B,A,M){switch(arguments.length){case 0:case 1:return 0;case 2:return S(w,L);case 3:return k(w,L,B);case 4:return O(w,L,B,A);case 5:return D(w,L,B,A,M)}for(var j=new Array(arguments.length),W=0;W<arguments.length;++W)j[W]=arguments[W];return y(j)}}function _(){for(;m.length<=o;)m.push(f(m.length));e.exports=v.apply(void 0,[g].concat(m));for(var y=0;y<=o;++y)e.exports[y]=m[y]}_()})(tz);var Mke=tz.exports,Lke=Bke,x_=Mke;function Bke(e,t){for(var r=t[0],i=t[1],n=e.length,o=1,a=n,s=0,c=n-1;s<a;c=s++){var u=e[s],l=e[c],h=u[1],f=l[1];if(f<h){if(f<i&&i<h){var d=x_(u,l,t);if(d===0)return 0;o^=0<d|0}else if(i===h){var p=e[(s+1)%n],m=p[1];if(h<m){var d=x_(u,l,t);if(d===0)return 0;o^=0<d|0}}}else if(h<f){if(h<i&&i<f){var d=x_(u,l,t);if(d===0)return 0;o^=d<0|0}else if(i===h){var p=e[(s+1)%n],m=p[1];if(m<h){var d=x_(u,l,t);if(d===0)return 0;o^=d<0|0}}}else if(i===h){var g=Math.min(u[0],l[0]),v=Math.max(u[0],l[0]);if(s===0){for(;c>0;){var _=(c+n-1)%n,y=e[_];if(y[1]!==i)break;var b=y[0];g=Math.min(g,b),v=Math.max(v,b),c=_}if(c===0)return g<=r&&r<=v?0:1;a=c+1}for(var T=e[(c+n-1)%n][1];s+1<a;){var y=e[s+1];if(y[1]!==i)break;var b=y[0];g=Math.min(g,b),v=Math.max(v,b),s+=1}if(g<=r&&r<=v)return 0;var S=e[(s+1)%n][1];r<g&&T<i!=S<i&&(o^=1)}}return 2*o-1}const iz=ui(Lke);function Hke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Fke(i.key),i)}}function $ke(e,t,r){return t&&oz(e.prototype,t),r&&oz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fke(e){var t=jke(e,"string");return typeof t=="symbol"?t:String(t)}function jke(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oa(){return typeof Reflect<"u"&&Reflect.get?oa=Reflect.get.bind():oa=function(t,r,i){var n=Uke(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},oa.apply(this,arguments)}function Uke(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Zi(e),e!==null););return e}function Gke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tI(e,t)}function tI(e,t){return tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},tI(e,t)}function zke(e){var t=Yke();return function(){var i=Zi(e),n;if(t){var o=Zi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Vke(this,n)}}function Vke(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wke(e)}function Wke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zi(e){return Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zi(e)}const az=16,sz=50,rI=5e3,lz=5,wc={fontSize:"14px",fontFamily:"Arial",stroke:"white",strokeThickness:2,fontWeight:400,dropShadow:!0,dropShadowColor:"white",dropShadowDistance:0,dropShadowBlur:2};let cz=function(e){Gke(r,e);var t=zke(r);function r(i,n){var o;return Hke(this,r),o=t.call(this,i,n),o.valueScaleTransform=fn,o}return $ke(r,[{key:"initialize",value:function(){this.initialized||([this.prevK,this.vertK,this.vertY]=[1,1,0],this.drawnRects||(this.drawnRects={}),this.colorScale||(this.options.colorRange?this.colorScale=Ma(this.options.colorRange):this.colorScale=Mu),this.initialized=!0)}},{key:"initTile",value:function(n){n.texts={},n.rectGraphics=new He.PIXI.Graphics,n.textGraphics=new He.PIXI.Graphics,n.graphics.addChild(n.rectGraphics),n.graphics.addChild(n.textGraphics);let o=[],a=[];if(n.tileData&&n.tileData.length){if(n.tileData.sort((s,c)=>c.importance-s.importance),!this.options||!this.options.valueColumn){const s=n.tileData.map(c=>{const u=+c.chrOffset;return{from:+c.fields[1]+u,to:+c.fields[2]+u,value:c,text:c.fields[3],strand:c.fields.length>=6&&c.fields[5]==="-"?"-":"+"}});o=wy(s.filter(c=>c.strand==="+")),a=wy(s.filter(c=>c.strand==="-"))}else o=[n.tileData.map(s=>({value:s}))];n.plusStrandRows=o,n.minusStrandRows=a,this.options.showTexts&&n.tileData.forEach((s,c)=>{const u=s.fields;if(s.importance||(s.importance=Math.random()),n.textWidths={},n.textHeights={},c>=(+this.options.maxTexts||sz))return;const l=new He.PIXI.Text(u[3],{...wc,fontSize:+this.options.fontSize||wc.fontSize});this.flipText&&(l.scale.x=-1),l.anchor.x=.5,l.anchor.y=.5,n.texts[s.uid]=l,n.textGraphics.addChild(l)})}n.initialized=!0}},{key:"removeTileRects",value:function(n){const o=+n.tileId.split(".")[0];n.rectGraphics.clear(),n.rendered=!1,n.tileData&&n.tileData.length&&n.tileData.forEach((a,s)=>{this.drawnRects[o]&&this.drawnRects[o][a.uid]&&this.drawnRects[o][a.uid][2]===n.tileId&&delete this.drawnRects[o][a.uid]})}},{key:"destroyTile",value:function(n){this.removeTileRects(n),n.graphics.destroy(!0)}},{key:"removeTiles",value:function(n){oa(Zi(r.prototype),"removeTiles",this).call(this,n)}},{key:"drawTile",value:function(n){this.options&&this.options.valueColumn&&this.valueScale&&this.drawAxis(this.valueScale)}},{key:"remove",value:function(){this.visibleTileIds&&this.removeTiles([...this.visibleTileIds])}},{key:"rerender",value:function(n,o){oa(Zi(r.prototype),"rerender",this).call(this,n,o),this.valueScale=null,this.drawnRects={},this.options.colorRange?this.colorScale=Ma(this.options.colorRange):this.colorScale=Mu}},{key:"updateTile",value:function(n){this.areAllVisibleTilesLoaded()&&this.renderTile(n)}},{key:"allVisibleRects",value:function(){const n={};Object.values(this.fetchedTiles).forEach(c=>{if(c.plusStrandRows)for(const u of c.plusStrandRows[0])n[u.value.uid]||(n[u.value.uid]=u)});const o=Object.values(n).sort((c,u)=>c.from-u.from);let a=0,s=0;for(let c=0;c<o.length;c++)if(o[c].staggeredStartPosition!==void 0){a=c,s=o[c].staggeredStartPosition;break}for(let c=a;c<o.length;c++)o[c].staggeredStartPosition=(s+c-a)%2;for(let c=a;c>=0&&o.length;c--)o[c].staggeredStartPosition=(s+a-c)%2;return n}},{key:"drawSegmentStyle",value:function(n,o,a,s,c,u){const h=s+c/2,f=[o,s,o+2*.1,s,o+2*.1,h-.1,a-2*.1,h-.1,a-2*.1,s,a,s,a,s+c,a-2*.1,s+c,a-2*.1,h+.1,o+2*.1,h+.1,o+2*.1,s+c,o,s+c];return n.rectGraphics.drawPolygon(f),f}},{key:"drawPoly",value:function(n,o,a,s,c,u){let l=null;return this.options.annotationStyle==="segment"?this.drawSegmentStyle(n,o,a,s,c,u):((u==="+"||u==="-")&&a-o<az/2?(l=[o,s,o+c/2,s+c/2,o,s+c],u==="+"||(l=[a,s,a-c/2,s+c/2,a,s+c]),n.rectGraphics.drawPolygon(l)):(u==="+"?l=[o,s,a-c/2,s,a,s+c/2,a-c/2,s+c,o,s+c]:u==="-"?l=[o+c/2,s,a,s,a,s+c,o+c/2,s+c,o,s+c/2]:l=[o,s,a,s,a,s+c,o,s+c],n.rectGraphics.drawPolygon(l)),l)}},{key:"setValueScale",value:function(){if(this.valueScale=null,this.options&&this.options.valueColumn){const n=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.valueColumn),o=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.valueColumn);this.options.valueColumn&&([this.valueScale]=this.makeValueScale(n,this.calculateMedianVisibleValue(+this.options.valueColumn),o))}}},{key:"setColorValueScale",value:function(){if(this.colorValueScale=null,this.options&&this.options.colorEncoding&&this.options.colorEncoding!=="itemRgb"){const n=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.colorEncoding),o=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.colorEncoding);this.colorValueScale=bt().domain([n,o]).range([0,255])}}},{key:"renderRows",value:function(n,o,a,s,c,u){const l=+n.tileId.split(".")[0];this.initialize();const h=cd().domain(Vn(a)).range([s,c]).paddingInner(.1);this.allVisibleRects();let f=null;this.options.staggered&&(f=this.allVisibleRects());for(let d=0;d<o.length;d++)for(let p=0;p<o[d].length;p++){const m=o[d][p].value,g=m.fields,v=+m.chrOffset,_=+g[1]+v,y=+g[2]+v,b=(_+y)/2;let T=h(d)+h.step()/2,S=this.options.annotationHeight||az;if(S==="scaled"&&(S=h.bandwidth(),this.options.maxAnnotationHeight&&(S=Math.min(S,+this.options.maxAnnotationHeight))),this.options&&this.options.colorEncoding==="itemRgb"&&m.fields[8]?m.fields[8].split(",").length===3&&(u=`rgb(${m.fields[8]})`):this.colorValueScale&&(u=`rgba(${pw(this.colorValueScale,this.colorScale,0,-Number.MIN_VALUE)(+g[+this.options.colorEncoding-1]).join(",")})`),this.valueScale){const A=+g[+this.options.valueColumn-1];T=this.valueScale(A)}const k=this.options.fillOpacity||.3;n.rectGraphics.lineStyle(1,it(u),k),n.rectGraphics.beginFill(it(u),k);let O=T-S/2;const D=this._xScale(_),R=this._xScale(y);this.options.staggered&&(f[m.uid].staggeredStartPosition?O-=lz/2:O+=lz/2);let w=!0;if(!(l in this.drawnRects&&m.uid in this.drawnRects[l])){w=!1,this.drawnRects[l]||(this.drawnRects[l]={});const A=this.drawPoly(n,D,R,O*this.prevK,S*this.prevK,g[5]);this.drawnRects[l][m.uid]=[A,{start:_,end:y,value:m,tile:n,fill:u},n.tileId]}if(!this.options.showTexts)continue;if(!n.texts)return;if(p>=(+this.options.maxTexts||sz)||!n.texts[m.uid])continue;const L=n.texts[m.uid];L.position.x=this._xScale(b),L.position.y=O+S/2,L.nominalY=O+S/2,w&&(L.alreadyDrawn=!0);const B=this.options.fontColor!==void 0?it(this.options.fontColor):u;if(L.style={...wc,fill:B,fontSize:+this.options.fontSize||wc.fontSize},!(g[3]in n.textWidths)){L.updateTransform();const A=L.getBounds().width,M=L.getBounds().height,j=5;n.textWidths[g[3]]=A,n.textHeights[g[3]]=M-j}}}},{key:"renderTile",value:function(n){let o=n.plusStrandRows?n.plusStrandRows.length:1,a=n.minusStrandRows?n.minusStrandRows.length:1;for(const s of this.visibleAndFetchedTiles()){if(!s.initialized)return;!s.plusStrandRows&&!s.minusStrandRows||(o=Math.max(s.plusStrandRows.length,o),a=Math.max(s.minusStrandRows.length,a))}if(n.rendered&&this.removeTileRects(n),n.drawnAtScale=this._xScale.copy(),n.rendered=!0,this.setValueScale(),this.setColorValueScale(),n.tileData&&n.tileData.length){const s=this.options.plusStrandColor||this.options.fillColor||"blue",c=this.options.minusStrandColor||this.options.fillColor||"purple",u=0;let l=0;this.options.separatePlusMinusStrands?l=o*this.dimensions[1]/(o+a)-u/2:l=this.dimensions[1],this.renderRows(n,n.plusStrandRows,o,0,l,s),this.renderRows(n,n.minusStrandRows,a,this.options.separatePlusMinusStrands?l+u/2:0,this.dimensions[1],c)}fc.stretchRects(this,[s=>s.rectGraphics])}},{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let o=Math.min(n,this.maxZoom);return o=Math.max(o,0),o}},{key:"minVisibleValueInTiles",value:function(n){let o=this.visibleAndFetchedIds();o.length===0&&(o=Object.keys(this.fetchedTiles));let a=Math.min.apply(null,o.map(s=>this.fetchedTiles[s]).filter(s=>s.tileData&&s.tileData.length).map(s=>Math.min.apply(null,s.tileData.sort((c,u)=>u.importance-c.importance).slice(0,rI).map(c=>+c.fields[n-1]).filter(c=>!Number.isNaN(c)))));return a===Number.MAX_SAFE_INTEGER&&(a=null),a}},{key:"maxVisibleValueInTiles",value:function(n){let o=this.visibleAndFetchedIds();o.length===0&&(o=Object.keys(this.fetchedTiles));let a=Math.max.apply(null,o.map(s=>this.fetchedTiles[s]).filter(s=>s.tileData&&s.tileData.length).map(s=>Math.max.apply(null,s.tileData.sort((c,u)=>u.importance-c.importance).slice(0,rI).map(c=>+c.fields[n-1]).filter(c=>!Number.isNaN(c)))));return a===Number.MIN_SAFE_INTEGER&&(a=null),a}},{key:"calculateMedianVisibleValue",value:function(n){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let o=this.visibleAndFetchedIds();o.length===0&&(o=Object.keys(this.fetchedTiles));const a=[].concat(...o.map(s=>this.fetchedTiles[s]).filter(s=>s.tileData&&s.tileData.length).map(s=>s.tileData.sort((c,u)=>u.importance-c.importance).slice(0,rI).map(c=>+c.fields[n-1]))).filter(s=>s>0);this.medianVisibleValue=$E(a)}},{key:"draw",value:function(){oa(Zi(r.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];for(const n in this.fetchedTiles){const o=this.fetchedTiles[n];if(o.rectGraphics.scale.y=this.vertK,o.rectGraphics.position.y=this.vertY,!o.drawnAtScale)return;fc.stretchRects(this,[s=>s.rectGraphics]);const a=this.parentInFetched(o);o.initialized&&o.tileData&&o.tileData.length&&o.tileData.forEach(s=>{if(!o.texts)return;const c=s.fields,u=c[3],l=o.texts[s.uid];if(!l)return;const h=+s.chrOffset,f=+c[1]+h,d=+c[2]+h,p=(f+d)/2;if(l.position.x=this._xScale(p),l.position.y=l.nominalY*(this.vertK*this.prevK)+this.vertY,!a&&!l.alreadyDrawn){l.visible=!0;const m=3;this.allBoxes.push([l.position.x-m,l.position.y-o.textHeights[c[3]]/2,l.position.x+o.textWidths[c[3]]+m,l.position.y+o.textHeights[c[3]]/2]),this.allTexts.push({importance:s.importance,text:l,caption:u,strand:c[5]})}else l.visible=!1})}this.hideOverlaps(this.allBoxes,this.allTexts)}},{key:"hideOverlaps",value:function(n,o){mm(n,(a,s)=>{o[a].importance>o[s].importance?o[a].text.visible&&(o[s].text.visible=!1):o[s].text.visible&&(o[a].text.visible=!1)})}},{key:"setPosition",value:function(n){oa(Zi(r.prototype),"setPosition",this).call(this,n),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(n){oa(Zi(r.prototype),"setDimensions",this).call(this,n)}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){let n=null,o=null;oa(Zi(r.prototype),"exportSVG",this)?[o,n]=oa(Zi(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),n.appendChild(a);const s=document.createElement("g"),c=document.createElement("g");a.appendChild(s),a.appendChild(c);for(const u of this.visibleAndFetchedTiles())u.tileData.length&&u.tileData.forEach(l=>{console.log(`exportSVG tile ${u.tileId}`);const h=+u.tileId.split(".")[0],f=document.createElement("g");if(f.setAttribute("transform",`translate(${u.rectGraphics.position.x},${u.rectGraphics.position.y})scale(${u.rectGraphics.scale.x},${u.rectGraphics.scale.y})`),s.appendChild(f),this.drawnRects[h]&&l.uid in this.drawnRects[h]){const d=this.drawnRects[h][l.uid][0],p=document.createElement("path");let m=`M ${d[0]} ${d[1]}`;for(let _=2;_<d.length;_+=2)m+=` L ${d[_]} ${d[_+1]}`;const g=this.drawnRects[h][l.uid][1].fill,v=this.options.fontColor!==void 0?it(this.options.fontColor):g;if(p.setAttribute("d",m),p.setAttribute("fill",g),p.setAttribute("opacity",.3),p.style.stroke=g,p.style.strokeWidth="1px",f.appendChild(p),u.texts[l.uid]){const _=u.texts[l.uid];if(!_.visible)return;const y=document.createElement("g"),b=document.createElement("text");c.appendChild(y),y.appendChild(b),y.setAttribute("transform",`translate(${_.x},${_.y})scale(${_.scale.x},1)`),b.setAttribute("text-anchor","middle"),b.setAttribute("font-family",wc.fontFamily),b.setAttribute("font-size",+this.options.fontSize||wc.fontSize),b.setAttribute("font-weight","bold"),b.setAttribute("dy","5px"),b.setAttribute("fill",v),b.setAttribute("stroke",wc.stroke),b.setAttribute("stroke-width","0.4"),b.setAttribute("text-shadow","0px 0px 2px grey"),b.innerHTML=_.text}}});return[o,o]}},{key:"movedY",value:function(n){Object.values(this.fetchedTiles).forEach(o=>{const a=this.valueScaleTransform,{y:s,k:c}=a,u=this.dimensions[1];s+n/c>-(c-1)*u&&s+n/c<0&&(this.valueScaleTransform=a.translate(0,n/c)),o.rectGraphics.position.y=this.valueScaleTransform.y,this.vertY=this.valueScaleTransform.y}),this.animate()}},{key:"zoomedY",value:function(n,o){const a=fc.zoomedY(n,o,this.valueScaleTransform,this.dimensions[1]);this.valueScaleTransform=a;let s=a.k;const c=a.y;let u=!1;s/=this.prevK,(s>1.5||s<1/1.5)&&(this.prevK*=s,s=1,u=!0),this.vertK=s,this.vertY=c,Object.values(this.fetchedTiles).forEach(l=>{u&&this.renderTile(l),l.rectGraphics.scale.y=s,l.rectGraphics.position.y=c}),this.draw(),this.animate()}},{key:"getMouseOverHtml",value:function(n,o,a){if(!this.tilesetInfo||!this.drawnRects)return"";if(!this.options.showTooltip&&!a)return this.animate(),"";const s=this.calculateZoomLevel(),c=[n,o];if(this.drawnRects[s]){const u=Object.values(this.drawnRects[s]);for(let l=0;l<u.length;l++){const h=u[l][0].slice(0),f=u[l][1].tile.rectGraphics.scale.x,d=u[l][1].tile.rectGraphics.position.x,p=u[l][1].tile.rectGraphics.scale.y,m=u[l][1].tile.rectGraphics.position.y,g=[];for(;h.length;){const[_,y]=h.splice(0,2);g.push([_*f+d,y*p+m])}if(iz(g,c)===-1){let _=function(O){return typeof O=="number"};const y=u[l][1].value.fields;let b='<div class="track-mouseover-menu-table">';const T=y.length>=4?y[3]:null;T&&(b+=`
            <div class="track-mouseover-menu-table-item">
              <label for="identifier" class="track-mouseover-menu-table-item-label">Identifier</label>
              <div name="identifier" class="track-mouseover-menu-table-item-value">${T}</div>
            </div>
            `);const S=y.length>=5&&typeof y[5]<"u"?`${y[0]}:${+y[1]}-${+y[2]} (${y[5]})`:`${y[0]}:${+y[1]}-${+y[2]}`;S&&S!==T&&(b+=`
            <div class="track-mouseover-menu-table-item">
              <label for="interval" class="track-mouseover-menu-table-item-label">Interval</label>
              <div name="interval" class="track-mouseover-menu-table-item-value">${S}</div>
            </div>
            `);const k=y.length>=5&&_(Number(y[4]))?Number(y[4]).toExponential(3):null;return k&&(b+=`
            <div class="track-mouseover-menu-table-item">
              <label for="score" class="track-mouseover-menu-table-item-label">Score</label>
              <div name="score" class="track-mouseover-menu-table-item-value">${k}</div>
            </div>
            `),b+="</div>",b}}}return""}}]),r}($f);function qke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Kke(i.key),i)}}function Xke(e,t,r){return t&&uz(e.prototype,t),r&&uz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kke(e){var t=Zke(e,"string");return typeof t=="symbol"?t:String(t)}function Zke(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ys(){return typeof Reflect<"u"&&Reflect.get?Ys=Reflect.get.bind():Ys=function(t,r,i){var n=Qke(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Ys.apply(this,arguments)}function Qke(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=aa(e),e!==null););return e}function Jke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nI(e,t)}function nI(e,t){return nI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},nI(e,t)}function eIe(e){var t=nIe();return function(){var i=aa(e),n;if(t){var o=aa(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return tIe(this,n)}}function tIe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rIe(e)}function rIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aa(e){return aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aa(e)}const iIe=(e,t,r,i,n)=>{n.drawRect(e,t,r,i)},oIe=(e,t,r,i,n,{fill:o=0,fillOpacity:a=0,stroke:s=0,strokeWidth:c=0,strokeOpacity:u=0}={})=>{const l=document.createElement("rect");l.setAttribute("x",e),l.setAttribute("y",t),l.setAttribute("width",r),l.setAttribute("height",i),l.setAttribute("fill",`#${$S(o)}`),l.setAttribute("fill-opacity",a),l.setAttribute("stroke",`#${$S(s)}`),l.setAttribute("stroke-opacity",u),l.setAttribute("stroke-width",c),n.appendChild(l)},sa=(e,t,r,i,n,o)=>{n instanceof HTMLElement?oIe(e,t,r,i,n,o):iIe(e,t,r,i,n)},fz=(e,t,r,i,n,o,a,s,{isVertical:c=!1,svg:u=null}={})=>{let l=t,h=r,f=i,d=n;const p=s.width*2>i?i/2:s.width,m=s.width*2>n?n/2:s.width,g=u||e,v={fill:0,fillOpacity:0,stroke:0,strokeOpacity:0,strokeWidth:1};if(s.positions&&s.positions.length?(e.lineStyle(1,0,0),e.beginFill(s.color,s.opacity),v.fill=s.color,v.fillOpacity=s.opacity,v.stroke=0,v.strokeOpacity=0,v.strokeWidth=1,s.positions.forEach(_=>{_==="top"&&!c||_==="left"&&c?sa(t-p,r-m,i+p*2,m,g,v):_==="bottom"&&!c||_==="right"&&c?sa(t-p,r+n,i+p*2,m,g,v):_==="left"&&!c||_==="top"&&c?sa(t-p,r-m,p,n+m*2,g,v):(_==="right"&&!c||_==="bottom"&&c)&&sa(t+i,r-m,p,n+m*2,g,v)})):s.width>0&&s.opacity>0&&(e.lineStyle(s.width,s.color,s.opacity),e.beginFill(0,0),v.fill=0,v.fillOpacity=0,v.stroke=s.color,v.strokeOpacity=s.opacity,v.strokeWidth=s.width,sa(t-p,r-m,i+p*2,n+m*2,g,v)),a.positions&&a.positions.length){e.lineStyle(1,0,0),e.beginFill(a.color,a.opacity);const _=a.width*2>i?i/2:a.width,y=a.width*2>n?n/2:a.width;v.fill=a.color,v.fillOpacity=a.opacity,v.stroke=0,v.strokeOpacity=0,v.strokeWidth=1,a.positions.forEach(b=>{b==="top"&&!c||b==="left"&&c?(sa(t,r,i,y,g,v),h+=y,d-=y):b==="bottom"&&!c||b==="right"&&c?(sa(t,r+n-y,i,y,g,v),d-=y):b==="left"&&!c||b==="top"&&c?(sa(t,r,_,n,g,v),l+=_,f-=_):(b==="right"&&!c||b==="bottom"&&c)&&(sa(t+i-_,r,_,n,g,v),f-=_)})}else e.lineStyle(a.width,a.color,a.opacity),v.stroke=a.color,v.strokeOpacity=a.opacity,v.strokeWidth=a.width;e.beginFill(o.color,o.opacity),v.fill=o.color,v.fillOpacity=o.opacity,sa(l,h,f,d,g,v)};let hz=function(e){Jke(r,e);var t=eIe(r);function r(i,n){var o;return qke(this,r),o=t.call(this,i,n),o.options=n||{},o.drawnRects={},o}return Xke(r,[{key:"drawHorizontalOverlay",value:function(n,o,a,s=0,c,u,l,h){if(!a||a.length<2)return;let f=this.position[0]+o.left+this._xScale(a[0]);const d=this.position[1]+o.top,p=o.height;let m=this._xScale(a[1])-this._xScale(a[0]);m<s&&(f-=(s-m)/2,m=s),fz(n,f,d,m,p,c,u,l,h)}},{key:"drawVerticalOverlay",value:function(n,o,a,s=0,c,u,l,h={}){if(!a||a.length<2)return;const f=this.position[0]+o.left;let d=this.position[1]+o.top+this._yScale(a.length>=4?a[2]:a[0]);const p=this.position[1]+o.top,m=this.position[1]+o.top+o.height;if(d>m)return;d<p&&(d=p);const g=o.width;let v=this._yScale(a.length>=4?a[3]:a[1])-d+o.top+this.position[1];v<0||(d+v>m&&(v+=m-(d+v)),v<s&&(d-=(s-v)/2,v=s),h.isVertical=!0,fz(n,f,d,g,v,c,u,l,h))}},{key:"draw",value:function(n){Ys(aa(r.prototype),"draw",this).call(this);const o=this.pMain,a={color:it(this.options.fill||this.options.fillColor||"blue"),opacity:Number.isNaN(+this.options.fillOpacity)?.3:+this.options.fillOpacity},s={color:it(this.options.stroke||"blue"),opacity:+this.options.strokeOpacity||1,width:+this.options.strokeWidth||0,positions:!this.options.strokePos||Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]},c={color:it(this.options.outline||"white"),opacity:+this.options.outlineOpacity||1,width:+this.options.outlineWidth||0,positions:!this.options.outlinePos||Array.isArray(this.options.outlinePos)?this.options.outlinePos:[this.options.outlinePos]};(!n||!n.svg)&&o.clear(),o.lineStyle(s.width,s,+!s.positions*s.opacity),o.beginFill(a.color,a.opacity);const u=Math.max(0,+this.options.minWidth||0),l=Math.max(0,+this.options.minHeight||0);Array.isArray(this.options.extent)&&this.options.orientationsAndPositions.forEach(h=>{(h.orientation==="1d-horizontal"||h.orientation==="2d")&&this.options.extent.forEach(f=>this.drawHorizontalOverlay(o,h.position,f,u,a,s,c,n)),(h.orientation==="1d-vertical"||h.orientation==="2d")&&this.options.extent.forEach(f=>this.drawVerticalOverlay(o,h.position,f,l,a,s,c,n))})}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}},{key:"setPosition",value:function(n){Ys(aa(r.prototype),"setPosition",this).call(this,n),this.draw()}},{key:"setDimensions",value:function(n){Ys(aa(r.prototype),"setDimensions",this).call(this,n),this.draw()}},{key:"exportSVG",value:function(){let n=null,o=null;Ys(aa(r.prototype),"exportSVG",this)?[o,n]=Ys(aa(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");return n.appendChild(a),this.draw({svg:a}),[o,n]}}]),r}(jn);function aIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,lIe(i.key),i)}}function sIe(e,t,r){return t&&dz(e.prototype,t),r&&dz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lIe(e){var t=cIe(e,"string");return typeof t=="symbol"?t:String(t)}function cIe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function So(){return typeof Reflect<"u"&&Reflect.get?So=Reflect.get.bind():So=function(t,r,i){var n=uIe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},So.apply(this,arguments)}function uIe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ri(e),e!==null););return e}function fIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iI(e,t)}function iI(e,t){return iI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},iI(e,t)}function hIe(e){var t=mIe();return function(){var i=Ri(e),n;if(t){var o=Ri(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return dIe(this,n)}}function dIe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pIe(e)}function pIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ri(e){return Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ri(e)}let Qf=function(e){fIe(r,e);var t=hIe(r);function r(){return aIe(this,r),t.apply(this,arguments)}return sIe(r,[{key:"stopHover",value:function(){this.pMouseOver.clear(),this.animate()}},{key:"getMouseOverHtml",value:function(n,o,a){if(!this.tilesetInfo||!this.valueScale)return"";const s=this.getDataAtPos(n);let c="";s&&(c=Oi(".3f")(s));const u=this.pMouseOver,l=0,h=this.valueScale(s);if(u.clear(),!this.options.showTooltip&&!a)return this.animate(),"";u.beginFill(l,.5),u.lineStyle(1,l,1);const f=4;if(u.drawRect(n-f/2,h-f/2,f,f),this.animate(),!c||c.length===0)return"";let d="";if(!this.options.isCombined)d='<div class="track-mouseover-menu-table">',d+=`
        <div class="track-mouseover-menu-table-item">
          <label for="value" class="track-mouseover-menu-table-item-label">Value</label>
          <div name="value" class="track-mouseover-menu-table-item-value">${c}</div>
        </div>
        `,d+="</div>";else{if(d=this.options.isFirst?'<div class="track-mouseover-menu-table">':"",this.options.isFirst&&this.options.chromInfo){const g=this._xScale.invert(n),v=Dr(g,this.options.chromInfo),_=v[0],y=Math.ceil(v[1]),b=`${_}:${y}`;d+=`
          <div class="track-mouseover-menu-table-item">
            <label for="position" class="track-mouseover-menu-table-item-label">Position</label>
            <div name="position" class="track-mouseover-menu-table-item-value">${b}</div>
          </div>
          `}const p=this.options.barFillColor?`<div style="border:1px solid black;background-color:${this.options.barFillColor};width:10px;height:10px;display:inline-block;margin-right:5px;margin-left:2px;"></div>`:"",m=this.options.name?`${p}${this.options.name}`:"Value";d+=`
        <div class="track-mouseover-menu-table-item">
          <label for="value" class="track-mouseover-menu-table-item-label">${m}</label>
          <div name="value" class="track-mouseover-menu-table-item-value">${c}</div>
        </div>
        `,d+=this.options.isLast?"</div>":""}return d}},{key:"initTile",value:function(n){if(So(Ri(r.prototype),"initTile",this).call(this,n),!n.tileData||!n.tileData.dense){console.warn("emptyTile:",n);return}if(n.xValues=new Array(n.tileData.dense.length),n.yValues=new Array(n.tileData.dense.length),this.isValueScaleLocked()){const o=this.getLockGroupExtrema();o!==null&&(this.minValue(o[0]),this.maxValue(o[1]))}this.drawTile(n)}},{key:"rerender",value:function(n,o){So(Ri(r.prototype),"rerender",this).call(this,n,o),this.options=n,So(Ri(r.prototype),"draw",this).call(this),this.visibleAndFetchedTiles().forEach(a=>{this.renderTile(a)})}},{key:"renderTile",value:function(n){this.drawTile(n),this.drawAxis(this.valueScale)}},{key:"drawTile",value:function(n){if(So(Ri(r.prototype),"drawTile",this).call(this,n),!n.graphics||!n.tileData||!n.tileData.dense)return;const o=n.graphics,{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos),c=n.tileData.dense;if(c.length===0)return;const[u,l]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(this.valueScale=u,o.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const h=it(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue");!this.tilesetInfo.tile_size&&!this.tilesetInfo.bins_per_dimension&&console.warn("No tileset_info.tile_size or tileset_info.bins_per_dimension",this.tilesetInfo);const f=this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension,d=bt().domain([0,f]).range([a,a+s]),p=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;o.lineStyle(p,h,1),n.segments=[];let m=[];for(let g=0;g<c.length;g++){const v=this._xScale(d(g)),_=this.valueScale(c[g]+l);if(this.options.valueScaling==="log"&&c[g]===0||Number.isNaN(_)){m.length>1&&n.segments.push(m),m=[];continue}if(d(g)>this.tilesetInfo.max_pos[0])break;m.push([v,_])}m.length>1&&n.segments.push(m);for(const g of n.segments){const v=g[0],_=g.slice(1);o.moveTo(v[0],v[1]);for(const y of _)o.lineTo(y[0],y[1])}}},{key:"setPosition",value:function(n){So(Ri(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.pMouseOver.position.y=this.position[1],this.pMouseOver.position.x=this.position[0]}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.refreshTiles(),this.draw();const a=this.isValueScaleLocked();if(this.continuousScaling&&this.minValue()!==void 0&&this.maxValue()!==void 0){if(this.valueScaleMin===null&&this.valueScaleMax===null&&!a){const s=this.minVisibleValue(),c=this.maxVisibleValue(),u=1e-6;s!==null&&c!==null&&(Math.abs(this.minValue()-s)>u||Math.abs(this.maxValue()-c)>u)&&(this.minValue(s),this.maxValue(c),this.scheduleRerender())}a&&this.onValueScaleChanged()}}},{key:"superSVG",value:function(){return So(Ri(r.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let n=null,o=null;So(Ri(r.prototype),"exportSVG",this)?[o,n]=So(Ri(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o),o.setAttribute("class","exported-line-track");const a=document.createElement("g");n.appendChild(a),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);const s=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue";this.visibleAndFetchedTiles().forEach(l=>{if(l.hasOwnProperty("segments")){const h=document.createElement("path");h.setAttribute("fill","transparent"),h.setAttribute("stroke",s);let f="";for(const d of l.segments){const p=d[0],m=d.slice(1);f+=`M${p[0]} ${p[1]}`;for(const g of m)f+=`L${g[0]} ${g[1]}`}h.setAttribute("d",f),a.appendChild(h)}else if(l.hasOwnProperty("tileData")){const{tileX:h,tileWidth:f}=this.getTilePosAndDimensions(l.tileData.zoomLevel,l.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),d=l.tileData.dense;if(d.length!==0){l.svgData=void 0;const p=bt().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([h,h+f]);let m,g,v,_,y=this.options.barFillColor||"none";const[b,T]=this.makeValueScale(this.minValue(),0,this.maxValue(),0);this.valueScale=b,this.colorScale=Ma(this.options.colorRange);const S=b.copy();S.range([254,0]).clamp(!0);for(let O=0;O<d.length;O++)if(m=this._xScale(p(O)),v=this.valueScale(this.maxValue()+T),g=this._xScale(p(O+1))-m,_=this.dimensions[1],this.colorScale&&!this.options.colorRangeGradient)try{const D=Math.round(S(d[O]+T));y="#"+this.colorScale[D].map(R=>R.toString(16).padStart(2,0)).join(""),(Number.isNaN(d[O])||_<0||v<0)&&(_=this.dimensions[1],y="#ffffff"),this.addSVGInfo(l,m,v,g,_,y)}catch{}const k=l.svgData;for(let O=0;O<k.barXValues.length;O++){const D=k.barColors[O],R=D.substring(0,D.length-2),w=parseFloat(parseInt(D.substring(D.length-2),16))/255,L=document.createElement("rect");L.setAttribute("fill",R),L.setAttribute("fill-opacity",w),L.setAttribute("x",k.barXValues[O]),L.setAttribute("y",k.barYValues[O]),L.setAttribute("height",k.barHeights[O]),L.setAttribute("width",k.barWidths[O]),l.barBorders&&(L.setAttribute("stroke-width","0.1"),L.setAttribute("stroke","black")),a.appendChild(L)}}}});const c=document.createElement("g"),u=Math.random().toString(36).substring(7);if(c.setAttribute("id",`axis-${u}`),o.appendChild(c),c.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const l=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);c.appendChild(l)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const l=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);c.appendChild(l)}return[o,n]}},{key:"tileToLocalId",value:function(n){return this.options.aggregationMode&&this.options.aggregationMode!=="mean"?`${n.join(".")}.${this.options.aggregationMode}`:`${n.join(".")}`}},{key:"tileToRemoteId",value:function(n){return this.tileToLocalId(n)}}]),r}($f);function gIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,yIe(i.key),i)}}function vIe(e,t,r){return t&&pz(e.prototype,t),r&&pz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yIe(e){var t=bIe(e,"string");return typeof t=="symbol"?t:String(t)}function bIe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ac(){return typeof Reflect<"u"&&Reflect.get?Ac=Reflect.get.bind():Ac=function(t,r,i){var n=_Ie(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Ac.apply(this,arguments)}function _Ie(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=es(e),e!==null););return e}function TIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oI(e,t)}function oI(e,t){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},oI(e,t)}function EIe(e){var t=AIe();return function(){var i=es(e),n;if(t){var o=es(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return SIe(this,n)}}function SIe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wIe(e)}function wIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function es(e){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},es(e)}let mz=function(e){TIe(r,e);var t=EIe(r);function r(){return gIe(this,r),t.apply(this,arguments)}return vIe(r,[{key:"initTile",value:function(n){n.barXValues=new Array(n.tileData.dense.length),n.barYValues=new Array(n.tileData.dense.length),n.barWidths=new Array(n.tileData.dense.length),n.barHeights=new Array(n.tileData.dense.length),Ac(es(r.prototype),"initTile",this).call(this,n)}},{key:"drawTile",value:function(n){if(!n.graphics||!n.tileData||!n.tileData.dense)return;const o=n.graphics,{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos),c=n.tileData.dense;if(c.length===0)return;let u=0;if(this.valueScale=null,this.options.valueScaling==="log"){let m=this.medianVisibleValue;this.medianVisibleValue||(m=this.minValue()),this.valueScale=ys().domain([m,this.maxValue()+m]).range([this.dimensions[1],0]),u=m}else this.valueScale=bt().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(o.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const l=it(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),h=bt().domain([0,this.tilesetInfo.tile_size]).range([a,a+s]),f=0;o.lineStyle(f,l,1);const d=this.options.pointSize?this.options.pointSize:3,p=it(this.options.pointColor?this.options.pointColor:"red");o.beginFill(p,1),n.drawnAtScale=this._xScale.copy();for(let m=0;m<c.length;m++){const g=this._xScale(h(m)),v=this.valueScale(c[m]+u);if(n.barXValues[m]=g-d/2/this.pMain.scale.x,n.barYValues[m]=v-d/2/this.pMain.scale.y,n.barWidths[m]=d/this.pMain.scale.x,n.barHeights[m]=d/this.pMain.scale.y,h(m)>this.tilesetInfo.max_pos[0])break;o.drawRect(g-d/2/this.pMain.scale.x,v-d/2/this.pMain.scale.y,d/this.pMain.scale.x,d/this.pMain.scale.y)}}},{key:"draw",value:function(){Ac(es(r.prototype),"draw",this).call(this);for(const n of ur(this.fetchedTiles)){const o=(n.drawnAtScale.domain()[1]-n.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0]),s=this._xScale.domain().map(n.drawnAtScale)[0];n.graphics.scale.x=o,n.graphics.position.x=-s*o}}},{key:"zoomed",value:function(n,o,a,s,c){Ac(es(r.prototype),"zoomed",this).call(this,n,o)}},{key:"exportSVG",value:function(){let n=null,o=null;[o,n]=Ac(es(r.prototype),"superSVG",this).call(this),o.setAttribute("class","exported-line-track");const a=document.createElement("g");n.appendChild(a),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);for(const u of this.visibleAndFetchedTiles())for(let l=0;l<u.barXValues.length;l++){const h=document.createElement("rect"),f=this.options.lineStrokeColor||"blue",d=this.options.pointColor||"red";h.setAttribute("fill",d),h.setAttribute("stroke",f),h.setAttribute("stroke-width",0),h.setAttribute("x",u.barXValues[l]),h.setAttribute("y",u.barYValues[l]),h.setAttribute("height",u.barHeights[l]),h.setAttribute("width",u.barWidths[l]),a.appendChild(h)}const s=document.createElement("g"),c=Math.random().toString(36).substring(7);if(s.setAttribute("id",`axis-${c}`),o.appendChild(s),s.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const u=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const u=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}return[o,n]}}]),r}(Qf);function OIe(e){let t=0;const r=[];return e.forEach(i=>{t+=+i||0,r.push(t)}),Float64Array.from(r)}const kIe=(e,t)=>{const r=qd(e,t);return OIe(e.map(i=>(Array.isArray(i)&&t?i.length:1)/r))};function IIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,PIe(i.key),i)}}function CIe(e,t,r){return t&&gz(e.prototype,t),r&&gz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function PIe(e){var t=DIe(e,"string");return typeof t=="symbol"?t:String(t)}function DIe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gm(){return typeof Reflect<"u"&&Reflect.get?gm=Reflect.get.bind():gm=function(t,r,i){var n=xIe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},gm.apply(this,arguments)}function xIe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Oc(e),e!==null););return e}function NIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aI(e,t)}function aI(e,t){return aI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},aI(e,t)}function RIe(e){var t=BIe();return function(){var i=Oc(e),n;if(t){var o=Oc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return MIe(this,n)}}function MIe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LIe(e)}function LIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oc(e){return Oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oc(e)}let vz=function(e){NIe(r,e);var t=RIe(r);function r(i,n){var o;return IIe(this,r),o=t.call(this,i,n),o.pMain=o.pMobile,o.continuousScaling=!1,o.updateDataFetcher(n),o}return CIe(r,[{key:"updateDataFetcher",value:function(n){if(n&&n.selectRows&&n.selectRowsAggregationMethod==="server"){const{pubSub:o,dataFetcher:a}=this,s=a.dataConfig.options,c={aggGroups:n.selectRows,aggFunc:n.selectRowsAggregationMode};if(JSON.stringify(s)!==JSON.stringify(c)){const u={...a.dataConfig,options:c};this.dataFetcher=new a.constructor(u,o),this.dataFetcher.dataConfig.tilesetUid&&this.fetchNewTiles(Object.keys(this.fetchedTiles).map(l=>({tileId:l,remoteId:l})))}}}},{key:"rerender",value:function(n,o){this.updateDataFetcher(n),gm(Oc(r.prototype),"rerender",this).call(this,n,o),n.selectRows&&(this.selectRowsCumWeights=kIe(n.selectRows,n.selectRowsAggregationWithRelativeHeight))}},{key:"tileDataToCanvas",value:function(n){const o=document.createElement("canvas");this.options.selectRows&&this.tilesetInfo.shape?(o.width=this.tilesetInfo.shape[0],o.height=qd(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight)):this.tilesetInfo.shape?(o.width=this.tilesetInfo.shape[0],o.height=this.tilesetInfo.shape[1]):(o.width=this.tilesetInfo.tile_size,o.height=1);const a=o.getContext("2d");if(a.fillStyle="transparent",a.fillRect(0,0,o.width,o.height),n.length!==0&&n.length===4*o.width*o.height){const s=new ImageData(n,o.width,o.height);a.putImageData(s,0,0)}else console.warn("HorizontalMultivecTrack: pixData has an incorrect length.");return o}},{key:"setSpriteProperties",value:function(n,o,a){const{tileX:s,tileWidth:c}=this.getTilePosAndDimensions(o,a,this.tilesetInfo.tile_size),u=s+c;n.width=this._refXScale(u)-this._refXScale(s),n.height=this.dimensions[1],n.x=this._refXScale(s),n.y=0}},{key:"leftTrackZoomed",value:function(n,o,a,s,c){const u=this._xScale(0)-a*this._refXScale(0);this.pMobile.position.x=u+this.position[0],this.pMobile.position.y=this.position[1],this.pMobile.scale.x=a,this.pMobile.scale.y=1}},{key:"zoomed",value:function(n,o,a,s){gm(Oc(r.prototype),"zoomed",this).call(this,n,o),this.pMain.position.x=s,this.pMain.position.y=this.position[1],this.pMain.scale.x=a,this.pMain.scale.y=1,this.drawColorbar()}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const o=this.tilesetInfo.resolutions.map(a=>+a).sort((a,s)=>s-a);this.xTiles=at.calculateTilesFromResolution(o[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],null,this.tilesetInfo.tile_size)}else this.xTiles=at.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const n=this.xTiles.map(o=>[this.zoomLevel,o]);this.setVisibleTiles(n)}},{key:"calculateZoomLevel",value:function(){if(!this.tilesetInfo)return;const n=this.tilesetInfo.min_pos[0];let o=null;return this.tilesetInfo.resolutions?o=at.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,n):o=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o}},{key:"tileToLocalId",value:function(n){return n.join(".")}},{key:"tileToRemoteId",value:function(n){return n.join(".")}},{key:"getTilePosAtPosition",value:function(n,o){if(!this.tilesetInfo)return;const a=this.calculateZoomLevel(),s=at.calculateTileWidth(this.tilesetInfo,a,this.tilesetInfo.tile_size),c=this._xScale.invert(n)/s;return[a,Math.floor(c)]}},{key:"getVisibleData",value:function(n,o){const a=this.calculateZoomLevel(),s=at.calculateTileWidth(this.tilesetInfo,a,this.tilesetInfo.tile_size),c=this._xScale.invert(n)/s;let u=this.tilesetInfo.shape?this.tilesetInfo.shape[1]:1;this.options.selectRows&&(u=qd(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight));let l=this.tilesetInfo.tile_size*(c-Math.floor(c));const h=o/this.dimensions[1],f=h*u;let d=Math.floor(f),p;this.options.selectRows&&(this.options.selectRowsAggregationWithRelativeHeight&&(d=this.selectRowsCumWeights.findIndex((_,y)=>h<=_&&(y===this.selectRowsCumWeights.length-1||this.selectRowsCumWeights[y+1]>=h))),p=this.options.selectRows[d]);const m=this.tileToLocalId([a,Math.floor(c)]),g=this.fetchedTiles[m];let v="";if(g){this.tilesetInfo.shape||(l=g.tileData.dense.length*(c-Math.floor(c)));let _=null;if(this.tilesetInfo.shape?Array.isArray(p)&&this.options.selectRowsAggregationMethod==="client"?_=p.map(y=>this.tilesetInfo.shape[0]*y+Math.floor(l)):p&&this.options.selectRowsAggregationMethod==="client"?_=this.tilesetInfo.shape[0]*p+Math.floor(l):_=this.tilesetInfo.shape[0]*d+Math.floor(l):_=g.tileData.dense.length*d+Math.floor(l),Array.isArray(_)){const y=ew(this.options.selectRowsAggregationMode),b=_.map(T=>g.tileData.dense[T]);v=Oi(".3f")(y(b)),v+="<br/>",v+=`${_.length}-item ${this.options.selectRowsAggregationMode}`}else v=Oi(".3f")(g.tileData.dense[_]),Array.isArray(p)&&(v+="<br/>",v+=`${p.length}-item ${this.options.selectRowsAggregationMode}`)}if(this.tilesetInfo.row_infos){v+="<br/>";let _="";this.options.selectRows&&!Array.isArray(p)?_=this.tilesetInfo.row_infos[p]:d>=0&&d<this.tilesetInfo.row_infos.length&&(_=this.tilesetInfo.row_infos[d]),typeof _=="object"?v+=Object.values(_).join("	"):v+=_}return`${v}`}},{key:"getMouseOverHtml",value:function(n,o,a){if(!this.tilesetInfo||!this.options.showTooltip&&!a)return"";const s=this.getTilePosAtPosition(n,o);let c="";const l=this.getVisibleData(n,o).split("<br/>");if(this.options&&this.options.heatmapValueScaling&&this.options.heatmapValueScaling==="categorical"&&this.options.colorRange){let h=function(D){return D[0].toUpperCase()+D.substring(1)};const f=this.options.colorRange[parseInt(l[0],10)-1];if(Number.isNaN(f)||f==="NaN"||typeof f>"u"||f==="undefined")return"";let d=l[1];const p=parseInt(l[0],10);if(!d||d==="undefined"||typeof d>"u")return"";let m="NA";this.options.colorLabels&&(m=this.options.colorLabels[p]?this.options.colorLabels[p][0]:null,(!m||m==="undefined"||typeof m>"u")&&(m="NA"),d+=` | ${m}`);const g=this._xScale.invert(n);let v=null;if(this.options.chromInfo&&this.options.binSize){const D=Dr(g,this.options.chromInfo),R=D[0],w=Math.ceil(D[1]/this.options.binSize)*this.options.binSize-this.options.binSize;v=`${R}:${w}`}const _=l[1].split("|").map(D=>D.trim());c='<div class="track-mouseover-menu-table">',v&&(c+=`
        <div class="track-mouseover-menu-table-item">
          <label for="position" class="track-mouseover-menu-table-item-label">Position</label>
          <div name="position" class="track-mouseover-menu-table-item-value">${v}</div>
        </div>
        `);const y=h(_[1]),b=_.length===3&&_[1]!==_[2]?`(${_[2]})`:"";c+=`<div class="track-mouseover-menu-table-item">
        <label for="sampleName" class="track-mouseover-menu-table-item-label">Biosample</label>
        <div name="sampleName" class="track-mouseover-menu-table-item-value">${y} ${b}</div>
      </div>`;const T=_[0];c+=`<div class="track-mouseover-menu-table-item">
        <label for="sampleId" class="track-mouseover-menu-table-item-label">Identifier</label>
        <div name="sampleId" class="track-mouseover-menu-table-item-value">${T}</div>
      </div>`;const O=`<svg width="10" height="10" style="position:relative; top:-2px;"><rect width="10" height="10" rx="2" ry="2" style="fill:${f};stroke:black;stroke-width:2;"></svg> ${m}`;c+=`
        <div class="track-mouseover-menu-table-item">
          <label for="stateName" class="track-mouseover-menu-table-item-label">Chromatin state</label>
          <div name="stateName" class="track-mouseover-menu-table-item-value">${O}</div>
        </div>`,c+="</div>"}else if(this.options&&this.options.heatmapType&&this.options.heatmapType==="genericIndexDHS"){let h=null;if(this.options.heatmapComponents){h={};for(const[g,v]of Object.entries(this.options.heatmapComponents))h[v.longName]=v.color}l[0];const f=l[1].split("|").map(g=>g.trim()),d={normalizedDensity:l[0],taxonomyName:f[0],componentName:f[1]},p=this._xScale.invert(n);let m=null;if(this.options.chromInfo&&this.options.binSize){const g=Dr(p,this.options.chromInfo),v=g[0],_=Math.ceil(g[1]/this.options.binSize)*this.options.binSize-this.options.binSize;m=`${v}:${_}`}if(c+='<div class="track-mouseover-menu-table">',m&&(c+=`
        <div class="track-mouseover-menu-table-item">
          <label for="position" class="track-mouseover-menu-table-item-label">Position</label>
          <div name="position" class="track-mouseover-menu-table-item-value">${m}</div>
        </div>
        `),c+=`
        <div class="track-mouseover-menu-table-item">
          <label for="normalizedDensity" class="track-mouseover-menu-table-item-label">Normalized density</label>
          <div name="normalizedDensity" class="track-mouseover-menu-table-item-value">${d.normalizedDensity}</div>
        </div>
        <div class="track-mouseover-menu-table-item">
          <label for="taxonomyName" class="track-mouseover-menu-table-item-label">Taxonomy name</label>
          <div name="taxonomyName" class="track-mouseover-menu-table-item-value">${d.taxonomyName}</div>
        </div>`,h){const g=h[d.componentName],v=d.componentName,_=`<svg width="10" height="10"><rect width="10" height="10" rx="2" ry="2" style="fill:${g};stroke:black;stroke-width:2;"></svg> ${v}`;c+=`
          <div class="track-mouseover-menu-table-item">
            <label for="componentName" class="track-mouseover-menu-table-item-label">Component</label>
            <div name="componentName" class="track-mouseover-menu-table-item-value">${_}</div>
          </div>`}else c+=`
          <div class="track-mouseover-menu-table-item">
            <label for="componentName" class="track-mouseover-menu-table-item-label">Component</label>
            <div name="componentName" class="track-mouseover-menu-table-item-value">${d.componentName}</div>
          </div>`;c+="</div>"}else c+=`Data value: ${this.getVisibleData(n,o)}</br>`,c+=`Zoom level: ${s[0]} tile position: ${s[1]}`;return c}}]),r}(Hf);function HIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,FIe(i.key),i)}}function $Ie(e,t,r){return t&&yz(e.prototype,t),r&&yz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function FIe(e){var t=jIe(e,"string");return typeof t=="symbol"?t:String(t)}function jIe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ts(){return typeof Reflect<"u"&&Reflect.get?ts=Reflect.get.bind():ts=function(t,r,i){var n=UIe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},ts.apply(this,arguments)}function UIe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=wo(e),e!==null););return e}function GIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sI(e,t)}function sI(e,t){return sI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},sI(e,t)}function zIe(e){var t=YIe();return function(){var i=wo(e),n;if(t){var o=wo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return VIe(this,n)}}function VIe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WIe(e)}function WIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wo(e){return wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wo(e)}const qIe=it("#FFFFFF");let lI=function(e){GIe(r,e);var t=zIe(r);function r(...i){var n;return HIe(this,r),n=t.call(this,...i),n.zeroLine=new He.PIXI.Graphics,n.pMain.addChild(n.zeroLine),n.valueScaleTransform=fn,n.options&&n.options.colorRange&&(n.options.colorRangeGradient?n.setColorGradient(n.options.colorRange):n.setColorScale(n.options.colorRange)),n.initialized=!0,n}return $Ie(r,[{key:"setColorScale",value:function(n){n&&(this.colorScale=Ma(n),this.colorScale=this.colorScale.map(o=>o.map(a=>a/255)))}},{key:"setColorGradient",value:function(n){if(!n)return;const o=n.length-1;this.colorGradientColors=this.options.align==="bottom"?n.slice().reverse().map((a,s)=>({from:s/o,color:a})):n.map((a,s)=>({from:s/o,color:a}))}},{key:"initTile",value:function(n){this.initialized&&ts(wo(r.prototype),"initTile",this).call(this,n)}},{key:"updateTile",value:function(n){(!n.valueScale||!this.scale||this.scale.minValue!==n.scale.minValue||this.scale.maxValue!==n.scale.maxValue)&&this.renderTile(n)}},{key:"renderTile",value:function(n){this.initialized&&ts(wo(r.prototype),"renderTile",this).call(this,n)}},{key:"drawTile",value:function(n){if(!n.graphics||!n.tileData||!n.tileData.dense)return;const{graphics:o}=n;n.svgData=void 0;const{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),c=n.tileData.dense;if(c.length===0)return;const[u,l]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue(),0);u.clamp(!0),this.valueScale=u;const h=u.copy();if(h.range([254,0]).clamp(!0),o.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const f=it(this.options.lineStrokeColor||"blue"),d=bt().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([a,a+s]),p=0;o.lineStyle(p,f,1);const m=this.options.barFillColor||"grey",g=it(m),v="barOpacity"in this.options?this.options.barOpacity:1;o.beginFill(g,v),n.drawnAtScale=this._xScale.copy();const _=this.options.align==="top";let y,b,T,S,k,O;if(this.colorGradientColors){k=new He.PIXI.Graphics,k.beginFill(qIe,1);const D=z5(this.colorGradientColors,1,this.dimensions[1],0,0,0,this.dimensions[1]);O=new He.PIXI.Sprite(He.PIXI.Texture.fromCanvas(D,He.PIXI.SCALE_MODES.NEAREST)),O.x=this._xScale(a),O.width=this._xScale(a+s)-O.x}for(let D=0;D<c.length;D++)if(y=this._xScale(d(D)),T=this.valueScale(c[D]+l),b=this._xScale(d(D+1))-y,S=this.dimensions[1]-T,_&&(T=0),!(Number.isNaN(S)||S<0||T<0)){if(this.addSVGInfo(n,y,T,b,S,m),d(D)>this.tilesetInfo.max_pos[0])break;if(this.colorScale&&!this.options.colorRangeGradient){const R=Math.round(h(c[D]+l)),w=this.colorScale[R],L=He.PIXI.utils.rgb2hex(w);o.beginFill(L,v)}(k||o).drawRect(y,T,b,S)}this.colorGradientColors&&(O.mask=k,o.removeChildren(),o.addChild(O,k))}},{key:"destroyTile",value:function(n){n.graphics.destroy(!0)}},{key:"remove",value:function(){this.visibleAndFetchedTiles().forEach(n=>this.destroyTile(n))}},{key:"rerender",value:function(n,o){n&&n.colorRange&&(n.colorRangeGradient?this.setColorGradient(n.colorRange):this.setColorScale(n.colorRange)),ts(wo(r.prototype),"rerender",this).call(this,n,o)}},{key:"drawZeroLine",value:function(){this.zeroLine.clear();const n=it(this.options.barFillColor||"grey"),o=+this.options.barOpacity||1,a=this.options.zeroLineColor?it(this.options.zeroLineColor):n,s=Number.isNaN(+this.options.zeroLineOpacity)?o:+this.options.zeroLineOpacity;this.zeroLine.beginFill(a,s),this.zeroLine.drawRect(0,this.dimensions[1]-1,this.dimensions[0],1)}},{key:"drawZeroLineSvg",value:function(n){const o=document.createElement("rect"),a=Math.random().toString(36).substring(7);o.setAttribute("id",`zero-line-${a}`),o.setAttribute("x",0),o.setAttribute("y",this.dimensions[1]-1),o.setAttribute("height",1),o.setAttribute("width",this.dimensions[0]),o.setAttribute("fill",this.options.zeroLineColor||this.options.barFillColor),o.setAttribute("fill-opacity",this.options.zeroLineOpacity||this.options.barOpacity),n.appendChild(o)}},{key:"getXScaleAndOffset",value:function(n){const o=n.domain(),a=this._xScale.domain(),s=(o[1]-o[0])/(a[1]-a[0]),u=this._xScale.domain().map(n)[0];return[s,-u*s]}},{key:"draw",value:function(){this.initialized&&(ts(wo(r.prototype),"draw",this).call(this),this.zeroLine&&this.zeroLine._graphics&&this.options.zeroLineVisible?this.drawZeroLine():this.zeroLine&&this.zeroLine._graphics&&this.zeroLine.clear(),Object.values(this.fetchedTiles).forEach(n=>{if(!(!n||!n.graphics))try{const[o,a]=this.getXScaleAndOffset(n.drawnAtScale);n.graphics.scale.x=o,n.graphics.position.x=a}catch{}}))}},{key:"zoomed",value:function(n,o){ts(wo(r.prototype),"zoomed",this).call(this,n,o)}},{key:"movedY",value:function(n){}},{key:"zoomedY",value:function(n,o){}},{key:"addSVGInfo",value:function(n,o,a,s,c,u){n.svgData?(n.svgData.barXValues.push(o),n.svgData.barYValues.push(a),n.svgData.barWidths.push(s),n.svgData.barHeights.push(c),n.svgData.barColors.push(u)):n.svgData={barXValues:[o],barYValues:[a],barWidths:[s],barHeights:[c],barColors:[u]}}},{key:"exportSVG",value:function(){let n=null,o=null;[o,n]=ts(wo(r.prototype),"superSVG",this).call(this),o.setAttribute("class","exported-line-track");const a=document.createElement("g");n.appendChild(a),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.options.zeroLine&&this.drawZeroLineSvg(a),this.visibleAndFetchedTiles().filter(u=>u.svgData&&u.svgData.barXValues).forEach(u=>{const l=u.svgData;for(let h=0;h<l.barXValues.length;h++){const f=l.barColors[h],d=f.length===9?f.substring(0,f.length-2):f,p=f.length===9?parseFloat(parseInt(f.substring(f.length-2),16))/255:1,m=document.createElement("rect");m.setAttribute("fill",d),m.setAttribute("fill-opacity",p),m.setAttribute("x",l.barXValues[h]),m.setAttribute("y",l.barYValues[h]),m.setAttribute("height",l.barHeights[h]),m.setAttribute("width",l.barWidths[h]),u.barBorders&&(m.setAttribute("stroke-width","0.1"),m.setAttribute("stroke","black")),a.appendChild(m)}});const s=document.createElement("g"),c=Math.random().toString(36).substring(7);if(s.setAttribute("id",`axis-${c}`),o.appendChild(s),s.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const u=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const u=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}return[o,n]}}]),r}(Qf);function XIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ZIe(i.key),i)}}function KIe(e,t,r){return t&&bz(e.prototype,t),r&&bz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZIe(e){var t=QIe(e,"string");return typeof t=="symbol"?t:String(t)}function QIe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cI(e,t)}function cI(e,t){return cI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},cI(e,t)}function eCe(e){var t=nCe();return function(){var i=N_(e),n;if(t){var o=N_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return tCe(this,n)}}function tCe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rCe(e)}function rCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N_(e)}let _z=function(e){JIe(r,e);var t=eCe(r);function r(){return XIe(this,r),t.apply(this,arguments)}return KIe(r,[{key:"drawTile",value:function(n){this.renderTile(n)}},{key:"renderTile",value:function(n){if(!n.graphics)return;const o=n.graphics,{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension),c=n.tileData.dense;if(c.length===0)return;let u=0;if(this.valueScale=null,this.options.valueScaling==="log"){let y=this.medianVisibleValue;this.medianVisibleValue||(y=this.minValue()),this.valueScale=ys().domain([y,this.maxValue()+y]).range([this.dimensions[1],0]),u=y}else this.valueScale=bt().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(o.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const l=it(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),h=bt().domain([0,this.tilesetInfo.tile_size]).range([a,a+s]),f=0;o.lineStyle(f,l,1);const d=this.options.barFillColorTop?this.options.barFillColorTop:"green",p=this.options.barFillColorBottom?this.options.barFillColorBottom:"red",m=it(d),g=it(p),v="barOpacity"in this.options?this.options.barOpacity:1;n.drawnAtScale=this._xScale.copy();let _=0;this.options.valueScaling==="log"?_=this.valueScale(1):_=this.valueScale(0),delete n.svgData;for(let y=0;y<c.length;y++){const b=this._xScale(h(y)),T=this.valueScale(c[y]+u),S=this._xScale(h(y+1))-b;if(T>_?(o.beginFill(g,v),this.addSVGInfo(n,b,_,S,T-_,p)):(o.beginFill(m,v),this.addSVGInfo(n,b,T,S,_-T,d)),h(y)>this.tilesetInfo.max_pos[0])break;o.drawRect(b,n.svgData.barYValues[y],S,n.svgData.barHeights[y])}}}]),r}(lI);function iCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,aCe(i.key),i)}}function oCe(e,t,r){return t&&Tz(e.prototype,t),r&&Tz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aCe(e){var t=sCe(e,"string");return typeof t=="symbol"?t:String(t)}function sCe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R_(){return typeof Reflect<"u"&&Reflect.get?R_=Reflect.get.bind():R_=function(t,r,i){var n=lCe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},R_.apply(this,arguments)}function lCe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Jf(e),e!==null););return e}function cCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uI(e,t)}function uI(e,t){return uI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},uI(e,t)}function uCe(e){var t=dCe();return function(){var i=Jf(e),n;if(t){var o=Jf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return fCe(this,n)}}function fCe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hCe(e)}function hCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jf(e){return Jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jf(e)}let Ez=function(e){cCe(r,e);var t=uCe(r);function r(i,n){var o;return iCe(this,r),o=t.call(this,i,n),o.setColorScale(n.colorRange),o.opacity=n.opacity||1,o}return oCe(r,[{key:"setColorScale",value:function(n){this.colorScale=n?Ma(n):Mu,this.colorScale=this.colorScale.map(o=>o.map(a=>a/255))}},{key:"rerender",value:function(n){n&&n.colorRange&&this.setColorScale(n.colorRange),this.opacity=n.opacity||1,R_(Jf(r.prototype),"rerender",this).call(this,n)}},{key:"drawAxis",value:function(){}},{key:"drawTile",value:function(n){if(!n.graphics||!n.tileData||!n.tileData.dense)return;const o=n.graphics,{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(n.tileData.zoomLevel,n.tileData.tilePos),c=n.tileData.dense;if(c.length===0)return;const[u,l]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(u.range([254,0]).clamp(!0),this.valueScale=u,o.clear(),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const h=bt().domain([0,this.tilesetInfo.tile_size]).range([a,a+s]);o.lineStyle(0,0,0);for(let f=0;f<c.length;f++){if(Number.isNaN(c[f]))continue;const d=Math.round(this.valueScale(c[f]+l));if(Number.isNaN(+d))continue;const p=this._xScale(h(f)),m=this._xScale(h(f+1))-p,g=this.dimensions[1];n.xValues[f]=p,n.yValues[f]=d;const v=this.colorScale[d],_=He.PIXI.utils.rgb2hex(v);if(o.beginFill(_,this.opacity),f!==0){if(h(f)>this.tilesetInfo.max_pos[0])break;c[f]!==0&&o.drawRect(p,0,m,g)}}}}]),r}(Qf);function pCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,gCe(i.key),i)}}function mCe(e,t,r){return t&&Sz(e.prototype,t),r&&Sz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gCe(e){var t=vCe(e,"string");return typeof t=="symbol"?t:String(t)}function vCe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fI(e,t)}function fI(e,t){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},fI(e,t)}function bCe(e){var t=ECe();return function(){var i=M_(e),n;if(t){var o=M_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _Ce(this,n)}}function _Ce(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TCe(e)}function TCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ECe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M_(e){return M_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},M_(e)}let wz=function(e){yCe(r,e);var t=bCe(r);function r(i,n){var o;return pCe(this,r),o=t.call(this,i,n),o.seen=new Set,o.pMain=o.pMobile,o.rows=[],o}return mCe(r,[{key:"uid",value:function(n){return n[n.length-2]}},{key:"segmentOverlap",value:function(n,o){}},{key:"drawAll",value:function(n){this.pMain.clear();const o=new Set,a=n.map(c=>o.has(this.uid(c))?null:(o.add(this.uid(c)),{from:+c[1],to:+c[2],type:c[4],uid:this.uid(c)})).filter(c=>c),s=wy(a);this.rows=s,this.draw()}},{key:"draw",value:function(){const n=this.rows;if(!n)return;const o=cd().range([0,this.dimensions[1]]).padding(.1).domain(Vn(0,this.maxRows())),a=this.pMain;a.clear(),a.lineStyle(1,255,0),a.beginFill(16740363,.8);for(let s=0;s<n.length;s++)for(let c=0;c<n[s].length;c++){const u=n[s][c],l=this._refXScale(u.from),h=this._refXScale(u.to),f=o(s),d=f+o.bandwidth(),p=h-l,m=d-f;a.drawRect(l,f,p,m)}}},{key:"allTilesLoaded",value:function(){const o=this.visibleAndFetchedIds().map(s=>this.fetchedTiles[s].tileData.discrete),a=[].concat(...o);this.drawAll(a)}},{key:"initTile",value:function(n){}},{key:"maxRows",value:function(){return this.rows.length}},{key:"updateTile",value:function(n){}},{key:"destroyTile",value:function(n){n.tileData.discrete.forEach(o=>{const a=o[o.length-2];this.seen.has(a)&&this.seen.delete(a)})}},{key:"drawTile",value:function(n){}}]),r}($f);function SCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Az(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ACe(i.key),i)}}function wCe(e,t,r){return t&&Az(e.prototype,t),r&&Az(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ACe(e){var t=OCe(e,"string");return typeof t=="symbol"?t:String(t)}function OCe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let Oz=function(){function e(t){SCe(this,e),this.scene=t.scene,this.originalTrack=t,this.pBase=new He.PIXI.Graphics,this.scene.removeChild(t.pBase),this.scene.addChild(this.pBase),this.moveToOrigin=new He.PIXI.Graphics,this.moveToOrigin.addChild(t.pBase),this.pBase.addChild(this.moveToOrigin),this.moveToOrigin.rotation=Math.PI/2,t.isLeftModified=!0,t.flipText=!0,this.svgOutput=null,t.gBase&&t.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}return wCe(e,[{key:"remove",value:function(){this.originalTrack.remove(),this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"setDimensions",value:function(r){this.dimensions=r;const i=[r[1],r[0]];this.originalTrack.setDimensions(i)}},{key:"setPosition",value:function(r){this.position=r,this.originalTrack.setPosition(r),this.originalTrack.pBase.position.x=-this.originalTrack.position[0],this.originalTrack.pBase.position.y=-this.originalTrack.position[1],this.moveToOrigin.scale.y=-1,this.moveToOrigin.scale.x=1,this.moveToOrigin.position.x=this.originalTrack.position[0],this.moveToOrigin.position.y=this.originalTrack.position[1],this.originalTrack.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                                 rotate(90)
                                 scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}},{key:"refXScale",value:function(r){return arguments.length?(this.originalTrack._refXScale=r,this):this.originalTrack._refYScale}},{key:"refYScale",value:function(r){return arguments.length?(this.originalTrack._refYScale=r,this):this.originalTrack._refXScale}},{key:"xScale",value:function(r){return arguments.length?(this.originalTrack._yScale=r,this):this.originalTrack._xScale}},{key:"yScale",value:function(r){return arguments.length?(this.originalTrack._xScale=r,this):this.originalTrack._yScale}},{key:"getMouseOverHtml",value:function(r,i,n){return this.originalTrack.getMouseOverHtml(i,r,n)}},{key:"clickOutside",value:function(){this.originalTrack.clickOutside()}},{key:"click",value:function(...r){this.originalTrack.click(...r)}},{key:"draw",value:function(){this.originalTrack.draw()}},{key:"zoomed",value:function(r,i,n=1,o=0,a=0,s=0,c=0){if(this.xScale(r),this.yScale(i),this.originalTrack.leftTrackZoomed){this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackZoomed(r,i,n,o,a),this.originalTrack.draw();return}const u=this.originalTrack._xScale(0)-n*this.originalTrack._refXScale(0);if(this.originalTrack.pMobile.position.x=u+this.originalTrack.position[0],this.originalTrack.pMobile.position.y=this.originalTrack.position[1]+this.originalTrack.dimensions[1],this.originalTrack.pMobile.scale.x=n,this.originalTrack.pMobile.scale.y=n,this.originalTrack.options.oneDHeatmapFlipped&&(this.originalTrack.pMobile.scale.y=-n,this.originalTrack.pMobile.position.y=this.originalTrack.position[1]),this.originalTrack.leftTrackDraw){this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackDraw();return}this.originalTrack.zoomed(this.xScale(),this.yScale())}},{key:"zoomedY",value:function(r,i){this.originalTrack.zoomedY(r,i)}},{key:"movedY",value:function(r){this.originalTrack.movedY(r)}},{key:"refScalesChanged",value:function(r,i){this.originalTrack.refScalesChanged(i,r)}},{key:"rerender",value:function(r){this.originalTrack.rerender(r)}},{key:"exportSVG",value:function(){const r=document.createElement("g");if(r.setAttribute("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.exportSVG){const i=document.createElement("g");i.setAttribute("transform",`translate(${this.originalTrack.pBase.position.x}, ${this.originalTrack.pBase.position.y})`),i.appendChild(this.originalTrack.exportSVG()[0]),r.appendChild(i)}return[r,r]}},{key:"respondsToPosition",value:function(r,i){return r>=this.position[0]&&r<=this.dimensions[0]+this.position[0]&&i>=this.position[1]&&i<=this.dimensions[1]+this.position[1]}}]),e}();function kCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,CCe(i.key),i)}}function ICe(e,t,r){return t&&kz(e.prototype,t),r&&kz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function CCe(e){var t=PCe(e,"string");return typeof t=="symbol"?t:String(t)}function PCe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rs(){return typeof Reflect<"u"&&Reflect.get?rs=Reflect.get.bind():rs=function(t,r,i){var n=DCe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},rs.apply(this,arguments)}function DCe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ao(e),e!==null););return e}function xCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hI(e,t)}function hI(e,t){return hI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},hI(e,t)}function NCe(e){var t=LCe();return function(){var i=Ao(e),n;if(t){var o=Ao(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return RCe(this,n)}}function RCe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MCe(e)}function MCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ao(e){return Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ao(e)}const Iz=11,dI="Arial",Cz="outside",pI=10,BCe=4,HCe=20,$Ce=it("#ffffff"),L_=2,eh=2*(2*pI/3)/3,FCe=50,jCe=5e3,mI="blue",gI="red",vI=(e,t,r)=>{r.type!=="filler"&&t.pubSub.publish("app.click",{type:"gene-annotation",event:e,payload:r})},Pz=(e,t)=>{const r=e.concat(t),i=r.map(n=>[n.xStart,1,n.xEnd,1]);mm(i,(n,o)=>{let a=null,s=null;if(r[n].type==="filler"?a=r[n]:s=r[n],r[o].type==="filler"){if(a)return;a=r[o]}else{if(!a)return;s=r[o]}a.xStart>=s.xStart&&a.xEnd<=s.xEnd&&(a.hide=!0)})};function UCe(e,t,r){const{flipText:i,fontSize:n,fontFamily:o,plusStrandColor:a,minusStrandColor:s,maxGeneEntries:c,maxFillerEntries:u,maxTexts:l}=r;if(t.texts={},t.rectGraphics=new He.PIXI.Graphics,t.textBgGraphics=new He.PIXI.Graphics,t.textGraphics=new He.PIXI.Graphics,t.rectMaskGraphics=new He.PIXI.Graphics,t.graphics.addChild(t.rectGraphics),t.graphics.addChild(t.textBgGraphics),t.graphics.addChild(t.textGraphics),t.graphics.addChild(t.rectMaskGraphics),t.rectGraphics.mask=t.rectMaskGraphics,!t.tileData.sort)return;t.tileData.sort((d,p)=>p.importance-d.importance);const h=t.tileData.filter(d=>d.type!=="filler").slice(0,c),f=t.tileData.filter(d=>d.type==="filler").slice(0,u);t.tileData=h.concat(f),t.tileData.forEach((d,p)=>{if(d.type==="filler")return;const m=d.fields,g=m[3],v=e.geneId(m,d.type),_=d.strand||m[5];d.strand=d.strand||_;let y=a||mI;if(_==="-"&&(y=s||gI),t.textWidths={},t.textHeights={},p>=l)return;const b=new He.PIXI.Text(g,{fontSize:`${n}px`,fontFamily:o,fill:it(y)});b.interactive=!0,i&&(b.scale.x=-1),b.anchor.x=.5,b.anchor.y=1,t.texts[v]=b,t.texts[v].strand=_,t.textGraphics.addChild(b)}),t.initialized=!0}function Dz(e,t,r,i,n,o,a,s,c){const u=s-c/2,l=0;e.forEach(h=>{const f=new He.PIXI.Graphics;r.rectGraphics.addChild(f),f.beginFill(o,.1),f.lineStyle(0,o);const d=[n(h.xStart)-l,u,n(h.xEnd)+l,u,n(h.xEnd)+l,u+c,n(h.xStart)-l,u+c,n(h.xStart)-l,u];f.interactive=!0,f.buttonMode=!0,f.mouseup=p=>vI(p,t,h),f.drawPolygon(d),r.allRects.push([d,h.strand,h])})}function GCe(e,t,r,i,n,o,a,s,c,u){const l=s-c/2,h=n.split(",").map(b=>+b+a),f=o.split(",").map(b=>+b+a),d=e._xScale(r),p=e._xScale(i),m=p-d,g=s,v=[];let _=[d,g-L_/2,d+m,g-L_/2,d+m,g+L_/2,d,g+L_/2];t.drawPolygon(_),v.push(_);const y=2*c;for(let b=Math.max(e.position[0],d)+y;b<Math.min(e.position[0]+e.dimensions[0],d+m);b+=y)u==="+"?_=[b,g-eh/2,b+eh/2,g,b,g+eh/2]:_=[b,g-eh/2,b-eh/2,g,b,g+eh/2],v.push(_),t.drawPolygon(_);for(let b=0;b<h.length;b++){const T=h[b],S=f[b],k=e._xScale(T),O=Math.max(1,e._xScale(S)-e._xScale(T));let D=d,R=p;const w=e.geneRectHeight/2;let L=null;u==="+"?(R=p-w,L=[Math.min(k,R),l,Math.min(k+O,R),l,Math.min(k+O,R),l+c,Math.min(k,R),l+c,Math.min(k,R),l]):(D=d+w,L=[Math.max(k,D),l,Math.max(k+O,D),l,Math.max(k+O,D),l+c,Math.max(k,D),l+c,Math.max(k,D),l]),v.push(L),t.drawPolygon(L)}return v}function zCe(e,t,r,i,n,o,a,s,c){const u=s-c/2;e.forEach(l=>{const h=t._xScale(l.xStart),f=t._xScale(l.xEnd),d=new He.PIXI.Graphics;r.rectGraphics.addChild(d),d.beginFill(o,a),d.interactive=!0,d.buttonMode=!0,d.mouseup=g=>vI(g,t,l);const p=t.geneRectHeight/2;let m=[];if(l.strand==="+"||l.fields[5]==="+"){const g=Math.max(h,f-p),v=g+p;m=[g,u,v,u+t.geneRectHeight/2,g,u+t.geneRectHeight]}else{const g=Math.min(f,h+p),v=g-p;m=[g,u,v,u+t.geneRectHeight/2,g,u+t.geneRectHeight]}d.drawPolygon(m),r.allRects.push([m,l.strand,l])})}function VCe(e,t,r,i,n,o,a,s,c){e.forEach(u=>{const l=u.fields,h=+u.chrOffset,f=l[12],d=l[13],p=new He.PIXI.Graphics;r.rectGraphics.addChild(p),p.beginFill(o,a),p.interactive=!0,p.buttonMode=!0,p.mouseup=m=>vI(m,t,u),r.allRects=r.allRects.concat(GCe(t,p,u.xStart,u.xEnd,f,d,h,s,c,u.strand||u.fields[5]).map(m=>[m,u.strand,u]))})}function xz(e,t,r,i,n,o,a,s,c){zCe(e,t,r,i,n,o,a,s,c),VCe(e,t,r,i,n,o,a,s,c)}function WCe(e,t){const{tileX:r,tileWidth:i}=fc.getTilePosAndDimensions(e.tilesetInfo,t.tileId);t.rectMaskGraphics.clear();const n=Math.floor(Math.random()*16**6);t.rectMaskGraphics.beginFill(n,.3);const o=e._xScale(r),a=0,s=e._xScale(r+i)-e._xScale(r),c=e.dimensions[1];t.rectMaskGraphics.drawRect(o,a,s,c)}let yI=function(e){xCe(r,e);var t=NCe(r);function r(i,n){var o;kCe(this,r),o=t.call(this,i,n);const{animate:a}=i;return o.animate=a,o.options=n,o.fontSize=+o.options.fontSize||Iz,o.geneLabelPos=o.options.geneLabelPosition||Cz,o.geneRectHeight=+o.options.geneAnnotationHeight||pI,o.geneRectHeight-=2,o.geneStrandSpacing=+o.options.geneStrandSpacing||BCe,o.geneStrandHSpacing=o.geneStrandSpacing/2,o.geneRectHHeight=o.geneRectHeight/2,o}return ICe(r,[{key:"initTile",value:function(n){UCe(this,n,{flipText:this.flipText,fontSize:this.fontSize,fontFamily:dI,plusStrandColor:this.options.plusStrandColor,minusStrandColor:this.options.minusStrandColor,maxGeneEntries:FCe,maxFillerEntries:jCe,maxTexts:HCe}),this.renderTile(n)}},{key:"destroyTile",value:function(n){n.rectGraphics.destroy(),n.rectMaskGraphics.destroy(),n.textGraphics.destroy(!0),n.textBgGraphics.destroy(),n.graphics.destroy()}},{key:"remove",value:function(){this.visibleTileIds&&this.removeTiles([...this.visibleTileIds])}},{key:"rerender",value:function(n,o){const a=JSON.stringify(n);!o&&a===this.prevOptions||(rs(Ao(r.prototype),"rerender",this).call(this,n,o),this.fontSize=+this.options.fontSize||Iz,this.geneLabelPos=this.options.geneLabelPosition||Cz,this.geneRectHeight=+this.options.geneAnnotationHeight||pI,this.geneStrandHSpacing=this.geneStrandSpacing/2,this.geneRectHHeight=this.geneRectHeight/2,this.prevOptions=a,this.visibleAndFetchedTiles().forEach(s=>{this.renderTile(s)}))}},{key:"drawTile",value:function(){}},{key:"geneId",value:function(n,o){return`${o}_${n[0]}_${n[1]}_${n[2]}_${n[3]}`}},{key:"renderTile",value:function(n){if(!n.initialized)return;n.allRects=[],n.drawnAtScale=this._xScale.copy(),n.rectGraphics.removeChildren(),n.rectGraphics.clear(),n.textBgGraphics.clear();const o={},a=.3,s=.3;o["+"]=it(this.options.plusStrandColor||mI),o["-"]=it(this.options.minusStrandColor||gI);let c=n.tileData.filter(v=>v.type==="filler"&&v.strand==="+"),u=n.tileData.filter(v=>v.type==="filler"&&v.strand==="-");const l=n.tileData.filter(v=>v.type!=="filler"&&(v.strand==="+"||v.fields[5]==="+")),h=n.tileData.filter(v=>v.type!=="filler"&&(v.strand==="-"||v.fields[5]==="-"));Pz(l,c),Pz(h,u),c=c.filter(v=>!v.hide),u=u.filter(v=>!v.hide);const f=this.dimensions[1]/2,d=f-this.geneRectHeight/2-this.geneStrandSpacing/2,p=f+this.geneRectHeight/2+this.geneStrandSpacing/2,m=[this,n,n.rectGraphics,this._xScale,o["+"],a,d,this.geneRectHeight],g=[this,n,n.rectGraphics,this._xScale,o["-"],a,p,this.geneRectHeight];Dz(c,...m),Dz(u,...g),m[5]=s,g[5]=s,xz(l,...m),xz(h,...g),WCe(this,n),fc.stretchRects(this,[v=>v.rectGraphics,v=>v.rectMaskGraphics]);for(const v of Object.values(n.texts))v.style={fontSize:`${this.fontSize}px`,FONT_FAMILY:dI,fill:it(v.strand==="-"?this.options.minusStrandColor||gI:this.options.plusStrandColor||mI)}}},{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let o=Math.min(n,this.maxZoom);return o=Math.max(o,0),o}},{key:"draw",value:function(){rs(Ao(r.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];const n=[];this.geneAreaHeight=this.geneRectHeight;const o=this.fontSize/2;fc.stretchRects(this,[a=>a.rectGraphics,a=>a.rectMaskGraphics]),Object.values(this.fetchedTiles).filter(a=>a.drawnAtScale).forEach(a=>{try{if(!a.textBgGraphics)return;a.textBgGraphics.clear(),a.textBgGraphics.beginFill(typeof this.options.labelBackgroundColor<"u"?it(this.options.labelBackgroundColor):$Ce);const s=this.parentInFetched(a);if(!a.initialized)return;a.tileData.forEach(c=>{if(!a.texts||c.type==="filler")return;const u=c.fields,l=u[3],h=this.geneId(u,c.type),f=a.texts[h];if(!f)return;const d=+c.chrOffset,p=+u[1]+d,m=+u[2]+d,g=(p+m)/2;let v=this.dimensions[1]/2;const _=(this.geneAreaHeight-this.fontSize)/2;if(u[5]==="+"?v-=this.geneLabelPos==="inside"?_+this.geneStrandSpacing-2:this.fontSize/2+this.geneAreaHeight-2:v+=this.geneLabelPos==="inside"?this.fontSize+this.geneStrandSpacing/2+_+1:1.5*this.fontSize+this.geneAreaHeight+2,f.position.x=this._xScale(g),f.position.y=v,!a.textWidths[h])try{if(f&&f.getBounds){const y=f.getBounds().width,b=f.getBounds().height;a.textHeights[h]=b,a.textWidths[h]=y}}catch{a.textHeights[h]=0,a.textWidths[h]=0}if(s)f.visible=!1;else{f.visible=!0;const y=2;this.flipText?this.allBoxes.push([f.position.x-a.textHeights[h]/2-y,v-o-1,f.position.x+a.textHeights[h]/2+y,v+o-1,l]):this.allBoxes.push([f.position.x-a.textWidths[h]/2-y,v-o-1,f.position.x+a.textWidths[h]/2+y,v+o-1,l]),this.allTexts.push({importance:+u[4],text:f,caption:l,strand:u[5]}),n.push(a.textBgGraphics)}})}catch{}}),this.hideOverlaps(this.allBoxes,this.allTexts),this.renderTextBg(this.allBoxes,this.allTexts,n)}},{key:"renderTextBg",value:function(n,o,a){o.forEach((s,c)=>{if(s.text.visible&&n[c]&&a[c]){const[u,l,h,f]=n[c],d=h-u,p=f-l;a[c].drawRect(u-d/2,l-p/2,d,p)}})}},{key:"hideOverlaps",value:function(n,o){mm(n,(a,s)=>{o[a].importance>o[s].importance?o[s].text.visible=!1:o[a].text.visible=!1})}},{key:"setPosition",value:function(n){rs(Ao(r.prototype),"setPosition",this).call(this,n),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(n){rs(Ao(r.prototype),"setDimensions",this).call(this,n),this.halfRectHHeight=this.dimensions[1]/2,this.visibleAndFetchedTiles().forEach(o=>{this.renderTile(o)})}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.refreshTiles(),this.draw()}},{key:"getMouseOverHtml",value:function(n,o,a){if(!this.tilesetInfo||!this.options.showTooltip&&!a)return"";const s=[n,o];for(const c of this.visibleAndFetchedTiles())for(let u=0;u<c.allRects.length;u++){if(c.allRects[u][2].type==="filler")continue;const l=c.allRects[u][0].slice(0),h=[];for(;l.length;){const d=l.splice(0,2);d[0]=d[0]*c.rectGraphics.scale.x+c.rectGraphics.position.x,d[1]=d[1]*c.rectGraphics.scale.y+c.rectGraphics.position.y,h.push(d)}if(iz(h,s)===-1){const d=c.allRects[u][2];let p='<div class="track-mouseover-menu-table">',m=d.fields.length>=4?`${d.fields[3]}`:null;m&&(p+=`
            <div class="track-mouseover-menu-table-item">
              <label for="name" class="track-mouseover-menu-table-item-label">Name</label>
              <div name="name" class="track-mouseover-menu-table-item-value">${m}</div>
            </div>
            `);let g=d.fields.length>=6?`${d.fields[5]}`:null,v=d.fields.length>=3?g?`${d.fields[0]}:${d.fields[1]}-${d.fields[2]} (${g})`:`${d.fields[0]}:${d.fields[1]}-${d.fields[2]}`:null;return v&&(p+=`
            <div class="track-mouseover-menu-table-item">
              <label for="position" class="track-mouseover-menu-table-item-label">Position</label>
              <div name="position" class="track-mouseover-menu-table-item-value">${v}</div>
            </div>
            `),p}}return""}},{key:"exportSVG",value:function(){let n=null,o=null;rs(Ao(r.prototype),"exportSVG",this)?[o,n]=rs(Ao(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");return a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),n.appendChild(a),this.visibleAndFetchedTiles().filter(s=>s.allRects).forEach(s=>{const c=document.createElement("g");c.setAttribute("transform",`translate(${s.rectGraphics.position.x},
          ${s.rectGraphics.position.y})
          scale(${s.rectGraphics.scale.x},
          ${s.rectGraphics.scale.y})`),s.allRects.forEach(u=>{const l=document.createElement("path"),h=u[0];let f=`M ${h[0]} ${h[1]}`;for(let d=2;d<h.length;d+=2)f+=` L ${h[d]} ${h[d+1]}`;l.setAttribute("d",f),u[1]==="+"?l.setAttribute("fill",this.options.plusStrandColor):l.setAttribute("fill",this.options.minusStrandColor),l.setAttribute("opacity","0.3"),c.appendChild(l)}),a.appendChild(c)}),this.allTexts.filter(s=>s.text.visible).forEach(s=>{const c=document.createElement("g"),u=document.createElement("text");u.setAttribute("text-anchor","middle"),u.setAttribute("font-family",dI),u.setAttribute("font-size",`${this.fontSize}px`),u.setAttribute("dy","-.2em"),c.setAttribute("transform",`scale(${s.text.scale.x},1)`),s.strand==="+"?u.setAttribute("fill",this.options.plusStrandColor):u.setAttribute("fill",this.options.minusStrandColor),u.innerHTML=s.text.text,c.appendChild(u),c.setAttribute("transform",`translate(${s.text.x},${s.text.y})scale(${s.text.scale.x},1)`),a.appendChild(c)}),[o,o]}}]),r}($f);it("#ffffff");function YCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,XCe(i.key),i)}}function qCe(e,t,r){return t&&Nz(e.prototype,t),r&&Nz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XCe(e){var t=KCe(e,"string");return typeof t=="symbol"?t:String(t)}function KCe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kc(){return typeof Reflect<"u"&&Reflect.get?kc=Reflect.get.bind():kc=function(t,r,i){var n=ZCe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},kc.apply(this,arguments)}function ZCe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ns(e),e!==null););return e}function QCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bI(e,t)}function bI(e,t){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},bI(e,t)}function JCe(e){var t=rPe();return function(){var i=ns(e),n;if(t){var o=ns(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ePe(this,n)}}function ePe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tPe(e)}function tPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rPe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ns(e){return ns=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ns(e)}function Rz(e,t,r,i,n,o,a,s,c,u){const l=u?e._xScale(r.yStart):e._xScale(r.xStart),h=u?e._xScale(r.yEnd):e._xScale(r.xEnd),f=u?e._yScale(r.xStart):e._yScale(r.yStart),d=u?e._yScale(r.xEnd):e._yScale(r.yEnd),p=r.uid+u,m=h-l,g=d-f;let v={x:l,y:f,width:m,height:g};i&&(m<i||g<i)&&(v={x:l-i/2,y:f-i/2,width:i,height:i}),e.drawnRects[p]=v;const _=v.x+v.width,y=v.y+v.height;(v.x>n&&v.x<o||_>n&&_<o||v.y>a&&v.y<s||y>a&&y<s)&&(v.width>c||v.height>c)&&(t.drawRect(v.x,v.y,v.width,v.height),e.publish("annotationDrawn",{trackUuid:e.uuid,annotationUuid:p,viewPos:[v.x,v.y,v.width,v.height],dataPos:[r.xStart,r.xEnd,r.yStart,r.yEnd],importance:r.importance,info:{patternType:e.options.patternType}}))}let Mz=function(e){QCe(r,e);var t=JCe(r);function r(...i){var n;YCe(this,r),n=t.call(this,...i),n.drawnRects={};const{publish:o,subscribe:a,unsubscribe:s}=Uv();return n.publish=o,n.subscribe=a,n.unsubscribe=s,n}return qCe(r,[{key:"tileToLocalId",value:function(n){return`${n.join(".")}`}},{key:"tileToRemoteId",value:function(n){return`${n.join(".")}`}},{key:"localToRemoteId",value:function(n){const o=n.split(".");return o.slice(0,o.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let a=Math.max(n,o);return a=Math.min(a,this.maxZoom),a}},{key:"setVisibleTiles",value:function(n){this.visibleTiles=n.map(o=>({tileId:this.tileToLocalId(o),remoteId:this.tileToRemoteId(o)})),this.visibleTileIds=new Set(this.visibleTiles.map(o=>o.remoteId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=at.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=at.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const n=this.xTiles,o=this.yTiles,a=this.zoomLevel,s=[];for(let c=0;c<n.length;c++)for(let u=0;u<o.length;u++){const l=[a,n[c],o[u]];s.push(l)}this.setVisibleTiles(s)}},{key:"initTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"draw",value:function(){this.drawnRects={},kc(ns(r.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(n){const o=n.graphics;if(!o)return;o.clear();const a=it(this.options.rectangleDomainStrokeColor||"black"),s=it(this.options.rectangleDomainFillColor||"grey");o.lineStyle(typeof this.options.rectangleDomainStrokeWidth<"u"?this.options.rectangleDomainStrokeWidth:1,a,typeof this.options.rectangleDomainStrokeOpacity<"u"?this.options.rectangleDomainStrokeOpacity:1),o.beginFill(s,typeof this.options.rectangleDomainFillOpacity<"u"?this.options.rectangleDomainFillOpacity:.4),o.alpha=this.options.rectangleDomainOpacity||.5;const c=this.options.minSquareSize&&this.options.minSquareSize!=="none"?+this.options.minSquareSize:0,u=this.options.rectangleMinSize?+this.options.rectangleMinSize:0,l=this._xScale.range()[0],h=this._xScale.range()[1],f=this._yScale.range()[0],d=this._yScale.range()[1];n.tileData.length&&n.tileData.filter(p=>!(p.uid in this.drawnRects)).forEach(p=>{Rz(this,o,p,c,l,h,f,d,u,this.options.flipDiagonal==="yes"),this.options.flipDiagonal&&this.options.flipDiagonal==="copy"&&Rz(this,o,p,c,l,h,f,d,u,!0)})}},{key:"exportSVG",value:function(){let n=null,o=null;kc(ns(r.prototype),"exportSVG",this)?[o,n]=kc(ns(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),n.appendChild(a);for(const s of[!0,!1])for(const c of this.visibleAndFetchedTiles())!c.tileData||!c.tileData.length||c.tileData.forEach(u=>{const l=u.uid+s,h=document.createElement("g");if(h.setAttribute("transform",`translate(${c.graphics.position.x},${c.graphics.position.y})scale(${c.graphics.scale.x},${c.graphics.scale.y})`),a.appendChild(h),l in this.drawnRects){const f=this.drawnRects[l],d=document.createElement("rect");d.setAttribute("x",f.x),d.setAttribute("y",f.y),d.setAttribute("width",f.width),d.setAttribute("height",f.height),d.setAttribute("fill",this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey"),d.setAttribute("opacity",.3),d.style.stroke="black",d.style.strokeWidth="1px",h.appendChild(d)}});return[o,o]}},{key:"setPosition",value:function(n){kc(ns(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(n,o){this.xScale().domain()[0]===n.domain()[0]&&this.xScale().domain()[1]===n.domain()[1]&&this.yScale().domain()[0]===o.domain()[0]&&this.yScale().domain()[1]===o.domain()[1]||(this.xScale(n),this.yScale(o),this.refreshTiles(),this.draw())}},{key:"leftTrackDraw",value:function(){this.draw()}}]),r}(qa);function nPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oPe(i.key),i)}}function iPe(e,t,r){return t&&Lz(e.prototype,t),r&&Lz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oPe(e){var t=aPe(e,"string");return typeof t=="symbol"?t:String(t)}function aPe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ic(){return typeof Reflect<"u"&&Reflect.get?Ic=Reflect.get.bind():Ic=function(t,r,i){var n=sPe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Ic.apply(this,arguments)}function sPe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=is(e),e!==null););return e}function lPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_I(e,t)}function _I(e,t){return _I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},_I(e,t)}function cPe(e){var t=fPe();return function(){var i=is(e),n;if(t){var o=is(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return uPe(this,n)}}function uPe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bz(e)}function Bz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fPe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function is(e){return is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},is(e)}const hPe=250;let Hz=function(e){lPe(r,e);var t=cPe(r);function r(i,n){var o;nPe(this,r),o=t.call(this,i,n);const{pubSub:a}=i;o.drawnAnnotations={},o.drawnAnnoGfx={},o.selectedAnno=null,o.options.minSquareSize=+o.options.minSquareSize;const{publish:s,subscribe:c,unsubscribe:u}=Uv();return o.publish=s,o.subscribe=c,o.unsubscribe=u,o.sT=0,o.annoSelectedBound=o.annoSelected.bind(Bz(o)),o.pubSubs.push(a.subscribe("annoSelected",o.annoSelectedBound)),o}return iPe(r,[{key:"minX",get:function(){return this.tilesetInfo&&this.tilesetInfo.min_pos?this.tilesetInfo.min_pos[0]:0}},{key:"maxX",get:function(){return this.tilesetInfo&&this.tilesetInfo.max_pos?this.tilesetInfo.max_pos[0]:this.tilesetInfo.max_width||this.tilesetInfo.max_size}},{key:"minY",get:function(){return this.minX}},{key:"maxY",get:function(){return this.maxX}},{key:"maxSize",get:function(){const i=this.tilesetInfo.max_pos&&Math.max(this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1]);return i||(this.tilesetInfo.max_size?this.tilesetInfo.max_size:0)}},{key:"projection",value:function([n,o]){return[this._xScale(n),this._yScale(o)]}},{key:"tileToLocalId",value:function(n){return`${n.join(".")}`}},{key:"tileToRemoteId",value:function(n){return`${n.join(".")}`}},{key:"localToRemoteId",value:function(n){const o=n.split(".");return o.slice(0,o.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._xScale,this.minX,this.maxX),o=at.calculateZoomLevel(this._yScale,this.minY,this.maxY);return Z5(cw(n,o),this.maxZoom)}},{key:"setVisibleTiles",value:function(n){this.visibleTiles=n.map(o=>({tileId:this.tileToLocalId(o),remoteId:this.tileToRemoteId(o)})),this.visibleTileIds=new Set(this.visibleTiles.map(o=>o.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=at.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.tilesetInfo.max_zoom,this.maxSize),this.yTiles=at.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.tilesetInfo.max_zoom,this.maxSize);const n=this.zoomLevel,o=[];for(let a=0;a<this.xTiles.length;a++)for(let s=0;s<this.yTiles.length;s++)o.push([n,this.xTiles[a],this.yTiles[s]]);this.setVisibleTiles(o)}},{key:"draw",value:function(){this.drawnAnnotations={},Ic(is(r.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(n,o=!1,a=!1){if(!n.graphics)return;n.graphics.__tile__=n;const s=n.graphics;s.clear(),this.setBorderStyle(s),this.setFill(s),s.alpha=+this.options.rectangleDomainOpacity,n.tileData.length&&n.tileData.filter(c=>!(c.uid in this.drawnAnnotations)||o).forEach(c=>{const[u,l]=this.projection([c.xStart,c.yStart]),[h,f]=this.projection([c.xEnd,c.yEnd]);this.options.exclude&&this.options.exclude.indexOf(c.uid)>=0||this.drawAnnotation(this.prepAnnotation(s,c.uid,u,l,h-u,f-l,c),a)})}},{key:"prepAnnotation",value:function(n,o,a,s,c,u,l){let h;try{h=JSON.parse(l.fields)}catch{}return{graphics:n,id:l.id,uid:o,annotation:{x:a,y:s,width:c,height:u},dataPos:[l.xStart,l.xEnd,l.yStart,l.yEnd],importance:l.importance,info:h}}},{key:"drawAnnotation",value:function({graphics:n,id:o,uid:a,annotation:s,dataPos:c,importance:u,info:l},h){this.options.minSquareSize&&(s.width<this.options.minSquareSize||s.height<this.options.minSquareSize)&&(s.x=(s.x+s.width)/2,s.y=(s.y+s.height)/2,s.width=this.options.minSquareSize,s.height=this.options.minSquareSize),this.drawnAnnotations[a]=s;const f=[s.x,s.y,s.width,s.height];let d=this.drawnAnnoGfx[a];d||(d=new He.PIXI.Graphics,this.drawnAnnoGfx[a]=d),n.children.indexOf(d)===-1&&n.addChild(d),this._drawRect(d,f,a),n.interactive=!0,d.interactive=!0,d.buttonMode=!0;const p={id:o,uid:a,dataPos:c,importance:u,info:l,viewPos:[s.x,s.y,s.x+s.width,s.y+s.height]};d.mouseover=()=>this.hover(d,f,a),d.mouseout=()=>this.blur(d,f,a),d.mousedown=()=>this.mouseDown(),d.mouseup=m=>this.mouseUp(d,f,a,m,p),h||this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:a,annotationId:o,viewPos:f,dataPos:c,importance:u,info:l})}},{key:"_drawRect",value:function(n,o,a){let s=this.options.rectangleDomainStrokeColor,c=this.options.rectangleDomainStrokeWidth,u=this.options.rectangleDomainStrokeOpacity,l=this.options.rectangleDomainFillColor,h=this.options.rectangleDomainFillOpacity;this.hoveredAnno===a&&(s=this.options.hoverColor,c=this.options.rectangleDomainStrokeWidth+1||2,u=1,l=this.options.hoverColor,h=this.options.rectangleDomainFillOpacity),this.selectedAnno&&this.selectedAnno.uid===a&&(s=this.options.selectColor,c=this.options.rectangleDomainStrokeWidth+1||2,u=1,l=this.options.selectColor,h=cw(.33,this.options.rectangleDomainFillOpacity)),n.clear(),this.options.trackBorderBgWidth&&(this.setBorderStyle(n,this.options.trackBorderBgColor,this.options.trackBorderBgWidth,this.options.trackBorderBgAlpha),this.setFill(n,l,0),n.drawRect(...o)),this.setBorderStyle(n,s,c,u),this.setFill(n,l,h),n.drawRect(...o),n.__viewPos__=o}},{key:"context",value:function(n,o,a){return s=>s(n,o,a)}},{key:"click",value:function(n,o,a,s,c){this.select(n,o,a),this.pubSub.publish("app.click",{type:"annotation",event:s,payload:c})}},{key:"mouseDown",value:function(){this.sT=performance.now()}},{key:"mouseUp",value:function(n,o,a,s,c){performance.now()-this.sT<=hPe&&this.click(n,o,a,s,c)}},{key:"hover",value:function(n,o,a){this.hoveredAnno=a,this._drawRect(n,o,a),this.animate()}},{key:"focus",value:function(n,o,a){this._drawRect(n,o,a),this.animate()}},{key:"blur",value:function(n,o,a){this.hoveredAnno=null,this._drawRect(n,o,a),this.animate()}},{key:"select",value:function(n,o,a,s=!1){let c=null,u=null;this.selectedAnno&&(c=this.selectedAnno.graphics,u=this.selectedAnno.uid),this.selectedAnno={graphics:n,uid:a},this.focus(n,o,a),this.options.onSelect&&!s&&(window[this.options.onSelect](a),this.pubSub.publish("annoSelected",a)),c&&u&&this.blur(c,c.__viewPos__,u)}},{key:"unselect",value:function(){const n=this.selectedAnno.graphics,o=this.selectedAnno.uid;this.selectedAnno=null,this.blur(n,n.__viewPos__,o)}},{key:"annoSelected",value:function(n){if(!this.selectedAnno||this.selectedAnno.uid!==n){this.selectedAnno&&this.unselect();const o=this.drawnAnnoGfx[n];o&&this.select(o,o.__viewPos__,n,!0)}}},{key:"exportSVG",value:function(){let n=null,o=null;Ic(is(r.prototype),"exportSVG",this)?[o,n]=Ic(is(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");return a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),n.appendChild(a),this.visibleAndFetchedTiles().filter(s=>s.tileData&&s.tileData.length).map(s=>({graphics:s.graphics,td:s.tileData})).forEach(({td:s,graphics:c})=>{const u=document.createElement("g");if(u.setAttribute("transform",`translate(${c.position.x},${c.position.y})scale(${c.scale.x},${c.scale.y})`),a.appendChild(u),s.uid in this.drawnAnnotations){const l=this.drawnAnnotations[s.uid],h=document.createElement("rect");h.setAttribute("x",l.x),h.setAttribute("y",l.y),h.setAttribute("width",l.width),h.setAttribute("height",l.height),h.setAttribute("fill",this.options.fillColor||"grey"),h.setAttribute("opacity",.3),h.style.stroke=this.options.fillColor||"grey",h.style.strokeWidth="1px",u.appendChild(h)}}),[o,o]}},{key:"setBorderStyle",value:function(n,o=this.options.rectangleDomainStrokeColor,a=this.options.rectangleDomainStrokeWidth,s=this.options.rectangleDomainStrokeOpacity){n.lineStyle(typeof a<"u"?a:1,it(o||"black"),typeof s<"u"?s:1)}},{key:"setFill",value:function(n,o=this.options.rectangleDomainFillColor,a=this.options.rectangleDomainFillOpacity){n.beginFill(it(o||"grey"),typeof a<"u"?a:.4)}},{key:"setPosition",value:function(n){Ic(is(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.refreshTiles(),this.draw()}}]),r}(qa);function dPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $z(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,mPe(i.key),i)}}function pPe(e,t,r){return t&&$z(e.prototype,t),r&&$z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mPe(e){var t=gPe(e,"string");return typeof t=="symbol"?t:String(t)}function gPe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vm(){return typeof Reflect<"u"&&Reflect.get?vm=Reflect.get.bind():vm=function(t,r,i){var n=vPe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},vm.apply(this,arguments)}function vPe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Cc(e),e!==null););return e}function yPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TI(e,t)}function TI(e,t){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},TI(e,t)}function bPe(e){var t=EPe();return function(){var i=Cc(e),n;if(t){var o=Cc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _Pe(this,n)}}function _Pe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TPe(e)}function TPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EPe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cc(e){return Cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cc(e)}let EI=function(e){yPe(r,e);var t=bPe(r);function r(i,n,o){var a;return dPe(this,r),a=t.call(this,i,n),a.pubSub=i.pubSub,a.options=n,a.isVertical=o,a.rects={},a.defaultColor=Qr("red"),a}return pPe(r,[{key:"draw",value:function(){const n=typeof this.options.minRectWidth<"u"?this.options.minRectWidth:10,o=typeof this.options.fill<"u"?Qr(this.options.fill):this.defaultColor,a=typeof this.options.fillOpacity<"u"?+this.options.fillOpacity:.2,s=typeof this.options.stroke<"u"?Qr(this.options.stroke):this.defaultColor,c=typeof this.options.strokeWidth<"u"?+this.options.strokeWidth:1,u=typeof this.options.strokeOpacity<"u"?+this.options.strokeOpacity:0;let l;this.options.strokePos&&this.options.strokePos.length&&(l=Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]),vm(Cc(r.prototype),"draw",this).call(this);const h=this.pMain;h.clear();const f=performance.now();this.options.regions.forEach(d=>{const p=`${d[0]}-${d[1]}`;this.rects[p]||(this.rects[p]={graphics:new He.PIXI.Graphics},h.addChild(this.rects[p].graphics)),this.rects[p].timeStamp=f;const m=Qr(d[2])||o;let g=Qr(d[3])||s;g||(g=m);const v=He.PIXI.utils.rgb2hex([m.r/255,m.g/255,m.b/255]),_=He.PIXI.utils.rgb2hex([g.r/255,g.g/255,g.b/255]);l?(h.lineStyle(1,_,0),h.beginFill(_,+d[5]||u)):(h.lineStyle(c,_,+d[5]||u),h.beginFill(v,+d[4]||a));const y=this.isVertical?this._yScale:this._xScale;let b=y(+d[0]);const T=y(+d[1]);let S=T-b;const k=typeof d[6]<"u"?d[6]:n;S<k&&(b=(b+T)/2-k/2,S=k),l?(h.lineStyle(1,_,0),h.beginFill(_,+d[5]||u),l.forEach(O=>{(O==="top"||O==="around")&&(this.isVertical?h.drawRect(0,b,c,S):h.drawRect(b,0,S,c)),(O==="right"||O==="around")&&(this.isVertical?h.drawRect(0,b,this.dimensions[0],c):h.drawRect(b,0,c,this.dimensions[1])),(O==="bottom"||O==="around")&&(this.isVertical?h.drawRect(this.dimensions[0]-c,b,c,S):h.drawRect(b,this.dimensions[1]-c,S,c)),(O==="left"||O==="around")&&(this.isVertical?h.drawRect(0,b+S-c,this.dimensions[0],c):h.drawRect(b+S-c,0,c,this.dimensions[1]))})):h.lineStyle(c,_,+d[5]||u),this.rects[p].graphics.clear(),this.rects[p].graphics.interactive=!0,this.rects[p].graphics.buttonMode=!0,h.beginFill(v,+d[4]||a),this.isVertical?(h.drawRect(0,b,this.dimensions[0],S),this.rects[p].graphics.hitArea=new He.PIXI.Rectangle(0,b,this.dimensions[0],S)):(h.drawRect(b,0,S,this.dimensions[1]),this.rects[p].graphics.hitArea=new He.PIXI.Rectangle(b,0,S,this.dimensions[1])),this.rects[p].graphics.mousedown=()=>{this.rects[p].mouseDownTime=performance.now()},this.rects[p].graphics.mouseup=O=>{performance.now()-this.rects[p].mouseDownTime<o5&&this.pubSub.publish("app.click",{type:"annotation",event:O,payload:d})}}),Object.values(this.rects).filter(d=>d.timeStamp!==f).forEach(d=>h.removeChild(d.graphics))}},{key:"setPosition",value:function(n){vm(Cc(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}}]),r}(jn);function SPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,APe(i.key),i)}}function wPe(e,t,r){return t&&Fz(e.prototype,t),r&&Fz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function APe(e){var t=OPe(e,"string");return typeof t=="symbol"?t:String(t)}function OPe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qs(){return typeof Reflect<"u"&&Reflect.get?qs=Reflect.get.bind():qs=function(t,r,i){var n=kPe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},qs.apply(this,arguments)}function kPe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=la(e),e!==null););return e}function IPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SI(e,t)}function SI(e,t){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},SI(e,t)}function CPe(e){var t=xPe();return function(){var i=la(e),n;if(t){var o=la(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return PPe(this,n)}}function PPe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DPe(e)}function DPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xPe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function la(e){return la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},la(e)}let jz=function(e){IPe(r,e);var t=CPe(r);function r(i,n){var o;return SPe(this,r),o=t.call(this,i,n),o.drawnRects=new Set,o.pMain=o.pMobile,o}return wPe(r,[{key:"tileToLocalId",value:function(n){return`${n.join(".")}`}},{key:"tileToRemoteId",value:function(n){return`${n.join(".")}`}},{key:"localToRemoteId",value:function(n){const o=n.split(".");return o.slice(0,o.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let a=Math.max(n,o);return a=Math.min(a,this.maxZoom),this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?a=Math.min(this.options.maxZoom,a):console.error("Invalid maxZoom on track:",this)),a}},{key:"setVisibleTiles",value:function(n){this.visibleTiles=n.map(o=>({tileId:this.tileToLocalId(o),remoteId:this.tileToRemoteId(o)})),this.visibleTileIds=new Set(this.visibleTiles.map(o=>o.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const n=this._xScale.copy();n.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.xTiles=at.calculateTiles(this.zoomLevel,n,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=at.calculateTiles(this.zoomLevel,n,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const o=this.xTiles,a=this.yTiles,s=this.zoomLevel,u=this.tilesetInfo.max_width/2**s,l=[];for(let h=0;h<o.length;h++)for(let f=h;f<a.length;f++){if((f-h-2)*(this._xScale(u)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const p=[s,o[h],a[f]];p.mirrored=!1,l.push(p)}this.setVisibleTiles(l)}},{key:"initTile",value:function(n){qs(la(r.prototype),"initTile",this).call(this,n),this.drawTile(n)}},{key:"destroyTile",value:function(n,o){}},{key:"draw",value:function(){this.delayDrawing||this.drawnRects.clear(),qs(la(r.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(n){if(!n.graphics)return;const o=n.graphics;o.clear();const a=it(this.options.rectangleDomainStrokeColor?this.options.rectangleDomainStrokeColor:"black"),s=it(this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey");if(o.lineStyle(1/this.pMain.scale.x,a,1),o.beginFill(s,.4),o.alpha=this.options.rectangleDomainOpacity?this.options.rectangleDomainOpacity:.5,!!n.tileData.sort)for(const c of n.tileData){const u=this._refXScale(c.xStart),l=this._refXScale(c.xEnd),h=this._refYScale(c.yStart),f=this._refYScale(c.yEnd),d=c.uid;this.drawnRects.has(d)||(this.drawnRects.add(d),o.drawRect(u,h,l-u,f-h),o.pivot.x=this._refXScale(0),o.pivot.y=this._refYScale(0),o.scale.x=-1/Math.sqrt(2),o.rotation=-3*Math.PI/4,o.scale.y=1/Math.sqrt(2),o.position.x=this._refXScale(0),o.position.y=0)}}},{key:"setPosition",value:function(n){qs(la(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"refScalesChanged",value:function(n,o){qs(la(r.prototype),"refScalesChanged",this).call(this,n,o);for(const a in this.fetchedTiles){const s=this.fetchedTiles[a];if(s.sprite){const c=s.graphics;c.pivot.x=this._refXScale(0),c.pivot.y=this._refYScale(0),c.scale.x=-1/Math.sqrt(2),c.rotation=-3*Math.PI/4,c.scale.y=1/Math.sqrt(2),c.position.x=this._refXScale(0),c.position.y=0}}}},{key:"zoomed",value:function(n,o,a,s,c){qs(la(r.prototype),"zoomed",this).call(this,n,o,a,s,c),this.pMain.position.x=s,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=a,this.pMain.scale.y=a,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-a,this.pMain.position.y=this.position[1]),this.draw()}},{key:"leftTrackDraw",value:function(){this.draw()}}]),r}(qa);function NPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,MPe(i.key),i)}}function RPe(e,t,r){return t&&Uz(e.prototype,t),r&&Uz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MPe(e){var t=LPe(e,"string");return typeof t=="symbol"?t:String(t)}function LPe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ym(){return typeof Reflect<"u"&&Reflect.get?ym=Reflect.get.bind():ym=function(t,r,i){var n=BPe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},ym.apply(this,arguments)}function BPe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Pc(e),e!==null););return e}function HPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wI(e,t)}function wI(e,t){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},wI(e,t)}function $Pe(e){var t=UPe();return function(){var i=Pc(e),n;if(t){var o=Pc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return FPe(this,n)}}function FPe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jPe(e)}function jPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UPe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pc(e){return Pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pc(e)}let Gz=function(e){HPe(r,e);var t=$Pe(r);function r(i,n){var o;return NPe(this,r),o=t.call(this,i,n),o.drawnRects=new Set,o}return RPe(r,[{key:"tileToLocalId",value:function(n){return`${n.join(".")}`}},{key:"tileToRemoteId",value:function(n){return`${n.join(".")}`}},{key:"localToRemoteId",value:function(n){const o=n.split(".");return o.slice(0,o.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let a=Math.max(n,o);return a=Math.min(a,this.maxZoom),a}},{key:"setVisibleTiles",value:function(n){this.visibleTiles=n.map(o=>({tileId:this.tileToLocalId(o),remoteId:this.tileToRemoteId(o)})),this.visibleTileIds=new Set(this.visibleTiles.map(o=>o.tileId))}},{key:"calculateVisibleTiles",value:function(n=!0){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=at.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=at.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const o=this.xTiles,a=this.yTiles,s=this.zoomLevel,c=[];for(let u=0;u<o.length;u++)for(let l=0;l<a.length;l++){const h=[s,o[u],a[l]];c.push(h)}this.setVisibleTiles(c)}},{key:"initTile",value:function(n){}},{key:"destroyTile",value:function(n,o){}},{key:"draw",value:function(){this.drawnRects.clear(),ym(Pc(r.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(n){if(!n.graphics)return;const o=n.graphics;o.clear();const a=it("green");o.lineStyle(1,255,1),o.beginFill(a,.8),o.alpha=.5;for(const s of n.tileData){const c=this._xScale(s.xStart),u=this._xScale(s.xEnd),l=this._yScale(s.yStart),h=this._yScale(s.yEnd),f=s.uid;if(this.drawnRects.has(f))continue;this.drawnRects.add(f);const d=6,p=6;let m=h-l,g=u-c;const v=(c+u)/2,_=(l+h)/2;m<d&&(m=d),g<p&&(g=p),o.drawRect(v-m/2,_-g/2,m,g)}}},{key:"setPosition",value:function(n){ym(Pc(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.refreshTiles(),this.draw()}}]),r}(qa);function ca(e,t,r=o_){const i={};return i.absToChr=n=>i.chrPositions?Dr(n,i):null,i.chrToAbs=([n,o]=[])=>i.chrPositions?Hd(n,o,i):null,at.text(e,(n,o)=>{if(n)t&&t(null);else{const a=ZS(o),s=Ty(a);Object.keys(s).forEach(c=>{i[c]=s[c]}),t&&t(i)}},r).then(()=>i)}function GPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,VPe(i.key),i)}}function zPe(e,t,r){return t&&zz(e.prototype,t),r&&zz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VPe(e){var t=WPe(e,"string");return typeof t=="symbol"?t:String(t)}function WPe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let th=function(){function e(t){GPe(this,e),this.chromInfo=t,this.chromInfoBisector=su(r=>r.pos).left}return zPe(e,[{key:"scalesToPositionText",value:function(r,i,n=!1){if(this.chromInfo===null||!r||!i)return"";const o=Dr(r.domain()[0],this.chromInfo),a=Dr(r.domain()[1],this.chromInfo),s=Dr(i.domain()[0],this.chromInfo),c=Dr(i.domain()[1],this.chromInfo);let u=null;const l=Oi(",d");return o[0]!==a[0]?u=`${o[0]}:${l(Math.floor(o[1]))}-${a[0]}:${l(Math.ceil(a[1]))}`:u=`${o[0]}:${l(Math.floor(o[1]))}-${l(Math.ceil(a[1]))}`,n&&(s[0]!==c[0]?u+=` & ${s[0]}:${l(Math.floor(s[1]))}-${c[0]}:${l(Math.ceil(c[1]))}`:u+=` & ${s[0]}:${l(Math.floor(s[1]))}-${l(Math.ceil(c[1]))}`),(o[2]<=0||a[2]>0||n&&(s[2]<=0||c[2]>0))&&(u+=` [offset ${o[2]},${a[2]}`,n&&(u+=`:${s[2]},${c[2]}`),u+="]"),u}},{key:"convertNumberNotation",value:function(r){let i=r;if(!i.includes("M",i.length-1)&&!i.includes("K",i.length-1))return i;let n=0,o=0;if(i.includes("M",i.length-1)?(n=6,i=i.replace("M","")):(n=3,i=i.replace("K","")),Number.isNaN(+i))return r;i=(+i).toString(),i.includes(".")&&(o=i.length-1-i.indexOf("."),i=(+i.replace(".","")).toString());const a=n-o;return a<0?r:(i+="0".repeat(a),i)}},{key:"parsePosition",value:function(r,i=null){const n=r.split(":");let o=null,a=0;n.length>1?(o=n[0],a=+this.convertNumberNotation(n[1].replace(/,/g,""))):n[0]in this.chromInfo.chrPositions?(o=n[0],a=0,i!==null&&(a=+this.chromInfo.chromLengths[o])):(a=+this.convertNumberNotation(n[0].replace(/,/g,"")),o=null,i&&(o=i));let s=null;return o===null?(o=i,s=a):o in this.chromInfo.chrPositions&&(s=this.chromInfo.chrPositions[o].pos+a),[o,a,s]}},{key:"matchRangesToLarger",value:function(r,i){if(r[1]-r[0]<i[1]-i[0]){const o=i[1]-i[0]-(r[1]-r[0]);return[[r[0]-o/2,r[1]+o/2],i]}const n=r[1]-r[0]-(i[1]-i[0]);return[r,[i[0]-n/2,i[1]+n/2]]}},{key:"getSearchRange",value:function(r){if(r.length===0)return null;let i=r.split("-");i=i.filter(o=>o.length>0);let n=null;if(i[0].indexOf("-")===0&&(i[0]=i[0].slice(3,i[0].length)),i.length>1){let[o,a,s]=this.parsePosition(i[0]),[c,u,l]=this.parsePosition(i[1],o);const h=[s,l];[o,a,s]=this.parsePosition(i[1]),[c,u,l]=this.parsePosition(i[0],o),o===null&&c!==null&&([o,a,s]=this.parsePosition(i[1],c));const f=[s,l];return f[1]-f[0]>h[1]-h[0]?f:h}if(i[0]in this.chromInfo.chrPositions){const o=+this.chromInfo.chrPositions[i[0]].pos;n=[o,o+ +this.chromInfo.chromLengths[i[0]]]}else{const[o,a,s]=this.parsePosition(i[0]);n=[s-8e6,s+8e6]}return n[0]>n[1]?[n[1],n[0]]:n}},{key:"parseOffset",value:function(r){const i=r.split(":");if(i.length===0)return[[0,0],[0,0]];if(i.length===1){const a=i[0].split(",");return[[+a[0],+a[1]],[0,0]]}const n=i[0].split(","),o=i[1].split(",");return[[+n[0],+n[1]],[+o[0],+o[1]]]}},{key:"searchPosition",value:function(r){let i=null,n=null;r=r.trim();const o=/\[offset (.+?)\]/.exec(r);let a=[[0,0],[0,0]];o&&(r=r.replace(o[0],""),a=this.parseOffset(o[1]));const s=r.split(" & ");return s.length>1?(i=this.getSearchRange(s[0].split(" ")[0]),n=this.getSearchRange(s[1].split(" ")[0])):i=this.getSearchRange(s[0]),i!==null&&n!==null&&([i,n]=this.matchRangesToLarger(i,n)),i&&(i[0]+=a[0][0],i[1]+=a[0][1]),n&&(n[0]+=a[1][0],n[1]+=a[1][1]),[i,n]}}]),e}();function YPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,XPe(i.key),i)}}function qPe(e,t,r){return t&&Vz(e.prototype,t),r&&Vz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XPe(e){var t=KPe(e,"string");return typeof t=="symbol"?t:String(t)}function KPe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B_(){return typeof Reflect<"u"&&Reflect.get?B_=Reflect.get.bind():B_=function(t,r,i){var n=ZPe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},B_.apply(this,arguments)}function ZPe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=rh(e),e!==null););return e}function QPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AI(e,t)}function AI(e,t){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},AI(e,t)}function JPe(e){var t=rDe();return function(){var i=rh(e),n;if(t){var o=rh(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return eDe(this,n)}}function eDe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tDe(e)}function tDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rh(e){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rh(e)}let Wz=function(e){QPe(r,e);var t=JPe(r);function r(i,n){var o;YPe(this,r),o=t.call(this,i,n);const{dataConfig:a,animate:s,pubSub:c}=i;o.searchField=null,o.chromInfo=null,o.animate=s;const u=a.server,l=a.tilesetUid,h=`${u}/chrom-sizes/?id=${l}`;return ca(h,f=>{o.chromInfo=f,o.searchField=new th(o.chromInfo),o.draw(),o.texts=[];for(let d=0;d<o.chromInfo.cumPositions.length;d++){const p=[];for(let m=0;m<o.chromInfo.cumPositions.length;m++){const g=`${o.chromInfo.cumPositions[d].chr}/${o.chromInfo.cumPositions[m].chr}`,v=new He.PIXI.Text(g,{fontSize:"14px",fontFamily:"Arial",fill:"red"});v.anchor.x=.5,v.anchor.y=.5,v.visible=!1,v.hashValue=Math.random(),p.push(v),o.pMain.addChild(v)}o.texts.push(p)}o.draw(),o.animate()},c),o}return qPe(r,[{key:"draw",value:function(){const n=[];if(!this.texts||!this.searchField)return;const o=Dr(this._xScale.domain()[0],this.chromInfo),a=Dr(this._xScale.domain()[1],this.chromInfo),s=Dr(this._yScale.domain()[0],this.chromInfo),c=Dr(this._yScale.domain()[1],this.chromInfo);for(let u=0;u<this.texts.length;u++)for(let l=0;l<this.texts.length;l++)this.texts[u][l].visible=!1;for(let u=o[3];u<=a[3];u++)for(let l=s[3];l<=c[3];l++){const h=this.chromInfo.cumPositions[u],f=this.chromInfo.cumPositions[l],d=h.pos+this.chromInfo.chromLengths[h.chr]/2,p=f.pos+this.chromInfo.chromLengths[f.chr]/2,m=this._xScale(d),g=this._yScale(p),v=this.texts[u][l];v.x=m,v.y=g,v.updateTransform();const _=v.getBounds(),y=_.width/2,b=_.height/2;m+y>this.dimensions[0]?v.x-=m+y-this.dimensions[0]:m-y<0&&(v.x-=m-y),g+b>this.dimensions[1]?v.y-=g+b-this.dimensions[1]:g-b<0&&(v.y-=g-b),v.visible=!0,n.push({importance:this.texts[u][l].hashValue,text:this.texts[u][l],caption:null})}this.hideOverlaps(n)}},{key:"hideOverlaps",value:function(n){let o=[];o=n.map(a=>{const s=a.text;s.updateTransform();const c=s.getBounds();return[c.x,c.y,c.x+c.width,c.y+c.height]}),mm(o,(a,s)=>{n[a].importance>n[s].importance?n[s].text.visible=0:n[a].text.visible=0})}},{key:"setPosition",value:function(n){B_(rh(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}}]),r}(jn);function nDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oDe(i.key),i)}}function iDe(e,t,r){return t&&Yz(e.prototype,t),r&&Yz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oDe(e){var t=aDe(e,"string");return typeof t=="symbol"?t:String(t)}function aDe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nh(){return typeof Reflect<"u"&&Reflect.get?nh=Reflect.get.bind():nh=function(t,r,i){var n=sDe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},nh.apply(this,arguments)}function sDe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Xs(e),e!==null););return e}function lDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OI(e,t)}function OI(e,t){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},OI(e,t)}function cDe(e){var t=hDe();return function(){var i=Xs(e),n;if(t){var o=Xs(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return uDe(this,n)}}function uDe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fDe(e)}function fDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xs(e){return Xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xs(e)}let bm=function(e){lDe(r,e);var t=cDe(r);function r(i,n){var o;nDe(this,r),o=t.call(this,i,n);const{chromInfoPath:a,dataConfig:s,animate:c,pubSub:u,orientation:l="2d",isOverlay:h=!1}=i;o.searchField=null,o.chromInfo=null,o.animate=c,o.orientation=l,o.isOverlay=h;let f=a;return f||(f=`${s.server}/chrom-sizes/?id=${s.tilesetUid}`),ca(f,d=>{o.chromInfo=d,o.searchField=new th(o.chromInfo),o.texts=[],o.lineGraphics=new He.PIXI.Graphics,o.lineGraphics1dH=new He.PIXI.Graphics,o.lineGraphics1dV=new He.PIXI.Graphics,o.lineGraphics2d=new He.PIXI.Graphics,o.mask1dH=new He.PIXI.Graphics,o.mask1dV=new He.PIXI.Graphics,o.mask2d=new He.PIXI.Graphics,o.lineGraphics.addChild(o.lineGraphics1dH),o.lineGraphics1dH.addChild(o.mask1dH),o.lineGraphics.addChild(o.lineGraphics1dV),o.lineGraphics1dV.addChild(o.mask1dV),o.lineGraphics.addChild(o.lineGraphics2d),o.lineGraphics2d.addChild(o.mask2d),o.pMain.addChild(o.lineGraphics),o.draw(),o.animate()},u),o}return iDe(r,[{key:"drawLines",value:function(n=this.orientation,o=0,a=0){let s=this.lineGraphics;this.isOverlay&&n==="1d-horizontal"&&(s=this.lineGraphics1dH),this.isOverlay&&n==="1d-vertical"&&(s=this.lineGraphics1dV),this.isOverlay&&n==="2d"&&(s=this.lineGraphics2d);const c=it(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),u=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;s.lineStyle(u,c,1),(n==="2d"||n==="1d-horizontal")&&(s.moveTo(this._xScale(0)+o,a),s.lineTo(this._xScale(0)+o,this.dimensions[1]+a)),(n==="2d"||n==="1d-vertical")&&(s.moveTo(o,this._yScale(0)+a),s.lineTo(this.dimensions[0]+o,this._yScale(0)+a));for(let l=0;l<this.chromInfo.cumPositions.length;l++){const h=this.chromInfo.cumPositions[l],f=h.pos+ +this.chromInfo.chromLengths[h.chr]+1;(n==="2d"||n==="1d-horizontal")&&(s.moveTo(this._xScale(f)+o,a),s.lineTo(this._xScale(f)+o,this.dimensions[1]+a)),(n==="2d"||n==="1d-vertical")&&(s.moveTo(o,this._yScale(f)+a),s.lineTo(this.dimensions[0]+o,this._yScale(f)+a))}}},{key:"draw",value:function(){if(this.texts&&this.searchField)if(this.lineGraphics.clear(),this.isOverlay){this.lineGraphics1dH.clear(),this.lineGraphics1dV.clear(),this.lineGraphics2d.clear(),this.mask1dH.clear(),this.mask1dV.clear(),this.mask2d.clear(),this.mask1dH.beginFill(16777215),this.mask1dV.beginFill(16777215),this.mask2d.beginFill(16711680);for(let n=0;n<this.options.orientationsAndPositions.length;n++){const o=this.options.orientationsAndPositions[n].orientation,{left:a,top:s,width:c,height:u}=this.options.orientationsAndPositions[n].position;o==="1d-horizontal"&&this.mask1dH.drawRect(a,s,c,u),o==="1d-vertical"&&this.mask1dV.drawRect(a,s,c,u),o==="2d"&&this.mask2d.drawRect(a,s,c,u),this.drawLines(o,a,s)}this.lineGraphics1dH.mask=this.mask1dH,this.lineGraphics1dV.mask=this.mask1dV,this.lineGraphics2d.mask=this.mask2d}else this.drawLines()}},{key:"setPosition",value:function(n){nh(Xs(r.prototype),"setPosition",this).call(this,n),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}},{key:"createSvgLine",value:function(n,o,a,s,c,u){const l=document.createElement("line");return l.setAttribute("x1",n),l.setAttribute("x2",o),l.setAttribute("y1",a),l.setAttribute("y2",s),l.setAttribute("stroke",c),l.setAttribute("stroke-width",u),l}},{key:"drawLinesSvg",value:function(n,o,a,s,c=0,u=0){const l=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue",h=this.options.lineStrokeWidth;if(o==="2d"||o==="1d-vertical"){const f=this._yScale(0);f>0&&f<u+s&&n.appendChild(this.createSvgLine(c,a+c,f+u,f+u,l,h))}if(o==="2d"||o==="1d-horizontal"){const f=this._xScale(0);f>0&&f<c+a&&n.appendChild(this.createSvgLine(f+c,f+c,u,s+u,l,h))}for(let f=0;f<this.chromInfo.cumPositions.length;f++){const d=this.chromInfo.cumPositions[f],p=d.pos+ +this.chromInfo.chromLengths[d.chr]+1;if(o==="2d"||o==="1d-vertical"){const m=this._yScale(p);m>0&&m<u+s&&n.appendChild(this.createSvgLine(c,a+c,m+u,m+u,l,h))}if(o==="2d"||o==="1d-horizontal"){const m=this._xScale(p);m>0&&m<c+a&&n.appendChild(this.createSvgLine(m+c,m+c,u,s+u,l,h))}}}},{key:"exportSVG",value:function(){let n=null,o=null;nh(Xs(r.prototype),"exportSVG",this)?[o,n]=nh(Xs(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");n.appendChild(a);const s=Math.random().toString(36).substring(7);if(o.setAttribute("id",`ChromosomeGrid-${s}`),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),!this.chromInfo)return[o,n];if(this.isOverlay)for(let c=0;c<this.options.orientationsAndPositions.length;c++){const u=this.options.orientationsAndPositions[c].orientation,{left:l,top:h,width:f,height:d}=this.options.orientationsAndPositions[c].position;this.drawLinesSvg(a,u,f,d,l,h)}else this.drawLinesSvg(a,this.orientation,...this.dimensions);return[o,n]}}]),r}(jn);function dDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,mDe(i.key),i)}}function pDe(e,t,r){return t&&qz(e.prototype,t),r&&qz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mDe(e){var t=gDe(e,"string");return typeof t=="symbol"?t:String(t)}function gDe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _m(){return typeof Reflect<"u"&&Reflect.get?_m=Reflect.get.bind():_m=function(t,r,i){var n=vDe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},_m.apply(this,arguments)}function vDe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Dc(e),e!==null););return e}function yDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kI(e,t)}function kI(e,t){return kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},kI(e,t)}function bDe(e){var t=EDe();return function(){var i=Dc(e),n;if(t){var o=Dc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _De(this,n)}}function _De(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TDe(e)}function TDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dc(e){return Dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dc(e)}const SDe=300;let Xz=function(e){yDe(r,e);var t=bDe(r);function r(i,n){var o;dDe(this,r),o=t.call(this,i,n);const{chromInfoPath:a,pubSub:s}=i;return o.pubSub=s,o.rects={},ca(a,c=>{o.chromInfo=c,o.draw()},o.pubSub),o}return pDe(r,[{key:"draw",value:function(){if(!this.chromInfo)return;const n=this.options.minRectWidth?this.options.minRectWidth:10,o=this.options.minRectWidth?this.options.minRectHeight:10;_m(Dc(r.prototype),"draw",this).call(this);const a=this.pMain;a.clear();const s=performance.now();this.options.regions.forEach(c=>{const u=c.slice(0,6).join("-");this.rects[u]||(this.rects[u]={graphics:new He.PIXI.Graphics},a.addChild(this.rects[u].graphics)),this.rects[u].timeStamp=s;const l=Qr(c[6]);let h=Qr(c[7]);h||(h=l);const f=He.PIXI.utils.rgb2hex([l.r/255,l.g/255,l.b/255]),d=He.PIXI.utils.rgb2hex([h.r/255,h.g/255,h.b/255]);a.lineStyle(1,d,h.opacity),a.beginFill(f,l.opacity);let p=this._xScale(this.chromInfo.chrPositions[c[0]].pos+ +c[1]);const m=this._xScale(this.chromInfo.chrPositions[c[0]].pos+ +c[2]);let g=this._yScale(this.chromInfo.chrPositions[c[3]].pos+ +c[4]);const v=this._yScale(this.chromInfo.chrPositions[c[3]].pos+ +c[5]);let _=m-p,y=v-g;const b=typeof c[8]<"u"?c[8]:n,T=typeof c[9]<"u"?c[9]:o;_<b&&(p=(p+m)/2-b/2,_=b),y<T&&(g=(g+v)/2-T/2,y=T),a.drawRect(p,g,_,y),this.rects[u].graphics.clear(),this.rects[u].graphics.interactive=!0,this.rects[u].graphics.buttonMode=!0,this.rects[u].graphics.hitArea=new He.PIXI.Rectangle(p,g,_,y),this.rects[u].graphics.mousedown=()=>{this.rects[u].mouseDownTime=performance.now()},this.rects[u].graphics.mouseup=S=>{performance.now()-this.rects[u].mouseDownTime<SDe&&this.pubSub.publish("app.click",{type:"annotation",event:S,payload:c})}})}},{key:"setPosition",value:function(n){_m(Dc(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}}]),r}(jn);function wDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kz(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ODe(i.key),i)}}function ADe(e,t,r){return t&&Kz(e.prototype,t),r&&Kz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ODe(e){var t=kDe(e,"string");return typeof t=="symbol"?t:String(t)}function kDe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xc(){return typeof Reflect<"u"&&Reflect.get?xc=Reflect.get.bind():xc=function(t,r,i){var n=IDe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},xc.apply(this,arguments)}function IDe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=os(e),e!==null););return e}function CDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&II(e,t)}function II(e,t){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},II(e,t)}function PDe(e){var t=xDe();return function(){var i=os(e),n;if(t){var o=os(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return DDe(this,n)}}function DDe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zz(e)}function Zz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function os(e){return os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},os(e)}const NDe=200,RDe=6,MDe=2,Qz=7829367;let Jz=function(e){CDe(r,e);var t=PDe(r);function r(i,n){var o;wDe(this,r),o=t.call(this,i,n);const{dataConfig:a,animate:s,chromInfoPath:c,isShowGlobalMousePosition:u}=i;o.searchField=null,o.chromInfo=null,o.dataConfig=a,o.pTicks=new He.PIXI.Graphics,o.pMain.addChild(o.pTicks),o.gTicks={},o.tickTexts={},o.options=n,o.isShowGlobalMousePosition=u,o.textFontSize=12,o.textFontFamily="Arial",o.textFontColor="#808080",o.textStrokeColor=o.getTheme()===mr?"#000000":"#ffffff",o.pixiTextConfig={fontSize:+o.options.fontSize?`${+o.options.fontSize}px`:`${o.textFontSize}px`,fontFamily:o.textFontFamily,fill:o.options.color||o.textFontColor,lineJoin:"round",stroke:o.options.stroke||o.textStrokeColor,strokeThickness:2},o.stroke=it(o.pixiTextConfig.stroke),o.tickWidth=NDe,o.tickHeight=RDe,o.tickTextSeparation=MDe,o.tickColor=o.options.tickColor?it(o.options.tickColor):Qz,o.animate=s,o.pubSubs=[],o.options.showMousePosition&&!o.hideMousePosition&&(o.hideMousePosition=Ss(Zz(o),o.is2d,o.isShowGlobalMousePosition()));let l=c;return l||(l=`${a.server}/chrom-sizes/?id=${a.tilesetUid}`),ca(l,h=>{o.chromInfo=h,o.searchField=new th(o.chromInfo);try{o.rerender(o.options,!0),o.draw()}catch{}finally{o.animate()}},o.pubSub),o}return ADe(r,[{key:"initBoundsTicks",value:function(){this.pTicks&&(this.pMain.removeChild(this.pTicks),this.pTicks=null),this.gBoundTicks||(this.gBoundTicks=new He.PIXI.Graphics,this.leftBoundTick=new He.PIXI.Text("",this.pixiTextConfig),this.rightBoundTick=new He.PIXI.Text("",this.pixiTextConfig),this.gBoundTicks.addChild(this.leftBoundTick),this.gBoundTicks.addChild(this.rightBoundTick),this.pMain.addChild(this.gBoundTicks)),this.texts=[]}},{key:"initChromLabels",value:function(){if(this.chromInfo){this.gBoundTicks&&(this.pMain.removeChild(this.gBoundTicks),this.gBoundTicks=null),this.pTicks||(this.pTicks=new He.PIXI.Graphics,this.pMain.addChild(this.pTicks)),this.texts=[],this.pTicks.removeChildren();for(let n=0;n<this.chromInfo.cumPositions.length;n++){const o=this.chromInfo.cumPositions[n].chr;this.gTicks[o]=new He.PIXI.Graphics,this.tickTexts[o]||(this.tickTexts[o]=[]);const a=new He.PIXI.Text(o,this.pixiTextConfig);a.hashValue=Math.random(),this.pTicks.addChild(a),this.pTicks.addChild(this.gTicks[o]),this.texts.push(a)}}}},{key:"remove",value:function(){if(this.visibleTileIds&&this.removeTiles([...this.visibleTileIds]),this.texts)for(let n=0;n<this.texts.length;n++)this.texts[n].destroy()}},{key:"rerender",value:function(n,o){const a=JSON.stringify(n);!o&&a===this.prevOptions||(this.prevOptions=a,this.options=n,this.tickTexts={},this.pixiTextConfig.fontSize=+this.options.fontSize?`${+this.options.fontSize}px`:this.pixiTextConfig.fontSize,this.pixiTextConfig.fill=this.options.color||this.pixiTextConfig.fill,this.pixiTextConfig.stroke=this.options.stroke||this.pixiTextConfig.stroke,this.stroke=it(this.pixiTextConfig.stroke),this.tickColor=this.options.tickColor?it(this.options.tickColor):Qz,this.options.tickPositions==="ends"?this.initBoundsTicks():this.initChromLabels(),xc(os(r.prototype),"rerender",this).call(this,n,o),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=Ss(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"formatTick",value:function(n){const o=this._xScale.domain(),a=o[1]-o[0],s=yu(n,a),c=Oi(","),u=Dl(`,.${s}`,a);let l=c;return this.options.tickFormat==="si"?l=u:this.options.tickFormat==="plain"?l=c:this.options.tickPositions==="ends"&&(l=u),l(n)}},{key:"drawBoundsTicks",value:function(n,o){const a=this.gBoundTicks;a.clear(),a.lineStyle(1,0);const s=this.options.reverseOrientation?0:this.dimensions[1],c=this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight;a.moveTo(1,s),a.lineTo(1,c),a.moveTo(this.dimensions[0]-1,s),a.lineTo(this.dimensions[0]-1,c),this.leftBoundTick.x=0,this.leftBoundTick.y=this.options.reverseOrientation?c+this.tickTextSeparation:c-this.tickTextSeparation,this.leftBoundTick.text=`${n[0]}: ${this.formatTick(n[1])}`,this.leftBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.x=this.dimensions[0],this.rightBoundTick.text=`${o[0]}: ${this.formatTick(o[1])}`,this.rightBoundTick.y=this.options.reverseOrientation?c+this.tickTextSeparation:c-this.tickTextSeparation,this.rightBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.anchor.x=1,this.flipText&&(this.leftBoundTick.scale.x=-1,this.leftBoundTick.anchor.x=1,this.rightBoundTick.scale.x=-1,this.rightBoundTick.anchor.x=0),this.leftBoundTick.tickLine=[1,this.dimensions[1],1,this.dimensions[1]-this.tickHeight],this.rightBoundTick.tickLine=[this.dimensions[0]-1,this.dimensions[1],this.dimensions[0]-1,this.dimensions[1]-this.tickHeight],this.tickTexts={},this.tickTexts.all=[this.leftBoundTick,this.rightBoundTick]}},{key:"drawTicks",value:function(n){const o=this.gTicks[n.chr];o.visible=!0,o.clear();const a=+this.chromInfo.chromLengths[n.chr],s=Math.max(this._xScale(n.pos),0),c=Math.min(this._xScale(n.pos+a),this.dimensions[0]),u=(c-s)/this.tickWidth,h=bt().domain([Math.max(1,this._xScale.invert(0)-n.pos),Math.min(a,this._xScale.invert(this.dimensions[0])-n.pos)]).range(s,c).ticks(u).filter(_=>Number.isInteger(_)),f=this.tickTexts[n.chr],d=this.options.fontIsLeftAligned?(+this.options.fontSize||this.textFontSize)/2:this.tickHeight,p=this.flipText?-1:1,m=this.options.fontIsLeftAligned?p*4:0;let g=this.options.fontIsLeftAligned?0:d+this.tickTextSeparation;for(this.options.reverseOrientation&&(g=this.dimensions[1]-g);f.length<h.length;){const _=new He.PIXI.Text("",this.pixiTextConfig);f.push(_),this.gTicks[n.chr].addChild(_)}for(;f.length>h.length;){const _=f.pop();this.gTicks[n.chr].removeChild(_),_.destroy()}let v=0;for(;v<h.length;){f[v].visible=!0,f[v].anchor.x=this.options.fontIsLeftAligned?0:.5,f[v].anchor.y=this.options.reverseOrientation?0:1,this.flipText&&(f[v].scale.x=-1),f[v].x=this._xScale(n.pos+h[v])+m,f[v].y=this.dimensions[1]-g,f[v].text=h[v]===0?`${n.chr}: 1`:`${n.chr}: ${this.formatTick(h[v])}`;const _=this._xScale(n.pos+h[v]);f[v].tickLine=[_-1,this.dimensions[1],_-1,this.dimensions[1]-d-1];const y=this.options.reverseOrientation?0:this.dimensions[1],b=this.options.reverseOrientation?d:this.dimensions[1]-d;o.lineStyle(1,this.stroke),o.moveTo(_-1,y),o.lineTo(_-1,b-1),this.options.fontIsLeftAligned?(o.lineTo(_+2*p+1*p,b-1),o.lineTo(_+2*p+1*p,b+1),o.lineTo(_+1,b+1)):o.lineTo(_+1,b-1),o.lineTo(_+1,y),o.lineStyle(1,this.tickColor),o.moveTo(_,y),o.lineTo(_,b),this.options.fontIsLeftAligned&&o.lineTo(_+2*p,b),v+=1}for(;v<f.length;)f[v].visible=!1,v+=1;return h.length}},{key:"draw",value:function(){if(this.allTexts=[],!this.texts||!this.searchField)return;const n=Dr(this._xScale.domain()[0],this.chromInfo),o=Dr(this._xScale.domain()[1],this.chromInfo);if(!n||!o){console.warn("Empty chromInfo:",this.dataConfig,this.chromInfo);return}if(this.options.tickPositions==="ends"){if(!this.gBoundTicks)return;this.gBoundTicks.visible=!0,this.drawBoundsTicks(n,o);return}if(!this.pTicks)return;for(let s=0;s<this.texts.length;s++)this.texts[s].visible=!1,this.gTicks[this.chromInfo.cumPositions[s].chr].visible=!1;let a=this.options.fontIsLeftAligned?0:this.tickHeight+this.tickTextSeparation;this.options.reverseOrientation&&(a=this.dimensions[1]-a),Object.keys(this.chromInfo.chrPositions).forEach(s=>{if(this.tickTexts[s])for(let c=0;c<this.tickTexts[s].length;c++)this.tickTexts[s][c].visible=!1});for(let s=n[3];s<=o[3];s++){const c=this.chromInfo.cumPositions[s],u=c.pos+this.chromInfo.chromLengths[c.chr]/2,l=this._xScale(u),h=this.texts[s];h.anchor.x=this.options.fontIsLeftAligned?0:.5,h.anchor.y=this.options.reverseOrientation?0:1,h.x=l,h.y=this.dimensions[1]-a,h.updateTransform(),this.flipText&&(h.scale.x=-1);const f=this.drawTicks(c);h.visible=f<=0,this.allTexts.push({importance:h.hashValue,text:h,caption:null})}this.hideOverlaps(this.allTexts)}},{key:"hideOverlaps",value:function(n){let o=[];o=n.map(({text:a},s)=>{a.updateTransform();const c=a.getBounds();return[c.x,c.y,c.x+c.width,c.y+c.height]}),mm(o,(a,s)=>{n[a].importance>n[s].importance?n[s].text.visible=!1:n[a].text.visible=!1})}},{key:"setPosition",value:function(n){xc(os(r.prototype),"setPosition",this).call(this,n),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}},{key:"exportSVG",value:function(){let n=null,o=null;xc(os(r.prototype),"exportSVG",this)?[o,n]=xc(os(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o),o.setAttribute("class","chromosome-labels");const a=document.createElement("g");return n.appendChild(a),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.allTexts.filter(s=>s.text.visible).forEach(s=>{const c=Ey(s.text);a.appendChild(c)}),Object.values(this.tickTexts).forEach(s=>{s.filter(c=>c.visible).forEach(c=>{let u=Ey(c);a.appendChild(u),u=dw(c.x,this.options.reverseOrientation?0:this.dimensions[1],c.x,this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight,1,this.tickColor);const l=document.createElement("line");l.setAttribute("x1",c.tickLine[0]),l.setAttribute("y1",c.tickLine[1]),l.setAttribute("x2",c.tickLine[2]),l.setAttribute("y2",c.tickLine[3]),l.setAttribute("style","stroke: grey"),a.appendChild(u),a.appendChild(l)})}),[o,n]}}]),r}(jn);function LDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,HDe(i.key),i)}}function BDe(e,t,r){return t&&e8(e.prototype,t),r&&e8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function HDe(e){var t=$De(e,"string");return typeof t=="symbol"?t:String(t)}function $De(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ks(){return typeof Reflect<"u"&&Reflect.get?Ks=Reflect.get.bind():Ks=function(t,r,i){var n=FDe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Ks.apply(this,arguments)}function FDe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ua(e),e!==null););return e}function jDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CI(e,t)}function CI(e,t){return CI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},CI(e,t)}function UDe(e){var t=VDe();return function(){var i=ua(e),n;if(t){var o=ua(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return GDe(this,n)}}function GDe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zDe(e)}function zDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ua(e){return ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ua(e)}let t8=function(e){jDe(r,e);var t=UDe(r);function r(i,n){var o;LDe(this,r),o=t.call(this,i,n);const{animate:a}=i;return o.pMain=o.pMobile,o.colorScale=Mu,o.continuousScaling=!1,n&&n.colorRange&&(o.colorScale=Ma(n.colorRange)),o.animate=a,o.options=n,o.pubSubs=[],o}return BDe(r,[{key:"rerender",value:function(n,o){Ks(ua(r.prototype),"rerender",this).call(this,n,o),this.zoomed(this.xScale(),this.yScale(),this.pMain.scale.x,this.pMain.position.x,this.pMain.position.y)}},{key:"calculateZoomLevel",value:function(){let n=null;if(this.tilesetInfo.resolutions){const o=at.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),a=at.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);n=Math.min(o,a)}else{const o=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),a=at.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);n=Math.max(o,a),n=Math.min(n,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?n=Math.min(this.options.maxZoom,n):console.error("Invalid maxZoom on track:",this)),n}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const n=this._xScale.copy();if(n.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.tilesetInfo.resolutions){const h=this.tilesetInfo.resolutions.map(f=>+f).sort((f,d)=>d-f);this.xTiles=at.calculateTilesFromResolution(h[this.zoomLevel],n,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=at.calculateTilesFromResolution(h[this.zoomLevel],n,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=at.calculateTiles(this.zoomLevel,n,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=at.calculateTiles(this.zoomLevel,n,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const o=this.xTiles,a=this.yTiles,s=this.zoomLevel,u=this.tilesetInfo.max_width/2**s,l=[];for(let h=0;h<o.length;h++)for(let f=h;f<a.length;f++){if((f-h-2)*(this._xScale(u)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const p=[s,o[h],a[f]];p.mirrored=!1,p.dataTransform=this.options.dataTransform?this.options.dataTransform:"default",l.push(p)}this.setVisibleTiles(l)}},{key:"tileDataToCanvas",value:function(n){const o=document.createElement("canvas");o.width=256,o.height=256;const a=o.getContext("2d");a.fillStyle="transparent",a.fillRect(0,0,o.width,o.height);const s=new ImageData(n,o.width,o.height);return a.putImageData(s,0,0),o}},{key:"setSpriteProperties",value:function(n,o,a,s){const{tileX:c,tileY:u,tileWidth:l,tileHeight:h}=this.getTilePosAndDimensions(o,a),f=c+l,d=u+h;n.width=this._refXScale(f)-this._refXScale(c),n.height=this._refYScale(d)-this._refYScale(u),n.x=this._refXScale(c),n.y=this._refYScale(u)}},{key:"pixDataFunction",value:function(n,o){if(o){const a=n.graphics,s=this.tileDataToCanvas(o.pixData),c=He.PIXI.VERSION[0]==="4"?He.PIXI.Texture.fromCanvas(s,He.PIXI.SCALE_MODES.NEAREST):He.PIXI.Texture.from(s,{scaleMode:He.PIXI.SCALE_MODES.NEAREST});n.sprite=new He.PIXI.Sprite(c),n.canvas=s,this.setSpriteProperties(n.sprite,n.tileData.zoomLevel,n.tileData.tilePos,n.mirrored),a.pivot.x=this._refXScale(0),a.pivot.y=this._refYScale(0),a.scale.x=-1/Math.sqrt(2),a.rotation=-3*Math.PI/4,a.scale.y=1/Math.sqrt(2),a.position.x=this._refXScale(0),a.position.y=0,a.removeChildren(),a.addChild(n.sprite)}this.renderingTiles.delete(n.tileId)}},{key:"refScalesChanged",value:function(n,o){Ks(ua(r.prototype),"refScalesChanged",this).call(this,n,o);for(const a in this.fetchedTiles){const s=this.fetchedTiles[a];if(s.sprite){this.setSpriteProperties(s.sprite,s.tileData.zoomLevel,s.tileData.tilePos,s.mirrored);const c=s.graphics;c.pivot.x=this._refXScale(0),c.pivot.y=this._refYScale(0),c.scale.x=-1/Math.sqrt(2),c.rotation=-3*Math.PI/4,c.scale.y=1/Math.sqrt(2),c.position.x=this._refXScale(0),c.position.y=0}}}},{key:"zoomed",value:function(n,o,a,s,c){Ks(ua(r.prototype),"zoomed",this).call(this,n,o,a,s,c),Ks(ua(r.prototype),"draw",this).call(this),this.pMain.position.x=s,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=a,this.pMain.scale.y=a,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-a,this.pMain.position.y=this.position[1])}},{key:"leftTrackDraw",value:function(){this.draw()}},{key:"exportSVG",value:function(){let n=null,o=null;[o,n]=Ks(ua(r.prototype),"superSVG",this).call(this);const a=document.createElement("g");n.appendChild(a),a.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const c of this.visibleAndFetchedTiles()){const u=document.createElement("g"),l=c.graphics,h=l.rotation*180/Math.PI,f=`translate(${l.position.x},${l.position.y}) rotate(${h}) scale(${l.scale.x},${l.scale.y}) translate(${-l.pivot.x},${-l.pivot.y})`;u.setAttribute("transform",f);const d=c.sprite.rotation*180/Math.PI,p=document.createElement("g");p.setAttribute("transform",`translate(${c.sprite.x},${c.sprite.y}) rotate(${d}) scale(${c.sprite.scale.x},${c.sprite.scale.y})`);const m=document.createElement("image");m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c.canvas.toDataURL()),m.setAttribute("width",256),m.setAttribute("height",256),p.appendChild(m),u.appendChild(p),a.appendChild(u)}const s=this.exportColorBarSVG();return n.appendChild(s),[o,o]}}]),r}(Hf);function WDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,qDe(i.key),i)}}function YDe(e,t,r){return t&&r8(e.prototype,t),r&&r8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qDe(e){var t=XDe(e,"string");return typeof t=="symbol"?t:String(t)}function XDe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PI(e,t)}function PI(e,t){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},PI(e,t)}function ZDe(e){var t=exe();return function(){var i=H_(e),n;if(t){var o=H_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return QDe(this,n)}}function QDe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JDe(e)}function JDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function exe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H_(e){return H_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H_(e)}let n8=function(e){KDe(r,e);var t=ZDe(r);function r(i,n){var o;return WDe(this,r),o=t.call(this,i,n),o.tilesetInfo={},o.errorTextText=`Unknown track type: ${n.type}`,o}return YDe(r,[{key:"zoomed",value:function(){this.draw()}}]),r}(jn);function txe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,nxe(i.key),i)}}function rxe(e,t,r){return t&&i8(e.prototype,t),r&&i8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nxe(e){var t=ixe(e,"string");return typeof t=="symbol"?t:String(t)}function ixe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DI(e,t)}function DI(e,t){return DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},DI(e,t)}function axe(e){var t=lxe();return function(){var i=$_(e),n;if(t){var o=$_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return sxe(this,n)}}function sxe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o8(e)}function o8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $_(e){return $_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$_(e)}let a8=function(e){oxe(r,e);var t=axe(r);function r(i,n){var o;return txe(this,r),o=t.call(this,i,n),o.axis=new e_(o8(o)),o.pBase.addChild(o.axis.pAxis),o}return rxe(r,[{key:"initTile",value:function(n){this.scale.minRawValue=this.minVisibleValueInTiles(),this.scale.maxRawValue=this.minVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue,this.drawTile(n)}},{key:"drawTile",value:function(n){if(!n.graphics)return;const o=n.graphics,a=6,s=4;o.clear(),this.valueScale=ys().domain([this.minValue()+.01,this.maxValue()]).range([this.dimensions[1]-a/2,a/2]);const c=it("black");o.lineStyle(1,c,.3),o.beginFill(c,.3),this.drawAxis(this.valueScale),n.tileData.forEach(u=>{const l=u.fields,h=+u.chrOffset,f=+l[1]+h,d=+l[2]+h,p=+l[3],m=this._xScale(f),g=this._xScale(d),v=Math.max(g-m,s),_=this.valueScale(p),y=(g+m)/2;o.drawRect(y-v/2,_-a/2,v,a)})}},{key:"minVisibleValueInTiles",value:function(){let n=this.visibleAndFetchedIds();return n.length===0&&(n=Object.keys(this.fetchedTiles)),Math.min.apply(null,n.map(a=>+Math.min(...this.fetchedTiles[a].tileData.filter(s=>!Number.isNaN(s.fields[3])).map(s=>+s.fields[3]))))}},{key:"maxVisibleValueInTiles",value:function(){let n=this.visibleAndFetchedIds();return n.length===0&&(n=Object.keys(this.fetchedTiles)),Math.max.apply(null,n.map(a=>+Math.max(...this.fetchedTiles[a].tileData.filter(s=>!Number.isNaN(s.fields[3])).map(s=>+s.fields[3]))))}}]),r}(Qf);function cxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,fxe(i.key),i)}}function uxe(e,t,r){return t&&s8(e.prototype,t),r&&s8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fxe(e){var t=hxe(e,"string");return typeof t=="symbol"?t:String(t)}function hxe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ih(){return typeof Reflect<"u"&&Reflect.get?ih=Reflect.get.bind():ih=function(t,r,i){var n=dxe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},ih.apply(this,arguments)}function dxe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Zs(e),e!==null););return e}function pxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xI(e,t)}function xI(e,t){return xI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},xI(e,t)}function mxe(e){var t=vxe();return function(){var i=Zs(e),n;if(t){var o=Zs(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return gxe(this,n)}}function gxe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NI(e)}function NI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zs(e){return Zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zs(e)}let l8=function(e){pxe(r,e);var t=mxe(r);function r(i,n){var o;cxe(this,r),o=t.call(this,i,n);const{registerViewportChanged:a,removeViewportChanged:s,setDomainsCallback:c}=i,u=xt.nice();return o.uid=u,o.options=n,o.hasFromView=!i.projectionXDomain||!i.projectionYDomain,o.removeViewportChanged=s,o.setDomainsCallback=c,o.viewportXDomain=o.hasFromView?null:i.projectionXDomain,o.viewportYDomain=o.hasFromView?null:i.projectionYDomain,o.brush=OS().on("brush",o.brushed.bind(NI(o))),o.gBrush=o.gMain.append("g").attr("id",`brush-${o.uid}`).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--n").style("pointer-events","none"),o.gBrush.selectAll(".handle--s").style("pointer-events","none"),o.gBrush.selectAll(".handle--w").style("pointer-events","none"),o.gBrush.selectAll(".handle--e").style("pointer-events","none"),a(u,o.viewportChanged.bind(NI(o))),o.rerender(),o.draw(),o}return uxe(r,[{key:"brushed",value:function(n){const o=n.selection;if(!this._xScale||!this._yScale)return;const a=[this._xScale.invert(o[0][0]),this._xScale.invert(o[1][0])],s=[this._yScale.invert(o[0][1]),this._yScale.invert(o[1][1])];this.hasFromView||(this.viewportXDomain=a,this.viewportYDomain=s),this.setDomainsCallback(a,s)}},{key:"viewportChanged",value:function(n,o){const a=n.domain(),s=o.domain();this.viewportXDomain=a,this.viewportYDomain=s,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),ih(Zs(r.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const n=this._xScale(this.viewportXDomain[0]),o=this._yScale(this.viewportYDomain[0]),a=this._xScale(this.viewportXDomain[1]),s=this._yScale(this.viewportYDomain[1]),c=[[n,o],[a,s]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,c),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}},{key:"setPosition",value:function(n){ih(Zs(r.prototype),"setPosition",this).call(this,n),this.draw()}},{key:"setDimensions",value:function(n){ih(Zs(r.prototype),"setDimensions",this).call(this,n);const o=this._xScale.range(),a=this._yScale.range(),s=o[1]-o[0],c=a[1]-a[0];this.brush.extent([[o[0]-s,a[0]-c],[o[1]+s,a[1]+c]]),this.gBrush.call(this.brush),this.draw()}}]),r}(Ka);function yxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_xe(i.key),i)}}function bxe(e,t,r){return t&&c8(e.prototype,t),r&&c8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _xe(e){var t=Txe(e,"string");return typeof t=="symbol"?t:String(t)}function Txe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oh(){return typeof Reflect<"u"&&Reflect.get?oh=Reflect.get.bind():oh=function(t,r,i){var n=Exe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},oh.apply(this,arguments)}function Exe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Qs(e),e!==null););return e}function Sxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RI(e,t)}function RI(e,t){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},RI(e,t)}function wxe(e){var t=Oxe();return function(){var i=Qs(e),n;if(t){var o=Qs(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Axe(this,n)}}function Axe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MI(e)}function MI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qs(e){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qs(e)}let LI=function(e){Sxe(r,e);var t=wxe(r);function r(i,n){var o;yxe(this,r),o=t.call(this,i,n);const{registerViewportChanged:a,removeViewportChanged:s,setDomainsCallback:c}=i,u=xt.nice();return o.uid=u,o.options=n,o.hasFromView=!i.projectionXDomain,o.removeViewportChanged=s,o.setDomainsCallback=c,o.viewportXDomain=o.hasFromView?null:i.projectionXDomain,o.viewportYDomain=o.hasFromView?null:[0,0],o.brush=ry().on("brush",o.brushed.bind(MI(o))),o.gBrush=o.gMain.append("g").attr("id",`brush-${o.uid}`).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--ne").style("pointer-events","none"),o.gBrush.selectAll(".handle--nw").style("pointer-events","none"),o.gBrush.selectAll(".handle--sw").style("pointer-events","none"),o.gBrush.selectAll(".handle--se").style("pointer-events","none"),o.gBrush.selectAll(".handle--n").style("pointer-events","none"),o.gBrush.selectAll(".handle--s").style("pointer-events","none"),a(u,o.viewportChanged.bind(MI(o))),o.rerender(),o.draw(),o}return bxe(r,[{key:"brushed",value:function(n){const o=n.selection;if(!this._xScale||!this._yScale)return;const a=[this._xScale.invert(o[0]),this._xScale.invert(o[1])],s=this.viewportYDomain;this.hasFromView||(this.viewportXDomain=a),this.setDomainsCallback(a,s)}},{key:"viewportChanged",value:function(n,o,a=!0){const s=n.domain(),c=o.domain();this.viewportXDomain=s,this.viewportYDomain=c,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),oh(Qs(r.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const n=this._xScale(this.viewportXDomain[0]),o=this._xScale(this.viewportXDomain[1]),a=[n,o];this.brush.on("brush",null),this.gBrush.call(this.brush.move,a),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}},{key:"setPosition",value:function(n){oh(Qs(r.prototype),"setPosition",this).call(this,n),this.draw()}},{key:"setDimensions",value:function(n){oh(Qs(r.prototype),"setDimensions",this).call(this,n);const o=this._xScale.range(),a=this._yScale.range(),s=o[1]-o[0];this.brush.extent([[o[0]-s,a[0]],[o[1]+s,a[1]]]),this.gBrush.call(this.brush),this.draw()}}]),r}(Ka);function kxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Cxe(i.key),i)}}function Ixe(e,t,r){return t&&u8(e.prototype,t),r&&u8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cxe(e){var t=Pxe(e,"string");return typeof t=="symbol"?t:String(t)}function Pxe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ah(){return typeof Reflect<"u"&&Reflect.get?ah=Reflect.get.bind():ah=function(t,r,i){var n=Dxe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},ah.apply(this,arguments)}function Dxe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Js(e),e!==null););return e}function xxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BI(e,t)}function BI(e,t){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},BI(e,t)}function Nxe(e){var t=Mxe();return function(){var i=Js(e),n;if(t){var o=Js(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Rxe(this,n)}}function Rxe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HI(e)}function HI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Js(e){return Js=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Js(e)}let f8=function(e){xxe(r,e);var t=Nxe(r);function r(i,n){var o;kxe(this,r),o=t.call(this,i,n);const{registerViewportChanged:a,removeViewportChanged:s,setDomainsCallback:c}=i,u=xt.nice();return o.uid=u,o.options=n,o.hasFromView=!i.projectionYDomain,o.removeViewportChanged=s,o.setDomainsCallback=c,o.viewportXDomain=o.hasFromView?null:[0,0],o.viewportYDomain=o.hasFromView?null:i.projectionYDomain,o.brush=Dd().on("brush",o.brushed.bind(HI(o))),o.gBrush=o.gMain.append("g").attr("id",`brush-${o.uid}`).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--ne").style("pointer-events","none"),o.gBrush.selectAll(".handle--nw").style("pointer-events","none"),o.gBrush.selectAll(".handle--sw").style("pointer-events","none"),o.gBrush.selectAll(".handle--se").style("pointer-events","none"),o.gBrush.selectAll(".handle--e").style("pointer-events","none"),o.gBrush.selectAll(".handle--w").style("pointer-events","none"),a(u,o.viewportChanged.bind(HI(o))),o.rerender(),o.draw(),o}return Ixe(r,[{key:"brushed",value:function(n){const o=n.selection;if(!this._xScale||!this._yScale)return;const a=this.viewportXDomain,s=[this._yScale.invert(o[0]),this._yScale.invert(o[1])];this.hasFromView||(this.viewportYDomain=s),this.setDomainsCallback(a,s)}},{key:"viewportChanged",value:function(n,o,a=!0){const s=n.domain(),c=o.domain();this.viewportXDomain=s,this.viewportYDomain=c,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),ah(Js(r.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const n=this._yScale(this.viewportYDomain[0]),o=this._yScale(this.viewportYDomain[1]),a=[n,o];this.brush.on("brush",null),this.gBrush.call(this.brush.move,a),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}},{key:"setPosition",value:function(n){ah(Js(r.prototype),"setPosition",this).call(this,n),this.draw()}},{key:"setDimensions",value:function(n){ah(Js(r.prototype),"setDimensions",this).call(this,n);const o=this._xScale.range(),a=this._yScale.range(),s=a[1]-a[0];this.brush.extent([[o[0],a[0]-s],[o[1],a[1]+s]]),this.gBrush.call(this.brush),this.draw()}}]),r}(Ka);function h8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Lxe(i.key),i)}}function p8(e,t,r){return t&&d8(e.prototype,t),r&&d8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lxe(e){var t=Bxe(e,"string");return typeof t=="symbol"?t:String(t)}function Bxe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const $I="__mixwith_appliedMixin",FI="__mixwith_wrappedMixin",m8=e=>e[FI]||e,Hxe=(e,t)=>{const r=t(e);return r.prototype[$I]=m8(t),r},$xe=(e,t)=>e.hasOwnProperty($I)&&e[$I]===m8(t),Fxe=(e,t)=>{for(;e!==null;){if($xe(e,t))return!0;e=Object.getPrototypeOf(e)}return!1},jI=(e,t)=>(Object.setPrototypeOf(t,e),e[FI]||(e[FI]=e),t),UI="__mixwith_cachedApplications",jxe=e=>jI(e,t=>{let r=t[UI];r||(t[UI]=new Map,r=t[UI]);let i=r.get(e);return i||(i=e(t),r.set(e,i)),i}),Uxe=e=>jI(e,t=>Fxe(t.prototype,e)?t:e(t)),Gxe=e=>jI(e,t=>Hxe(t,e)),F_=e=>Uxe(jxe(Gxe(e)));let zxe=function(){function e(t){h8(this,e),this.superclass=t||function(){function r(){h8(this,r)}return p8(r)}()}return p8(e,[{key:"with",value:function(...r){return r.reduce((i,n)=>n(i),this.superclass)}}]),e}();const sh=e=>new zxe(e);function Vxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Yxe(i.key),i)}}function Wxe(e,t,r){return t&&g8(e.prototype,t),r&&g8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yxe(e){var t=qxe(e,"string");return typeof t=="symbol"?t:String(t)}function qxe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(){return typeof Reflect<"u"&&Reflect.get?Tm=Reflect.get.bind():Tm=function(t,r,i){var n=Xxe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Tm.apply(this,arguments)}function Xxe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Nc(e),e!==null););return e}function Kxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GI(e,t)}function GI(e,t){return GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},GI(e,t)}function Zxe(e){var t=Jxe();return function(){var i=Nc(e),n;if(t){var o=Nc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Qxe(this,n)}}function Qxe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v8(e)}function v8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nc(e){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nc(e)}const zI=F_(e=>function(t){Kxe(i,t);var r=Zxe(i);function i(n,o){var a;Vxe(this,i),a=r.call(this,n,o);const{animate:s}=n;return a.highlighted=!1,a.animate=s,a.MOUSEOVER_RADIUS=4,a.pubSub=n.pubSub,a.pubSubs.push(a.pubSub.subscribe("app.mouseMove",a.mouseMoveHandler.bind(v8(a)))),a}return Wxe(i,[{key:"setPosition",value:function(o){Tm(Nc(i.prototype),"setPosition",this).call(this,o),this.pMain.position.x=this.position[0],this.pMain.position.y=this.position[1]}},{key:"zoomed",value:function(o,a){Tm(Nc(i.prototype),"zoomed",this).call(this,o,a),this.draw()}},{key:"respondsToPosition",value:function(){return this.highlighted}}]),i}(e));function Em(){return typeof Reflect<"u"&&Reflect.get?Em=Reflect.get.bind():Em=function(t,r,i){var n=eNe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Em.apply(this,arguments)}function eNe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Rc(e),e!==null););return e}function y8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,tNe(i.key),i)}}function _8(e,t,r){return t&&b8(e.prototype,t),r&&b8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tNe(e){var t=rNe(e,"string");return typeof t=="symbol"?t:String(t)}function rNe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VI(e,t)}function VI(e,t){return VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},VI(e,t)}function E8(e){var t=oNe();return function(){var i=Rc(e),n;if(t){var o=Rc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return nNe(this,n)}}function nNe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iNe(e)}function iNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rc(e){return Rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rc(e)}const aNe=F_(e=>function(t){T8(i,t);var r=E8(i);function i(){return y8(this,i),r.apply(this,arguments)}return _8(i,[{key:"drawHorizontalRule",value:function(o){let a=it(this.options.color||"black");this.highlighted&&(a=it("red")),o.lineStyle(this.strokeWidth,a,this.strokeOpacity);let s=0;for(;s<this.dimensions[0];)o.moveTo(s,this._yScale(this.yPosition)),o.lineTo(s+this.dashLength,this._yScale(this.yPosition)),s+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(o){return Math.abs(o.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}}]),i}(e));let S8=function(e){T8(r,e);var t=E8(r);function r(i,n){var o;return y8(this,r),o=t.call(this,i,n),o.yPosition=i.yPosition,o.strokeWidth=2,o.strokeOpacity=1,o.dashLength=5,o.dashGap=3,o}return _8(r,[{key:"mouseMoveHandler",value:function(n){if(this.isWithin(n.x,n.y)&&this.isMouseOverHorizontalLine(n)){this.highlighted=!0,this.draw();return}this.highlighted=!1,this.draw()}},{key:"draw",value:function(){const n=this.pMain;n.clear(),this.drawHorizontalRule(n),this.animate()}},{key:"exportSVG",value:function(){let n=null,o=null;Em(Rc(r.prototype),"exportSVG",this)?[o,n]=Em(Rc(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");a.setAttribute("class","horizontal-rule"),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),n.appendChild(a);const s=this.options.color||"black",c=document.createElement("line");return c.setAttribute("stroke",s),c.setAttribute("stroke-width",this.strokeWidth),c.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),c.setAttribute("x1",0),c.setAttribute("y1",this._yScale(this.yPosition)),c.setAttribute("x2",this.dimensions[0]),c.setAttribute("y2",this._yScale(this.yPosition)),a.appendChild(c),[o,n]}}]),r}(sh(jn).with(zI,aNe));function Sm(){return typeof Reflect<"u"&&Reflect.get?Sm=Reflect.get.bind():Sm=function(t,r,i){var n=sNe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},Sm.apply(this,arguments)}function sNe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Mc(e),e!==null););return e}function w8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,lNe(i.key),i)}}function O8(e,t,r){return t&&A8(e.prototype,t),r&&A8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lNe(e){var t=cNe(e,"string");return typeof t=="symbol"?t:String(t)}function cNe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WI(e,t)}function WI(e,t){return WI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},WI(e,t)}function I8(e){var t=hNe();return function(){var i=Mc(e),n;if(t){var o=Mc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return uNe(this,n)}}function uNe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fNe(e)}function fNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mc(e){return Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mc(e)}const C8=F_(e=>function(t){k8(i,t);var r=I8(i);function i(){return w8(this,i),r.apply(this,arguments)}return O8(i,[{key:"drawVerticalRule",value:function(o){let a=it(this.options.color||"black");this.highlighted&&(a=it("red")),o.lineStyle(this.strokeWidth,a,this.strokeOpacity);let s=0;for(;s<this.dimensions[1];)o.moveTo(this._xScale(this.xPosition),s),o.lineTo(this._xScale(this.xPosition),s+this.dashLength),s+=this.dashLength+this.dashGap}},{key:"isMouseOverVerticalLine",value:function(o){return Math.abs(o.x-this.position[0]-this._xScale(this.xPosition))<this.MOUSEOVER_RADIUS}}]),i}(e));let P8=function(e){k8(r,e);var t=I8(r);function r(i,n){var o;return w8(this,r),o=t.call(this,i,n),o.xPosition=i.xPosition,o.strokeWidth=2,o.strokeOpacity=1,o.dashLength=5,o.dashGap=3,o}return O8(r,[{key:"draw",value:function(){const n=this.pMain;n.clear(),this.drawVerticalRule(n),this.animate()}},{key:"exportSVG",value:function(){let n=null,o=null;Sm(Mc(r.prototype),"exportSVG",this)?[o,n]=Sm(Mc(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");a.setAttribute("class","vertical-rule"),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),n.appendChild(a);const s=this.options.color||"black",c=document.createElement("line");return c.setAttribute("stroke",s),c.setAttribute("stroke-width",this.strokeWidth),c.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),c.setAttribute("x1",this._xScale(this.xPosition)),c.setAttribute("y1",0),c.setAttribute("x2",this._xScale(this.xPosition)),c.setAttribute("y2",this.dimensions[1]),a.appendChild(c),[o,n]}},{key:"mouseMoveHandler",value:function(n){this.highlighted=this.isWithin(n.x,n.y)&&this.isMouseOverVerticalLine(n),this.draw()}}]),r}(sh(jn).with(zI,C8));function dNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,mNe(i.key),i)}}function pNe(e,t,r){return t&&D8(e.prototype,t),r&&D8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mNe(e){var t=gNe(e,"string");return typeof t=="symbol"?t:String(t)}function gNe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wm(){return typeof Reflect<"u"&&Reflect.get?wm=Reflect.get.bind():wm=function(t,r,i){var n=vNe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},wm.apply(this,arguments)}function vNe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Lc(e),e!==null););return e}function yNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YI(e,t)}function YI(e,t){return YI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},YI(e,t)}function bNe(e){var t=ENe();return function(){var i=Lc(e),n;if(t){var o=Lc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _Ne(this,n)}}function _Ne(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TNe(e)}function TNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ENe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lc(e){return Lc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lc(e)}let x8=function(e){yNe(r,e);var t=bNe(r);function r(i,n){var o;dNe(this,r),o=t.call(this,i,n);const{x:a,y:s}=i;return o.xPosition=a,o.yPosition=s,o.strokeWidth=2,o.strokeOpacity=1,o.dashLength=5,o.dashGap=3,o}return pNe(r,[{key:"draw",value:function(){const n=this.pMain;n.clear(),this.drawHorizontalRule(n),this.drawVerticalRule(n)}},{key:"mouseMoveHandler",value:function(n){this.highlighted=this.isWithin(n.x,n.y)&&(this.isMouseOverHorizontalLine(n)||this.isMouseOverVerticalLine(n)),this.draw()}},{key:"drawHorizontalRule",value:function(n){let o=it(this.options.color||"black");this.highlighted&&(o=it("red")),n.lineStyle(this.strokeWidth,o,this.strokeOpacity);let a=0;for(;a<this.dimensions[0];)n.moveTo(a,this._yScale(this.yPosition)),n.lineTo(a+this.dashLength,this._yScale(this.yPosition)),a+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(n){return Math.abs(n.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}},{key:"exportSVG",value:function(){let n=null,o=null;wm(Lc(r.prototype),"exportSVG",this)?[o,n]=wm(Lc(r.prototype),"exportSVG",this).call(this):(o=document.createElement("g"),n=o);const a=document.createElement("g");a.setAttribute("class","cross-rule"),a.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),n.appendChild(a);const s=this.options.color||"black",c=document.createElement("line");c.setAttribute("stroke",s),c.setAttribute("stroke-width",this.strokeWidth),c.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),c.setAttribute("x1",this._xScale(this.xPosition)),c.setAttribute("y1",0),c.setAttribute("x2",this._xScale(this.xPosition)),c.setAttribute("y2",this.dimensions[1]);const u=document.createElement("line");return u.setAttribute("stroke",s),u.setAttribute("stroke-width",this.strokeWidth),u.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),u.setAttribute("x1",0),u.setAttribute("y1",this._yScale(this.yPosition)),u.setAttribute("x2",this.dimensions[0]),u.setAttribute("y2",this._yScale(this.yPosition)),a.appendChild(c),a.appendChild(u),[o,n]}}]),r}(sh(jn).with(zI,C8));function SNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ANe(i.key),i)}}function wNe(e,t,r){return t&&N8(e.prototype,t),r&&N8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ANe(e){var t=ONe(e,"string");return typeof t=="symbol"?t:String(t)}function ONe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function el(){return typeof Reflect<"u"&&Reflect.get?el=Reflect.get.bind():el=function(t,r,i){var n=kNe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},el.apply(this,arguments)}function kNe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=fa(e),e!==null););return e}function INe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qI(e,t)}function qI(e,t){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},qI(e,t)}function CNe(e){var t=DNe();return function(){var i=fa(e),n;if(t){var o=fa(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return PNe(this,n)}}function PNe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R8(e)}function R8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fa(e){return fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fa(e)}let Am=function(e){INe(r,e);var t=CNe(r);function r(i,n){var o;SNe(this,r),o=t.call(this,i,n);const{animate:a}=i;return o.visibleTiles=new Set,o.visibleTileIds=new Set,o.fetching=new Set,o.fetchedTiles={},o.tileGraphics={},o.minX=typeof o.options.minPos<"u"&&!Number.isNaN(+o.options.minPos)?+o.options.minPos:-180,o.maxX=+o.options.maxPos||180,o.maxX=typeof o.options.maxPos<"u"&&!Number.isNaN(+o.options.maxPos)?+o.options.maxPos:180,o.minY=o.options.minY||o.minX,o.maxY=o.options.maxY||o.maxX,o.maxZoom=19,o.maxWidth=o.maxX-o.minX,o.animate=a,o.uuid=xt.nice(),o.refreshTilesDebounced=HS(o.refreshTiles.bind(R8(o)),cy),o}return wNe(r,[{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(n=>this.visibleTileIds.has(n))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(n=>this.fetchedTiles[n])}},{key:"setVisibleTiles",value:function(n){this.visibleTiles=n.map(o=>({tileId:this.tileToLocalId(o),remoteId:this.tileToRemoteId(o),mirrored:o.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(o=>o.tileId))}},{key:"removeAllTiles",value:function(){const n=new Set(Object.keys(this.fetchedTiles));this.removeTiles([...n])}},{key:"refreshTiles",value:function(){this.calculateVisibleTiles();const n=new Set(Object.keys(this.fetchedTiles)),o=[...this.visibleTiles].filter(s=>!this.fetching.has(s.remoteId)&&!n.has(s.tileId));for(let s=0;s<o.length;s++)this.fetching.add(o[s].remoteId);const a=[...n].filter(s=>!this.visibleTileIds.has(s));this.removeTiles(a),this.fetchNewTiles(o)}},{key:"removeTiles",value:function(n){n.length&&this.areAllVisibleTilesLoaded()&&(n.forEach(o=>{const a=o;this.destroyTile(this.fetchedTiles[a]),a in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[a]),delete this.tileGraphics[a]),delete this.fetchedTiles[a]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"tileToLocalId",value:function(n){return n.join(".")}},{key:"tileToRemoteId",value:function(n){return n.join(".")}},{key:"localToRemoteId",value:function(n){const o=n.split(".");return o.slice(0,o.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const n=at.calculateZoomLevel(this._xScale,this.minX,this.maxX),o=at.calculateZoomLevel(this._xScale,this.minY,this.maxY);let a=Math.min(Math.max(n,o),this.maxZoom);return this.options.maxZoom&&(this.options.maxZoom>=0?a=Math.min(this.options.maxZoom,a):console.error("Invalid maxZoom on track:",this)),a}},{key:"calculateVisibleTiles",value:function(){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=at.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.maxZoom,this.maxWidth),this.yTiles=at.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.maxZoom,this.maxWidth);const n=this.xTiles,o=this.yTiles,a=this.zoomLevel,s=[];for(let c=0;c<n.length;c++)for(let u=0;u<o.length;u++){const l=[a,n[c],o[u]];s.push(l)}this.setVisibleTiles(s)}},{key:"zoomed",value:function(n,o,a,s,c){el(fa(r.prototype),"zoomed",this).call(this,n,o),this.xScale(n),this.yScale(o),this.pMain.position.x=s,this.pMain.position.y=c,this.pMain.scale.x=a,this.pMain.scale.y=a,this.refreshTilesDebounced(),this.draw()}},{key:"setPosition",value:function(n){el(fa(r.prototype),"setPosition",this).call(this,n)}},{key:"setDimensions",value:function(n){el(fa(r.prototype),"setDimensions",this).call(this,n)}},{key:"areAllVisibleTilesLoaded",value:function(){const n=new Set(Object.keys(this.fetchedTiles)),o=[...this.visibleTileIds];for(let a=0;a<o.length;a++)if(!n.has(o[a]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(n){return n&&(this.scale.minValue=n),this.scale.minValue}},{key:"maxValue",value:function(n){return n&&(this.scale.maxValue=n),this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"getTilePosAndDimensions",value:function(n,o){const a=this.maxWidth/2**n,s=a,c=this.minX+o[0]*a,u=this.minY+o[1]*s;return{tileX:c,tileY:u,tileWidth:a,tileHeight:s}}},{key:"setSpriteProperties",value:function(n,o,a){const{tileX:s,tileY:c,tileWidth:u,tileHeight:l}=this.getTilePosAndDimensions(o,a);n.x=this._refXScale(s),n.y=this._refYScale(c);const h=s+u,f=c+l;n.width=this._refXScale(h)-this._refXScale(s),n.height=this._refYScale(f)-this._refYScale(c)}},{key:"initTile",value:function(n){const o=new He.PIXI.Texture(new He.PIXI.BaseTexture(n.tileData.img)),a=new He.PIXI.Sprite(o),s=n.graphics;n.sprite=a,this.setSpriteProperties(n.sprite,n.tileData.zoomLevel,n.tileData.tilePos),s.removeChildren(),s.addChild(n.sprite)}},{key:"updateTile",value:function(n){}},{key:"destroyTile",value:function(n){}},{key:"addMissingGraphics",value:function(){const n=Object.keys(this.fetchedTiles);for(let o=0;o<n.length;o++)if(!(n[o]in this.tileGraphics)){const a=new He.PIXI.Graphics;this.pMain.addChild(a),this.fetchedTiles[n[o]].graphics=a,this.initTile(this.fetchedTiles[n[o]]),this.tileGraphics[n[o]]=a}}},{key:"updateExistingGraphics",value:function(){const n=Object.keys(this.fetchedTiles);for(let o=0;o<n.length;o++)this.updateTile(this.fetchedTiles[n[o]])}},{key:"synchronizeTilesAndGraphics",value:function(){this.addMissingGraphics(),this.updateExistingGraphics()}},{key:"loadTileData",value:function(n,o){let a=this.lruCache.get(n.tileId);return a||(a=o(n.data,n.type),this.lruCache.put(n.tileId,a)),a}},{key:"getTileUrl",value:function(n){const o=["a","b","c"],a=Math.floor(Math.random()*o.length);return`https://${o[a]}.tile.openstreetmap.org/${n[0]}/${n[1]}/${n[2]}.png`}},{key:"fetchNewTiles",value:function(n){if(n.length>0){const o=[...new Set(n.map(a=>a.remoteId))];for(const a of o){const s=a.split("."),c=this.getTileUrl(s),u=new Image;u.crossOrigin="Anonymous",u.src=c,u.onload=()=>{const l={};l[a]={tileId:a,img:u,zoomLevel:+s[0],tilePos:[+s[1],+s[2]],tileSrc:c},this.receivedTiles(l)}}}}},{key:"receivedTiles",value:function(n){for(let o=0;o<this.visibleTiles.length;o++){const a=this.visibleTiles[o].tileId;n[this.visibleTiles[o].remoteId]&&this.visibleTiles[o].remoteId in n&&(a in this.fetchedTiles||(this.fetchedTiles[a]=this.visibleTiles[o]),this.fetchedTiles[a].tileData=n[this.visibleTiles[o].remoteId])}for(const o in n)n[o]&&this.fetching.has(o)&&this.fetching.delete(o);this.synchronizeTilesAndGraphics(),this.refreshTiles(),this.draw(),this.animate()}},{key:"draw",value:function(){this.delayDrawing||el(fa(r.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(){}},{key:"refScalesChanged",value:function(n,o){el(fa(r.prototype),"refScalesChanged",this).call(this,n,o);for(const a in this.fetchedTiles){const s=this.fetchedTiles[a];s.sprite&&this.setSpriteProperties(s.sprite,s.tileData.zoomLevel,s.tileData.tilePos)}}}]),r}(jn);function xNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,RNe(i.key),i)}}function NNe(e,t,r){return t&&M8(e.prototype,t),r&&M8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RNe(e){var t=MNe(e,"string");return typeof t=="symbol"?t:String(t)}function MNe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j_(){return typeof Reflect<"u"&&Reflect.get?j_=Reflect.get.bind():j_=function(t,r,i){var n=LNe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},j_.apply(this,arguments)}function LNe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=lh(e),e!==null););return e}function BNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XI(e,t)}function XI(e,t){return XI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},XI(e,t)}function HNe(e){var t=jNe();return function(){var i=lh(e),n;if(t){var o=lh(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return $Ne(this,n)}}function $Ne(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FNe(e)}function FNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lh(e)}let L8=function(e){BNe(r,e);var t=HNe(r);function r(){return xNe(this,r),t.apply(this,arguments)}return NNe(r,[{key:"initTile",value:function(n){tG.bind(this)(n),this.drawTile(n)}},{key:"drawTile",value:function(n){eG.bind(this)(n)}},{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"fetchNewTiles",value:function(n){n.forEach(o=>{const s=o.remoteId.split("."),c={zoomLevel:s[0],tilePos:s.slice(1,s.length).map(u=>+u)};this.fetchedTiles[o.tileId]=o,this.fetchedTiles[o.tileId].tileData=c,this.fetching.has(o.remoteId)&&this.fetching.delete(o.remoteId)}),this.synchronizeTilesAndGraphics(),this.draw(),this.animate()}},{key:"draw",value:function(){j_(lh(r.prototype),"draw",this).call(this)}}]),r}(Am);function UNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,zNe(i.key),i)}}function GNe(e,t,r){return t&&B8(e.prototype,t),r&&B8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zNe(e){var t=VNe(e,"string");return typeof t=="symbol"?t:String(t)}function VNe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U_(){return typeof Reflect<"u"&&Reflect.get?U_=Reflect.get.bind():U_=function(t,r,i){var n=WNe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},U_.apply(this,arguments)}function WNe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ch(e),e!==null););return e}function YNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KI(e,t)}function KI(e,t){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},KI(e,t)}function qNe(e){var t=ZNe();return function(){var i=ch(e),n;if(t){var o=ch(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return XNe(this,n)}}function XNe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KNe(e)}function KNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ch(e)}let H8=function(e){YNe(r,e);var t=qNe(r);function r(i,n){var o;return UNe(this,r),o=t.call(this,i,n),o.style=n.style,o.options.accessToken||(o.errorTextText="No access token provided in the viewconf's track options ('accessToken' option).",o.drawError()),o}return GNe(r,[{key:"rerender",value:function(n){U_(ch(r.prototype),"rerender",this).call(this,n),n.style!==this.style&&(this.style=n.style,this.removeAllTiles(),this.refreshTiles())}},{key:"getTileUrl",value:function(n){const o=this.options&&this.options.style?this.options.style:"streets-v10",a=this.options&&+this.options.tileSize?+this.options.tileSize:256;return`https://api.mapbox.com/styles/v1/mapbox/${o}/tiles/${a}/${n[0]}/${n[1]}/${n[2]}?access_token=${this.options.accessToken}`}}]),r}(Am);function QNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $8(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,eRe(i.key),i)}}function JNe(e,t,r){return t&&$8(e.prototype,t),r&&$8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eRe(e){var t=tRe(e,"string");return typeof t=="symbol"?t:String(t)}function tRe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZI(e,t)}function ZI(e,t){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},ZI(e,t)}function nRe(e){var t=aRe();return function(){var i=G_(e),n;if(t){var o=G_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return iRe(this,n)}}function iRe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oRe(e)}function oRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G_(e){return G_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G_(e)}let F8=function(e){rRe(r,e);var t=nRe(r);function r(i,n){var o;return QNe(this,r),o=t.call(this,i,n),o.style=n.style,o.options.tileSource||(o.errorTextText="No tile source string provided in the options. It should be in the form of http://a.com/{z}/{x}/{y}",o.drawError()),o}return JNe(r,[{key:"getTileUrl",value:function(n){let o=this.options.tileSource.replace("{z}",n[0]);return o=o.replace("{x}",n[1]),o=o.replace("{y}",n[2]),o}}]),r}(Am);var as={};(function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(o,a){return Object.prototype.hasOwnProperty.call(o,a)}e.assign=function(o){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var s=a.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var c in s)r(s,c)&&(o[c]=s[c])}}return o},e.shrinkBuf=function(o,a){return o.length===a?o:o.subarray?o.subarray(0,a):(o.length=a,o)};var i={arraySet:function(o,a,s,c,u){if(a.subarray&&o.subarray){o.set(a.subarray(s,s+c),u);return}for(var l=0;l<c;l++)o[u+l]=a[s+l]},flattenChunks:function(o){var a,s,c,u,l,h;for(c=0,a=0,s=o.length;a<s;a++)c+=o[a].length;for(h=new Uint8Array(c),u=0,a=0,s=o.length;a<s;a++)l=o[a],h.set(l,u),u+=l.length;return h}},n={arraySet:function(o,a,s,c,u){for(var l=0;l<c;l++)o[u+l]=a[s+l]},flattenChunks:function(o){return[].concat.apply([],o)}};e.setTyped=function(o){o?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,n))},e.setTyped(t)})(as);var Om={},ha={},uh={},sRe=as,lRe=4,j8=0,U8=1,cRe=2;function fh(e){for(var t=e.length;--t>=0;)e[t]=0}var uRe=0,G8=1,fRe=2,hRe=3,dRe=258,QI=29,km=256,Im=km+1+QI,hh=30,JI=19,z8=2*Im+1,Bc=15,eC=16,pRe=7,tC=256,V8=16,W8=17,Y8=18,rC=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],mRe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q8=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],gRe=512,ss=new Array((Im+2)*2);fh(ss);var Cm=new Array(hh*2);fh(Cm);var Pm=new Array(gRe);fh(Pm);var Dm=new Array(dRe-hRe+1);fh(Dm);var nC=new Array(QI);fh(nC);var V_=new Array(hh);fh(V_);function iC(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}var X8,K8,Z8;function oC(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Q8(e){return e<256?Pm[e]:Pm[256+(e>>>7)]}function xm(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function _i(e,t,r){e.bi_valid>eC-r?(e.bi_buf|=t<<e.bi_valid&65535,xm(e,e.bi_buf),e.bi_buf=t>>eC-e.bi_valid,e.bi_valid+=r-eC):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function da(e,t,r){_i(e,r[t*2],r[t*2+1])}function J8(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function vRe(e){e.bi_valid===16?(xm(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function yRe(e,t){var r=t.dyn_tree,i=t.max_code,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length,u,l,h,f,d,p,m=0;for(f=0;f<=Bc;f++)e.bl_count[f]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<z8;u++)l=e.heap[u],f=r[r[l*2+1]*2+1]+1,f>c&&(f=c,m++),r[l*2+1]=f,!(l>i)&&(e.bl_count[f]++,d=0,l>=s&&(d=a[l-s]),p=r[l*2],e.opt_len+=p*(f+d),o&&(e.static_len+=p*(n[l*2+1]+d)));if(m!==0){do{for(f=c-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(f=c;f!==0;f--)for(l=e.bl_count[f];l!==0;)h=e.heap[--u],!(h>i)&&(r[h*2+1]!==f&&(e.opt_len+=(f-r[h*2+1])*r[h*2],r[h*2+1]=f),l--)}}function e9(e,t,r){var i=new Array(Bc+1),n=0,o,a;for(o=1;o<=Bc;o++)i[o]=n=n+r[o-1]<<1;for(a=0;a<=t;a++){var s=e[a*2+1];s!==0&&(e[a*2]=J8(i[s]++,s))}}function bRe(){var e,t,r,i,n,o=new Array(Bc+1);for(r=0,i=0;i<QI-1;i++)for(nC[i]=r,e=0;e<1<<rC[i];e++)Dm[r++]=i;for(Dm[r-1]=i,n=0,i=0;i<16;i++)for(V_[i]=n,e=0;e<1<<z_[i];e++)Pm[n++]=i;for(n>>=7;i<hh;i++)for(V_[i]=n<<7,e=0;e<1<<z_[i]-7;e++)Pm[256+n++]=i;for(t=0;t<=Bc;t++)o[t]=0;for(e=0;e<=143;)ss[e*2+1]=8,e++,o[8]++;for(;e<=255;)ss[e*2+1]=9,e++,o[9]++;for(;e<=279;)ss[e*2+1]=7,e++,o[7]++;for(;e<=287;)ss[e*2+1]=8,e++,o[8]++;for(e9(ss,Im+1,o),e=0;e<hh;e++)Cm[e*2+1]=5,Cm[e*2]=J8(e,5);X8=new iC(ss,rC,km+1,Im,Bc),K8=new iC(Cm,z_,0,hh,Bc),Z8=new iC(new Array(0),mRe,0,JI,pRe)}function t9(e){var t;for(t=0;t<Im;t++)e.dyn_ltree[t*2]=0;for(t=0;t<hh;t++)e.dyn_dtree[t*2]=0;for(t=0;t<JI;t++)e.bl_tree[t*2]=0;e.dyn_ltree[tC*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function r9(e){e.bi_valid>8?xm(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function _Re(e,t,r,i){r9(e),i&&(xm(e,r),xm(e,~r)),sRe.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function n9(e,t,r,i){var n=t*2,o=r*2;return e[n]<e[o]||e[n]===e[o]&&i[t]<=i[r]}function aC(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&n9(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!n9(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function i9(e,t,r){var i,n,o=0,a,s;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],n=e.pending_buf[e.l_buf+o],o++,i===0?da(e,n,t):(a=Dm[n],da(e,a+km+1,t),s=rC[a],s!==0&&(n-=nC[a],_i(e,n,s)),i--,a=Q8(i),da(e,a,r),s=z_[a],s!==0&&(i-=V_[a],_i(e,i,s)));while(o<e.last_lit);da(e,tC,t)}function sC(e,t){var r=t.dyn_tree,i=t.stat_desc.static_tree,n=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,c=-1,u;for(e.heap_len=0,e.heap_max=z8,a=0;a<o;a++)r[a*2]!==0?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):r[a*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,n&&(e.static_len-=i[u*2+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)aC(e,r,a);u=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aC(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,r[u*2]=r[a*2]+r[s*2],e.depth[u]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,r[a*2+1]=r[s*2+1]=u,e.heap[1]=u++,aC(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],yRe(e,t),e9(r,c,e.bl_count)}function o9(e,t,r){var i,n=-1,o,a=t[0*2+1],s=0,c=7,u=4;for(a===0&&(c=138,u=3),t[(r+1)*2+1]=65535,i=0;i<=r;i++)o=a,a=t[(i+1)*2+1],!(++s<c&&o===a)&&(s<u?e.bl_tree[o*2]+=s:o!==0?(o!==n&&e.bl_tree[o*2]++,e.bl_tree[V8*2]++):s<=10?e.bl_tree[W8*2]++:e.bl_tree[Y8*2]++,s=0,n=o,a===0?(c=138,u=3):o===a?(c=6,u=3):(c=7,u=4))}function a9(e,t,r){var i,n=-1,o,a=t[0*2+1],s=0,c=7,u=4;for(a===0&&(c=138,u=3),i=0;i<=r;i++)if(o=a,a=t[(i+1)*2+1],!(++s<c&&o===a)){if(s<u)do da(e,o,e.bl_tree);while(--s!==0);else o!==0?(o!==n&&(da(e,o,e.bl_tree),s--),da(e,V8,e.bl_tree),_i(e,s-3,2)):s<=10?(da(e,W8,e.bl_tree),_i(e,s-3,3)):(da(e,Y8,e.bl_tree),_i(e,s-11,7));s=0,n=o,a===0?(c=138,u=3):o===a?(c=6,u=3):(c=7,u=4)}}function TRe(e){var t;for(o9(e,e.dyn_ltree,e.l_desc.max_code),o9(e,e.dyn_dtree,e.d_desc.max_code),sC(e,e.bl_desc),t=JI-1;t>=3&&e.bl_tree[q8[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function ERe(e,t,r,i){var n;for(_i(e,t-257,5),_i(e,r-1,5),_i(e,i-4,4),n=0;n<i;n++)_i(e,e.bl_tree[q8[n]*2+1],3);a9(e,e.dyn_ltree,t-1),a9(e,e.dyn_dtree,r-1)}function SRe(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return j8;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return U8;for(r=32;r<km;r++)if(e.dyn_ltree[r*2]!==0)return U8;return j8}var s9=!1;function wRe(e){s9||(bRe(),s9=!0),e.l_desc=new oC(e.dyn_ltree,X8),e.d_desc=new oC(e.dyn_dtree,K8),e.bl_desc=new oC(e.bl_tree,Z8),e.bi_buf=0,e.bi_valid=0,t9(e)}function l9(e,t,r,i){_i(e,(uRe<<1)+(i?1:0),3),_Re(e,t,r,!0)}function ARe(e){_i(e,G8<<1,3),da(e,tC,ss),vRe(e)}function ORe(e,t,r,i){var n,o,a=0;e.level>0?(e.strm.data_type===cRe&&(e.strm.data_type=SRe(e)),sC(e,e.l_desc),sC(e,e.d_desc),a=TRe(e),n=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=n&&(n=o)):n=o=r+5,r+4<=n&&t!==-1?l9(e,t,r,i):e.strategy===lRe||o===n?(_i(e,(G8<<1)+(i?1:0),3),i9(e,ss,Cm)):(_i(e,(fRe<<1)+(i?1:0),3),ERe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),i9(e,e.dyn_ltree,e.dyn_dtree)),t9(e),i&&r9(e)}function kRe(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Dm[r]+km+1)*2]++,e.dyn_dtree[Q8(t)*2]++),e.last_lit===e.lit_bufsize-1}uh._tr_init=wRe,uh._tr_stored_block=l9,uh._tr_flush_block=ORe,uh._tr_tally=kRe,uh._tr_align=ARe;function IRe(e,t,r,i){for(var n=e&65535|0,o=e>>>16&65535|0,a=0;r!==0;){a=r>2e3?2e3:r,r-=a;do n=n+t[i++]|0,o=o+n|0;while(--a);n%=65521,o%=65521}return n|o<<16|0}var c9=IRe;function CRe(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var PRe=CRe();function DRe(e,t,r,i){var n=PRe,o=i+r;e^=-1;for(var a=i;a<o;a++)e=e>>>8^n[(e^t[a])&255];return e^-1}var u9=DRe,lC={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ri=as,Qi=uh,f9=c9,tl=u9,xRe=lC,Hc=0,NRe=1,RRe=3,rl=4,h9=5,pa=0,d9=1,Ji=-2,MRe=-3,cC=-5,LRe=-1,BRe=1,W_=2,HRe=3,$Re=4,FRe=0,jRe=2,Y_=8,URe=9,GRe=15,zRe=8,VRe=29,WRe=256,uC=WRe+1+VRe,YRe=30,qRe=19,XRe=2*uC+1,KRe=15,Yt=3,nl=258,Oo=nl+Yt+1,ZRe=32,q_=42,fC=69,X_=73,K_=91,Z_=103,$c=113,Nm=666,sn=1,Rm=2,Fc=3,dh=4,QRe=3;function il(e,t){return e.msg=xRe[t],t}function p9(e){return(e<<1)-(e>4?9:0)}function ol(e){for(var t=e.length;--t>=0;)e[t]=0}function al(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(ri.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function En(e,t){Qi._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,al(e.strm)}function er(e,t){e.pending_buf[e.pending++]=t}function Mm(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function JRe(e,t,r,i){var n=e.avail_in;return n>i&&(n=i),n===0?0:(e.avail_in-=n,ri.arraySet(t,e.input,e.next_in,n,r),e.state.wrap===1?e.adler=f9(e.adler,t,n,r):e.state.wrap===2&&(e.adler=tl(e.adler,t,n,r)),e.next_in+=n,e.total_in+=n,n)}function m9(e,t){var r=e.max_chain_length,i=e.strstart,n,o,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-Oo?e.strstart-(e.w_size-Oo):0,u=e.window,l=e.w_mask,h=e.prev,f=e.strstart+nl,d=u[i+a-1],p=u[i+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,!(u[n+a]!==p||u[n+a-1]!==d||u[n]!==u[i]||u[++n]!==u[i+1])){i+=2,n++;do;while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<f);if(o=nl-(f-i),i=f-nl,o>a){if(e.match_start=t,a=o,o>=s)break;d=u[i+a-1],p=u[i+a]}}while((t=h[t&l])>c&&--r!==0);return a<=e.lookahead?a:e.lookahead}function jc(e){var t=e.w_size,r,i,n,o,a;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Oo)){ri.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,r=i;do n=e.head[--r],e.head[r]=n>=t?n-t:0;while(--i);i=t,r=i;do n=e.prev[--r],e.prev[r]=n>=t?n-t:0;while(--i);o+=t}if(e.strm.avail_in===0)break;if(i=JRe(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i,e.lookahead+e.insert>=Yt)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+Yt-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<Yt)););}while(e.lookahead<Oo&&e.strm.avail_in!==0)}function eMe(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(jc(e),e.lookahead===0&&t===Hc)return sn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,En(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Oo&&(En(e,!1),e.strm.avail_out===0))return sn}return e.insert=0,t===rl?(En(e,!0),e.strm.avail_out===0?Fc:dh):(e.strstart>e.block_start&&(En(e,!1),e.strm.avail_out===0),sn)}function hC(e,t){for(var r,i;;){if(e.lookahead<Oo){if(jc(e),e.lookahead<Oo&&t===Hc)return sn;if(e.lookahead===0)break}if(r=0,e.lookahead>=Yt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Yt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Oo&&(e.match_length=m9(e,r)),e.match_length>=Yt)if(i=Qi._tr_tally(e,e.strstart-e.match_start,e.match_length-Yt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Yt){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Yt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=Qi._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(En(e,!1),e.strm.avail_out===0))return sn}return e.insert=e.strstart<Yt-1?e.strstart:Yt-1,t===rl?(En(e,!0),e.strm.avail_out===0?Fc:dh):e.last_lit&&(En(e,!1),e.strm.avail_out===0)?sn:Rm}function ph(e,t){for(var r,i,n;;){if(e.lookahead<Oo){if(jc(e),e.lookahead<Oo&&t===Hc)return sn;if(e.lookahead===0)break}if(r=0,e.lookahead>=Yt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Yt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Yt-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Oo&&(e.match_length=m9(e,r),e.match_length<=5&&(e.strategy===BRe||e.match_length===Yt&&e.strstart-e.match_start>4096)&&(e.match_length=Yt-1)),e.prev_length>=Yt&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-Yt,i=Qi._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Yt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Yt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Yt-1,e.strstart++,i&&(En(e,!1),e.strm.avail_out===0))return sn}else if(e.match_available){if(i=Qi._tr_tally(e,0,e.window[e.strstart-1]),i&&En(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return sn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Qi._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Yt-1?e.strstart:Yt-1,t===rl?(En(e,!0),e.strm.avail_out===0?Fc:dh):e.last_lit&&(En(e,!1),e.strm.avail_out===0)?sn:Rm}function tMe(e,t){for(var r,i,n,o,a=e.window;;){if(e.lookahead<=nl){if(jc(e),e.lookahead<=nl&&t===Hc)return sn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Yt&&e.strstart>0&&(n=e.strstart-1,i=a[n],i===a[++n]&&i===a[++n]&&i===a[++n])){o=e.strstart+nl;do;while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<o);e.match_length=nl-(o-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Yt?(r=Qi._tr_tally(e,1,e.match_length-Yt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Qi._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(En(e,!1),e.strm.avail_out===0))return sn}return e.insert=0,t===rl?(En(e,!0),e.strm.avail_out===0?Fc:dh):e.last_lit&&(En(e,!1),e.strm.avail_out===0)?sn:Rm}function rMe(e,t){for(var r;;){if(e.lookahead===0&&(jc(e),e.lookahead===0)){if(t===Hc)return sn;break}if(e.match_length=0,r=Qi._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(En(e,!1),e.strm.avail_out===0))return sn}return e.insert=0,t===rl?(En(e,!0),e.strm.avail_out===0?Fc:dh):e.last_lit&&(En(e,!1),e.strm.avail_out===0)?sn:Rm}function ma(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}var mh;mh=[new ma(0,0,0,0,eMe),new ma(4,4,8,4,hC),new ma(4,5,16,8,hC),new ma(4,6,32,32,hC),new ma(4,4,16,16,ph),new ma(8,16,32,32,ph),new ma(8,16,128,128,ph),new ma(8,32,128,256,ph),new ma(32,128,258,1024,ph),new ma(32,258,258,4096,ph)];function nMe(e){e.window_size=2*e.w_size,ol(e.head),e.max_lazy_match=mh[e.level].max_lazy,e.good_match=mh[e.level].good_length,e.nice_match=mh[e.level].nice_length,e.max_chain_length=mh[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Yt-1,e.match_available=0,e.ins_h=0}function iMe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ri.Buf16(XRe*2),this.dyn_dtree=new ri.Buf16((2*YRe+1)*2),this.bl_tree=new ri.Buf16((2*qRe+1)*2),ol(this.dyn_ltree),ol(this.dyn_dtree),ol(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ri.Buf16(KRe+1),this.heap=new ri.Buf16(2*uC+1),ol(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ri.Buf16(2*uC+1),ol(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function g9(e){var t;return!e||!e.state?il(e,Ji):(e.total_in=e.total_out=0,e.data_type=jRe,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?q_:$c,e.adler=t.wrap===2?0:1,t.last_flush=Hc,Qi._tr_init(t),pa)}function v9(e){var t=g9(e);return t===pa&&nMe(e.state),t}function oMe(e,t){return!e||!e.state||e.state.wrap!==2?Ji:(e.state.gzhead=t,pa)}function y9(e,t,r,i,n,o){if(!e)return Ji;var a=1;if(t===LRe&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),n<1||n>URe||r!==Y_||i<8||i>15||t<0||t>9||o<0||o>$Re)return il(e,Ji);i===8&&(i=9);var s=new iMe;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=n+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Yt-1)/Yt),s.window=new ri.Buf8(s.w_size*2),s.head=new ri.Buf16(s.hash_size),s.prev=new ri.Buf16(s.w_size),s.lit_bufsize=1<<n+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new ri.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=r,v9(e)}function aMe(e,t){return y9(e,t,Y_,GRe,zRe,FRe)}function sMe(e,t){var r,i,n,o;if(!e||!e.state||t>h9||t<0)return e?il(e,Ji):Ji;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===Nm&&t!==rl)return il(e,e.avail_out===0?cC:Ji);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===q_)if(i.wrap===2)e.adler=0,er(i,31),er(i,139),er(i,8),i.gzhead?(er(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),er(i,i.gzhead.time&255),er(i,i.gzhead.time>>8&255),er(i,i.gzhead.time>>16&255),er(i,i.gzhead.time>>24&255),er(i,i.level===9?2:i.strategy>=W_||i.level<2?4:0),er(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(er(i,i.gzhead.extra.length&255),er(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=tl(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=fC):(er(i,0),er(i,0),er(i,0),er(i,0),er(i,0),er(i,i.level===9?2:i.strategy>=W_||i.level<2?4:0),er(i,QRe),i.status=$c);else{var a=Y_+(i.w_bits-8<<4)<<8,s=-1;i.strategy>=W_||i.level<2?s=0:i.level<6?s=1:i.level===6?s=2:s=3,a|=s<<6,i.strstart!==0&&(a|=ZRe),a+=31-a%31,i.status=$c,Mm(i,a),i.strstart!==0&&(Mm(i,e.adler>>>16),Mm(i,e.adler&65535)),e.adler=1}if(i.status===fC)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=tl(e.adler,i.pending_buf,i.pending-n,n)),al(e),n=i.pending,i.pending===i.pending_buf_size));)er(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=tl(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=X_)}else i.status=X_;if(i.status===X_)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=tl(e.adler,i.pending_buf,i.pending-n,n)),al(e),n=i.pending,i.pending===i.pending_buf_size)){o=1;break}i.gzindex<i.gzhead.name.length?o=i.gzhead.name.charCodeAt(i.gzindex++)&255:o=0,er(i,o)}while(o!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=tl(e.adler,i.pending_buf,i.pending-n,n)),o===0&&(i.gzindex=0,i.status=K_)}else i.status=K_;if(i.status===K_)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=tl(e.adler,i.pending_buf,i.pending-n,n)),al(e),n=i.pending,i.pending===i.pending_buf_size)){o=1;break}i.gzindex<i.gzhead.comment.length?o=i.gzhead.comment.charCodeAt(i.gzindex++)&255:o=0,er(i,o)}while(o!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=tl(e.adler,i.pending_buf,i.pending-n,n)),o===0&&(i.status=Z_)}else i.status=Z_;if(i.status===Z_&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&al(e),i.pending+2<=i.pending_buf_size&&(er(i,e.adler&255),er(i,e.adler>>8&255),e.adler=0,i.status=$c)):i.status=$c),i.pending!==0){if(al(e),e.avail_out===0)return i.last_flush=-1,pa}else if(e.avail_in===0&&p9(t)<=p9(r)&&t!==rl)return il(e,cC);if(i.status===Nm&&e.avail_in!==0)return il(e,cC);if(e.avail_in!==0||i.lookahead!==0||t!==Hc&&i.status!==Nm){var c=i.strategy===W_?rMe(i,t):i.strategy===HRe?tMe(i,t):mh[i.level].func(i,t);if((c===Fc||c===dh)&&(i.status=Nm),c===sn||c===Fc)return e.avail_out===0&&(i.last_flush=-1),pa;if(c===Rm&&(t===NRe?Qi._tr_align(i):t!==h9&&(Qi._tr_stored_block(i,0,0,!1),t===RRe&&(ol(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),al(e),e.avail_out===0))return i.last_flush=-1,pa}return t!==rl?pa:i.wrap<=0?d9:(i.wrap===2?(er(i,e.adler&255),er(i,e.adler>>8&255),er(i,e.adler>>16&255),er(i,e.adler>>24&255),er(i,e.total_in&255),er(i,e.total_in>>8&255),er(i,e.total_in>>16&255),er(i,e.total_in>>24&255)):(Mm(i,e.adler>>>16),Mm(i,e.adler&65535)),al(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?pa:d9)}function lMe(e){var t;return!e||!e.state?Ji:(t=e.state.status,t!==q_&&t!==fC&&t!==X_&&t!==K_&&t!==Z_&&t!==$c&&t!==Nm?il(e,Ji):(e.state=null,t===$c?il(e,MRe):pa))}function cMe(e,t){var r=t.length,i,n,o,a,s,c,u,l;if(!e||!e.state||(i=e.state,a=i.wrap,a===2||a===1&&i.status!==q_||i.lookahead))return Ji;for(a===1&&(e.adler=f9(e.adler,t,r,0)),i.wrap=0,r>=i.w_size&&(a===0&&(ol(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new ri.Buf8(i.w_size),ri.arraySet(l,t,r-i.w_size,i.w_size,0),t=l,r=i.w_size),s=e.avail_in,c=e.next_in,u=e.input,e.avail_in=r,e.next_in=0,e.input=t,jc(i);i.lookahead>=Yt;){n=i.strstart,o=i.lookahead-(Yt-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+Yt-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--o);i.strstart=n,i.lookahead=Yt-1,jc(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Yt-1,i.match_available=0,e.next_in=c,e.input=u,e.avail_in=s,i.wrap=a,pa}ha.deflateInit=aMe,ha.deflateInit2=y9,ha.deflateReset=v9,ha.deflateResetKeep=g9,ha.deflateSetHeader=oMe,ha.deflate=sMe,ha.deflateEnd=lMe,ha.deflateSetDictionary=cMe,ha.deflateInfo="pako deflate (from Nodeca project)";var Uc={},Q_=as,b9=!0,_9=!0;try{String.fromCharCode.apply(null,[0])}catch{b9=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_9=!1}for(var Lm=new Q_.Buf8(256),sl=0;sl<256;sl++)Lm[sl]=sl>=252?6:sl>=248?5:sl>=240?4:sl>=224?3:sl>=192?2:1;Lm[254]=Lm[254]=1,Uc.string2buf=function(e){var t,r,i,n,o,a=e.length,s=0;for(n=0;n<a;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<a&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Q_.Buf8(s),o=0,n=0;o<s;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<a&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};function T9(e,t){if(t<65534&&(e.subarray&&_9||!e.subarray&&b9))return String.fromCharCode.apply(null,Q_.shrinkBuf(e,t));for(var r="",i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r}Uc.buf2binstring=function(e){return T9(e,e.length)},Uc.binstring2buf=function(e){for(var t=new Q_.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},Uc.buf2string=function(e,t){var r,i,n,o,a=t||e.length,s=new Array(a*2);for(i=0,r=0;r<a;){if(n=e[r++],n<128){s[i++]=n;continue}if(o=Lm[n],o>4){s[i++]=65533,r+=o-1;continue}for(n&=o===2?31:o===3?15:7;o>1&&r<a;)n=n<<6|e[r++]&63,o--;if(o>1){s[i++]=65533;continue}n<65536?s[i++]=n:(n-=65536,s[i++]=55296|n>>10&1023,s[i++]=56320|n&1023)}return T9(s,i)},Uc.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Lm[e[r]]>t?r:t};function uMe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var E9=uMe,Bm=ha,Hm=as,dC=Uc,pC=lC,fMe=E9,S9=Object.prototype.toString,hMe=0,mC=4,gh=0,w9=1,A9=2,dMe=-1,pMe=0,mMe=8;function Gc(e){if(!(this instanceof Gc))return new Gc(e);this.options=Hm.assign({level:dMe,method:mMe,chunkSize:16384,windowBits:15,memLevel:8,strategy:pMe,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fMe,this.strm.avail_out=0;var r=Bm.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==gh)throw new Error(pC[r]);if(t.header&&Bm.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(typeof t.dictionary=="string"?i=dC.string2buf(t.dictionary):S9.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,r=Bm.deflateSetDictionary(this.strm,i),r!==gh)throw new Error(pC[r]);this._dict_set=!0}}Gc.prototype.push=function(e,t){var r=this.strm,i=this.options.chunkSize,n,o;if(this.ended)return!1;o=t===~~t?t:t===!0?mC:hMe,typeof e=="string"?r.input=dC.string2buf(e):S9.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Hm.Buf8(i),r.next_out=0,r.avail_out=i),n=Bm.deflate(r,o),n!==w9&&n!==gh)return this.onEnd(n),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(o===mC||o===A9))&&(this.options.to==="string"?this.onData(dC.buf2binstring(Hm.shrinkBuf(r.output,r.next_out))):this.onData(Hm.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&n!==w9);return o===mC?(n=Bm.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===gh):(o===A9&&(this.onEnd(gh),r.avail_out=0),!0)},Gc.prototype.onData=function(e){this.chunks.push(e)},Gc.prototype.onEnd=function(e){e===gh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Hm.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function gC(e,t){var r=new Gc(t);if(r.push(e,!0),r.err)throw r.msg||pC[r.err];return r.result}function gMe(e,t){return t=t||{},t.raw=!0,gC(e,t)}function vMe(e,t){return t=t||{},t.gzip=!0,gC(e,t)}Om.Deflate=Gc,Om.deflate=gC,Om.deflateRaw=gMe,Om.gzip=vMe;var $m={},ko={},J_=30,yMe=12,bMe=function(t,r){var i,n,o,a,s,c,u,l,h,f,d,p,m,g,v,_,y,b,T,S,k,O,D,R,w;i=t.state,n=t.next_in,R=t.input,o=n+(t.avail_in-5),a=t.next_out,w=t.output,s=a-(r-t.avail_out),c=a+(t.avail_out-257),u=i.dmax,l=i.wsize,h=i.whave,f=i.wnext,d=i.window,p=i.hold,m=i.bits,g=i.lencode,v=i.distcode,_=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;e:do{m<15&&(p+=R[n++]<<m,m+=8,p+=R[n++]<<m,m+=8),b=g[p&_];t:for(;;){if(T=b>>>24,p>>>=T,m-=T,T=b>>>16&255,T===0)w[a++]=b&65535;else if(T&16){S=b&65535,T&=15,T&&(m<T&&(p+=R[n++]<<m,m+=8),S+=p&(1<<T)-1,p>>>=T,m-=T),m<15&&(p+=R[n++]<<m,m+=8,p+=R[n++]<<m,m+=8),b=v[p&y];r:for(;;){if(T=b>>>24,p>>>=T,m-=T,T=b>>>16&255,T&16){if(k=b&65535,T&=15,m<T&&(p+=R[n++]<<m,m+=8,m<T&&(p+=R[n++]<<m,m+=8)),k+=p&(1<<T)-1,k>u){t.msg="invalid distance too far back",i.mode=J_;break e}if(p>>>=T,m-=T,T=a-s,k>T){if(T=k-T,T>h&&i.sane){t.msg="invalid distance too far back",i.mode=J_;break e}if(O=0,D=d,f===0){if(O+=l-T,T<S){S-=T;do w[a++]=d[O++];while(--T);O=a-k,D=w}}else if(f<T){if(O+=l+f-T,T-=f,T<S){S-=T;do w[a++]=d[O++];while(--T);if(O=0,f<S){T=f,S-=T;do w[a++]=d[O++];while(--T);O=a-k,D=w}}}else if(O+=f-T,T<S){S-=T;do w[a++]=d[O++];while(--T);O=a-k,D=w}for(;S>2;)w[a++]=D[O++],w[a++]=D[O++],w[a++]=D[O++],S-=3;S&&(w[a++]=D[O++],S>1&&(w[a++]=D[O++]))}else{O=a-k;do w[a++]=w[O++],w[a++]=w[O++],w[a++]=w[O++],S-=3;while(S>2);S&&(w[a++]=w[O++],S>1&&(w[a++]=w[O++]))}}else if(T&64){t.msg="invalid distance code",i.mode=J_;break e}else{b=v[(b&65535)+(p&(1<<T)-1)];continue r}break}}else if(T&64)if(T&32){i.mode=yMe;break e}else{t.msg="invalid literal/length code",i.mode=J_;break e}else{b=g[(b&65535)+(p&(1<<T)-1)];continue t}break}}while(n<o&&a<c);S=m>>3,n-=S,m-=S<<3,p&=(1<<m)-1,t.next_in=n,t.next_out=a,t.avail_in=n<o?5+(o-n):5-(n-o),t.avail_out=a<c?257+(c-a):257-(a-c),i.hold=p,i.bits=m},O9=as,vh=15,k9=852,I9=592,C9=0,vC=1,P9=2,_Me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],TMe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],EMe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],SMe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],wMe=function(t,r,i,n,o,a,s,c){var u=c.bits,l=0,h=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,b,T,S,k,O,D=null,R=0,w,L=new O9.Buf16(vh+1),B=new O9.Buf16(vh+1),A=null,M=0,j,W,K;for(l=0;l<=vh;l++)L[l]=0;for(h=0;h<n;h++)L[r[i+h]]++;for(p=u,d=vh;d>=1&&L[d]===0;d--);if(p>d&&(p=d),d===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,c.bits=1,0;for(f=1;f<d&&L[f]===0;f++);for(p<f&&(p=f),v=1,l=1;l<=vh;l++)if(v<<=1,v-=L[l],v<0)return-1;if(v>0&&(t===C9||d!==1))return-1;for(B[1]=0,l=1;l<vh;l++)B[l+1]=B[l]+L[l];for(h=0;h<n;h++)r[i+h]!==0&&(s[B[r[i+h]]++]=h);if(t===C9?(D=A=s,w=19):t===vC?(D=_Me,R-=257,A=TMe,M-=257,w=256):(D=EMe,A=SMe,w=-1),y=0,h=0,l=f,O=a,m=p,g=0,S=-1,_=1<<p,k=_-1,t===vC&&_>k9||t===P9&&_>I9)return 1;for(;;){j=l-g,s[h]<w?(W=0,K=s[h]):s[h]>w?(W=A[M+s[h]],K=D[R+s[h]]):(W=96,K=0),b=1<<l-g,T=1<<m,f=T;do T-=b,o[O+(y>>g)+T]=j<<24|W<<16|K|0;while(T!==0);for(b=1<<l-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,h++,--L[l]===0){if(l===d)break;l=r[i+s[h]]}if(l>p&&(y&k)!==S){for(g===0&&(g=p),O+=f,m=l-g,v=1<<m;m+g<d&&(v-=L[m+g],!(v<=0));)m++,v<<=1;if(_+=1<<m,t===vC&&_>k9||t===P9&&_>I9)return 1;S=y&k,o[S]=p<<24|m<<16|O-a|0}}return y!==0&&(o[O+y]=l-g<<24|64<<16|0),c.bits=p,0},Mi=as,yC=c9,ga=u9,AMe=bMe,Fm=wMe,OMe=0,D9=1,x9=2,N9=4,kMe=5,e0=6,zc=0,IMe=1,CMe=2,eo=-2,R9=-3,M9=-4,PMe=-5,L9=8,B9=1,H9=2,$9=3,F9=4,j9=5,U9=6,G9=7,z9=8,V9=9,W9=10,t0=11,ls=12,bC=13,Y9=14,_C=15,q9=16,X9=17,K9=18,Z9=19,r0=20,n0=21,Q9=22,J9=23,e7=24,t7=25,r7=26,TC=27,n7=28,i7=29,Cr=30,o7=31,DMe=32,xMe=852,NMe=592,RMe=15,MMe=RMe;function a7(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function LMe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Mi.Buf16(320),this.work=new Mi.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s7(e){var t;return!e||!e.state?eo:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=B9,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Mi.Buf32(xMe),t.distcode=t.distdyn=new Mi.Buf32(NMe),t.sane=1,t.back=-1,zc)}function l7(e){var t;return!e||!e.state?eo:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,s7(e))}function c7(e,t){var r,i;return!e||!e.state||(i=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?eo:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,l7(e))}function u7(e,t){var r,i;return e?(i=new LMe,e.state=i,i.window=null,r=c7(e,t),r!==zc&&(e.state=null),r):eo}function BMe(e){return u7(e,MMe)}var f7=!0,EC,SC;function HMe(e){if(f7){var t;for(EC=new Mi.Buf32(512),SC=new Mi.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Fm(D9,e.lens,0,288,EC,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Fm(x9,e.lens,0,32,SC,0,e.work,{bits:5}),f7=!1}e.lencode=EC,e.lenbits=9,e.distcode=SC,e.distbits=5}function h7(e,t,r,i){var n,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Mi.Buf8(o.wsize)),i>=o.wsize?(Mi.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(n=o.wsize-o.wnext,n>i&&(n=i),Mi.arraySet(o.window,t,r-i,n,o.wnext),i-=n,i?(Mi.arraySet(o.window,t,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0}function $Me(e,t){var r,i,n,o,a,s,c,u,l,h,f,d,p,m,g=0,v,_,y,b,T,S,k,O,D=new Mi.Buf8(4),R,w,L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return eo;r=e.state,r.mode===ls&&(r.mode=bC),a=e.next_out,n=e.output,c=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,u=r.hold,l=r.bits,h=s,f=c,O=zc;e:for(;;)switch(r.mode){case B9:if(r.wrap===0){r.mode=bC;break}for(;l<16;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(r.wrap&2&&u===35615){r.check=0,D[0]=u&255,D[1]=u>>>8&255,r.check=ga(r.check,D,2,0),u=0,l=0,r.mode=H9;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Cr;break}if((u&15)!==L9){e.msg="unknown compression method",r.mode=Cr;break}if(u>>>=4,l-=4,k=(u&15)+8,r.wbits===0)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=Cr;break}r.dmax=1<<k,e.adler=r.check=1,r.mode=u&512?W9:ls,u=0,l=0;break;case H9:for(;l<16;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(r.flags=u,(r.flags&255)!==L9){e.msg="unknown compression method",r.mode=Cr;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Cr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(D[0]=u&255,D[1]=u>>>8&255,r.check=ga(r.check,D,2,0)),u=0,l=0,r.mode=$9;case $9:for(;l<32;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}r.head&&(r.head.time=u),r.flags&512&&(D[0]=u&255,D[1]=u>>>8&255,D[2]=u>>>16&255,D[3]=u>>>24&255,r.check=ga(r.check,D,4,0)),u=0,l=0,r.mode=F9;case F9:for(;l<16;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(D[0]=u&255,D[1]=u>>>8&255,r.check=ga(r.check,D,2,0)),u=0,l=0,r.mode=j9;case j9:if(r.flags&1024){for(;l<16;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(D[0]=u&255,D[1]=u>>>8&255,r.check=ga(r.check,D,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=U9;case U9:if(r.flags&1024&&(d=r.length,d>s&&(d=s),d&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Mi.arraySet(r.head.extra,i,o,d,k)),r.flags&512&&(r.check=ga(r.check,i,d,o)),s-=d,o+=d,r.length-=d),r.length))break e;r.length=0,r.mode=G9;case G9:if(r.flags&2048){if(s===0)break e;d=0;do k=i[o+d++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k));while(k&&d<s);if(r.flags&512&&(r.check=ga(r.check,i,d,o)),s-=d,o+=d,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=z9;case z9:if(r.flags&4096){if(s===0)break e;d=0;do k=i[o+d++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k));while(k&&d<s);if(r.flags&512&&(r.check=ga(r.check,i,d,o)),s-=d,o+=d,k)break e}else r.head&&(r.head.comment=null);r.mode=V9;case V9:if(r.flags&512){for(;l<16;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Cr;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=ls;break;case W9:for(;l<32;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}e.adler=r.check=a7(u),u=0,l=0,r.mode=t0;case t0:if(r.havedict===0)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=l,CMe;e.adler=r.check=1,r.mode=ls;case ls:if(t===kMe||t===e0)break e;case bC:if(r.last){u>>>=l&7,l-=l&7,r.mode=TC;break}for(;l<3;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}switch(r.last=u&1,u>>>=1,l-=1,u&3){case 0:r.mode=Y9;break;case 1:if(HMe(r),r.mode=r0,t===e0){u>>>=2,l-=2;break e}break;case 2:r.mode=X9;break;case 3:e.msg="invalid block type",r.mode=Cr}u>>>=2,l-=2;break;case Y9:for(u>>>=l&7,l-=l&7;l<32;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Cr;break}if(r.length=u&65535,u=0,l=0,r.mode=_C,t===e0)break e;case _C:r.mode=q9;case q9:if(d=r.length,d){if(d>s&&(d=s),d>c&&(d=c),d===0)break e;Mi.arraySet(n,i,o,d,a),s-=d,o+=d,c-=d,a+=d,r.length-=d;break}r.mode=ls;break;case X9:for(;l<14;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(r.nlen=(u&31)+257,u>>>=5,l-=5,r.ndist=(u&31)+1,u>>>=5,l-=5,r.ncode=(u&15)+4,u>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Cr;break}r.have=0,r.mode=K9;case K9:for(;r.have<r.ncode;){for(;l<3;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}r.lens[L[r.have++]]=u&7,u>>>=3,l-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},O=Fm(OMe,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,O){e.msg="invalid code lengths set",r.mode=Cr;break}r.have=0,r.mode=Z9;case Z9:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],v=g>>>24,_=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(y<16)u>>>=v,l-=v,r.lens[r.have++]=y;else{if(y===16){for(w=v+2;l<w;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(u>>>=v,l-=v,r.have===0){e.msg="invalid bit length repeat",r.mode=Cr;break}k=r.lens[r.have-1],d=3+(u&3),u>>>=2,l-=2}else if(y===17){for(w=v+3;l<w;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}u>>>=v,l-=v,k=0,d=3+(u&7),u>>>=3,l-=3}else{for(w=v+7;l<w;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}u>>>=v,l-=v,k=0,d=11+(u&127),u>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Cr;break}for(;d--;)r.lens[r.have++]=k}}if(r.mode===Cr)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Cr;break}if(r.lenbits=9,R={bits:r.lenbits},O=Fm(D9,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,O){e.msg="invalid literal/lengths set",r.mode=Cr;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},O=Fm(x9,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,O){e.msg="invalid distances set",r.mode=Cr;break}if(r.mode=r0,t===e0)break e;case r0:r.mode=n0;case n0:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=l,AMe(e,f),a=e.next_out,n=e.output,c=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,u=r.hold,l=r.bits,r.mode===ls&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],v=g>>>24,_=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(_&&!(_&240)){for(b=v,T=_,S=y;g=r.lencode[S+((u&(1<<b+T)-1)>>b)],v=g>>>24,_=g>>>16&255,y=g&65535,!(b+v<=l);){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=v,l-=v,r.back+=v,r.length=y,_===0){r.mode=r7;break}if(_&32){r.back=-1,r.mode=ls;break}if(_&64){e.msg="invalid literal/length code",r.mode=Cr;break}r.extra=_&15,r.mode=Q9;case Q9:if(r.extra){for(w=r.extra;l<w;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=J9;case J9:for(;g=r.distcode[u&(1<<r.distbits)-1],v=g>>>24,_=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(!(_&240)){for(b=v,T=_,S=y;g=r.distcode[S+((u&(1<<b+T)-1)>>b)],v=g>>>24,_=g>>>16&255,y=g&65535,!(b+v<=l);){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=v,l-=v,r.back+=v,_&64){e.msg="invalid distance code",r.mode=Cr;break}r.offset=y,r.extra=_&15,r.mode=e7;case e7:if(r.extra){for(w=r.extra;l<w;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Cr;break}r.mode=t7;case t7:if(c===0)break e;if(d=f-c,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Cr;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=n,p=a-r.offset,d=r.length;d>c&&(d=c),c-=d,r.length-=d;do n[a++]=m[p++];while(--d);r.length===0&&(r.mode=n0);break;case r7:if(c===0)break e;n[a++]=r.length,c--,r.mode=n0;break;case TC:if(r.wrap){for(;l<32;){if(s===0)break e;s--,u|=i[o++]<<l,l+=8}if(f-=c,e.total_out+=f,r.total+=f,f&&(e.adler=r.check=r.flags?ga(r.check,n,f,a-f):yC(r.check,n,f,a-f)),f=c,(r.flags?u:a7(u))!==r.check){e.msg="incorrect data check",r.mode=Cr;break}u=0,l=0}r.mode=n7;case n7:if(r.wrap&&r.flags){for(;l<32;){if(s===0)break e;s--,u+=i[o++]<<l,l+=8}if(u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Cr;break}u=0,l=0}r.mode=i7;case i7:O=IMe;break e;case Cr:O=R9;break e;case o7:return M9;case DMe:default:return eo}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=l,(r.wsize||f!==e.avail_out&&r.mode<Cr&&(r.mode<TC||t!==N9))&&h7(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,r.total+=f,r.wrap&&f&&(e.adler=r.check=r.flags?ga(r.check,n,f,e.next_out-f):yC(r.check,n,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===ls?128:0)+(r.mode===r0||r.mode===_C?256:0),(h===0&&f===0||t===N9)&&O===zc&&(O=PMe),O}function FMe(e){if(!e||!e.state)return eo;var t=e.state;return t.window&&(t.window=null),e.state=null,zc}function jMe(e,t){var r;return!e||!e.state||(r=e.state,!(r.wrap&2))?eo:(r.head=t,t.done=!1,zc)}function UMe(e,t){var r=t.length,i,n,o;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==t0)?eo:i.mode===t0&&(n=1,n=yC(n,t,r,0),n!==i.check)?R9:(o=h7(e,t,r,r),o?(i.mode=o7,M9):(i.havedict=1,zc))}ko.inflateReset=l7,ko.inflateReset2=c7,ko.inflateResetKeep=s7,ko.inflateInit=BMe,ko.inflateInit2=u7,ko.inflate=$Me,ko.inflateEnd=FMe,ko.inflateGetHeader=jMe,ko.inflateSetDictionary=UMe,ko.inflateInfo="pako inflate (from Nodeca project)";var d7={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function GMe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zMe=GMe,yh=ko,jm=as,i0=Uc,Yr=d7,wC=lC,VMe=E9,WMe=zMe,p7=Object.prototype.toString;function Vc(e){if(!(this instanceof Vc))return new Vc(e);this.options=jm.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VMe,this.strm.avail_out=0;var r=yh.inflateInit2(this.strm,t.windowBits);if(r!==Yr.Z_OK)throw new Error(wC[r]);if(this.header=new WMe,yh.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=i0.string2buf(t.dictionary):p7.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=yh.inflateSetDictionary(this.strm,t.dictionary),r!==Yr.Z_OK)))throw new Error(wC[r])}Vc.prototype.push=function(e,t){var r=this.strm,i=this.options.chunkSize,n=this.options.dictionary,o,a,s,c,u,l=!1;if(this.ended)return!1;a=t===~~t?t:t===!0?Yr.Z_FINISH:Yr.Z_NO_FLUSH,typeof e=="string"?r.input=i0.binstring2buf(e):p7.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new jm.Buf8(i),r.next_out=0,r.avail_out=i),o=yh.inflate(r,Yr.Z_NO_FLUSH),o===Yr.Z_NEED_DICT&&n&&(o=yh.inflateSetDictionary(this.strm,n)),o===Yr.Z_BUF_ERROR&&l===!0&&(o=Yr.Z_OK,l=!1),o!==Yr.Z_STREAM_END&&o!==Yr.Z_OK)return this.onEnd(o),this.ended=!0,!1;r.next_out&&(r.avail_out===0||o===Yr.Z_STREAM_END||r.avail_in===0&&(a===Yr.Z_FINISH||a===Yr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=i0.utf8border(r.output,r.next_out),c=r.next_out-s,u=i0.buf2string(r.output,s),r.next_out=c,r.avail_out=i-c,c&&jm.arraySet(r.output,r.output,s,c,0),this.onData(u)):this.onData(jm.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(l=!0)}while((r.avail_in>0||r.avail_out===0)&&o!==Yr.Z_STREAM_END);return o===Yr.Z_STREAM_END&&(a=Yr.Z_FINISH),a===Yr.Z_FINISH?(o=yh.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Yr.Z_OK):(a===Yr.Z_SYNC_FLUSH&&(this.onEnd(Yr.Z_OK),r.avail_out=0),!0)},Vc.prototype.onData=function(e){this.chunks.push(e)},Vc.prototype.onEnd=function(e){e===Yr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jm.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function AC(e,t){var r=new Vc(t);if(r.push(e,!0),r.err)throw r.msg||wC[r.err];return r.result}function YMe(e,t){return t=t||{},t.raw=!0,AC(e,t)}$m.Inflate=Vc,$m.inflate=AC,$m.inflateRaw=YMe,$m.ungzip=AC;var qMe=as.assign,XMe=Om,KMe=$m,ZMe=d7,m7={};qMe(m7,XMe,KMe,ZMe);var QMe=m7;const JMe=ui(QMe);var eLe=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];const tLe=eLe;function rLe(e){if(typeof e!="string")throw new TypeError("input must be a string");let t=[],r,i,n={LOCUS_TAG:"LOCUS",DEFINITION_TAG:"DEFINITION",ACCESSION_TAG:"ACCESSION",VERSION_TAG:"VERSION",KEYWORDS_TAG:"KEYWORDS",SOURCE_TAG:"SOURCE",ORGANISM_TAG:"ORGANISM",REFERENCE_TAG:"REFERENCE",AUTHORS_TAG:"AUTHORS",CONSORTIUM_TAG:"CONSRTM",TITLE_TAG:"TITLE",JOURNAL_TAG:"JOURNAL",PUBMED_TAG:"PUBMED",REMARK_TAG:"REMARK",FEATURES_TAG:"FEATURES",BASE_COUNT_TAG:"BASE COUNT",ORIGIN_TAG:"ORIGIN",END_SEQUENCE_TAG:"//"},o=e.split(/\r?\n/),a,s,c,u,l,h=!1;for(let A of o){if(A===null)break;let M=O(A),j=R(A),W=L(A),K=w(A);if(M===n.END_SEQUENCE_TAG||K?(a=M,s=null):W&&(s=M),!(A.trim()===""||M===";")){if(!h&&a!==n.LOCUS_TAG)break;switch(a){case n.LOCUS_TAG:h=!0,g(A);break;case n.FEATURES_TAG:y(A,M,j);break;case n.ORIGIN_TAG:m(A,M);break;case n.DEFINITION_TAG:case n.ACCESSION_TAG:case n.VERSION_TAG:case n.KEYWORDS_TAG:D(a,A,a.toLowerCase());break;case n.SOURCE_TAG:s===n.ORGANISM_TAG?D(s,A,"organism"):D(M,A,"source");break;case n.REFERENCE_TAG:if(M===n.REFERENCE_TAG){const oe=r.references||[];r.references=oe,oe.push({})}_(A,s);break;case n.END_SEQUENCE_TAG:f();break}}}return t[t.length-1]!==r&&f(),t;function f(){p(),t.push(r)}function d(){return r.features[r.features.length-1]}function p(){if(r&&r.features)for(let A=0;A<r.features.length;A++)r.features[A]=B(r.features[A])}function m(A,M){if(M!==n.ORIGIN_TAG){let j=A.replace(/[\s]*[0-9]*/g,"");r.sequence+=j}}function g(A){r={features:[],name:"Untitled sequence",sequence:"",references:[]},A=v(n.LOCUS_TAG,A);const M=A.match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*([^\s]+)?$/);let j=M[1],W=+M[2],K=M[3],oe=M[4]==="circular";const fe=r;let Ae="";M[6]?(fe.genbankDivision=M[5],Ae=M[6]):Ae=M[5],fe.circular=oe,fe.moleculeType=K;const de=Ae.match(/^(\d{2})-(.{3})-(\d{4})$/),Z=new Date;Z.setFullYear(+de[3]),Z.setUTCMonth(tLe.indexOf(de[2].toUpperCase())),Z.setDate(+de[1]),Z.setUTCHours(12),Z.setMinutes(0),Z.setSeconds(0),Z.setMilliseconds(0),fe.date=Z.toISOString(),fe.name=j,fe.size=W}function v(A,M){return M=M.replace(/^\s*/,""),M.indexOf(A)===0&&(M=M.replace(A,"")),M.trim()}function _(A,M){const j=r.references;let W=j[j.length-1];M?D(M,A,M.toLowerCase(),W):D(n.REFERENCE_TAG,A,"description",W)}function y(A,M,j){let W;if(M===n.FEATURES_TAG){u=!0;return}if(u&&(c=g7(A),u=!1),nLe(A,c))l?(S(A.trim()),l=!0):(i&&(i[i.length-1]+=A.trim().replace(/"/g,"")),l=!1);else if(T(A))d()&&(k(A),l=!1);else{j.match(/complement/g)?W=-1:W=1,b();let K=d();K.type=M,K.strand=W,S(j),l=!0}}function b(){r.features.push({notes:{}})}function T(A){let M=!1;return(A.trim().charAt(0).match(/\//)||A.match(/^[\s]*\/[\w]+=[\S]+/))&&(M=!0),M}function S(A){A=A.trim();let M=[];A.replace(/(\d+)/g,function(W,K){M.push(K)});let j=d();j.start=+M[0],j.end=M[1]===void 0?+M[0]:+M[1]}function k(A){let M,j;M=A.trim(),M=M.replace(/^\/|"$/g,""),j=M.split(/="|=/);let W=j[1];W&&(W=W.replace(/\\/g," "),A.match(/="/g)?W=W.replace(/".*/g,""):W.match(/^\d+$/g)&&(W=+W));let K=j[0],oe=d().notes;oe[K]?oe[K].push(W):oe[K]=[W],i=oe[K]}function O(A){let M;return A=A.trim(),M=A.split(/[\s]+/),M[0]}function D(A,M,j,W){W=W||r;let K=v(A,M);W[j]=W[j]?`${W[j]} `:"",W[j]+=K}function R(A){let M;return A.indexOf("=")<0?(A=A.replace(/^[\s]*[\S]+[\s]+|[\s]+$/,""),A=A.trim(),A):(M=A.split(/=/),M[1])}function w(A){let M=!1;return A.substr(0,10).match(/^[\S]+/)&&(M=!0),M}function L(A){let M=!1;return A.substr(0,10).match(/^[\s]+[\S]+/)&&(M=!0),M}function B(A){return A.notes.label?A.name=A.notes.label[0]:A.notes.gene?A.name=A.notes.gene[0]:A.notes.ApEinfo_label?A.name=A.notes.ApEinfo_label[0]:A.notes.name?A.name=A.notes.name[0]:A.notes.organism?A.name=A.notes.organism[0]:A.notes.locus_tag?A.name=A.notes.locus_tag[0]:A.notes.note?A.name=A.notes.note[0]:A.name="Untitled Feature",A.name=typeof A.name=="string"?A.name:String(A.name),A}}function nLe(e,t){let r=g7(e);return!(t===r||e.trim().charAt(0).match(/\//))}function g7(e){let t=/^\s*/.exec(e);return t!==null?t[0].length:0}var iLe=rLe;const oLe=ui(iLe);function aLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v7(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,lLe(i.key),i)}}function sLe(e,t,r){return t&&v7(e.prototype,t),r&&v7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lLe(e){var t=cLe(e,"string");return typeof t=="symbol"?t:String(t)}function cLe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y7(e,t,r){const i=[];if(!e.length)return[];let o=e[0].start,a=e[0].end;for(let s=1;s<e.length;s++)e[s].start<a+5*1/t?a=Math.max(a,e[s].end):(i.push({type:"filler",start:o,end:a,strand:r}),o=e[s].start,a=e[s].end);return i.push({start:o,end:a,type:"filler",strand:r}),i}function uLe(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}function fLe(e){return e.type==="filler"}function hLe(e){const t=e.end-e.start,r=e.strand===1?"+":"-",i=xt.nice();return fLe(e)?{xStart:e.start,xEnd:e.end,strand:e.strand,fields:[],type:"filler",uid:i}:{xStart:e.start,xEnd:e.end,strand:r,chrOffset:0,importance:e.end-e.start,uid:i,type:e.type,fields:["chrom",e.start,e.end,e.name,t,r,"","",e.type,e.name,e.start.toString(),e.end.toString(),e.start.toString(),e.end.toString()]}}function dLe(e){const t=oLe(e),r=uLe(t[0].features.filter(i=>i.type!=="source").sort((i,n)=>i.start-n.start));return{json:t,features:r}}async function pLe(e,{gzipped:t}){if(!t)return e.text();const r=await e.arrayBuffer();return JMe.inflate(r,{to:"string"})}let b7=function(){function e(t){aLe(this,e),this.dataConfig=t,this.trackUid=xt.nice(),this.errorTxt="";let r;if(t.url){const i=t.url.slice(t.url.length-3);r=fetch(t.url,{mode:"cors",redirect:"follow",method:"GET"}).then(n=>pLe(n,{gzipped:i===".gz"}))}else if(t.text)r=Promise.resolve(t.text);else throw new Error("No data or URL specified");this.gbDataPromise=r.then(i=>dLe(i))}return sLe(e,[{key:"tilesetInfo",value:function(r){return this.tilesetInfoLoading=!0,this.gbDataPromise.then(i=>{this.tilesetInfoLoading=!1;const n=1024,o={name:`genbank-${this.trackUid}`,tile_size:n,max_zoom:Math.ceil(Math.log(i.json[0].size/n)/Math.log(2)),max_width:i.json[0].size,min_pos:[0],max_pos:[i.json[0].size]};return r&&r(o),o}).catch(i=>{this.tilesetInfoLoading=!1,r&&r({error:`Error parsing genbank: ${i}`})})}},{key:"fetchTilesDebounced",value:async function(r,i){const n={},o=[],a=[];for(const c of i){const u=c.split("."),l=parseInt(u[0],10),h=parseInt(u[1],10);if(Number.isNaN(h)||Number.isNaN(l)){console.warn("Invalid tile zoom or position:",l,h);continue}o.push(c),a.push(this.tile(l,h))}const s=await Promise.all(a);for(let c=0;c<s.length;c++){const u=o[c];n[u]=s[c],n[u].tilePositionId=u}return r(n),n}},{key:"tile",value:async function(r,i){const[n,o]=await Promise.all([this.tilesetInfo(),this.gbDataPromise]);if(!n)throw new Error("No tileset info");const a=+n.max_width/2**+r,s=n.min_pos[0]+i*a,c=n.min_pos[0]+(i+1)*a,u=o.features.filter(m=>m.end>s&&m.start<c),l=1024/2**(n.max_zoom-r),h=y7(u.filter(m=>m.strand===1),l,"+"),f=y7(u.filter(m=>m.strand!==1),l,"-"),d=[],p=20;for(let m=0;m<o.features.length&&!(d.length>=p);m++)o.features[m].end>=s&&o.features[m].start<=c&&d.push(o.features[m]);return[d,h,f].flatMap(m=>m.map(hLe))}}]),e}();function mLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _7(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,vLe(i.key),i)}}function gLe(e,t,r){return t&&_7(e.prototype,t),r&&_7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vLe(e){var t=yLe(e,"string");return typeof t=="symbol"?t:String(t)}function yLe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let T7=function(){function e(t){mLe(this,e),this.dataConfig=t,this.tilesetInfoData=Object.values(this.dataConfig.tilesetInfo)[0],this.tilesData={},this.tilesetInfoLoading=!0}return gLe(e,[{key:"tilesetInfo",value:async function(r){return this.tilesetInfoLoading=!1,r(this.tilesetInfoData),this.tilesetInfoData}},{key:"fetchTilesDebounced",value:async function(r,i){this.tilesData={};for(const a of Object.keys(this.dataConfig.tiles)){const c=`localtile.${a.split(".").slice(1).join(".")}`;this.tilesData[c]=this.dataConfig.tiles[a]}const n={},o=i.map(a=>`localtile.${a}`);tw(this.tilesData,"",o);for(const a of i)n[a]=this.tilesData[`localtile.${a}`];return r(n),n}},{key:"tile",value:function(r,i){}}]),e}();const bLe=(e,t,r,i=AT)=>{const n=r[e.type];return n?new n.dataFetcher(i,e,t):e.type==="genbank"?new b7(e,t):e.type==="local-tiles"?new T7(e,t):new rm(e,t)};var st=1e-6,Um=1e-12,Dt=Math.PI,$r=Dt/2,o0=Dt/4,ni=Dt*2,gr=180/Dt,lt=Dt/180,qt=Math.abs,bh=Math.atan,ii=Math.atan2,rt=Math.cos,a0=Math.ceil,E7=Math.exp,OC=Math.hypot,s0=Math.log,kC=Math.pow,Ke=Math.sin,to=Math.sign||function(e){return e>0?1:e<0?-1:0},dn=Math.sqrt,IC=Math.tan;function S7(e){return e>1?0:e<-1?Dt:Math.acos(e)}function oi(e){return e>1?$r:e<-1?-$r:Math.asin(e)}function w7(e){return(e=Ke(e/2))*e}function Nr(){}function l0(e,t){e&&O7.hasOwnProperty(e.type)&&O7[e.type](e,t)}var A7={Feature:function(e,t){l0(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,i=-1,n=r.length;++i<n;)l0(r[i].geometry,t)}},O7={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)e=r[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){CC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)CC(r[i],t,0)},Polygon:function(e,t){k7(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)k7(r[i],t)},GeometryCollection:function(e,t){for(var r=e.geometries,i=-1,n=r.length;++i<n;)l0(r[i],t)}};function CC(e,t,r){var i=-1,n=e.length-r,o;for(t.lineStart();++i<n;)o=e[i],t.point(o[0],o[1],o[2]);t.lineEnd()}function k7(e,t){var r=-1,i=e.length;for(t.polygonStart();++r<i;)CC(e[r],t,1);t.polygonEnd()}function Io(e,t){e&&A7.hasOwnProperty(e.type)?A7[e.type](e,t):l0(e,t)}var c0=new Zr,u0=new Zr,I7,C7,PC,DC,xC,va={point:Nr,lineStart:Nr,lineEnd:Nr,polygonStart:function(){c0=new Zr,va.lineStart=_Le,va.lineEnd=TLe},polygonEnd:function(){var e=+c0;u0.add(e<0?ni+e:e),this.lineStart=this.lineEnd=this.point=Nr},sphere:function(){u0.add(ni)}};function _Le(){va.point=ELe}function TLe(){P7(I7,C7)}function ELe(e,t){va.point=P7,I7=e,C7=t,e*=lt,t*=lt,PC=e,DC=rt(t=t/2+o0),xC=Ke(t)}function P7(e,t){e*=lt,t*=lt,t=t/2+o0;var r=e-PC,i=r>=0?1:-1,n=i*r,o=rt(t),a=Ke(t),s=xC*a,c=DC*o+s*rt(n),u=s*i*Ke(n);c0.add(ii(u,c)),PC=e,DC=o,xC=a}function SLe(e){return u0=new Zr,Io(e,va),u0*2}function f0(e){return[ii(e[1],e[0]),oi(e[2])]}function Wc(e){var t=e[0],r=e[1],i=rt(r);return[i*rt(t),i*Ke(t),Ke(r)]}function h0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _h(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function NC(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function d0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function p0(e){var t=dn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Rr,Ti,Fr,Li,Yc,D7,x7,Th,Gm,ll,cs,us={point:RC,lineStart:R7,lineEnd:M7,polygonStart:function(){us.point=L7,us.lineStart=wLe,us.lineEnd=ALe,Gm=new Zr,va.polygonStart()},polygonEnd:function(){va.polygonEnd(),us.point=RC,us.lineStart=R7,us.lineEnd=M7,c0<0?(Rr=-(Fr=180),Ti=-(Li=90)):Gm>st?Li=90:Gm<-st&&(Ti=-90),cs[0]=Rr,cs[1]=Fr},sphere:function(){Rr=-(Fr=180),Ti=-(Li=90)}};function RC(e,t){ll.push(cs=[Rr=e,Fr=e]),t<Ti&&(Ti=t),t>Li&&(Li=t)}function N7(e,t){var r=Wc([e*lt,t*lt]);if(Th){var i=_h(Th,r),n=[i[1],-i[0],0],o=_h(n,i);p0(o),o=f0(o);var a=e-Yc,s=a>0?1:-1,c=o[0]*gr*s,u,l=qt(a)>180;l^(s*Yc<c&&c<s*e)?(u=o[1]*gr,u>Li&&(Li=u)):(c=(c+360)%360-180,l^(s*Yc<c&&c<s*e)?(u=-o[1]*gr,u<Ti&&(Ti=u)):(t<Ti&&(Ti=t),t>Li&&(Li=t))),l?e<Yc?Bi(Rr,e)>Bi(Rr,Fr)&&(Fr=e):Bi(e,Fr)>Bi(Rr,Fr)&&(Rr=e):Fr>=Rr?(e<Rr&&(Rr=e),e>Fr&&(Fr=e)):e>Yc?Bi(Rr,e)>Bi(Rr,Fr)&&(Fr=e):Bi(e,Fr)>Bi(Rr,Fr)&&(Rr=e)}else ll.push(cs=[Rr=e,Fr=e]);t<Ti&&(Ti=t),t>Li&&(Li=t),Th=r,Yc=e}function R7(){us.point=N7}function M7(){cs[0]=Rr,cs[1]=Fr,us.point=RC,Th=null}function L7(e,t){if(Th){var r=e-Yc;Gm.add(qt(r)>180?r+(r>0?360:-360):r)}else D7=e,x7=t;va.point(e,t),N7(e,t)}function wLe(){va.lineStart()}function ALe(){L7(D7,x7),va.lineEnd(),qt(Gm)>st&&(Rr=-(Fr=180)),cs[0]=Rr,cs[1]=Fr,Th=null}function Bi(e,t){return(t-=e)<0?t+360:t}function OLe(e,t){return e[0]-t[0]}function B7(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function kLe(e){var t,r,i,n,o,a,s;if(Li=Fr=-(Rr=Ti=1/0),ll=[],Io(e,us),r=ll.length){for(ll.sort(OLe),t=1,i=ll[0],o=[i];t<r;++t)n=ll[t],B7(i,n[0])||B7(i,n[1])?(Bi(i[0],n[1])>Bi(i[0],i[1])&&(i[1]=n[1]),Bi(n[0],i[1])>Bi(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(a=-1/0,r=o.length-1,t=0,i=o[r];t<=r;i=n,++t)n=o[t],(s=Bi(i[1],n[0]))>a&&(a=s,Rr=n[0],Fr=i[1])}return ll=cs=null,Rr===1/0||Ti===1/0?[[NaN,NaN],[NaN,NaN]]:[[Rr,Ti],[Fr,Li]]}var zm,m0,g0,v0,y0,b0,_0,T0,MC,LC,BC,H7,$7,ai,si,li,Co={sphere:Nr,point:HC,lineStart:F7,lineEnd:j7,polygonStart:function(){Co.lineStart=PLe,Co.lineEnd=DLe},polygonEnd:function(){Co.lineStart=F7,Co.lineEnd=j7}};function HC(e,t){e*=lt,t*=lt;var r=rt(t);Vm(r*rt(e),r*Ke(e),Ke(t))}function Vm(e,t,r){++zm,g0+=(e-g0)/zm,v0+=(t-v0)/zm,y0+=(r-y0)/zm}function F7(){Co.point=ILe}function ILe(e,t){e*=lt,t*=lt;var r=rt(t);ai=r*rt(e),si=r*Ke(e),li=Ke(t),Co.point=CLe,Vm(ai,si,li)}function CLe(e,t){e*=lt,t*=lt;var r=rt(t),i=r*rt(e),n=r*Ke(e),o=Ke(t),a=ii(dn((a=si*o-li*n)*a+(a=li*i-ai*o)*a+(a=ai*n-si*i)*a),ai*i+si*n+li*o);m0+=a,b0+=a*(ai+(ai=i)),_0+=a*(si+(si=n)),T0+=a*(li+(li=o)),Vm(ai,si,li)}function j7(){Co.point=HC}function PLe(){Co.point=xLe}function DLe(){U7(H7,$7),Co.point=HC}function xLe(e,t){H7=e,$7=t,e*=lt,t*=lt,Co.point=U7;var r=rt(t);ai=r*rt(e),si=r*Ke(e),li=Ke(t),Vm(ai,si,li)}function U7(e,t){e*=lt,t*=lt;var r=rt(t),i=r*rt(e),n=r*Ke(e),o=Ke(t),a=si*o-li*n,s=li*i-ai*o,c=ai*n-si*i,u=OC(a,s,c),l=oi(u),h=u&&-l/u;MC.add(h*a),LC.add(h*s),BC.add(h*c),m0+=l,b0+=l*(ai+(ai=i)),_0+=l*(si+(si=n)),T0+=l*(li+(li=o)),Vm(ai,si,li)}function NLe(e){zm=m0=g0=v0=y0=b0=_0=T0=0,MC=new Zr,LC=new Zr,BC=new Zr,Io(e,Co);var t=+MC,r=+LC,i=+BC,n=OC(t,r,i);return n<Um&&(t=b0,r=_0,i=T0,m0<st&&(t=g0,r=v0,i=y0),n=OC(t,r,i),n<Um)?[NaN,NaN]:[ii(r,t)*gr,oi(i/n)*gr]}function Eh(e){return function(){return e}}function $C(e,t){function r(i,n){return i=e(i,n),t(i[0],i[1])}return e.invert&&t.invert&&(r.invert=function(i,n){return i=t.invert(i,n),i&&e.invert(i[0],i[1])}),r}function FC(e,t){return[qt(e)>Dt?e+Math.round(-e/ni)*ni:e,t]}FC.invert=FC;function jC(e,t,r){return(e%=ni)?t||r?$C(z7(e),V7(t,r)):z7(e):t||r?V7(t,r):FC}function G7(e){return function(t,r){return t+=e,[t>Dt?t-ni:t<-Dt?t+ni:t,r]}}function z7(e){var t=G7(e);return t.invert=G7(-e),t}function V7(e,t){var r=rt(e),i=Ke(e),n=rt(t),o=Ke(t);function a(s,c){var u=rt(c),l=rt(s)*u,h=Ke(s)*u,f=Ke(c),d=f*r+l*i;return[ii(h*n-d*o,l*r-f*i),oi(d*n+h*o)]}return a.invert=function(s,c){var u=rt(c),l=rt(s)*u,h=Ke(s)*u,f=Ke(c),d=f*n-h*o;return[ii(h*n+f*o,l*r+d*i),oi(d*r-l*i)]},a}function W7(e){e=jC(e[0]*lt,e[1]*lt,e.length>2?e[2]*lt:0);function t(r){return r=e(r[0]*lt,r[1]*lt),r[0]*=gr,r[1]*=gr,r}return t.invert=function(r){return r=e.invert(r[0]*lt,r[1]*lt),r[0]*=gr,r[1]*=gr,r},t}function Y7(e,t,r,i,n,o){if(r){var a=rt(t),s=Ke(t),c=i*r;n==null?(n=t+i*ni,o=t-c/2):(n=q7(a,n),o=q7(a,o),(i>0?n<o:n>o)&&(n+=i*ni));for(var u,l=n;i>0?l>o:l<o;l-=c)u=f0([a,-s*rt(l),-s*Ke(l)]),e.point(u[0],u[1])}}function q7(e,t){t=Wc(t),t[0]-=e,p0(t);var r=S7(-t[1]);return((-t[2]<0?-r:r)+ni-st)%ni}function RLe(){var e=Eh([0,0]),t=Eh(90),r=Eh(6),i,n,o={point:a};function a(c,u){i.push(c=n(c,u)),c[0]*=gr,c[1]*=gr}function s(){var c=e.apply(this,arguments),u=t.apply(this,arguments)*lt,l=r.apply(this,arguments)*lt;return i=[],n=jC(-c[0]*lt,-c[1]*lt,0).invert,Y7(o,u,l,1),c={type:"Polygon",coordinates:[i]},i=n=null,c}return s.center=function(c){return arguments.length?(e=typeof c=="function"?c:Eh([+c[0],+c[1]]),s):e},s.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Eh(+c),s):t},s.precision=function(c){return arguments.length?(r=typeof c=="function"?c:Eh(+c),s):r},s}function X7(){var e=[],t;return{point:function(r,i,n){t.push([r,i,n])},lineStart:function(){e.push(t=[])},lineEnd:Nr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function E0(e,t){return qt(e[0]-t[0])<st&&qt(e[1]-t[1])<st}function S0(e,t,r,i){this.x=e,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function K7(e,t,r,i,n){var o=[],a=[],s,c;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],v=p[m],_;if(E0(g,v)){if(!g[2]&&!v[2]){for(n.lineStart(),s=0;s<m;++s)n.point((g=p[s])[0],g[1]);n.lineEnd();return}v[0]+=2*st}o.push(_=new S0(g,p,null,!0)),a.push(_.o=new S0(g,null,_,!1)),o.push(_=new S0(v,p,null,!1)),a.push(_.o=new S0(v,null,_,!0))}}),!!o.length){for(a.sort(t),Z7(o),Z7(a),s=0,c=a.length;s<c;++s)a[s].e=r=!r;for(var u=o[0],l,h;;){for(var f=u,d=!0;f.v;)if((f=f.n)===u)return;l=f.z,n.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,c=l.length;s<c;++s)n.point((h=l[s])[0],h[1]);else i(f.x,f.n.x,1,n);f=f.n}else{if(d)for(l=f.p.z,s=l.length-1;s>=0;--s)n.point((h=l[s])[0],h[1]);else i(f.x,f.p.x,-1,n);f=f.p}f=f.o,l=f.z,d=!d}while(!f.v);n.lineEnd()}}}function Z7(e){if(t=e.length){for(var t,r=0,i=e[0],n;++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function UC(e){return qt(e[0])<=Dt?e[0]:to(e[0])*((qt(e[0])+Dt)%ni-Dt)}function Q7(e,t){var r=UC(t),i=t[1],n=Ke(i),o=[Ke(r),-rt(r),0],a=0,s=0,c=new Zr;n===1?i=$r+st:n===-1&&(i=-$r-st);for(var u=0,l=e.length;u<l;++u)if(f=(h=e[u]).length)for(var h,f,d=h[f-1],p=UC(d),m=d[1]/2+o0,g=Ke(m),v=rt(m),_=0;_<f;++_,p=b,g=S,v=k,d=y){var y=h[_],b=UC(y),T=y[1]/2+o0,S=Ke(T),k=rt(T),O=b-p,D=O>=0?1:-1,R=D*O,w=R>Dt,L=g*S;if(c.add(ii(L*D*Ke(R),v*k+L*rt(R))),a+=w?O+D*ni:O,w^p>=r^b>=r){var B=_h(Wc(d),Wc(y));p0(B);var A=_h(o,B);p0(A);var M=(w^O>=0?-1:1)*oi(A[2]);(i>M||i===M&&(B[0]||B[1]))&&(s+=w^O>=0?1:-1)}}return(a<-st||a<st&&c<-Um)^s&1}function J7(e,t,r,i){return function(n){var o=t(n),a=X7(),s=t(a),c=!1,u,l,h,f={point:d,lineStart:m,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=_,f.lineEnd=y,l=[],u=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=g,l=FE(l);var b=Q7(u,i);l.length?(c||(n.polygonStart(),c=!0),K7(l,LLe,b,r,n)):b&&(c||(n.polygonStart(),c=!0),n.lineStart(),r(null,null,1,n),n.lineEnd()),c&&(n.polygonEnd(),c=!1),l=u=null},sphere:function(){n.polygonStart(),n.lineStart(),r(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function d(b,T){e(b,T)&&n.point(b,T)}function p(b,T){o.point(b,T)}function m(){f.point=p,o.lineStart()}function g(){f.point=d,o.lineEnd()}function v(b,T){h.push([b,T]),s.point(b,T)}function _(){s.lineStart(),h=[]}function y(){v(h[0][0],h[0][1]),s.lineEnd();var b=s.clean(),T=a.result(),S,k=T.length,O,D,R;if(h.pop(),u.push(h),h=null,!!k){if(b&1){if(D=T[0],(O=D.length-1)>0){for(c||(n.polygonStart(),c=!0),n.lineStart(),S=0;S<O;++S)n.point((R=D[S])[0],R[1]);n.lineEnd()}return}k>1&&b&2&&T.push(T.pop().concat(T.shift())),l.push(T.filter(MLe))}}return f}}function MLe(e){return e.length>1}function LLe(e,t){return((e=e.x)[0]<0?e[1]-$r-st:$r-e[1])-((t=t.x)[0]<0?t[1]-$r-st:$r-t[1])}const GC=J7(function(){return!0},BLe,$Le,[-Dt,-$r]);function BLe(e){var t=NaN,r=NaN,i=NaN,n;return{lineStart:function(){e.lineStart(),n=1},point:function(o,a){var s=o>0?Dt:-Dt,c=qt(o-t);qt(c-Dt)<st?(e.point(t,r=(r+a)/2>0?$r:-$r),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),n=0):i!==s&&c>=Dt&&(qt(t-i)<st&&(t-=i*st),qt(o-s)<st&&(o-=s*st),r=HLe(t,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),n=0),e.point(t=o,r=a),i=s},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-n}}}function HLe(e,t,r,i){var n,o,a=Ke(e-r);return qt(a)>st?bh((Ke(t)*(o=rt(i))*Ke(r)-Ke(i)*(n=rt(t))*Ke(e))/(n*o*a)):(t+i)/2}function $Le(e,t,r,i){var n;if(e==null)n=r*$r,i.point(-Dt,n),i.point(0,n),i.point(Dt,n),i.point(Dt,0),i.point(Dt,-n),i.point(0,-n),i.point(-Dt,-n),i.point(-Dt,0),i.point(-Dt,n);else if(qt(e[0]-t[0])>st){var o=e[0]<t[0]?Dt:-Dt;n=r*o/2,i.point(-o,n),i.point(0,n),i.point(o,n)}else i.point(t[0],t[1])}function e3(e){var t=rt(e),r=6*lt,i=t>0,n=qt(t)>st;function o(l,h,f,d){Y7(d,e,r,f,l,h)}function a(l,h){return rt(l)*rt(h)>t}function s(l){var h,f,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(g,v){var _=[g,v],y,b=a(g,v),T=i?b?0:u(g,v):b?u(g+(g<0?Dt:-Dt),v):0;if(!h&&(p=d=b)&&l.lineStart(),b!==d&&(y=c(h,_),(!y||E0(h,y)||E0(_,y))&&(_[2]=1)),b!==d)m=0,b?(l.lineStart(),y=c(_,h),l.point(y[0],y[1])):(y=c(h,_),l.point(y[0],y[1],2),l.lineEnd()),h=y;else if(n&&h&&i^b){var S;!(T&f)&&(S=c(_,h,!0))&&(m=0,i?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1],3)))}b&&(!h||!E0(h,_))&&l.point(_[0],_[1]),h=_,d=b,f=T},lineEnd:function(){d&&l.lineEnd(),h=null},clean:function(){return m|(p&&d)<<1}}}function c(l,h,f){var d=Wc(l),p=Wc(h),m=[1,0,0],g=_h(d,p),v=h0(g,g),_=g[0],y=v-_*_;if(!y)return!f&&l;var b=t*v/y,T=-t*_/y,S=_h(m,g),k=d0(m,b),O=d0(g,T);NC(k,O);var D=S,R=h0(k,D),w=h0(D,D),L=R*R-w*(h0(k,k)-1);if(!(L<0)){var B=dn(L),A=d0(D,(-R-B)/w);if(NC(A,k),A=f0(A),!f)return A;var M=l[0],j=h[0],W=l[1],K=h[1],oe;j<M&&(oe=M,M=j,j=oe);var fe=j-M,Ae=qt(fe-Dt)<st,de=Ae||fe<st;if(!Ae&&K<W&&(oe=W,W=K,K=oe),de?Ae?W+K>0^A[1]<(qt(A[0]-M)<st?W:K):W<=A[1]&&A[1]<=K:fe>Dt^(M<=A[0]&&A[0]<=j)){var Z=d0(D,(-R+B)/w);return NC(Z,k),[A,f0(Z)]}}}function u(l,h){var f=i?e:Dt-e,d=0;return l<-f?d|=1:l>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return J7(a,s,o,i?[0,-e]:[-Dt,e-Dt])}function FLe(e,t,r,i,n,o){var a=e[0],s=e[1],c=t[0],u=t[1],l=0,h=1,f=c-a,d=u-s,p;if(p=r-a,!(!f&&p>0)){if(p/=f,f<0){if(p<l)return;p<h&&(h=p)}else if(f>0){if(p>h)return;p>l&&(l=p)}if(p=n-a,!(!f&&p<0)){if(p/=f,f<0){if(p>h)return;p>l&&(l=p)}else if(f>0){if(p<l)return;p<h&&(h=p)}if(p=i-s,!(!d&&p>0)){if(p/=d,d<0){if(p<l)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>l&&(l=p)}if(p=o-s,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>l&&(l=p)}else if(d>0){if(p<l)return;p<h&&(h=p)}return l>0&&(e[0]=a+l*f,e[1]=s+l*d),h<1&&(t[0]=a+h*f,t[1]=s+h*d),!0}}}}}var Wm=1e9,w0=-Wm;function A0(e,t,r,i){function n(u,l){return e<=u&&u<=r&&t<=l&&l<=i}function o(u,l,h,f){var d=0,p=0;if(u==null||(d=a(u,h))!==(p=a(l,h))||c(u,l)<0^h>0)do f.point(d===0||d===3?e:r,d>1?i:t);while((d=(d+h+4)%4)!==p);else f.point(l[0],l[1])}function a(u,l){return qt(u[0]-e)<st?l>0?0:3:qt(u[0]-r)<st?l>0?2:1:qt(u[1]-t)<st?l>0?1:0:l>0?3:2}function s(u,l){return c(u.x,l.x)}function c(u,l){var h=a(u,1),f=a(l,1);return h!==f?h-f:h===0?l[1]-u[1]:h===1?u[0]-l[0]:h===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,h=X7(),f,d,p,m,g,v,_,y,b,T,S,k={point:O,lineStart:L,lineEnd:B,polygonStart:R,polygonEnd:w};function O(M,j){n(M,j)&&l.point(M,j)}function D(){for(var M=0,j=0,W=d.length;j<W;++j)for(var K=d[j],oe=1,fe=K.length,Ae=K[0],de,Z,ne=Ae[0],ue=Ae[1];oe<fe;++oe)de=ne,Z=ue,Ae=K[oe],ne=Ae[0],ue=Ae[1],Z<=i?ue>i&&(ne-de)*(i-Z)>(ue-Z)*(e-de)&&++M:ue<=i&&(ne-de)*(i-Z)<(ue-Z)*(e-de)&&--M;return M}function R(){l=h,f=[],d=[],S=!0}function w(){var M=D(),j=S&&M,W=(f=FE(f)).length;(j||W)&&(u.polygonStart(),j&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),W&&K7(f,s,M,o,u),u.polygonEnd()),l=u,f=d=p=null}function L(){k.point=A,d&&d.push(p=[]),T=!0,b=!1,_=y=NaN}function B(){f&&(A(m,g),v&&b&&h.rejoin(),f.push(h.result())),k.point=O,b&&l.lineEnd()}function A(M,j){var W=n(M,j);if(d&&p.push([M,j]),T)m=M,g=j,v=W,T=!1,W&&(l.lineStart(),l.point(M,j));else if(W&&b)l.point(M,j);else{var K=[_=Math.max(w0,Math.min(Wm,_)),y=Math.max(w0,Math.min(Wm,y))],oe=[M=Math.max(w0,Math.min(Wm,M)),j=Math.max(w0,Math.min(Wm,j))];FLe(K,oe,e,t,r,i)?(b||(l.lineStart(),l.point(K[0],K[1])),l.point(oe[0],oe[1]),W||l.lineEnd(),S=!1):W&&(l.lineStart(),l.point(M,j),S=!1)}_=M,y=j,b=W}return k}}function jLe(){var e=0,t=0,r=960,i=500,n,o,a;return a={stream:function(s){return n&&o===s?n:n=A0(e,t,r,i)(o=s)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],r=+s[1][0],i=+s[1][1],n=o=null,a):[[e,t],[r,i]]}}}var zC,VC,O0,k0,Sh={sphere:Nr,point:Nr,lineStart:ULe,lineEnd:Nr,polygonStart:Nr,polygonEnd:Nr};function ULe(){Sh.point=zLe,Sh.lineEnd=GLe}function GLe(){Sh.point=Sh.lineEnd=Nr}function zLe(e,t){e*=lt,t*=lt,VC=e,O0=Ke(t),k0=rt(t),Sh.point=VLe}function VLe(e,t){e*=lt,t*=lt;var r=Ke(t),i=rt(t),n=qt(e-VC),o=rt(n),a=Ke(n),s=i*a,c=k0*r-O0*i*o,u=O0*r+k0*i*o;zC.add(ii(dn(s*s+c*c),u)),VC=e,O0=r,k0=i}function t3(e){return zC=new Zr,Io(e,Sh),+zC}var WC=[null,null],WLe={type:"LineString",coordinates:WC};function I0(e,t){return WC[0]=e,WC[1]=t,t3(WLe)}var r3={Feature:function(e,t){return C0(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,i=-1,n=r.length;++i<n;)if(C0(r[i].geometry,t))return!0;return!1}},n3={Sphere:function(){return!0},Point:function(e,t){return i3(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)if(i3(r[i],t))return!0;return!1},LineString:function(e,t){return o3(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)if(o3(r[i],t))return!0;return!1},Polygon:function(e,t){return a3(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)if(a3(r[i],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,i=-1,n=r.length;++i<n;)if(C0(r[i],t))return!0;return!1}};function C0(e,t){return e&&n3.hasOwnProperty(e.type)?n3[e.type](e,t):!1}function i3(e,t){return I0(e,t)===0}function o3(e,t){for(var r,i,n,o=0,a=e.length;o<a;o++){if(i=I0(e[o],t),i===0||o>0&&(n=I0(e[o],e[o-1]),n>0&&r<=n&&i<=n&&(r+i-n)*(1-Math.pow((r-i)/n,2))<Um*n))return!0;r=i}return!1}function a3(e,t){return!!Q7(e.map(YLe),s3(t))}function YLe(e){return e=e.map(s3),e.pop(),e}function s3(e){return[e[0]*lt,e[1]*lt]}function qLe(e,t){return(e&&r3.hasOwnProperty(e.type)?r3[e.type]:C0)(e,t)}function l3(e,t,r){var i=Vn(e,t-st,r).concat(t);return function(n){return i.map(function(o){return[n,o]})}}function c3(e,t,r){var i=Vn(e,t-st,r).concat(t);return function(n){return i.map(function(o){return[o,n]})}}function u3(){var e,t,r,i,n,o,a,s,c=10,u=c,l=90,h=360,f,d,p,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:_()}}function _(){return Vn(a0(i/l)*l,r,l).map(p).concat(Vn(a0(s/h)*h,a,h).map(m)).concat(Vn(a0(t/c)*c,e,c).filter(function(y){return qt(y%l)>st}).map(f)).concat(Vn(a0(o/u)*u,n,u).filter(function(y){return qt(y%h)>st}).map(d))}return v.lines=function(){return _().map(function(y){return{type:"LineString",coordinates:y}})},v.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(m(a).slice(1),p(r).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(y){return arguments.length?v.extentMajor(y).extentMinor(y):v.extentMinor()},v.extentMajor=function(y){return arguments.length?(i=+y[0][0],r=+y[1][0],s=+y[0][1],a=+y[1][1],i>r&&(y=i,i=r,r=y),s>a&&(y=s,s=a,a=y),v.precision(g)):[[i,s],[r,a]]},v.extentMinor=function(y){return arguments.length?(t=+y[0][0],e=+y[1][0],o=+y[0][1],n=+y[1][1],t>e&&(y=t,t=e,e=y),o>n&&(y=o,o=n,n=y),v.precision(g)):[[t,o],[e,n]]},v.step=function(y){return arguments.length?v.stepMajor(y).stepMinor(y):v.stepMinor()},v.stepMajor=function(y){return arguments.length?(l=+y[0],h=+y[1],v):[l,h]},v.stepMinor=function(y){return arguments.length?(c=+y[0],u=+y[1],v):[c,u]},v.precision=function(y){return arguments.length?(g=+y,f=l3(o,n,90),d=c3(t,e,g),p=l3(s,a,90),m=c3(i,r,g),v):g},v.extentMajor([[-180,-90+st],[180,90-st]]).extentMinor([[-180,-80-st],[180,80+st]])}function XLe(){return u3()()}function KLe(e,t){var r=e[0]*lt,i=e[1]*lt,n=t[0]*lt,o=t[1]*lt,a=rt(i),s=Ke(i),c=rt(o),u=Ke(o),l=a*rt(r),h=a*Ke(r),f=c*rt(n),d=c*Ke(n),p=2*oi(dn(w7(o-i)+a*c*w7(n-r))),m=Ke(p),g=p?function(v){var _=Ke(v*=p)/m,y=Ke(p-v)/m,b=y*l+_*f,T=y*h+_*d,S=y*s+_*u;return[ii(T,b)*gr,ii(S,dn(b*b+T*T))*gr]}:function(){return[r*gr,i*gr]};return g.distance=p,g}const Ym=e=>e;var YC=new Zr,qC=new Zr,f3,h3,XC,KC,cl={point:Nr,lineStart:Nr,lineEnd:Nr,polygonStart:function(){cl.lineStart=ZLe,cl.lineEnd=JLe},polygonEnd:function(){cl.lineStart=cl.lineEnd=cl.point=Nr,YC.add(qt(qC)),qC=new Zr},result:function(){var e=YC/2;return YC=new Zr,e}};function ZLe(){cl.point=QLe}function QLe(e,t){cl.point=d3,f3=XC=e,h3=KC=t}function d3(e,t){qC.add(KC*e-XC*t),XC=e,KC=t}function JLe(){d3(f3,h3)}const p3=cl;var wh=1/0,P0=wh,qm=-wh,D0=qm,e5e={point:t5e,lineStart:Nr,lineEnd:Nr,polygonStart:Nr,polygonEnd:Nr,result:function(){var e=[[wh,P0],[qm,D0]];return qm=D0=-(P0=wh=1/0),e}};function t5e(e,t){e<wh&&(wh=e),e>qm&&(qm=e),t<P0&&(P0=t),t>D0&&(D0=t)}const x0=e5e;var ZC=0,QC=0,Xm=0,N0=0,R0=0,Ah=0,JC=0,eP=0,Km=0,m3,g3,ya,ba,Po={point:qc,lineStart:v3,lineEnd:y3,polygonStart:function(){Po.lineStart=i5e,Po.lineEnd=o5e},polygonEnd:function(){Po.point=qc,Po.lineStart=v3,Po.lineEnd=y3},result:function(){var e=Km?[JC/Km,eP/Km]:Ah?[N0/Ah,R0/Ah]:Xm?[ZC/Xm,QC/Xm]:[NaN,NaN];return ZC=QC=Xm=N0=R0=Ah=JC=eP=Km=0,e}};function qc(e,t){ZC+=e,QC+=t,++Xm}function v3(){Po.point=r5e}function r5e(e,t){Po.point=n5e,qc(ya=e,ba=t)}function n5e(e,t){var r=e-ya,i=t-ba,n=dn(r*r+i*i);N0+=n*(ya+e)/2,R0+=n*(ba+t)/2,Ah+=n,qc(ya=e,ba=t)}function y3(){Po.point=qc}function i5e(){Po.point=a5e}function o5e(){b3(m3,g3)}function a5e(e,t){Po.point=b3,qc(m3=ya=e,g3=ba=t)}function b3(e,t){var r=e-ya,i=t-ba,n=dn(r*r+i*i);N0+=n*(ya+e)/2,R0+=n*(ba+t)/2,Ah+=n,n=ba*e-ya*t,JC+=n*(ya+e),eP+=n*(ba+t),Km+=n*3,qc(ya=e,ba=t)}const _3=Po;function T3(e){this._context=e}T3.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ni);break}}},result:Nr};var tP=new Zr,rP,E3,S3,Zm,Qm,M0={point:Nr,lineStart:function(){M0.point=s5e},lineEnd:function(){rP&&w3(E3,S3),M0.point=Nr},polygonStart:function(){rP=!0},polygonEnd:function(){rP=null},result:function(){var e=+tP;return tP=new Zr,e}};function s5e(e,t){M0.point=w3,E3=Zm=e,S3=Qm=t}function w3(e,t){Zm-=e,Qm-=t,tP.add(dn(Zm*Zm+Qm*Qm)),Zm=e,Qm=t}const A3=M0;function O3(){this._string=[]}O3.prototype={_radius:4.5,_circle:k3(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=k3(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function k3(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function l5e(e,t){var r=4.5,i,n;function o(a){return a&&(typeof r=="function"&&n.pointRadius(+r.apply(this,arguments)),Io(a,i(n))),n.result()}return o.area=function(a){return Io(a,i(p3)),p3.result()},o.measure=function(a){return Io(a,i(A3)),A3.result()},o.bounds=function(a){return Io(a,i(x0)),x0.result()},o.centroid=function(a){return Io(a,i(_3)),_3.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,Ym):(e=a).stream,o):e},o.context=function(a){return arguments.length?(n=a==null?(t=null,new O3):new T3(t=a),typeof r!="function"&&n.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(n.pointRadius(+a),+a),o):r},o.projection(e).context(t)}function c5e(e){return{stream:Jm(e)}}function Jm(e){return function(t){var r=new nP;for(var i in e)r[i]=e[i];return r.stream=t,r}}function nP(){}nP.prototype={constructor:nP,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function iP(e,t,r){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Io(r,e.stream(x0)),t(x0.result()),i!=null&&e.clipExtent(i),e}function L0(e,t,r){return iP(e,function(i){var n=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(n/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),s=+t[0][0]+(n-a*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(o-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,c])},r)}function oP(e,t,r){return L0(e,[[0,0],t],r)}function aP(e,t,r){return iP(e,function(i){var n=+t,o=n/(i[1][0]-i[0][0]),a=(n-o*(i[1][0]+i[0][0]))/2,s=-o*i[0][1];e.scale(150*o).translate([a,s])},r)}function sP(e,t,r){return iP(e,function(i){var n=+t,o=n/(i[1][1]-i[0][1]),a=-o*i[0][0],s=(n-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,s])},r)}var I3=16,u5e=rt(30*lt);function C3(e,t){return+t?h5e(e,t):f5e(e)}function f5e(e){return Jm({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function h5e(e,t){function r(i,n,o,a,s,c,u,l,h,f,d,p,m,g){var v=u-i,_=l-n,y=v*v+_*_;if(y>4*t&&m--){var b=a+f,T=s+d,S=c+p,k=dn(b*b+T*T+S*S),O=oi(S/=k),D=qt(qt(S)-1)<st||qt(o-h)<st?(o+h)/2:ii(T,b),R=e(D,O),w=R[0],L=R[1],B=w-i,A=L-n,M=_*B-v*A;(M*M/y>t||qt((v*B+_*A)/y-.5)>.3||a*f+s*d+c*p<u5e)&&(r(i,n,o,a,s,c,w,L,D,b/=k,T/=k,S,m,g),g.point(w,L),r(w,L,D,b,T,S,u,l,h,f,d,p,m,g))}}return function(i){var n,o,a,s,c,u,l,h,f,d,p,m,g={point:v,lineStart:_,lineEnd:b,polygonStart:function(){i.polygonStart(),g.lineStart=T},polygonEnd:function(){i.polygonEnd(),g.lineStart=_}};function v(O,D){O=e(O,D),i.point(O[0],O[1])}function _(){h=NaN,g.point=y,i.lineStart()}function y(O,D){var R=Wc([O,D]),w=e(O,D);r(h,f,l,d,p,m,h=w[0],f=w[1],l=O,d=R[0],p=R[1],m=R[2],I3,i),i.point(h,f)}function b(){g.point=v,i.lineEnd()}function T(){_(),g.point=S,g.lineEnd=k}function S(O,D){y(n=O,D),o=h,a=f,s=d,c=p,u=m,g.point=y}function k(){r(h,f,l,d,p,m,o,a,n,s,c,u,I3,i),g.lineEnd=b,b()}return g}}var d5e=Jm({point:function(e,t){this.stream.point(e*lt,t*lt)}});function p5e(e){return Jm({point:function(t,r){var i=e(t,r);return this.stream.point(i[0],i[1])}})}function m5e(e,t,r,i,n){function o(a,s){return a*=i,s*=n,[t+e*a,r-e*s]}return o.invert=function(a,s){return[(a-t)/e*i,(r-s)/e*n]},o}function P3(e,t,r,i,n,o){if(!o)return m5e(e,t,r,i,n);var a=rt(o),s=Ke(o),c=a*e,u=s*e,l=a/e,h=s/e,f=(s*r-a*t)/e,d=(s*t+a*r)/e;function p(m,g){return m*=i,g*=n,[c*m-u*g+t,r-u*m-c*g]}return p.invert=function(m,g){return[i*(l*m-h*g+f),n*(d-h*m-l*g)]},p}function _a(e){return lP(function(){return e})()}function lP(e){var t,r=150,i=480,n=250,o=0,a=0,s=0,c=0,u=0,l,h=0,f=1,d=1,p=null,m=GC,g=null,v,_,y,b=Ym,T=.5,S,k,O,D,R;function w(M){return O(M[0]*lt,M[1]*lt)}function L(M){return M=O.invert(M[0],M[1]),M&&[M[0]*gr,M[1]*gr]}w.stream=function(M){return D&&R===M?D:D=d5e(p5e(l)(m(S(b(R=M)))))},w.preclip=function(M){return arguments.length?(m=M,p=void 0,A()):m},w.postclip=function(M){return arguments.length?(b=M,g=v=_=y=null,A()):b},w.clipAngle=function(M){return arguments.length?(m=+M?e3(p=M*lt):(p=null,GC),A()):p*gr},w.clipExtent=function(M){return arguments.length?(b=M==null?(g=v=_=y=null,Ym):A0(g=+M[0][0],v=+M[0][1],_=+M[1][0],y=+M[1][1]),A()):g==null?null:[[g,v],[_,y]]},w.scale=function(M){return arguments.length?(r=+M,B()):r},w.translate=function(M){return arguments.length?(i=+M[0],n=+M[1],B()):[i,n]},w.center=function(M){return arguments.length?(o=M[0]%360*lt,a=M[1]%360*lt,B()):[o*gr,a*gr]},w.rotate=function(M){return arguments.length?(s=M[0]%360*lt,c=M[1]%360*lt,u=M.length>2?M[2]%360*lt:0,B()):[s*gr,c*gr,u*gr]},w.angle=function(M){return arguments.length?(h=M%360*lt,B()):h*gr},w.reflectX=function(M){return arguments.length?(f=M?-1:1,B()):f<0},w.reflectY=function(M){return arguments.length?(d=M?-1:1,B()):d<0},w.precision=function(M){return arguments.length?(S=C3(k,T=M*M),A()):dn(T)},w.fitExtent=function(M,j){return L0(w,M,j)},w.fitSize=function(M,j){return oP(w,M,j)},w.fitWidth=function(M,j){return aP(w,M,j)},w.fitHeight=function(M,j){return sP(w,M,j)};function B(){var M=P3(r,0,0,f,d,h).apply(null,t(o,a)),j=P3(r,i-M[0],n-M[1],f,d,h);return l=jC(s,c,u),k=$C(t,j),O=$C(l,k),S=C3(k,T),A()}function A(){return D=R=null,w}return function(){return t=e.apply(this,arguments),w.invert=t.invert&&L,B()}}function cP(e){var t=0,r=Dt/3,i=lP(e),n=i(t,r);return n.parallels=function(o){return arguments.length?i(t=o[0]*lt,r=o[1]*lt):[t*gr,r*gr]},n}function g5e(e){var t=rt(e);function r(i,n){return[i*t,Ke(n)/t]}return r.invert=function(i,n){return[i/t,oi(n*t)]},r}function D3(e,t){var r=Ke(e),i=(r+Ke(t))/2;if(qt(i)<st)return g5e(e);var n=1+r*(2*i-r),o=dn(n)/i;function a(s,c){var u=dn(n-2*i*Ke(c))/i;return[u*Ke(s*=i),o-u*rt(s)]}return a.invert=function(s,c){var u=o-c,l=ii(s,qt(u))*to(u);return u*i<0&&(l-=Dt*to(s)*to(u)),[l/i,oi((n-(s*s+u*u)*i*i)/(2*i))]},a}function B0(){return cP(D3).scale(155.424).center([0,33.6442])}function x3(){return B0().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function v5e(e){var t=e.length;return{point:function(r,i){for(var n=-1;++n<t;)e[n].point(r,i)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function y5e(){var e,t,r=x3(),i,n=B0().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=B0().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,u={point:function(f,d){c=[f,d]}};function l(f){var d=f[0],p=f[1];return c=null,i.point(d,p),c||(o.point(d,p),c)||(s.point(d,p),c)}l.invert=function(f){var d=r.scale(),p=r.translate(),m=(f[0]-p[0])/d,g=(f[1]-p[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?n:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:r).invert(f)},l.stream=function(f){return e&&t===f?e:e=v5e([r.stream(t=f),n.stream(f),a.stream(f)])},l.precision=function(f){return arguments.length?(r.precision(f),n.precision(f),a.precision(f),h()):r.precision()},l.scale=function(f){return arguments.length?(r.scale(f),n.scale(f*.35),a.scale(f),l.translate(r.translate())):r.scale()},l.translate=function(f){if(!arguments.length)return r.translate();var d=r.scale(),p=+f[0],m=+f[1];return i=r.translate(f).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(u),o=n.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+st,m+.12*d+st],[p-.214*d-st,m+.234*d-st]]).stream(u),s=a.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+st,m+.166*d+st],[p-.115*d-st,m+.234*d-st]]).stream(u),h()},l.fitExtent=function(f,d){return L0(l,f,d)},l.fitSize=function(f,d){return oP(l,f,d)},l.fitWidth=function(f,d){return aP(l,f,d)},l.fitHeight=function(f,d){return sP(l,f,d)};function h(){return e=t=null,l}return l.scale(1070)}function N3(e){return function(t,r){var i=rt(t),n=rt(r),o=e(i*n);return o===1/0?[2,0]:[o*n*Ke(t),o*Ke(r)]}}function eg(e){return function(t,r){var i=dn(t*t+r*r),n=e(i),o=Ke(n),a=rt(n);return[ii(t*o,i*a),oi(i&&r*o/i)]}}var uP=N3(function(e){return dn(2/(1+e))});uP.invert=eg(function(e){return 2*oi(e/2)});function b5e(){return _a(uP).scale(124.75).clipAngle(180-.001)}var fP=N3(function(e){return(e=S7(e))&&e/Ke(e)});fP.invert=eg(function(e){return e});function _5e(){return _a(fP).scale(79.4188).clipAngle(180-.001)}function tg(e,t){return[e,s0(IC(($r+t)/2))]}tg.invert=function(e,t){return[e,2*bh(E7(t))-$r]};function T5e(){return R3(tg).scale(961/ni)}function R3(e){var t=_a(e),r=t.center,i=t.scale,n=t.translate,o=t.clipExtent,a=null,s,c,u;t.scale=function(h){return arguments.length?(i(h),l()):i()},t.translate=function(h){return arguments.length?(n(h),l()):n()},t.center=function(h){return arguments.length?(r(h),l()):r()},t.clipExtent=function(h){return arguments.length?(h==null?a=s=c=u=null:(a=+h[0][0],s=+h[0][1],c=+h[1][0],u=+h[1][1]),l()):a==null?null:[[a,s],[c,u]]};function l(){var h=Dt*i(),f=t(W7(t.rotate()).invert([0,0]));return o(a==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:e===tg?[[Math.max(f[0]-h,a),s],[Math.min(f[0]+h,c),u]]:[[a,Math.max(f[1]-h,s)],[c,Math.min(f[1]+h,u)]])}return l()}function H0(e){return IC(($r+e)/2)}function M3(e,t){var r=rt(e),i=e===t?Ke(e):s0(r/rt(t))/s0(H0(t)/H0(e)),n=r*kC(H0(e),i)/i;if(!i)return tg;function o(a,s){n>0?s<-$r+st&&(s=-$r+st):s>$r-st&&(s=$r-st);var c=n/kC(H0(s),i);return[c*Ke(i*a),n-c*rt(i*a)]}return o.invert=function(a,s){var c=n-s,u=to(i)*dn(a*a+c*c),l=ii(a,qt(c))*to(c);return c*i<0&&(l-=Dt*to(a)*to(c)),[l/i,2*bh(kC(n/u,1/i))-$r]},o}function E5e(){return cP(M3).scale(109.5).parallels([30,30])}function rg(e,t){return[e,t]}rg.invert=rg;function S5e(){return _a(rg).scale(152.63)}function L3(e,t){var r=rt(e),i=e===t?Ke(e):(r-rt(t))/(t-e),n=r/i+e;if(qt(i)<st)return rg;function o(a,s){var c=n-s,u=i*a;return[c*Ke(u),n-c*rt(u)]}return o.invert=function(a,s){var c=n-s,u=ii(a,qt(c))*to(c);return c*i<0&&(u-=Dt*to(a)*to(c)),[u/i,n-to(i)*dn(a*a+c*c)]},o}function w5e(){return cP(L3).scale(131.154).center([0,13.9389])}var ng=1.340264,ig=-.081106,og=893e-6,ag=.003796,$0=dn(3)/2,A5e=12;function hP(e,t){var r=oi($0*Ke(t)),i=r*r,n=i*i*i;return[e*rt(r)/($0*(ng+3*ig*i+n*(7*og+9*ag*i))),r*(ng+ig*i+n*(og+ag*i))]}hP.invert=function(e,t){for(var r=t,i=r*r,n=i*i*i,o=0,a,s,c;o<A5e&&(s=r*(ng+ig*i+n*(og+ag*i))-t,c=ng+3*ig*i+n*(7*og+9*ag*i),r-=a=s/c,i=r*r,n=i*i*i,!(qt(a)<Um));++o);return[$0*e*(ng+3*ig*i+n*(7*og+9*ag*i))/rt(r),oi(Ke(r)/$0)]};function O5e(){return _a(hP).scale(177.158)}function dP(e,t){var r=rt(t),i=rt(e)*r;return[r*Ke(e)/i,Ke(t)/i]}dP.invert=eg(bh);function k5e(){return _a(dP).scale(144.049).clipAngle(60)}function I5e(){var e=1,t=0,r=0,i=1,n=1,o=0,a,s,c=null,u,l,h,f=1,d=1,p=Jm({point:function(b,T){var S=y([b,T]);this.stream.point(S[0],S[1])}}),m=Ym,g,v;function _(){return f=e*i,d=e*n,g=v=null,y}function y(b){var T=b[0]*f,S=b[1]*d;if(o){var k=S*a-T*s;T=T*a+S*s,S=k}return[T+t,S+r]}return y.invert=function(b){var T=b[0]-t,S=b[1]-r;if(o){var k=S*a+T*s;T=T*a-S*s,S=k}return[T/f,S/d]},y.stream=function(b){return g&&v===b?g:g=p(m(v=b))},y.postclip=function(b){return arguments.length?(m=b,c=u=l=h=null,_()):m},y.clipExtent=function(b){return arguments.length?(m=b==null?(c=u=l=h=null,Ym):A0(c=+b[0][0],u=+b[0][1],l=+b[1][0],h=+b[1][1]),_()):c==null?null:[[c,u],[l,h]]},y.scale=function(b){return arguments.length?(e=+b,_()):e},y.translate=function(b){return arguments.length?(t=+b[0],r=+b[1],_()):[t,r]},y.angle=function(b){return arguments.length?(o=b%360*lt,s=Ke(o),a=rt(o),_()):o*gr},y.reflectX=function(b){return arguments.length?(i=b?-1:1,_()):i<0},y.reflectY=function(b){return arguments.length?(n=b?-1:1,_()):n<0},y.fitExtent=function(b,T){return L0(y,b,T)},y.fitSize=function(b,T){return oP(y,b,T)},y.fitWidth=function(b,T){return aP(y,b,T)},y.fitHeight=function(b,T){return sP(y,b,T)},y}function pP(e,t){var r=t*t,i=r*r;return[e*(.8707-.131979*r+i*(-.013791+i*(.003971*r-.001529*i))),t*(1.007226+r*(.015085+i*(-.044475+.028874*r-.005916*i)))]}pP.invert=function(e,t){var r=t,i=25,n;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(qt(n)>st&&--i>0);return[e/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]};function C5e(){return _a(pP).scale(175.295)}function mP(e,t){return[rt(t)*Ke(e),Ke(t)]}mP.invert=eg(oi);function P5e(){return _a(mP).scale(249.5).clipAngle(90+st)}function gP(e,t){var r=rt(t),i=1+rt(e)*r;return[r*Ke(e)/i,Ke(t)/i]}gP.invert=eg(function(e){return 2*bh(e)});function D5e(){return _a(gP).scale(250).clipAngle(142)}function vP(e,t){return[s0(IC(($r+t)/2)),-e]}vP.invert=function(e,t){return[-t,2*bh(E7(e))-$r]};function x5e(){var e=R3(vP),t=e.center,r=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?r([i[0],i[1],i.length>2?i[2]+90:90]):(i=r(),[i[0],i[1],i[2]-90])},r([0,0,90]).scale(159.155)}const N5e=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:x3,geoAlbersUsa:y5e,geoArea:SLe,geoAzimuthalEqualArea:b5e,geoAzimuthalEqualAreaRaw:uP,geoAzimuthalEquidistant:_5e,geoAzimuthalEquidistantRaw:fP,geoBounds:kLe,geoCentroid:NLe,geoCircle:RLe,geoClipAntimeridian:GC,geoClipCircle:e3,geoClipExtent:jLe,geoClipRectangle:A0,geoConicConformal:E5e,geoConicConformalRaw:M3,geoConicEqualArea:B0,geoConicEqualAreaRaw:D3,geoConicEquidistant:w5e,geoConicEquidistantRaw:L3,geoContains:qLe,geoDistance:I0,geoEqualEarth:O5e,geoEqualEarthRaw:hP,geoEquirectangular:S5e,geoEquirectangularRaw:rg,geoGnomonic:k5e,geoGnomonicRaw:dP,geoGraticule:u3,geoGraticule10:XLe,geoIdentity:I5e,geoInterpolate:KLe,geoLength:t3,geoMercator:T5e,geoMercatorRaw:tg,geoNaturalEarth1:C5e,geoNaturalEarth1Raw:pP,geoOrthographic:P5e,geoOrthographicRaw:mP,geoPath:l5e,geoProjection:_a,geoProjectionMutator:lP,geoRotation:W7,geoStereographic:D5e,geoStereographicRaw:gP,geoStream:Io,geoTransform:c5e,geoTransverseMercator:x5e,geoTransverseMercatorRaw:vP},Symbol.toStringTag,{value:"Module"}));var R5e=[].slice,M5e={};function yP(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}yP.prototype=H3.prototype={constructor:yP,defer:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(this._error!=null)return this;var t=R5e.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),B3(this),this},abort:function(){return this._error==null&&bP(this,new Error("abort")),this},await:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,r){e.apply(null,[t].concat(r))},F0(this),this},awaitAll:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,F0(this),this}};function B3(e){if(!e._start)try{L5e(e)}catch(t){if(e._tasks[e._ended+e._active-1])bP(e,t);else if(!e._data)throw t}}function L5e(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,r=e._tasks[t],i=r.length-1,n=r[i];r[i]=B5e(e,t),--e._waiting,++e._active,r=n.apply(null,r),e._tasks[t]&&(e._tasks[t]=r||M5e)}}function B5e(e,t){return function(r,i){e._tasks[t]&&(--e._active,++e._ended,e._tasks[t]=null,e._error==null&&(r!=null?bP(e,r):(e._data[t]=i,e._waiting?B3(e):F0(e))))}}function bP(e,t){var r=e._tasks.length,i;for(e._error=t,e._data=void 0,e._waiting=NaN;--r>=0;)if((i=e._tasks[r])&&(e._tasks[r]=null,i.abort))try{i.abort()}catch{}e._active=NaN,F0(e)}function F0(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function H3(e){if(e==null)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new yP(e)}const H5e=Object.freeze(Object.defineProperty({__proto__:null,queue:H3},Symbol.toStringTag,{value:"Module"}));var ro="$";function j0(){}j0.prototype=_P.prototype={constructor:j0,has:function(e){return ro+e in this},get:function(e){return this[ro+e]},set:function(e,t){return this[ro+e]=t,this},remove:function(e){var t=ro+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ro&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ro&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ro&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ro&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ro&&++e;return e},empty:function(){for(var e in this)if(e[0]===ro)return!1;return!0},each:function(e){for(var t in this)t[0]===ro&&e(this[t],t.slice(1),this)}};function _P(e,t){var r=new j0;if(e instanceof j0)e.each(function(s,c){r.set(c,s)});else if(Array.isArray(e)){var i=-1,n=e.length,o;if(t==null)for(;++i<n;)r.set(i,e[i]);else for(;++i<n;)r.set(t(o=e[i],i,e),o)}else if(e)for(var a in e)r.set(a,e[a]);return r}function $3(){}var Xc=_P.prototype;$3.prototype={constructor:$3,has:Xc.has,add:function(e){return e+="",this[ro+e]=e,this},remove:Xc.remove,clear:Xc.clear,values:Xc.keys,size:Xc.size,empty:Xc.empty,each:Xc.each};var $5e={value:function(){}};function F3(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new U0(r)}function U0(e){this._=e}function F5e(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}U0.prototype=F3.prototype={constructor:U0,on:function(e,t){var r=this._,i=F5e(e+"",r),n,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((n=(e=i[o]).type)&&(n=j5e(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=j3(r[n],e.name,t);else if(t==null)for(n in r)r[n]=j3(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new U0(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,o;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,n=o.length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],n=0,o=i.length;n<o;++n)i[n].value.apply(t,r)}};function j5e(e,t){for(var r=0,i=e.length,n;r<i;++r)if((n=e[r]).name===t)return n.value}function j3(e,t,r){for(var i=0,n=e.length;i<n;++i)if(e[i].name===t){e[i]=$5e,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}function TP(e,t){var r,i=F3("beforesend","progress","load","error"),n,o=_P(),a=new XMLHttpRequest,s=null,c=null,u,l,h=0;typeof XDomainRequest<"u"&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(e)&&(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=a.ontimeout=f:a.onreadystatechange=function(d){a.readyState>3&&f(d)};function f(d){var p=a.status,m;if(!p&&G5e(a)||p>=200&&p<300||p===304){if(u)try{m=u.call(r,a)}catch(g){i.call("error",r,g);return}else m=a;i.call("load",r,m)}else i.call("error",r,d)}if(a.onprogress=function(d){i.call("progress",r,d)},r={header:function(d,p){return d=(d+"").toLowerCase(),arguments.length<2?o.get(d):(p==null?o.remove(d):o.set(d,p+""),r)},mimeType:function(d){return arguments.length?(n=d==null?null:d+"",r):n},responseType:function(d){return arguments.length?(l=d,r):l},timeout:function(d){return arguments.length?(h=+d,r):h},user:function(d){return arguments.length<1?s:(s=d==null?null:d+"",r)},password:function(d){return arguments.length<1?c:(c=d==null?null:d+"",r)},response:function(d){return u=d,r},get:function(d,p){return r.send("GET",d,p)},post:function(d,p){return r.send("POST",d,p)},send:function(d,p,m){return a.open(d,e,!0,s,c),n!=null&&!o.has("accept")&&o.set("accept",n+",*/*"),a.setRequestHeader&&o.each(function(g,v){a.setRequestHeader(v,g)}),n!=null&&a.overrideMimeType&&a.overrideMimeType(n),l!=null&&(a.responseType=l),h>0&&(a.timeout=h),m==null&&typeof p=="function"&&(m=p,p=null),m!=null&&m.length===1&&(m=U5e(m)),m!=null&&r.on("error",m).on("load",function(g){m(null,g)}),i.call("beforesend",r,a),a.send(p??null),r},abort:function(){return a.abort(),r},on:function(){var d=i.on.apply(i,arguments);return d===i?r:d}},t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return r.get(t)}return r}function U5e(e){return function(t,r){e(t==null?r:null)}}function G5e(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function G0(e,t){return function(r,i){var n=TP(r).mimeType(e).response(t);if(i!=null){if(typeof i!="function")throw new Error("invalid callback: "+i);return n.get(i)}return n}}const z5e=G0("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),V5e=G0("application/json",function(e){return JSON.parse(e.responseText)}),W5e=G0("text/plain",function(e){return e.responseText}),Y5e=G0("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t});var U3={},EP={},SP=34,sg=10,wP=13;function G3(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function q5e(e,t){var r=G3(e);return function(i,n){return t(r(i),n,e)}}function z3(e){var t=Object.create(null),r=[];return e.forEach(function(i){for(var n in i)n in t||r.push(t[n]=n)}),r}function Ei(e,t){var r=e+"",i=r.length;return i<t?new Array(t-i+1).join(0)+r:r}function X5e(e){return e<0?"-"+Ei(-e,6):e>9999?"+"+Ei(e,6):Ei(e,4)}function K5e(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),n=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":X5e(e.getUTCFullYear())+"-"+Ei(e.getUTCMonth()+1,2)+"-"+Ei(e.getUTCDate(),2)+(n?"T"+Ei(t,2)+":"+Ei(r,2)+":"+Ei(i,2)+"."+Ei(n,3)+"Z":i?"T"+Ei(t,2)+":"+Ei(r,2)+":"+Ei(i,2)+"Z":r||t?"T"+Ei(t,2)+":"+Ei(r,2)+"Z":"")}function V3(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function i(h,f){var d,p,m=n(h,function(g,v){if(d)return d(g,v-1);p=g,d=f?q5e(g,f):G3(g)});return m.columns=p||[],m}function n(h,f){var d=[],p=h.length,m=0,g=0,v,_=p<=0,y=!1;h.charCodeAt(p-1)===sg&&--p,h.charCodeAt(p-1)===wP&&--p;function b(){if(_)return EP;if(y)return y=!1,U3;var S,k=m,O;if(h.charCodeAt(k)===SP){for(;m++<p&&h.charCodeAt(m)!==SP||h.charCodeAt(++m)===SP;);return(S=m)>=p?_=!0:(O=h.charCodeAt(m++))===sg?y=!0:O===wP&&(y=!0,h.charCodeAt(m)===sg&&++m),h.slice(k+1,S-1).replace(/""/g,'"')}for(;m<p;){if((O=h.charCodeAt(S=m++))===sg)y=!0;else if(O===wP)y=!0,h.charCodeAt(m)===sg&&++m;else if(O!==r)continue;return h.slice(k,S)}return _=!0,h.slice(k,p)}for(;(v=b())!==EP;){for(var T=[];v!==U3&&v!==EP;)T.push(v),v=b();f&&(T=f(T,g++))==null||d.push(T)}return d}function o(h,f){return h.map(function(d){return f.map(function(p){return l(d[p])}).join(e)})}function a(h,f){return f==null&&(f=z3(h)),[f.map(l).join(e)].concat(o(h,f)).join(`
`)}function s(h,f){return f==null&&(f=z3(h)),o(h,f).join(`
`)}function c(h){return h.map(u).join(`
`)}function u(h){return h.map(l).join(e)}function l(h){return h==null?"":h instanceof Date?K5e(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:n,format:a,formatBody:s,formatRows:c,formatRow:u,formatValue:l}}var Z5e=V3(","),Q5e=Z5e.parse,J5e=V3("	"),eBe=J5e.parse;function W3(e,t){return function(r,i,n){arguments.length<3&&(n=i,i=null);var o=TP(r).mimeType(e);return o.row=function(a){return arguments.length?o.response(tBe(t,i=a)):i},o.row(i),n?o.get(n):o}}function tBe(e,t){return function(r){return e(r.responseText,t)}}const rBe=W3("text/csv",Q5e),nBe=W3("text/tab-separated-values",eBe),iBe=Object.freeze(Object.defineProperty({__proto__:null,csv:rBe,html:z5e,json:V5e,request:TP,text:W5e,tsv:nBe,xml:Y5e},Symbol.toStringTag,{value:"Module"}));function AP(){return AP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},AP.apply(this,arguments)}function oBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y3(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,sBe(i.key),i)}}function aBe(e,t,r){return t&&Y3(e.prototype,t),r&&Y3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sBe(e){var t=lBe(e,"string");return typeof t=="symbol"?t:String(t)}function lBe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OP(e,t)}function OP(e,t){return OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},OP(e,t)}function uBe(e){var t=dBe();return function(){var i=z0(e),n;if(t){var o=z0(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return fBe(this,n)}}function fBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hBe(e)}function hBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z0(e){return z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z0(e)}let V0=function(e){cBe(r,e);var t=uBe(r);function r({items:i}){var n;return oBe(this,r),n=t.call(this),n.state={items:i,isSorting:!1},n}return aBe(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(n){this.setState({items:n.items})}},{key:"onSortStart",value:function({node:n,index:o,collection:a},s){s.stopImmediatePropagation();const{onSortStart:c}=this.props;this.setState({isSorting:!0}),c&&c(this.ref),this.sortingIndex=o,this.sortStartTop=s.offsetTop,this.sortStartLeft=s.offsetLeft}},{key:"onSortMove",value:function(){}},{key:"onSortEnd",value:function({oldIndex:n,newIndex:o}){const{onSortEnd:a}=this.props,{items:s}=this.state;this.setState({items:Qne(s,n,o),isSorting:!1}),a&&a(this.state.items),this.sortingIndex=null}},{key:"render",value:function(){const n=this.props.component,{items:o,isSorting:a}=this.state,s={isSorting:a,items:o,onSortEnd:this.onSortEnd.bind(this),onSortStart:this.onSortStart.bind(this),onSortMove:this.onSortMove.bind(this)};return E.createElement(n,AP({},this.props,s,{ref:c=>{this.ref=c}}))}}]),r}(E.Component);V0.propTypes={axis:N.string,className:N.string,component:N.func,editable:N.bool,handleConfigTrack:N.func,handleResizeTrack:N.func,height:N.number,helperClass:N.string,itemClass:N.string,itemControlAlignLeft:N.bool,itemReactClass:N.func,items:N.array,onAddSeries:N.func,onCloseTrack:N.func,onCloseTrackMenuOpened:N.func,onConfigTrackMenuOpened:N.func,onSortEnd:N.func,onSortStart:N.func,referenceAncestor:N.string,resizeHandles:N.object,useDragHandle:N.bool,width:N.number},V0.defaultProps={className:"list stylizedList",itemClass:"item stylizedItem",width:400,height:600};const kP={"top-right-handle":"_top-right-handle_cizw2_1","bottom-right-handle":"_bottom-right-handle_cizw2_2","top-left-handle":"_top-left-handle_cizw2_7","bottom-left-handle":"_bottom-left-handle_cizw2_8","top-draggable-handle":"_top-draggable-handle_cizw2_13","bottom-draggable-handle":"_bottom-draggable-handle_cizw2_14","left-draggable-handle":"_left-draggable-handle_cizw2_15","right-draggable-handle":"_right-draggable-handle_cizw2_16","draggable-div":"_draggable-div_cizw2_22","top-draggable-handle-grabber":"_top-draggable-handle-grabber_cizw2_27","bottom-draggable-handle-grabber":"_bottom-draggable-handle-grabber_cizw2_28","left-draggable-handle-grabber":"_left-draggable-handle-grabber_cizw2_43","right-draggable-handle-grabber":"_right-draggable-handle-grabber_cizw2_44"};function pBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q3(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,gBe(i.key),i)}}function mBe(e,t,r){return t&&q3(e.prototype,t),r&&q3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gBe(e){var t=vBe(e,"string");return typeof t=="symbol"?t:String(t)}function vBe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IP(e,t)}function IP(e,t){return IP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},IP(e,t)}function bBe(e){var t=TBe();return function(){var i=W0(e),n;if(t){var o=W0(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _Be(this,n)}}function _Be(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}function Sn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W0(e){return W0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W0(e)}let X3=function(e){yBe(r,e);var t=bBe(r);function r(i){var n;return pBe(this,r),n=t.call(this,i),n.dragTopRight=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragTopRightFunc.bind(Sn(n))),n.dragTopLeft=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragTopLeftFunc.bind(Sn(n))),n.dragBottomRight=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragBottomRightFunc.bind(Sn(n))),n.dragBottomLeft=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragBottomLeftFunc.bind(Sn(n))),n.dragBottom=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragBottomFunc.bind(Sn(n))),n.dragTop=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragTopFunc.bind(Sn(n))),n.dragLeft=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragLeftFunc.bind(Sn(n))),n.dragRight=xa().on("start",n.dragStart.bind(Sn(n))).on("drag",n.dragRightFunc.bind(Sn(n))),n.minWidth=10,n.minHeight=10,n.bottomHandleWidth=20,n.state={uid:n.props.uid,width:n.props.width,height:n.props.height,top:n.props.top,left:n.props.left},n.domBody=Ht("body").node(),n}return mBe(r,[{key:"componentDidMount",value:function(){Ht(this.bottomHandle).call(this.dragBottom),Ht(this.topHandle).call(this.dragTop),Ht(this.leftHandle).call(this.dragLeft),Ht(this.rightHandle).call(this.dragRight)}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){"width"in n&&this.setState({width:n.width}),"height"in n&&this.setState({height:n.height})}},{key:"dragBottomFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartHeight+(o[1]-this.dragStartMousePos[1]);a=a>this.minHeight?a:this.minHeight,this.setState({height:a}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragLeftFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartWidth-(o[0]-this.dragStartMousePos[0]);a=a>this.minWidth?a:this.minWidth;let s=this.dragStartLeft+o[0]-this.dragStartMousePos[0];s=a>this.minWidth?s:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:s,width:a}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartHeight-(o[1]-this.dragStartMousePos[1]);a=a>this.minHeight?a:this.minHeight;let s=this.dragStartTop+o[1]-this.dragStartMousePos[1];s=a>this.minHeight?s:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:s,height:a}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragRightFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartWidth+(o[0]-this.dragStartMousePos[0]);a=a>this.minWidth?a:this.minWidth,this.setState({width:a}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomLeftFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartHeight+(o[1]-this.dragStartMousePos[1]);a=a>this.minHeight?a:this.minHeight;let s=this.dragStartWidth-(o[0]-this.dragStartMousePos[0]);s=s>this.minWidth?s:this.minWidth;let c=this.dragStartLeft+o[0]-this.dragStartMousePos[0];c=s>this.minWidth?c:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:c,width:s,height:a}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomRightFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartWidth+(o[0]-this.dragStartMousePos[0]);a=a>this.minWidth?a:this.minWidth;let s=this.dragStartHeight+(o[1]-this.dragStartMousePos[1]);s=s>this.minHeight?s:this.minHeight,this.setState({width:a,height:s}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopRightFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartHeight-(o[1]-this.dragStartMousePos[1]);a=a>this.minHeight?a:this.minHeight;let s=this.dragStartTop+o[1]-this.dragStartMousePos[1];s=a>this.minHeight?s:this.dragStartTop+this.dragStartHeight-this.minHeight;let c=this.dragStartWidth+(o[0]-this.dragStartMousePos[0]);c=c>this.minWidth?c:this.minWidth,this.setState({top:s,width:c,height:a}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopLeftFunc",value:function(n){const o=lr(n,this.domBody);let a=this.dragStartWidth-(o[0]-this.dragStartMousePos[0]);a=a>this.minWidth?a:this.minWidth;let s=this.dragStartLeft+o[0]-this.dragStartMousePos[0];s=a>this.minWidth?s:this.dragStartLeft+this.dragStartWidth-this.minWidth;let c=this.dragStartHeight-(o[1]-this.dragStartMousePos[1]);c=c>this.minHeight?c:this.minHeight;let u=this.dragStartTop+o[1]-this.dragStartMousePos[1];u=c>this.minHeight?u:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:u,left:s,width:a,height:c}),n.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragStart",value:function(n){this.dragStartMousePos=lr(n,this.domBody),this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,this.dragStartTop=this.state.top,this.dragStartLeft=this.state.left,n.sourceEvent.stopPropagation()}},{key:"sizeChanged",value:function(){this.props.sizeChanged&&this.props.sizeChanged(this.state)}},{key:"rotateClicked",value:function(){this.props.trackRotated(this.state.uid)}},{key:"closeClicked",value:function(){this.props.trackClosed(this.state.uid)}},{key:"render",value:function(){const n=this.props.theme===mr?"white":"black",o={top:this.state.top,left:this.state.left,width:this.state.width,height:this.state.height,opacity:this.props.opacity},a=24,s=24,c={left:this.state.width/2-a/2,width:a},u={top:this.state.height/2-s/2,height:s},l={bottom:{...c,bottom:1},top:{...c,top:1},left:{...u,left:1},right:{...u,right:1}},h=[...this.props.resizeHandles].map(f=>E.createElement("div",{key:f,ref:d=>{this[`${f}Handle`]=d},className:kP[`${f}-draggable-handle`],style:l[f],title:"Resize track"},E.createElement("div",{className:kP[`${f}-draggable-handle-grabber`],style:{borderColor:n}})));return E.createElement("div",{ref:f=>{this.divContainer=f},className:Zt(this.props.className,kP["draggable-div"]),style:o},h)}}]),r}(E.Component);X3.propTypes={className:N.string,height:N.number,left:N.number,opacity:N.number,resizeHandles:N.object,sizeChanged:N.func,top:N.number,trackClosed:N.func,trackRotated:N.func,uid:N.string,width:N.number,theme:N.symbol};const EBe=hc(X3);function SBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K3(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ABe(i.key),i)}}function wBe(e,t,r){return t&&K3(e.prototype,t),r&&K3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ABe(e){var t=OBe(e,"string");return typeof t=="symbol"?t:String(t)}function OBe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CP(e,t)}function CP(e,t){return CP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},CP(e,t)}function IBe(e){var t=DBe();return function(){var i=Y0(e),n;if(t){var o=Y0(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return CBe(this,n)}}function CBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PBe(e)}function PBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Y0(e){return Y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y0(e)}let Z3=function(e){kBe(r,e);var t=IBe(r);function r(i){var n;return SBe(this,r),n=t.call(this,i),n.state={controlsVisible:!1},n}return wBe(r,[{key:"shouldComponentUpdate",value:function(){return!this.resizing}},{key:"handleMouseEnter",value:function(){this.setState({controlsVisible:!0})}},{key:"handleMouseLeave",value:function(){this.setState({controlsVisible:!1})}},{key:"handleMouseMove",value:function(){this.setState({controlsVisible:!0})}},{key:"getControls",value:function(){let n=null;return this.moveable?n=LS(()=>E.createElement("svg",{className:"no-zoom",height:"10px",onClick:()=>{},style:this.getMoveImgStyle(),width:"10px"},E.createElement("use",{xlinkHref:"#move"}))):n=LS(()=>E.createElement("div",null)),E.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.7)",right:"3px",top:"3px",pointerEvents:"none",paddingLeft:"5px",paddingRight:"5px",borderRadius:"5px",border:"1px solid #dddddd"}},E.createElement(n,null),E.createElement("svg",{ref:o=>{this.imgConfig=o},className:"no-zoom",height:"10px",onClick:()=>{const a=Br.findDOMNode(this.imgConfig).getBoundingClientRect();this.props.onConfigTrackMenuOpened(this.props.uid,a)},style:this.getSettingsImgStyle(),width:"10px"},E.createElement("use",{xlinkHref:"#cog"})),E.createElement("svg",{ref:o=>{this.imgAdd=o},className:"no-zoom",height:"10px",onClick:()=>this.props.onAddSeries(this.props.uid),style:this.getAddImgStyle(),width:"10px"},E.createElement("use",{xlinkHref:"#plus"})),E.createElement("svg",{ref:o=>{this.imgClose=o},className:"no-zoom",height:"10px",onClick:()=>{const a=Br.findDOMNode(this.imgClose).getBoundingClientRect();this.props.onCloseTrackMenuOpened(this.props.uid,a)},style:this.getCloseImgStyle(),width:"10px"},E.createElement("use",{xlinkHref:"#cross"})))}}]),r}(E.Component);Z3.propTypes={configMenuOpen:N.bool,onConfigTrackMenuOpened:N.func,onCloseTrackMenuOpened:N.func,onAddSeries:N.func,uid:N.string};function xBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q3(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,RBe(i.key),i)}}function NBe(e,t,r){return t&&Q3(e.prototype,t),r&&Q3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RBe(e){var t=MBe(e,"string");return typeof t=="symbol"?t:String(t)}function MBe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PP(e,t)}function PP(e,t){return PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},PP(e,t)}function BBe(e){var t=FBe();return function(){var i=q0(e),n;if(t){var o=q0(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return HBe(this,n)}}function HBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Be(e)}function $Be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function q0(e){return q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q0(e)}let X0=function(e){LBe(r,e);var t=BBe(r);function r(i){var n;return xBe(this,r),n=t.call(this,i),n.moveable=!0,n}return NBe(r,[{key:"render",value:function(){return E.createElement("div",{ref:n=>{this.el=n},className:this.props.className,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:()=>{this.handleMouseLeave()},style:{height:this.props.height,width:this.props.width}},E.createElement(EBe,{key:this.props.uid,height:this.props.height,resizeHandles:this.props.editable?this.props.resizeHandles:new Set,sizeChanged:n=>this.props.handleResizeTrack(this.props.uid,n.width,n.height),style:{background:"transparent"},uid:this.props.uid,width:this.props.width}),this.props.editable&&this.getControls(this.state.controlsVisible||this.props.item.configMenuVisible))}}]),r}(Z3);X0.propTypes={className:N.string,uid:N.string,item:N.object,height:N.number,width:N.number};function jBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J3(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,GBe(i.key),i)}}function UBe(e,t,r){return t&&J3(e.prototype,t),r&&J3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GBe(e){var t=zBe(e,"string");return typeof t=="symbol"?t:String(t)}function zBe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DP(e,t)}function DP(e,t){return DP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},DP(e,t)}function WBe(e){var t=XBe();return function(){var i=K0(e),n;if(t){var o=K0(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return YBe(this,n)}}function YBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qBe(e)}function qBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K0(e){return K0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K0(e)}const Z0={pointerEvents:"all"};let eV=function(e){VBe(r,e);var t=WBe(r);function r(){return jBe(this,r),t.apply(this,arguments)}return UBe(r,[{key:"getControls",value:function(n){return E.createElement(r_,{configMenuVisible:this.props.item.configMenuVisible,imgStyleAdd:Z0,imgStyleClose:Z0,imgStyleMove:Z0,imgStyleSettings:Z0,isMoveable:this.moveable,isVisible:n,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),r}(X0);const KBe=ZL(e=>E.createElement(eV,{className:e.className,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width}));function xP(){return xP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xP.apply(this,arguments)}const tV=die(({className:e,items:t,itemClass:r,itemControlAlignLeft:i,sortingIndex:n,useDragHandle:o,sortableHandlers:a,height:s,width:c,onCloseTrack:u,onCloseTrackMenuOpened:l,onConfigTrackMenuOpened:h,onAddSeries:f,handleConfigTrack:d,editable:p,itemReactClass:m,handleResizeTrack:g,resizeHandles:v})=>{const _=t.map((y,b)=>E.createElement(m,{key:`sci-${y.uid}-${Math.random().toString(36).substring(7)}`,className:r,controlAlignLeft:i,sortingIndex:n,index:b,uid:y.uid,height:y.height,width:y.width,item:y,useDragHandle:o,onCloseTrack:u,onCloseTrackMenuOpened:l,onConfigTrackMenuOpened:h,onAddSeries:f,handleConfigTrack:d,editable:p,handleResizeTrack:g,resizeHandles:v}));return E.createElement("div",xP({className:e,style:{height:s,width:c,background:"transparent"}},a),_)}),ZBe={"horizontal-tiled-plot":"_horizontal-tiled-plot_1bqkg_1"};function QBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rV(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,eHe(i.key),i)}}function JBe(e,t,r){return t&&rV(e.prototype,t),r&&rV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eHe(e){var t=tHe(e,"string");return typeof t=="symbol"?t:String(t)}function tHe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t)}function NP(e,t){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},NP(e,t)}function nHe(e){var t=oHe();return function(){var i=J0(e),n;if(t){var o=J0(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return iHe(this,n)}}function iHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q0(e)}function Q0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function J0(e){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J0(e)}function nV(e){return e&&e.sourceEvent}let eT=function(e){rHe(r,e);var t=nHe(r);function r(i){var n;return QBe(this,r),n=t.call(this,i),n.brushBehavior=ry().on("start",n.brushStarted.bind(Q0(n))).on("brush",n.brushed.bind(Q0(n))).on("end",n.brushedEnded.bind(Q0(n))),n}return JBe(r,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(n,o){return this.rangeSelectionTriggered?(this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==n.rangeSelection&&this.moveBrush(n.rangeSelection[0]?n.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==o):this.props.rangeSelection!==n.rangeSelection?(this.moveBrush(n.rangeSelection[0]?n.rangeSelection[0]:null,n.rangeSelectionEnd),this.state!==o):!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,Hu(this.brushEl,_o["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(n){const o=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!nV(n)||!this.props.onRangeSelection||o)&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(n.selection))}},{key:"brushStarted",value:function(n){!nV(n)||!n.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(n){if(!this.props.is1dRangeSelection)return;const o=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,n.selection&&n.sourceEvent&&this.props.onRangeSelection&&!o&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(n.selection)),n.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(n,o=!1){if(!this.brushEl)return;const a=n?[this.props.scale(n[0]),this.props.scale(n[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,o?this.brushEl.transition().call(this.brushBehavior.move,a):this.brushEl.call(this.brushBehavior.move,a)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const n=this.props.tracks.map(s=>s.height).reduce(ws,0),o=this.props.tracks.map(s=>$u(s)).reduce(Jd,!1),a=this.props.isRangeSelectionActive?_o["track-range-selection-active"]:_o["track-range-selection"];return E.createElement("div",{className:Zt("horizontal-tiled-plot",ZBe["horizontal-tiled-plot"])},o&&E.createElement("svg",{ref:s=>{this.brushEl=Ht(s)},className:a,style:{height:n,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"}),E.createElement(V0,{className:Zt(To.list,To.stylizedList),component:tV,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:n,helperClass:To.stylizedHelper,itemClass:To.stylizedItem,itemReactClass:KBe,items:this.props.tracks.map(s=>({configMenuVisible:s.uid===this.props.configTrackMenuId,uid:s.uid||xt.nice(),width:this.props.width,height:s.height,value:s.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:this.props.width}))}}]),r}(E.Component);eT.propTypes={configTrackMenuId:N.string,editable:N.bool,handleConfigTrack:N.func,handleResizeTrack:N.func,handleSortEnd:N.func,is1dRangeSelection:N.bool,isRangeSelectionActive:N.bool,onAddSeries:N.func,onCloseTrack:N.func,onCloseTrackMenuOpened:N.func,onConfigTrackMenuOpened:N.func,onRangeSelection:N.func,onRangeSelectionEnd:N.func,onRangeSelectionReset:N.func,onRangeSelectionStart:N.func,rangeSelection:N.array,rangeSelectionEnd:N.bool,referenceAncestor:N.func,resizeHandles:N.object,scale:N.func,tracks:N.array,width:N.number};function aHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iV(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,lHe(i.key),i)}}function sHe(e,t,r){return t&&iV(e.prototype,t),r&&iV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lHe(e){var t=cHe(e,"string");return typeof t=="symbol"?t:String(t)}function cHe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RP(e,t)}function RP(e,t){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},RP(e,t)}function fHe(e){var t=pHe();return function(){var i=tT(e),n;if(t){var o=tT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return hHe(this,n)}}function hHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dHe(e)}function dHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tT(e){return tT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tT(e)}const rT={pointerEvents:"all"};let oV=function(e){uHe(r,e);var t=fHe(r);function r(){return aHe(this,r),t.apply(this,arguments)}return sHe(r,[{key:"getControls",value:function(n){return E.createElement(r_,{imgStyleAdd:rT,imgStyleClose:rT,imgStyleMove:rT,imgStyleSettings:rT,isAlignLeft:this.props.controlAlignLeft,isMoveable:this.moveable,isVertical:!0,isVisible:n,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),r}(X0);function mHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aV(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,vHe(i.key),i)}}function gHe(e,t,r){return t&&aV(e.prototype,t),r&&aV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vHe(e){var t=yHe(e,"string");return typeof t=="symbol"?t:String(t)}function yHe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nT(){return typeof Reflect<"u"&&Reflect.get?nT=Reflect.get.bind():nT=function(t,r,i){var n=bHe(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},nT.apply(this,arguments)}function bHe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Oh(e),e!==null););return e}function _He(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MP(e,t)}function MP(e,t){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},MP(e,t)}function THe(e){var t=SHe();return function(){var i=Oh(e),n;if(t){var o=Oh(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return EHe(this,n)}}function EHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sV(e)}function sV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oh(e){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oh(e)}let wHe=function(e){_He(r,e);var t=THe(r);function r(i,n){var o;mHe(this,r),o=t.call(this,i,n);const{registerViewportChanged:a,removeViewportChanged:s}=i,c=xt.nice();return o.uid=c,o.removeViewportChanged=s,o.viewportXDomain=null,o.viewportYDomain=null,a(c,o.viewportChanged.bind(sV(o))),o}return gHe(r,[{key:"viewportChanged",value:function(n,o){const a=n.domain(),s=o.domain();this.viewportXDomain=a,this.viewportYDomain=s,this.draw()}},{key:"draw",value:function(){const n=this.pMain;if(!this.viewportXDomain||!this.viewportYDomain)return;n.clear(),n.lineStyle(1,255,1),n.beginFill(16740363,1);const o=this._xScale(this.viewportXDomain[0]),a=this._yScale(this.viewportYDomain[0]),s=this._xScale(this.viewportXDomain[1])-this._xScale(this.viewportXDomain[0]),c=this._yScale(this.viewportYDomain[1])-this._yScale(this.viewportYDomain[0]);this.pMain.drawRect(o,a,s,c)}},{key:"zoomed",value:function(n,o){this.xScale(n),this.yScale(o),this.draw()}},{key:"setPosition",value:function(n){nT(Oh(r.prototype),"setPosition",this).call(this,n),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.draw()}}]),r}(jn);function lV(e){this.size=0,this.limit=e,this._keymap={}}function AHe(e,t){const r={key:e,value:t};if(this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit)return this.shift();this.size+=1}function OHe(){const e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):(this.head=void 0,this.tail=void 0),e.newer=void 0,e.older=void 0,delete this._keymap[e.key],this.size-=1),e}function kHe(e,t){const r=this._keymap[e];if(r!==void 0)return r===this.tail||(r.newer&&(r===this.head&&(this.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=this.tail,this.tail&&(this.tail.newer=r),this.tail=r),t?r:r.value}function IHe(e){return this._keymap[e]}function CHe(e,t){const r=this.get(e,!0);let i;return r?(i=r.value,r.value=t):(i=this.put(e,t),i&&(i=i.value)),i}function PHe(e){const t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):(this.head=void 0,this.tail=void 0),this.size-=1,t.value}function DHe(){this.head=void 0,this.tail=void 0,this.size=0,this._keymap={}}function xHe(){return Object.keys(this._keymap)}function NHe(e,t,r){let i;if(t===!0?(r=!0,t=void 0):typeof t!="object"&&(t=this),r)for(i=this.tail;i;)e.call(t,i.key,i.value,this),i=i.older;else for(i=this.head;i;)e.call(t,i.key,i.value,this),i=i.newer}function RHe(){const e=[];let t=this.head;for(;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e}function MHe(){let e="",t=this.head;for(;t;)e+=`${String(t.key)}:${t.value}`,t=t.newer,t&&(e+=" < ");return e}Object.assign(lV.prototype,{put:AHe,get:kHe,find:IHe,keys:xHe,set:CHe,shift:OHe,remove:PHe,removeAll:DHe,forEach:NHe,toJSON:RHe,toString:MHe});const LP="1.13.4",BP={button:"_button_1wnjn_1","button-shortcut":"_button-shortcut_1wnjn_35"},fs=E.forwardRef((e,t)=>E.createElement("button",{ref:t,className:BP[e.styleName]??BP.button,disabled:e.disable,onBlur:e.onBlur,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseOut:e.onMouseOut,onMouseUp:e.onMouseUp,type:"button"},e.children,e.shortcut&&E.createElement("span",{className:BP["button-shortcut"]},e.shortcut)));fs.defaultProps={onClick:()=>{},styleName:"",type:"button"},fs.propTypes={children:N.any,disable:N.bool,onBlur:N.func,onClick:N.func,onMouseDown:N.func,onMouseOut:N.func,onMouseUp:N.func,shortcut:N.string,type:N.string,styleName:N.string};const LHe={cross:"_cross_2ke8w_1"};function cV(){return E.createElement("div",{className:LHe.cross})}function HP(){return HP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},HP.apply(this,arguments)}const{Provider:BHe,Consumer:HHe}=E.createContext({close:ql,open:ql}),iT=e=>E.forwardRef((t,r)=>E.createElement(HHe,null,i=>E.createElement(e,HP({ref:r},t,{modal:i})))),kh={"modal-background":"_modal-background_zzhoe_1","fade-in":"_fade-in_zzhoe_1","modal-hide":"_modal-hide_zzhoe_13","modal-wrap":"_modal-wrap_zzhoe_17","modal-window":"_modal-window_zzhoe_25","fade-scale-in":"_fade-scale-in_zzhoe_1","modal-window-max-height":"_modal-window-max-height_zzhoe_38","modal-content":"_modal-content_zzhoe_42"};function $P(e){const t=()=>{e.modal.close(),e.onClose&&e.onClose()};return E.createElement("div",{className:Zt(kh["modal-background"],{[kh["modal-hide"]]:e.hide})},E.createElement("div",{className:kh["modal-wrap"]},E.createElement("div",{className:Zt(kh["modal-window"],{[kh["modal-window-max-height"]]:e.maxHeight})},e.closeButton&&E.createElement(fs,{onClick:t},E.createElement(cV,null)),E.createElement("div",{className:kh["modal-content"]},e.children))))}$P.defaultProps={closeButton:!0,hide:!1,maxHeight:!1},$P.propTypes={children:N.element.isRequired,closeButton:N.bool,hide:N.bool,maxHeight:N.bool,modal:N.object.isRequired,onClose:N.func};const $He=iT($P),FP={"dialog-header":"_dialog-header_wp50s_1","dialog-main-max-height":"_dialog-main-max-height_wp50s_20","dialog-footer":"_dialog-footer_wp50s_31","dialog-footer-max-height":"_dialog-footer-max-height_wp50s_31"};function jP(e){const t=()=>{e.modal.close(),e.onCancel&&e.onCancel()},r=()=>{e.modal.close(),e.onOkay&&e.onOkay()};return E.createElement($He,{closeButton:!1,hide:e.hide,maxHeight:e.maxHeight},E.createElement(E.Fragment,null,E.createElement("header",{className:FP["dialog-header"]},E.createElement("h3",null,e.title),E.createElement(fs,{onClick:t},E.createElement(cV,null))),e.maxHeight?E.createElement("main",{className:Zt(e.maxHeight&&FP["dialog-main-max-height"])},e.children):E.createElement("main",null,e.children),E.createElement("footer",{className:FP[e.maxHeight?"dialog-footer-max-height":"dialog-footer"]},e.okayOnly?E.createElement("div",null):E.createElement(fs,{onClick:t,shortcut:e.cancelShortcut},e.cancelTitle),E.createElement(fs,{onClick:r,shortcut:e.okayShortcut},e.okayTitle))))}jP.defaultProps={cancelTitle:"Cancel",hide:!1,maxHeight:!1,okayOnly:!1,okayTitle:"Ok"},jP.propTypes={cancelShortcut:N.string,cancelTitle:N.string,children:N.object,hide:N.bool,maxHeight:N.bool,modal:N.object.isRequired,okayShortcut:N.string,okayTitle:N.string,okayOnly:N.bool,onCancel:N.func.isRequired,onOkay:N.func.isRequired,title:N.string.isRequired};const lg=iT(jP);var no={},cg={},FHe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;const uV=FHe;var jHe=typeof self=="object"&&self&&self.Object===Object&&self,UHe=uV||jHe||Function("return this")();const Do=UHe;var GHe=Do.Symbol;const Ta=GHe;var fV=Object.prototype,zHe=fV.hasOwnProperty,VHe=fV.toString,ug=Ta?Ta.toStringTag:void 0;function WHe(e){var t=zHe.call(e,ug),r=e[ug];try{e[ug]=void 0;var i=!0}catch{}var n=VHe.call(e);return i&&(t?e[ug]=r:delete e[ug]),n}var YHe=Object.prototype,qHe=YHe.toString;function XHe(e){return qHe.call(e)}var KHe="[object Null]",ZHe="[object Undefined]",hV=Ta?Ta.toStringTag:void 0;function ul(e){return e==null?e===void 0?ZHe:KHe:hV&&hV in Object(e)?WHe(e):XHe(e)}var QHe=Array.isArray;const ci=QHe;function xo(e){return e!=null&&typeof e=="object"}var JHe="[object String]";function e$e(e){return typeof e=="string"||!ci(e)&&xo(e)&&ul(e)==JHe}const t$e=Sa(Object.freeze(Object.defineProperty({__proto__:null,default:e$e},Symbol.toStringTag,{value:"Module"})));function r$e(e){return function(t,r,i){for(var n=-1,o=Object(t),a=i(t),s=a.length;s--;){var c=a[e?s:++n];if(r(o[c],c,o)===!1)break}return t}}var n$e=r$e();const dV=n$e;function i$e(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var o$e="[object Arguments]";function pV(e){return xo(e)&&ul(e)==o$e}var mV=Object.prototype,a$e=mV.hasOwnProperty,s$e=mV.propertyIsEnumerable,l$e=pV(function(){return arguments}())?pV:function(e){return xo(e)&&a$e.call(e,"callee")&&!s$e.call(e,"callee")};const oT=l$e;function c$e(){return!1}var gV=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,vV=gV&&typeof module=="object"&&module&&!module.nodeType&&module,u$e=vV&&vV.exports===gV,yV=u$e?Do.Buffer:void 0,f$e=yV?yV.isBuffer:void 0,h$e=f$e||c$e;const fg=h$e;var d$e=9007199254740991,p$e=/^(?:0|[1-9]\d*)$/;function UP(e,t){var r=typeof e;return t=t??d$e,!!t&&(r=="number"||r!="symbol"&&p$e.test(e))&&e>-1&&e%1==0&&e<t}var m$e=9007199254740991;function GP(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=m$e}var g$e="[object Arguments]",v$e="[object Array]",y$e="[object Boolean]",b$e="[object Date]",_$e="[object Error]",T$e="[object Function]",E$e="[object Map]",S$e="[object Number]",w$e="[object Object]",A$e="[object RegExp]",O$e="[object Set]",k$e="[object String]",I$e="[object WeakMap]",C$e="[object ArrayBuffer]",P$e="[object DataView]",D$e="[object Float32Array]",x$e="[object Float64Array]",N$e="[object Int8Array]",R$e="[object Int16Array]",M$e="[object Int32Array]",L$e="[object Uint8Array]",B$e="[object Uint8ClampedArray]",H$e="[object Uint16Array]",$$e="[object Uint32Array]",wr={};wr[D$e]=wr[x$e]=wr[N$e]=wr[R$e]=wr[M$e]=wr[L$e]=wr[B$e]=wr[H$e]=wr[$$e]=!0,wr[g$e]=wr[v$e]=wr[C$e]=wr[y$e]=wr[P$e]=wr[b$e]=wr[_$e]=wr[T$e]=wr[E$e]=wr[S$e]=wr[w$e]=wr[A$e]=wr[O$e]=wr[k$e]=wr[I$e]=!1;function F$e(e){return xo(e)&&GP(e.length)&&!!wr[ul(e)]}function zP(e){return function(t){return e(t)}}var bV=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,hg=bV&&typeof module=="object"&&module&&!module.nodeType&&module,j$e=hg&&hg.exports===bV,VP=j$e&&uV.process,U$e=function(){try{var e=hg&&hg.require&&hg.require("util").types;return e||VP&&VP.binding&&VP.binding("util")}catch{}}();const Ih=U$e;var _V=Ih&&Ih.isTypedArray,G$e=_V?zP(_V):F$e;const WP=G$e;var z$e=Object.prototype,V$e=z$e.hasOwnProperty;function TV(e,t){var r=ci(e),i=!r&&oT(e),n=!r&&!i&&fg(e),o=!r&&!i&&!n&&WP(e),a=r||i||n||o,s=a?i$e(e.length,String):[],c=s.length;for(var u in e)(t||V$e.call(e,u))&&!(a&&(u=="length"||n&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||UP(u,c)))&&s.push(u);return s}var W$e=Object.prototype;function YP(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||W$e;return e===r}function EV(e,t){return function(r){return e(t(r))}}var Y$e=EV(Object.keys,Object);const q$e=Y$e;var X$e=Object.prototype,K$e=X$e.hasOwnProperty;function Z$e(e){if(!YP(e))return q$e(e);var t=[];for(var r in Object(e))K$e.call(e,r)&&r!="constructor"&&t.push(r);return t}function Hi(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Q$e="[object AsyncFunction]",J$e="[object Function]",eFe="[object GeneratorFunction]",tFe="[object Proxy]";function qP(e){if(!Hi(e))return!1;var t=ul(e);return t==J$e||t==eFe||t==Q$e||t==tFe}function Ch(e){return e!=null&&GP(e.length)&&!qP(e)}function dg(e){return Ch(e)?TV(e):Z$e(e)}function SV(e,t){return e&&dV(e,t,dg)}function aT(e){return e}function wV(e){return typeof e=="function"?e:aT}function rFe(e,t){return e&&SV(e,wV(t))}const XP=Sa(Object.freeze(Object.defineProperty({__proto__:null,default:rFe},Symbol.toStringTag,{value:"Module"})));var nFe=EV(Object.getPrototypeOf,Object);const KP=nFe;var iFe="[object Object]",oFe=Function.prototype,aFe=Object.prototype,AV=oFe.toString,sFe=aFe.hasOwnProperty,lFe=AV.call(Object);function OV(e){if(!xo(e)||ul(e)!=iFe)return!1;var t=KP(e);if(t===null)return!0;var r=sFe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&AV.call(r)==lFe}const cFe=Sa(Object.freeze(Object.defineProperty({__proto__:null,default:OV},Symbol.toStringTag,{value:"Module"})));function kV(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function uFe(){this.__data__=[],this.size=0}function pg(e,t){return e===t||e!==e&&t!==t}function sT(e,t){for(var r=e.length;r--;)if(pg(e[r][0],t))return r;return-1}var fFe=Array.prototype,hFe=fFe.splice;function dFe(e){var t=this.__data__,r=sT(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():hFe.call(t,r,1),--this.size,!0}function pFe(e){var t=this.__data__,r=sT(t,e);return r<0?void 0:t[r][1]}function mFe(e){return sT(this.__data__,e)>-1}function gFe(e,t){var r=this.__data__,i=sT(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}function hs(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}hs.prototype.clear=uFe,hs.prototype.delete=dFe,hs.prototype.get=pFe,hs.prototype.has=mFe,hs.prototype.set=gFe;function vFe(){this.__data__=new hs,this.size=0}function yFe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function bFe(e){return this.__data__.get(e)}function _Fe(e){return this.__data__.has(e)}var TFe=Do["__core-js_shared__"];const ZP=TFe;var IV=function(){var e=/[^.]+$/.exec(ZP&&ZP.keys&&ZP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function EFe(e){return!!IV&&IV in e}var SFe=Function.prototype,wFe=SFe.toString;function Kc(e){if(e!=null){try{return wFe.call(e)}catch{}try{return e+""}catch{}}return""}var AFe=/[\\^$.*+?()[\]{}|]/g,OFe=/^\[object .+?Constructor\]$/,kFe=Function.prototype,IFe=Object.prototype,CFe=kFe.toString,PFe=IFe.hasOwnProperty,DFe=RegExp("^"+CFe.call(PFe).replace(AFe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xFe(e){if(!Hi(e)||EFe(e))return!1;var t=qP(e)?DFe:OFe;return t.test(Kc(e))}function NFe(e,t){return e?.[t]}function Zc(e,t){var r=NFe(e,t);return xFe(r)?r:void 0}var RFe=Zc(Do,"Map");const mg=RFe;var MFe=Zc(Object,"create");const gg=MFe;function LFe(){this.__data__=gg?gg(null):{},this.size=0}function BFe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var HFe="__lodash_hash_undefined__",$Fe=Object.prototype,FFe=$Fe.hasOwnProperty;function jFe(e){var t=this.__data__;if(gg){var r=t[e];return r===HFe?void 0:r}return FFe.call(t,e)?t[e]:void 0}var UFe=Object.prototype,GFe=UFe.hasOwnProperty;function zFe(e){var t=this.__data__;return gg?t[e]!==void 0:GFe.call(t,e)}var VFe="__lodash_hash_undefined__";function WFe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gg&&t===void 0?VFe:t,this}function Qc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Qc.prototype.clear=LFe,Qc.prototype.delete=BFe,Qc.prototype.get=jFe,Qc.prototype.has=zFe,Qc.prototype.set=WFe;function YFe(){this.size=0,this.__data__={hash:new Qc,map:new(mg||hs),string:new Qc}}function qFe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function lT(e,t){var r=e.__data__;return qFe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function XFe(e){var t=lT(this,e).delete(e);return this.size-=t?1:0,t}function KFe(e){return lT(this,e).get(e)}function ZFe(e){return lT(this,e).has(e)}function QFe(e,t){var r=lT(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}function ds(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}ds.prototype.clear=YFe,ds.prototype.delete=XFe,ds.prototype.get=KFe,ds.prototype.has=ZFe,ds.prototype.set=QFe;var JFe=200;function eje(e,t){var r=this.__data__;if(r instanceof hs){var i=r.__data__;if(!mg||i.length<JFe-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new ds(i)}return r.set(e,t),this.size=r.size,this}function No(e){var t=this.__data__=new hs(e);this.size=t.size}No.prototype.clear=vFe,No.prototype.delete=yFe,No.prototype.get=bFe,No.prototype.has=_Fe,No.prototype.set=eje;var tje="__lodash_hash_undefined__";function rje(e){return this.__data__.set(e,tje),this}function nje(e){return this.__data__.has(e)}function cT(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ds;++t<r;)this.add(e[t])}cT.prototype.add=cT.prototype.push=rje,cT.prototype.has=nje;function ije(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}function oje(e,t){return e.has(t)}var aje=1,sje=2;function CV(e,t,r,i,n,o){var a=r&aje,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e),l=o.get(t);if(u&&l)return u==t&&l==e;var h=-1,f=!0,d=r&sje?new cT:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],m=t[h];if(i)var g=a?i(m,p,h,t,e,o):i(p,m,h,e,t,o);if(g!==void 0){if(g)continue;f=!1;break}if(d){if(!ije(t,function(v,_){if(!oje(d,_)&&(p===v||n(p,v,r,i,o)))return d.push(_)})){f=!1;break}}else if(!(p===m||n(p,m,r,i,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var lje=Do.Uint8Array;const uT=lje;function cje(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}function uje(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var fje=1,hje=2,dje="[object Boolean]",pje="[object Date]",mje="[object Error]",gje="[object Map]",vje="[object Number]",yje="[object RegExp]",bje="[object Set]",_je="[object String]",Tje="[object Symbol]",Eje="[object ArrayBuffer]",Sje="[object DataView]",PV=Ta?Ta.prototype:void 0,QP=PV?PV.valueOf:void 0;function wje(e,t,r,i,n,o,a){switch(r){case Sje:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Eje:return!(e.byteLength!=t.byteLength||!o(new uT(e),new uT(t)));case dje:case pje:case vje:return pg(+e,+t);case mje:return e.name==t.name&&e.message==t.message;case yje:case _je:return e==t+"";case gje:var s=cje;case bje:var c=i&fje;if(s||(s=uje),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;i|=hje,a.set(e,t);var l=CV(s(e),s(t),i,n,o,a);return a.delete(e),l;case Tje:if(QP)return QP.call(e)==QP.call(t)}return!1}function DV(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}function xV(e,t,r){var i=t(e);return ci(e)?i:DV(i,r(e))}function Aje(e,t){for(var r=-1,i=e==null?0:e.length,n=0,o=[];++r<i;){var a=e[r];t(a,r,e)&&(o[n++]=a)}return o}function NV(){return[]}var Oje=Object.prototype,kje=Oje.propertyIsEnumerable,RV=Object.getOwnPropertySymbols,Ije=RV?function(e){return e==null?[]:(e=Object(e),Aje(RV(e),function(t){return kje.call(e,t)}))}:NV;const JP=Ije;function eD(e){return xV(e,dg,JP)}var Cje=1,Pje=Object.prototype,Dje=Pje.hasOwnProperty;function xje(e,t,r,i,n,o){var a=r&Cje,s=eD(e),c=s.length,u=eD(t),l=u.length;if(c!=l&&!a)return!1;for(var h=c;h--;){var f=s[h];if(!(a?f in t:Dje.call(t,f)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var m=!0;o.set(e,t),o.set(t,e);for(var g=a;++h<c;){f=s[h];var v=e[f],_=t[f];if(i)var y=a?i(_,v,f,t,e,o):i(v,_,f,e,t,o);if(!(y===void 0?v===_||n(v,_,r,i,o):y)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var b=e.constructor,T=t.constructor;b!=T&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof T=="function"&&T instanceof T)&&(m=!1)}return o.delete(e),o.delete(t),m}var Nje=Zc(Do,"DataView");const tD=Nje;var Rje=Zc(Do,"Promise");const rD=Rje;var Mje=Zc(Do,"Set");const nD=Mje;var Lje=Zc(Do,"WeakMap");const iD=Lje;var MV="[object Map]",Bje="[object Object]",LV="[object Promise]",BV="[object Set]",HV="[object WeakMap]",$V="[object DataView]",Hje=Kc(tD),$je=Kc(mg),Fje=Kc(rD),jje=Kc(nD),Uje=Kc(iD),Jc=ul;(tD&&Jc(new tD(new ArrayBuffer(1)))!=$V||mg&&Jc(new mg)!=MV||rD&&Jc(rD.resolve())!=LV||nD&&Jc(new nD)!=BV||iD&&Jc(new iD)!=HV)&&(Jc=function(e){var t=ul(e),r=t==Bje?e.constructor:void 0,i=r?Kc(r):"";if(i)switch(i){case Hje:return $V;case $je:return MV;case Fje:return LV;case jje:return BV;case Uje:return HV}return t});const vg=Jc;var Gje=1,FV="[object Arguments]",jV="[object Array]",fT="[object Object]",zje=Object.prototype,UV=zje.hasOwnProperty;function Vje(e,t,r,i,n,o){var a=ci(e),s=ci(t),c=a?jV:vg(e),u=s?jV:vg(t);c=c==FV?fT:c,u=u==FV?fT:u;var l=c==fT,h=u==fT,f=c==u;if(f&&fg(e)){if(!fg(t))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new No),a||WP(e)?CV(e,t,r,i,n,o):wje(e,t,c,r,i,n,o);if(!(r&Gje)){var d=l&&UV.call(e,"__wrapped__"),p=h&&UV.call(t,"__wrapped__");if(d||p){var m=d?e.value():e,g=p?t.value():t;return o||(o=new No),n(m,g,r,i,o)}}return f?(o||(o=new No),xje(e,t,r,i,n,o)):!1}function oD(e,t,r,i,n){return e===t?!0:e==null||t==null||!xo(e)&&!xo(t)?e!==e&&t!==t:Vje(e,t,r,i,oD,n)}var Wje=1,Yje=2;function qje(e,t,r,i){var n=r.length,o=n,a=!i;if(e==null)return!o;for(e=Object(e);n--;){var s=r[n];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<o;){s=r[n];var c=s[0],u=e[c],l=s[1];if(a&&s[2]){if(u===void 0&&!(c in e))return!1}else{var h=new No;if(i)var f=i(u,l,c,e,t,h);if(!(f===void 0?oD(l,u,Wje|Yje,i,h):f))return!1}}return!0}function GV(e){return e===e&&!Hi(e)}function Xje(e){for(var t=dg(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,GV(n)]}return t}function zV(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Kje(e){var t=Xje(e);return t.length==1&&t[0][2]?zV(t[0][0],t[0][1]):function(r){return r===e||qje(r,e,t)}}var Zje="[object Symbol]";function hT(e){return typeof e=="symbol"||xo(e)&&ul(e)==Zje}var Qje=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jje=/^\w*$/;function aD(e,t){if(ci(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||hT(e)?!0:Jje.test(e)||!Qje.test(e)||t!=null&&e in Object(t)}var e6e="Expected a function";function sD(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(e6e);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var a=e.apply(this,i);return r.cache=o.set(n,a)||o,a};return r.cache=new(sD.Cache||ds),r}sD.Cache=ds;var t6e=500;function r6e(e){var t=sD(e,function(i){return r.size===t6e&&r.clear(),i}),r=t.cache;return t}var n6e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i6e=/\\(\\)?/g,o6e=r6e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(n6e,function(r,i,n,o){t.push(n?o.replace(i6e,"$1"):i||r)}),t});const a6e=o6e;var s6e=1/0,VV=Ta?Ta.prototype:void 0,WV=VV?VV.toString:void 0;function YV(e){if(typeof e=="string")return e;if(ci(e))return kV(e,YV)+"";if(hT(e))return WV?WV.call(e):"";var t=e+"";return t=="0"&&1/e==-s6e?"-0":t}function l6e(e){return e==null?"":YV(e)}function qV(e,t){return ci(e)?e:aD(e,t)?[e]:a6e(l6e(e))}var c6e=1/0;function dT(e){if(typeof e=="string"||hT(e))return e;var t=e+"";return t=="0"&&1/e==-c6e?"-0":t}function XV(e,t){t=qV(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[dT(t[r++])];return r&&r==i?e:void 0}function u6e(e,t,r){var i=e==null?void 0:XV(e,t);return i===void 0?r:i}function f6e(e,t){return e!=null&&t in Object(e)}function h6e(e,t,r){t=qV(t,e);for(var i=-1,n=t.length,o=!1;++i<n;){var a=dT(t[i]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++i!=n?o:(n=e==null?0:e.length,!!n&&GP(n)&&UP(a,n)&&(ci(e)||oT(e)))}function d6e(e,t){return e!=null&&h6e(e,t,f6e)}var p6e=1,m6e=2;function g6e(e,t){return aD(e)&&GV(t)?zV(dT(e),t):function(r){var i=u6e(r,e);return i===void 0&&i===t?d6e(r,e):oD(t,i,p6e|m6e)}}function v6e(e){return function(t){return t?.[e]}}function y6e(e){return function(t){return XV(t,e)}}function b6e(e){return aD(e)?v6e(dT(e)):y6e(e)}function _6e(e){return typeof e=="function"?e:e==null?aT:typeof e=="object"?ci(e)?g6e(e[0],e[1]):Kje(e):b6e(e)}function T6e(e,t){return function(r,i){if(r==null)return r;if(!Ch(r))return e(r,i);for(var n=r.length,o=t?n:-1,a=Object(r);(t?o--:++o<n)&&i(a[o],o,a)!==!1;);return r}}var E6e=T6e(SV);const KV=E6e;function S6e(e,t){var r=-1,i=Ch(e)?Array(e.length):[];return KV(e,function(n,o,a){i[++r]=t(n,o,a)}),i}function fl(e,t){var r=ci(e)?kV:S6e;return r(e,_6e(t))}const w6e=Sa(Object.freeze(Object.defineProperty({__proto__:null,default:fl},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(cg,"__esModule",{value:!0}),cg.flattenNames=void 0;var A6e=t$e,O6e=pT(A6e),k6e=XP,I6e=pT(k6e),C6e=cFe,P6e=pT(C6e),D6e=w6e,x6e=pT(D6e);function pT(e){return e&&e.__esModule?e:{default:e}}var N6e=cg.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[];return(0,x6e.default)(t,function(i){Array.isArray(i)?e(i).map(function(n){return r.push(n)}):(0,P6e.default)(i)?(0,I6e.default)(i,function(n,o){n===!0&&r.push(o),r.push(o+"-"+n)}):(0,O6e.default)(i)&&r.push(i)}),r};cg.default=N6e;var yg={};function ZV(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var R6e=function(){try{var e=Zc(Object,"defineProperty");return e({},"",{}),e}catch{}}();const mT=R6e;function lD(e,t,r){t=="__proto__"&&mT?mT(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var M6e=Object.prototype,L6e=M6e.hasOwnProperty;function QV(e,t,r){var i=e[t];(!(L6e.call(e,t)&&pg(i,r))||r===void 0&&!(t in e))&&lD(e,t,r)}function bg(e,t,r,i){var n=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=i?i(r[s],e[s],s,r,e):void 0;c===void 0&&(c=e[s]),n?lD(r,s,c):QV(r,s,c)}return r}function B6e(e,t){return e&&bg(t,dg(t),e)}function H6e(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var $6e=Object.prototype,F6e=$6e.hasOwnProperty;function j6e(e){if(!Hi(e))return H6e(e);var t=YP(e),r=[];for(var i in e)i=="constructor"&&(t||!F6e.call(e,i))||r.push(i);return r}function _g(e){return Ch(e)?TV(e,!0):j6e(e)}function U6e(e,t){return e&&bg(t,_g(t),e)}var JV=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,eW=JV&&typeof module=="object"&&module&&!module.nodeType&&module,G6e=eW&&eW.exports===JV,tW=G6e?Do.Buffer:void 0,rW=tW?tW.allocUnsafe:void 0;function nW(e,t){if(t)return e.slice();var r=e.length,i=rW?rW(r):new e.constructor(r);return e.copy(i),i}function iW(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}function z6e(e,t){return bg(e,JP(e),t)}var V6e=Object.getOwnPropertySymbols,W6e=V6e?function(e){for(var t=[];e;)DV(t,JP(e)),e=KP(e);return t}:NV;const oW=W6e;function Y6e(e,t){return bg(e,oW(e),t)}function q6e(e){return xV(e,_g,oW)}var X6e=Object.prototype,K6e=X6e.hasOwnProperty;function Z6e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&K6e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function cD(e){var t=new e.constructor(e.byteLength);return new uT(t).set(new uT(e)),t}function Q6e(e,t){var r=t?cD(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var J6e=/\w*$/;function eUe(e){var t=new e.constructor(e.source,J6e.exec(e));return t.lastIndex=e.lastIndex,t}var aW=Ta?Ta.prototype:void 0,sW=aW?aW.valueOf:void 0;function tUe(e){return sW?Object(sW.call(e)):{}}function lW(e,t){var r=t?cD(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var rUe="[object Boolean]",nUe="[object Date]",iUe="[object Map]",oUe="[object Number]",aUe="[object RegExp]",sUe="[object Set]",lUe="[object String]",cUe="[object Symbol]",uUe="[object ArrayBuffer]",fUe="[object DataView]",hUe="[object Float32Array]",dUe="[object Float64Array]",pUe="[object Int8Array]",mUe="[object Int16Array]",gUe="[object Int32Array]",vUe="[object Uint8Array]",yUe="[object Uint8ClampedArray]",bUe="[object Uint16Array]",_Ue="[object Uint32Array]";function TUe(e,t,r){var i=e.constructor;switch(t){case uUe:return cD(e);case rUe:case nUe:return new i(+e);case fUe:return Q6e(e,r);case hUe:case dUe:case pUe:case mUe:case gUe:case vUe:case yUe:case bUe:case _Ue:return lW(e,r);case iUe:return new i;case oUe:case lUe:return new i(e);case aUe:return eUe(e);case sUe:return new i;case cUe:return tUe(e)}}var cW=Object.create,EUe=function(){function e(){}return function(t){if(!Hi(t))return{};if(cW)return cW(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const SUe=EUe;function uW(e){return typeof e.constructor=="function"&&!YP(e)?SUe(KP(e)):{}}var wUe="[object Map]";function AUe(e){return xo(e)&&vg(e)==wUe}var fW=Ih&&Ih.isMap,OUe=fW?zP(fW):AUe;const kUe=OUe;var IUe="[object Set]";function CUe(e){return xo(e)&&vg(e)==IUe}var hW=Ih&&Ih.isSet,PUe=hW?zP(hW):CUe;const DUe=PUe;var xUe=1,NUe=2,RUe=4,dW="[object Arguments]",MUe="[object Array]",LUe="[object Boolean]",BUe="[object Date]",HUe="[object Error]",pW="[object Function]",$Ue="[object GeneratorFunction]",FUe="[object Map]",jUe="[object Number]",mW="[object Object]",UUe="[object RegExp]",GUe="[object Set]",zUe="[object String]",VUe="[object Symbol]",WUe="[object WeakMap]",YUe="[object ArrayBuffer]",qUe="[object DataView]",XUe="[object Float32Array]",KUe="[object Float64Array]",ZUe="[object Int8Array]",QUe="[object Int16Array]",JUe="[object Int32Array]",e4e="[object Uint8Array]",t4e="[object Uint8ClampedArray]",r4e="[object Uint16Array]",n4e="[object Uint32Array]",_r={};_r[dW]=_r[MUe]=_r[YUe]=_r[qUe]=_r[LUe]=_r[BUe]=_r[XUe]=_r[KUe]=_r[ZUe]=_r[QUe]=_r[JUe]=_r[FUe]=_r[jUe]=_r[mW]=_r[UUe]=_r[GUe]=_r[zUe]=_r[VUe]=_r[e4e]=_r[t4e]=_r[r4e]=_r[n4e]=!0,_r[HUe]=_r[pW]=_r[WUe]=!1;function gT(e,t,r,i,n,o){var a,s=t&xUe,c=t&NUe,u=t&RUe;if(r&&(a=n?r(e,i,n,o):r(e)),a!==void 0)return a;if(!Hi(e))return e;var l=ci(e);if(l){if(a=Z6e(e),!s)return iW(e,a)}else{var h=vg(e),f=h==pW||h==$Ue;if(fg(e))return nW(e,s);if(h==mW||h==dW||f&&!n){if(a=c||f?{}:uW(e),!s)return c?Y6e(e,U6e(a,e)):z6e(e,B6e(a,e))}else{if(!_r[h])return n?e:{};a=TUe(e,h,s)}}o||(o=new No);var d=o.get(e);if(d)return d;o.set(e,a),DUe(e)?e.forEach(function(g){a.add(gT(g,t,r,g,e,o))}):kUe(e)&&e.forEach(function(g,v){a.set(v,gT(g,t,r,v,e,o))});var p=u?c?q6e:eD:c?_g:dg,m=l?void 0:p(e);return ZV(m||e,function(g,v){m&&(v=g,g=e[v]),QV(a,v,gT(g,t,r,v,e,o))}),a}var i4e=1,o4e=4;function a4e(e){return gT(e,i4e|o4e)}const s4e=Sa(Object.freeze(Object.defineProperty({__proto__:null,default:a4e},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(yg,"__esModule",{value:!0}),yg.mergeClasses=void 0;var l4e=XP,c4e=gW(l4e),u4e=s4e,f4e=gW(u4e),h4e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function gW(e){return e&&e.__esModule?e:{default:e}}var d4e=yg.mergeClasses=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=t.default&&(0,f4e.default)(t.default)||{};return r.map(function(n){var o=t[n];return o&&(0,c4e.default)(o,function(a,s){i[s]||(i[s]={}),i[s]=h4e({},i[s],o[s])}),n}),i};yg.default=d4e;var Tg={};Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.autoprefix=void 0;var p4e=XP,vW=g4e(p4e),m4e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function g4e(e){return e&&e.__esModule?e:{default:e}}var v4e={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var r=t&&t.split(" ");return{position:"absolute",top:r&&r[0],right:r&&r[1],bottom:r&&r[2],left:r&&r[3]}},extend:function(t,r){var i=r[t];return i||{extend:t}}},y4e=Tg.autoprefix=function(t){var r={};return(0,vW.default)(t,function(i,n){var o={};(0,vW.default)(i,function(a,s){var c=v4e[s];c?o=m4e({},o,c(a)):o[s]=a}),r[n]=o}),r};Tg.default=y4e;var Eg={};Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.hover=void 0;var b4e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_4e=E,uD=T4e(_4e);function T4e(e){return e&&e.__esModule?e:{default:e}}function E4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yW(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function S4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w4e=Eg.hover=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){S4e(n,i);function n(){var o,a,s,c;E4e(this,n);for(var u=arguments.length,l=Array(u),h=0;h<u;h++)l[h]=arguments[h];return c=(a=(s=yW(this,(o=n.__proto__||Object.getPrototypeOf(n)).call.apply(o,[this].concat(l))),s),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return uD.default.createElement(r,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},uD.default.createElement(t,b4e({},s.props,s.state)))},a),yW(s,c)}return n}(uD.default.Component)};Eg.default=w4e;var Sg={};Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.active=void 0;var A4e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},O4e=E,fD=k4e(O4e);function k4e(e){return e&&e.__esModule?e:{default:e}}function I4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bW(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function C4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P4e=Sg.active=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){C4e(n,i);function n(){var o,a,s,c;I4e(this,n);for(var u=arguments.length,l=Array(u),h=0;h<u;h++)l[h]=arguments[h];return c=(a=(s=bW(this,(o=n.__proto__||Object.getPrototypeOf(n)).call.apply(o,[this].concat(l))),s),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return fD.default.createElement(r,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},fD.default.createElement(t,A4e({},s.props,s.state)))},a),bW(s,c)}return n}(fD.default.Component)};Sg.default=P4e;var hD={};Object.defineProperty(hD,"__esModule",{value:!0});var D4e=function(t,r){var i={},n=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=s};return t===0&&n("first-child"),t===r-1&&n("last-child"),(t===0||t%2===0)&&n("even"),Math.abs(t%2)===1&&n("odd"),n("nth-child",t),i};hD.default=D4e,Object.defineProperty(no,"__esModule",{value:!0}),no.ReactCSS=no.loop=no.handleActive=dD=no.handleHover=no.hover=void 0;var x4e=cg,N4e=Ph(x4e),R4e=yg,M4e=Ph(R4e),L4e=Tg,B4e=Ph(L4e),H4e=Eg,_W=Ph(H4e),$4e=Sg,F4e=Ph($4e),j4e=hD,U4e=Ph(j4e);function Ph(e){return e&&e.__esModule?e:{default:e}}no.hover=_W.default;var dD=no.handleHover=_W.default;no.handleActive=F4e.default,no.loop=U4e.default;var G4e=no.ReactCSS=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];var o=(0,N4e.default)(i),a=(0,M4e.default)(t,o);return(0,B4e.default)(a)},gt=no.default=G4e,z4e=function(t,r,i,n,o){var a=o.clientWidth,s=o.clientHeight,c=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,u=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,l=c-(o.getBoundingClientRect().left+window.pageXOffset),h=u-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var f=void 0;if(h<0?f=0:h>s?f=1:f=Math.round(h*100/s)/100,r.a!==f)return{h:r.h,s:r.s,l:r.l,a:f,source:"rgb"}}else{var d=void 0;if(l<0?d=0:l>a?d=1:d=Math.round(l*100/a)/100,n!==d)return{h:r.h,s:r.s,l:r.l,a:d,source:"rgb"}}return null},pD={},V4e=function(t,r,i,n){if(typeof document>"u"&&!n)return null;var o=n?new n:document.createElement("canvas");o.width=i*2,o.height=i*2;var a=o.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,o.width,o.height),a.fillStyle=r,a.fillRect(0,0,i,i),a.translate(i,i),a.fillRect(0,0,i,i),o.toDataURL()):null},W4e=function(t,r,i,n){var o=t+"-"+r+"-"+i+(n?"-server":"");if(pD[o])return pD[o];var a=V4e(t,r,i,n);return pD[o]=a,a},TW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Dh=function(t){var r=t.white,i=t.grey,n=t.size,o=t.renderers,a=t.borderRadius,s=t.boxShadow,c=t.children,u=gt({default:{grid:{borderRadius:a,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+W4e(r,i,n,o.canvas)+") center left"}}});return E.isValidElement(c)?E.cloneElement(c,TW({},c.props,{style:TW({},c.props.style,u.grid)})):E.createElement("div",{style:u.grid})};Dh.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var Y4e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},q4e=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function X4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EW(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function K4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var mD=function(e){K4e(t,e);function t(){var r,i,n,o;X4e(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return o=(i=(n=EW(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),n),n.handleChange=function(u){var l=z4e(u,n.props.hsl,n.props.direction,n.props.a,n.container);l&&typeof n.props.onChange=="function"&&n.props.onChange(l,u)},n.handleMouseDown=function(u){n.handleChange(u),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp)},i),EW(n,o)}return q4e(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var i=this,n=this.props.rgb,o=gt({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+n.r+","+n.g+","+n.b+`, 0) 0%,
           rgba(`+n.r+","+n.g+","+n.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:n.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+n.r+","+n.g+","+n.b+`, 0) 0%,
           rgba(`+n.r+","+n.g+","+n.b+", 1) 100%)"},pointer:{left:0,top:n.a*100+"%"}},overwrite:Y4e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return E.createElement("div",{style:o.alpha},E.createElement("div",{style:o.checkboard},E.createElement(Dh,{renderers:this.props.renderers})),E.createElement("div",{style:o.gradient}),E.createElement("div",{style:o.container,ref:function(s){return i.container=s},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},E.createElement("div",{style:o.pointer},this.props.pointer?E.createElement(this.props.pointer,this.props):E.createElement("div",{style:o.slider}))))}}]),t}(E.PureComponent||E.Component),Z4e=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Q4e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eGe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function tGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rGe=1,SW=38,nGe=40,iGe=[SW,nGe],oGe=function(t){return iGe.indexOf(t)>-1},aGe=function(t){return Number(String(t).replace(/%/g,""))},sGe=1,Xt=function(e){tGe(t,e);function t(r){J4e(this,t);var i=eGe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.handleBlur=function(){i.state.blurValue&&i.setState({value:i.state.blurValue,blurValue:null})},i.handleChange=function(n){i.setUpdatedValue(n.target.value,n)},i.handleKeyDown=function(n){var o=aGe(n.target.value);if(!isNaN(o)&&oGe(n.keyCode)){var a=i.getArrowOffset(),s=n.keyCode===SW?o+a:o-a;i.setUpdatedValue(s,n)}},i.handleDrag=function(n){if(i.props.dragLabel){var o=Math.round(i.props.value+n.movementX);o>=0&&o<=i.props.dragMax&&i.props.onChange&&i.props.onChange(i.getValueObjectWithLabel(o),n)}},i.handleMouseDown=function(n){i.props.dragLabel&&(n.preventDefault(),i.handleDrag(n),window.addEventListener("mousemove",i.handleDrag),window.addEventListener("mouseup",i.handleMouseUp))},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleDrag),window.removeEventListener("mouseup",i.handleMouseUp)},i.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},i.inputId="rc-editable-input-"+sGe++,i}return Z4e(t,[{key:"componentDidUpdate",value:function(i,n){this.props.value!==this.state.value&&(i.value!==this.props.value||n.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(i){return Q4e({},this.props.label,i)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||rGe}},{key:"setUpdatedValue",value:function(i,n){var o=this.props.label?this.getValueObjectWithLabel(i):i;this.props.onChange&&this.props.onChange(o,n),this.setState({value:i})}},{key:"render",value:function(){var i=this,n=gt({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return E.createElement("div",{style:n.wrap},E.createElement("input",{id:this.inputId,style:n.input,ref:function(a){return i.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?E.createElement("label",{htmlFor:this.inputId,style:n.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(E.PureComponent||E.Component),lGe=function(t,r,i,n){var o=n.clientWidth,a=n.clientHeight,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,u=s-(n.getBoundingClientRect().left+window.pageXOffset),l=c-(n.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var h=void 0;if(l<0)h=359;else if(l>a)h=0;else{var f=-(l*100/a)+100;h=360*f/100}if(i.h!==h)return{h,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var d=void 0;if(u<0)d=0;else if(u>o)d=359;else{var p=u*100/o;d=360*p/100}if(i.h!==d)return{h:d,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null},cGe=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function uGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wW(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xh=function(e){fGe(t,e);function t(){var r,i,n,o;uGe(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return o=(i=(n=wW(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),n),n.handleChange=function(u){var l=lGe(u,n.props.direction,n.props.hsl,n.container);l&&typeof n.props.onChange=="function"&&n.props.onChange(l,u)},n.handleMouseDown=function(u){n.handleChange(u),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},i),wW(n,o)}return cGe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,n=this.props.direction,o=n===void 0?"horizontal":n,a=gt({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return E.createElement("div",{style:a.hue},E.createElement("div",{className:"hue-"+o,style:a.container,ref:function(c){return i.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},E.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),E.createElement("div",{style:a.pointer},this.props.pointer?E.createElement(this.props.pointer,this.props):E.createElement("div",{style:a.slider}))))}}]),t}(E.PureComponent||E.Component);function gD(e,t,r){(r!==void 0&&!pg(e[t],r)||r===void 0&&!(t in e))&&lD(e,t,r)}function hGe(e){return xo(e)&&Ch(e)}function vD(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function dGe(e){return bg(e,_g(e))}function pGe(e,t,r,i,n,o,a){var s=vD(e,r),c=vD(t,r),u=a.get(c);if(u){gD(e,r,u);return}var l=o?o(s,c,r+"",e,t,a):void 0,h=l===void 0;if(h){var f=ci(c),d=!f&&fg(c),p=!f&&!d&&WP(c);l=c,f||d||p?ci(s)?l=s:hGe(s)?l=iW(s):d?(h=!1,l=nW(c,!0)):p?(h=!1,l=lW(c,!0)):l=[]:OV(c)||oT(c)?(l=s,oT(s)?l=dGe(s):(!Hi(s)||qP(s))&&(l=uW(c))):h=!1}h&&(a.set(c,l),n(l,c,i,o,a),a.delete(c)),gD(e,r,l)}function AW(e,t,r,i,n){e!==t&&dV(t,function(o,a){if(n||(n=new No),Hi(o))pGe(e,t,a,r,AW,i,n);else{var s=i?i(vD(e,a),o,a+"",e,t,n):void 0;s===void 0&&(s=o),gD(e,a,s)}},_g)}function mGe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var OW=Math.max;function gGe(e,t,r){return t=OW(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,o=OW(i.length-t,0),a=Array(o);++n<o;)a[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(a),mGe(e,this,s)}}function vGe(e){return function(){return e}}var yGe=mT?function(e,t){return mT(e,"toString",{configurable:!0,enumerable:!1,value:vGe(t),writable:!0})}:aT;const bGe=yGe;var _Ge=800,TGe=16,EGe=Date.now;function SGe(e){var t=0,r=0;return function(){var i=EGe(),n=TGe-(i-r);if(r=i,n>0){if(++t>=_Ge)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var wGe=SGe(bGe);const AGe=wGe;function OGe(e,t){return AGe(gGe(e,t,aT),e+"")}function kGe(e,t,r){if(!Hi(r))return!1;var i=typeof t;return(i=="number"?Ch(r)&&UP(t,r.length):i=="string"&&t in r)?pg(r[t],e):!1}function IGe(e){return OGe(function(t,r){var i=-1,n=r.length,o=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(n--,o):void 0,a&&kGe(r[0],r[1],a)&&(o=n<3?void 0:o,n=1),t=Object(t);++i<n;){var s=r[i];s&&e(t,s,i,o)}return t})}var CGe=IGe(function(e,t,r){AW(e,t,r)});const Si=CGe;var wg=function(t){var r=t.zDepth,i=t.radius,n=t.background,o=t.children,a=t.styles,s=a===void 0?{}:a,c=gt(Si({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:i,background:n}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":r===1});return E.createElement("div",{style:c.wrap},E.createElement("div",{style:c.bg}),E.createElement("div",{style:c.content},o))};wg.propTypes={background:N.string,zDepth:N.oneOf([0,1,2,3,4,5]),radius:N.number,styles:N.object},wg.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var PGe=function(){return Do.Date.now()};const yD=PGe;var DGe=/\s/;function xGe(e){for(var t=e.length;t--&&DGe.test(e.charAt(t)););return t}var NGe=/^\s+/;function RGe(e){return e&&e.slice(0,xGe(e)+1).replace(NGe,"")}var kW=NaN,MGe=/^[-+]0x[0-9a-f]+$/i,LGe=/^0b[01]+$/i,BGe=/^0o[0-7]+$/i,HGe=parseInt;function IW(e){if(typeof e=="number")return e;if(hT(e))return kW;if(Hi(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Hi(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=RGe(e);var r=LGe.test(e);return r||BGe.test(e)?HGe(e.slice(2),r?2:8):MGe.test(e)?kW:+e}var $Ge="Expected a function",FGe=Math.max,jGe=Math.min;function CW(e,t,r){var i,n,o,a,s,c,u=0,l=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError($Ge);t=IW(t)||0,Hi(r)&&(l=!!r.leading,h="maxWait"in r,o=h?FGe(IW(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f);function d(S){var k=i,O=n;return i=n=void 0,u=S,a=e.apply(O,k),a}function p(S){return u=S,s=setTimeout(v,t),l?d(S):a}function m(S){var k=S-c,O=S-u,D=t-k;return h?jGe(D,o-O):D}function g(S){var k=S-c,O=S-u;return c===void 0||k>=t||k<0||h&&O>=o}function v(){var S=yD();if(g(S))return _(S);s=setTimeout(v,m(S))}function _(S){return s=void 0,f&&i?d(S):(i=n=void 0,a)}function y(){s!==void 0&&clearTimeout(s),u=0,i=c=n=s=void 0}function b(){return s===void 0?a:_(yD())}function T(){var S=yD(),k=g(S);if(i=arguments,n=this,c=S,k){if(s===void 0)return p(c);if(h)return clearTimeout(s),s=setTimeout(v,t),d(c)}return s===void 0&&(s=setTimeout(v,t)),a}return T.cancel=y,T.flush=b,T}var UGe="Expected a function";function GGe(e,t,r){var i=!0,n=!0;if(typeof e!="function")throw new TypeError(UGe);return Hi(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),CW(e,t,{leading:i,maxWait:t,trailing:n})}var zGe=function(t,r,i){var n=i.getBoundingClientRect(),o=n.width,a=n.height,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,u=s-(i.getBoundingClientRect().left+window.pageXOffset),l=c-(i.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:u>o&&(u=o),l<0?l=0:l>a&&(l=a);var h=u/o,f=1-l/a;return{h:r.h,s:h,v:f,a:r.a,source:"hsv"}},VGe=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function WGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YGe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vT=function(e){qGe(t,e);function t(r){WGe(this,t);var i=YGe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return i.handleChange=function(n){typeof i.props.onChange=="function"&&i.throttle(i.props.onChange,zGe(n,i.props.hsl,i.container),n)},i.handleMouseDown=function(n){i.handleChange(n);var o=i.getContainerRenderWindow();o.addEventListener("mousemove",i.handleChange),o.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.throttle=GGe(function(n,o,a){n(o,a)},50),i}return VGe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var i=this.container,n=window;!n.document.contains(i)&&n.parent!==n;)n=n.parent;return n}},{key:"unbindEventListeners",value:function(){var i=this.getContainerRenderWindow();i.removeEventListener("mousemove",this.handleChange),i.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,n=this.props.style||{},o=n.color,a=n.white,s=n.black,c=n.pointer,u=n.circle,l=gt({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:a,black:s,pointer:c,circle:u}},{custom:!!this.props.style});return E.createElement("div",{style:l.color,ref:function(f){return i.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},E.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),E.createElement("div",{style:l.white,className:"saturation-white"},E.createElement("div",{style:l.black,className:"saturation-black"}),E.createElement("div",{style:l.pointer},this.props.pointer?E.createElement(this.props.pointer,this.props):E.createElement("div",{style:l.circle}))))}}]),t}(E.PureComponent||E.Component);function XGe(e,t){var r=ci(e)?ZV:KV;return r(e,wV(t))}function yT(e){"@babel/helpers - typeof";return yT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yT(e)}var KGe=/^\s+/,ZGe=/\s+$/;function nt(e,t){if(e=e||"",t=t||{},e instanceof nt)return e;if(!(this instanceof nt))return new nt(e,t);var r=QGe(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}nt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,i,n,o,a,s;return r=t.r/255,i=t.g/255,n=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),.2126*o+.7152*a+.0722*s},setAlpha:function(t){return this._a=MW(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=DW(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=DW(this._r,this._g,this._b),r=Math.round(t.h*360),i=Math.round(t.s*100),n=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+n+"%)":"hsva("+r+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=PW(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=PW(this._r,this._g,this._b),r=Math.round(t.h*360),i=Math.round(t.s*100),n=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+n+"%)":"hsla("+r+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return xW(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return rze(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Pr(this._r,255)*100)+"%",g:Math.round(Pr(this._g,255)*100)+"%",b:Math.round(Pr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Pr(this._r,255)*100)+"%, "+Math.round(Pr(this._g,255)*100)+"%, "+Math.round(Pr(this._b,255)*100)+"%)":"rgba("+Math.round(Pr(this._r,255)*100)+"%, "+Math.round(Pr(this._g,255)*100)+"%, "+Math.round(Pr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:pze[xW(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+NW(this._r,this._g,this._b,this._a),i=r,n=this._gradientType?"GradientType = 1, ":"";if(t){var o=nt(t);i="#"+NW(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+r+",endColorstr="+i+")"},toString:function(t){var r=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0,o=!r&&n&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return nt(this.toString())},_applyModification:function(t,r){var i=t.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(aze,arguments)},brighten:function(){return this._applyModification(sze,arguments)},darken:function(){return this._applyModification(lze,arguments)},desaturate:function(){return this._applyModification(nze,arguments)},saturate:function(){return this._applyModification(ize,arguments)},greyscale:function(){return this._applyModification(oze,arguments)},spin:function(){return this._applyModification(cze,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(hze,arguments)},complement:function(){return this._applyCombination(uze,arguments)},monochromatic:function(){return this._applyCombination(dze,arguments)},splitcomplement:function(){return this._applyCombination(fze,arguments)},triad:function(){return this._applyCombination(RW,[3])},tetrad:function(){return this._applyCombination(RW,[4])}},nt.fromRatio=function(e,t){if(yT(e)=="object"){var r={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?r[i]=e[i]:r[i]=Ag(e[i]));e=r}return nt(e,t)};function QGe(e){var t={r:0,g:0,b:0},r=1,i=null,n=null,o=null,a=!1,s=!1;return typeof e=="string"&&(e=yze(e)),yT(e)=="object"&&(ps(e.r)&&ps(e.g)&&ps(e.b)?(t=JGe(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ps(e.h)&&ps(e.s)&&ps(e.v)?(i=Ag(e.s),n=Ag(e.v),t=tze(e.h,i,n),a=!0,s="hsv"):ps(e.h)&&ps(e.s)&&ps(e.l)&&(i=Ag(e.s),o=Ag(e.l),t=eze(e.h,i,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=MW(r),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function JGe(e,t,r){return{r:Pr(e,255)*255,g:Pr(t,255)*255,b:Pr(r,255)*255}}function PW(e,t,r){e=Pr(e,255),t=Pr(t,255),r=Pr(r,255);var i=Math.max(e,t,r),n=Math.min(e,t,r),o,a,s=(i+n)/2;if(i==n)o=a=0;else{var c=i-n;switch(a=s>.5?c/(2-i-n):c/(i+n),i){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4;break}o/=6}return{h:o,s:a,l:s}}function eze(e,t,r){var i,n,o;e=Pr(e,360),t=Pr(t,100),r=Pr(r,100);function a(u,l,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?u+(l-u)*6*h:h<1/2?l:h<2/3?u+(l-u)*(2/3-h)*6:u}if(t===0)i=n=o=r;else{var s=r<.5?r*(1+t):r+t-r*t,c=2*r-s;i=a(c,s,e+1/3),n=a(c,s,e),o=a(c,s,e-1/3)}return{r:i*255,g:n*255,b:o*255}}function DW(e,t,r){e=Pr(e,255),t=Pr(t,255),r=Pr(r,255);var i=Math.max(e,t,r),n=Math.min(e,t,r),o,a,s=i,c=i-n;if(a=i===0?0:c/i,i==n)o=0;else{switch(i){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4;break}o/=6}return{h:o,s:a,v:s}}function tze(e,t,r){e=Pr(e,360)*6,t=Pr(t,100),r=Pr(r,100);var i=Math.floor(e),n=e-i,o=r*(1-t),a=r*(1-n*t),s=r*(1-(1-n)*t),c=i%6,u=[r,a,o,o,s,r][c],l=[s,r,r,a,o,o][c],h=[o,o,s,r,r,a][c];return{r:u*255,g:l*255,b:h*255}}function xW(e,t,r,i){var n=[Ro(Math.round(e).toString(16)),Ro(Math.round(t).toString(16)),Ro(Math.round(r).toString(16))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function rze(e,t,r,i,n){var o=[Ro(Math.round(e).toString(16)),Ro(Math.round(t).toString(16)),Ro(Math.round(r).toString(16)),Ro(LW(i))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function NW(e,t,r,i){var n=[Ro(LW(i)),Ro(Math.round(e).toString(16)),Ro(Math.round(t).toString(16)),Ro(Math.round(r).toString(16))];return n.join("")}nt.equals=function(e,t){return!e||!t?!1:nt(e).toRgbString()==nt(t).toRgbString()},nt.random=function(){return nt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function nze(e,t){t=t===0?0:t||10;var r=nt(e).toHsl();return r.s-=t/100,r.s=bT(r.s),nt(r)}function ize(e,t){t=t===0?0:t||10;var r=nt(e).toHsl();return r.s+=t/100,r.s=bT(r.s),nt(r)}function oze(e){return nt(e).desaturate(100)}function aze(e,t){t=t===0?0:t||10;var r=nt(e).toHsl();return r.l+=t/100,r.l=bT(r.l),nt(r)}function sze(e,t){t=t===0?0:t||10;var r=nt(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),nt(r)}function lze(e,t){t=t===0?0:t||10;var r=nt(e).toHsl();return r.l-=t/100,r.l=bT(r.l),nt(r)}function cze(e,t){var r=nt(e).toHsl(),i=(r.h+t)%360;return r.h=i<0?360+i:i,nt(r)}function uze(e){var t=nt(e).toHsl();return t.h=(t.h+180)%360,nt(t)}function RW(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=nt(e).toHsl(),i=[nt(e)],n=360/t,o=1;o<t;o++)i.push(nt({h:(r.h+o*n)%360,s:r.s,l:r.l}));return i}function fze(e){var t=nt(e).toHsl(),r=t.h;return[nt(e),nt({h:(r+72)%360,s:t.s,l:t.l}),nt({h:(r+216)%360,s:t.s,l:t.l})]}function hze(e,t,r){t=t||6,r=r||30;var i=nt(e).toHsl(),n=360/r,o=[nt(e)];for(i.h=(i.h-(n*t>>1)+720)%360;--t;)i.h=(i.h+n)%360,o.push(nt(i));return o}function dze(e,t){t=t||6;for(var r=nt(e).toHsv(),i=r.h,n=r.s,o=r.v,a=[],s=1/t;t--;)a.push(nt({h:i,s:n,v:o})),o=(o+s)%1;return a}nt.mix=function(e,t,r){r=r===0?0:r||50;var i=nt(e).toRgb(),n=nt(t).toRgb(),o=r/100,a={r:(n.r-i.r)*o+i.r,g:(n.g-i.g)*o+i.g,b:(n.b-i.b)*o+i.b,a:(n.a-i.a)*o+i.a};return nt(a)},nt.readability=function(e,t){var r=nt(e),i=nt(t);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},nt.isReadable=function(e,t,r){var i=nt.readability(e,t),n,o;switch(o=!1,n=bze(r),n.level+n.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o},nt.mostReadable=function(e,t,r){var i=null,n=0,o,a,s,c;r=r||{},a=r.includeFallbackColors,s=r.level,c=r.size;for(var u=0;u<t.length;u++)o=nt.readability(e,t[u]),o>n&&(n=o,i=nt(t[u]));return nt.isReadable(e,i,{level:s,size:c})||!a?i:(r.includeFallbackColors=!1,nt.mostReadable(e,["#fff","#000"],r))};var bD=nt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},pze=nt.hexNames=mze(bD);function mze(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function MW(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Pr(e,t){gze(e)&&(e="100%");var r=vze(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function bT(e){return Math.min(1,Math.max(0,e))}function $i(e){return parseInt(e,16)}function gze(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function vze(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ro(e){return e.length==1?"0"+e:""+e}function Ag(e){return e<=1&&(e=e*100+"%"),e}function LW(e){return Math.round(parseFloat(e)*255).toString(16)}function BW(e){return $i(e)/255}var Mo=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ps(e){return!!Mo.CSS_UNIT.exec(e)}function yze(e){e=e.replace(KGe,"").replace(ZGe,"").toLowerCase();var t=!1;if(bD[e])e=bD[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Mo.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Mo.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Mo.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Mo.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Mo.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Mo.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Mo.hex8.exec(e))?{r:$i(r[1]),g:$i(r[2]),b:$i(r[3]),a:BW(r[4]),format:t?"name":"hex8"}:(r=Mo.hex6.exec(e))?{r:$i(r[1]),g:$i(r[2]),b:$i(r[3]),format:t?"name":"hex"}:(r=Mo.hex4.exec(e))?{r:$i(r[1]+""+r[1]),g:$i(r[2]+""+r[2]),b:$i(r[3]+""+r[3]),a:BW(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=Mo.hex3.exec(e))?{r:$i(r[1]+""+r[1]),g:$i(r[2]+""+r[2]),b:$i(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function bze(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var HW=function(t){var r=["r","g","b","a","h","s","l","v"],i=0,n=0;return XGe(r,function(o){if(t[o]&&(i+=1,isNaN(t[o])||(n+=1),o==="s"||o==="l")){var a=/^\d+%$/;a.test(t[o])&&(n+=1)}}),i===n?t:!1},Og=function(t,r){var i=t.hex?nt(t.hex):nt(t),n=i.toHsl(),o=i.toHsv(),a=i.toRgb(),s=i.toHex();n.s===0&&(n.h=r||0,o.h=r||0);var c=s==="000000"&&a.a===0;return{hsl:n,hex:c?"transparent":"#"+s,rgb:a,hsv:o,oldHue:t.h||r||n.h,source:t.source}},hl=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&nt(t).isValid()},_D=function(t){if(!t)return"#fff";var r=Og(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var i=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return i>=128?"#000":"#fff"},TD=function(t,r){var i=t.replace("\xB0","");return nt(r+" ("+i+")")._ok},kg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_ze=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Tze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Sze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wi=function(t){var r=function(i){Sze(n,i);function n(o){Tze(this,n);var a=Eze(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.handleChange=function(s,c){var u=HW(s);if(u){var l=Og(s,s.h||a.state.oldHue);a.setState(l),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,l,c),a.props.onChange&&a.props.onChange(l,c)}},a.handleSwatchHover=function(s,c){var u=HW(s);if(u){var l=Og(s,s.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(l,c)}},a.state=kg({},Og(o.color,0)),a.debounce=CW(function(s,c,u){s(c,u)},100),a}return _ze(n,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),E.createElement(t,kg({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return kg({},Og(a.color,s.oldHue))}}]),n}(E.PureComponent||E.Component);return r.propTypes=kg({},t.propTypes),r.defaultProps=kg({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},wze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Aze=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Oze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $W(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function kze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ize=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){kze(n,i);function n(){var o,a,s,c;Oze(this,n);for(var u=arguments.length,l=Array(u),h=0;h<u;h++)l[h]=arguments[h];return c=(a=(s=$W(this,(o=n.__proto__||Object.getPrototypeOf(n)).call.apply(o,[this].concat(l))),s),s.state={focus:!1},s.handleFocus=function(){return s.setState({focus:!0})},s.handleBlur=function(){return s.setState({focus:!1})},a),$W(s,c)}return Aze(n,[{key:"render",value:function(){return E.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},E.createElement(t,wze({},this.props,this.state)))}}]),n}(E.Component)},FW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Cze=13,Pze=function(t){var r=t.color,i=t.style,n=t.onClick,o=n===void 0?function(){}:n,a=t.onHover,s=t.title,c=s===void 0?r:s,u=t.children,l=t.focus,h=t.focusStyle,f=h===void 0?{}:h,d=r==="transparent",p=gt({default:{swatch:FW({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},i,l?f:{})}}),m=function(b){return o(r,b)},g=function(b){return b.keyCode===Cze&&o(r,b)},v=function(b){return a(r,b)},_={};return a&&(_.onMouseOver=v),E.createElement("div",FW({style:p.swatch,onClick:m,title:c,tabIndex:0,onKeyDown:g},_),u,d&&E.createElement(Dh,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const eu=Ize(Pze);var Dze=function(t){var r=t.direction,i=gt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return E.createElement("div",{style:i.picker})},xze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},jW=function(t){var r=t.rgb,i=t.hsl,n=t.width,o=t.height,a=t.onChange,s=t.direction,c=t.style,u=t.renderers,l=t.pointer,h=t.className,f=h===void 0?"":h,d=gt({default:{picker:{position:"relative",width:n,height:o},alpha:{radius:"2px",style:c}}});return E.createElement("div",{style:d.picker,className:"alpha-picker "+f},E.createElement(mD,xze({},d.alpha,{rgb:r,hsl:i,pointer:l,renderers:u,onChange:a,direction:s})))};jW.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Dze},wi(jW);var Nze=function(t){var r=t.colors,i=t.onClick,n=t.onSwatchHover,o=gt({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return E.createElement("div",{style:o.swatches},fl(r,function(a){return E.createElement(eu,{key:a,color:a,style:o.swatch,onClick:i,onHover:n,focusStyle:{boxShadow:"0 0 4px "+a}})}),E.createElement("div",{style:o.clear}))},ED=function(t){var r=t.onChange,i=t.onSwatchHover,n=t.hex,o=t.colors,a=t.width,s=t.triangle,c=t.styles,u=c===void 0?{}:c,l=t.className,h=l===void 0?"":l,f=n==="transparent",d=function(g,v){hl(g)&&r({hex:g,source:"hex"},v)},p=gt(Si({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:n,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:_D(n),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+n+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},u),{"hide-triangle":s==="hide"});return E.createElement("div",{style:p.card,className:"block-picker "+h},E.createElement("div",{style:p.triangle}),E.createElement("div",{style:p.head},f&&E.createElement(Dh,{borderRadius:"6px 6px 0 0"}),E.createElement("div",{style:p.label},n)),E.createElement("div",{style:p.body},E.createElement(Nze,{colors:o,onClick:d,onSwatchHover:i}),E.createElement(Xt,{style:{input:p.input},value:n,onChange:d})))};ED.propTypes={width:N.oneOfType([N.string,N.number]),colors:N.arrayOf(N.string),triangle:N.oneOf(["top","hide"]),styles:N.object},ED.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},wi(ED);var Nh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Rh={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Mh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Lh={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Bh={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Hh={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},$h={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Fh={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},jh={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Ig={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Uh={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Gh={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},zh={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},Vh={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Wh={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},Yh={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},qh={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},Xh={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},UW=function(t){var r=t.color,i=t.onClick,n=t.onSwatchHover,o=t.hover,a=t.active,s=t.circleSize,c=t.circleSpacing,u=gt({default:{swatch:{width:s,height:s,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:o,active:a});return E.createElement("div",{style:u.swatch},E.createElement(eu,{style:u.Swatch,color:r,onClick:i,onHover:n,focusStyle:{boxShadow:u.Swatch.boxShadow+", 0 0 5px "+r}}))};UW.defaultProps={circleSize:28,circleSpacing:14};const Rze=dD(UW);var SD=function(t){var r=t.width,i=t.onChange,n=t.onSwatchHover,o=t.colors,a=t.hex,s=t.circleSize,c=t.styles,u=c===void 0?{}:c,l=t.circleSpacing,h=t.className,f=h===void 0?"":h,d=gt(Si({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-l,marginBottom:-l}}},u)),p=function(g,v){return i({hex:g,source:"hex"},v)};return E.createElement("div",{style:d.card,className:"circle-picker "+f},fl(o,function(m){return E.createElement(Rze,{key:m,color:m,onClick:p,onSwatchHover:n,active:a===m.toLowerCase(),circleSize:s,circleSpacing:l})}))};SD.propTypes={width:N.oneOfType([N.string,N.number]),circleSize:N.number,circleSpacing:N.number,styles:N.object},SD.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Nh[500],Rh[500],Mh[500],Lh[500],Bh[500],Hh[500],$h[500],Fh[500],jh[500],Ig[500],Uh[500],Gh[500],zh[500],Vh[500],Wh[500],Yh[500],qh[500],Xh[500]],styles:{}},wi(SD);function GW(e){return e===void 0}var zW={};Object.defineProperty(zW,"__esModule",{value:!0});var VW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Mze=E,WW=Lze(Mze);function Lze(e){return e&&e.__esModule?e:{default:e}}function Bze(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}var _T=24,Hze=zW.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,i=e.width,n=i===void 0?_T:i,o=e.height,a=o===void 0?_T:o,s=e.style,c=s===void 0?{}:s,u=Bze(e,["fill","width","height","style"]);return WW.default.createElement("svg",VW({viewBox:"0 0 "+_T+" "+_T,style:VW({fill:r,width:n,height:a},c)},u),WW.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},$ze=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Fze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Uze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var YW=function(e){Uze(t,e);function t(r){Fze(this,t);var i=jze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.toggleViews=function(){i.state.view==="hex"?i.setState({view:"rgb"}):i.state.view==="rgb"?i.setState({view:"hsl"}):i.state.view==="hsl"&&(i.props.hsl.a===1?i.setState({view:"hex"}):i.setState({view:"rgb"}))},i.handleChange=function(n,o){n.hex?hl(n.hex)&&i.props.onChange({hex:n.hex,source:"hex"},o):n.r||n.g||n.b?i.props.onChange({r:n.r||i.props.rgb.r,g:n.g||i.props.rgb.g,b:n.b||i.props.rgb.b,source:"rgb"},o):n.a?(n.a<0?n.a=0:n.a>1&&(n.a=1),i.props.onChange({h:i.props.hsl.h,s:i.props.hsl.s,l:i.props.hsl.l,a:Math.round(n.a*100)/100,source:"rgb"},o)):(n.h||n.s||n.l)&&(typeof n.s=="string"&&n.s.includes("%")&&(n.s=n.s.replace("%","")),typeof n.l=="string"&&n.l.includes("%")&&(n.l=n.l.replace("%","")),n.s==1?n.s=.01:n.l==1&&(n.l=.01),i.props.onChange({h:n.h||i.props.hsl.h,s:Number(GW(n.s)?i.props.hsl.s:n.s),l:Number(GW(n.l)?i.props.hsl.l:n.l),source:"hsl"},o))},i.showHighlight=function(n){n.currentTarget.style.background="#eee"},i.hideHighlight=function(n){n.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?i.state={view:"rgb"}:i.state={view:r.view},i}return $ze(t,[{key:"render",value:function(){var i=this,n=gt({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=E.createElement("div",{style:n.fields,className:"flexbox-fix"},E.createElement("div",{style:n.field},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=E.createElement("div",{style:n.fields,className:"flexbox-fix"},E.createElement("div",{style:n.field},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),E.createElement("div",{style:n.field},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),E.createElement("div",{style:n.field},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),E.createElement("div",{style:n.alpha},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=E.createElement("div",{style:n.fields,className:"flexbox-fix"},E.createElement("div",{style:n.field},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),E.createElement("div",{style:n.field},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),E.createElement("div",{style:n.field},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),E.createElement("div",{style:n.alpha},E.createElement(Xt,{style:{input:n.input,label:n.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),E.createElement("div",{style:n.wrap,className:"flexbox-fix"},o,E.createElement("div",{style:n.toggle},E.createElement("div",{style:n.icon,onClick:this.toggleViews,ref:function(s){return i.icon=s}},E.createElement(Hze,{style:n.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(i,n){return i.hsl.a!==1&&n.view==="hex"?{view:"rgb"}:null}}]),t}(E.Component);YW.defaultProps={view:"hex"};var qW=function(){var t=gt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return E.createElement("div",{style:t.picker})},Gze=function(){var t=gt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return E.createElement("div",{style:t.picker})},wD=function(t){var r=t.width,i=t.onChange,n=t.disableAlpha,o=t.rgb,a=t.hsl,s=t.hsv,c=t.hex,u=t.renderers,l=t.styles,h=l===void 0?{}:l,f=t.className,d=f===void 0?"":f,p=t.defaultView,m=gt(Si({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:n});return E.createElement("div",{style:m.picker,className:"chrome-picker "+d},E.createElement("div",{style:m.saturation},E.createElement(vT,{style:m.Saturation,hsl:a,hsv:s,pointer:Gze,onChange:i})),E.createElement("div",{style:m.body},E.createElement("div",{style:m.controls,className:"flexbox-fix"},E.createElement("div",{style:m.color},E.createElement("div",{style:m.swatch},E.createElement("div",{style:m.active}),E.createElement(Dh,{renderers:u}))),E.createElement("div",{style:m.toggles},E.createElement("div",{style:m.hue},E.createElement(xh,{style:m.Hue,hsl:a,pointer:qW,onChange:i})),E.createElement("div",{style:m.alpha},E.createElement(mD,{style:m.Alpha,rgb:o,hsl:a,pointer:qW,renderers:u,onChange:i})))),E.createElement(YW,{rgb:o,hsl:a,hex:c,view:p,onChange:i,disableAlpha:n})))};wD.propTypes={width:N.oneOfType([N.string,N.number]),disableAlpha:N.bool,styles:N.object,defaultView:N.oneOf(["hex","rgb","hsl"])},wD.defaultProps={width:225,disableAlpha:!1,styles:{}},wi(wD);var zze=function(t){var r=t.color,i=t.onClick,n=i===void 0?function(){}:i,o=t.onSwatchHover,a=t.active,s=gt({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:_D(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return E.createElement(eu,{style:s.color,color:r,onClick:n,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},E.createElement("div",{style:s.dot}))},Vze=function(t){var r=t.hex,i=t.rgb,n=t.onChange,o=gt({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(c,u){c.r||c.g||c.b?n({r:c.r||i.r,g:c.g||i.g,b:c.b||i.b,source:"rgb"},u):n({hex:c.hex,source:"hex"},u)};return E.createElement("div",{style:o.fields,className:"flexbox-fix"},E.createElement("div",{style:o.active}),E.createElement(Xt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:r,onChange:a}),E.createElement(Xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:i.r,onChange:a}),E.createElement(Xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:i.g,onChange:a}),E.createElement(Xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:i.b,onChange:a}))},AD=function(t){var r=t.onChange,i=t.onSwatchHover,n=t.colors,o=t.hex,a=t.rgb,s=t.styles,c=s===void 0?{}:s,u=t.className,l=u===void 0?"":u,h=gt(Si({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},c)),f=function(p,m){p.hex?hl(p.hex)&&r({hex:p.hex,source:"hex"},m):r(p,m)};return E.createElement(wg,{style:h.Compact,styles:c},E.createElement("div",{style:h.compact,className:"compact-picker "+l},E.createElement("div",null,fl(n,function(d){return E.createElement(zze,{key:d,color:d,active:d.toLowerCase()===o,onClick:f,onSwatchHover:i})}),E.createElement("div",{style:h.clear})),E.createElement(Vze,{hex:o,rgb:a,onChange:f})))};AD.propTypes={colors:N.arrayOf(N.string),styles:N.object},AD.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},wi(AD);var Wze=function(t){var r=t.hover,i=t.color,n=t.onClick,o=t.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=gt({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:r});return E.createElement("div",{style:s.swatch},E.createElement(eu,{color:i,onClick:n,onHover:o,focusStyle:a}))};const Yze=dD(Wze);var OD=function(t){var r=t.width,i=t.colors,n=t.onChange,o=t.onSwatchHover,a=t.triangle,s=t.styles,c=s===void 0?{}:s,u=t.className,l=u===void 0?"":u,h=gt(Si({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},c),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),f=function(p,m){return n({hex:p,source:"hex"},m)};return E.createElement("div",{style:h.card,className:"github-picker "+l},E.createElement("div",{style:h.triangleShadow}),E.createElement("div",{style:h.triangle}),fl(i,function(d){return E.createElement(Yze,{color:d,key:d,onClick:f,onSwatchHover:o})}))};OD.propTypes={width:N.oneOfType([N.string,N.number]),colors:N.arrayOf(N.string),triangle:N.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:N.object},OD.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},wi(OD);var qze=function(t){var r=t.direction,i=gt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return E.createElement("div",{style:i.picker})},Xze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},kD=function(t){var r=t.width,i=t.height,n=t.onChange,o=t.hsl,a=t.direction,s=t.pointer,c=t.styles,u=c===void 0?{}:c,l=t.className,h=l===void 0?"":l,f=gt(Si({default:{picker:{position:"relative",width:r,height:i},hue:{radius:"2px"}}},u)),d=function(m){return n({a:1,h:m.h,l:.5,s:1})};return E.createElement("div",{style:f.picker,className:"hue-picker "+h},E.createElement(xh,Xze({},f.hue,{hsl:o,pointer:s,onChange:d,direction:a})))};kD.propTypes={styles:N.object},kD.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:qze,styles:{}},wi(kD);var Kze=function(t){var r=t.onChange,i=t.hex,n=t.rgb,o=t.styles,a=o===void 0?{}:o,s=t.className,c=s===void 0?"":s,u=gt(Si({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+i,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),l=function(f,d){f.hex?hl(f.hex)&&r({hex:f.hex,source:"hex"},d):(f.r||f.g||f.b)&&r({r:f.r||n.r,g:f.g||n.g,b:f.b||n.b,source:"rgb"},d)};return E.createElement(wg,{styles:a},E.createElement("div",{style:u.material,className:"material-picker "+c},E.createElement(Xt,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:i,onChange:l}),E.createElement("div",{style:u.split,className:"flexbox-fix"},E.createElement("div",{style:u.third},E.createElement(Xt,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:l})),E.createElement("div",{style:u.third},E.createElement(Xt,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:l})),E.createElement("div",{style:u.third},E.createElement(Xt,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:l})))))};wi(Kze);var Zze=function(t){var r=t.onChange,i=t.rgb,n=t.hsv,o=t.hex,a=gt({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(u,l){u["#"]?hl(u["#"])&&r({hex:u["#"],source:"hex"},l):u.r||u.g||u.b?r({r:u.r||i.r,g:u.g||i.g,b:u.b||i.b,source:"rgb"},l):(u.h||u.s||u.v)&&r({h:u.h||n.h,s:u.s||n.s,v:u.v||n.v,source:"hsv"},l)};return E.createElement("div",{style:a.fields},E.createElement(Xt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(n.h),onChange:s}),E.createElement(Xt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(n.s*100),onChange:s}),E.createElement(Xt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(n.v*100),onChange:s}),E.createElement("div",{style:a.divider}),E.createElement(Xt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:i.r,onChange:s}),E.createElement(Xt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:i.g,onChange:s}),E.createElement(Xt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:i.b,onChange:s}),E.createElement("div",{style:a.divider}),E.createElement(Xt,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:o.replace("#",""),onChange:s}),E.createElement("div",{style:a.fieldSymbols},E.createElement("div",{style:a.symbol},"\xB0"),E.createElement("div",{style:a.symbol},"%"),E.createElement("div",{style:a.symbol},"%")))},Qze=function(t){var r=t.hsl,i=gt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return E.createElement("div",{style:i.picker})},Jze=function(){var t=gt({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return E.createElement("div",{style:t.pointer},E.createElement("div",{style:t.left},E.createElement("div",{style:t.leftInside})),E.createElement("div",{style:t.right},E.createElement("div",{style:t.rightInside})))},XW=function(t){var r=t.onClick,i=t.label,n=t.children,o=t.active,a=gt({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return E.createElement("div",{style:a.button,onClick:r},i||n)},e8e=function(t){var r=t.rgb,i=t.currentColor,n=gt({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:i,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return E.createElement("div",null,E.createElement("div",{style:n.label},"new"),E.createElement("div",{style:n.swatches},E.createElement("div",{style:n.new}),E.createElement("div",{style:n.current})),E.createElement("div",{style:n.label},"current"))},t8e=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function r8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n8e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function i8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ID=function(e){i8e(t,e);function t(r){r8e(this,t);var i=n8e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.state={currentColor:r.hex},i}return t8e(t,[{key:"render",value:function(){var i=this.props,n=i.styles,o=n===void 0?{}:n,a=i.className,s=a===void 0?"":a,c=gt(Si({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return E.createElement("div",{style:c.picker,className:"photoshop-picker "+s},E.createElement("div",{style:c.head},this.props.header),E.createElement("div",{style:c.body,className:"flexbox-fix"},E.createElement("div",{style:c.saturation},E.createElement(vT,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Qze,onChange:this.props.onChange})),E.createElement("div",{style:c.hue},E.createElement(xh,{direction:"vertical",hsl:this.props.hsl,pointer:Jze,onChange:this.props.onChange})),E.createElement("div",{style:c.controls},E.createElement("div",{style:c.top,className:"flexbox-fix"},E.createElement("div",{style:c.previews},E.createElement(e8e,{rgb:this.props.rgb,currentColor:this.state.currentColor})),E.createElement("div",{style:c.actions},E.createElement(XW,{label:"OK",onClick:this.props.onAccept,active:!0}),E.createElement(XW,{label:"Cancel",onClick:this.props.onCancel}),E.createElement(Zze,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(E.Component);ID.propTypes={header:N.string,styles:N.object},ID.defaultProps={header:"Color Picker",styles:{}},wi(ID);var o8e=function(t){var r=t.onChange,i=t.rgb,n=t.hsl,o=t.hex,a=t.disableAlpha,s=gt({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),c=function(l,h){l.hex?hl(l.hex)&&r({hex:l.hex,source:"hex"},h):l.r||l.g||l.b?r({r:l.r||i.r,g:l.g||i.g,b:l.b||i.b,a:i.a,source:"rgb"},h):l.a&&(l.a<0?l.a=0:l.a>100&&(l.a=100),l.a/=100,r({h:n.h,s:n.s,l:n.l,a:l.a,source:"rgb"},h))};return E.createElement("div",{style:s.fields,className:"flexbox-fix"},E.createElement("div",{style:s.double},E.createElement(Xt,{style:{input:s.input,label:s.label},label:"hex",value:o.replace("#",""),onChange:c})),E.createElement("div",{style:s.single},E.createElement(Xt,{style:{input:s.input,label:s.label},label:"r",value:i.r,onChange:c,dragLabel:"true",dragMax:"255"})),E.createElement("div",{style:s.single},E.createElement(Xt,{style:{input:s.input,label:s.label},label:"g",value:i.g,onChange:c,dragLabel:"true",dragMax:"255"})),E.createElement("div",{style:s.single},E.createElement(Xt,{style:{input:s.input,label:s.label},label:"b",value:i.b,onChange:c,dragLabel:"true",dragMax:"255"})),E.createElement("div",{style:s.alpha},E.createElement(Xt,{style:{input:s.input,label:s.label},label:"a",value:Math.round(i.a*100),onChange:c,dragLabel:"true",dragMax:"100"})))},a8e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},KW=function(t){var r=t.colors,i=t.onClick,n=i===void 0?function(){}:i,o=t.onSwatchHover,a=gt({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),s=function(u,l){n({hex:u,source:"hex"},l)};return E.createElement("div",{style:a.colors,className:"flexbox-fix"},r.map(function(c){var u=typeof c=="string"?{color:c}:c,l=""+u.color+(u.title||"");return E.createElement("div",{key:l,style:a.swatchWrap},E.createElement(eu,a8e({},u,{style:a.swatch,onClick:s,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+u.color}})))}))};KW.propTypes={colors:N.arrayOf(N.oneOfType([N.string,N.shape({color:N.string,title:N.string})])).isRequired};var s8e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},CD=function(t){var r=t.width,i=t.rgb,n=t.hex,o=t.hsv,a=t.hsl,s=t.onChange,c=t.onSwatchHover,u=t.disableAlpha,l=t.presetColors,h=t.renderers,f=t.styles,d=f===void 0?{}:f,p=t.className,m=p===void 0?"":p,g=gt(Si({default:s8e({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+i.r+","+i.g+","+i.b+","+i.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},d),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},d),{disableAlpha:u});return E.createElement("div",{style:g.picker,className:"sketch-picker "+m},E.createElement("div",{style:g.saturation},E.createElement(vT,{style:g.Saturation,hsl:a,hsv:o,onChange:s})),E.createElement("div",{style:g.controls,className:"flexbox-fix"},E.createElement("div",{style:g.sliders},E.createElement("div",{style:g.hue},E.createElement(xh,{style:g.Hue,hsl:a,onChange:s})),E.createElement("div",{style:g.alpha},E.createElement(mD,{style:g.Alpha,rgb:i,hsl:a,renderers:h,onChange:s}))),E.createElement("div",{style:g.color},E.createElement(Dh,null),E.createElement("div",{style:g.activeColor}))),E.createElement(o8e,{rgb:i,hsl:a,hex:n,onChange:s,disableAlpha:u}),E.createElement(KW,{colors:l,onClick:s,onSwatchHover:c}))};CD.propTypes={disableAlpha:N.bool,width:N.oneOfType([N.string,N.number]),styles:N.object},CD.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const l8e=wi(CD);var Cg=function(t){var r=t.hsl,i=t.offset,n=t.onClick,o=n===void 0?function(){}:n,a=t.active,s=t.first,c=t.last,u=gt({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+i*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:s,last:c}),l=function(f){return o({h:r.h,s:.5,l:i,source:"hsl"},f)};return E.createElement("div",{style:u.swatch,onClick:l})},c8e=function(t){var r=t.onClick,i=t.hsl,n=gt({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return E.createElement("div",{style:n.swatches},E.createElement("div",{style:n.swatch},E.createElement(Cg,{hsl:i,offset:".80",active:Math.abs(i.l-.8)<o&&Math.abs(i.s-.5)<o,onClick:r,first:!0})),E.createElement("div",{style:n.swatch},E.createElement(Cg,{hsl:i,offset:".65",active:Math.abs(i.l-.65)<o&&Math.abs(i.s-.5)<o,onClick:r})),E.createElement("div",{style:n.swatch},E.createElement(Cg,{hsl:i,offset:".50",active:Math.abs(i.l-.5)<o&&Math.abs(i.s-.5)<o,onClick:r})),E.createElement("div",{style:n.swatch},E.createElement(Cg,{hsl:i,offset:".35",active:Math.abs(i.l-.35)<o&&Math.abs(i.s-.5)<o,onClick:r})),E.createElement("div",{style:n.swatch},E.createElement(Cg,{hsl:i,offset:".20",active:Math.abs(i.l-.2)<o&&Math.abs(i.s-.5)<o,onClick:r,last:!0})),E.createElement("div",{style:n.clear}))},u8e=function(){var t=gt({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return E.createElement("div",{style:t.picker})},PD=function(t){var r=t.hsl,i=t.onChange,n=t.pointer,o=t.styles,a=o===void 0?{}:o,s=t.className,c=s===void 0?"":s,u=gt(Si({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return E.createElement("div",{style:u.wrap||{},className:"slider-picker "+c},E.createElement("div",{style:u.hue},E.createElement(xh,{style:u.Hue,hsl:r,pointer:n,onChange:i})),E.createElement("div",{style:u.swatches},E.createElement(c8e,{hsl:r,onClick:i})))};PD.propTypes={styles:N.object},PD.defaultProps={pointer:u8e,styles:{}},wi(PD);var ZW={};Object.defineProperty(ZW,"__esModule",{value:!0});var QW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},f8e=E,JW=h8e(f8e);function h8e(e){return e&&e.__esModule?e:{default:e}}function d8e(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}var TT=24,p8e=ZW.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,i=e.width,n=i===void 0?TT:i,o=e.height,a=o===void 0?TT:o,s=e.style,c=s===void 0?{}:s,u=d8e(e,["fill","width","height","style"]);return JW.default.createElement("svg",QW({viewBox:"0 0 "+TT+" "+TT,style:QW({fill:r,width:n,height:a},c)},u),JW.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},m8e=function(t){var r=t.color,i=t.onClick,n=i===void 0?function(){}:i,o=t.onSwatchHover,a=t.first,s=t.last,c=t.active,u=gt({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:_D(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:s,active:c,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return E.createElement(eu,{color:r,style:u.color,onClick:n,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},E.createElement("div",{style:u.check},E.createElement(p8e,null)))},g8e=function(t){var r=t.onClick,i=t.onSwatchHover,n=t.group,o=t.active,a=gt({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return E.createElement("div",{style:a.group},fl(n,function(s,c){return E.createElement(m8e,{key:s,color:s,active:s.toLowerCase()===o,first:c===0,last:c===n.length-1,onClick:r,onSwatchHover:i})}))},DD=function(t){var r=t.width,i=t.height,n=t.onChange,o=t.onSwatchHover,a=t.colors,s=t.hex,c=t.styles,u=c===void 0?{}:c,l=t.className,h=l===void 0?"":l,f=gt(Si({default:{picker:{width:r,height:i},overflow:{height:i,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},u)),d=function(m,g){return n({hex:m,source:"hex"},g)};return E.createElement("div",{style:f.picker,className:"swatches-picker "+h},E.createElement(wg,null,E.createElement("div",{style:f.overflow},E.createElement("div",{style:f.body},fl(a,function(p){return E.createElement(g8e,{key:p.toString(),group:p,active:s,onClick:d,onSwatchHover:o})}),E.createElement("div",{style:f.clear})))))};DD.propTypes={width:N.oneOfType([N.string,N.number]),height:N.oneOfType([N.string,N.number]),colors:N.arrayOf(N.arrayOf(N.string)),styles:N.object},DD.defaultProps={width:320,height:240,colors:[[Nh[900],Nh[700],Nh[500],Nh[300],Nh[100]],[Rh[900],Rh[700],Rh[500],Rh[300],Rh[100]],[Mh[900],Mh[700],Mh[500],Mh[300],Mh[100]],[Lh[900],Lh[700],Lh[500],Lh[300],Lh[100]],[Bh[900],Bh[700],Bh[500],Bh[300],Bh[100]],[Hh[900],Hh[700],Hh[500],Hh[300],Hh[100]],[$h[900],$h[700],$h[500],$h[300],$h[100]],[Fh[900],Fh[700],Fh[500],Fh[300],Fh[100]],[jh[900],jh[700],jh[500],jh[300],jh[100]],["#194D33",Ig[700],Ig[500],Ig[300],Ig[100]],[Uh[900],Uh[700],Uh[500],Uh[300],Uh[100]],[Gh[900],Gh[700],Gh[500],Gh[300],Gh[100]],[zh[900],zh[700],zh[500],zh[300],zh[100]],[Vh[900],Vh[700],Vh[500],Vh[300],Vh[100]],[Wh[900],Wh[700],Wh[500],Wh[300],Wh[100]],[Yh[900],Yh[700],Yh[500],Yh[300],Yh[100]],[qh[900],qh[700],qh[500],qh[300],qh[100]],[Xh[900],Xh[700],Xh[500],Xh[300],Xh[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},wi(DD);var xD=function(t){var r=t.onChange,i=t.onSwatchHover,n=t.hex,o=t.colors,a=t.width,s=t.triangle,c=t.styles,u=c===void 0?{}:c,l=t.className,h=l===void 0?"":l,f=gt(Si({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},u),{"hide-triangle":s==="hide","top-left-triangle":s==="top-left","top-right-triangle":s==="top-right"}),d=function(m,g){hl(m)&&r({hex:m,source:"hex"},g)};return E.createElement("div",{style:f.card,className:"twitter-picker "+h},E.createElement("div",{style:f.triangleShadow}),E.createElement("div",{style:f.triangle}),E.createElement("div",{style:f.body},fl(o,function(p,m){return E.createElement(eu,{key:m,color:p,hex:p,style:f.swatch,onClick:d,onHover:i,focusStyle:{boxShadow:"0 0 4px "+p}})}),E.createElement("div",{style:f.hash},"#"),E.createElement(Xt,{label:null,style:{input:f.input},value:n.replace("#",""),onChange:d}),E.createElement("div",{style:f.clear})))};xD.propTypes={width:N.oneOfType([N.string,N.number]),triangle:N.oneOf(["hide","top-left","top-right"]),colors:N.arrayOf(N.string),styles:N.object},xD.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},wi(xD);var ND=function(t){var r=gt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return E.createElement("div",{style:r.picker})};ND.propTypes={hsl:N.shape({h:N.number,s:N.number,l:N.number,a:N.number})},ND.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var RD=function(t){var r=gt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return E.createElement("div",{style:r.picker})};RD.propTypes={hsl:N.shape({h:N.number,s:N.number,l:N.number,a:N.number})},RD.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var v8e=function(t){var r=t.onChange,i=t.rgb,n=t.hsl,o=t.hex,a=t.hsv,s=function(d,p){if(d.hex)hl(d.hex)&&r({hex:d.hex,source:"hex"},p);else if(d.rgb){var m=d.rgb.split(",");TD(d.rgb,"rgb")&&r({r:m[0],g:m[1],b:m[2],a:1,source:"rgb"},p)}else if(d.hsv){var g=d.hsv.split(",");TD(d.hsv,"hsv")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("\xB0",""),g[1]==1?g[1]=.01:g[2]==1&&(g[2]=.01),r({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsv"},p))}else if(d.hsl){var v=d.hsl.split(",");TD(d.hsl,"hsl")&&(v[2]=v[2].replace("%",""),v[1]=v[1].replace("%",""),v[0]=v[0].replace("\xB0",""),h[1]==1?h[1]=.01:h[2]==1&&(h[2]=.01),r({h:Number(v[0]),s:Number(v[1]),v:Number(v[2]),source:"hsl"},p))}},c=gt({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),u=i.r+", "+i.g+", "+i.b,l=Math.round(n.h)+"\xB0, "+Math.round(n.s*100)+"%, "+Math.round(n.l*100)+"%",h=Math.round(a.h)+"\xB0, "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return E.createElement("div",{style:c.wrap,className:"flexbox-fix"},E.createElement("div",{style:c.fields},E.createElement("div",{style:c.double},E.createElement(Xt,{style:{input:c.input,label:c.label},label:"hex",value:o,onChange:s})),E.createElement("div",{style:c.column},E.createElement("div",{style:c.single},E.createElement(Xt,{style:{input:c.input2,label:c.label2},label:"rgb",value:u,onChange:s})),E.createElement("div",{style:c.single},E.createElement(Xt,{style:{input:c.input2,label:c.label2},label:"hsv",value:h,onChange:s})),E.createElement("div",{style:c.single},E.createElement(Xt,{style:{input:c.input2,label:c.label2},label:"hsl",value:l,onChange:s})))))},MD=function(t){var r=t.width,i=t.onChange,n=t.rgb,o=t.hsl,a=t.hsv,s=t.hex,c=t.header,u=t.styles,l=u===void 0?{}:u,h=t.className,f=h===void 0?"":h,d=gt(Si({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+n.r+", "+n.g+", "+n.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},l));return E.createElement("div",{style:d.picker,className:"google-picker "+f},E.createElement("div",{style:d.head},c),E.createElement("div",{style:d.swatch}),E.createElement("div",{style:d.saturation},E.createElement(vT,{hsl:o,hsv:a,pointer:ND,onChange:i})),E.createElement("div",{style:d.body},E.createElement("div",{style:d.controls,className:"flexbox-fix"},E.createElement("div",{style:d.hue},E.createElement(xh,{style:d.Hue,hsl:o,radius:"4px",pointer:RD,onChange:i}))),E.createElement(v8e,{rgb:n,hsl:o,hex:s,hsv:a,onChange:i})))};MD.propTypes={width:N.oneOfType([N.string,N.number]),styles:N.object,header:N.string},MD.defaultProps={width:652,styles:{},header:"Color picker"},wi(MD);function y8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_8e(i.key),i)}}function b8e(e,t,r){return t&&eY(e.prototype,t),r&&eY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _8e(e){var t=T8e(e,"string");return typeof t=="symbol"?t:String(t)}function T8e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LD(e,t)}function LD(e,t){return LD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},LD(e,t)}function S8e(e){var t=O8e();return function(){var i=ET(e),n;if(t){var o=ET(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return w8e(this,n)}}function w8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A8e(e)}function A8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ET(e){return ET=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ET(e)}let tY=function(e){E8e(r,e);var t=S8e(r);function r(i){var n;y8e(this,r),n=t.call(this,i);const o=du(i.color);return n.state={displayColorPicker:!1,color:{r:o.r,g:o.g,b:o.b,a:o.opacity}},n}return b8e(r,[{key:"handleClick",value:function(){this.setState(n=>({displayColorPicker:!n.displayColorPicker}))}},{key:"handleClose",value:function(){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(n){const o=n.rgb,a=`rgba(${o.r},${o.g},${o.b},${o.a})`;this.props.onChange(a),this.setState({color:n.rgb})}},{key:"render",value:function(){const n=gt({default:{color:{width:"32px",height:"14px",borderRadius:"2px",background:`rgba(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b}, ${this.state.color.a})`},swatch:{padding:"5px",background:"#fff",cursor:"pointer",borderRadius:"1px"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return E.createElement("div",null,E.createElement("div",{onClick:this.handleClick.bind(this),style:n.swatch},E.createElement("div",{style:n.color})),this.state.displayColorPicker?E.createElement("div",{style:n.popover},E.createElement("div",{onClick:this.handleClose.bind(this),style:n.cover}),E.createElement(l8e,{color:this.state.color,onChange:this.handleChange.bind(this)})):null)}}]),r}(E.Component);tY.propTypes={color:N.string,onChange:N.func};function k8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,C8e(i.key),i)}}function I8e(e,t,r){return t&&rY(e.prototype,t),r&&rY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function C8e(e){var t=P8e(e,"string");return typeof t=="symbol"?t:String(t)}function P8e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BD(e,t)}function BD(e,t){return BD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},BD(e,t)}function x8e(e){var t=M8e();return function(){var i=ST(e),n;if(t){var o=ST(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return N8e(this,n)}}function N8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R8e(e)}function R8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ST(e){return ST=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ST(e)}let HD=function(e){D8e(r,e);var t=x8e(r);function r(i){var n;return k8e(this,r),n=t.call(this,i),n.state={colors:i.track.options.colorRange.slice()},n}return I8e(r,[{key:"handleColorsChanged",value:function(n){this.setState({colors:n})}},{key:"handleSubmit",value:function(){const n=this.props.track.options;n.colorRange=this.state.colors,this.props.onSubmit(this.props.track.options)}},{key:"handleAddColor",value:function(){this.setState(n=>({colors:n.colors.concat(n.colors[n.colors.length-1])}))}},{key:"handleRemoveColor",value:function(n){this.setState(o=>({colors:o.colors.slice(0,n).concat(o.colors.slice(n+1))}))}},{key:"render",value:function(){const n=JSON.parse(JSON.stringify(this.props.track)),o=Object.assign(n,{options:{colorRange:this.state.colors}}),a={editable:!1,zoomFixed:!0,views:[{uid:`hmo-${this.props.track.uid}`,initialXDomain:this.props.xScale?this.props.xScale.domain():[0,1],initialYDomain:this.props.yScale?this.props.yScale.domain():[0,1],tracks:{center:[o]},layout:{x:0,y:0,h:12,w:12,i:`hmo-${this.props.track.id}`}}]},s=this.state.colors.map((u,l)=>{const h=this.state.colors.length>2&&l===this.state.colors.length-1?E.createElement("div",{onClick:()=>this.handleRemoveColor(l),style:{background:"white",position:"absolute",top:0,right:0,opacity:1,width:14,height:14,borderRadius:2,cursor:"pointer"}},E.createElement("svg",{height:"10px",style:{position:"absolute",top:2,right:2,opacity:.5,width:10,height:10}},E.createElement("use",{xlinkHref:"#cross"}))):null;return E.createElement("div",{key:`l${l}`,style:{borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",position:"relative",outline:"none"}},h,E.createElement(tY,{key:l,color:this.state.colors[l],onChange:f=>{this.setState(d=>{const p=d.colors.slice();return p[l]=f,{colors:p}},()=>{this.handleColorsChanged(this.state.colors)})}}))}).reverse(),c=this.state.colors.length<10?E.createElement("div",{onClick:this.handleAddColor.bind(this),style:{position:"relative",outline:"none",height:"25px",padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",cursor:"pointer"}},E.createElement("div",{style:{textAlign:"center",width:"32px",height:"14px"}},E.createElement("svg",{height:"100%",style:{opacity:.5,margin:"auto",display:"block"},width:"10px"},E.createElement("use",{xlinkHref:"#plus"})))):null;return E.createElement(lg,{okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmit.bind(this),title:"Custom Color Map"},E.createElement("table",{className:"table-track-options"},E.createElement("thead",null),E.createElement("tbody",{style:{verticalAlign:"top"}},E.createElement("tr",null,E.createElement("td",{className:"td-track-options"},E.createElement("table",null,E.createElement("tbody",null,E.createElement("tr",null,E.createElement("td",{className:"td-track-options"},"Preview")),E.createElement("tr",null,E.createElement("td",{className:"td-track-options","aria-label":"Track options"},E.createElement("div",{style:{width:200}},E.createElement(rd,{options:{bounded:!1},viewConfig:a}))))))),E.createElement("td",{className:"td-track-options"},E.createElement("table",null,E.createElement("tbody",null,E.createElement("tr",null,E.createElement("td",{className:"td-track-options"},"Colors")),E.createElement("tr",null,E.createElement("td",{className:"td-track-options"},c,E.createElement("div",{style:{position:"relative"}},s))))))))))}}]),r}(E.Component);HD.propTypes={handleCancel:N.func,onCancel:N.func,onSubmit:N.func,track:N.object,xScale:N.object,yScale:N.object};const nY=e=>{if(!e.header)return[];const t=e.header.split("	"),r=[];for(let i=0;i<t.length;i++)r.push({name:t[i],value:i+1});return r},Kh=(e,t="",r=1)=>e.reduce((i,n)=>(i[n]={name:`${n*r}${t}`,value:n},i),{}),Fi={yes:{name:"Yes",value:!0},no:{name:"No",value:!1}},Mr={black:{name:"Black",value:"black"},blue:{name:"Blue",value:"blue"},brown:{name:"Brown",value:"brown"},cyan:{name:"Cyan",value:"cyan"},green:{name:"Green",value:"green"},grey:{name:"Grey",value:"grey"},orange:{name:"Orange",value:"orange"},purple:{name:"Purple",value:"purple"},turquoise:{name:"Turquoise",value:"turquoise"},red:{name:"Red",value:"red"},white:{name:"White",value:"white"}},L8e={use_stroke:{name:"Glyph color",value:"[glyph-color]"}},Pg=Kh([1,2,3,5,8,13,21]),B8e=Object.assign(Pg,{none:{name:"none",value:"none"}}),wT=Kh([0,2,4,8,16,32,64,128,256]),dl=Kh([0,.2,.4,.6,.8,1],"%",100),H8e=Kh([.2,.4,.6,.8,1],"%",100),wn={axisLabelFormatting:{name:"Axis Label Formatting",inlineOptions:{normal:{name:"normal",value:"normal"},scientific:{name:"scientific",value:"scientific"}}},flipDiagonal:{name:"Flip Across Diagonal",inlineOptions:{none:{name:"No",value:"none"},yes:{name:"Yes",value:"yes"},copy:{name:"Copy",value:"copy"}}},heatmapValueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},valueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},extent:{name:"Extent",inlineOptions:{full:{name:"Full",value:"full"},upperRight:{name:"Upper Right",value:"upper-right"},lowerLeft:{name:"Lower Left",value:"lower-left"}}},labelLeftMargin:{name:"Label Left Margin",inlineOptions:wT},labelRightMargin:{name:"Label Right Margin",inlineOptions:wT},labelTopMargin:{name:"Label Top Margin",inlineOptions:wT},labelBottomMargin:{name:"Label Bottom Margin",inlineOptions:wT},labelShowResolution:{name:"Label Show Resolution",inlineOptions:Fi},labelShowAssembly:{name:"Label Show Assembly",inlineOptions:Fi},lineStrokeWidth:{name:"Stroke Width",inlineOptions:Pg},strokeWidth:{name:"Stroke Width",inlineOptions:Pg},trackBorderWidth:{name:"Track Border Width",inlineOptions:Pg},separatePlusMinusStrands:{name:"Separate +/- strands",inlineOptions:Fi},sortLargestOnTop:{name:"Sort Largest On Top",inlineOptions:Fi},showTexts:{name:"Show texts",inlineOptions:Fi},staggered:{name:"Staggered",inlineOptions:Fi},minSquareSize:{name:"Minimum size",inlineOptions:B8e},pointSize:{name:"Point Size",inlineOptions:Pg},pointColor:{name:"Point Color",inlineOptions:Mr},trackBorderColor:{name:"Track Border Color",inlineOptions:Mr},backgroundColor:{name:"Background Color",inlineOptions:{white:{name:"White",value:"white"},lightGrey:{name:"Light Grey",value:"#eeeeee"},grey:{name:"Grey",value:"#cccccc"},black:{name:"Black",value:"black"},transparent:{name:"Transparent",value:"transparent"}}},colorScale:{name:"Color Scale",inlineOptions:{epilogos:{name:"Epilogos",values:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","#FFFFFF"]},category10:{name:"D3 Category10",values:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"]}}},minusStrandColor:{name:"- Strand Color",inlineOptions:Mr},plusStrandColor:{name:"+ Strand Color",inlineOptions:Mr},lineStrokeColor:{name:"Stroke color",inlineOptions:Mr},projectionStrokeColor:{name:"Stroke color",inlineOptions:Mr},projectionFillColor:{name:"Fill color",inlineOptions:Mr},stroke:{name:"Stroke Color",inlineOptions:Mr},strokeColor:{name:"Stroke color",inlineOptions:Mr},fill:{name:"Fill Color",inlineOptions:Mr},color:{name:"Color",inlineOptions:Mr},fontColor:{name:"Font color",inlineOptions:Mr},fillColor:{name:"Fill color",inlineOptions:Mr},barFillColor:{name:"Fill color",inlineOptions:Mr},barFillColorTop:{name:"Top Fill color",inlineOptions:Mr},barFillColorBottom:{name:"Bottom Fill color",inlineOptions:Mr},barOpacity:{name:"Bar opacity",inlineOptions:dl},zeroLineVisible:{name:"Zero line visible",inlineOptions:Fi},zeroLineColor:{name:"Zero line color",inlineOptions:Mr},zeroLineOpacity:{name:"Zero line opacity",inlineOptions:H8e},fillOpacity:{name:"Fill Opacity",inlineOptions:dl},strokeOpacity:{name:"Stroke Opacity",inlineOptions:dl},strokePos:{name:"Stroke Position",inlineOptions:{aroundInner:{name:"Around Inner",value:"around"},aroundCenter:{name:"Around Center",value:null},hidden:{name:"Hidden",value:"hidden"},top:{name:"Top",value:"top"},right:{name:"Right",value:"right"},bottom:{name:"Bottom",value:"bottom"},left:{name:"Left",value:"left"}}},barBorder:{name:"Bar border",inlineOptions:Fi},scaledHeight:{name:"Scaled height",inlineOptions:Fi},rectangleDomainStrokeColor:{name:"Stroke color",inlineOptions:Mr},rectangleDomainFillColor:{name:"Fill color",inlineOptions:Mr},rectangleDomainFillOpacity:{name:"Fill opacity",inlineOptions:dl},rectangleDomainOpacity:{name:"Opacity",inlineOptions:dl},mapboxStyle:{name:"Map style",inlineOptions:{streets:{name:"streets",value:"mapbox.streets"},light:{name:"light",value:"mapbox.light"},dark:{name:"dark",value:"mapbox.dark"},satellite:{name:"satellite",value:"mapbox.satellite"},"streets-satellite":{name:"streets-satellite",value:"mapbox.streets-satellite"},wheatpaste:{name:"wheatpaste",value:"mapbox.wheatpaste"},"streets-basic":{name:"streets-basic",value:"mapbox.streets-basic"},comic:{name:"comic",value:"mapbox.comic"},outdoors:{name:"outdoors",value:"mapbox.outdoors"},"run-bike-hike":{name:"run-bike-hike",value:"mapbox.run-bike-hike"},pencil:{name:"pencil",value:"mapbox.pencil"},pirates:{name:"pirates",value:"mapbox.pirates"},emerald:{name:"emerald",value:"mapbox.emerald"},"high-contrast":{name:"high-contrast",value:"mapbox.high-contrast"}}},oneDHeatmapFlipped:{name:"Flip Heatmap",inlineOptions:{yes:{name:"Yes",value:"yes"},no:{name:"No",value:null}}},showMousePosition:{name:"Show Mouse Position",inlineOptions:Fi},showTooltip:{name:"Show Tooltip",inlineOptions:Fi},fontSize:{name:"Font Size",inlineOptions:Kh([8,9,10,11,12,14,16,18,24],"px")},tickPositions:{name:"Tick Positions",inlineOptions:{even:{name:"Even",value:"even"},ends:{name:"Ends",value:"ends"}}},tickFormat:{name:"Tick Format",inlineOptions:{plain:{name:"Plain",value:"plain"},si:{name:"SI",value:"si"}}},colorEncoding:{name:"Color Encode Annotations",inlineOptions:{none:{name:"None",value:null},itemRgb:{name:"itemRgb",value:"itemRgb"}},generateOptions:nY},fontIsAligned:{name:"Left-Align Font",inlineOptions:Fi},axisPositionHorizontal:{name:"Axis Position",inlineOptions:{left:{name:"Left",value:"left"},outsideLeft:{name:"Outside left",value:"outsideLeft"},right:{name:"Right",value:"right"},outsideRight:{name:"Outside right",value:"outsideRight"},hidden:{name:"Hidden",value:null}}},axisPositionVertical:{name:"Axis Position",inlineOptions:{top:{name:"Top",value:"top"},outsideTop:{name:"Outside top",value:"outsideTop"},bottom:{name:"Bottom",value:"bottom"},outsideBottom:{name:"Outside bottom",value:"outsideBottom"},hidden:{name:"Hidden",value:null}}},axisMargin:{name:"Axis Margin",inlineOptions:Kh([0,10,20,30,40,50,100,200,400],"px")},colorbarPosition:{name:"Colorbar Position",inlineOptions:{topLeft:{name:"Top Left",value:"topLeft"},topRight:{name:"Top Right",value:"topRight"},bottomLeft:{name:"Bottom Left",value:"bottomLeft"},bottomRight:{name:"Bottom Right",value:"bottomRight"},hidden:{name:"Hidden",value:null}}},colorbarBackgroundColor:{name:"Colorbar Background Color",inlineOptions:Mr},colorbarBackgroundOpacity:{name:"Colorbar Background Opacity",inlineOptions:dl},colorbarLabelsPosition:{name:"Colorbar Labels Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},labelColor:{name:"Label Color",inlineOptions:{...Mr,...L8e}},labelPosition:{name:"Label Position",inlineOptions:{ol:{name:"Outer left",value:"outerLeft"},or:{name:"Outer right",value:"outerRight"},ot:{name:"Outer top",value:"outerTop"},ob:{name:"Outer bottom",value:"outerBottom"},tl:{name:"Top left",value:"topLeft"},tr:{name:"Top right",value:"topRight"},bl:{name:"Bottom left",value:"bottomLeft"},br:{name:"Bottom right",value:"bottomRight"},hidden:{name:"Hidden",value:"hidden"}}},labelTextOpacity:{name:"Label Text Opacity",inlineOptions:dl},geneAnnotationHeight:{name:"Gene Annotation Height",inlineOptions:{8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16}}},annotationHeight:{name:"Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},scaled:{name:"scaled",value:"scaled"}}},maxAnnotationHeight:{name:"Max Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},none:{name:"none",value:null}}},annotationStyle:{name:"Annotation Style",inlineOptions:{box:{name:"Box",value:"box"},segment:{name:"Segment",value:"segment"}}},geneLabelPosition:{name:"Gene Label Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},geneStrandSpacing:{name:"Gene Strand Spacing",inlineOptions:{2:{name:"2px",value:2},4:{name:"4px",value:4},8:{name:"8px",value:8}}},labelBackgroundColor:{name:"Label Background Color",inlineOptions:Mr},labelBackgroundOpacity:{name:"Label Background Opacity",inlineOptions:dl},viewResolution:{name:"View Resolution",inlineOptions:{high:{name:"High",value:384},medium:{name:"Medium",value:1024},low:{name:"Low",value:2048}}},colorRange:{name:"Color map",inlineOptions:{afmhot:{name:"afmhot",value:["rgba(0,0,0,1.0)","rgba(128,0,0,1.0)","rgba(256,129,1,1.0)","rgba(256,256,129,1.0)","rgba(256,256,256,1.0)"]},fall:{name:"fall",value:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"]},hot:{name:"hot",value:["rgba(10,0,0,1.0)","rgba(179,0,0,1.0)","rgba(256,91,0,1.0)","rgba(256,256,6,1.0)","rgba(256,256,256,1.0)"]},jet:{name:"jet",value:["rgba(0,0,128,1.0)","rgba(0,129,256,1.0)","rgba(125,256,122,1.0)","rgba(256,148,0,1.0)","rgba(128,0,0,1.0)"]},bwr:{name:"bwr",value:["rgba(0,0,256,1.0)","rgba(128,128,256,1.0)","rgba(256,254,254,1.0)","rgba(256,126,126,1.0)","rgba(256,0,0,1.0)"]},cubehelix:{name:"cubehelix",value:["rgba(0,0,0,1.0)","rgba(21,83,76,1.0)","rgba(162,121,74,1.0)","rgba(199,180,238,1.0)","rgba(256,256,256,1.0)"]},rainbow:{name:"rainbow",value:["rgba(128,0,256,1.0)","rgba(0,181,236,1.0)","rgba(129,255,180,1.0)","rgba(256,179,96,1.0)","rgba(256,0,0,1.0)"]},gray:{name:"greys",value:["rgba(255,255,255,1)","rgba(0,0,0,1)"]},red:{name:"White to red",value:["rgba(255,255,255,1)","rgba(255,0,0,1)"]},green:{name:"White to green",value:["rgba(255,255,255,1)","rgba(0,255,0,1)"]},blue:{name:"White to blue",value:["rgba(255,255,255,1)","rgba(0,0,255,1)"]},custard:{name:"custard",value:["#FFFFFF","#F8E71C","rgba(245,166,35,1)","rgba(0,0,0,1)"]},magma:{name:"magma",value:["rgba(0,0,3,1)","rgba(0,0,4,1)","rgba(0,0,6,1)","rgba(1,0,7,1)","rgba(1,1,9,1)","rgba(1,1,11,1)","rgba(2,2,13,1)","rgba(2,2,15,1)","rgba(3,3,17,1)","rgba(4,3,19,1)","rgba(4,4,21,1)","rgba(5,4,23,1)","rgba(6,5,25,1)","rgba(7,5,27,1)","rgba(8,6,29,1)","rgba(9,7,32,1)","rgba(10,7,34,1)","rgba(11,8,36,1)","rgba(12,9,38,1)","rgba(13,10,40,1)","rgba(14,10,42,1)","rgba(15,11,45,1)","rgba(16,12,47,1)","rgba(17,12,49,1)","rgba(19,13,51,1)","rgba(20,13,54,1)","rgba(21,14,56,1)","rgba(22,14,58,1)","rgba(23,15,61,1)","rgba(25,15,63,1)","rgba(26,16,66,1)","rgba(27,16,68,1)","rgba(28,16,70,1)","rgba(30,17,73,1)","rgba(31,17,75,1)","rgba(33,17,78,1)","rgba(34,17,80,1)","rgba(36,17,83,1)","rgba(37,17,85,1)","rgba(39,17,87,1)","rgba(40,17,90,1)","rgba(42,17,92,1)","rgba(43,17,94,1)","rgba(45,17,97,1)","rgba(47,16,99,1)","rgba(49,16,101,1)","rgba(50,16,103,1)","rgba(52,16,105,1)","rgba(54,15,107,1)","rgba(55,15,108,1)","rgba(57,15,110,1)","rgba(59,15,112,1)","rgba(61,15,113,1)","rgba(62,15,114,1)","rgba(64,15,116,1)","rgba(66,15,117,1)","rgba(67,15,118,1)","rgba(69,15,119,1)","rgba(71,15,120,1)","rgba(72,16,120,1)","rgba(74,16,121,1)","rgba(76,16,122,1)","rgba(77,17,123,1)","rgba(79,17,123,1)","rgba(81,18,124,1)","rgba(82,18,124,1)","rgba(84,19,125,1)","rgba(85,20,125,1)","rgba(87,20,126,1)","rgba(88,21,126,1)","rgba(90,21,126,1)","rgba(92,22,127,1)","rgba(93,23,127,1)","rgba(95,23,127,1)","rgba(96,24,128,1)","rgba(98,25,128,1)","rgba(99,25,128,1)","rgba(101,26,128,1)","rgba(103,26,128,1)","rgba(104,27,129,1)","rgba(106,28,129,1)","rgba(107,28,129,1)","rgba(109,29,129,1)","rgba(110,30,129,1)","rgba(112,30,129,1)","rgba(113,31,129,1)","rgba(115,32,129,1)","rgba(117,32,129,1)","rgba(118,33,129,1)","rgba(120,33,129,1)","rgba(121,34,130,1)","rgba(123,35,130,1)","rgba(124,35,130,1)","rgba(126,36,130,1)","rgba(128,36,130,1)","rgba(129,37,129,1)","rgba(131,37,129,1)","rgba(132,38,129,1)","rgba(134,39,129,1)","rgba(136,39,129,1)","rgba(137,40,129,1)","rgba(139,40,129,1)","rgba(140,41,129,1)","rgba(142,41,129,1)","rgba(144,42,129,1)","rgba(145,42,129,1)","rgba(147,43,128,1)","rgba(148,43,128,1)","rgba(150,44,128,1)","rgba(152,44,128,1)","rgba(153,45,128,1)","rgba(155,46,127,1)","rgba(157,46,127,1)","rgba(158,47,127,1)","rgba(160,47,127,1)","rgba(161,48,126,1)","rgba(163,48,126,1)","rgba(165,49,126,1)","rgba(166,49,125,1)","rgba(168,50,125,1)","rgba(170,50,125,1)","rgba(171,51,124,1)","rgba(173,51,124,1)","rgba(175,52,123,1)","rgba(176,52,123,1)","rgba(178,53,123,1)","rgba(180,53,122,1)","rgba(181,54,122,1)","rgba(183,55,121,1)","rgba(185,55,121,1)","rgba(186,56,120,1)","rgba(188,56,120,1)","rgba(189,57,119,1)","rgba(191,57,118,1)","rgba(193,58,118,1)","rgba(194,59,117,1)","rgba(196,59,117,1)","rgba(198,60,116,1)","rgba(199,61,115,1)","rgba(201,61,115,1)","rgba(202,62,114,1)","rgba(204,63,113,1)","rgba(206,63,113,1)","rgba(207,64,112,1)","rgba(209,65,111,1)","rgba(210,66,110,1)","rgba(212,67,110,1)","rgba(213,67,109,1)","rgba(215,68,108,1)","rgba(216,69,107,1)","rgba(218,70,107,1)","rgba(219,71,106,1)","rgba(221,72,105,1)","rgba(222,73,104,1)","rgba(223,74,103,1)","rgba(225,75,103,1)","rgba(226,76,102,1)","rgba(227,78,101,1)","rgba(229,79,100,1)","rgba(230,80,100,1)","rgba(231,81,99,1)","rgba(232,83,98,1)","rgba(233,84,97,1)","rgba(234,85,97,1)","rgba(236,87,96,1)","rgba(237,88,95,1)","rgba(238,90,95,1)","rgba(239,91,94,1)","rgba(239,93,94,1)","rgba(240,95,93,1)","rgba(241,96,93,1)","rgba(242,98,93,1)","rgba(243,100,92,1)","rgba(243,101,92,1)","rgba(244,103,92,1)","rgba(245,105,92,1)","rgba(246,107,92,1)","rgba(246,108,92,1)","rgba(247,110,92,1)","rgba(247,112,92,1)","rgba(248,114,92,1)","rgba(248,116,92,1)","rgba(249,118,92,1)","rgba(249,120,92,1)","rgba(250,121,93,1)","rgba(250,123,93,1)","rgba(250,125,94,1)","rgba(251,127,94,1)","rgba(251,129,95,1)","rgba(251,131,95,1)","rgba(252,133,96,1)","rgba(252,135,97,1)","rgba(252,137,97,1)","rgba(252,139,98,1)","rgba(253,140,99,1)","rgba(253,142,100,1)","rgba(253,144,101,1)","rgba(253,146,102,1)","rgba(253,148,103,1)","rgba(254,150,104,1)","rgba(254,152,105,1)","rgba(254,154,106,1)","rgba(254,156,107,1)","rgba(254,157,108,1)","rgba(254,159,109,1)","rgba(254,161,110,1)","rgba(254,163,111,1)","rgba(254,165,112,1)","rgba(255,167,114,1)","rgba(255,169,115,1)","rgba(255,171,116,1)","rgba(255,172,118,1)","rgba(255,174,119,1)","rgba(255,176,120,1)","rgba(255,178,122,1)","rgba(255,180,123,1)","rgba(255,182,124,1)","rgba(255,184,126,1)","rgba(255,185,127,1)","rgba(255,187,129,1)","rgba(255,189,130,1)","rgba(255,191,132,1)","rgba(255,193,133,1)","rgba(255,195,135,1)","rgba(255,197,136,1)","rgba(255,198,138,1)","rgba(255,200,140,1)","rgba(255,202,141,1)","rgba(255,204,143,1)","rgba(254,206,144,1)","rgba(254,208,146,1)","rgba(254,209,148,1)","rgba(254,211,149,1)","rgba(254,213,151,1)","rgba(254,215,153,1)","rgba(254,217,155,1)","rgba(254,219,156,1)","rgba(254,220,158,1)","rgba(254,222,160,1)","rgba(254,224,162,1)","rgba(254,226,163,1)","rgba(253,228,165,1)","rgba(253,230,167,1)","rgba(253,231,169,1)","rgba(253,233,171,1)","rgba(253,235,172,1)","rgba(253,237,174,1)","rgba(253,239,176,1)","rgba(253,241,178,1)","rgba(253,242,180,1)","rgba(253,244,182,1)","rgba(253,246,184,1)","rgba(252,248,186,1)","rgba(252,250,188,1)","rgba(252,251,189,1)","rgba(252,253,191,1)"]},viridis:{name:"viridis",value:["rgba(68,1,84,1)","rgba(68,2,85,1)","rgba(69,3,87,1)","rgba(69,5,88,1)","rgba(69,6,90,1)","rgba(70,8,91,1)","rgba(70,9,93,1)","rgba(70,11,94,1)","rgba(70,12,96,1)","rgba(71,14,97,1)","rgba(71,15,98,1)","rgba(71,17,100,1)","rgba(71,18,101,1)","rgba(71,20,102,1)","rgba(72,21,104,1)","rgba(72,22,105,1)","rgba(72,24,106,1)","rgba(72,25,108,1)","rgba(72,26,109,1)","rgba(72,28,110,1)","rgba(72,29,111,1)","rgba(72,30,112,1)","rgba(72,32,113,1)","rgba(72,33,115,1)","rgba(72,34,116,1)","rgba(72,36,117,1)","rgba(72,37,118,1)","rgba(72,38,119,1)","rgba(72,39,120,1)","rgba(71,41,121,1)","rgba(71,42,121,1)","rgba(71,43,122,1)","rgba(71,44,123,1)","rgba(71,46,124,1)","rgba(70,47,125,1)","rgba(70,48,126,1)","rgba(70,49,126,1)","rgba(70,51,127,1)","rgba(69,52,128,1)","rgba(69,53,129,1)","rgba(69,54,129,1)","rgba(68,56,130,1)","rgba(68,57,131,1)","rgba(68,58,131,1)","rgba(67,59,132,1)","rgba(67,60,132,1)","rgba(67,62,133,1)","rgba(66,63,133,1)","rgba(66,64,134,1)","rgba(65,65,134,1)","rgba(65,66,135,1)","rgba(65,67,135,1)","rgba(64,69,136,1)","rgba(64,70,136,1)","rgba(63,71,136,1)","rgba(63,72,137,1)","rgba(62,73,137,1)","rgba(62,74,137,1)","rgba(61,75,138,1)","rgba(61,77,138,1)","rgba(60,78,138,1)","rgba(60,79,138,1)","rgba(59,80,139,1)","rgba(59,81,139,1)","rgba(58,82,139,1)","rgba(58,83,139,1)","rgba(57,84,140,1)","rgba(57,85,140,1)","rgba(56,86,140,1)","rgba(56,87,140,1)","rgba(55,88,140,1)","rgba(55,89,140,1)","rgba(54,91,141,1)","rgba(54,92,141,1)","rgba(53,93,141,1)","rgba(53,94,141,1)","rgba(52,95,141,1)","rgba(52,96,141,1)","rgba(51,97,141,1)","rgba(51,98,141,1)","rgba(51,99,141,1)","rgba(50,100,142,1)","rgba(50,101,142,1)","rgba(49,102,142,1)","rgba(49,103,142,1)","rgba(48,104,142,1)","rgba(48,105,142,1)","rgba(47,106,142,1)","rgba(47,107,142,1)","rgba(47,108,142,1)","rgba(46,109,142,1)","rgba(46,110,142,1)","rgba(45,111,142,1)","rgba(45,112,142,1)","rgba(45,112,142,1)","rgba(44,113,142,1)","rgba(44,114,142,1)","rgba(43,115,142,1)","rgba(43,116,142,1)","rgba(43,117,142,1)","rgba(42,118,142,1)","rgba(42,119,142,1)","rgba(41,120,142,1)","rgba(41,121,142,1)","rgba(41,122,142,1)","rgba(40,123,142,1)","rgba(40,124,142,1)","rgba(40,125,142,1)","rgba(39,126,142,1)","rgba(39,127,142,1)","rgba(38,128,142,1)","rgba(38,129,142,1)","rgba(38,130,142,1)","rgba(37,131,142,1)","rgba(37,131,142,1)","rgba(37,132,142,1)","rgba(36,133,142,1)","rgba(36,134,142,1)","rgba(35,135,142,1)","rgba(35,136,142,1)","rgba(35,137,142,1)","rgba(34,138,141,1)","rgba(34,139,141,1)","rgba(34,140,141,1)","rgba(33,141,141,1)","rgba(33,142,141,1)","rgba(33,143,141,1)","rgba(32,144,141,1)","rgba(32,145,140,1)","rgba(32,146,140,1)","rgba(32,147,140,1)","rgba(31,147,140,1)","rgba(31,148,140,1)","rgba(31,149,139,1)","rgba(31,150,139,1)","rgba(31,151,139,1)","rgba(30,152,139,1)","rgba(30,153,138,1)","rgba(30,154,138,1)","rgba(30,155,138,1)","rgba(30,156,137,1)","rgba(30,157,137,1)","rgba(30,158,137,1)","rgba(30,159,136,1)","rgba(30,160,136,1)","rgba(31,161,136,1)","rgba(31,162,135,1)","rgba(31,163,135,1)","rgba(31,163,134,1)","rgba(32,164,134,1)","rgba(32,165,134,1)","rgba(33,166,133,1)","rgba(33,167,133,1)","rgba(34,168,132,1)","rgba(35,169,131,1)","rgba(35,170,131,1)","rgba(36,171,130,1)","rgba(37,172,130,1)","rgba(38,173,129,1)","rgba(39,174,129,1)","rgba(40,175,128,1)","rgba(41,175,127,1)","rgba(42,176,127,1)","rgba(43,177,126,1)","rgba(44,178,125,1)","rgba(46,179,124,1)","rgba(47,180,124,1)","rgba(48,181,123,1)","rgba(50,182,122,1)","rgba(51,183,121,1)","rgba(53,183,121,1)","rgba(54,184,120,1)","rgba(56,185,119,1)","rgba(57,186,118,1)","rgba(59,187,117,1)","rgba(61,188,116,1)","rgba(62,189,115,1)","rgba(64,190,114,1)","rgba(66,190,113,1)","rgba(68,191,112,1)","rgba(70,192,111,1)","rgba(72,193,110,1)","rgba(73,194,109,1)","rgba(75,194,108,1)","rgba(77,195,107,1)","rgba(79,196,106,1)","rgba(81,197,105,1)","rgba(83,198,104,1)","rgba(85,198,102,1)","rgba(88,199,101,1)","rgba(90,200,100,1)","rgba(92,201,99,1)","rgba(94,201,98,1)","rgba(96,202,96,1)","rgba(98,203,95,1)","rgba(101,204,94,1)","rgba(103,204,92,1)","rgba(105,205,91,1)","rgba(108,206,90,1)","rgba(110,206,88,1)","rgba(112,207,87,1)","rgba(115,208,85,1)","rgba(117,208,84,1)","rgba(119,209,82,1)","rgba(122,210,81,1)","rgba(124,210,79,1)","rgba(127,211,78,1)","rgba(129,212,76,1)","rgba(132,212,75,1)","rgba(134,213,73,1)","rgba(137,213,72,1)","rgba(139,214,70,1)","rgba(142,215,68,1)","rgba(144,215,67,1)","rgba(147,216,65,1)","rgba(149,216,63,1)","rgba(152,217,62,1)","rgba(155,217,60,1)","rgba(157,218,58,1)","rgba(160,218,57,1)","rgba(163,219,55,1)","rgba(165,219,53,1)","rgba(168,220,51,1)","rgba(171,220,50,1)","rgba(173,221,48,1)","rgba(176,221,46,1)","rgba(179,221,45,1)","rgba(181,222,43,1)","rgba(184,222,41,1)","rgba(187,223,39,1)","rgba(189,223,38,1)","rgba(192,223,36,1)","rgba(195,224,35,1)","rgba(197,224,33,1)","rgba(200,225,32,1)","rgba(203,225,30,1)","rgba(205,225,29,1)","rgba(208,226,28,1)","rgba(211,226,27,1)","rgba(213,226,26,1)","rgba(216,227,25,1)","rgba(219,227,24,1)","rgba(221,227,24,1)","rgba(224,228,24,1)","rgba(226,228,24,1)","rgba(229,228,24,1)","rgba(232,229,25,1)","rgba(234,229,25,1)","rgba(237,229,26,1)","rgba(239,230,27,1)","rgba(242,230,28,1)","rgba(244,230,30,1)","rgba(247,230,31,1)","rgba(249,231,33,1)","rgba(251,231,35,1)","rgba(254,231,36,1)"]},custom:{name:"Custom...",componentPickers:{heatmap:HD,"horizontal-heatmap":HD}}}},align:{name:"Align",inlineOptions:{white:{name:"Top",value:"top"},lightGrey:{name:"Bottom",value:"bottom"}}},colorRangeGradient:{name:"Color Gradient",inlineOptions:Fi},dataTransform:{name:"Transforms",inlineOptions:{default:{name:"Default",value:"default"},None:{name:"None",value:"None"}},generateOptions:e=>{const t=[];if(e.transforms)for(const r of e.transforms)t.push({name:r.name,value:r.value});return t}},aggregationMode:{name:"Aggregation Mode",inlineOptions:{},generateOptions:e=>{const t=[];return e.aggregationModes?Object.values(e.aggregationModes).forEach(({name:r,value:i})=>{t.push({name:r,value:i})}):t.push({name:"Default",value:"default"}),t}},maxZoom:{name:"Zoom limit",inlineOptions:{none:{name:"None",value:null}},generateOptions:e=>{if(e.maxZoom){const t=[];for(let r=0;r<=e.maxZoom;r++){const{maxWidth:i,binsPerDimension:n,maxZoom:o}=e;let a=1,s=1;if(e.resolutions){const h=e.resolutions.map(f=>+f).sort((f,d)=>d-f);[a]=h,s=h[r]}else s=e.maxWidth/(2**r*e.binsPerDimension),a=i/(2**o*n);const c=yu(a,s),l=Dl(`.${c}`,s)(s);t.push({name:l,value:r.toString()})}return t}return[]}},valueColumn:{name:"Value column",inlineOptions:{none:{name:"None",value:null}},generateOptions:nY},zeroValueColor:{name:"Zero Value Color",inlineOptions:Mr}},iY={...Bie,IS_TRACK_RANGE_SELECTABLE:$u,OPTIONS_INFO:wn},$8e={d3Array:WK,d3Axis:XAe,d3Brush:$ne,d3Color:aZ,d3Drag:vre,d3Dsv:aoe,d3Format:RZ,d3Geo:N5e,d3Queue:H5e,d3Request:iBe,d3Scale:cJ,d3Selection:V2,d3Transition:$1e,d3Zoom:W1e,PIXI:iY.GLOBALS.PIXI,mix:sh,slugid:xt},AT={chromosomes:{ChromosomeInfo:ca,SearchField:th},libraries:$8e,tracks:{Annotations1dTrack:EI,Annotations2dTrack:Hz,ArrowheadDomainsTrack:Mz,BarTrack:lI,BedLikeTrack:cz,CNVIntervalTrack:wz,Chromosome2DAnnotations:Xz,Chromosome2DLabels:Wz,ChromosomeGrid:bm,CombinedTrack:sw,CrossRule:x8,DivergentBarTrack:_z,HeatmapTiledPixiTrack:Hf,Horizontal1dHeatmapTrack:Ez,Horizontal2DDomainsTrack:jz,HorizontalChromosomeLabels:Jz,HorizontalGeneAnnotationsTrack:yI,HorizontalHeatmapTrack:t8,HorizontalLine1DPixiTrack:Qf,HorizontalMultivecTrack:vz,HorizontalPoint1DPixiTrack:mz,HorizontalRule:S8,HorizontalTiled1DPixiTrack:$f,HorizontalTiledPlot:eT,HorizontalTrack:eV,Id2DTiledPixiTrack:rG,IdHorizontal1DTiledPixiTrack:sG,IdVertical1DTiledPixiTrack:fG,LeftAxisTrack:bG,MapboxTilesTrack:H8,MoveableTrack:X0,OSMTileIdsTrack:L8,OSMTilesTrack:Am,OverlayTrack:hz,PixiTrack:jn,RasterTilesTrack:F8,SVGTrack:Ka,SquareMarkersTrack:Gz,Tiled1DPixiTrack:Ck,TiledPixiTrack:qa,TopAxisTrack:vG,Track:pc,ValueIntervalTrack:a8,VerticalRule:P8,VerticalTiled1DPixiTrack:cG,VerticalTrack:oV,ViewportTracker2D:l8,ViewportTracker2DPixi:wHe,ViewportTrackerHorizontal:LI,ViewportTrackerVertical:f8},dataFetchers:{DataFetcher:rm,GBKDataFetcher:b7,LocalDataFetcher:T7,getDataFetcher:bLe},factories:{ContextMenuItem:St,DataFetcher:rm,LruCache:lV},services:Yoe,utils:lSe,configs:iY,VERSION:LP},$D={"track-renderer":"_track-renderer_11dwb_1","track-renderer-element":"_track-renderer-element_11dwb_5","track-renderer-events":"_track-renderer-events_11dwb_6"};function F8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,U8e(i.key),i)}}function j8e(e,t,r){return t&&oY(e.prototype,t),r&&oY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function U8e(e){var t=G8e(e,"string");return typeof t=="symbol"?t:String(t)}function G8e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FD(e,t)}function FD(e,t){return FD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},FD(e,t)}function V8e(e){var t=Y8e();return function(){var i=OT(e),n;if(t){var o=OT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return W8e(this,n)}}function W8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lo(e)}function Lo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function OT(e){return OT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},OT(e)}const{getDataFetcher:q8e}=AT.dataFetchers,X8e=100;let jD=function(e){z8e(r,e);var t=V8e(r);function r(i){var n;if(F8e(this,r),n=t.call(this,i),n.dragging=!1,n.element=null,n.eventTracker=null,n.eventTrackerOld=null,n.closing=!1,n.yPositionOffset=0,n.xPositionOffset=0,n.scrollTop=0,n.scrollTimeout=null,n.activeTransitions=0,n.zoomTransform=fn,n.windowScrolledBound=n.windowScrolled.bind(Lo(n)),n.zoomStartedBound=n.zoomStarted.bind(Lo(n)),n.zoomedBound=n.zoomed.bind(Lo(n)),n.zoomEndedBound=n.zoomEnded.bind(Lo(n)),n.uid=xt.nice(),n.viewUid=n.props.uid,n.availableForPlugins={...AT,services:{...AT.services,pubSub:n.props.pubSub,pixiRenderer:n.props.pixiRenderer}},n.mounted=!1,n.emptyZoomBehavior=pk(),n.currentProps=i,n.prevPropsStr="",n.zoomBehavior=pk().filter(o=>!(o.target.classList.contains("no-zoom")||o.target.classList.contains("react-resizable-handle"))).on("start",n.zoomStartedBound).on("zoom",n.zoomedBound).on("end",n.zoomEndedBound),n.zoomTransform=fn,n.prevZoomTransform=fn,n.initialXDomain=[0,1],n.initialYDomain=[0,1],n.xDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],n.yDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],n.zoomLimits=[0,Number.MAX_SAFE_INTEGER],n.prevCenterX=n.currentProps.paddingLeft+n.currentProps.leftWidth+n.currentProps.centerWidth/2,n.prevCenterY=n.currentProps.paddingTop+n.currentProps.topHeight+n.currentProps.centerHeight/2,n.cumCenterXOffset=0,n.cumCenterYOffset=0,n.setUpInitialScales(n.currentProps.initialXDomain,n.currentProps.initialYDomain,n.currentProps.xDomainLimits,n.currentProps.yDomainLimits,n.currentProps.zoomLimits),n.setUpScales(),n.trackDefObjects={},n.metaTracks={},n.pubSubs=[],window.higlassTracksByType)for(const o in window.higlassTracksByType)dr[o]=window.higlassTracksByType[o].config;return n.boundForwardEvent=n.forwardEvent.bind(Lo(n)),n.boundScrollEvent=n.scrollEvent.bind(Lo(n)),n.boundForwardContextMenu=n.forwardContextMenu.bind(Lo(n)),n.dispatchEventBound=n.dispatchEvent.bind(Lo(n)),n.zoomToDataPosHandlerBound=n.zoomToDataPosHandler.bind(Lo(n)),n.onScrollHandlerBound=n.onScrollHandler.bind(Lo(n)),n.elementPos={height:0,width:0,left:0,top:0},n.elementSelection=null,n}return j8e(r,[{key:"xScale",get:function(){if(!this._xScale)throw new Error("xScale is not defined");return this._xScale}},{key:"yScale",get:function(){if(!this._yScale)throw new Error("yScale is not defined");return this._yScale}},{key:"UNSAFE_componentWillMount",value:function(){this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("scroll",this.windowScrolledBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.event",this.dispatchEventBound)),this.pubSubs.push(this.props.pubSub.subscribe("zoomToDataPos",this.zoomToDataPosHandlerBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.scroll",this.onScrollHandlerBound))}},{key:"componentDidMount",value:function(){if(!this.element)throw new Error("Component did not mount, this.element is not defined.");if(this.elementPos=this.element.getBoundingClientRect(),this.elementSelection=Ht(this.element),this.pStage=new He.PIXI.Graphics,this.pMask=new He.PIXI.Graphics,this.pOutline=new He.PIXI.Graphics,this.pBackground=new He.PIXI.Graphics,this.pStage.addChild(this.pMask),this.pStage.addChild(this.pOutline),this.currentProps.pixiStage.addChild(this.pStage),this.pStage.mask=this.pMask,this.props.isRangeSelection||this.addZoom(),!this.currentProps.svgElement||!this.currentProps.canvasElement)return;this.svgElement=this.currentProps.svgElement,this.syncTrackObjects(this.currentProps.positionedTracks),this.syncMetaTracks(this.currentProps.metaTracks),this.currentProps.setCentersFunction(this.setCenter.bind(this)),this.currentProps.registerDraggingChangedListener(this.draggingChanged.bind(this)),this.draggingChanged(!0),this.addEventTracker();const n=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],o=this.svgElement.getBoundingClientRect(),a=[[Math.max(n[0][0],0),Math.max(n[0][1],0)],[Math.min(n[1][0],o.width),Math.min(n[1][1],o.height)]];this.zoomBehavior.extent(a).translateExtent(n).scaleExtent(this.zoomLimits)}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){if(!n.svgElement||!n.canvasElement)return;const o=this.updatablePropsToString(n);if(this.currentProps=n,this.prevPropsStr===o)return;this.setBackground();for(const u in this.trackDefObjects){const l=this.trackDefObjects[u].trackObject;l.delayDrawing=!0}this.prevPropsStr=o,this.setUpInitialScales(n.initialXDomain,n.initialYDomain,n.xDomainLimits,n.yDomainLimits,n.zoomLimits),this.setUpScales(n.width!==this.props.width||n.height!==this.props.height),this.svgElement=n.svgElement;const a=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],s=this.svgElement.getBoundingClientRect(),c=[[Math.max(a[0][0],0),Math.max(a[0][1],0)],[Math.min(a[1][0],s.width),Math.min(a[1][1],s.height)]];this.zoomBehavior.extent(c).translateExtent(a).scaleExtent(this.zoomLimits),this.syncTrackObjects(n.positionedTracks),this.syncMetaTracks(n.metaTracks);for(const u of n.positionedTracks){const l=u.track.options,h=this.trackDefObjects[u.track.uid].trackObject;if(h.rerender(l),by(u.track)){const f={};for(const d of u.track.contents)f[d.uid]=d;for(const d in h.createdTracks)h.createdTracks[d].rerender(f[d].options)}}this.props.onNewTilesLoaded();for(const u in this.trackDefObjects){const l=this.trackDefObjects[u].trackObject;l.delayDrawing=!1,l.draw()}}},{key:"componentDidUpdate",value:function(n){(this.props.initialXDomain[0]!==n.initialXDomain[0]||this.props.initialXDomain[1]!==n.initialXDomain[1]||this.props.initialYDomain[0]!==n.initialYDomain[0]||this.props.initialYDomain[1]!==n.initialYDomain[1])&&this.element&&(this.element.__zoom=fn),n.isRangeSelection!==this.props.isRangeSelection&&(this.props.isRangeSelection?this.removeZoom():this.addZoom()),n.zoomable!==this.props.zoomable&&(this.props.zoomable?this.addZoom():this.removeZoom()),this.addEventTracker()}},{key:"componentWillUnmount",value:function(){var n,o;this.mounted=!1,this.removeTracks(Object.keys(this.trackDefObjects)),this.removeMetaTracks(Object.keys(this.metaTracks)),this.currentProps.removeDraggingChangedListener(this.draggingChanged),this.pStage&&this.currentProps.pixiStage.removeChild(this.pStage),(n=this.pMask)==null||n.destroy(!0),(o=this.pStage)==null||o.destroy(!0),this.pubSubs.forEach(a=>this.props.pubSub.unsubscribe(a)),this.pubSubs=[],this.removeEventTracker()}},{key:"dispatchEvent",value:function(n){n.sourceUid===this.uid&&n.type!=="contextmenu"&&this.element&&hy(n,this.element)}},{key:"isWithin",value:function(n,o){const a=n>=this.elementPos.left&&n<=this.elementPos.width+this.elementPos.left,s=o>=this.elementPos.top&&o<=this.elementPos.height+this.elementPos.top;return a&&s}},{key:"zoomToDataPosHandler",value:function({pos:n,animateTime:o}){this.zoomToDataPos(...n,o)}},{key:"addZoom",value:function(){!this.elementSelection||!this.currentProps.zoomable||(this.elementSelection.call(this.zoomBehavior),this.zoomBehavior.transform(this.elementSelection,this.zoomTransform))}},{key:"removeZoom",value:function(){this.elementSelection&&(this.zoomEnded(),this.elementSelection.on(".zoom",null))}},{key:"setMask",value:function(){var n,o,a,s;(n=this.pMask)==null||n.clear(),(o=this.pMask)==null||o.beginFill(),(a=this.pMask)==null||a.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),(s=this.pMask)==null||s.endFill()}},{key:"setBackground",value:function(){var n,o,a,s,c;const u=this.props.theme===mr?"black":"white",l=it(((n=this.currentProps.viewOptions)==null?void 0:n.backgroundColor)??u);(o=this.pBackground)==null||o.clear(),(a=this.pBackground)==null||a.beginFill(l),(s=this.pBackground)==null||s.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),(c=this.pBackground)==null||c.endFill()}},{key:"windowScrolled",value:function(){this.removeZoom(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.addZoom()},X8e)}},{key:"setUpInitialScales",value:function(n=[0,1],o=[0,1],a=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],s=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],c=[0,Number.MAX_SAFE_INTEGER]){c[0]=c[0]===null?0:c[0],c[1]=c[1]===null?1/0:c[1];const u=n[1]-n[0],l=(o[0]+o[1])/2;if(o[0]=l-u/2,o[1]=l+u/2,n[0]===this.initialXDomain[0]&&n[1]===this.initialXDomain[1]&&o[0]===this.initialYDomain[0]&&o[1]===this.initialYDomain[1]&&a[0]===this.xDomainLimits[0]&&a[1]===this.xDomainLimits[1]&&s[0]===this.yDomainLimits[0]&&s[1]===this.yDomainLimits[1]&&c[0]===this.zoomLimits[0]&&c[1]===this.zoomLimits[1])return;this.initialXDomain=n,this.initialYDomain=o,this.xDomainLimits=a,this.yDomainLimits=s,this.zoomLimits=c,this.zoomTransform=fn,this.prevZoomTransform=fn,this.cumCenterYOffset=0,this.cumCenterXOffset=0,this.drawableToDomainX=bt().domain([this.currentProps.paddingLeft+this.currentProps.leftWidth,this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth]).range([n[0],n[1]]);let h,f;this.currentProps.centerWidth===0?(h=this.currentProps.paddingTop+this.currentProps.topHeight,f=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight):(h=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2-this.currentProps.centerWidth/2,f=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2+this.currentProps.centerWidth/2),this.drawableToDomainY=bt().domain([h,f]).range([o[0],o[1]]),this.prevCenterX=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,this.prevCenterY=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2}},{key:"updatablePropsToString",value:function(n){return JSON.stringify({positionedTracks:n.positionedTracks,initialXDomain:n.initialXDomain,initialYDomain:n.initialYDomain,width:n.width,height:n.height,paddingLeft:n.paddingLeft,paddingTop:n.paddingTop,leftWidth:n.leftWidth,topHeight:n.topHeight,dragging:n.dragging,viewOptions:n.viewOptions})}},{key:"draggingChanged",value:function(n){this.dragging=n,this.timedUpdatePositionAndDimensions()}},{key:"setUpScales",value:function(n=!1){const o=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,a=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2;if(!this.drawableToDomainX||!this.drawableToDomainY)return;const s=(this.drawableToDomainX(o)-this.drawableToDomainX(this.prevCenterX))/this.zoomTransform.k,c=(this.drawableToDomainY(a)-this.drawableToDomainY(this.prevCenterY))/this.zoomTransform.k;this.cumCenterYOffset+=c,this.cumCenterXOffset+=s,this.prevCenterY=a,this.prevCenterX=o;const u=[this.drawableToDomainX(0)-this.cumCenterXOffset,this.drawableToDomainX(this.currentProps.width)-this.cumCenterXOffset],l=[this.drawableToDomainY(0)-this.cumCenterYOffset,this.drawableToDomainY(this.currentProps.height)-this.cumCenterYOffset];this._xScale=bt().domain(u).range([0,this.currentProps.width]),this._yScale=bt().domain(l).range([0,this.currentProps.height]);for(const h in this.trackDefObjects)this.trackDefObjects[h].trackObject.refScalesChanged(this.xScale,this.yScale);this.applyZoomTransform(n)}},{key:"getTrackDef",value:function(n){const o=Wi(this.trackDefObjects);for(const[,{trackDef:a,trackObject:s}]of o){if(s===n)return a.track;if(by(a.track)){for(const c of a.track.contents)if(s.createdTracks[c.uid]===n)return c}}return null}},{key:"getTrackObject",value:function(n){const o=Wi(this.trackDefObjects);for(let a=0;a<o.length;a++){const s=o[a][0],c=o[a][1].trackObject;if(s===n)return c;if(c.createdTracks){const u=Wi(c.createdTracks);for(let l=0;l<u.length;l++){const h=u[l][0],f=u[l][1];if(h===n)return f}}}}},{key:"timedUpdatePositionAndDimensions",value:function(){this.closing||!this.element||(this.elementPos=this.element.getBoundingClientRect(),this.dragging&&(this.yPositionOffset=this.element.getBoundingClientRect().top-this.currentProps.canvasElement.getBoundingClientRect().top+this.scrollTop,this.xPositionOffset=this.element.getBoundingClientRect().left-this.currentProps.canvasElement.getBoundingClientRect().left,this.setMask(),this.setBackground(),this.updateTrackPositions()&&this.applyZoomTransform(!0),requestAnimationFrame(this.timedUpdatePositionAndDimensions.bind(this))))}},{key:"syncMetaTracks",value:function(n){const o=Object.keys(this.metaTracks),a=new Set(n.map(s=>s.uid));this.addMetaTracks(n.filter(s=>!this.metaTracks[s.uid])),this.updateMetaTracks(n.filter(s=>this.metaTracks[s.uid])),this.removeMetaTracks(o.filter(s=>!a.has(s)))}},{key:"syncTrackObjects",value:function(n){this.prevTrackDefinitions=JSON.stringify(n);const o={};for(let h=0;h<n.length;h++)o[n[h].track.uid]=n[h];const a=new Set(Object.keys(this.trackDefObjects)),s=new Set(Object.keys(o)),c=new Set([...s].filter(h=>!a.has(h))),u=new Set([...a].filter(h=>!s.has(h))),l=new Set([...s].filter(h=>a.has(h)));this.updateExistingTrackDefs([...l].map(h=>o[h])),this.addNewTracks([...c].map(h=>o[h])),this.updateExistingTrackDefs([...c].map(h=>o[h])),this.removeTracks([...u])}},{key:"addMetaTracks",value:function(n){n.filter(o=>!this.metaTracks[o.uid]).forEach(o=>{this.metaTracks[o.uid]={trackDef:o,trackObject:this.createMetaTrack(o)}})}},{key:"addNewTracks",value:function(n){if(this.currentProps.pixiStage){for(let o=0;o<n.length;o++){const a=n[o],s=this.createTrackObject(a.track);s.refScalesChanged(this.xScale,this.yScale),this.trackDefObjects[a.track.uid]={trackDef:a,trackObject:s};const c=this.zoomTransform.rescaleX(this.xScale),u=this.zoomTransform.rescaleY(this.yScale);s.setDimensions([a.width,a.height]),s.zoomed(c,u)}this.applyZoomTransform(!1)}}},{key:"updateMetaTracks",value:function(n){}},{key:"updateExistingTrackDefs",value:function(n){for(const a of n){const s=this.trackDefObjects[a.track.uid];s.trackDef=a,by(a.track)&&s.trackObject.updateContents(a.track.contents,this.createTrackObject.bind(this)).refScalesChanged(this.xScale,this.yScale)}this.updateTrackPositions()&&this.applyZoomTransform(!1)}},{key:"updateTrackPositions",value:function(){let n=!1;for(const o in this.trackDefObjects){const a=this.trackDefObjects[o].trackDef,s=this.trackDefObjects[o].trackObject,c=s.position,u=s.dimensions,l=[this.xPositionOffset+a.left,this.yPositionOffset+a.top],h=[a.width,a.height];(!c||l[0]!==c[0]||l[1]!==c[1])&&(s.setPosition(l),n=!0),(!u||h[0]!==u[0]||h[1]!==u[1])&&(s.setDimensions(h),n=!0)}return n}},{key:"removeMetaTracks",value:function(n){n.forEach(o=>{this.metaTracks[o].trackObject.remove(),this.metaTracks[o]=void 0,delete this.metaTracks[o]})}},{key:"removeTracks",value:function(n){for(let o=0;o<n.length;o++){if(this.trackDefObjects[n[o]]==null||this.trackDefObjects[n[o]].trackObject==null)return;try{this.trackDefObjects[n[o]].trackObject.remove(),delete this.trackDefObjects[n[o]]}catch{}}}},{key:"setCenter",value:function(n,o,a,s=!1,c=0,u=this.xScale,l=this.yScale){const f=(this.xScale.invert(1)-this.xScale.invert(0))/a,d=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,p=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,m=d-u(n)*f,g=p-l(o)*f;let v;const _=()=>{const y=fn.translate(m,g).scale(f);this.zoomTransform=y,this.elementSelection&&this.emptyZoomBehavior.transform(this.elementSelection,y),v=this.applyZoomTransform(s)};if(c&&this.elementSelection){let y=this.elementSelection;this.activeTransitions+=1,document.hidden||(y=y.transition().duration(c)),y.call(this.zoomBehavior.transform,fn.translate(m,g).scale(f)).on("end",()=>{_(),this.activeTransitions-=1})}else _();return v}},{key:"valueScaleMove",value:function(n){if(this.zoomStartPos){for(const o of this.getTracksAtPosition(...this.zoomStartPos))o.movedY(n);this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}}},{key:"valueScaleZoom",value:function(n,o){if(!Xoe(n.sourceEvent))return;const a=n.sourceEvent.deltaY,s=n.sourceEvent.deltaMode,u=((h,f)=>h*(f?120:1)/500)(a,s),l=lr(n.sourceEvent,this.props.canvasElement);for(const h of this.getTracksAtPosition(...l)){const f=o==="1d-horizontal"?l[1]-h.position[1]:l[0]-h.position[0];h.zoomedY(f,2**u)}this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}},{key:"zoomed",value:function(n){var o;let a=null;if(this.zoomStartPos){const c=this.getTracksAtPosition(...this.zoomStartPos);if(c.length){const u=c[0],l=this.getTrackDef(u);if(!l)return;(o=dr[l.type])!=null&&o.orientation&&(a=dr[l.type].orientation),u instanceof Oz&&(a="1d-vertical")}}if(a&&n.sourceEvent){if(n.shiftKey||this.valueScaleZooming){if(n.sourceEvent.deltaY!==void 0){this.valueScaleZoom(n,a);return}a==="1d-horizontal"?this.valueScaleMove(n.sourceEvent.movementY):a==="1d-vertical"&&this.valueScaleMove(n.sourceEvent.movementX)}a==="1d-horizontal"&&n.sourceEvent.movementY?this.valueScaleMove(n.sourceEvent.movementY):a==="1d-vertical"&&n.sourceEvent.movementX&&this.valueScaleMove(n.sourceEvent.movementX)}this.zoomTransform=this.currentProps.zoomable?n.transform:fn,this.prevZoomTransform.k!==this.zoomTransform.k||(a==="1d-horizontal"?this.zoomTransform=fn.translate(this.zoomTransform.x,this.prevZoomTransform.y).scale(this.zoomTransform.k):a==="1d-vertical"&&(this.zoomTransform=fn.translate(this.prevZoomTransform.x,this.zoomTransform.y).scale(this.zoomTransform.k)),this.element&&(this.element.__zoom=this.zoomTransform)),this.applyZoomTransform(!0),this.prevZoomTransform=this.zoomTransform,this.props.pubSub.publish("app.zoom",n),n.sourceEvent&&(n.sourceEvent.stopPropagation(),n.sourceEvent.preventDefault())}},{key:"getTracksAtPosition",value:function(n,o){const a=[];let s=[];for(const c in this.trackDefObjects){const u=this.trackDefObjects[c].trackObject;u.childTracks?s=s.concat(u.childTracks):s.push(u)}for(const c of s){const u=c.position[0]<=n&&n<=c.position[0]+c.dimensions[0],l=c.position[1]<=o&&o<=c.position[1]+c.dimensions[1];u&&l&&a.push(c)}return a}},{key:"zoomStarted",value:function(n){this.zooming=!0,n&&n.sourceEvent&&(this.zoomStartPos=lr(n.sourceEvent,this.props.canvasElement),n.sourceEvent.shiftKey&&(this.valueScaleZooming=!0)),this.zoomStartTransform=this.zoomTransform,this.props.pubSub.publish("app.zoomStart")}},{key:"zoomEnded",value:function(){this.zooming=!1,this.zoomStartPos=null,this.valueScaleZooming&&(this.valueScaleZooming=!1,this.element&&(this.element.__zoom=this.zoomStartTransform)),this.props.pubSub.publish("app.zoomEnd")}},{key:"applyZoomTransform",value:function(n=!0){const o=this.currentProps,a=o.paddingLeft+o.leftWidth,s=o.paddingTop+o.topHeight;if(!this.xScale||!this.yScale)return;this.zoomedXScale=this.zoomTransform.rescaleX(this.xScale),this.zoomedYScale=this.zoomTransform.rescaleY(this.yScale);const c=bt().domain([a,a+o.centerWidth].map(this.zoomedXScale.invert)).range([0,o.centerWidth]),u=bt().domain([s,s+o.centerHeight].map(this.zoomedYScale.invert)).range([0,o.centerHeight]);for(const l in this.trackDefObjects){const h=this.trackDefObjects[l].trackObject,f=this.trackDefObjects[l].trackDef;let d="unknown";if(dr[f.track.type]&&(d=dr[f.track.type].orientation),d==="whole"){const p=bt().domain([o.paddingLeft,o.width-o.paddingLeft].map(this.zoomedXScale.invert)).range([0,o.width-2*o.paddingLeft]),m=bt().domain([o.paddingTop,o.height-o.paddingTop].map(this.zoomedYScale.invert)).range([0,o.height-2*o.paddingTop]);h.zoomed(p,m);continue}if(this.trackDefObjects[l].trackDef.track.position==="gallery"){const p=bt().domain([o.paddingLeft+o.leftWidthNoGallery,o.paddingLeft+o.leftWidth+o.centerWidth+o.galleryDim].map(this.zoomedXScale.invert)).range([0,o.centerWidth+2*o.galleryDim]),m=bt().domain([o.paddingTop+o.topHeightNoGallery,o.paddingTop+o.topHeight+o.centerHeight+o.galleryDim].map(this.zoomedYScale.invert)).range([0,o.centerHeight-2*o.galleryDim]);h.zoomed(p.copy(),m.copy(),this.zoomTransform.k);continue}h.zoomed(c.copy(),u.copy(),this.zoomTransform.k,this.zoomTransform.x+this.xPositionOffset,this.zoomTransform.y+this.yPositionOffset,o.paddingLeft+o.leftWidth,o.paddingTop+o.topHeight)}return this.currentXScale=c,this.currentYScale=u,n&&this.currentProps.onScalesChanged(c,u),[c,u]}},{key:"createMetaTrack",value:function(n){switch(n.type){default:{const o=this.props.pluginTracks[n.type];if(o?.isMetaTrack){const a={getTrackObject:this.getTrackObject.bind(this),onNewTilesLoaded:()=>{this.currentProps.onNewTilesLoaded(n.uid)},definition:n};try{return new o.track(this.availableForPlugins,a,n.options)}catch(s){console.error("Plugin meta track",n.type,"failed to instantiate.",s)}}return console.warn(`Unknown meta track of type: ${n.type}`),new n8(this.pStage,{name:"Unknown Track Type",type:n.type})}}}},{key:"createTrackObject",value:function(n){const o=this.createLocationAgnosticTrackObject(n);return(n.position==="left"||n.position==="right")&&dr[n.type].orientation==="1d-horizontal"?new Oz(o):o}},{key:"createLocationAgnosticTrackObject",value:function(n){let o=n.data;o||(o={server:my(n.server),tilesetUid:n.tilesetUid}),n.coordSystem&&(o.coordSystem=n.coordSystem);const a=q8e(o,this.props.pubSub,this.props.pluginDataFetchers,this.availableForPlugins);if(!this.pStage||!this.svgElement)throw new Error("No PIXI stage or svg element");const s={id:n.uid,trackUid:n.uid,trackType:n.type,viewUid:this.viewUid,pubSub:this.props.pubSub,scene:this.pStage,dataConfig:o,dataFetcher:a,getLockGroupExtrema:()=>this.currentProps.getLockGroupExtrema(n.uid),handleTilesetInfoReceived:c=>{this.currentProps.onTilesetInfoReceived(n.uid,c)},animate:()=>{this.currentProps.onNewTilesLoaded(n.uid)},svgElement:this.svgElement,isValueScaleLocked:()=>this.currentProps.isValueScaleLocked(n.uid),onValueScaleChanged:()=>{this.currentProps.onValueScaleChanged(n.uid)},onTrackOptionsChanged:c=>{this.currentProps.onTrackOptionsChanged(n.uid,c)},onMouseMoveZoom:this.props.onMouseMoveZoom,chromInfoPath:n.chromInfoPath,isShowGlobalMousePosition:()=>this.props.isShowGlobalMousePosition,getTheme:()=>this.props.theme};switch(n.y&&(s.yPosition=n.y),n.x&&(s.xPosition=n.x),n.projectionXDomain&&(s.projectionXDomain=n.projectionXDomain),n.projectionYDomain&&(s.projectionYDomain=n.projectionYDomain),n.type){case"left-axis":return new bG(s,n.options);case"top-axis":return new vG(s,n.options);case"heatmap":return new Hf(s,n.options);case"multivec":case"vector-heatmap":case"horizontal-multivec":case"horizontal-vector-heatmap":case"vertical-multivec":case"vertical-vector-heatmap":return new vz(s,n.options);case"1d-heatmap":case"horizontal-1d-heatmap":case"vertical-1d-heatmap":return new Ez(s,n.options);case"line":case"horizontal-line":case"vertical-line":return new Qf(s,n.options);case"point":case"horizontal-point":case"vertical-point":return new mz(s,n.options);case"bar":case"horizontal-bar":case"vertical-bar":return new lI(s,n.options);case"divergent-bar":case"horizontal-divergent-bar":case"vertical-divergent-bar":return new _z(s,n.options);case"horizontal-1d-tiles":return new sG(s,n.options);case"vertical-1d-tiles":return new fG(s,n.options);case"2d-tiles":return new rG(s,n.options);case"stacked-interval":case"top-stacked-interval":case"left-stacked-interval":return new wz(s,n.options);case"viewport-projection-center":return n.registerViewportChanged&&n.removeViewportChanged&&n.setDomainsCallback?(s.registerViewportChanged=n.registerViewportChanged,s.removeViewportChanged=n.removeViewportChanged,s.setDomainsCallback=n.setDomainsCallback,new l8(s,n.options)):new pc(s,{});case"viewport-projection-horizontal":return n.registerViewportChanged&&n.removeViewportChanged&&n.setDomainsCallback?(s.registerViewportChanged=n.registerViewportChanged,s.removeViewportChanged=n.removeViewportChanged,s.setDomainsCallback=n.setDomainsCallback,new LI(s,n.options)):new pc(s,{});case"viewport-projection-vertical":return n.registerViewportChanged&&n.removeViewportChanged&&n.setDomainsCallback?(s.registerViewportChanged=n.registerViewportChanged,s.removeViewportChanged=n.removeViewportChanged,s.setDomainsCallback=n.setDomainsCallback,new f8(s,n.options)):new pc(s,{});case"gene-annotations":case"horizontal-gene-annotations":case"vertical-gene-annotations":return new yI(s,n.options);case"2d-rectangle-domains":case"arrowhead-domains":return new Mz(s,n.options);case"horizontal-1d-annotations":return new EI(s,n.options);case"vertical-1d-annotations":return new EI(s,n.options,!0);case"2d-annotations":return new Hz(s,n.options);case"linear-2d-rectangle-domains":case"horizontal-2d-rectangle-domains":case"vertical-2d-rectangle-domains":return new jz(s,n.options);case"square-markers":return new Gz(s,n.options);case"combined":return s.tracks=n.contents,s.createTrackObject=this.createTrackObject.bind(this),new sw(s);case"2d-chromosome-labels":return new Wz(s,n.options);case"horizontal-chromosome-grid":return s.orientation="1d-horizontal",new bm(s,n.options);case"vertical-chromosome-grid":return s.orientation="1d-vertical",new bm(s,n.options);case"2d-chromosome-grid":return new bm(s,n.options);case"chromosome-labels":case"horizontal-chromosome-labels":case"vertical-chromosome-labels":return new Jz(s,n.options);case"linear-heatmap":case"horizontal-heatmap":case"vertical-heatmap":return new t8(s,n.options);case"2d-chromosome-annotations":return new Xz(s,n.options);case"1d-value-interval":case"horizontal-1d-value-interval":case"vertical-1d-value-interval":return new a8(s,n.options);case"osm":case"osm-tiles":return new Am(s,n.options);case"osm-2d-tile-ids":return new L8(s,n.options);case"mapbox":case"mapbox-tiles":return new H8(s,n.options);case"raster-tiles":return new F8(s,n.options);case"bedlike":case"vertical-bedlike":return new cz(s,n.options);case"overlay-track":return new hz(s,n.options);case"overlay-chromosome-grid-track":return s.isOverlay=!0,new bm(s,n.options);case"horizontal-rule":return new S8(s,n.options);case"vertical-rule":return new P8(s,n.options);case"cross-rule":return s.x=n.x,s.y=n.y,new x8(s,n.options);case"simple-svg":return new Ka(s,n.options);case"empty":{const c=n.options;return new jn(s,c)}default:{const c=this.props.pluginTracks[n.type];if(c&&!c.isMetaTrack){s.AVAILABLE_FOR_PLUGINS=this.availableForPlugins,s.baseEl=this.baseEl,s.definition=n,n.registerViewportChanged&&n.removeViewportChanged&&n.setDomainsCallback&&(s.registerViewportChanged=n.registerViewportChanged,s.removeViewportChanged=n.removeViewportChanged,s.setDomainsCallback=n.setDomainsCallback);try{return new c.track(this.availableForPlugins,s,n.options)}catch(u){console.error("Plugin track",n.type,"failed to instantiate.",u)}}return console.warn("Unknown track type:",n.type),new n8(s,{name:"Unknown Track Type",type:n.type})}}}},{key:"zoomToDataPos",value:function(n,o,a,s,c=3e3,u=null){const[l,h,f]=tn(this.xScale.copy().domain([n,o]),this.yScale.copy().domain([a,s])),d=u?u(this.xScale,this.yScale):[this.xScale,this.yScale];this.setCenter(l,h,f,!1,c,d[0],d[1])}},{key:"forwardContextMenu",value:function(n){this.props.disableTrackMenu||n.altKey||(n.preventDefault(),setTimeout(()=>{this.props.pubSub.publish("contextmenu",n)},0))}},{key:"addEventTracker",value:function(){!this.eventTracker||this.eventTracker===this.eventTrackerOld||(this.eventTrackerOld||(this.eventTrackerOld=this.eventTracker),this.eventTracker=this.eventTrackerOld,this.eventTracker.addEventListener("click",this.boundForwardEvent),this.eventTracker.addEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.addEventListener("dblclick",this.boundForwardEvent),this.eventTracker.addEventListener("wheel",this.boundForwardEvent),this.eventTracker.addEventListener("dragstart",this.boundForwardEvent),this.eventTracker.addEventListener("selectstart",this.boundForwardEvent),this.eventTracker.addEventListener("mouseover",this.boundForwardEvent),this.eventTracker.addEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.addEventListener("mousedown",this.boundForwardEvent),this.eventTracker.addEventListener("mouseup",this.boundForwardEvent),this.eventTracker.addEventListener("mouseout",this.boundForwardEvent),this.eventTracker.addEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.addEventListener("touchstart",this.boundForwardEvent),this.eventTracker.addEventListener("touchend",this.boundForwardEvent),this.eventTracker.addEventListener("touchmove",this.boundForwardEvent),this.eventTracker.addEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerover",this.boundForwardEvent),this.eventTracker.addEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.addEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.addEventListener("pointerup",this.boundForwardEvent),this.eventTracker.addEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerout",this.boundForwardEvent),this.eventTracker.addEventListener("pointerleave",this.boundForwardEvent),window.addEventListener("scroll",this.boundScrollEvent))}},{key:"removeEventTracker",value:function(){this.eventTracker&&(this.eventTracker.removeEventListener("click",this.boundForwardEvent),this.eventTracker.removeEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.removeEventListener("dblclick",this.boundForwardEvent),this.eventTracker.removeEventListener("wheel",this.boundForwardEvent),this.eventTracker.removeEventListener("dragstart",this.boundForwardEvent),this.eventTracker.removeEventListener("selectstart",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseover",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.removeEventListener("mousedown",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseup",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseout",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.removeEventListener("touchstart",this.boundForwardEvent),this.eventTracker.removeEventListener("touchend",this.boundForwardEvent),this.eventTracker.removeEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerover",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerup",this.boundForwardEvent),this.eventTracker.removeEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerout",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerleave",this.boundForwardEvent),window.removeEventListener("scroll",this.boundScrollEvent))}},{key:"scrollEvent",value:function(){this.element&&(this.elementPos=this.element.getBoundingClientRect())}},{key:"forwardEvent",value:function(n){n.sourceUid=this.uid,n.forwarded=!0,this.props.pubSub.publish("app.event",n)}},{key:"onScrollHandler",value:function(n){this.scrollTop=n}},{key:"render",value:function(){return E.createElement("div",{ref:n=>{this.baseEl=n},className:Zt("track-renderer-div",$D["track-renderer"]),style:{height:this.currentProps.height,width:this.currentProps.width}},E.createElement("div",{ref:n=>{this.element=n},className:Zt("track-renderer-element",$D["track-renderer-element"])}),E.createElement("div",{ref:n=>{this.eventTracker=n},className:Zt("track-renderer-events",$D["track-renderer-events"])},this.currentProps.children))}}]),r}(E.Component);jD.defaultProps={pluginDataFetchers:{},pluginTracks:{},canvasElement:null,centerHeight:0,centerWidth:0,children:[],galleryDim:0,height:0,initialXDomain:[],initialYDomain:[],isShowGlobalMousePosition:!1,isRangeSelection:!1,leftWidth:0,leftWidthNoGallery:0,paddingLeft:0,paddingTop:0,positionedTracks:[],topHeight:0,topHeightNoGallery:0,width:0,metaTracks:[]},jD.propTypes={canvasElement:N.object,centerHeight:N.number,centerWidth:N.number,children:N.array,disableTrackMenu:N.bool,galleryDim:N.number,height:N.number,initialXDomain:N.array,initialYDomain:N.array,isShowGlobalMousePosition:N.bool,isRangeSelection:N.bool,leftWidth:N.number,leftWidthNoGallery:N.number,paddingLeft:N.number,paddingTop:N.number,metaTracks:N.array,onMouseMoveZoom:N.func,onNewTilesLoaded:N.func.isRequired,onScalesChanged:N.func.isRequired,pixiRenderer:N.object.isRequired,pixiStage:N.object.isRequired,pluginDataFetchers:N.object,pluginTracks:N.object,positionedTracks:N.array,pubSub:N.object.isRequired,setCentersFunction:N.func,svgElement:N.object.isRequired,theme:N.symbol.isRequired,topHeight:N.number,topHeightNoGallery:N.number,viewOptions:N.object,width:N.number,xDomainLimits:N.array,yDomainLimits:N.array,valueScaleZoom:N.bool,zoomable:N.bool.isRequired,zoomDomain:N.array,uid:N.string,zoomLimits:N.array};const K8e=Mf(hc(jD));var aY={exports:{}};/*! react-checkbox-tree - v1.8.0 | 2022 */(function(e,t){/*! For license information please see index.browser.js.LICENSE.txt */(function(r,i){e.exports=i(E)})(self,r=>(()=>{var i={4184:(s,c)=>{var u;(function(){var l={}.hasOwnProperty;function h(){for(var f=[],d=0;d<arguments.length;d++){var p=arguments[d];if(p){var m=typeof p;if(m==="string"||m==="number")f.push(p);else if(Array.isArray(p)){if(p.length){var g=h.apply(null,p);g&&f.push(g)}}else if(m==="object")if(p.toString===Object.prototype.toString)for(var v in p)l.call(p,v)&&p[v]&&f.push(v);else f.push(p.toString())}}return f.join(" ")}s.exports?(h.default=h,s.exports=h):(u=function(){return h}.apply(c,[]))===void 0||(s.exports=u)})()},8552:(s,c,u)=>{var l=u(852)(u(5639),"DataView");s.exports=l},1989:(s,c,u)=>{var l=u(1789),h=u(401),f=u(7667),d=u(1327),p=u(1866);function m(g){var v=-1,_=g==null?0:g.length;for(this.clear();++v<_;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=h,m.prototype.get=f,m.prototype.has=d,m.prototype.set=p,s.exports=m},8407:(s,c,u)=>{var l=u(7040),h=u(4125),f=u(2117),d=u(7518),p=u(4705);function m(g){var v=-1,_=g==null?0:g.length;for(this.clear();++v<_;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=h,m.prototype.get=f,m.prototype.has=d,m.prototype.set=p,s.exports=m},7071:(s,c,u)=>{var l=u(852)(u(5639),"Map");s.exports=l},3369:(s,c,u)=>{var l=u(4785),h=u(1285),f=u(6e3),d=u(9916),p=u(5265);function m(g){var v=-1,_=g==null?0:g.length;for(this.clear();++v<_;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=h,m.prototype.get=f,m.prototype.has=d,m.prototype.set=p,s.exports=m},3818:(s,c,u)=>{var l=u(852)(u(5639),"Promise");s.exports=l},8525:(s,c,u)=>{var l=u(852)(u(5639),"Set");s.exports=l},8668:(s,c,u)=>{var l=u(3369),h=u(619),f=u(2385);function d(p){var m=-1,g=p==null?0:p.length;for(this.__data__=new l;++m<g;)this.add(p[m])}d.prototype.add=d.prototype.push=h,d.prototype.has=f,s.exports=d},6384:(s,c,u)=>{var l=u(8407),h=u(7465),f=u(3779),d=u(7599),p=u(4758),m=u(4309);function g(v){var _=this.__data__=new l(v);this.size=_.size}g.prototype.clear=h,g.prototype.delete=f,g.prototype.get=d,g.prototype.has=p,g.prototype.set=m,s.exports=g},2705:(s,c,u)=>{var l=u(5639).Symbol;s.exports=l},1149:(s,c,u)=>{var l=u(5639).Uint8Array;s.exports=l},577:(s,c,u)=>{var l=u(852)(u(5639),"WeakMap");s.exports=l},4963:s=>{s.exports=function(c,u){for(var l=-1,h=c==null?0:c.length,f=0,d=[];++l<h;){var p=c[l];u(p,l,c)&&(d[f++]=p)}return d}},4636:(s,c,u)=>{var l=u(2545),h=u(5694),f=u(1469),d=u(4144),p=u(5776),m=u(6719),g=Object.prototype.hasOwnProperty;s.exports=function(v,_){var y=f(v),b=!y&&h(v),T=!y&&!b&&d(v),S=!y&&!b&&!T&&m(v),k=y||b||T||S,O=k?l(v.length,String):[],D=O.length;for(var R in v)!_&&!g.call(v,R)||k&&(R=="length"||T&&(R=="offset"||R=="parent")||S&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||p(R,D))||O.push(R);return O}},2488:s=>{s.exports=function(c,u){for(var l=-1,h=u.length,f=c.length;++l<h;)c[f+l]=u[l];return c}},2908:s=>{s.exports=function(c,u){for(var l=-1,h=c==null?0:c.length;++l<h;)if(u(c[l],l,c))return!0;return!1}},8470:(s,c,u)=>{var l=u(7813);s.exports=function(h,f){for(var d=h.length;d--;)if(l(h[d][0],f))return d;return-1}},8866:(s,c,u)=>{var l=u(2488),h=u(1469);s.exports=function(f,d,p){var m=d(f);return h(f)?m:l(m,p(f))}},4239:(s,c,u)=>{var l=u(2705),h=u(9607),f=u(2333),d=l?l.toStringTag:void 0;s.exports=function(p){return p==null?p===void 0?"[object Undefined]":"[object Null]":d&&d in Object(p)?h(p):f(p)}},9454:(s,c,u)=>{var l=u(4239),h=u(7005);s.exports=function(f){return h(f)&&l(f)=="[object Arguments]"}},939:(s,c,u)=>{var l=u(2492),h=u(7005);s.exports=function f(d,p,m,g,v){return d===p||(d==null||p==null||!h(d)&&!h(p)?d!=d&&p!=p:l(d,p,m,g,f,v))}},2492:(s,c,u)=>{var l=u(6384),h=u(7114),f=u(8351),d=u(6096),p=u(4160),m=u(1469),g=u(4144),v=u(6719),_="[object Arguments]",y="[object Array]",b="[object Object]",T=Object.prototype.hasOwnProperty;s.exports=function(S,k,O,D,R,w){var L=m(S),B=m(k),A=L?y:p(S),M=B?y:p(k),j=(A=A==_?b:A)==b,W=(M=M==_?b:M)==b,K=A==M;if(K&&g(S)){if(!g(k))return!1;L=!0,j=!1}if(K&&!j)return w||(w=new l),L||v(S)?h(S,k,O,D,R,w):f(S,k,A,O,D,R,w);if(!(1&O)){var oe=j&&T.call(S,"__wrapped__"),fe=W&&T.call(k,"__wrapped__");if(oe||fe){var Ae=oe?S.value():S,de=fe?k.value():k;return w||(w=new l),R(Ae,de,O,D,w)}}return!!K&&(w||(w=new l),d(S,k,O,D,R,w))}},8458:(s,c,u)=>{var l=u(3560),h=u(5346),f=u(3218),d=u(346),p=/^\[object .+?Constructor\]$/,m=Function.prototype,g=Object.prototype,v=m.toString,_=g.hasOwnProperty,y=RegExp("^"+v.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");s.exports=function(b){return!(!f(b)||h(b))&&(l(b)?y:p).test(d(b))}},8749:(s,c,u)=>{var l=u(4239),h=u(1780),f=u(7005),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1,s.exports=function(p){return f(p)&&h(p.length)&&!!d[l(p)]}},280:(s,c,u)=>{var l=u(5726),h=u(6916),f=Object.prototype.hasOwnProperty;s.exports=function(d){if(!l(d))return h(d);var p=[];for(var m in Object(d))f.call(d,m)&&m!="constructor"&&p.push(m);return p}},2545:s=>{s.exports=function(c,u){for(var l=-1,h=Array(c);++l<c;)h[l]=u(l);return h}},1717:s=>{s.exports=function(c){return function(u){return c(u)}}},4757:s=>{s.exports=function(c,u){return c.has(u)}},4429:(s,c,u)=>{var l=u(5639)["__core-js_shared__"];s.exports=l},7114:(s,c,u)=>{var l=u(8668),h=u(2908),f=u(4757);s.exports=function(d,p,m,g,v,_){var y=1&m,b=d.length,T=p.length;if(b!=T&&!(y&&T>b))return!1;var S=_.get(d),k=_.get(p);if(S&&k)return S==p&&k==d;var O=-1,D=!0,R=2&m?new l:void 0;for(_.set(d,p),_.set(p,d);++O<b;){var w=d[O],L=p[O];if(g)var B=y?g(L,w,O,p,d,_):g(w,L,O,d,p,_);if(B!==void 0){if(B)continue;D=!1;break}if(R){if(!h(p,function(A,M){if(!f(R,M)&&(w===A||v(w,A,m,g,_)))return R.push(M)})){D=!1;break}}else if(w!==L&&!v(w,L,m,g,_)){D=!1;break}}return _.delete(d),_.delete(p),D}},8351:(s,c,u)=>{var l=u(2705),h=u(1149),f=u(7813),d=u(7114),p=u(8776),m=u(1814),g=l?l.prototype:void 0,v=g?g.valueOf:void 0;s.exports=function(_,y,b,T,S,k,O){switch(b){case"[object DataView]":if(_.byteLength!=y.byteLength||_.byteOffset!=y.byteOffset)return!1;_=_.buffer,y=y.buffer;case"[object ArrayBuffer]":return!(_.byteLength!=y.byteLength||!k(new h(_),new h(y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return f(+_,+y);case"[object Error]":return _.name==y.name&&_.message==y.message;case"[object RegExp]":case"[object String]":return _==y+"";case"[object Map]":var D=p;case"[object Set]":var R=1&T;if(D||(D=m),_.size!=y.size&&!R)return!1;var w=O.get(_);if(w)return w==y;T|=2,O.set(_,y);var L=d(D(_),D(y),T,S,k,O);return O.delete(_),L;case"[object Symbol]":if(v)return v.call(_)==v.call(y)}return!1}},6096:(s,c,u)=>{var l=u(8234),h=Object.prototype.hasOwnProperty;s.exports=function(f,d,p,m,g,v){var _=1&p,y=l(f),b=y.length;if(b!=l(d).length&&!_)return!1;for(var T=b;T--;){var S=y[T];if(!(_?S in d:h.call(d,S)))return!1}var k=v.get(f),O=v.get(d);if(k&&O)return k==d&&O==f;var D=!0;v.set(f,d),v.set(d,f);for(var R=_;++T<b;){var w=f[S=y[T]],L=d[S];if(m)var B=_?m(L,w,S,d,f,v):m(w,L,S,f,d,v);if(!(B===void 0?w===L||g(w,L,p,m,v):B)){D=!1;break}R||(R=S=="constructor")}if(D&&!R){var A=f.constructor,M=d.constructor;A==M||!("constructor"in f)||!("constructor"in d)||typeof A=="function"&&A instanceof A&&typeof M=="function"&&M instanceof M||(D=!1)}return v.delete(f),v.delete(d),D}},1957:(s,c,u)=>{var l=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g;s.exports=l},8234:(s,c,u)=>{var l=u(8866),h=u(9551),f=u(3674);s.exports=function(d){return l(d,f,h)}},5050:(s,c,u)=>{var l=u(7019);s.exports=function(h,f){var d=h.__data__;return l(f)?d[typeof f=="string"?"string":"hash"]:d.map}},852:(s,c,u)=>{var l=u(8458),h=u(7801);s.exports=function(f,d){var p=h(f,d);return l(p)?p:void 0}},9607:(s,c,u)=>{var l=u(2705),h=Object.prototype,f=h.hasOwnProperty,d=h.toString,p=l?l.toStringTag:void 0;s.exports=function(m){var g=f.call(m,p),v=m[p];try{m[p]=void 0;var _=!0}catch{}var y=d.call(m);return _&&(g?m[p]=v:delete m[p]),y}},9551:(s,c,u)=>{var l=u(4963),h=u(479),f=Object.prototype.propertyIsEnumerable,d=Object.getOwnPropertySymbols,p=d?function(m){return m==null?[]:(m=Object(m),l(d(m),function(g){return f.call(m,g)}))}:h;s.exports=p},4160:(s,c,u)=>{var l=u(8552),h=u(7071),f=u(3818),d=u(8525),p=u(577),m=u(4239),g=u(346),v="[object Map]",_="[object Promise]",y="[object Set]",b="[object WeakMap]",T="[object DataView]",S=g(l),k=g(h),O=g(f),D=g(d),R=g(p),w=m;(l&&w(new l(new ArrayBuffer(1)))!=T||h&&w(new h)!=v||f&&w(f.resolve())!=_||d&&w(new d)!=y||p&&w(new p)!=b)&&(w=function(L){var B=m(L),A=B=="[object Object]"?L.constructor:void 0,M=A?g(A):"";if(M)switch(M){case S:return T;case k:return v;case O:return _;case D:return y;case R:return b}return B}),s.exports=w},7801:s=>{s.exports=function(c,u){return c?.[u]}},1789:(s,c,u)=>{var l=u(4536);s.exports=function(){this.__data__=l?l(null):{},this.size=0}},401:s=>{s.exports=function(c){var u=this.has(c)&&delete this.__data__[c];return this.size-=u?1:0,u}},7667:(s,c,u)=>{var l=u(4536),h=Object.prototype.hasOwnProperty;s.exports=function(f){var d=this.__data__;if(l){var p=d[f];return p==="__lodash_hash_undefined__"?void 0:p}return h.call(d,f)?d[f]:void 0}},1327:(s,c,u)=>{var l=u(4536),h=Object.prototype.hasOwnProperty;s.exports=function(f){var d=this.__data__;return l?d[f]!==void 0:h.call(d,f)}},1866:(s,c,u)=>{var l=u(4536);s.exports=function(h,f){var d=this.__data__;return this.size+=this.has(h)?0:1,d[h]=l&&f===void 0?"__lodash_hash_undefined__":f,this}},5776:s=>{var c=/^(?:0|[1-9]\d*)$/;s.exports=function(u,l){var h=typeof u;return!!(l=l??9007199254740991)&&(h=="number"||h!="symbol"&&c.test(u))&&u>-1&&u%1==0&&u<l}},7019:s=>{s.exports=function(c){var u=typeof c;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?c!=="__proto__":c===null}},5346:(s,c,u)=>{var l,h=u(4429),f=(l=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";s.exports=function(d){return!!f&&f in d}},5726:s=>{var c=Object.prototype;s.exports=function(u){var l=u&&u.constructor;return u===(typeof l=="function"&&l.prototype||c)}},7040:s=>{s.exports=function(){this.__data__=[],this.size=0}},4125:(s,c,u)=>{var l=u(8470),h=Array.prototype.splice;s.exports=function(f){var d=this.__data__,p=l(d,f);return!(p<0||(p==d.length-1?d.pop():h.call(d,p,1),--this.size,0))}},2117:(s,c,u)=>{var l=u(8470);s.exports=function(h){var f=this.__data__,d=l(f,h);return d<0?void 0:f[d][1]}},7518:(s,c,u)=>{var l=u(8470);s.exports=function(h){return l(this.__data__,h)>-1}},4705:(s,c,u)=>{var l=u(8470);s.exports=function(h,f){var d=this.__data__,p=l(d,h);return p<0?(++this.size,d.push([h,f])):d[p][1]=f,this}},4785:(s,c,u)=>{var l=u(1989),h=u(8407),f=u(7071);s.exports=function(){this.size=0,this.__data__={hash:new l,map:new(f||h),string:new l}}},1285:(s,c,u)=>{var l=u(5050);s.exports=function(h){var f=l(this,h).delete(h);return this.size-=f?1:0,f}},6e3:(s,c,u)=>{var l=u(5050);s.exports=function(h){return l(this,h).get(h)}},9916:(s,c,u)=>{var l=u(5050);s.exports=function(h){return l(this,h).has(h)}},5265:(s,c,u)=>{var l=u(5050);s.exports=function(h,f){var d=l(this,h),p=d.size;return d.set(h,f),this.size+=d.size==p?0:1,this}},8776:s=>{s.exports=function(c){var u=-1,l=Array(c.size);return c.forEach(function(h,f){l[++u]=[f,h]}),l}},4536:(s,c,u)=>{var l=u(852)(Object,"create");s.exports=l},6916:(s,c,u)=>{var l=u(5569)(Object.keys,Object);s.exports=l},1167:(s,c,u)=>{s=u.nmd(s);var l=u(1957),h=c&&!c.nodeType&&c,f=h&&s&&!s.nodeType&&s,d=f&&f.exports===h&&l.process,p=function(){try{return f&&f.require&&f.require("util").types||d&&d.binding&&d.binding("util")}catch{}}();s.exports=p},2333:s=>{var c=Object.prototype.toString;s.exports=function(u){return c.call(u)}},5569:s=>{s.exports=function(c,u){return function(l){return c(u(l))}}},5639:(s,c,u)=>{var l=u(1957),h=typeof self=="object"&&self&&self.Object===Object&&self,f=l||h||Function("return this")();s.exports=f},619:s=>{s.exports=function(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this}},2385:s=>{s.exports=function(c){return this.__data__.has(c)}},1814:s=>{s.exports=function(c){var u=-1,l=Array(c.size);return c.forEach(function(h){l[++u]=h}),l}},7465:(s,c,u)=>{var l=u(8407);s.exports=function(){this.__data__=new l,this.size=0}},3779:s=>{s.exports=function(c){var u=this.__data__,l=u.delete(c);return this.size=u.size,l}},7599:s=>{s.exports=function(c){return this.__data__.get(c)}},4758:s=>{s.exports=function(c){return this.__data__.has(c)}},4309:(s,c,u)=>{var l=u(8407),h=u(7071),f=u(3369);s.exports=function(d,p){var m=this.__data__;if(m instanceof l){var g=m.__data__;if(!h||g.length<199)return g.push([d,p]),this.size=++m.size,this;m=this.__data__=new f(g)}return m.set(d,p),this.size=m.size,this}},346:s=>{var c=Function.prototype.toString;s.exports=function(u){if(u!=null){try{return c.call(u)}catch{}try{return u+""}catch{}}return""}},7813:s=>{s.exports=function(c,u){return c===u||c!=c&&u!=u}},5694:(s,c,u)=>{var l=u(9454),h=u(7005),f=Object.prototype,d=f.hasOwnProperty,p=f.propertyIsEnumerable,m=l(function(){return arguments}())?l:function(g){return h(g)&&d.call(g,"callee")&&!p.call(g,"callee")};s.exports=m},1469:s=>{var c=Array.isArray;s.exports=c},8612:(s,c,u)=>{var l=u(3560),h=u(1780);s.exports=function(f){return f!=null&&h(f.length)&&!l(f)}},4144:(s,c,u)=>{s=u.nmd(s);var l=u(5639),h=u(5062),f=c&&!c.nodeType&&c,d=f&&s&&!s.nodeType&&s,p=d&&d.exports===f?l.Buffer:void 0,m=(p?p.isBuffer:void 0)||h;s.exports=m},8446:(s,c,u)=>{var l=u(939);s.exports=function(h,f){return l(h,f)}},3560:(s,c,u)=>{var l=u(4239),h=u(3218);s.exports=function(f){if(!h(f))return!1;var d=l(f);return d=="[object Function]"||d=="[object GeneratorFunction]"||d=="[object AsyncFunction]"||d=="[object Proxy]"}},1780:s=>{s.exports=function(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=9007199254740991}},3218:s=>{s.exports=function(c){var u=typeof c;return c!=null&&(u=="object"||u=="function")}},7005:s=>{s.exports=function(c){return c!=null&&typeof c=="object"}},6719:(s,c,u)=>{var l=u(8749),h=u(1717),f=u(1167),d=f&&f.isTypedArray,p=d?h(d):l;s.exports=p},3674:(s,c,u)=>{var l=u(4636),h=u(280),f=u(8612);s.exports=function(d){return f(d)?l(d):h(d)}},8306:(s,c,u)=>{var l=u(3369);function h(f,d){if(typeof f!="function"||d!=null&&typeof d!="function")throw new TypeError("Expected a function");var p=function(){var m=arguments,g=d?d.apply(this,m):m[0],v=p.cache;if(v.has(g))return v.get(g);var _=f.apply(this,m);return p.cache=v.set(g,_)||v,_};return p.cache=new(h.Cache||l),p}h.Cache=l,s.exports=h},479:s=>{s.exports=function(){return[]}},5062:s=>{s.exports=function(){return!1}},2703:(s,c,u)=>{var l=u(414);function h(){}function f(){}f.resetWarningCache=h,s.exports=function(){function d(g,v,_,y,b,T){if(T!==l){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}function p(){return d}d.isRequired=d;var m={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:p,element:d,elementType:d,instanceOf:p,node:d,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:f,resetWarningCache:h};return m.PropTypes=m,m}},5697:(s,c,u)=>{s.exports=u(2703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9787:s=>{s.exports=r}},n={};function o(s){var c=n[s];if(c!==void 0)return c.exports;var u=n[s]={id:s,loaded:!1,exports:{}};return i[s](u,u.exports,o),u.loaded=!0,u.exports}o.n=s=>{var c=s&&s.__esModule?()=>s.default:()=>s;return o.d(c,{a:c}),c},o.d=(s,c)=>{for(var u in c)o.o(c,u)&&!o.o(s,u)&&Object.defineProperty(s,u,{enumerable:!0,get:c[u]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(s,c)=>Object.prototype.hasOwnProperty.call(s,c),o.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.nmd=s=>(s.paths=[],s.children||(s.children=[]),s);var a={};return(()=>{o.r(a),o.d(a,{default:()=>me,expandNodesToLevel:()=>X});var s=o(4184),c=o.n(s),u=o(8446),l=o.n(u),h=o(8306),f=o.n(h);let d=(q=21)=>crypto.getRandomValues(new Uint8Array(q)).reduce((Y,F)=>Y+((F&=63)<36?F.toString(36):F<62?(F-26).toString(36).toUpperCase():F>62?"-":"_"),"");var p=o(5697),m=o.n(p),g=o(9787),v=o.n(g);function _(q){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_(q)}var y=["children","title"];function b(){return b=Object.assign?Object.assign.bind():function(q){for(var Y=1;Y<arguments.length;Y++){var F=arguments[Y];for(var U in F)Object.prototype.hasOwnProperty.call(F,U)&&(q[U]=F[U])}return q},b.apply(this,arguments)}function T(q,Y){if(!(q instanceof Y))throw new TypeError("Cannot call a class as a function")}function S(q,Y){for(var F=0;F<Y.length;F++){var U=Y[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}function k(q,Y){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,U){return F.__proto__=U,F},k(q,Y)}function O(q,Y){if(Y&&(_(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(q)}function D(q){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},D(q)}function R(q,Y,F){return Y in q?Object.defineProperty(q,Y,{value:F,enumerable:!0,configurable:!0,writable:!0}):q[Y]=F,q}var w=function(q){(function(_e,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(pe&&pe.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),pe&&k(_e,pe)})(ge,q);var Y,F,U,se,ve=(U=ge,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _e,pe=D(U);if(se){var be=D(this).constructor;_e=Reflect.construct(pe,arguments,be)}else _e=pe.apply(this,arguments);return O(this,_e)});function ge(){return T(this,ge),ve.apply(this,arguments)}return Y=ge,(F=[{key:"render",value:function(){var _e=this.props,pe=_e.children,be=_e.title,G=function($,re){if($==null)return{};var Te,Se,ze=function(ct,yt){if(ct==null)return{};var Ut,pt,Lt={},tr=Object.keys(ct);for(pt=0;pt<tr.length;pt++)Ut=tr[pt],yt.indexOf(Ut)>=0||(Lt[Ut]=ct[Ut]);return Lt}($,re);if(Object.getOwnPropertySymbols){var Ve=Object.getOwnPropertySymbols($);for(Se=0;Se<Ve.length;Se++)Te=Ve[Se],re.indexOf(Te)>=0||Object.prototype.propertyIsEnumerable.call($,Te)&&(ze[Te]=$[Te])}return ze}(_e,y);return v().createElement("button",b({"aria-label":be,title:be,type:"button"},G),pe)}}])&&S(Y.prototype,F),Object.defineProperty(Y,"prototype",{writable:!1}),ge}(v().PureComponent);R(w,"propTypes",{children:m().node.isRequired,title:m().string}),R(w,"defaultProps",{title:null});const L=w,B={ALL:"all",PARENT:"parent",LEAF:"leaf"};function A(q){this.message=q,this.stack=Error().stack}A.prototype=Object.create(Error.prototype),A.prototype.name="CheckboxTreeError";const M=A;function j(q,Y){var F=Object.keys(q);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(q);Y&&(U=U.filter(function(se){return Object.getOwnPropertyDescriptor(q,se).enumerable})),F.push.apply(F,U)}return F}function W(q,Y,F){return Y in q?Object.defineProperty(q,Y,{value:F,enumerable:!0,configurable:!0,writable:!0}):q[Y]=F,q}function K(q,Y){if(!(q instanceof Y))throw new TypeError("Cannot call a class as a function")}function oe(q,Y){for(var F=0;F<Y.length;F++){var U=Y[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}var fe=B;const Ae=function(){function q(U){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K(this,q),this.props=U,this.flatNodes=se}var Y,F;return Y=q,F=[{key:"setProps",value:function(U){this.props=U}},{key:"clone",value:function(){var U=this,se={};return Object.keys(this.flatNodes).forEach(function(ve){var ge=U.flatNodes[ve];se[ve]=function(_e){for(var pe=1;pe<arguments.length;pe++){var be=arguments[pe]!=null?arguments[pe]:{};pe%2?j(Object(be),!0).forEach(function(G){W(_e,G,be[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(be)):j(Object(be)).forEach(function(G){Object.defineProperty(_e,G,Object.getOwnPropertyDescriptor(be,G))})}return _e}({},ge)}),new q(this.props,se)}},{key:"getNode",value:function(U){return this.flatNodes[U]}},{key:"reset",value:function(){this.flatNodes={}}},{key:"flattenNodes",value:function(U){var se=this,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(Array.isArray(U)&&U.length!==0){var _e=this.props,pe=_e.disabled,be=_e.noCascade;U.forEach(function(G,$){var re=se.nodeHasChildren(G);if(se.flatNodes[G.value]!==void 0)throw new M("Duplicate value '".concat(G.value,"' detected. All node values must be unique."));se.flatNodes[G.value]={label:G.label,value:G.value,children:G.children,parent:ve,isChild:ve.value!==void 0,isParent:re,isLeaf:!re,showCheckbox:G.showCheckbox===void 0||G.showCheckbox,disabled:se.getDisabledState(G,ve,pe,be),treeDepth:ge,index:$},se.flattenNodes(G.children,G,ge+1)})}}},{key:"nodeHasChildren",value:function(U){return Array.isArray(U.children)}},{key:"getDisabledState",value:function(U,se,ve,ge){return!!ve||!(ge||!se.disabled)||!!U.disabled}},{key:"deserializeLists",value:function(U){var se=this,ve=["checked","expanded"];Object.keys(this.flatNodes).forEach(function(ge){ve.forEach(function(_e){se.flatNodes[ge][_e]=!1})}),ve.forEach(function(ge){U[ge].forEach(function(_e){se.flatNodes[_e]!==void 0&&(se.flatNodes[_e][ge]=!0)})})}},{key:"serializeList",value:function(U){var se=this,ve=[];return Object.keys(this.flatNodes).forEach(function(ge){se.flatNodes[ge][U]&&ve.push(ge)}),ve}},{key:"expandAllNodes",value:function(U){var se=this;return Object.keys(this.flatNodes).forEach(function(ve){se.flatNodes[ve].isParent&&(se.flatNodes[ve].expanded=U)}),this}},{key:"toggleChecked",value:function(U,se,ve,ge){var _e=this,pe=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],be=this.flatNodes[U.value],G=[fe.PARENT,fe.ALL].indexOf(ve)>-1,$=[fe.LEAF,fe.ALL].indexOf(ve)>-1;if(be.isLeaf||ge){if(U.disabled)return this;this.toggleNode(U.value,"checked",se)}else(G||be.children.length===0)&&this.toggleNode(U.value,"checked",se),$&&be.children.forEach(function(re){_e.toggleChecked(re,se,ve,ge,!1)});return pe&&!ge&&be.isChild&&G&&this.toggleParentStatus(be.parent,ve),this}},{key:"toggleParentStatus",value:function(U,se){var ve=this.flatNodes[U.value];ve.isChild?(se===fe.ALL&&this.toggleNode(U.value,"checked",this.isEveryChildChecked(ve)),this.toggleParentStatus(ve.parent,se)):this.toggleNode(U.value,"checked",this.isEveryChildChecked(ve))}},{key:"isEveryChildChecked",value:function(U){var se=this;return U.children.every(function(ve){return se.getNode(ve.value).checked})}},{key:"toggleNode",value:function(U,se,ve){return this.flatNodes[U][se]=ve,this}}],F&&oe(Y.prototype,F),Object.defineProperty(Y,"prototype",{writable:!1}),q}();function de(q){return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},de(q)}function Z(){return Z=Object.assign?Object.assign.bind():function(q){for(var Y=1;Y<arguments.length;Y++){var F=arguments[Y];for(var U in F)Object.prototype.hasOwnProperty.call(F,U)&&(q[U]=F[U])}return q},Z.apply(this,arguments)}function ne(q,Y){var F=Object.keys(q);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(q);Y&&(U=U.filter(function(se){return Object.getOwnPropertyDescriptor(q,se).enumerable})),F.push.apply(F,U)}return F}function ue(q,Y){if(!(q instanceof Y))throw new TypeError("Cannot call a class as a function")}function Oe(q,Y){for(var F=0;F<Y.length;F++){var U=Y[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}function Ce(q,Y){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,U){return F.__proto__=U,F},Ce(q,Y)}function je(q,Y){if(Y&&(de(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(q)}function Pe(q){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},Pe(q)}function Ue(q,Y,F){return Y in q?Object.defineProperty(q,Y,{value:F,enumerable:!0,configurable:!0,writable:!0}):q[Y]=F,q}var Ye=function(q){(function(_e,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(pe&&pe.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),pe&&Ce(_e,pe)})(ge,q);var Y,F,U,se,ve=(U=ge,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _e,pe=Pe(U);if(se){var be=Pe(this).constructor;_e=Reflect.construct(pe,arguments,be)}else _e=pe.apply(this,arguments);return je(this,_e)});function ge(){return ue(this,ge),ve.apply(this,arguments)}return Y=ge,F=[{key:"componentDidMount",value:function(){this.updateDeterminateProperty()}},{key:"componentDidUpdate",value:function(){this.updateDeterminateProperty()}},{key:"updateDeterminateProperty",value:function(){var _e=this.props.indeterminate;this.checkbox.indeterminate=_e}},{key:"render",value:function(){var _e=this,pe=function(be){for(var G=1;G<arguments.length;G++){var $=arguments[G]!=null?arguments[G]:{};G%2?ne(Object($),!0).forEach(function(re){Ue(be,re,$[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors($)):ne(Object($)).forEach(function(re){Object.defineProperty(be,re,Object.getOwnPropertyDescriptor($,re))})}return be}({},this.props);return delete pe.indeterminate,v().createElement("input",Z({},pe,{ref:function(be){_e.checkbox=be},type:"checkbox"}))}}],F&&Oe(Y.prototype,F),Object.defineProperty(Y,"prototype",{writable:!1}),ge}(v().PureComponent);Ue(Ye,"propTypes",{indeterminate:m().bool}),Ue(Ye,"defaultProps",{indeterminate:!1});const xe=Ye,qe=m().shape({check:m().node,uncheck:m().node,halfCheck:m().node,expandClose:m().node,expandOpen:m().node,expandAll:m().node,collapseAll:m().node,parentClose:m().node,parentOpen:m().node,leaf:m().node}),We=m().shape({collapseAll:m().string.isRequired,expandAll:m().string.isRequired,toggle:m().string.isRequired});function vt(q){return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},vt(q)}function dt(q,Y){for(var F=0;F<Y.length;F++){var U=Y[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}function Ze(q,Y){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,U){return F.__proto__=U,F},Ze(q,Y)}function Et(q,Y){if(Y&&(vt(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _t(q)}function _t(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function Rt(q){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},Rt(q)}function Kr(q,Y,F){return Y in q?Object.defineProperty(q,Y,{value:F,enumerable:!0,configurable:!0,writable:!0}):q[Y]=F,q}var Mt=function(q){(function(_e,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(pe&&pe.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),pe&&Ze(_e,pe)})(ge,q);var Y,F,U,se,ve=(U=ge,se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _e,pe=Rt(U);if(se){var be=Rt(this).constructor;_e=Reflect.construct(pe,arguments,be)}else _e=pe.apply(this,arguments);return Et(this,_e)});function ge(_e){var pe;return function(be,G){if(!(be instanceof G))throw new TypeError("Cannot call a class as a function")}(this,ge),(pe=ve.call(this,_e)).onCheck=pe.onCheck.bind(_t(pe)),pe.onCheckboxKeyPress=pe.onCheckboxKeyPress.bind(_t(pe)),pe.onCheckboxKeyUp=pe.onCheckboxKeyUp.bind(_t(pe)),pe.onClick=pe.onClick.bind(_t(pe)),pe.onExpand=pe.onExpand.bind(_t(pe)),pe}return Y=ge,(F=[{key:"onCheck",value:function(){var _e=this.props,pe=_e.value;(0,_e.onCheck)({value:pe,checked:this.getCheckState({toggle:!0})})}},{key:"onCheckboxKeyPress",value:function(_e){_e.which===32&&_e.preventDefault()}},{key:"onCheckboxKeyUp",value:function(_e){var pe=_e.keyCode;[13,32].includes(pe)&&this.onCheck()}},{key:"onClick",value:function(){var _e=this.props,pe=_e.expandOnClick,be=_e.isParent,G=_e.value,$=_e.onClick;be&&pe&&this.onExpand(),$({value:G,checked:this.getCheckState({toggle:!1})})}},{key:"onExpand",value:function(){var _e=this.props,pe=_e.expanded,be=_e.value;(0,_e.onExpand)({value:be,expanded:!pe})}},{key:"getCheckState",value:function(_e){var pe=_e.toggle,be=this.props,G=be.checked,$=be.optimisticToggle;return!(G!==0||!pe)||G===1&&!pe||G===2&&$}},{key:"renderCollapseButton",value:function(){var _e=this.props,pe=_e.expandDisabled,be=_e.isLeaf,G=_e.lang;return be?v().createElement("span",{className:"rct-collapse"},v().createElement("span",{className:"rct-icon"})):v().createElement(L,{className:"rct-collapse rct-collapse-btn",disabled:pe,title:G.toggle,onClick:this.onExpand},this.renderCollapseIcon())}},{key:"renderCollapseIcon",value:function(){var _e=this.props,pe=_e.expanded,be=_e.icons,G=be.expandClose,$=be.expandOpen;return pe?$:G}},{key:"renderCheckboxIcon",value:function(){var _e=this.props,pe=_e.checked,be=_e.icons,G=be.uncheck,$=be.check,re=be.halfCheck;return pe===0?G:pe===1?$:re}},{key:"renderNodeIcon",value:function(){var _e=this.props,pe=_e.expanded,be=_e.icon,G=_e.icons,$=G.leaf,re=G.parentClose,Te=G.parentOpen,Se=_e.isLeaf;return be!==null?be:Se?$:pe?Te:re}},{key:"renderBareLabel",value:function(_e){var pe=this.props,be=pe.onClick,G=pe.title,$=be!==null;return v().createElement("span",{className:"rct-bare-label",title:G},$?v().createElement("span",{className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},_e):_e)}},{key:"renderCheckboxLabel",value:function(_e){var pe=this.props,be=pe.checked,G=pe.disabled,$=pe.title,re=pe.treeId,Te=pe.value,Se=pe.onClick!==null,ze="".concat(re,"-").concat(String(Te).split(" ").join("_")),Ve=[v().createElement("label",{key:0,htmlFor:ze,title:$},v().createElement(xe,{checked:be===1,disabled:G,id:ze,indeterminate:be===2,onClick:this.onCheck,onChange:function(){}}),v().createElement("span",{"aria-checked":be===1,"aria-disabled":G,className:"rct-checkbox",role:"checkbox",tabIndex:0,onKeyPress:this.onCheckboxKeyPress,onKeyUp:this.onCheckboxKeyUp},this.renderCheckboxIcon()),Se?null:_e)];return Se&&Ve.push(v().createElement("span",{key:1,className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"link",tabIndex:0},_e)),Ve}},{key:"renderLabel",value:function(){var _e=this.props,pe=_e.label,be=_e.showCheckbox,G=[_e.showNodeIcon?v().createElement("span",{key:0,className:"rct-node-icon"},this.renderNodeIcon()):null,v().createElement("span",{key:1,className:"rct-title"},pe)];return be?this.renderCheckboxLabel(G):this.renderBareLabel(G)}},{key:"renderChildren",value:function(){return this.props.expanded?this.props.children:null}},{key:"render",value:function(){var _e=this.props,pe=_e.className,be=_e.disabled,G=_e.expanded,$=_e.isLeaf,re=c()({"rct-node":!0,"rct-node-leaf":$,"rct-node-parent":!$,"rct-node-expanded":!$&&G,"rct-node-collapsed":!$&&!G,"rct-disabled":be},pe);return v().createElement("li",{className:re},v().createElement("span",{className:"rct-text"},this.renderCollapseButton(),this.renderLabel()),this.renderChildren())}}])&&dt(Y.prototype,F),Object.defineProperty(Y,"prototype",{writable:!1}),ge}(v().PureComponent);Kr(Mt,"propTypes",{checked:m().number.isRequired,disabled:m().bool.isRequired,expandDisabled:m().bool.isRequired,expanded:m().bool.isRequired,icons:qe.isRequired,isLeaf:m().bool.isRequired,isParent:m().bool.isRequired,label:m().node.isRequired,lang:We.isRequired,optimisticToggle:m().bool.isRequired,showNodeIcon:m().bool.isRequired,treeId:m().string.isRequired,value:m().oneOfType([m().string,m().number]).isRequired,onCheck:m().func.isRequired,onExpand:m().func.isRequired,children:m().node,className:m().string,expandOnClick:m().bool,icon:m().node,showCheckbox:m().bool,title:m().string,onClick:m().func}),Kr(Mt,"defaultProps",{children:null,className:null,expandOnClick:!1,icon:null,showCheckbox:!0,title:null,onClick:function(){}});const ke=Mt,te=m().oneOfType([m().arrayOf(m().string),m().arrayOf(m().number)]);function ae(q,Y){var F=Object.keys(q);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(q);Y&&(U=U.filter(function(se){return Object.getOwnPropertyDescriptor(q,se).enumerable})),F.push.apply(F,U)}return F}function ye(q){for(var Y=1;Y<arguments.length;Y++){var F=arguments[Y]!=null?arguments[Y]:{};Y%2?ae(Object(F),!0).forEach(function(U){Q(q,U,F[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(F)):ae(Object(F)).forEach(function(U){Object.defineProperty(q,U,Object.getOwnPropertyDescriptor(F,U))})}return q}function Q(q,Y,F){return Y in q?Object.defineProperty(q,Y,{value:F,enumerable:!0,configurable:!0,writable:!0}):q[Y]=F,q}var he={label:m().node.isRequired,value:m().oneOfType([m().string,m().number]).isRequired,disabled:m().bool,icon:m().node,showCheckbox:m().bool,title:m().string};const we=m().oneOfType([m().shape(he),m().shape(ye(ye({},he),{},{children:m().arrayOf(he).isRequired}))]);function Ie(q){return Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},Ie(q)}function $e(q,Y){var F=Object.keys(q);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(q);Y&&(U=U.filter(function(se){return Object.getOwnPropertyDescriptor(q,se).enumerable})),F.push.apply(F,U)}return F}function Ge(q){for(var Y=1;Y<arguments.length;Y++){var F=arguments[Y]!=null?arguments[Y]:{};Y%2?$e(Object(F),!0).forEach(function(U){sr(q,U,F[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(F)):$e(Object(F)).forEach(function(U){Object.defineProperty(q,U,Object.getOwnPropertyDescriptor(F,U))})}return q}function Xe(q,Y){for(var F=0;F<Y.length;F++){var U=Y[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}function Qe(q,Y){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,U){return F.__proto__=U,F},Qe(q,Y)}function ot(q,Y){if(Y&&(Ie(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ot(q)}function Ot(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function ft(q){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},ft(q)}function sr(q,Y,F){return Y in q?Object.defineProperty(q,Y,{value:F,enumerable:!0,configurable:!0,writable:!0}):q[Y]=F,q}var H=function(q){(function(pe,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function");pe.prototype=Object.create(be&&be.prototype,{constructor:{value:pe,writable:!0,configurable:!0}}),Object.defineProperty(pe,"prototype",{writable:!1}),be&&Qe(pe,be)})(_e,q);var Y,F,U,se,ve,ge=(se=_e,ve=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var pe,be=ft(se);if(ve){var G=ft(this).constructor;pe=Reflect.construct(be,arguments,G)}else pe=be.apply(this,arguments);return ot(this,pe)});function _e(pe){var be;(function($,re){if(!($ instanceof re))throw new TypeError("Cannot call a class as a function")})(this,_e),be=ge.call(this,pe);var G=new Ae(pe);return G.flattenNodes(pe.nodes),G.deserializeLists({checked:pe.checked,expanded:pe.expanded}),be.state={id:pe.id||"rct-".concat(d()),model:G,prevProps:pe},be.onCheck=be.onCheck.bind(Ot(be)),be.onExpand=be.onExpand.bind(Ot(be)),be.onNodeClick=be.onNodeClick.bind(Ot(be)),be.onExpandAll=be.onExpandAll.bind(Ot(be)),be.onCollapseAll=be.onCollapseAll.bind(Ot(be)),be.combineMemorized=f()(function($,re){return Ge(Ge({},$),re)}).bind(Ot(be)),be}return Y=_e,F=[{key:"onCheck",value:function(pe){var be=this.props,G=be.checkModel,$=be.noCascade,re=be.onCheck,Te=this.state.model.clone(),Se=Te.getNode(pe.value);Te.toggleChecked(pe,pe.checked,G,$),re(Te.serializeList("checked"),Ge(Ge({},Se),pe))}},{key:"onExpand",value:function(pe){var be=this.props.onExpand,G=this.state.model.clone(),$=G.getNode(pe.value);G.toggleNode(pe.value,"expanded",pe.expanded),be(G.serializeList("expanded"),Ge(Ge({},$),pe))}},{key:"onNodeClick",value:function(pe){(0,this.props.onClick)(Ge(Ge({},this.state.model.getNode(pe.value)),pe))}},{key:"onExpandAll",value:function(){this.expandAllNodes()}},{key:"onCollapseAll",value:function(){this.expandAllNodes(!1)}},{key:"expandAllNodes",value:function(){var pe=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],be=this.props.onExpand;be(this.state.model.clone().expandAllNodes(pe).serializeList("expanded"))}},{key:"determineShallowCheckState",value:function(pe,be){var G=this.state.model.getNode(pe.value);return G.isLeaf||be||pe.children.length===0?G.checked?1:0:this.isEveryChildChecked(pe)?1:this.isSomeChildChecked(pe)?2:0}},{key:"isEveryChildChecked",value:function(pe){var be=this;return pe.children.every(function(G){return be.state.model.getNode(G.value).checkState===1})}},{key:"isSomeChildChecked",value:function(pe){var be=this;return pe.children.some(function(G){return be.state.model.getNode(G.value).checkState>0})}},{key:"renderTreeNodes",value:function(pe){var be=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=this.props,re=$.expandDisabled,Te=$.expandOnClick,Se=$.icons,ze=$.lang,Ve=$.noCascade,ct=$.onClick,yt=$.onlyLeafCheckboxes,Ut=$.optimisticToggle,pt=$.showNodeTitle,Lt=$.showNodeIcon,tr=this.state,ut=tr.id,jt=tr.model,rr=_e.defaultProps.icons,ir=pe.map(function(Ar){var Gn=Ar.value,Fe=jt.getNode(Ar.value),et=Fe.isParent?be.renderTreeNodes(Ar.children,Ar):null;Fe.checkState=be.determineShallowCheckState(Ar,Ve);var kt=yt?Fe.isLeaf:Fe.showCheckbox;return!G.value||jt.getNode(G.value).expanded?v().createElement(ke,{key:Gn,checked:Fe.checkState,className:Ar.className,disabled:Fe.disabled,expandDisabled:re,expandOnClick:Te,expanded:Fe.expanded,icon:Ar.icon,icons:be.combineMemorized(rr,Se),label:Ar.label,lang:ze,optimisticToggle:Ut,isLeaf:Fe.isLeaf,isParent:Fe.isParent,showCheckbox:kt,showNodeIcon:Lt,title:pt?Ar.title||Ar.label:Ar.title,treeId:ut,value:Ar.value,onCheck:be.onCheck,onClick:ct&&be.onNodeClick,onExpand:be.onExpand},et):null});return v().createElement("ol",null,ir)}},{key:"renderExpandAll",value:function(){var pe=this.props,be=pe.icons,G=be.expandAll,$=be.collapseAll,re=pe.lang;return pe.showExpandAll?v().createElement("div",{className:"rct-options"},v().createElement(L,{className:"rct-option rct-option-expand-all",title:re.expandAll,onClick:this.onExpandAll},G),v().createElement(L,{className:"rct-option rct-option-collapse-all",title:re.collapseAll,onClick:this.onCollapseAll},$)):null}},{key:"renderHiddenInput",value:function(){var pe=this.props,be=pe.name,G=pe.nameAsArray;return be===void 0?null:G?this.renderArrayHiddenInput():this.renderJoinedHiddenInput()}},{key:"renderArrayHiddenInput",value:function(){var pe=this.props,be=pe.checked,G=pe.name;return be.map(function($){var re="".concat(G,"[]");return v().createElement("input",{key:$,name:re,type:"hidden",value:$})})}},{key:"renderJoinedHiddenInput",value:function(){var pe=this.props,be=pe.checked,G=pe.name,$=be.join(",");return v().createElement("input",{name:G,type:"hidden",value:$})}},{key:"render",value:function(){var pe,be=this.props,G=be.direction,$=be.disabled,re=be.iconsClass,Te=be.nodes,Se=be.nativeCheckboxes,ze=this.state.id,Ve=this.renderTreeNodes(Te),ct=c()((sr(pe={"react-checkbox-tree":!0,"rct-disabled":$},"rct-icons-".concat(re),!0),sr(pe,"rct-native-display",Se),sr(pe,"rct-direction-rtl",G==="rtl"),pe));return v().createElement("div",{className:ct,id:ze},this.renderExpandAll(),this.renderHiddenInput(),Ve)}}],U=[{key:"getDerivedStateFromProps",value:function(pe,be){var G=be.model,$=be.prevProps,re=pe.disabled,Te=pe.id,Se=pe.nodes,ze=Ge(Ge({},be),{},{prevProps:pe});return G.setProps(pe),l()($.nodes,Se)&&$.disabled===re||(G.reset(),G.flattenNodes(Se)),Te!==null&&(ze=Ge(Ge({},ze),{},{id:Te})),G.deserializeLists({checked:pe.checked,expanded:pe.expanded}),ze}}],F&&Xe(Y.prototype,F),U&&Xe(Y,U),Object.defineProperty(Y,"prototype",{writable:!1}),_e}(v().Component);function I(q){return function(Y){if(Array.isArray(Y))return x(Y)}(q)||function(Y){if(typeof Symbol<"u"&&Y[Symbol.iterator]!=null||Y["@@iterator"]!=null)return Array.from(Y)}(q)||function(Y,F){if(Y){if(typeof Y=="string")return x(Y,F);var U=Object.prototype.toString.call(Y).slice(8,-1);return U==="Object"&&Y.constructor&&(U=Y.constructor.name),U==="Map"||U==="Set"?Array.from(Y):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?x(Y,F):void 0}}(q)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x(q,Y){(Y==null||Y>q.length)&&(Y=q.length);for(var F=0,U=new Array(Y);F<Y;F++)U[F]=q[F];return U}function X(q,Y){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(F>Y)return[];var U=[];return q.forEach(function(se){se.children&&(U=[].concat(I(U),[se.value],I(X(se.children,Y,F+1))))}),U}sr(H,"propTypes",{nodes:m().arrayOf(we).isRequired,checkModel:m().oneOf([B.LEAF,B.ALL]),checked:te,direction:m().string,disabled:m().bool,expandDisabled:m().bool,expandOnClick:m().bool,expanded:te,icons:qe,iconsClass:m().string,id:m().string,lang:We,name:m().string,nameAsArray:m().bool,nativeCheckboxes:m().bool,noCascade:m().bool,onlyLeafCheckboxes:m().bool,optimisticToggle:m().bool,showExpandAll:m().bool,showNodeIcon:m().bool,showNodeTitle:m().bool,onCheck:m().func,onClick:m().func,onExpand:m().func}),sr(H,"defaultProps",{checkModel:B.LEAF,checked:[],direction:"ltr",disabled:!1,expandDisabled:!1,expandOnClick:!1,expanded:[],icons:{check:v().createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:v().createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:v().createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:v().createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:v().createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:v().createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:v().createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:v().createElement("span",{className:"rct-icon rct-icon-parent-close"}),parentOpen:v().createElement("span",{className:"rct-icon rct-icon-parent-open"}),leaf:v().createElement("span",{className:"rct-icon rct-icon-leaf"})},iconsClass:"fa4",id:null,lang:{collapseAll:"Collapse all",expandAll:"Expand all",toggle:"Toggle"},name:void 0,nameAsArray:!1,nativeCheckboxes:!1,noCascade:!1,onlyLeafCheckboxes:!1,optimisticToggle:!0,showExpandAll:!1,showNodeIcon:!0,showNodeTitle:!1,onCheck:function(){},onClick:null,onExpand:function(){}});const me=H})(),a})())})(aY);var Z8e=aY.exports;const Q8e=ui(Z8e);function J8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t9e(i.key),i)}}function e9e(e,t,r){return t&&sY(e.prototype,t),r&&sY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t9e(e){var t=r9e(e,"string");return typeof t=="symbol"?t:String(t)}function r9e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UD(e,t)}function UD(e,t){return UD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},UD(e,t)}function i9e(e){var t=s9e();return function(){var i=kT(e),n;if(t){var o=kT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return o9e(this,n)}}function o9e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a9e(e)}function a9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kT(e){return kT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kT(e)}let lY=function(e){n9e(r,e);var t=i9e(r);function r(i){var n;J8e(this,r),n=t.call(this,i),n.localTracks=Vl.filter(c=>c.local&&!c.hidden).map(c=>{const u={...c};return u.datatype=c.datatype[0],u}),n.augmentedTracksInfo=Vl,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(c=>{n.augmentedTracksInfo.push(window.higlassTracksByType[c].config)}),i.datatype?n.localTracks=n.localTracks.filter(c=>c.datatype[0]===i.datatype):n.localTracks=n.localTracks.filter(c=>c.orientation===n.props.orientation),n.localTracks.forEach(c=>{c.uuid=xt.nice()});const o=n.prepareNewEntries("",n.localTracks,{}),a=Object.keys(o),s=a.length?[a[0]]:null;return n.mounted=!1,n.state={selectedUuid:s,options:o,filter:"",checked:[],expanded:[]},n.requestTilesetLists(),n}return e9e(r,[{key:"componentDidMount",value:function(){this.mounted=!0,this.requestTilesetLists(),this.searchBox.focus()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"prepareNewEntries",value:function(n,o,a){const s=a;return o.map(u=>({...u,server:n,tilesetUid:u.uuid,serverUidKey:this.serverUidKey(n,u.uuid),datatype:u.datatype,name:u.name,uid:xt.nice()})).forEach(u=>{s[u.serverUidKey]=u}),s}},{key:"serverUidKey",value:function(n,o){return`${n}/${o}`}},{key:"requestTilesetLists",value:function(){let n=null;if(this.props.datatype?n=`dt=${this.props.datatype}`:n=[...new Set([].concat(...this.augmentedTracksInfo.filter(a=>a.datatype).filter(a=>a.orientation===this.props.orientation||this.props.orientation==="1d-vertical"&&a.orientation==="1d-horizontal").map(a=>a.datatype)))].map(a=>`dt=${a}`).join("&"),!this.props.trackSourceServers){console.warn("No track source servers specified in the viewconf");return}this.props.trackSourceServers.forEach(o=>{at.json(`${o}/tilesets/?limit=10000&${n}`,(a,s)=>{if(a)console.error("ERROR:",a);else{const c=this.prepareNewEntries(o,s.results,this.state.options),u=Object.keys(c);let{selectedUuid:l}=this.state;if(!l){l=u.length?[u[0]]:null;const h=this.state.options[l[0]];this.props.selectedTilesetChanged([h])}this.mounted&&this.setState({selectedUuid:l,options:c})}},this.props.pubSub)})}},{key:"handleOptionDoubleClick",value:function(n){const o=this.state.options[n.target.value];this.props.onDoubleClick(o)}},{key:"handleSelectedOptions",value:function(n){const o=[],a=[];for(let s=0;s<n.length;s++)o.push(n[s]),a.push(this.state.options[n[s]]);this.props.selectedTilesetChanged(a),this.setState({selectedUuid:o})}},{key:"handleSelect",value:function(){const{selectedOptions:n}=this.multiSelect,o=[];for(let a=0;a<n.length;a++){const s=n[a];o.push(s.value)}this.handleSelectedOptions(o)}},{key:"handleSearchChange",value:function(){const n=this.searchBox;this.setState({filter:n.value})}},{key:"partitionByGroup",value:function(n,o){const a={"":{name:"",value:"",children:[]}};for(const c of Object.keys(n)){const u=n[c];if(u.name.toLowerCase().includes(o))if("project_name"in u){const l=u.project_name;l in a||(a[l]={value:l,label:l,children:[]}),a[l].children.push({label:u.name,value:c})}else a[""].children.push({label:u.name,value:c})}const s=a[""].children;for(const c of Object.keys(a))c!==""&&(a[c].children.sort((u,l)=>u.label.toLowerCase().localeCompare(l.label.toLowerCase(),"en")),s.push(a[c]));return s.sort((c,u)=>c.label.toLowerCase().localeCompare(u.label.toLowerCase(),"en")),s}},{key:"handleChecked",value:function(n){this.handleSelectedOptions(n),this.setState({checked:n})}},{key:"handleExpanded",value:function(n){this.setState({expanded:n})}},{key:"render",value:function(){const n=[];for(const u in this.state.options)n.push(this.state.options[u]);const o=this.partitionByGroup(this.state.options,this.state.filter),a={width:15,height:15,top:2,right:2,position:"relative"},s=JSON.parse(JSON.stringify(a));s.opacity=.5;const c=E.createElement("form",{onSubmit:u=>{u.preventDefault()}},E.createElement("div",{className:"tileset-finder-search-bar"},E.createElement("span",{className:"tileset-finder-label"},"Select tileset:"),E.createElement("input",{ref:u=>{this.searchBox=u},className:"tileset-finder-search-box",onChange:this.handleSearchChange.bind(this),placeholder:"Search Term",type:"text"})),E.createElement("div",{className:"tileset-finder-checkbox-tree"},E.createElement(Q8e,{checked:this.state.checked,expanded:this.state.expanded,icons:{uncheck:E.createElement("svg",{style:a},E.createElement("use",{xlinkHref:"#square_o"})),check:E.createElement("svg",{style:a},E.createElement("use",{xlinkHref:"#check_square_o"})),halfCheck:E.createElement("svg",{style:s},E.createElement("use",{xlinkHref:"#check_square_o"})),leaf:E.createElement("svg",{style:a},E.createElement("use",{xlinkHref:"#file_o"})),expandClose:E.createElement("svg",{style:a},E.createElement("use",{xlinkHref:"#chevron_right"})),expandOpen:E.createElement("svg",{style:a},E.createElement("use",{xlinkHref:"#chevron_down"})),parentClose:E.createElement("svg",{style:a},E.createElement("use",{xlinkHref:"#folder_o"})),parentOpen:E.createElement("svg",{style:a},E.createElement("use",{xlinkHref:"#folder_open_o"}))},nodes:o,onCheck:this.handleChecked.bind(this),onExpand:this.handleExpanded.bind(this)})));return E.createElement("div",null,c)}}]),r}(E.Component);lY.propTypes={datatype:N.string,orientation:N.string,onDoubleClick:N.func,pubSub:N.object.isRequired,selectedTilesetChanged:N.func,trackSourceServers:N.array};const l9e=Mf(lY);function c9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f9e(i.key),i)}}function u9e(e,t,r){return t&&cY(e.prototype,t),r&&cY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f9e(e){var t=h9e(e,"string");return typeof t=="symbol"?t:String(t)}function h9e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GD(e,t)}function GD(e,t){return GD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},GD(e,t)}function p9e(e){var t=v9e();return function(){var i=IT(e),n;if(t){var o=IT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return m9e(this,n)}}function m9e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g9e(e)}function g9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function IT(e){return IT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},IT(e)}let uY=function(e){d9e(r,e);var t=p9e(r);function r(i){var n;return c9e(this,r),n=t.call(this,i),n.DATATYPE_TO_TRACK_TYPE=zS(n.props.orientation),n.AVAILABLE_TRACK_TYPES=fy(n.props.datatypes,n.props.orientation),n.state={selectedPlotType:n.AVAILABLE_TRACK_TYPES[0]},n}return u9e(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(n){if(this.AVAILABLE_TRACK_TYPES=fy(n.datatypes,this.props.orientation),!!this.AVAILABLE_TRACK_TYPES&&n.allTracksSameDatatype&&this.AVAILABLE_TRACK_TYPES.length>0&&!this.AVAILABLE_TRACK_TYPES.includes(this.state.selectedPlotType)){const o=WS(n.datatypes[0][0],this.props.position,this.AVAILABLE_TRACK_TYPES);this.handlePlotTypeSelected(o)}}},{key:"handlePlotTypeSelected",value:function(n){this.setState({selectedPlotType:n}),this.props.onPlotTypeSelected(n.type)}},{key:"render",value:function(){let n="No plot types available for track";const o={};return Vl.forEach(a=>{o[a.type]=a}),this.AVAILABLE_TRACK_TYPES&&(n=this.AVAILABLE_TRACK_TYPES.sort((a,s)=>a.type<s.type).map(a=>{const s=o[a.type].thumbnail,c=this.state.selectedPlotType.type===a.type?"plot-type-item plot-type-selected":"plot-type-item",u=o[a.type].thumbnail?E.createElement("div",{className:"track-thumbnail",dangerouslySetInnerHTML:{__html:s.outerHTML}}):E.createElement("div",{className:"track-thumbnail"},E.createElement("svg",{height:20,width:30}));return E.createElement("li",{key:a.type,className:c,onClick:l=>{this.setState({selectedPlotType:a}),this.props.onPlotTypeSelected(a.type)},style:{listStyle:"none",paddingLeft:5,paddingBottom:0}},u,E.createElement("span",{style:{verticalAlign:"middle"}},a.type))})),E.createElement("div",null,n.length>0&&this.props.allTracksSameDatatype&&E.createElement("div",{className:"plot-type-container"},n),!this.props.allTracksSameDatatype&&E.createElement("div",{className:"plot-type-container-empty"},"Datasets with multiple datatypes chosen. They will be added with their default track types."))}}]),r}(E.Component);uY.propTypes={allTracksSameDatatype:N.bool,datatypes:N.array,orientation:N.string,onPlotTypeSelected:N.func,position:N.string};const GXe={"collapse-toggle-icon":"_collapse-toggle-icon_ub7s6_1",collapsed:"_collapsed_ub7s6_9","modal-title":"_modal-title_ub7s6_14","modal-container":"_modal-container_ub7s6_19",modal:"_modal_ub7s6_14","modal-backdrop":"_modal-backdrop_ub7s6_23","modal-dialog":"_modal-dialog_ub7s6_27"};function y9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_9e(i.key),i)}}function b9e(e,t,r){return t&&fY(e.prototype,t),r&&fY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _9e(e){var t=T9e(e,"string");return typeof t=="symbol"?t:String(t)}function T9e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zD(e,t)}function zD(e,t){return zD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},zD(e,t)}function S9e(e){var t=A9e();return function(){var i=PT(e),n;if(t){var o=PT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return w9e(this,n)}}function w9e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CT(e)}function CT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function PT(e){return PT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},PT(e)}let DT=function(e){E9e(r,e);var t=S9e(r);function r(i){var n;return y9e(this,r),n=t.call(this,i),n.options={},n.state={selectedTilesets:[{datatype:"none"}],allTracksSameDatatype:!0},n.handleSubmitBound=n.handleSubmit.bind(CT(n)),n.handleTilesetPickerDoubleClickBound=n.handleTilesetPickerDoubleClick.bind(CT(n)),n.selectedTilesetsChangedBound=n.selectedTilesetsChanged.bind(CT(n)),n}return b9e(r,[{key:"getOrientation",value:function(n){let o=null;return n==="top"||n==="bottom"?o="1d-horizontal":n==="left"||n==="right"?o="1d-vertical":o="2d",o}},{key:"handleSubmit",value:function(n){n&&n.preventDefault(),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleTilesetPickerDoubleClick",value:function(n){this.selectedTilesetsChanged([n]),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleOptionsChanged",value:function(n){this.options=n}},{key:"handlePlotTypeSelected",value:function(n){const{selectedTilesets:o}=this.state;for(const a of o)a.type=n;this.selectedPlotType=n,this.setState({selectedTilesets:o})}},{key:"selectedTilesetsChanged",value:function(n){let o=null;n.length===0?o=[{datatype:"none"}]:o=n;let a=!0;const s=o[0].datatype;for(const c of o)c.datatype!==s&&(a=!1);if(a)for(const c of o)c.type=this.selectedPlotType;else for(const c of o){let u=[c.datatype];const l=this.getOrientation(this.props.position);c.filetype==="cooler"&&(u=[c.datatype,"chromsizes"]);const h=fy([u],l),f=WS(u[0],this.props.position,h);c.type=f.type}this.setState({selectedTilesets:o,allTracksSameDatatype:a})}},{key:"render",value:function(){const n=this.getOrientation(this.props.position),o=E.createElement("div",null,E.createElement(l9e,{ref:a=>{this.tilesetFinder=a},datatype:this.props.datatype,onDoubleClick:this.handleTilesetPickerDoubleClick.bind(this),onTracksChosen:a=>this.props.onTracksChosen(a,this.props.position),orientation:n,selectedTilesetChanged:this.selectedTilesetsChanged.bind(this),trackSourceServers:this.props.trackSourceServers}));return E.createElement(lg,{maxHeight:!0,okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Add Track"},E.createElement(E.Fragment,null,o,E.createElement(uY,{ref:a=>{this.plotTypeChooser=a},allTracksSameDatatype:this.state.allTracksSameDatatype,datatypes:this.state.selectedTilesets.map(a=>a.filetype==="cooler"?[a.datatype,"chromsizes"]:[a.datatype]),onPlotTypeSelected:this.handlePlotTypeSelected.bind(this),orientation:n,position:this.props.position})))}}]),r}(E.Component);DT.defaultProps={position:"top"},DT.propTypes={datatype:N.string,host:N.string,onCancel:N.func.isRequired,onTracksChosen:N.func.isRequired,position:N.string,trackSourceServers:N.array.isRequired};function VD(){return VD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},VD.apply(this,arguments)}function O9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,I9e(i.key),i)}}function k9e(e,t,r){return t&&hY(e.prototype,t),r&&hY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function I9e(e){var t=C9e(e,"string");return typeof t=="symbol"?t:String(t)}function C9e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WD(e,t)}function WD(e,t){return WD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},WD(e,t)}function D9e(e){var t=R9e();return function(){var i=xT(e),n;if(t){var o=xT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return x9e(this,n)}}function x9e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N9e(e)}function N9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xT(e){return xT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xT(e)}let YD=function(e){P9e(r,e);var t=D9e(r);function r(){return O9e(this,r),t.apply(this,arguments)}return k9e(r,[{key:"render",value:function(){const n=[];return this.props.children.forEach((o,a)=>{const s=`customTrackDialog_${a}`;n.push(E.createElement(o,VD({key:s},this.props.bodyProps[a])))}),E.createElement(lg,{maxHeight:!0,okayOnly:!0,okayTitle:"Close",onCancel:this.props.onCancel,onOkay:this.props.onCancel,title:this.props.title},n)}}]),r}(E.PureComponent);YD.defaultProps={},YD.propTypes={onCancel:N.func.isRequired,title:N.string,bodyProps:N.array,children:N.array};function M9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,B9e(i.key),i)}}function L9e(e,t,r){return t&&dY(e.prototype,t),r&&dY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function B9e(e){var t=H9e(e,"string");return typeof t=="symbol"?t:String(t)}function H9e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qD(e,t)}function qD(e,t){return qD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},qD(e,t)}function F9e(e){var t=G9e();return function(){var i=NT(e),n;if(t){var o=NT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return j9e(this,n)}}function j9e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U9e(e)}function U9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function NT(e){return NT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},NT(e)}const pY=20;let pl=function(e){$9e(r,e);var t=F9e(r);function r(i){var n;return M9e(this,r),n=t.call(this,i),n.adjusted=!1,n.state={orientation:n.props.orientation?n.props.orientation:"right",left:n.props.position.left,top:n.props.position.top,submenuShown:null},n}return L9e(r,[{key:"componentDidMount",value:function(){this.updateOrientation()}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){this.adjusted=!1,this.setState({left:n.position.left,top:n.position.top})}},{key:"componentDidUpdate",value:function(){this.updateOrientation()}},{key:"handleItemMouseEnterWithRect",value:function(n,o){this.setState({submenuShown:o,submenuSourceBbox:n})}},{key:"handleItemMouseEnter",value:function(n,o){this.handleItemMouseEnterWithRect(n.currentTarget.getBoundingClientRect(),o)}},{key:"handleMouseLeave",value:function(){}},{key:"handleOtherMouseEnter",value:function(){this.setState({submenuShown:null})}},{key:"updateOrientation",value:function(){if(this.adjusted)return;this.adjusted=!0,this.divDom=Br.findDOMNode(this.div);const n=this.divDom.getBoundingClientRect(),o=this.props.parentBbox?this.props.parentBbox:{top:this.props.position.top,left:this.props.position.left,width:0,height:0};let a=this.state.orientation,s=o.top;if(o.top+n.height>window.innerHeight&&(o.top-n.height>0?s=o.top-n.height+pY:(s=o.top-n.height+pY,s-=s+n.height-window.innerHeight)),this.state.orientation==="left"){let c=o.left-n.width;c<0&&(o.left+o.width+n.width>window.innerWidth?c=0:(c=o.left+o.width,a="right")),this.setState({left:c,top:s,orientation:a})}else{let c=o.left+o.width;o.left+o.width+n.width>window.innerWidth&&(o.left-n.width<0?(c=0,a="right"):(c=o.left-n.width,a="left")),this.setState({left:c,top:s,orientation:a})}}},{key:"render",value:function(){const n=this.state.left?{left:this.state.left}:{right:this.state.right},o={top:this.state.top},a=Object.assign(n,o);return E.createElement("div",{ref:s=>{this.div=s},className:Zt("context-menu-item",mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===mr}),style:a},this.props.children)}}]),r}(E.Component);pl.propTypes={children:N.node,orientation:N.string,parentBbox:N.object,position:N.object,theme:N.symbol.isRequired};function z9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,W9e(i.key),i)}}function V9e(e,t,r){return t&&mY(e.prototype,t),r&&mY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function W9e(e){var t=Y9e(e,"string");return typeof t=="symbol"?t:String(t)}function Y9e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XD(e,t)}function XD(e,t){return XD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},XD(e,t)}function X9e(e){var t=Q9e();return function(){var i=RT(e),n;if(t){var o=RT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return K9e(this,n)}}function K9e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z9e(e)}function Z9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function RT(e){return RT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},RT(e)}let KD=function(e){q9e(r,e);var t=X9e(r);function r(){return z9e(this,r),t.apply(this,arguments)}return V9e(r,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const n=this.state.submenuSourceBbox,o=this.state.orientation==="left"?{left:this.state.left,top:n.top}:{left:this.state.left+n.width+7,top:n.top},a=this.state.submenuShown;return E.createElement(r,{menuItems:a.children,orientation:this.state.orientation,parentBbox:n,position:o,theme:this.props.theme})}return E.createElement("div",null)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){const n=[];for(const o in this.props.menuItems){const a=this.props.menuItems[o];n.push(E.createElement(St,{key:o,onClick:a.handler?a.handler:()=>null,onMouseEnter:a.children?s=>this.handleItemMouseEnter(s,a):this.handleOtherMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave},a.name,a.children&&E.createElement("svg",{className:mt["play-icon"]},E.createElement("use",{xlinkHref:"#play"}))))}return E.createElement("div",{ref:o=>{this.div=o},className:Zt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===mr}),style:{left:this.state.left,top:this.state.top}},n,this.getSubmenu())}}]),r}(pl);function J9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t7e(i.key),i)}}function e7e(e,t,r){return t&&gY(e.prototype,t),r&&gY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t7e(e){var t=r7e(e,"string");return typeof t=="symbol"?t:String(t)}function r7e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZD(e,t)}function ZD(e,t){return ZD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},ZD(e,t)}function i7e(e){var t=s7e();return function(){var i=MT(e),n;if(t){var o=MT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return o7e(this,n)}}function o7e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a7e(e)}function a7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function MT(e){return MT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},MT(e)}let l7e=function(e){n7e(r,e);var t=i7e(r);function r(){return J9e(this,r),t.apply(this,arguments)}return e7e(r,[{key:"getConfigureSeriesMenu",value:function(n,o,a){const s={},c=window.higlassTracksByType&&window.higlassTracksByType[a.type]&&window.higlassTracksByType[a.type].config&&window.higlassTracksByType[a.type].config.optionsInfo;if(c)for(const u of Object.keys(c))wn[u]=c[u];if(!dr[a.type]||!dr[a.type].availableOptions)return null;for(const u of dr[a.type].availableOptions)if(u in wn){if(s[u]={name:wn[u].name},wn[u].generateOptions){const l=wn[u].generateOptions(a);s[u].children||(s[u].children={});for(const h of l){const f={name:h.name,value:h.value,handler:()=>{a.options[u]=h.value,this.props.onTrackOptionsChanged(a.uid,a.options),this.props.closeMenu()}};s[u].children[h.value]=f}}if(wn[u].inlineOptions)for(const l in wn[u].inlineOptions){const h=wn[u].inlineOptions[l];s[u].children||(s[u].children={});const f={name:h.name,value:h.value};h.componentPickers&&h.componentPickers[a.type]?f.handler=()=>{this.props.onConfigureTrack(a,h.componentPickers[a.type]),this.props.closeMenu()}:f.handler=()=>{a.options[u]=h.value,this.props.onTrackOptionsChanged(a.uid,a.options),this.props.closeMenu()},s[u].children[l]=f}else wn[u].componentPickers&&wn[u].componentPickers[a.type]&&(s[u].handler=()=>{this.props.onConfigureTrack(a,wn[u].componentPickers[a.type]),this.props.closeMenu()})}return E.createElement(KD,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:s,orientation:this.state.orientation,parentBbox:o,position:n,theme:this.props.theme})}},{key:"getTrackTypeItems",value:function(n,o,a){window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(h=>{dr[h]=window.higlassTracksByType[h].config});let{datatype:s}=a,c=null;a.type in dr&&(s||(s=dr[a.type].datatype[0]),{orientation:c}=dr[a.type]);const u=Object.values(dr).filter(h=>h.datatype).filter(h=>h.orientation).filter(h=>h.datatype.includes(s)).filter(h=>h.orientation===c).map(h=>h.type),l={};for(let h=0;h<u.length;h++)l[u[h]]={value:u[h],name:u[h],handler:()=>{this.props.onChangeTrackType(a.uid,u[h])}};return E.createElement(KD,{key:"track-type-items",closeMenu:this.props.closeMenu,menuItems:l,orientation:this.state.orientation,parentBbox:o,position:n,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const n=this.state.submenuSourceBbox,o=this.state.orientation==="left"?{left:this.state.left,top:n.top}:{left:this.state.left+n.width+7,top:n.top},a=this.state.submenuShown,s=a.value;return a.option==="track-type"?this.getTrackTypeItems(o,n,s):this.getConfigureSeriesMenu(o,n,s)}return E.createElement("div",null)}},{key:"getDivideByMenuItem",value:function(){if(this.props.series.data&&this.props.series.data.type==="divided"){const n={tilesetUid:this.props.series.data.children[0].tilesetUid,server:this.props.series.data.children[0].server};return E.createElement(St,{className:mt["context-menu-item"],onClick:()=>this.props.onChangeTrackData(this.props.series.uid,n),onMouseEnter:o=>this.handleOtherMouseEnter(o)},E.createElement("span",{className:mt["context-menu-span"]},"Remove divisor"))}return E.createElement(St,{className:mt["context-menu-item"],onClick:()=>this.props.onAddDivisor(this.props.series),onMouseEnter:n=>this.handleOtherMouseEnter(n)},E.createElement("span",{className:mt["context-menu-span"]},"Divide by"))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){let n=null;dr[this.props.series.type]&&dr[this.props.series.type].exportable&&(n=E.createElement(St,{className:mt["context-menu-item"],onClick:()=>this.props.onExportData(this.props.hostTrack.uid,this.props.track.uid),onMouseEnter:a=>this.handleOtherMouseEnter(a)},E.createElement("span",{className:mt["context-menu-span"]},"Export Data")));const o=this.props.onAddSeries?E.createElement(St,{className:mt["context-menu-item"],onClick:()=>{this.props.onCloseTrack(this.props.series.uid),this.props.onAddSeries(this.props.hostTrack.uid)},onMouseEnter:a=>this.handleOtherMouseEnter(a)},E.createElement("span",{className:mt["context-menu-span"]},"Replace Series")):null;return E.createElement("div",{ref:a=>{this.div=a},className:Zt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===mr}),"data-menu-type":"SeriesListMenu",onMouseLeave:this.props.handleMouseLeave,style:{left:this.state.left,top:this.state.top}},E.createElement(St,{onClick:()=>{},onMouseEnter:a=>this.handleItemMouseEnter(a,{option:"configure-series",value:this.props.track}),onMouseLeave:a=>this.handleMouseLeave(a)},"Configure Series",E.createElement("svg",{className:mt["play-icon"]},E.createElement("use",{xlinkHref:"#play"}))),E.createElement(St,{className:mt["context-menu-item"],onClick:()=>{},onMouseEnter:a=>this.handleItemMouseEnter(a,{option:"track-type",value:this.props.track}),onMouseLeave:a=>this.handleMouseLeave(a)},E.createElement("span",{className:mt["context-menu-span"]},"Track Type",E.createElement("svg",{className:mt["play-icon"]},E.createElement("use",{xlinkHref:"#play"})))),n,this.getDivideByMenuItem(),E.createElement(St,{className:mt["context-menu-item"],onClick:this.props.onCloseTrack,onMouseEnter:a=>this.handleOtherMouseEnter(a)},E.createElement("span",{className:mt["context-menu-span"]},"Close Series")),o,this.getSubmenu())}}]),r}(pl);const vY=e=>{let t=[];for(const r of e)r.contents?t=t.concat(r.contents):t.push(r);return t},QD=(e,t,r,i)=>e?(window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(n=>{dr[n]=window.higlassTracksByType[n].config}),vY(e).map(n=>{const o=dr[n.type]?dr[n.type].thumbnail:null,a=o?E.createElement("div",{className:mt["context-menu-icon"],dangerouslySetInnerHTML:{__html:o.outerHTML}}):E.createElement("div",{className:mt["context-menu-icon"]},E.createElement("svg",null));return E.createElement(St,{key:n.uid,className:mt["context-menu-item"],onClick:()=>{i&&i(n.uid)},onMouseEnter:s=>{t&&t(s,n)},onMouseLeave:s=>{r&&r(s)}},a,E.createElement("span",{className:mt["context-menu-span"]},n.options&&n.options.name&&n.options.name.length?n.options.name:n.type,t&&r?E.createElement("svg",{className:mt["play-icon"]},E.createElement("use",{xlinkHref:"#play"})):null))})):null;function c7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f7e(i.key),i)}}function u7e(e,t,r){return t&&yY(e.prototype,t),r&&yY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f7e(e){var t=h7e(e,"string");return typeof t=="symbol"?t:String(t)}function h7e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JD(e,t)}function JD(e,t){return JD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},JD(e,t)}function p7e(e){var t=v7e();return function(){var i=LT(e),n;if(t){var o=LT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return m7e(this,n)}}function m7e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g7e(e)}function g7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function LT(e){return LT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},LT(e)}const bY=F_(e=>function(t){d7e(i,t);var r=p7e(i);function i(){return c7e(this,i),r.apply(this,arguments)}return u7e(i,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const o=this.state.submenuSourceBbox;let a=null;this.state.orientation==="left"?a={left:this.state.left,top:o.top}:a={left:this.state.left+o.width+7,top:o.top};const c=vY(this.props.tracks).filter(l=>l.uid===this.state.submenuShown.uid)[0],u=c&&c.position!=="whole";return E.createElement(l7e,{key:`series-list-menu-${c.uid}`,ref:l=>{this.seriesListMenu=l},closeMenu:this.props.closeMenu,hostTrack:this.props.tracks[0],onAddDivisor:this.props.onAddDivisor,onAddSeries:u?this.props.onAddSeries:null,onChangeTrackData:this.props.onChangeTrackData,onChangeTrackType:this.props.onChangeTrackType,onCloseTrack:()=>this.props.onCloseTrack(this.state.submenuShown.uid),onConfigureTrack:this.props.onConfigureTrack,onDivideSeries:this.props.onDivideSeries,onExportData:this.props.onExportData,onLockScales:this.props.onLockScales,onTrackOptionsChanged:this.props.onTrackOptionsChanged,orientation:this.state.orientation,parentBbox:o,position:a,series:this.state.submenuShown,theme:this.props.theme,track:c,trackOrientation:this.props.trackOrientation,trackSourceServers:this.props.trackSourceServers})}return E.createElement("div",null)}}]),i}(e));function y7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_7e(i.key),i)}}function b7e(e,t,r){return t&&_Y(e.prototype,t),r&&_Y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _7e(e){var t=T7e(e,"string");return typeof t=="symbol"?t:String(t)}function T7e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BT(){return typeof Reflect<"u"&&Reflect.get?BT=Reflect.get.bind():BT=function(t,r,i){var n=E7e(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}},BT.apply(this,arguments)}function E7e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Zh(e),e!==null););return e}function S7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ex(e,t)}function ex(e,t){return ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},ex(e,t)}function w7e(e){var t=k7e();return function(){var i=Zh(e),n;if(t){var o=Zh(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return A7e(this,n)}}function A7e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O7e(e)}function O7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zh(e){return Zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zh(e)}let I7e=function(e){S7e(r,e);var t=w7e(r);function r(i){var n;return y7e(this,r),n=t.call(this,i),n.seriesRefs={},n.seriesListMenu=null,n}return b7e(r,[{key:"componentDidMount",value:function(){BT(Zh(r.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){return E.createElement("div",{ref:n=>{this.div=n},className:Zt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===mr}),"data-menu-type":"ConfigTrackMenu",style:{left:this.state.left,top:this.state.top}},QD(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this),null),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{contextMenu:this,onClick:()=>this.props.onLockValueScale(this.props.tracks[0].uid),onMouseEnter:n=>this.handleOtherMouseEnter(n)},"Lock Value Scale With"),E.createElement(St,{contextMenu:this,onClick:()=>this.props.onUnlockValueScale(this.props.tracks[0].uid),onMouseEnter:n=>this.handleOtherMouseEnter(n)},"Unlock Value Scale"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{contextMenu:this,onClick:()=>this.props.onAddSeries(this.props.tracks[0].uid),onMouseEnter:n=>this.handleOtherMouseEnter(n)},"Add Series"),E.createElement(St,{onClick:()=>this.props.onCloseTrack(this.props.tracks[0].uid)},"Close Track"),E.createElement(St,{onClick:()=>{this.props.onReplaceTrack(this.props.tracks[0].uid,this.props.trackOrientation)}},"Replace Track"),this.getSubmenu())}}]),r}(sh(pl).with(bY));function TY(e){return E.createElement("div",null,QD(e.tracks,null,null,e.onCloseTrack),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:()=>e.onCloseTrack(e.tracks[0].uid)},"Close all series"))}TY.propTypes={onCloseTrack:N.func.isRequired,tracks:N.array.isRequired};function C7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,D7e(i.key),i)}}function P7e(e,t,r){return t&&EY(e.prototype,t),r&&EY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function D7e(e){var t=x7e(e,"string");return typeof t=="symbol"?t:String(t)}function x7e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tx(e,t)}function tx(e,t){return tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},tx(e,t)}function R7e(e){var t=L7e();return function(){var i=$T(e),n;if(t){var o=$T(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return M7e(this,n)}}function M7e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HT(e)}function HT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $T(e){return $T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$T(e)}let ml=function(e){N7e(r,e);var t=R7e(r);function r(i){var n;return C7e(this,r),n=t.call(this,i),n.clickHandlerBound=n.clickHandler.bind(HT(n)),n.contextMenuHandlerBound=n.contextMenuHandler.bind(HT(n)),n.resizeHandlerBound=n.resizeHandler.bind(HT(n)),n}return P7e(r,[{key:"componentDidMount",value:function(){this.popup=document.createElement("div"),document.body.appendChild(this.popup),this.popup.style.zIndex=99,this.popup.style.position="absolute",this.popup.className="hg-popup",document.addEventListener("click",this.clickHandlerBound,!0),document.addEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.addEventListener("resize",this.resizeHandlerBound,!0),this._renderLayer()}},{key:"componentDidUpdate",value:function(){this._renderLayer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickHandlerBound,!0),document.removeEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.removeEventListener("resize",this.resizeHandlerBound,!0),Br.unmountComponentAtNode(this.popup),document.body.removeChild(this.popup)}},{key:"_renderLayer",value:function(){Br.render(this.props.children,this.popup)}},{key:"clickHandler",value:function(n){this.popup.contains(n.target)||this.props.onMenuClosed&&this.props.onMenuClosed(n)}},{key:"contextMenuHandler",value:function(n){n.altKey||(n.preventDefault(),this.clickHandler(n))}},{key:"resizeHandler",value:function(){this.props.onMenuClosed(null)}},{key:"render",value:function(){return E.createElement("div",null)}}]),r}(E.Component);ml.defaultProps={onMenuClosed:Y5},ml.propTypes={children:N.node.isRequired,onMenuClosed:N.func};const B7e=ZL(e=>E.createElement(oV,{className:e.className,controlAlignLeft:e.controlAlignLeft,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})),H7e={"vertical-tiled-plot":"_vertical-tiled-plot_f3ho8_1"};function $7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,j7e(i.key),i)}}function F7e(e,t,r){return t&&SY(e.prototype,t),r&&SY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j7e(e){var t=U7e(e,"string");return typeof t=="symbol"?t:String(t)}function U7e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rx(e,t)}function rx(e,t){return rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},rx(e,t)}function z7e(e){var t=W7e();return function(){var i=jT(e),n;if(t){var o=jT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return V7e(this,n)}}function V7e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FT(e)}function FT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jT(e){return jT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jT(e)}function wY(e){return e&&e.sourceEvent}let nx=function(e){G7e(r,e);var t=z7e(r);function r(i){var n;return $7e(this,r),n=t.call(this,i),n.brushBehavior=Dd().on("start",n.brushStarted.bind(FT(n))).on("brush",n.brushed.bind(FT(n))).on("end",n.brushedEnded.bind(FT(n))),n}return F7e(r,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(n,o){if(this.rangeSelectionTriggered)return this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==n.rangeSelection&&this.moveBrush(n.rangeSelection[0]?n.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==o;if(this.props.rangeSelection!==n.rangeSelection){const a=this.props.is1dRangeSelection?0:1;return this.moveBrush(n.rangeSelection[a]?n.rangeSelection[a]:null,n.rangeSelectionEnd),this.state!==o}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,Hu(this.brushEl,_o["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(n){const o=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!wY(n)||!this.props.onRangeSelection||o)&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(n.selection))}},{key:"brushStarted",value:function(n){!wY(n)||!n.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(n){if(!this.props.is1dRangeSelection)return;const o=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,n.selection&&n.sourceEvent&&this.props.onRangeSelection&&!o&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(n.selection)),n.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(n,o=!1){if(!this.brushEl)return;const a=n?[this.props.scale(n[0]),this.props.scale(n[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,o?this.brushEl.transition().call(this.brushBehavior.move,a):this.brushEl.call(this.brushBehavior.move,a)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const n=this.props.tracks.map(s=>s.width).reduce(ws,0),o=this.props.tracks.map(s=>$u(s)).reduce(Jd,!1),a=_o[this.props.isRangeSelectionActive?"track-range-selection-active":"track-range-selection"];return E.createElement("div",{className:H7e["vertical-tiled-plot"]},o&&E.createElement("svg",{ref:s=>{this.brushEl=Ht(s)},className:a,style:{height:this.props.height,width:n},xmlns:"http://www.w3.org/2000/svg"}),E.createElement(V0,{axis:"x",className:Zt(To.list,To.stylizedList,To.horizontalList),component:tV,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:this.props.height,helperClass:To.stylizedHelper,itemClass:Zt(To.stylizedItem,To.horizontalItem),itemControlAlignLeft:this.props.tracksControlAlignLeft,itemReactClass:B7e,items:this.props.tracks.map(s=>({configMenuVisible:s.uid===this.props.configTrackMenuId,uid:s.uid||xt.nice(),height:this.props.height,width:s.width,value:s.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:n}))}}]),r}(E.Component);nx.propTypes={configTrackMenuId:N.string,editable:N.bool,handleConfigTrack:N.func,handleResizeTrack:N.func,handleSortEnd:N.func,is1dRangeSelection:N.bool,isRangeSelectionActive:N.bool,height:N.number,onAddSeries:N.func,onCloseTrack:N.func,onCloseTrackMenuOpened:N.func,onConfigTrackMenuOpened:N.func,onRangeSelection:N.func,onRangeSelectionEnd:N.func,onRangeSelectionReset:N.func,onRangeSelectionStart:N.func,rangeSelection:N.array,rangeSelectionEnd:N.bool,referenceAncestor:N.func,resizeHandles:N.object,scale:N.func,tracks:N.array,tracksControlAlignLeft:N.bool};function Y7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,X7e(i.key),i)}}function q7e(e,t,r){return t&&AY(e.prototype,t),r&&AY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function X7e(e){var t=K7e(e,"string");return typeof t=="symbol"?t:String(t)}function K7e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ix(e,t)}function ix(e,t){return ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},ix(e,t)}function Q7e(e){var t=t3e();return function(){var i=UT(e),n;if(t){var o=UT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return J7e(this,n)}}function J7e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e3e(e)}function e3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function UT(e){return UT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},UT(e)}let OY=function(e){Z7e(r,e);var t=Q7e(r);function r(){return Y7e(this,r),t.apply(this,arguments)}return q7e(r,[{key:"render",value:function(){const n=QD(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this)),o=this.props.customItems?E.Children.map(this.props.customItems,a=>E.cloneElement(a,{onMouseEnter:s=>{this.handleOtherMouseEnter(s)}})):null;return E.createElement("div",{ref:a=>{this.div=a},className:Zt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===mr}),"data-menu-type":"ViewContextMenu",style:{left:this.state.left,top:this.state.top}},o,o&&E.createElement("hr",{className:mt["context-menu-hr"]}),n,n&&E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:()=>this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),onMouseEnter:a=>this.handleOtherMouseEnter(a)},"Add Horizontal Rule"),E.createElement(St,{onClick:()=>this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),onMouseEnter:a=>this.handleOtherMouseEnter(a)},"Add Vertical Rule"),E.createElement(St,{onClick:()=>this.props.onAddTrack({type:"cross-rule",x:this.props.coords[0],y:this.props.coords[1],position:"whole"}),onMouseEnter:a=>this.handleOtherMouseEnter(a)},"Add Cross Rule"),E.createElement("hr",{className:mt["context-menu-hr"]}),this.hasMatrixTrack(this.props.tracks)&&E.createElement(St,{onClick:this.handleAddHorizontalSection.bind(this),onMouseEnter:a=>this.handleOtherMouseEnter(a)},"Add Horizontal Cross Section"),this.hasMatrixTrack(this.props.tracks)&&E.createElement(St,{onClick:this.handleAddVerticalSection.bind(this),onMouseEnter:a=>this.handleOtherMouseEnter(a)},"Add Vertical Cross Section"),this.getSubmenu())}},{key:"hasMatrixTrack",value:function(n){return Sy(this.props.tracks).filter(a=>a.type==="heatmap").length>0}},{key:"handleAddHorizontalSection",value:function(){const o=Sy(this.props.tracks).filter(a=>a.type==="heatmap")[0];this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),this.props.onAddTrack({data:{type:"horizontal-section",server:o.server,tilesetUid:o.tilesetUid,slicePos:this.props.coords[1]},options:{valueScaling:"log"},type:"horizontal-bar",height:30,position:"top"})}},{key:"handleAddVerticalSection",value:function(){const o=Sy(this.props.tracks).filter(a=>a.type==="heatmap")[0];this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),this.props.onAddTrack({data:{type:"vertical-section",server:o.server,tilesetUid:o.tilesetUid,slicePos:this.props.coords[0]},options:{valueScaling:"log"},type:"vertical-bar",height:30,position:"left"})}}]),r}(sh(pl).with(bY));OY.propTypes={coords:N.array,customItems:N.array};function r3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i3e(i.key),i)}}function n3e(e,t,r){return t&&kY(e.prototype,t),r&&kY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i3e(e){var t=o3e(e,"string");return typeof t=="symbol"?t:String(t)}function o3e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ox(e,t)}function ox(e,t){return ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},ox(e,t)}function s3e(e){var t=c3e();return function(){var i=GT(e),n;if(t){var o=GT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l3e(this,n)}}function l3e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return An(e)}function An(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function GT(e){return GT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},GT(e)}let ax=function(e){a3e(r,e);var t=s3e(r);function r(i){var n;r3e(this,r),n=t.call(this,i),n.closing=!1;const{tracks:o}=n.props;return n.canvasElement=null,n.tracksByUidInit={},[...n.props.tracks.top||[],...n.props.tracks.right||[],...n.props.tracks.bottom||[],...n.props.tracks.left||[],...n.props.tracks.gallery||[],...n.props.tracks.center||[]].forEach(a=>{a.type==="combined"?a.contents.forEach(s=>{n.tracksByUidInit[s.uid]=!1}):n.tracksByUidInit[a.uid]=!1}),n.xScale=null,n.yScale=null,n.addUidsToTracks(o),n.trackToReplace=null,n.trackRenderer=null,n.configTrackMenu=null,n.state={sizeMeasured:!1,height:10,width:10,tracks:o,init:!1,addTrackPosition:null,customDialog:null,mouseOverOverlayUid:null,forceUpdate:0,rangeSelection:[null,null],rangeSelectionEnd:!1,chromInfo:null,defaultChromSizes:null,contextMenuCustomItems:null,contextMenuPosition:null,addDivisorDialog:null},n.reset=!0,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(a=>{dr[a]=window.higlassTracksByType[a].config}),n.topHeight=0,n.bottomHeight=0,n.leftWidth=0,n.rightWidth=0,n.centerHeight=0,n.centerWidth=0,n.dragTimeout=null,n.previousPropsStr="",n.contextMenuHandlerBound=n.contextMenuHandler.bind(An(n)),n.handleNoTrackAddedBound=n.handleNoTrackAdded.bind(An(n)),n.handleTracksAddedBound=n.handleTracksAdded.bind(An(n)),n.closeMenusBound=n.closeMenus.bind(An(n)),n.handleAddDivisorBound=n.handleAddDivisor.bind(An(n)),n.handleAddSeriesBound=n.handleAddSeries.bind(An(n)),n.handleChangeTrackDataBound=n.handleChangeTrackData.bind(An(n)),n.handleChangeTrackTypeBound=n.handleChangeTrackType.bind(An(n)),n.handleCloseTrackBound=n.handleCloseTrack.bind(An(n)),n.handleConfigureTrackBound=n.handleConfigureTrack.bind(An(n)),n.handleExportTrackDataBound=n.handleExportTrackData.bind(An(n)),n.handleLockValueScaleBound=n.handleLockValueScale.bind(An(n)),n.handleReplaceTrackBound=n.handleReplaceTrack.bind(An(n)),n.handleTrackOptionsChangedBound=n.handleTrackOptionsChanged.bind(An(n)),n.handleUnlockValueScaleBound=n.handleUnlockValueScale.bind(An(n)),n.onAddTrack=n.handleAddTrack.bind(An(n)),n}return n3e(r,[{key:"waitForDOMAttachment",value:function(n){if(!this.mounted)return;const o=Br.findDOMNode(this);document.body.contains(o)?n():requestAnimationFrame(()=>this.waitForDOMAttachment(n))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=Br.findDOMNode(this),this.canvasElement=Br.findDOMNode(this.props.canvasElement),this.waitForDOMAttachment(()=>{$v.ElementQueries.listen(),this.resizeSensor=new $v.ResizeSensor(this.element.parentNode,this.measureSize.bind(this)),this.measureSize()}),this.addEventListeners(),this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("contextmenu",this.contextMenuHandlerBound))}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){this.addUidsToTracks(n.tracks),this.setState({tracks:n.tracks})}},{key:"shouldComponentUpdate",value:function(n,o){const a=this.previousPropsStr,s=this.updatablePropsToString(n),c=JSON.stringify(this.state),u=JSON.stringify(o),l=a!==s||c!==u||this.props.chooseTrackHandler!==n.chooseTrackHandler||this.props.customDialog!==n.customDialog;l&&(this.previousPropsStr=s);const h=this.numTracks;return this.numTracks=0,La(this.props.tracks,()=>this.numTracks++),this.reset=this.reset||h===0&&this.numTracks>0,this.numTracks||(this.tracksByUidInit={}),l}},{key:"UNSAFE_componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(n,o){if(o.rangeSelection!==this.state.rangeSelection){let a=[null,null];this.state.defaultChromSizes&&this.state.rangeSelection.every(s=>s&&s.length)&&(a=this.state.rangeSelection.map(s=>sy(...s,this.state.defaultChromSizes))),this.props.onRangeSelection({dataRange:this.state.rangeSelection,genomicRange:a})}if(this.state.customDialog||this.props.customDialog){const a=this.state.customDialog||this.props.customDialog;if(a.length>0){const s=[],c=[];a.forEach(u=>{s.push(u.bodyComponent),c.push(u.bodyProps)}),this.props.modal.open(E.createElement(YD,{children:s,bodyProps:c,onCancel:this.props.closeCustomDialog,title:a[0].title}))}}if(n.tracks.center,this.props.tracks.center,(this.state.addTrackPosition||this.props.addTrackPosition)&&this.props.modal.open(E.createElement(DT,{host:this.state.addTrackHost,onCancel:this.handleNoTrackAddedBound,onTracksChosen:this.handleTracksAddedBound,position:this.state.addTrackPosition||this.props.addTrackPosition,trackSourceServers:this.props.trackSourceServers})),this.state.addDivisorDialog){const a=this.state.addDivisorDialog;this.props.modal.open(E.createElement(DT,{datatype:dr[a.type].datatype[0],host:this.state.addTrackHost,onCancel:()=>{this.setState({addDivisorDialog:null})},onTracksChosen:s=>{this.handleDivisorChosen(a,s)},trackSourceServers:this.props.trackSourceServers}))}}},{key:"componentWillUnmount",value:function(){this.closing=!0,this.removeEventListeners(),this.pubSubs.forEach(n=>this.props.pubSub.unsubscribe(n))}},{key:"addUidsToTracks",value:function(n){Object.keys(n).forEach(o=>{n[o].forEach(a=>{a.uid=a.uid||xt.nice()})})}},{key:"contextMenuHandler",value:function(n){if(!this.divTiledPlot)return;const o=this.divTiledPlot.getBoundingClientRect();if(!lw(n.clientX,n.clientY,o.left,o.left+o.width,o.top,o.top+o.height))return;const s=[n.clientX,n.clientY],c=lr(n,this.divTiledPlot),u=this.trackRenderer.zoomedXScale.invert(c[0]),l=this.trackRenderer.zoomedYScale.invert(c[1]);let h=null;n.hgCustomItems&&(h=n.hgCustomItems.map(f=>E.createElement(St,{key:f.key,onClick:f.onClick},f.text))),this.setState({contextMenuCustomItems:h,contextMenuPosition:{left:s[0],top:s[1],canvasLeft:c[0]+this.trackRenderer.xPositionOffset,canvasTop:c[1]+this.trackRenderer.yPositionOffset},contextMenuDataX:u,contextMenuDataY:l})}},{key:"measureSize",value:function(){this.element.clientWidth>0&&this.element.clientHeight>0&&this.setState({sizeMeasured:!0,width:this.element.clientWidth,height:this.element.clientHeight})}},{key:"handleTrackOptionsChanged",value:function(n,o){return this.props.onTrackOptionsChanged(n,o)}},{key:"handleScalesChanged",value:function(n,o){this.xScale=n,this.yScale=o,this.props.onScalesChanged(n,o)}},{key:"handleTilesetInfoReceived",value:function(n,o){const a=Ci(this.props.tracks,n);if(!a){console.warn("Strange, track not found:",n);return}this.tracksByUidInit[a.uid]=!0,this.checkAllTilesetInfoReceived(),a.options||(a.options={}),a.name=o.name,a.maxWidth=o.max_width,a.transforms=o.transforms,a.aggregationModes=o.aggregation_modes,a.header=o.header,a.binsPerDimension=o.bins_per_dimension,o.resolutions?(a.maxZoom=o.resolutions.length-1,a.resolutions=o.resolutions):a.maxZoom=o.max_zoom,a.coordSystem=o.coordSystem,a.datatype=o.datatype}},{key:"checkAllTilesetInfoReceived",value:function(){if(this.state.init&&!this.reset||!this.trackRenderer||!this.props.zoomToDataExtentOnInit())return;const n=Object.keys(this.trackRenderer.trackDefObjects).map(a=>{const s=this.trackRenderer.trackDefObjects[a].trackObject;return s.childTracks?s.childTracks:s}).reduce((a,s)=>a.concat(s),[]).filter(({tilesetInfo:a})=>typeof a<"u"&&a!==!0),o=Object.values(this.tracksByUidInit).filter(a=>a).length;n.length===o&&(this.setState({init:!0}),this.reset=!1,this.handleZoomToData())}},{key:"handleOverlayMouseEnter",value:function(n){this.setState({mouseOverOverlayUid:n})}},{key:"handleOverlayMouseLeave",value:function(n){n===this.state.mouseOverOverlayUid&&this.setState({mouseOverOverlayUid:null})}},{key:"handleTrackPositionChosen",value:function(n){this.setState({mouseOverOverlayUid:null}),this.props.chooseTrackHandler(n.track.uid)}},{key:"handleNoTrackAdded",value:function(){this.trackToReplace=null,this.props.onNoTrackAdded(),this.setState({addTrackPosition:null,addTrackHost:null})}},{key:"handleAddDivisor",value:function(n){this.setState({addDivisorDialog:n})}},{key:"handleDivisorChosen",value:function(n,o){this.setState({addDivisorDialog:null});const a=n.data?{server:n.data.server,tilesetUid:n.data.tilesetUid}:{server:n.server,tilesetUid:n.tilesetUid},s={server:o[0].server,tilesetUid:o[0].uuid};this.handleChangeTrackData(n.uid,{type:"divided",children:[a,s]})}},{key:"handleDivideSeries",value:function(n){}},{key:"handleAddSeries",value:function(n){const o=Qd(this.props.tracks,n),a=Ci(this.props.tracks,n);this.setState({addTrackPosition:o,addTrackHost:a})}},{key:"handleReplaceTrack",value:function(n,o){this.trackToReplace=n,this.handleAddTrack(o)}},{key:"handleAddTrack",value:function(n){this.setState({addTrackPosition:n,addTrackHost:null})}},{key:"handleResizeTrack",value:function(n,o,a){const{tracks:s}=this.state;for(const c in s){const l=s[c].filter(h=>h.uid===n);l.length>0&&(l[0].width=o,l[0].height=a)}this.setState({tracks:s,forceUpdate:Math.random()}),this.props.onResizeTrack()}},{key:"closeMenus",value:function(){this.setState({closeTrackMenuId:null,configTrackMenuId:null,contextMenuPosition:null,contextMenuCustomItems:null})}},{key:"handleLockValueScale",value:function(n){this.closeMenus(),this.props.onLockValueScale(n)}},{key:"handleUnlockValueScale",value:function(n){this.closeMenus(),this.props.onUnlockValueScale(n)}},{key:"handleCloseTrack",value:function(n){this.closeMenus(),this.props.onCloseTrack(n)}},{key:"handleChangeTrackType",value:function(n,o){this.closeMenus(),this.props.onChangeTrackType(n,o)}},{key:"handleChangeTrackData",value:function(n,o){this.closeMenus(),this.props.onChangeTrackData(n,o)}},{key:"handleTracksAdded",value:function(n,o,a){return this.trackToReplace&&(this.handleCloseTrack(this.trackToReplace),this.trackToReplace=null),this.props.onTracksAdded(n,o,a),this.setState({addTrackPosition:null,addTrackHost:null}),n}},{key:"handleCloseTrackMenuOpened",value:function(n,o){this.setState({closeTrackMenuId:n,closeTrackMenuLocation:o})}},{key:"handleCloseContextMenu",value:function(){this.setState({contextMenuCustomItems:null,contextMenuPosition:null,contextMenuDataX:null,contextMenuDataY:null})}},{key:"handleCloseTrackMenuClosed",value:function(){this.setState({closeTrackMenuId:null})}},{key:"handleConfigTrackMenuOpened",value:function(n,o){this.closeMenus(),this.setState({configTrackMenuId:n,configTrackMenuLocation:o})}},{key:"handleConfigureTrack",value:function(n,o){this.setState({configTrackMenuId:null,trackOptions:{track:n,configComponent:o}}),this.closeMenus()}},{key:"handleSortEnd",value:function(n){this.setState(o=>{const a=o.tracks,s={};for(let c=0;c<n.length;c++)s[n[c].uid]=c;for(const c in a){const u=a[c];if(u.length&&u[0].uid in s){const l=new Array(u.length);for(let h=0;h<u.length;h++)l[s[u[h].uid]]=u[h];a[c]=l}}return{tracks:a,forceUpdate:Math.random()}})}},{key:"createTracksAndLocations",value:function(){const n=[],{tracks:o}=this.state;return US.forEach(a=>{o[a]&&o[a].forEach(s=>{s.contents&&s.contents.forEach(c=>{c.position=a}),s.position=a,n.push({track:s,location:a})})}),n}},{key:"calculateTrackPosition",value:function(n,o){let a=this.props.paddingTop,s=this.props.paddingBottom,c=this.props.paddingLeft,u=this.props.paddingRight,l=this.centerWidth,h=n.height,f=0,d=0;switch(o){case"top":c+=this.leftWidth;for(let p=0;p<this.state.tracks.top.length&&this.state.tracks.top[p].uid!==n.uid;p++)a+=this.state.tracks.top[p].height;break;case"bottom":c+=this.leftWidth,a+=this.topHeight+this.centerHeight+this.galleryDim;for(let p=0;p<this.state.tracks.bottom.length&&this.state.tracks.bottom[p].uid!==n.uid;p++)a+=this.state.tracks.bottom[p].height;break;case"left":a+=this.topHeight,l=n.width,h=this.centerHeight;for(let p=0;p<this.state.tracks.left.length&&this.state.tracks.left[p].uid!==n.uid;p++)c+=this.state.tracks.left[p].width;break;case"right":c+=this.leftWidth+this.centerWidth+this.galleryDim,a+=this.topHeight,l=n.width,h=this.centerHeight;for(let p=0;p<this.state.tracks.right.length&&this.state.tracks.right[p].uid!==n.uid;p++)c+=this.state.tracks.right[p].width;break;case"center":c+=this.leftWidth,a+=this.topHeight,h=this.centerHeight;break;case"gallery":c+=this.leftWidthNoGallery,a+=this.topHeightNoGallery,l=this.state.width-this.leftWidthNoGallery-this.rightWidthNoGallery-this.props.paddingLeft,h=this.state.height-this.topHeightNoGallery-this.bottomHeightNoGallery-this.props.paddingTop,f=this.galleryDim,d=this.galleryDim;for(let p=0;p<this.state.tracks.gallery.length&&this.state.tracks.gallery[p].uid!==n.uid;p++)l-=2*this.state.tracks.gallery[p].height,h-=2*this.state.tracks.gallery[p].height,c+=this.state.tracks.gallery[p].height,a+=this.state.tracks.gallery[p].height,f-=this.state.tracks.gallery[p].height,d-=this.state.tracks.gallery[p].height;for(let p=0;p<this.state.tracks.right.length;p++)u+=this.state.tracks.right[p].width;for(let p=0;p<this.state.tracks.bottom.length;p++)s+=this.state.tracks.bottom[p].height;n.offsetX=f,n.offsetY=d,n.offsetTop=a,n.offsetRight=u,n.offsetBottom=s,n.offsetLeft=c;break;case"whole":default:l=this.leftWidth+this.centerWidth+this.rightWidth,h=this.topHeight+this.centerHeight+this.bottomHeight}return US.indexOf(o)===-1&&console.warn("Track with unknown position present:",o,n),{left:c,top:a,width:l,height:h,track:n}}},{key:"findCentralHeatmapTrack",value:function(n){for(let o=0;o<n.length;o++){if(n[o].type==="combined")return this.findCentralHeatmapTrack(n[o].contents);if(n[o].type==="heatmap")return n[o]}}},{key:"trackUuidToOrientation",value:function(n){}},{key:"overlayTracks",value:function(n){return this.props.overlays?this.props.overlays.filter(a=>a.includes&&a.includes.length).map(a=>{const s=a.type?`overlay-${a.type}-track`:"overlay-track",c={...a,uid:a.uid||xt.nice(),includes:a.includes,type:s,options:Object.assign(a.options,{orientationsAndPositions:a.includes.map(u=>{const l=Ci(this.props.tracks,u);if(!l)return console.warn(`OverlayTrack included uid (${u}) not found in the track list`),null;const h=Qd(this.props.tracks,l.uid);let f;if((h==="top"||h==="bottom")&&(f="1d-horizontal"),(h==="left"||h==="right")&&(f="1d-vertical"),h==="center"&&(f="2d"),!f)return console.warn("Only top, bottom, left, right, or center tracks can be overlaid at the moment"),null;const d=n.filter(m=>m.track.uid===u);if(!d.length)return null;const p={left:d[0].left-this.props.paddingLeft,top:d[0].top-this.props.paddingTop,width:d[0].width,height:d[0].height};return{orientation:f,position:p}}).filter(u=>u)})};return{top:this.props.paddingTop,left:this.props.paddingLeft,width:this.leftWidth+this.centerWidth+this.rightWidth,height:this.topHeight+this.centerHeight+this.bottomHeight+this.props.marginTop+this.props.marginBottom,track:c}}):[]}},{key:"positionedTracks",value:function(){return this.createTracksAndLocations().map(({track:o,location:a})=>this.calculateTrackPosition(o,a))}},{key:"createTrackPositionTexts",value:function(){const n=this.positionedTracks();return this.createTracksAndLocations(),n.map(a=>{const{track:s}=a;return E.createElement("div",{key:s.uid,style:{left:a.left,top:a.top,width:a.width,height:a.height,position:"absolute"}},s.uid.slice(0,2))})}},{key:"handleExportTrackData",value:function(n,o){const a=Ci(this.props.tracks,o);let s=null;n!==o?s=this.trackRenderer.trackDefObjects[n].trackObject.createdTracks[a.uid]:{trackObject:s}=this.trackRenderer.trackDefObjects[n],s.exportData(),this.closeMenus()}},{key:"listTracksAtPosition",value:function(n,o,a=!1){const s=[];if(!this.trackRenderer)return[];for(const c in this.trackRenderer.trackDefObjects){const u=this.trackRenderer.trackDefObjects[c].trackObject;if(u.respondsToPosition(n,o))if(a){if(this.props.tracks.center)if(this.props.tracks.center.contents)for(let l=0;l<this.props.tracks.center.contents.length;l++)this.props.tracks.center.contents[l].uid===c&&(u.is2d=!0);else this.props.tracks.center&&this.props.tracks.center.length&&this.props.tracks.center[0].uid===c&&(u.is2d=!0);s.push(u)}else s.push(this.trackRenderer.trackDefObjects[c].trackDef.track)}return s}},{key:"listAllTrackObjects",value:function(){const n=[];for(const o in this.trackRenderer.trackDefObjects){const a=this.trackRenderer.trackDefObjects[o];if(a.trackObject.createdTracks)for(const s in a.trackObject.createdTracks){const c=a.trackObject.createdTracks[s];n.push(c)}else n.push(a.trackObject)}return n}},{key:"handleZoomToData",value:function(){const n=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=[n,n],s=[o,o],c=this.listAllTrackObjects();for(const d of c)if(d.tilesetInfo&&d.tilesetInfo.min_pos)for(let p=0;p<d.tilesetInfo.min_pos.length;p++)d.tilesetInfo.min_pos[p]<a[p]&&(a[p]=d.tilesetInfo.min_pos[p]),d.tilesetInfo.max_pos[p]>s[p]&&(s[p]=d.tilesetInfo.max_pos[p]);const u=this.trackRenderer.currentProps.paddingLeft+this.trackRenderer.currentProps.leftWidth;let l=[u,u+this.trackRenderer.currentProps.centerWidth].map(this.trackRenderer.zoomTransform.rescaleX(this.trackRenderer.xScale).invert);const h=this.trackRenderer.currentProps.paddingTop+this.trackRenderer.currentProps.topHeight;let f=[h,h+this.trackRenderer.currentProps.centerHeight].map(this.trackRenderer.zoomTransform.rescaleY(this.trackRenderer.yScale).invert);this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),a[0]<Number.MAX_SAFE_INTEGER&&s[0]>Number.MIN_SAFE_INTEGER&&(l=[a[0],s[0]]),a[1]<Number.MAX_SAFE_INTEGER&&s[1]>Number.MIN_SAFE_INTEGER&&(f=[a[1],s[1]]),this.props.onDataDomainChanged(l,f)}},{key:"resetViewport",value:function(){this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),this.props.onDataDomainChanged(this.props.initialXDomain,this.props.initialYDomain)}},{key:"updatablePropsToString",value:function(n){return JSON.stringify({tracks:n.tracks,overlays:n.overlays,viewOptions:n.viewOptions,uid:n.uid,addTrackPosition:n.addTrackPosition,editable:n.editable,marginTop:n.marginTop,marginBottom:n.marginBottom,marginLeft:n.marginLeft,marginRight:n.marginRight,paddingTop:n.paddingTop,paddingBottom:n.paddingBottom,paddingLeft:n.paddingLeft,paddingRight:n.paddingRight,mouseTool:n.mouseTool,initialXDomain:n.initialXDomain,initialYDomain:n.initialYDomain,trackSourceServers:n.trackSourceServers,zoomable:n.zoomable,draggingHappening:n.draggingHappening})}},{key:"getXYScales",value:function(){this.trackRenderer&&(this.xScale=this.trackRenderer.currentXScale,this.yScale=this.trackRenderer.currentYScale)}},{key:"rangeViewToDataLoci",value:function(n,o){return o?[parseInt(o.invert(n[0]),10),parseInt(o.invert(n[1]),10)]:[null,null]}},{key:"rangeSelectionResetHandler",value:function(){this.state.rangeSelectionMaster&&this.setState({is1dRangeSelection:null,rangeSelection:[null,null],rangeSelectionMaster:null,rangeSelectionEnd:!1})}},{key:"rangeSelection1dEndHandler",value:function(n){(!this.xScale||!this.yScale)&&this.getXYScales();const o=n==="x"?this.xScale:this.yScale;return a=>{this.setState(s=>{const c=s.is1dRangeSelection?[null,null]:s.rangeSelection.slice(),u=!this.state.is1dRangeSelection&&n==="y"?1:0;let l=this.rangeViewToDataLoci(a,o);const h=l[1]-l[0];if(this.props.rangeSelection1dSize[0]>h){const f=l[0]+h/2;l=[f-this.props.rangeSelection1dSize[0]/2,f+this.props.rangeSelection1dSize[0]/2]}else if(this.props.rangeSelection1dSize[1]<h){const f=l[0]+h/2;l=[f-this.props.rangeSelection1dSize[1]/2,f+this.props.rangeSelection1dSize[1]/2]}return c[u]=l,this.props.rangeSelectionToInt&&(c[u]=c[u].map(f=>Math.round(f))),{rangeSelection:c,rangeSelectionEnd:!0}})}}},{key:"rangeSelection1dHandler",value:function(n){(!this.xScale||!this.yScale)&&this.getXYScales();const o=n==="x"?this.xScale:this.yScale;return a=>{this.setState(s=>{const c=s.is1dRangeSelection?[null,null]:s.rangeSelection.slice(),u=!s.is1dRangeSelection&&n==="y"?1:0;return c[u]=this.rangeViewToDataLoci(a,o),{rangeSelection:c,rangeSelectionEnd:!1}})}}},{key:"rangeSelection1dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!0,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dHandler",value:function(n){(!this.xScale||!this.yScale)&&this.getXYScales(),this.setState({rangeSelection:[this.rangeViewToDataLoci(n[0],this.xScale),this.rangeViewToDataLoci(n[1],this.yScale)],rangeSelectionEnd:!1})}},{key:"rangeSelection2dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!1,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dEndHandler",value:function(n){(!this.xScale||!this.yScale)&&this.getXYScales();const o=this.rangeViewToDataLoci(n[0],this.xScale),a=this.rangeViewToDataLoci(n[1],this.yScale);let s=[o,a];const c=o[1]-o[0],u=a[1]-a[0],l=[c,u];s.forEach((h,f)=>{if(this.props.rangeSelection1dSize[0]>l[f]){const d=h[0]+Math.round(l[f]/2);h[0]=d-this.props.rangeSelection1dSize[0]/2,h[1]=d+this.props.rangeSelection1dSize[0]/2}else if(this.props.rangeSelection1dSize[1]<l[f]){const d=h[0]+Math.round(l[f]/2);h[0]=d-this.props.rangeSelection1dSize[1]/2,h[1]=d+this.props.rangeSelection1dSize[1]/2}}),this.props.rangeSelectionToInt&&(s=s.map(h=>h.map(f=>Math.round(f)))),this.setState({rangeSelection:s,rangeSelectionEnd:!0})}},{key:"getContextMenu",value:function(){if(this.state.contextMenuPosition){const n=this.listTracksAtPosition(this.state.contextMenuPosition.canvasLeft,this.state.contextMenuPosition.canvasTop);return E.createElement(ml,{onMenuClosed:this.closeMenusBound},E.createElement(OY,{closeMenu:this.closeMenusBound,coords:[this.state.contextMenuDataX,this.state.contextMenuDataY],customItems:this.state.contextMenuCustomItems,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:o=>{this.props.onTracksAdded([o],o.position,null),this.handleCloseContextMenu()},onChangeTrackData:this.handleChangeTrackDataBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,orientation:"right",position:this.state.contextMenuPosition,theme:this.props.theme,tracks:n,trackSourceServers:this.props.trackSourceServers}))}return null}},{key:"getIdealizedTrackPositionsOverlay",value:function(){const n=this.props.draggingHappening;if(typeof n=="boolean")return;const o=n.datatype;if(o===void 0)return;if(!(o in Vd)&&!n.defaultTracks){console.warn("unknown data type:",n.higlassTrack);return}const a={"1d-horizontal":["top","bottom","left","right"],"2d":["center"],"1d-vertical":["left","right"]},s=Vd[o]||{};if(n.defaultTracks)for(const w of n.defaultTracks)if(!dr[w])console.warn("unknown track type",w);else for(const L of a[dr[w].orientation])s[L]=w;const c=new Set(["top","left","right","center","bottom"].filter(w=>w in this.state.tracks&&this.state.tracks[w].length)),u="top"in s,l="left"in s,h="right"in s,f="bottom"in s,d="center"in s,p="center"in s||c.has("left")||c.has("right")||c.has("center"),m="top"in s,g="bottom"in s&&p,v="left"in s&&p,_="right"in s&&p,y=Object.keys(s).length&&("center"in s||p),b=E.createElement("div",{style:{flexGrow:1}}),T=E.cloneElement(b),S=E.createElement("div",{style:{display:"flex",flexGrow:1}},m&&(y||v)?b:null,E.createElement(s_,{defaultTrackType:s.top,draggingHappening:this.props.draggingHappening,enabled:u,onTrackDropped:w=>this.handleTracksAdded([w],"top"),style:{border:"1px solid black",flexGrow:1}}),m&&(y||v)?T:null),k=E.createElement("div",{style:{display:"flex",flexGrow:1}},m&&(y||v)?b:null,E.createElement(s_,{defaultTrackType:s.bottom,draggingHappening:this.props.draggingHappening,enabled:f,onTrackDropped:w=>this.handleTracksAdded([w],"bottom"),style:{border:"1px solid black",flexGrow:1}}),m&&(y||v)?T:null),O=E.createElement(s_,{defaultTrackType:s.left,draggingHappening:this.props.draggingHappening,enabled:l,onTrackDropped:w=>this.handleTracksAdded([w],"left"),style:{border:"1px solid black",flexGrow:1}}),D=E.createElement(s_,{defaultTrackType:s.center,draggingHappening:this.props.draggingHappening,enabled:d,onTrackDropped:w=>this.handleTracksAdded([w],"center"),position:"center",style:{border:"1px solid black",flexGrow:1}}),R=E.cloneElement(O,{defaultTrackType:s.right,enabled:h,onTrackDropped:w=>this.handleTracksAdded([w],"right")});return E.createElement("div",{style:{position:"absolute",left:"0px",top:"0px",width:this.state.width,height:this.state.height}},E.createElement("div",{style:{position:"absolute",width:this.state.width,height:this.state.height,background:"white",opacity:.4}}),E.createElement("div",{style:{width:this.state.width,height:this.state.height,position:"absolute",display:"flex",flexDirection:"column"}},m?S:null,p&&E.createElement("div",{style:{display:"flex",height:m||g?"40%":"100%",width:"100%"}},v?O:null,y?D:null,_?R:null),g?k:null))}},{key:"render",value:function(){this.galleryDim=this.props.tracks.gallery?this.props.tracks.gallery.map(y=>y.height).reduce(ws,0):0,this.topHeightNoGallery=this.props.tracks.top.map(y=>y.height).reduce(ws,0),this.topHeight=this.topHeightNoGallery+this.galleryDim,this.bottomHeightNoGallery=this.props.tracks.bottom.map(y=>y.height).reduce(ws,0),this.bottomHeight=this.bottomHeightNoGallery+this.galleryDim,this.leftWidthNoGallery=this.props.tracks.left.map(y=>y.width).reduce(ws,0),this.leftWidth=this.leftWidthNoGallery+this.galleryDim,this.rightWidthNoGallery=this.props.tracks.right.map(y=>y.width).reduce(ws,0),this.rightWidth=this.rightWidthNoGallery+this.galleryDim;const n=this.props.paddingTop+this.props.paddingBottom,o=this.props.paddingLeft+this.props.paddingRight;this.centerHeight=Math.max(0,this.state.height-this.topHeight-this.bottomHeight-n),this.centerWidth=Math.max(0,this.state.width-this.leftWidth-this.rightWidth-o);const a="none",s=E.createElement("div",{className:"top-track-container",style:{left:this.leftWidth+this.props.paddingLeft,top:this.props.paddingTop,width:this.centerWidth,height:this.topHeightNoGallery,outline:a,position:"absolute"}},E.createElement(eT,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["bottom"]),scale:this.xScale,tracks:this.props.tracks.top,width:this.centerWidth})),c=E.createElement("div",{className:"left-track-container",style:{left:this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.leftWidthNoGallery,height:this.centerHeight,outline:a,position:"absolute"}},E.createElement(nx,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["right"]),scale:this.yScale,tracks:this.props.tracks.left})),u=E.createElement("div",{className:"right-track-container",style:{right:this.props.paddingRight,top:this.topHeight+this.props.paddingTop,width:this.rightWidthNoGallery,height:this.centerHeight,outline:a,position:"absolute"}},E.createElement(nx,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["left"]),scale:this.yScale,tracks:this.props.tracks.right,tracksControlAlignLeft:!0})),l=E.createElement("div",{className:"bottom-track-container",style:{left:this.leftWidth+this.props.paddingLeft,bottom:this.props.paddingBottom,width:this.centerWidth,height:this.bottomHeightNoGallery,outline:a,position:"absolute"}},E.createElement(eT,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["top"]),scale:this.xScale,tracks:this.props.tracks.bottom,width:this.centerWidth})),h=E.createElement("div",{key:"galleryTracksDiv",className:"gallery-track-container",style:{left:this.leftWidthNoGallery+this.props.paddingLeft,top:this.topHeightNoGallery+this.props.paddingTop,width:this.centerWidth+2*this.galleryDim,height:this.centerHeight+2*this.galleryDim,outline:a,position:"absolute"}},E.createElement(G4,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight+2*this.galleryDim,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),tracks:this.props.tracks.gallery,width:this.centerWidth+2*this.galleryDim}));let f=E.createElement("div",{className:["center-track-container",vk["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.bottomHeight,outline:a}});this.props.tracks.center.length&&(f=E.createElement("div",{className:["center-track-container",vk["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.centerHeight,outline:a}},E.createElement(bk,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection2dStartHandler.bind(this),onRangeSelectionX:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionXEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionXY:this.rangeSelection2dHandler.bind(this),onRangeSelectionXYEnd:this.rangeSelection2dEndHandler.bind(this),onRangeSelectionY:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionYEnd:this.rangeSelection1dEndHandler("y").bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,scaleX:this.xScale,scaleY:this.yScale,tracks:this.props.tracks.center,uid:this.props.tracks.center[0].uid,width:this.centerWidth}))),this.createTrackPositionTexts();let d=this.positionedTracks();d=d.concat(this.overlayTracks(d));let p=null;this.state.sizeMeasured&&(p=E.createElement(K8e,{ref:y=>{this.trackRenderer=y,this.checkAllTilesetInfoReceived()},canvasElement:this.canvasElement,centerHeight:this.centerHeight,centerWidth:this.centerWidth,disableTrackMenu:this.props.disableTrackMenu,dragging:this.props.dragging,galleryDim:this.galleryDim,getLockGroupExtrema:this.props.getLockGroupExtrema,height:this.state.height,initialXDomain:this.props.initialXDomain,initialYDomain:this.props.initialYDomain,isRangeSelection:this.props.mouseTool===qi,isShowGlobalMousePosition:this.props.isShowGlobalMousePosition,isValueScaleLocked:this.props.isValueScaleLocked,leftWidth:this.leftWidth,leftWidthNoGallery:this.leftWidthNoGallery,metaTracks:this.props.metaTracks,onMouseMoveZoom:this.props.onMouseMoveZoom,onNewTilesLoaded:this.props.onNewTilesLoaded,onScalesChanged:this.handleScalesChanged.bind(this),onTilesetInfoReceived:this.handleTilesetInfoReceived.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onValueScaleChanged:this.props.onValueScaleChanged,paddingLeft:this.props.paddingLeft,paddingTop:this.props.paddingTop,pixiRenderer:this.props.pixiRenderer,pixiStage:this.props.pixiStage,pluginDataFetchers:this.props.pluginDataFetchers,pluginTracks:this.props.pluginTracks,positionedTracks:d,registerDraggingChangedListener:this.props.registerDraggingChangedListener,removeDraggingChangedListener:this.props.removeDraggingChangedListener,setCentersFunction:this.props.setCentersFunction,svgElement:this.props.svgElement,topHeight:this.topHeight,topHeightNoGallery:this.topHeightNoGallery,uid:this.props.uid,viewOptions:this.props.viewOptions,width:this.state.width,xDomainLimits:this.props.xDomainLimits,yDomainLimits:this.props.yDomainLimits,zoomable:this.props.zoomable,zoomLimits:this.props.zoomLimits},s,c,u,l,h,f));let m=null,g=null;this.state.configTrackMenuId&&(m=E.createElement(ml,{onMenuClosed:this.closeMenusBound},E.createElement(I7e,{ref:y=>{this.configTrackMenu=y},closeMenu:this.closeMenusBound,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:this.handleAddTrackBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,position:this.state.configTrackMenuLocation,theme:this.props.theme,trackOrientation:Qd(this.props.tracks,this.state.configTrackMenuId),tracks:[Ci(this.props.tracks,this.state.configTrackMenuId)]}))),this.state.closeTrackMenuId&&(g=E.createElement(ml,{onMenuClosed:this.handleCloseTrackMenuClosed.bind(this)},E.createElement(pl,{position:this.state.closeTrackMenuLocation,theme:this.props.theme},E.createElement(TY,{onCloseTrack:this.handleCloseTrack.bind(this),tracks:[Ci(this.props.tracks,this.state.closeTrackMenuId)]}))));let v=null;this.props.chooseTrackHandler&&(v=d.filter(y=>y.track.position!=="whole").map(y=>{let b="transparent",T="none";return this.state.mouseOverOverlayUid===y.track.uid&&(b="yellow",T="1px solid black"),E.createElement("div",{key:y.track.uid,className:"tiled-plot-track-overlay",onClick:()=>this.handleTrackPositionChosen(y),onDragEnter:S=>{this.handleOverlayMouseEnter(y.track.uid),S.preventDefault()},onDragLeave:()=>this.handleOverlayMouseLeave(y.track.uid),onDragOver:S=>S.preventDefault(),onDrop:()=>this.handleTrackPositionChosen(y),onMouseEnter:()=>this.handleOverlayMouseEnter(y.track.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(y.track.uid),style:{position:"absolute",left:y.left,top:y.top,width:y.width,height:y.height,background:b,opacity:.4,border:T,zIndex:1}})}));let _=null;if(this.xScale&&this.yScale&&this.props.editable&&this.state.trackOptions){const y=this.state.trackOptions.configComponent,b=this.state.trackOptions.track;_=E.createElement(y,{track:b,xScale:this.xScale,yScale:this.yScale,onCancel:()=>{this.setState({trackOptions:null})},onTrackOptionsChanged:T=>T,onSubmit:T=>{this.handleTrackOptionsChanged(this.state.trackOptions.track.uid,T),this.setState({trackOptions:null})}})}return E.createElement("div",{ref:y=>{this.divTiledPlot=y},className:["tiled-plot-div",To["tiled-plot"]].join(" "),style:{marginBottom:this.props.marginBottom,marginLeft:this.props.marginLeft,marginRight:this.props.marginRight,marginTop:this.props.marginTop}},p,v,m,g,_,this.getContextMenu(),this.props.draggingHappening&&this.getIdealizedTrackPositionsOverlay())}},{key:"addEventListeners",value:function(){this.eventListeners=[],this.eventListeners.forEach(n=>document.addEventListener(n.name,n.callback,!1))}},{key:"removeEventListeners",value:function(){this.eventListeners.forEach(n=>document.removeEventListener(n.name,n.callback))}}]),r}(E.Component);ax.defaultProps={isShowGlobalMousePosition:!1,pluginDataFetchers:{},pluginTracks:{},metaTracks:[],zoomable:!0},ax.propTypes={addTrackPosition:N.string,canvasElement:N.object,chooseTrackHandler:N.func,chromInfoPath:N.string,customDialog:N.array,closeCustomDialog:N.func,disableTrackMenu:N.bool,dragging:N.bool,draggingHappening:N.bool,editable:N.bool,getLockGroupExtrema:N.func,initialXDomain:N.array,initialYDomain:N.array,isShowGlobalMousePosition:N.bool,isValueScaleLocked:N.func,marginBottom:N.number.isRequired,marginLeft:N.number.isRequired,marginRight:N.number.isRequired,marginTop:N.number.isRequired,paddingBottom:N.number.isRequired,paddingLeft:N.number.isRequired,paddingRight:N.number.isRequired,paddingTop:N.number.isRequired,metaTracks:N.array,modal:N.object,mouseTool:N.string,onCloseTrack:N.func,onChangeTrackData:N.func,onChangeTrackType:N.func,onDataDomainChanged:N.func,onLockValueScale:N.func,onMouseMoveZoom:N.func,onNewTilesLoaded:N.func,onNoTrackAdded:N.func,onRangeSelection:N.func.isRequired,onScalesChanged:N.func,onTrackOptionsChanged:N.func,onTrackPositionChosen:N.func,onTracksAdded:N.func,onUnlockValueScale:N.func,onValueScaleChanged:N.func,onResizeTrack:N.func,overlays:N.array,openModal:N.func,pixiRenderer:N.object,pixiStage:N.object,pluginDataFetchers:N.object,pluginTracks:N.object,pubSub:N.object.isRequired,rangeSelection1dSize:N.array,rangeSelectionToInt:N.bool,registerDraggingChangedListener:N.func,removeDraggingChangedListener:N.func,setCentersFunction:N.func,svgElement:N.object,theme:N.symbol.isRequired,tracks:N.object,trackSourceServers:N.array,uid:N.string,viewOptions:N.object,xDomainLimits:N.array,yDomainLimits:N.array,zoomable:N.bool,zoomLimits:N.array,zoomToDataExtentOnInit:N.func};const u3e=Mf(iT(hc(ax)));var f3e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},h3e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol?"symbol":typeof e},d3e=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function p3e(e){var t=void 0,r=void 0,i=void 0,n=e.ownerDocument,o=n.body,a=n&&n.documentElement;return t=e.getBoundingClientRect(),r=t.left,i=t.top,r-=a.clientLeft||o.clientLeft||0,i-=a.clientTop||o.clientTop||0,{left:r,top:i}}function IY(e,t){var r=e["page"+(t?"Y":"X")+"Offset"],i="scroll"+(t?"Top":"Left");if(typeof r!="number"){var n=e.document;r=n.documentElement[i],typeof r!="number"&&(r=n.body[i])}return r}function sx(e){return IY(e)}function lx(e){return IY(e,!0)}function CY(e){var t=p3e(e),r=e.ownerDocument,i=r.defaultView||r.parentWindow;return t.left+=sx(i),t.top+=lx(i),t}function m3e(e,t,r){var i="",n=e.ownerDocument,o=r||n.defaultView.getComputedStyle(e,null);return o&&(i=o.getPropertyValue(t)||o[t]),i}var g3e=new RegExp("^("+d3e+")(?!px)[a-z%]+$","i"),v3e=/^(top|right|bottom|left)$/,cx="currentStyle",ux="runtimeStyle",tu="left",y3e="px";function b3e(e,t){var r=e[cx]&&e[cx][t];if(g3e.test(r)&&!v3e.test(t)){var i=e.style,n=i[tu],o=e[ux][tu];e[ux][tu]=e[cx][tu],i[tu]=t==="fontSize"?"1em":r||0,r=i.pixelLeft+y3e,i[tu]=n,e[ux][tu]=o}return r===""?"auto":r}var ru=void 0;typeof window<"u"&&(ru=window.getComputedStyle?m3e:b3e);function fx(e,t){for(var r=0;r<e.length;r++)t(e[r])}function PY(e){return ru(e,"boxSizing")==="border-box"}var _3e=["margin","border","padding"],hx=-1,T3e=2,dx=1,E3e=0;function S3e(e,t,r){var i={},n=e.style,o=void 0;for(o in t)t.hasOwnProperty(o)&&(i[o]=n[o],n[o]=t[o]);r.call(e);for(o in t)t.hasOwnProperty(o)&&(n[o]=i[o])}function Dg(e,t,r){var i=0,n=void 0,o=void 0,a=void 0;for(o=0;o<t.length;o++)if(n=t[o],n)for(a=0;a<r.length;a++){var s=void 0;n==="border"?s=n+r[a]+"Width":s=n+r[a],i+=parseFloat(ru(e,s))||0}return i}function zT(e){return e!=null&&e==e.window}var Ea={};fx(["Width","Height"],function(e){Ea["doc"+e]=function(t){var r=t.document;return Math.max(r.documentElement["scroll"+e],r.body["scroll"+e],Ea["viewport"+e](r))},Ea["viewport"+e]=function(t){var r="client"+e,i=t.document,n=i.body,o=i.documentElement,a=o[r];return i.compatMode==="CSS1Compat"&&a||n&&n[r]||a}});function DY(e,t,r){if(zT(e))return t==="width"?Ea.viewportWidth(e):Ea.viewportHeight(e);if(e.nodeType===9)return t==="width"?Ea.docWidth(e):Ea.docHeight(e);var i=t==="width"?["Left","Right"]:["Top","Bottom"],n=t==="width"?e.offsetWidth:e.offsetHeight;ru(e);var o=PY(e),a=0;(n==null||n<=0)&&(n=void 0,a=ru(e,t),(a==null||Number(a)<0)&&(a=e.style[t]||0),a=parseFloat(a)||0),r===void 0&&(r=o?dx:hx);var s=n!==void 0||o,c=n||a;if(r===hx)return s?c-Dg(e,["border","padding"],i):a;if(s){var u=r===T3e?-Dg(e,["border"],i):Dg(e,["margin"],i);return c+(r===dx?0:u)}return a+Dg(e,_3e.slice(r),i)}var w3e={position:"absolute",visibility:"hidden",display:"block"};function xY(e){var t=void 0,r=arguments;return e.offsetWidth!==0?t=DY.apply(void 0,r):S3e(e,w3e,function(){t=DY.apply(void 0,r)}),t}function Qh(e,t,r){var i=r;if((typeof t>"u"?"undefined":h3e(t))==="object"){for(var n in t)t.hasOwnProperty(n)&&Qh(e,n,t[n]);return}if(typeof i<"u"){typeof i=="number"&&(i+="px"),e.style[t]=i;return}return ru(e,t)}fx(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Ea["outer"+t]=function(i,n){return i&&xY(i,e,n?E3e:dx)};var r=e==="width"?["Left","Right"]:["Top","Bottom"];Ea[e]=function(i,n){if(n!==void 0){if(i){ru(i);var o=PY(i);return o&&(n+=Dg(i,["padding","border"],r)),Qh(i,e,n)}return}return i&&xY(i,e,hx)}});function A3e(e,t){Qh(e,"position")==="static"&&(e.style.position="relative");var r=CY(e),i={},n=void 0,o=void 0;for(o in t)t.hasOwnProperty(o)&&(n=parseFloat(Qh(e,o))||0,i[o]=n+t[o]-r[o]);Qh(e,i)}var O3e=f3e({getWindow:function(t){var r=t.ownerDocument||t;return r.defaultView||r.parentWindow},offset:function(t,r){if(typeof r<"u")A3e(t,r);else return CY(t)},isWindow:zT,each:fx,css:Qh,clone:function(t){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);var n=t.overflow;if(n)for(var i in t)t.hasOwnProperty(i)&&(r.overflow[i]=t.overflow[i]);return r},scrollLeft:function(t,r){if(zT(t)){if(r===void 0)return sx(t);window.scrollTo(r,lx(t))}else{if(r===void 0)return t.scrollLeft;t.scrollLeft=r}},scrollTop:function(t,r){if(zT(t)){if(r===void 0)return lx(t);window.scrollTo(sx(t),r)}else{if(r===void 0)return t.scrollTop;t.scrollTop=r}},viewportWidth:0,viewportHeight:0},Ea),Tr=O3e;function k3e(e,t,r){r=r||{},t.nodeType===9&&(t=Tr.getWindow(t));var i=r.allowHorizontalScroll,n=r.onlyScrollIfNeeded,o=r.alignWithTop,a=r.alignWithLeft,s=r.offsetTop||0,c=r.offsetLeft||0,u=r.offsetBottom||0,l=r.offsetRight||0;i=i===void 0?!0:i;var h=Tr.isWindow(t),f=Tr.offset(e),d=Tr.outerHeight(e),p=Tr.outerWidth(e),m=void 0,g=void 0,v=void 0,_=void 0,y=void 0,b=void 0,T=void 0,S=void 0,k=void 0,O=void 0;h?(T=t,O=Tr.height(T),k=Tr.width(T),S={left:Tr.scrollLeft(T),top:Tr.scrollTop(T)},y={left:f.left-S.left-c,top:f.top-S.top-s},b={left:f.left+p-(S.left+k)+l,top:f.top+d-(S.top+O)+u},_=S):(m=Tr.offset(t),g=t.clientHeight,v=t.clientWidth,_={left:t.scrollLeft,top:t.scrollTop},y={left:f.left-(m.left+(parseFloat(Tr.css(t,"borderLeftWidth"))||0))-c,top:f.top-(m.top+(parseFloat(Tr.css(t,"borderTopWidth"))||0))-s},b={left:f.left+p-(m.left+v+(parseFloat(Tr.css(t,"borderRightWidth"))||0))+l,top:f.top+d-(m.top+g+(parseFloat(Tr.css(t,"borderBottomWidth"))||0))+u}),y.top<0||b.top>0?o===!0?Tr.scrollTop(t,_.top+y.top):o===!1?Tr.scrollTop(t,_.top+b.top):y.top<0?Tr.scrollTop(t,_.top+y.top):Tr.scrollTop(t,_.top+b.top):n||(o=o===void 0?!0:!!o,o?Tr.scrollTop(t,_.top+y.top):Tr.scrollTop(t,_.top+b.top)),i&&(y.left<0||b.left>0?a===!0?Tr.scrollLeft(t,_.left+y.left):a===!1?Tr.scrollLeft(t,_.left+b.left):y.left<0?Tr.scrollLeft(t,_.left+y.left):Tr.scrollLeft(t,_.left+b.left):n||(a=a===void 0?!0:!!a,a?Tr.scrollLeft(t,_.left+y.left):Tr.scrollLeft(t,_.left+b.left)))}var I3e=k3e,C3e=I3e;const P3e=ui(C3e);function VT(){return VT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},VT.apply(this,arguments)}function D3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,N3e(i.key),i)}}function x3e(e,t,r){return t&&NY(e.prototype,t),r&&NY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function N3e(e){var t=R3e(e,"string");return typeof t=="symbol"?t:String(t)}function R3e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&px(e,t)}function px(e,t){return px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},px(e,t)}function L3e(e){var t=$3e();return function(){var i=WT(e),n;if(t){var o=WT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return B3e(this,n)}}function B3e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H3e(e)}function H3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function WT(e){return WT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},WT(e)}const xg=[];let mx=function(e){M3e(r,e);var t=L3e(r);function r(i){var n;return D3e(this,r),n=t.call(this,i),n.state={highlightedIndex:null,menuTop:0,menuLeft:0,menuWidth:0,isOpen:!1},n.keyDownHandlers={ArrowDown(o){o.preventDefault();const a=this.getFilteredItems().length;if(!a)return;const{highlightedIndex:s}=this.state,c=s===null||s===a-1?0:s+1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:c,isOpen:!0})},ArrowUp(o){o.preventDefault();const a=this.getFilteredItems().length;if(!a)return;const{highlightedIndex:s}=this.state,c=s===0||s===null?a-1:s-1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:c,isOpen:!0})},Enter(o){if(this.state.isOpen!==!1)if(this.state.highlightedIndex===null)this.setState({isOpen:!1},()=>{this.inputEl.select()});else{o.preventDefault();const a=this.getFilteredItems()[this.state.highlightedIndex],s=this.props.getItemValue(a);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.inputEl.setSelectionRange(s.length,s.length),this.props.onSelect(s,a)})}},Escape(){this.setState({highlightedIndex:null,isOpen:!1})}},n}return x3e(r,[{key:"getInitialState",value:function(){return{isOpen:!1,highlightedIndex:null}}},{key:"UNSAFE_componentWillMount",value:function(){this._ignoreBlur=!1,this._performAutoCompleteOnUpdate=!1,this._performAutoCompleteOnKeyUp=!1}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){this._performAutoCompleteOnUpdate=!0,(this.props.items!==n.items||this.state.highlightedIndex>=n.items.length)&&this.setState({highlightedIndex:null})}},{key:"componentDidUpdate",value:function(n,o){this.state.isOpen===!0&&o.isOpen===!1&&this.setMenuPositions(),this.state.isOpen&&this._performAutoCompleteOnUpdate&&(this._performAutoCompleteOnUpdate=!1,this.maybeAutoCompleteText()),this.maybeScrollItemIntoView(),o.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen,this.inputEl)}},{key:"maybeScrollItemIntoView",value:function(){if(this.state.isOpen===!0&&this.state.highlightedIndex!==null){const n=this.refs[`item-${this.state.highlightedIndex}`],o=this.refs.menu;n&&P3e(Br.findDOMNode(n),Br.findDOMNode(o),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(n){this.keyDownHandlers[n.key]?this.keyDownHandlers[n.key].call(this,n):this.setState({highlightedIndex:null,isOpen:!0})}},{key:"handleChange",value:function(n){this._performAutoCompleteOnKeyUp=!0,this.props.onChange(n,n.target.value)}},{key:"handleKeyUp",value:function(){this._performAutoCompleteOnKeyUp&&(this._performAutoCompleteOnKeyUp=!1,this.maybeAutoCompleteText())}},{key:"getFilteredItems",value:function(){let n=this.props.items;return this.props.shouldItemRender&&(n=n.filter(o=>this.props.shouldItemRender(o,this.props.value))),this.props.sortItems&&n.sort((o,a)=>this.props.sortItems(o,a,this.props.value)),n}},{key:"maybeAutoCompleteText",value:function(){if(!this.props.autoHighlight||this.props.value==="")return;const{highlightedIndex:n}=this.state,o=this.getFilteredItems();if(o.length===0)return;const a=n!==null?o[n]:o[0];this.props.getItemValue(a).toLowerCase().indexOf(this.props.value.toLowerCase())===0&&n===null&&this.setState({highlightedIndex:0})}},{key:"setMenuPositions",value:function(){const n=this.inputEl,o=n.getBoundingClientRect(),a=globalThis.window.getComputedStyle(n),s=parseInt(a.marginBottom,10)||0,c=parseInt(a.marginLeft,10)||0,u=parseInt(a.marginRight,10)||0;this.setState({menuTop:o.bottom+s,menuLeft:o.left+c,menuWidth:o.width+c+u})}},{key:"highlightItemFromMouse",value:function(n){this.setState({highlightedIndex:n})}},{key:"selectItemFromMouse",value:function(n){const o=this.props.getItemValue(n);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.props.onSelect(o,n),this.inputEl.focus()})}},{key:"setIgnoreBlur",value:function(n){this._ignoreBlur=n}},{key:"renderMenu",value:function(){const n=this.getFilteredItems().map((s,c)=>{const u=this.props.renderItem(s,this.state.highlightedIndex===c,{cursor:"default"});return E.cloneElement(u,{onMouseDown:()=>this.setIgnoreBlur(!0),onMouseEnter:()=>this.highlightItemFromMouse(c),onClick:()=>this.selectItemFromMouse(s),ref:`item-${c}`})}),o={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth};if(!n.length)return null;const a=this.props.renderMenu(n,this.props.value,o);return E.cloneElement(a,{ref:"menu"})}},{key:"handleInputBlur",value:function(){this.props.onFocus&&this.props.onFocus(),!this._ignoreBlur&&this.setState({isOpen:!1,highlightedIndex:null})}},{key:"handleInputFocus",value:function(){if(this.props.onFocus&&this.props.onFocus(!0),this._ignoreBlur){this.setIgnoreBlur(!1);return}this._ignoreClick=!0,this.setState({isOpen:!0})}},{key:"isInputFocused",value:function(){return this.inputEl.ownerDocument&&this.inputEl===this.inputEl.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&this.state.isOpen===!1?this.setState({isOpen:!0}):this.state.highlightedIndex!==null&&!this._ignoreClick&&this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex]),this._ignoreClick=!1}},{key:"composeEventHandlers",value:function(n,o){return o?a=>{n(a),o(a)}:n}},{key:"render",value:function(){this.props.debug&&xg.push({id:xg.length,state:this.state});const{inputProps:n}=this.props;return E.createElement("div",VT({style:{...this.props.wrapperStyle}},this.props.wrapperProps),E.createElement("input",VT({},n,{ref:o=>{this.inputEl=o},"aria-autocomplete":"list",autoComplete:"off",onBlur:this.composeEventHandlers(this.handleInputBlur.bind(this),n.onBlur&&n.onBlur.bind(this)),onChange:this.handleChange.bind(this),onClick:this.composeEventHandlers(this.handleInputClick.bind(this),n.onClick&&n.onClick.bind(this)),onFocus:this.composeEventHandlers(this.handleInputFocus.bind(this),n.onFocus&&n.onFocus.bind(this)),onKeyDown:this.composeEventHandlers(this.handleKeyDown.bind(this),n.onKeyDown&&n.onKeyDown.bind(this)),onKeyUp:this.composeEventHandlers(this.handleKeyUp.bind(this),n.onKeyUp&&n.onKeyUp.bind(this)),role:"combobox",value:this.props.value})),("open"in this.props?this.props.open:this.state.isOpen)&&this.renderMenu(),this.props.debug&&E.createElement("pre",{style:{marginLeft:300}},JSON.stringify(xg.slice(xg.length-5,xg.length),null,2)))}}]),r}(E.Component);mx.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},onChange(){},onSelect(){},renderMenu(e,t,r){return E.createElement("div",{style:{...r,...this.menuStyle}},e)},shouldItemRender(){return!0},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,onMenuVisibilityChange(){}},mx.propTypes={autoHighlight:N.bool,debug:N.bool,getItemValue:N.func.isRequired,inputProps:N.object,items:N.array,menuStyle:N.object,onChange:N.func,onFocus:N.func,onMenuVisibilityChange:N.func,onSelect:N.func,open:N.bool,renderItem:N.func.isRequired,renderMenu:N.func,shouldItemRender:N.func,sortItems:N.func,value:N.any,wrapperProps:N.object,wrapperStyle:N.object};const Jh={"genome-position-search":"_genome-position-search_1l2sx_1","genome-position-search-focus":"_genome-position-search-focus_1l2sx_2","genome-position-search-bar":"_genome-position-search-bar_1l2sx_16","genome-position-search-dark":"_genome-position-search-dark_1l2sx_34","genome-position-search-bar-button":"_genome-position-search-bar-button_1l2sx_38","genome-position-search-bar-button-focus":"_genome-position-search-bar-button-focus_1l2sx_39","genome-position-search-bar-icon":"_genome-position-search-bar-icon_1l2sx_62","genome-position-search-bar-icon-focus":"_genome-position-search-bar-icon-focus_1l2sx_63","genome-position-search-bar-suggestions":"_genome-position-search-bar-suggestions_1l2sx_83",btn:"_btn_1l2sx_95","btn-sm":"_btn-sm_1l2sx_116","btn-default":"_btn-default_1l2sx_122"};function F3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,U3e(i.key),i)}}function j3e(e,t,r){return t&&RY(e.prototype,t),r&&RY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function U3e(e){var t=G3e(e,"string");return typeof t=="symbol"?t:String(t)}function G3e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gx(e,t)}function gx(e,t){return gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},gx(e,t)}function V3e(e){var t=Y3e();return function(){var i=YT(e),n;if(t){var o=YT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return W3e(this,n)}}function W3e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MY(e)}function MY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function YT(e){return YT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},YT(e)}let LY=function(e){z3e(r,e);var t=V3e(r);function r(i){var n;return F3e(this,r),n=t.call(this,i),n.mounted=!1,n.uid=xt.nice(),n.chromInfo=null,n.searchField=null,n.autocompleteMenu=null,n.xScale=null,n.yScale=null,n.prevParts=[],n.props.registerViewportChangedListener(n.scalesChanged.bind(MY(n))),n.menuPosition={left:0,top:0},n.positionText="chr4:190,998,876-191,000,255",n.state={genes:[],isFocused:!1,autocompleteServer:n.props.autocompleteServer,autocompleteId:n.props.autocompleteId,availableAssemblies:[],selectedAssembly:null},n.styles={item:{padding:"2px 6px",cursor:"default"},highlightedItem:{color:"white",background:"hsl(200, 50%, 50%)",padding:"2px 6px",cursor:"default"},menu:{border:"solid 1px #ccc"}},n.availableAutocompletes={},n.props.autocompleteId&&(n.availableAutocompletes[n.props.chromInfoId]=new Set([{server:n.props.autocompleteServer,acId:n.props.autocompleteId}])),n.availableChromSizes={},n}return j3e(r,[{key:"componentDidMount",value:function(){this.mounted=!0,Ht(this.autocompleteMenu.inputEl).on("keypress",this.autocompleteKeyPress.bind(this)),this.findAvailableAutocompleteSources(),this.findAvailableChromSizes(),this.props.chromInfoPath&&(this.searchPosition=!0,ca(this.props.chromInfoPath,n=>{if(!n){this.searchPosition=null;return}this.chromInfo=n,this.searchField=new th(this.chromInfo),this.setPositionText()})),this.setPositionText()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.removeViewportChangedListener()}},{key:"onAutocompleteChange",value:function(n,o){this.positionText=o,this.setState({value:o,loading:!0}),this.changedPart=null;const a=o.split(/ /);let s=0;const c=[];let u=!1;for(let l=0;l<a.length;l++){const h=a[l].split(/-/);for(let f=0;f<h.length;f++){if(s+=1,c.push(h[f]),f===0?u=!0:u=!1,f===this.prevParts.length){this.changedPart=s-1;break}if(h[f]!==this.prevParts[f]){this.changedPart=s-1;break}}}if(this.prevParts=c,!!(this.state.autocompleteServer&&this.state.autocompleteId)&&this.changedPart!==null){this.setState({loading:!0});let l=`${this.state.autocompleteServer}/suggest/`;l+=`?d=${this.state.autocompleteId}&ac=${c[this.changedPart].toLowerCase()}`,at.json(l,(h,f)=>{if(h)this.setState({loading:!1,genes:[]});else if(this.changedPart>0&&!u){const d=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${c[this.changedPart-1].toLowerCase()}-${c[this.changedPart].toLowerCase()}`;at.json(d,(p,m)=>{p?this.setState({loading:!1,genes:f}):this.setState({loading:!1,genes:m.concat(f)})},this.props.pubSub)}else this.setState({loading:!1,genes:f})},this.props.pubSub)}}},{key:"setAvailableAssemblies",value:function(){const n=new Set(Yi(this.availableChromSizes)),o=new Set([...n]);this.gpsbForm&&this.setState({availableAssemblies:[...o]})}},{key:"setSelectedAssembly",value:function(n){if(!this.mounted||!this.availableChromSizes[n])return;const o=[...this.availableChromSizes[n]][0];this.setState({autocompleteServer:o.server});const{server:a}=o;if(this.availableAutocompletes[n]){const s=[...this.availableAutocompletes[n]][0].acId;this.props.onSelectedAssemblyChanged(n,s,a),this.gpsbForm&&this.setState({autocompleteId:s})}else this.props.onSelectedAssemblyChanged(n,null,a),this.gpsbForm&&this.setState({autocompleteId:null});this.fetchChromInfo(o.uuid,o.server)}},{key:"setPositionText",value:function(){if(!this.mounted||!this.searchField)return;const n=this.searchField.scalesToPositionText(this.xScale,this.yScale,this.props.twoD);this.prevParts=n.split(/[ -]/),this.gpsbForm&&(this.positionText=n,this.origPositionText=n,this.autocompleteMenu.inputEl.value=n)}},{key:"scalesChanged",value:function(n,o){this.xScale=n,this.yScale=o,this.setPositionText()}},{key:"findAvailableChromSizes",value:function(){this.props.trackSourceServers&&this.props.trackSourceServers.forEach(n=>{at.json(`${n}/available-chrom-sizes/`,(o,a)=>{o?console.error(o):(a.results.forEach(s=>{s.coordSystem in this.availableChromSizes||(this.availableChromSizes[s.coordSystem]=new Set),this.availableChromSizes[s.coordSystem].add({server:n,uuid:s.uuid}),this.setAvailableAssemblies()}),this.searchField||this.fetchChromInfo(this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].uuid:this.props.chromInfoId,this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].server:this.props.chromInfoServer))},this.props.pubSub)})}},{key:"findAvailableAutocompleteSources",value:function(){this.props.trackSourceServers&&this.props.trackSourceServers.forEach(n=>{at.json(`${n}/tilesets/?limit=100&dt=gene-annotation`,(o,a)=>{o?console.error(o):(a.results.forEach(s=>{s.coordSystem in this.availableAutocompletes||(this.availableAutocompletes[s.coordSystem]=new Set),this.availableAutocompletes[s.coordSystem].add({server:n,acId:s.uuid}),this.setAvailableAssemblies()}),this.state.autocompleteId||this.gpsbForm&&this.availableAutocompletes[this.props.chromInfoId]&&this.setState({autocompleteId:[...this.availableAutocompletes[this.props.chromInfoId]][0].acId}))},this.props.pubSub)})}},{key:"fetchChromInfo",value:function(n,o){ca(`${o}/chrom-sizes/?id=${n}`,a=>{a&&(at.json(`${o}/tileset_info/?d=${n}`,(s,c)=>{s||this.gpsbForm&&this.setState({selectedAssembly:c[n].coordSystem})},this.props.pubSub),this.chromInfo=a,this.searchField=new th(this.chromInfo),this.setPositionText())},this.props.pubSub)}},{key:"autocompleteKeyPress",value:function(n){n.keyCode===13&&this.buttonClick()}},{key:"genePositionToSearchBarText",value:function(n){}},{key:"replaceGenesWithLoadedPositions",value:function(n){const o=this.positionText,a=o.split(" ");let s=!1;for(let u=0;u<a.length;u++){const l=a[u].split("-");let h=0,f=0,d="";for(;h<l.length;){for(f=l.length;f>h;){const p=l.slice(h,f).join("-");if(n[p.toLowerCase()]){const m=n[p.toLowerCase()],g=Math.floor((m.txEnd-m.txStart)/4);h===0&&f<l.length?d=`${m.chr}:${m.txStart-g}`:h===0&&f===l.length?d=`${m.chr}:${m.txStart-g}-${m.txEnd+g}`:d+=`- ${m.chr}:${m.txEnd+g}`,s=!0;break}else f===h+1&&(d.length&&(d+="-"),d+=p);f-=1}h=f+1}a[u]=d}const c=a.join(" ");return this.prevParts=c.split(/[ -]/),this.positionText=c,this.setState({value:c}),s?o:null}},{key:"replaceGenesWithPositions",value:function(n){const o=this.positionText.split(/[ -]/),a=[];for(let s=0;s<o.length;s++){if(o[s].length===0)continue;const c=this.searchField.parsePosition(o[s])[2];if(c===null||Number.isNaN(+c)){const u=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${o[s].toLowerCase()}`;a.push(at.json(u,ql,this.props.pubSub))}}Promise.all(a).then(s=>{if(s){const c={};for(let l=0;l<s.length;l++)if(s[l][0])for(let h=0;h<s[l].length;h++)c[s[l][h].geneName.toLowerCase()]=s[l][h];const u=this.replaceGenesWithLoadedPositions(c);n(u)}}).catch(s=>console.error(s))}},{key:"buttonClick",value:function(){this.setState({genes:[]}),this.replaceGenesWithPositions(n=>{const o=this.positionText;if(this.searchField!==null){const a=this.searchField.searchPosition(o),s=a[0];let c=a[1];if(!s){this.setPositionText();return}if(s&&(Number.isNaN(+s[0])||Number.isNaN(+s[1]))||c&&(Number.isNaN(+c[0])||Number.isNaN(+c[1])))return;c||(c=s);const u=this.xScale.copy().domain(s),l=this.yScale.copy().domain(c),[h,f,d]=tn(u,l);n&&this.props.onGeneSearch({geneSymbol:n,range:s,centerX:h,centerY:f}),this.props.setCenters(h,f,d,s5)}})}},{key:"searchFieldSubmit",value:function(){this.buttonClick()}},{key:"pathJoin",value:function(n,o){const a=o||"/",s=new RegExp(`${a}{1,}`,"g");return n.join(a).replace(s,a)}},{key:"geneSelected",value:function(n,o){const a=this.positionText.split(" ");let s=this.changedPart;for(let c=0;c<a.length;c++){const u=a[c].split("-"),l=o.geneName.split("-");if(s>u.length-1)s-=u.length;else{if(u[s]=o.geneName,l.length===2&&s>0&&u[s-1].toLowerCase()===l[0].toLowerCase()){const h=u.slice(0,s-1);h.push(l.join("-")),s<u.length-1&&h.push(u.slice(s+1)),a[c]=h.join("-")}else a[c]=u.join("-");break}}this.prevParts=a.join(" ").split(/[ -]/),this.positionText=a.join(" "),this.setState({value:a.join(" "),genes:[]})}},{key:"handleMenuVisibilityChange",value:function(n,o){const a=o.getBoundingClientRect();this.menuPosition={left:a.left,top:a.top+a.height},this.setState({menuOpened:n})}},{key:"handleRenderMenu",value:function(n){return E.createElement(ml,null,E.createElement("div",{className:Jh["genome-position-search-bar-suggestions"],style:{left:this.menuPosition.left,top:this.menuPosition.top}},n))}},{key:"handleAssemblySelectEvt",value:function(n){this.handleAssemblySelect(n.target.value)}},{key:"handleAssemblySelect",value:function(n){this.setSelectedAssembly(n),this.setState({selectedAssembly:n})}},{key:"focusHandler",value:function(n){this.setState({isFocused:n})}},{key:"render",value:function(){const n=this.state.availableAssemblies.map(o=>E.createElement("option",{key:o,value:o},o));return E.createElement("div",{ref:o=>{this.gpsbForm=o},className:Zt({[Jh["genome-position-search-focus"]]:this.state.isFocused,[Jh["genome-position-search"]]:!this.state.isFocused,[Jh["genome-position-search-dark"]]:this.props.theme===mr})},!this.props.hideAvailableAssemblies&&E.createElement("select",{ref:o=>{this.assemblyPickButton=o},className:Jh["genome-position-search-bar-button"],id:this.uid,onChange:this.handleAssemblySelectEvt.bind(this),value:this.state.selectedAssembly||void 0},n),E.createElement(mx,{ref:o=>{this.autocompleteMenu=o},getItemValue:o=>o.geneName,inputProps:{className:Jh["genome-position-search-bar"],title:"Current location: enter a symbol or location to change the position of the current view"},items:this.state.genes,menuStyle:{position:"absolute",left:this.menuPosition.left,top:this.menuPosition.top,border:"1px solid black"},onChange:this.onAutocompleteChange.bind(this),onFocus:this.focusHandler.bind(this),onMenuVisibilityChange:this.handleMenuVisibilityChange.bind(this),onSelect:(o,a)=>this.geneSelected(o,a),onSubmit:this.searchFieldSubmit.bind(this),renderItem:(o,a)=>E.createElement("div",{key:o.refseqid,id:o.refseqid,style:a?this.styles.highlightedItem:this.styles.item},o.geneName),renderMenu:this.handleRenderMenu.bind(this),value:this.state.selectedAssembly?this.positionText:"No valid assembly selected",wrapperStyle:{width:"100%"}}),E.createElement(g5,{onClick:this.buttonClick.bind(this),theStyle:"multitrack-header-icon"}))}}]),r}(E.Component);LY.propTypes={autocompleteId:N.string,autocompleteServer:N.string,chromInfoId:N.string,chromInfoServer:N.string,chromInfoPath:N.string,hideAvailableAssemblies:N.bool,isFocused:N.bool,pubSub:N.object,onFocus:N.func,onGeneSearch:N.func,onSelectedAssemblyChanged:N.func,registerViewportChangedListener:N.func,removeViewportChangedListener:N.func,setCenters:N.func,theme:N.symbol.isRequired,trackSourceServers:N.array,twoD:N.bool};const q3e=Mf(hc(LY)),X3e={"export-link-dialog-wrapper":"_export-link-dialog-wrapper_p9gxw_1"};function K3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Q3e(i.key),i)}}function Z3e(e,t,r){return t&&BY(e.prototype,t),r&&BY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q3e(e){var t=J3e(e,"string");return typeof t=="symbol"?t:String(t)}function J3e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vx(e,t)}function vx(e,t){return vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},vx(e,t)}function tVe(e){var t=iVe();return function(){var i=qT(e),n;if(t){var o=qT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return rVe(this,n)}}function rVe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nVe(e)}function nVe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qT(e){return qT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qT(e)}let yx=function(e){eVe(r,e);var t=tVe(r);function r(){return K3e(this,r),t.apply(this,arguments)}return Z3e(r,[{key:"render",value:function(){return E.createElement(lg,{okayOnly:!0,okayTitle:"Done",onOkay:this.props.onDone,title:"Share view link"},E.createElement("div",{className:X3e["export-link-dialog-wrapper"]},E.createElement("input",{ref:n=>{n&&(this.input=n,n.focus(),n.select())},onClick:n=>{n.target.select()},placeholder:"Generating the link...",readOnly:!0,value:this.props.url}),E.createElement(fs,{onClick:n=>{this.input.select(),document.execCommand("copy")}},"Copy")))}}]),r}(E.Component);yx.defaultProps={onDone:()=>{},url:""},yx.propTypes={onDone:N.func,url:N.string};function oVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,sVe(i.key),i)}}function aVe(e,t,r){return t&&HY(e.prototype,t),r&&HY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sVe(e){var t=lVe(e,"string");return typeof t=="symbol"?t:String(t)}function lVe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bx(e,t)}function bx(e,t){return bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},bx(e,t)}function uVe(e){var t=dVe();return function(){var i=XT(e),n;if(t){var o=XT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return fVe(this,n)}}function fVe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hVe(e)}function hVe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function XT(e){return XT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},XT(e)}let $Y=function(e){cVe(r,e);var t=uVe(r);function r(i){var n;return oVe(this,r),n=t.call(this,i),n.state={submenuShown:!1},n}return aVe(r,[{key:"getConfigureViewMenu",value:function(n,o){const a=["backgroundColor"],s={},c={};for(const u of a)if(u in Object.keys(wn)&&(s[u]={name:wn[u].name},wn[u].inlineOptions))for(const l in wn[u].inlineOptions){const h=wn[u].inlineOptions[l];s[u].children||(s[u].children={});const f={name:h.name,value:h.value};f.handler=()=>{c[u]=h.value,this.props.onOptionsChanged(c)},s[u].children[l]=f}return E.createElement(KD,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:s,orientation:this.state.orientation,parentBbox:o,position:n,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const n=this.state.submenuSourceBbox,o=this.state.orientation==="left"?{left:this.state.left,top:n.top}:{left:this.state.left+n.width+7,top:n.top};return this.state.submenuShown.option==="options"?this.getConfigureViewMenu(o,n):E.createElement("div",null)}return E.createElement("div",null)}},{key:"render",value:function(){return E.createElement("div",{ref:n=>{this.div=n},className:Zt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===mr}),"data-menu-type":"ConfigViewMenu",style:{left:this.state.left,top:this.state.top}},E.createElement(St,{onClick:n=>this.props.onTogglePositionSearchBox(n)},"Toggle position search box"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:n=>this.props.onZoomToData(n)},"Zoom to data extent"),E.createElement(St,{onClick:n=>this.props.onClearView(n)},"Clear View"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:n=>this.props.onYankZoom(n)},"Take zoom from"),E.createElement(St,{onClick:n=>this.props.onYankLocation(n)},"Take location from"),E.createElement(St,{onClick:n=>this.props.onYankZoomAndLocation(n)},"Take zoom and location from"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:this.props.onLockZoom},"Lock zoom with"),E.createElement(St,{onClick:this.props.onLockLocation},"Lock location with"),E.createElement(St,{onClick:this.props.onLockZoomAndLocation},"Lock zoom and location with"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:this.props.onTakeAndLockZoomAndLocation},"Take and lock zoom and location with"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:n=>this.props.onUnlockZoom(n)},"Unlock zoom"),E.createElement(St,{onClick:n=>this.props.onUnlockLocation(n)},"Unlock location"),E.createElement(St,{onClick:n=>this.props.onUnlockZoomAndLocation(n)},"Unlock zoom and location"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:n=>this.props.onProjectViewport(n)},"Show this viewport on"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:n=>this.props.onEditViewConfig(n)},"Edit view config"),E.createElement("hr",{className:mt["context-menu-hr"]}),E.createElement(St,{onClick:()=>this.props.onExportSVG()},"Export views as SVG"),E.createElement(St,{onClick:()=>this.props.onExportPNG()},"Export views as PNG"),E.createElement(St,{onClick:()=>this.props.onExportViewAsJSON()},"Export views as JSON"),E.createElement(St,{onClick:()=>this.props.onExportViewAsLink()},"Export views as Link"),this.getSubmenu())}}]),r}(pl);$Y.propTypes={onEditViewConfig:N.func.isRequired,onExportSVG:N.func,onExportPNG:N.func,onExportViewAsJSON:N.func,onExportViewAsLink:N.func,onLockLocation:N.func,onLockZoom:N.func,onLockZoomAndLocation:N.func,onProjectViewport:N.func,onTakeAndLockZoomAndLocation:N.func,onTogglePositionSearchBox:N.func,onUnlockLocation:N.func,onUnlockZoom:N.func,onUnlockZoomAndLocation:N.func,onYankLocation:N.func,onYankZoom:N.func,onYankZoomAndLocation:N.func,onZoomToData:N.func,theme:N.symbol};const io={"add-track-position-table":"_add-track-position-table_wdy5w_1","add-track-position-table-dark":"_add-track-position-table-dark_wdy5w_7","add-track-position-other":"_add-track-position-other_wdy5w_11","add-track-position-top-center":"_add-track-position-top-center_wdy5w_15","add-track-position-middle-left":"_add-track-position-middle-left_wdy5w_30","add-track-position-middle-right":"_add-track-position-middle-right_wdy5w_45","add-track-position-middle-middle":"_add-track-position-middle-middle_wdy5w_60","add-track-position-bottom-middle":"_add-track-position-bottom-middle_wdy5w_71","add-track-position-span":"_add-track-position-span_wdy5w_86"};function FY(e){return E.createElement("div",null,E.createElement("div",{className:io["add-track-position-span"]},"Add Track..."),E.createElement("table",{className:Zt(io["add-track-position-table"],{[io["add-track-position-table-dark"]]:e.theme===mr})},E.createElement("tbody",null,E.createElement("tr",{style:{height:"30px"}},E.createElement("td",{"aria-hidden":"true",className:io["add-track-position-other"]}),E.createElement("td",{className:io["add-track-position-top-center"],onClick:()=>e.onTrackPositionChosen("top")},"top"),E.createElement("td",{"aria-hidden":"true",className:io["add-track-position-other"]})),E.createElement("tr",{style:{height:"80px"}},E.createElement("td",{className:io["add-track-position-middle-left"],onClick:()=>e.onTrackPositionChosen("left")},"left"),E.createElement("td",{className:io["add-track-position-middle-middle"],onClick:()=>e.onTrackPositionChosen("center")},"center"),E.createElement("td",{className:io["add-track-position-middle-right"],onClick:()=>e.onTrackPositionChosen("right")},"right")),E.createElement("tr",{style:{height:"30px"}},E.createElement("td",{"aria-hidden":"true",className:io["add-track-position-other"]}),E.createElement("td",{className:io["add-track-position-bottom-middle"],onClick:()=>e.onTrackPositionChosen("bottom")},"bottom"),E.createElement("td",{"aria-hidden":"true",className:io["add-track-position-other"]})))))}FY.propTypes={onTrackPositionChosen:N.func.isRequired,theme:N.symbol.isRequired};const pVe=hc(FY);function mVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jY(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,vVe(i.key),i)}}function gVe(e,t,r){return t&&jY(e.prototype,t),r&&jY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vVe(e){var t=yVe(e,"string");return typeof t=="symbol"?t:String(t)}function yVe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_x(e,t)}function _x(e,t){return _x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},_x(e,t)}function _Ve(e){var t=EVe();return function(){var i=KT(e),n;if(t){var o=KT(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return TVe(this,n)}}function TVe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UY(e)}function UY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function KT(e){return KT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},KT(e)}let Tx=function(e){bVe(r,e);var t=_Ve(r);function r(i){var n;return mVe(this,r),n=t.call(this,i),n.configImg=null,n.plusImg=null,n.state={addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null,configMenuUid:null,configMenuPosition:null,isFocused:!1,width:-1},n.handleTrackPositionChosenBound=n.handleTrackPositionChosen.bind(UY(n)),n}return gVe(r,[{key:"componentDidMount",value:function(){this.setState({width:this.el.clientWidth})}},{key:"checkWidth",value:function(){const n=this.el.clientWidth;n!==this.state.width&&this.setState({width:n})}},{key:"handleConfigMenuOpened",value:function(n){this.setState({configMenuUid:n,configMenuPosition:this.configImg.getBoundingClientRect()})}},{key:"handleAddTrackPositionMenuOpened",value:function(n){this.setState({addTrackPositionMenuUid:n,addTrackPositionMenuPosition:this.plusImg.getBoundingClientRect()})}},{key:"handleTrackPositionChosen",value:function(n){this.props.onTrackPositionChosen(n),this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},{key:"render",value:function(){let n=null,o=null;this.state.addTrackPositionMenuPosition&&(o=E.createElement(ml,{onMenuClosed:()=>{this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},E.createElement(pl,{orientation:"left",position:this.state.addTrackPositionMenuPosition,theme:this.props.theme},E.createElement(pVe,{onTrackPositionChosen:this.handleTrackPositionChosenBound})))),this.state.configMenuUid&&(n=E.createElement(ml,{onMenuClosed:()=>this.setState({configMenuUid:null})},E.createElement($Y,{onClearView:()=>{this.setState({configMenuUid:null}),this.props.onClearView()},onEditViewConfig:()=>{this.setState({configMenuUid:null}),this.props.onEditViewConfig(this.state.configMenuUid)},onExportPNG:()=>{this.setState({configMenuUid:null}),this.props.onExportPNG()},onExportSVG:()=>{this.setState({configMenuUid:null}),this.props.onExportSVG()},onExportViewAsJSON:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsJSON()},onExportViewAsLink:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsLink()},onLockLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockLocation(this.state.configMenuUid)},onLockZoom:()=>{this.setState({configMenuUid:null}),this.props.onLockZoom(this.state.configMenuUid)},onLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockZoomAndLocation(this.state.configMenuUid)},onOptionsChanged:u=>{this.props.onViewOptionsChanged(u),this.setState({configMenuUid:null})},onProjectViewport:()=>{this.setState({configMenuUid:null}),this.props.onProjectViewport(this.state.configMenuUid)},onTakeAndLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onTakeAndLockZoomAndLocation(this.state.configMenuUid)},onTogglePositionSearchBox:()=>{this.setState({configMenuUid:null}),this.props.onTogglePositionSearchBox(this.state.configMenuUid)},onUnlockLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockLocation(this.state.configMenuUid)},onUnlockZoom:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoom(this.state.configMenuUid)},onUnlockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoomAndLocation(this.state.configMenuUid)},onYankLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankLocation(this.state.configMenuUid)},onYankZoom:()=>{this.setState({configMenuUid:null}),this.props.onYankZoom(this.state.configMenuUid)},onYankZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankZoomAndLocation(this.state.configMenuUid)},onZoomToData:()=>{this.setState({configMenuUid:null}),this.props.onZoomToData(this.state.configMenuUid)},orientation:"left",position:this.state.configMenuPosition,theme:this.props.theme})));const a=this.props.getGenomePositionSearchBox(this.state.isFocused,u=>{this.setState({isFocused:u})}),s=Zt(this.state.isFocused?Xi["multitrack-header-focus"]:Xi["multitrack-header"],{[Xi["multitrack-header-dark"]]:this.props.theme===mr}),c=this.state.width<=l5?Xi["multitrack-header-icon-squeazed"]:Xi["multitrack-header-icon"];return E.createElement("div",{ref:u=>{this.el=u},className:s},E.createElement("div",{className:Xi["multitrack-header-left"]},this.props.mouseTool===qi&&E.createElement("svg",{className:Zt(Xi["mouse-tool-selection"],c),title:"Selection tool active"},E.createElement("use",{xlinkHref:"#select"})),E.createElement("div",{className:Xi["multitrack-header-grabber"],title:"Drag to move the view"},E.createElement("div",null),E.createElement("div",null),E.createElement("div",null)),this.state.width>c5&&E.createElement("div",{className:Xi["multitrack-header-search"]},this.props.isGenomePositionSearchBoxVisible&&a)),E.createElement("nav",{className:Xi["multitrack-header-nav-list"]},E.createElement("svg",{className:c,onClick:this.props.onAddView},E.createElement("title",null,"Add new view (clone this view)"),E.createElement("use",{xlinkHref:"#copy"})),E.createElement("svg",{ref:u=>{this.configImg=u},className:c,onClick:()=>this.handleConfigMenuOpened(this.props.viewUid)},E.createElement("title",null,"Configure this view"),E.createElement("use",{xlinkHref:"#cog"})),E.createElement("svg",{ref:u=>{this.plusImg=u},className:c,onClick:()=>this.handleAddTrackPositionMenuOpened(this.props.viewUid)},E.createElement("title",null,"Add Track"),E.createElement("use",{xlinkHref:"#plus"})),E.createElement("svg",{className:c,onClick:this.props.onCloseView},E.createElement("title",null,"Close View"),E.createElement("use",{xlinkHref:"#cross"}))),n,o)}}]),r}(E.Component);Tx.defaultProps={isGenomePositionSearchBoxVisible:!1},Tx.propTypes={getGenomePositionSearchBox:N.func.isRequired,isGenomePositionSearchBoxVisible:N.bool,mouseTool:N.string.isRequired,onAddView:N.func.isRequired,onClearView:N.func.isRequired,onCloseView:N.func.isRequired,onEditViewConfig:N.func.isRequired,onExportSVG:N.func.isRequired,onExportPNG:N.func.isRequired,onExportViewsAsJSON:N.func.isRequired,onExportViewsAsLink:N.func.isRequired,onLockLocation:N.func.isRequired,onLockZoom:N.func.isRequired,onLockZoomAndLocation:N.func.isRequired,onProjectViewport:N.func.isRequired,onTakeAndLockZoomAndLocation:N.func.isRequired,onTogglePositionSearchBox:N.func.isRequired,onTrackPositionChosen:N.func.isRequired,onUnlockLocation:N.func.isRequired,onUnlockZoom:N.func.isRequired,onUnlockZoomAndLocation:N.func.isRequired,onViewOptionsChanged:N.func.isRequired,onYankLocation:N.func.isRequired,onYankZoom:N.func.isRequired,onYankZoomAndLocation:N.func.isRequired,onZoomToData:N.func.isRequired,theme:N.symbol.isRequired,viewUid:N.string.isRequired};const SVe=hc(Tx);var GY={};Object.defineProperty(GY,"__esModule",{value:!0});var gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},wVe=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),AVe=E,Ng=OVe(AVe);function OVe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function kVe(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}function IVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zY(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function CVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PVe=13,DVe=9,xVe=8,NVe=89,ZT=90,RVe=77,VY=57,WY=219,YY=222,qY=192,MVe=27,XY=100,LVe=3e3,BVe="navigator"in globalThis&&/Win/i.test(navigator.platform),Ex="navigator"in globalThis&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),QT="npm__react-simple-code-editor__textarea",HVe=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`+QT+`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`+QT+` {
    color: transparent !important;
  }

  .`+QT+`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`,KY=function(e){CVe(t,e);function t(){var r,i,n,o;IVe(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return o=(i=(n=zY(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),n),n.state={capture:!0},n._recordCurrentState=function(){var u=n._input;if(u){var l=u.value,h=u.selectionStart,f=u.selectionEnd;n._recordChange({value:l,selectionStart:h,selectionEnd:f})}},n._getLines=function(u,l){return u.substring(0,l).split(`
`)},n._recordChange=function(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h=n._history,f=h.stack,d=h.offset;if(f.length&&d>-1){n._history.stack=f.slice(0,d+1);var p=n._history.stack.length;if(p>XY){var m=p-XY;n._history.stack=f.slice(m,p),n._history.offset=Math.max(n._history.offset-m,0)}}var g=Date.now();if(l){var v=n._history.stack[n._history.offset];if(v&&g-v.timestamp<LVe){var _=/[^a-z0-9]([a-z0-9]+)$/i,y=n._getLines(v.value,v.selectionStart).pop().match(_),b=n._getLines(u.value,u.selectionStart).pop().match(_);if(y&&b&&b[1].startsWith(y[1])){n._history.stack[n._history.offset]=gl({},u,{timestamp:g});return}}}n._history.stack.push(gl({},u,{timestamp:g})),n._history.offset++},n._updateInput=function(u){var l=n._input;l&&(l.value=u.value,l.selectionStart=u.selectionStart,l.selectionEnd=u.selectionEnd,n.props.onValueChange(u.value))},n._applyEdits=function(u){var l=n._input,h=n._history.stack[n._history.offset];h&&l&&(n._history.stack[n._history.offset]=gl({},h,{selectionStart:l.selectionStart,selectionEnd:l.selectionEnd})),n._recordChange(u),n._updateInput(u)},n._undoEdit=function(){var u=n._history,l=u.stack,h=u.offset,f=l[h-1];f&&(n._updateInput(f),n._history.offset=Math.max(h-1,0))},n._redoEdit=function(){var u=n._history,l=u.stack,h=u.offset,f=l[h+1];f&&(n._updateInput(f),n._history.offset=Math.min(h+1,l.length-1))},n._handleKeyDown=function(u){var l=n.props,h=l.tabSize,f=l.insertSpaces,d=l.ignoreTabKey,p=l.onKeyDown;if(!(p&&(p(u),u.defaultPrevented))){u.keyCode===MVe&&u.target.blur();var m=u.target,g=m.value,v=m.selectionStart,_=m.selectionEnd,y=(f?" ":"	").repeat(h);if(u.keyCode===DVe&&!d&&n.state.capture)if(u.preventDefault(),u.shiftKey){var b=n._getLines(g,v),T=b.length-1,S=n._getLines(g,_).length-1,k=g.split(`
`).map(function(de,Z){return Z>=T&&Z<=S&&de.startsWith(y)?de.substring(y.length):de}).join(`
`);if(g!==k){var O=b[T];n._applyEdits({value:k,selectionStart:O.startsWith(y)?v-y.length:v,selectionEnd:_-(g.length-k.length)})}}else if(v!==_){var D=n._getLines(g,v),R=D.length-1,w=n._getLines(g,_).length-1,L=D[R];n._applyEdits({value:g.split(`
`).map(function(de,Z){return Z>=R&&Z<=w?y+de:de}).join(`
`),selectionStart:/\S/.test(L)?v+y.length:v,selectionEnd:_+y.length*(w-R+1)})}else{var B=v+y.length;n._applyEdits({value:g.substring(0,v)+y+g.substring(_),selectionStart:B,selectionEnd:B})}else if(u.keyCode===xVe){var A=v!==_,M=g.substring(0,v);if(M.endsWith(y)&&!A){u.preventDefault();var j=v-y.length;n._applyEdits({value:g.substring(0,v-y.length)+g.substring(_),selectionStart:j,selectionEnd:j})}}else if(u.keyCode===PVe){if(v===_){var W=n._getLines(g,v).pop(),K=W.match(/^\s+/);if(K&&K[0]){u.preventDefault();var oe=`
`+K[0],fe=v+oe.length;n._applyEdits({value:g.substring(0,v)+oe+g.substring(_),selectionStart:fe,selectionEnd:fe})}}}else if(u.keyCode===VY||u.keyCode===WY||u.keyCode===YY||u.keyCode===qY){var Ae=void 0;u.keyCode===VY&&u.shiftKey?Ae=["(",")"]:u.keyCode===WY?u.shiftKey?Ae=["{","}"]:Ae=["[","]"]:u.keyCode===YY?u.shiftKey?Ae=['"','"']:Ae=["'","'"]:u.keyCode===qY&&!u.shiftKey&&(Ae=["`","`"]),v!==_&&Ae&&(u.preventDefault(),n._applyEdits({value:g.substring(0,v)+Ae[0]+g.substring(v,_)+Ae[1]+g.substring(_),selectionStart:v,selectionEnd:_+2}))}else(Ex?u.metaKey&&u.keyCode===ZT:u.ctrlKey&&u.keyCode===ZT)&&!u.shiftKey&&!u.altKey?(u.preventDefault(),n._undoEdit()):(Ex?u.metaKey&&u.keyCode===ZT&&u.shiftKey:BVe?u.ctrlKey&&u.keyCode===NVe:u.ctrlKey&&u.keyCode===ZT&&u.shiftKey)&&!u.altKey?(u.preventDefault(),n._redoEdit()):u.keyCode===RVe&&u.ctrlKey&&(!Ex||u.shiftKey)&&(u.preventDefault(),n.setState(function(de){return{capture:!de.capture}}))}},n._handleChange=function(u){var l=u.target,h=l.value,f=l.selectionStart,d=l.selectionEnd;n._recordChange({value:h,selectionStart:f,selectionEnd:d},!0),n.props.onValueChange(h)},n._history={stack:[],offset:-1},i),zY(n,o)}return wVe(t,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var i=this,n=this.props,o=n.value,a=n.style,s=n.padding,c=n.highlight,u=n.textareaId,l=n.autoFocus,h=n.disabled,f=n.form,d=n.maxLength,p=n.minLength,m=n.name,g=n.placeholder,v=n.readOnly,_=n.required,y=n.onClick,b=n.onFocus,T=n.onBlur,S=n.onKeyUp;n.onKeyDown,n.onValueChange,n.tabSize,n.insertSpaces,n.ignoreTabKey;var k=kVe(n,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"]),O={paddingTop:s,paddingRight:s,paddingBottom:s,paddingLeft:s},D=c(o);return Ng.createElement("div",gl({},k,{style:gl({},Rg.container,a)}),Ng.createElement("textarea",{ref:function(w){return i._input=w},style:gl({},Rg.editor,Rg.textarea,O),className:QT,id:u,value:o,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:y,onKeyUp:S,onFocus:b,onBlur:T,disabled:h,form:f,maxLength:d,minLength:p,name:m,placeholder:g,readOnly:v,required:_,autoFocus:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),Ng.createElement("pre",gl({"aria-hidden":"true",style:gl({},Rg.editor,Rg.highlight,O)},typeof D=="string"?{dangerouslySetInnerHTML:{__html:D+"<br />"}}:{children:D})),Ng.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:HVe}}))}},{key:"session",get:function(){return{history:this._history}},set:function(i){this._history=i.history}}]),t}(Ng.Component);KY.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var $Ve=GY.default=KY,Rg={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},ZY={exports:{}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(i){var n=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,a={},s={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function _(y){return y instanceof c?new c(y.type,_(y.content),y.alias):Array.isArray(y)?y.map(_):y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++o}),_.__id},clone:function _(y,b){b=b||{};var T,S;switch(s.util.type(y)){case"Object":if(S=s.util.objId(y),b[S])return b[S];T={},b[S]=T;for(var k in y)y.hasOwnProperty(k)&&(T[k]=_(y[k],b));return T;case"Array":return S=s.util.objId(y),b[S]?b[S]:(T=[],b[S]=T,y.forEach(function(O,D){T[D]=_(O,b)}),T);default:return y}},getLanguage:function(_){for(;_;){var y=n.exec(_.className);if(y)return y[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,y){_.className=_.className.replace(RegExp(n,"gi"),""),_.classList.add("language-"+y)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(T){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(_){var y=document.getElementsByTagName("script");for(var b in y)if(y[b].src==_)return y[b]}return null}},isActive:function(_,y,b){for(var T="no-"+y;_;){var S=_.classList;if(S.contains(y))return!0;if(S.contains(T))return!1;_=_.parentElement}return!!b}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(_,y){var b=s.util.clone(s.languages[_]);for(var T in y)b[T]=y[T];return b},insertBefore:function(_,y,b,T){T=T||s.languages;var S=T[_],k={};for(var O in S)if(S.hasOwnProperty(O)){if(O==y)for(var D in b)b.hasOwnProperty(D)&&(k[D]=b[D]);b.hasOwnProperty(O)||(k[O]=S[O])}var R=T[_];return T[_]=k,s.languages.DFS(s.languages,function(w,L){L===R&&w!=_&&(this[w]=k)}),k},DFS:function _(y,b,T,S){S=S||{};var k=s.util.objId;for(var O in y)if(y.hasOwnProperty(O)){b.call(y,O,y[O],T||O);var D=y[O],R=s.util.type(D);R==="Object"&&!S[k(D)]?(S[k(D)]=!0,_(D,b,null,S)):R==="Array"&&!S[k(D)]&&(S[k(D)]=!0,_(D,b,O,S))}}},plugins:{},highlightAll:function(_,y){s.highlightAllUnder(document,_,y)},highlightAllUnder:function(_,y,b){var T={callback:b,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),s.hooks.run("before-all-elements-highlight",T);for(var S=0,k;k=T.elements[S++];)s.highlightElement(k,y===!0,T.callback)},highlightElement:function(_,y,b){var T=s.util.getLanguage(_),S=s.languages[T];s.util.setLanguage(_,T);var k=_.parentElement;k&&k.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(k,T);var O=_.textContent,D={element:_,language:T,grammar:S,code:O};function R(L){D.highlightedCode=L,s.hooks.run("before-insert",D),D.element.innerHTML=D.highlightedCode,s.hooks.run("after-highlight",D),s.hooks.run("complete",D),b&&b.call(D.element)}if(s.hooks.run("before-sanity-check",D),k=D.element.parentElement,k&&k.nodeName.toLowerCase()==="pre"&&!k.hasAttribute("tabindex")&&k.setAttribute("tabindex","0"),!D.code){s.hooks.run("complete",D),b&&b.call(D.element);return}if(s.hooks.run("before-highlight",D),!D.grammar){R(s.util.encode(D.code));return}if(y&&i.Worker){var w=new Worker(s.filename);w.onmessage=function(L){R(L.data)},w.postMessage(JSON.stringify({language:D.language,code:D.code,immediateClose:!0}))}else R(s.highlight(D.code,D.grammar,D.language))},highlight:function(_,y,b){var T={code:_,grammar:y,language:b};if(s.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=s.tokenize(T.code,T.grammar),s.hooks.run("after-tokenize",T),c.stringify(s.util.encode(T.tokens),T.language)},tokenize:function(_,y){var b=y.rest;if(b){for(var T in b)y[T]=b[T];delete y.rest}var S=new h;return f(S,S.head,_),l(_,S,y,S.head,0),p(S)},hooks:{all:{},add:function(_,y){var b=s.hooks.all;b[_]=b[_]||[],b[_].push(y)},run:function(_,y){var b=s.hooks.all[_];if(!(!b||!b.length))for(var T=0,S;S=b[T++];)S(y)}},Token:c};i.Prism=s;function c(_,y,b,T){this.type=_,this.content=y,this.alias=b,this.length=(T||"").length|0}c.stringify=function _(y,b){if(typeof y=="string")return y;if(Array.isArray(y)){var T="";return y.forEach(function(R){T+=_(R,b)}),T}var S={type:y.type,content:_(y.content,b),tag:"span",classes:["token",y.type],attributes:{},language:b},k=y.alias;k&&(Array.isArray(k)?Array.prototype.push.apply(S.classes,k):S.classes.push(k)),s.hooks.run("wrap",S);var O="";for(var D in S.attributes)O+=" "+D+'="'+(S.attributes[D]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+O+">"+S.content+"</"+S.tag+">"};function u(_,y,b,T){_.lastIndex=y;var S=_.exec(b);if(S&&T&&S[1]){var k=S[1].length;S.index+=k,S[0]=S[0].slice(k)}return S}function l(_,y,b,T,S,k){for(var O in b)if(!(!b.hasOwnProperty(O)||!b[O])){var D=b[O];D=Array.isArray(D)?D:[D];for(var R=0;R<D.length;++R){if(k&&k.cause==O+","+R)return;var w=D[R],L=w.inside,B=!!w.lookbehind,A=!!w.greedy,M=w.alias;if(A&&!w.pattern.global){var j=w.pattern.toString().match(/[imsuy]*$/)[0];w.pattern=RegExp(w.pattern.source,j+"g")}for(var W=w.pattern||w,K=T.next,oe=S;K!==y.tail&&!(k&&oe>=k.reach);oe+=K.value.length,K=K.next){var fe=K.value;if(y.length>_.length)return;if(!(fe instanceof c)){var Ae=1,de;if(A){if(de=u(W,oe,_,B),!de||de.index>=_.length)break;var Oe=de.index,Z=de.index+de[0].length,ne=oe;for(ne+=K.value.length;Oe>=ne;)K=K.next,ne+=K.value.length;if(ne-=K.value.length,oe=ne,K.value instanceof c)continue;for(var ue=K;ue!==y.tail&&(ne<Z||typeof ue.value=="string");ue=ue.next)Ae++,ne+=ue.value.length;Ae--,fe=_.slice(oe,ne),de.index-=oe}else if(de=u(W,0,fe,B),!de)continue;var Oe=de.index,Ce=de[0],je=fe.slice(0,Oe),Pe=fe.slice(Oe+Ce.length),Ue=oe+fe.length;k&&Ue>k.reach&&(k.reach=Ue);var Ye=K.prev;je&&(Ye=f(y,Ye,je),oe+=je.length),d(y,Ye,Ae);var xe=new c(O,L?s.tokenize(Ce,L):Ce,M,Ce);if(K=f(y,Ye,xe),Pe&&f(y,K,Pe),Ae>1){var qe={cause:O+","+R,reach:Ue};l(_,y,b,K.prev,oe,qe),k&&qe.reach>k.reach&&(k.reach=qe.reach)}}}}}}function h(){var _={value:null,prev:null,next:null},y={value:null,prev:_,next:null};_.next=y,this.head=_,this.tail=y,this.length=0}function f(_,y,b){var T=y.next,S={value:b,prev:y,next:T};return y.next=S,T.prev=S,_.length++,S}function d(_,y,b){for(var T=y.next,S=0;S<b&&T!==_.tail;S++)T=T.next;y.next=T,T.prev=y,_.length-=S}function p(_){for(var y=[],b=_.head.next;b!==_.tail;)y.push(b.value),b=b.next;return y}if(!i.document)return i.addEventListener&&(s.disableWorkerMessageHandler||i.addEventListener("message",function(_){var y=JSON.parse(_.data),b=y.language,T=y.code,S=y.immediateClose;i.postMessage(s.highlight(T,s.languages[b],b)),S&&i.close()},!1)),s;var m=s.util.currentScript();m&&(s.filename=m.src,m.hasAttribute("data-manual")&&(s.manual=!0));function g(){s.manual||s.highlightAll()}if(!s.manual){var v=document.readyState;v==="loading"||v==="interactive"&&m&&m.defer?document.addEventListener("DOMContentLoaded",g):window.requestAnimationFrame?window.requestAnimationFrame(g):window.setTimeout(g,16)}return s}(t);e.exports&&(e.exports=r),typeof globalThis<"u"&&(globalThis.Prism=r)})(ZY);var QY=ZY.exports;Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;var Sx={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,i){i(t)})(De,function(r){function i(){for(var G=arguments.length,$=Array(G),re=0;re<G;re++)$[re]=arguments[re];if($.length>1){$[0]=$[0].slice(0,-1);for(var Te=$.length-1,Se=1;Se<Te;++Se)$[Se]=$[Se].slice(1,-1);return $[Te]=$[Te].slice(1),$.join("")}else return $[0]}function n(G){return"(?:"+G+")"}function o(G){return G===void 0?"undefined":G===null?"null":Object.prototype.toString.call(G).split(" ").pop().split("]").shift().toLowerCase()}function a(G){return G.toUpperCase()}function s(G){return G!=null?G instanceof Array?G:typeof G.length!="number"||G.split||G.setInterval||G.call?[G]:Array.prototype.slice.call(G):[]}function c(G,$){var re=G;if($)for(var Te in $)re[Te]=$[Te];return re}function u(G){var $="[A-Za-z]",re="[0-9]",Te=i(re,"[A-Fa-f]"),Se=n(n("%[EFef]"+Te+"%"+Te+Te+"%"+Te+Te)+"|"+n("%[89A-Fa-f]"+Te+"%"+Te+Te)+"|"+n("%"+Te+Te)),ze="[\\:\\/\\?\\#\\[\\]\\@]",Ve="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ct=i(ze,Ve),yt=G?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ut=G?"[\\uE000-\\uF8FF]":"[]",pt=i($,re,"[\\-\\.\\_\\~]",yt);n($+i($,re,"[\\+\\-\\.]")+"*"),n(n(Se+"|"+i(pt,Ve,"[\\:]"))+"*");var Lt=n(n("25[0-5]")+"|"+n("2[0-4]"+re)+"|"+n("1"+re+re)+"|"+n("0?[1-9]"+re)+"|0?0?"+re),tr=n(Lt+"\\."+Lt+"\\."+Lt+"\\."+Lt),ut=n(Te+"{1,4}"),jt=n(n(ut+"\\:"+ut)+"|"+tr),rr=n(n(ut+"\\:")+"{6}"+jt),ir=n("\\:\\:"+n(ut+"\\:")+"{5}"+jt),Ar=n(n(ut)+"?\\:\\:"+n(ut+"\\:")+"{4}"+jt),Gn=n(n(n(ut+"\\:")+"{0,1}"+ut)+"?\\:\\:"+n(ut+"\\:")+"{3}"+jt),Fe=n(n(n(ut+"\\:")+"{0,2}"+ut)+"?\\:\\:"+n(ut+"\\:")+"{2}"+jt),et=n(n(n(ut+"\\:")+"{0,3}"+ut)+"?\\:\\:"+ut+"\\:"+jt),kt=n(n(n(ut+"\\:")+"{0,4}"+ut)+"?\\:\\:"+jt),Tt=n(n(n(ut+"\\:")+"{0,5}"+ut)+"?\\:\\:"+ut),ht=n(n(n(ut+"\\:")+"{0,6}"+ut)+"?\\:\\:"),Gt=n([rr,ir,Ar,Gn,Fe,et,kt,Tt,ht].join("|")),At=n(n(pt+"|"+Se)+"+");n("[vV]"+Te+"+\\."+i(pt,Ve,"[\\:]")+"+"),n(n(Se+"|"+i(pt,Ve))+"*");var Pt=n(Se+"|"+i(pt,Ve,"[\\:\\@]"));return n(n(Se+"|"+i(pt,Ve,"[\\@]"))+"+"),n(n(Pt+"|"+i("[\\/\\?]",Ut))+"*"),{NOT_SCHEME:new RegExp(i("[^]",$,re,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(i("[^\\%\\:]",pt,Ve),"g"),NOT_HOST:new RegExp(i("[^\\%\\[\\]\\:]",pt,Ve),"g"),NOT_PATH:new RegExp(i("[^\\%\\/\\:\\@]",pt,Ve),"g"),NOT_PATH_NOSCHEME:new RegExp(i("[^\\%\\/\\@]",pt,Ve),"g"),NOT_QUERY:new RegExp(i("[^\\%]",pt,Ve,"[\\:\\@\\/\\?]",Ut),"g"),NOT_FRAGMENT:new RegExp(i("[^\\%]",pt,Ve,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(i("[^]",pt,Ve),"g"),UNRESERVED:new RegExp(pt,"g"),OTHER_CHARS:new RegExp(i("[^\\%]",pt,ct),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Gt+")"+n(n("\\%25|\\%(?!"+Te+"{2})")+"("+At+")")+"?\\]?$")}}var l=u(!1),h=u(!0),f=function(){function G($,re){var Te=[],Se=!0,ze=!1,Ve=void 0;try{for(var ct=$[Symbol.iterator](),yt;!(Se=(yt=ct.next()).done)&&(Te.push(yt.value),!(re&&Te.length===re));Se=!0);}catch(Ut){ze=!0,Ve=Ut}finally{try{!Se&&ct.return&&ct.return()}finally{if(ze)throw Ve}}return Te}return function($,re){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return G($,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(G){if(Array.isArray(G)){for(var $=0,re=Array(G.length);$<G.length;$++)re[$]=G[$];return re}else return Array.from(G)},p=2147483647,m=36,g=1,v=26,_=38,y=700,b=72,T=128,S="-",k=/^xn--/,O=/[^\0-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=m-g,L=Math.floor,B=String.fromCharCode;function A(G){throw new RangeError(R[G])}function M(G,$){for(var re=[],Te=G.length;Te--;)re[Te]=$(G[Te]);return re}function j(G,$){var re=G.split("@"),Te="";re.length>1&&(Te=re[0]+"@",G=re[1]),G=G.replace(D,".");var Se=G.split("."),ze=M(Se,$).join(".");return Te+ze}function W(G){for(var $=[],re=0,Te=G.length;re<Te;){var Se=G.charCodeAt(re++);if(Se>=55296&&Se<=56319&&re<Te){var ze=G.charCodeAt(re++);(ze&64512)==56320?$.push(((Se&1023)<<10)+(ze&1023)+65536):($.push(Se),re--)}else $.push(Se)}return $}var K=function($){return String.fromCodePoint.apply(String,d($))},oe=function($){return $-48<10?$-22:$-65<26?$-65:$-97<26?$-97:m},fe=function($,re){return $+22+75*($<26)-((re!=0)<<5)},Ae=function($,re,Te){var Se=0;for($=Te?L($/y):$>>1,$+=L($/re);$>w*v>>1;Se+=m)$=L($/w);return L(Se+(w+1)*$/($+_))},de=function($){var re=[],Te=$.length,Se=0,ze=T,Ve=b,ct=$.lastIndexOf(S);ct<0&&(ct=0);for(var yt=0;yt<ct;++yt)$.charCodeAt(yt)>=128&&A("not-basic"),re.push($.charCodeAt(yt));for(var Ut=ct>0?ct+1:0;Ut<Te;){for(var pt=Se,Lt=1,tr=m;;tr+=m){Ut>=Te&&A("invalid-input");var ut=oe($.charCodeAt(Ut++));(ut>=m||ut>L((p-Se)/Lt))&&A("overflow"),Se+=ut*Lt;var jt=tr<=Ve?g:tr>=Ve+v?v:tr-Ve;if(ut<jt)break;var rr=m-jt;Lt>L(p/rr)&&A("overflow"),Lt*=rr}var ir=re.length+1;Ve=Ae(Se-pt,ir,pt==0),L(Se/ir)>p-ze&&A("overflow"),ze+=L(Se/ir),Se%=ir,re.splice(Se++,0,ze)}return String.fromCodePoint.apply(String,re)},Z=function($){var re=[];$=W($);var Te=$.length,Se=T,ze=0,Ve=b,ct=!0,yt=!1,Ut=void 0;try{for(var pt=$[Symbol.iterator](),Lt;!(ct=(Lt=pt.next()).done);ct=!0){var tr=Lt.value;tr<128&&re.push(B(tr))}}catch(El){yt=!0,Ut=El}finally{try{!ct&&pt.return&&pt.return()}finally{if(yt)throw Ut}}var ut=re.length,jt=ut;for(ut&&re.push(S);jt<Te;){var rr=p,ir=!0,Ar=!1,Gn=void 0;try{for(var Fe=$[Symbol.iterator](),et;!(ir=(et=Fe.next()).done);ir=!0){var kt=et.value;kt>=Se&&kt<rr&&(rr=kt)}}catch(El){Ar=!0,Gn=El}finally{try{!ir&&Fe.return&&Fe.return()}finally{if(Ar)throw Gn}}var Tt=jt+1;rr-Se>L((p-ze)/Tt)&&A("overflow"),ze+=(rr-Se)*Tt,Se=rr;var ht=!0,Gt=!1,At=void 0;try{for(var Pt=$[Symbol.iterator](),Kt;!(ht=(Kt=Pt.next()).done);ht=!0){var or=Kt.value;if(or<Se&&++ze>p&&A("overflow"),or==Se){for(var ar=ze,On=m;;On+=m){var oo=On<=Ve?g:On>=Ve+v?v:On-Ve;if(ar<oo)break;var Tl=ar-oo,Bg=m-oo;re.push(B(fe(oo+Tl%Bg,0))),ar=L(Tl/Bg)}re.push(B(fe(ar,0))),Ve=Ae(ze,Tt,jt==ut),ze=0,++jt}}}catch(El){Gt=!0,At=El}finally{try{!ht&&Pt.return&&Pt.return()}finally{if(Gt)throw At}}++ze,++Se}return re.join("")},ne=function($){return j($,function(re){return k.test(re)?de(re.slice(4).toLowerCase()):re})},ue=function($){return j($,function(re){return O.test(re)?"xn--"+Z(re):re})},Oe={version:"2.1.0",ucs2:{decode:W,encode:K},decode:de,encode:Z,toASCII:ue,toUnicode:ne},Ce={};function je(G){var $=G.charCodeAt(0),re=void 0;return $<16?re="%0"+$.toString(16).toUpperCase():$<128?re="%"+$.toString(16).toUpperCase():$<2048?re="%"+($>>6|192).toString(16).toUpperCase()+"%"+($&63|128).toString(16).toUpperCase():re="%"+($>>12|224).toString(16).toUpperCase()+"%"+($>>6&63|128).toString(16).toUpperCase()+"%"+($&63|128).toString(16).toUpperCase(),re}function Pe(G){for(var $="",re=0,Te=G.length;re<Te;){var Se=parseInt(G.substr(re+1,2),16);if(Se<128)$+=String.fromCharCode(Se),re+=3;else if(Se>=194&&Se<224){if(Te-re>=6){var ze=parseInt(G.substr(re+4,2),16);$+=String.fromCharCode((Se&31)<<6|ze&63)}else $+=G.substr(re,6);re+=6}else if(Se>=224){if(Te-re>=9){var Ve=parseInt(G.substr(re+4,2),16),ct=parseInt(G.substr(re+7,2),16);$+=String.fromCharCode((Se&15)<<12|(Ve&63)<<6|ct&63)}else $+=G.substr(re,9);re+=9}else $+=G.substr(re,3),re+=3}return $}function Ue(G,$){function re(Te){var Se=Pe(Te);return Se.match($.UNRESERVED)?Se:Te}return G.scheme&&(G.scheme=String(G.scheme).replace($.PCT_ENCODED,re).toLowerCase().replace($.NOT_SCHEME,"")),G.userinfo!==void 0&&(G.userinfo=String(G.userinfo).replace($.PCT_ENCODED,re).replace($.NOT_USERINFO,je).replace($.PCT_ENCODED,a)),G.host!==void 0&&(G.host=String(G.host).replace($.PCT_ENCODED,re).toLowerCase().replace($.NOT_HOST,je).replace($.PCT_ENCODED,a)),G.path!==void 0&&(G.path=String(G.path).replace($.PCT_ENCODED,re).replace(G.scheme?$.NOT_PATH:$.NOT_PATH_NOSCHEME,je).replace($.PCT_ENCODED,a)),G.query!==void 0&&(G.query=String(G.query).replace($.PCT_ENCODED,re).replace($.NOT_QUERY,je).replace($.PCT_ENCODED,a)),G.fragment!==void 0&&(G.fragment=String(G.fragment).replace($.PCT_ENCODED,re).replace($.NOT_FRAGMENT,je).replace($.PCT_ENCODED,a)),G}function Ye(G){return G.replace(/^0*(.*)/,"$1")||"0"}function xe(G,$){var re=G.match($.IPV4ADDRESS)||[],Te=f(re,2),Se=Te[1];return Se?Se.split(".").map(Ye).join("."):G}function qe(G,$){var re=G.match($.IPV6ADDRESS)||[],Te=f(re,3),Se=Te[1],ze=Te[2];if(Se){for(var Ve=Se.toLowerCase().split("::").reverse(),ct=f(Ve,2),yt=ct[0],Ut=ct[1],pt=Ut?Ut.split(":").map(Ye):[],Lt=yt.split(":").map(Ye),tr=$.IPV4ADDRESS.test(Lt[Lt.length-1]),ut=tr?7:8,jt=Lt.length-ut,rr=Array(ut),ir=0;ir<ut;++ir)rr[ir]=pt[ir]||Lt[jt+ir]||"";tr&&(rr[ut-1]=xe(rr[ut-1],$));var Ar=rr.reduce(function(Tt,ht,Gt){if(!ht||ht==="0"){var At=Tt[Tt.length-1];At&&At.index+At.length===Gt?At.length++:Tt.push({index:Gt,length:1})}return Tt},[]),Gn=Ar.sort(function(Tt,ht){return ht.length-Tt.length})[0],Fe=void 0;if(Gn&&Gn.length>1){var et=rr.slice(0,Gn.index),kt=rr.slice(Gn.index+Gn.length);Fe=et.join(":")+"::"+kt.join(":")}else Fe=rr.join(":");return ze&&(Fe+="%"+ze),Fe}else return G}var We=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,vt="".match(/(){0}/)[1]===void 0;function dt(G){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re={},Te=$.iri!==!1?h:l;$.reference==="suffix"&&(G=($.scheme?$.scheme+":":"")+"//"+G);var Se=G.match(We);if(Se){vt?(re.scheme=Se[1],re.userinfo=Se[3],re.host=Se[4],re.port=parseInt(Se[5],10),re.path=Se[6]||"",re.query=Se[7],re.fragment=Se[8],isNaN(re.port)&&(re.port=Se[5])):(re.scheme=Se[1]||void 0,re.userinfo=G.indexOf("@")!==-1?Se[3]:void 0,re.host=G.indexOf("//")!==-1?Se[4]:void 0,re.port=parseInt(Se[5],10),re.path=Se[6]||"",re.query=G.indexOf("?")!==-1?Se[7]:void 0,re.fragment=G.indexOf("#")!==-1?Se[8]:void 0,isNaN(re.port)&&(re.port=G.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),re.host&&(re.host=qe(xe(re.host,Te),Te)),re.scheme===void 0&&re.userinfo===void 0&&re.host===void 0&&re.port===void 0&&!re.path&&re.query===void 0?re.reference="same-document":re.scheme===void 0?re.reference="relative":re.fragment===void 0?re.reference="absolute":re.reference="uri",$.reference&&$.reference!=="suffix"&&$.reference!==re.reference&&(re.error=re.error||"URI is not a "+$.reference+" reference.");var ze=Ce[($.scheme||re.scheme||"").toLowerCase()];if(!$.unicodeSupport&&(!ze||!ze.unicodeSupport)){if(re.host&&($.domainHost||ze&&ze.domainHost))try{re.host=Oe.toASCII(re.host.replace(Te.PCT_ENCODED,Pe).toLowerCase())}catch(Ve){re.error=re.error||"Host's domain name can not be converted to ASCII via punycode: "+Ve}Ue(re,l)}else Ue(re,Te);ze&&ze.parse&&ze.parse(re,$)}else re.error=re.error||"URI can not be parsed.";return re}function Ze(G,$){var re=$.iri!==!1?h:l,Te=[];return G.userinfo!==void 0&&(Te.push(G.userinfo),Te.push("@")),G.host!==void 0&&Te.push(qe(xe(String(G.host),re),re).replace(re.IPV6ADDRESS,function(Se,ze,Ve){return"["+ze+(Ve?"%25"+Ve:"")+"]"})),(typeof G.port=="number"||typeof G.port=="string")&&(Te.push(":"),Te.push(String(G.port))),Te.length?Te.join(""):void 0}var Et=/^\.\.?\//,_t=/^\/\.(\/|$)/,Rt=/^\/\.\.(\/|$)/,Kr=/^\/?(?:.|\n)*?(?=\/|$)/;function Mt(G){for(var $=[];G.length;)if(G.match(Et))G=G.replace(Et,"");else if(G.match(_t))G=G.replace(_t,"/");else if(G.match(Rt))G=G.replace(Rt,"/"),$.pop();else if(G==="."||G==="..")G="";else{var re=G.match(Kr);if(re){var Te=re[0];G=G.slice(Te.length),$.push(Te)}else throw new Error("Unexpected dot segment condition")}return $.join("")}function ke(G){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=$.iri?h:l,Te=[],Se=Ce[($.scheme||G.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(G,$),G.host&&!re.IPV6ADDRESS.test(G.host)){if($.domainHost||Se&&Se.domainHost)try{G.host=$.iri?Oe.toUnicode(G.host):Oe.toASCII(G.host.replace(re.PCT_ENCODED,Pe).toLowerCase())}catch(ct){G.error=G.error||"Host's domain name can not be converted to "+($.iri?"Unicode":"ASCII")+" via punycode: "+ct}}Ue(G,re),$.reference!=="suffix"&&G.scheme&&(Te.push(G.scheme),Te.push(":"));var ze=Ze(G,$);if(ze!==void 0&&($.reference!=="suffix"&&Te.push("//"),Te.push(ze),G.path&&G.path.charAt(0)!=="/"&&Te.push("/")),G.path!==void 0){var Ve=G.path;!$.absolutePath&&(!Se||!Se.absolutePath)&&(Ve=Mt(Ve)),ze===void 0&&(Ve=Ve.replace(/^\/\//,"/%2F")),Te.push(Ve)}return G.query!==void 0&&(Te.push("?"),Te.push(G.query)),G.fragment!==void 0&&(Te.push("#"),Te.push(G.fragment)),Te.join("")}function te(G,$){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=arguments[3],Se={};return Te||(G=dt(ke(G,re),re),$=dt(ke($,re),re)),re=re||{},!re.tolerant&&$.scheme?(Se.scheme=$.scheme,Se.userinfo=$.userinfo,Se.host=$.host,Se.port=$.port,Se.path=Mt($.path||""),Se.query=$.query):($.userinfo!==void 0||$.host!==void 0||$.port!==void 0?(Se.userinfo=$.userinfo,Se.host=$.host,Se.port=$.port,Se.path=Mt($.path||""),Se.query=$.query):($.path?($.path.charAt(0)==="/"?Se.path=Mt($.path):((G.userinfo!==void 0||G.host!==void 0||G.port!==void 0)&&!G.path?Se.path="/"+$.path:G.path?Se.path=G.path.slice(0,G.path.lastIndexOf("/")+1)+$.path:Se.path=$.path,Se.path=Mt(Se.path)),Se.query=$.query):(Se.path=G.path,$.query!==void 0?Se.query=$.query:Se.query=G.query),Se.userinfo=G.userinfo,Se.host=G.host,Se.port=G.port),Se.scheme=G.scheme),Se.fragment=$.fragment,Se}function ae(G,$,re){var Te=c({scheme:"null"},re);return ke(te(dt(G,Te),dt($,Te),Te,!0),Te)}function ye(G,$){return typeof G=="string"?G=ke(dt(G,$),$):o(G)==="object"&&(G=dt(ke(G,$),$)),G}function Q(G,$,re){return typeof G=="string"?G=ke(dt(G,re),re):o(G)==="object"&&(G=ke(G,re)),typeof $=="string"?$=ke(dt($,re),re):o($)==="object"&&($=ke($,re)),G===$}function he(G,$){return G&&G.toString().replace(!$||!$.iri?l.ESCAPE:h.ESCAPE,je)}function we(G,$){return G&&G.toString().replace(!$||!$.iri?l.PCT_ENCODED:h.PCT_ENCODED,Pe)}var Ie={scheme:"http",domainHost:!0,parse:function($,re){return $.host||($.error=$.error||"HTTP URIs must have a host."),$},serialize:function($,re){var Te=String($.scheme).toLowerCase()==="https";return($.port===(Te?443:80)||$.port==="")&&($.port=void 0),$.path||($.path="/"),$}},$e={scheme:"https",domainHost:Ie.domainHost,parse:Ie.parse,serialize:Ie.serialize};function Ge(G){return typeof G.secure=="boolean"?G.secure:String(G.scheme).toLowerCase()==="wss"}var Xe={scheme:"ws",domainHost:!0,parse:function($,re){var Te=$;return Te.secure=Ge(Te),Te.resourceName=(Te.path||"/")+(Te.query?"?"+Te.query:""),Te.path=void 0,Te.query=void 0,Te},serialize:function($,re){if(($.port===(Ge($)?443:80)||$.port==="")&&($.port=void 0),typeof $.secure=="boolean"&&($.scheme=$.secure?"wss":"ws",$.secure=void 0),$.resourceName){var Te=$.resourceName.split("?"),Se=f(Te,2),ze=Se[0],Ve=Se[1];$.path=ze&&ze!=="/"?ze:void 0,$.query=Ve,$.resourceName=void 0}return $.fragment=void 0,$}},Qe={scheme:"wss",domainHost:Xe.domainHost,parse:Xe.parse,serialize:Xe.serialize},ot={},Ot="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ft="[0-9A-Fa-f]",sr=n(n("%[EFef]"+ft+"%"+ft+ft+"%"+ft+ft)+"|"+n("%[89A-Fa-f]"+ft+"%"+ft+ft)+"|"+n("%"+ft+ft)),H="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",I="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",x=i(I,'[\\"\\\\]'),X="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",me=new RegExp(Ot,"g"),q=new RegExp(sr,"g"),Y=new RegExp(i("[^]",H,"[\\.]",'[\\"]',x),"g"),F=new RegExp(i("[^]",Ot,X),"g"),U=F;function se(G){var $=Pe(G);return $.match(me)?$:G}var ve={scheme:"mailto",parse:function($,re){var Te=$,Se=Te.to=Te.path?Te.path.split(","):[];if(Te.path=void 0,Te.query){for(var ze=!1,Ve={},ct=Te.query.split("&"),yt=0,Ut=ct.length;yt<Ut;++yt){var pt=ct[yt].split("=");switch(pt[0]){case"to":for(var Lt=pt[1].split(","),tr=0,ut=Lt.length;tr<ut;++tr)Se.push(Lt[tr]);break;case"subject":Te.subject=we(pt[1],re);break;case"body":Te.body=we(pt[1],re);break;default:ze=!0,Ve[we(pt[0],re)]=we(pt[1],re);break}}ze&&(Te.headers=Ve)}Te.query=void 0;for(var jt=0,rr=Se.length;jt<rr;++jt){var ir=Se[jt].split("@");if(ir[0]=we(ir[0]),re.unicodeSupport)ir[1]=we(ir[1],re).toLowerCase();else try{ir[1]=Oe.toASCII(we(ir[1],re).toLowerCase())}catch(Ar){Te.error=Te.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ar}Se[jt]=ir.join("@")}return Te},serialize:function($,re){var Te=$,Se=s($.to);if(Se){for(var ze=0,Ve=Se.length;ze<Ve;++ze){var ct=String(Se[ze]),yt=ct.lastIndexOf("@"),Ut=ct.slice(0,yt).replace(q,se).replace(q,a).replace(Y,je),pt=ct.slice(yt+1);try{pt=re.iri?Oe.toUnicode(pt):Oe.toASCII(we(pt,re).toLowerCase())}catch(jt){Te.error=Te.error||"Email address's domain name can not be converted to "+(re.iri?"Unicode":"ASCII")+" via punycode: "+jt}Se[ze]=Ut+"@"+pt}Te.path=Se.join(",")}var Lt=$.headers=$.headers||{};$.subject&&(Lt.subject=$.subject),$.body&&(Lt.body=$.body);var tr=[];for(var ut in Lt)Lt[ut]!==ot[ut]&&tr.push(ut.replace(q,se).replace(q,a).replace(F,je)+"="+Lt[ut].replace(q,se).replace(q,a).replace(U,je));return tr.length&&(Te.query=tr.join("&")),Te}},ge=/^([^\:]+)\:(.*)/,_e={scheme:"urn",parse:function($,re){var Te=$.path&&$.path.match(ge),Se=$;if(Te){var ze=re.scheme||Se.scheme||"urn",Ve=Te[1].toLowerCase(),ct=Te[2],yt=ze+":"+(re.nid||Ve),Ut=Ce[yt];Se.nid=Ve,Se.nss=ct,Se.path=void 0,Ut&&(Se=Ut.parse(Se,re))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function($,re){var Te=re.scheme||$.scheme||"urn",Se=$.nid,ze=Te+":"+(re.nid||Se),Ve=Ce[ze];Ve&&($=Ve.serialize($,re));var ct=$,yt=$.nss;return ct.path=(Se||re.nid)+":"+yt,ct}},pe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,be={scheme:"urn:uuid",parse:function($,re){var Te=$;return Te.uuid=Te.nss,Te.nss=void 0,!re.tolerant&&(!Te.uuid||!Te.uuid.match(pe))&&(Te.error=Te.error||"UUID is not valid."),Te},serialize:function($,re){var Te=$;return Te.nss=($.uuid||"").toLowerCase(),Te}};Ce[Ie.scheme]=Ie,Ce[$e.scheme]=$e,Ce[Xe.scheme]=Xe,Ce[Qe.scheme]=Qe,Ce[ve.scheme]=ve,Ce[_e.scheme]=_e,Ce[be.scheme]=be,r.SCHEMES=Ce,r.pctEncChar=je,r.pctDecChars=Pe,r.parse=dt,r.removeDotSegments=Mt,r.serialize=ke,r.resolveComponents=te,r.resolve=ae,r.normalize=ye,r.equal=Q,r.escapeComponent=he,r.unescapeComponent=we,Object.defineProperty(r,"__esModule",{value:!0})})})(Sx,Sx.exports);var FVe=Sx.exports,wx=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(t)){if(i=t.length,i!=r.length)return!1;for(n=i;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),i=o.length,i!==Object.keys(r).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;n--!==0;){var a=o[n];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r},jVe=function(t){for(var r=0,i=t.length,n=0,o;n<i;)r++,o=t.charCodeAt(n++),o>=55296&&o<=56319&&n<i&&(o=t.charCodeAt(n),(o&64512)==56320&&n++);return r},ed={copy:UVe,checkDataType:Ax,checkDataTypes:GVe,coerceToTypes:zVe,toHash:Ox,getProperty:kx,escapeQuotes:Ix,equal:wx,ucs2length:jVe,varOccurences:YVe,varReplace:qVe,schemaHasRules:XVe,schemaHasRulesExcept:KVe,schemaUnknownRules:ZVe,toQuotedString:Cx,getPathExpr:QVe,getPath:JVe,getData:rWe,unescapeFragment:nWe,unescapeJsonPointer:Dx,escapeFragment:iWe,escapeJsonPointer:Px};function UVe(e,t){t=t||{};for(var r in e)t[r]=e[r];return t}function Ax(e,t,r,i){var n=i?" !== ":" === ",o=i?" || ":" && ",a=i?"!":"",s=i?"":"!";switch(e){case"null":return t+n+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+o+"typeof "+t+n+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+o+s+"("+t+" % 1)"+o+t+n+t+(r?o+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+n+'"'+e+'"'+(r?o+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+n+'"'+e+'"'}}function GVe(e,t,r){switch(e.length){case 1:return Ax(e[0],t,r,!0);default:var i="",n=Ox(e);n.array&&n.object&&(i=n.null?"(":"(!"+t+" || ",i+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer;for(var o in n)i+=(i?" && ":"")+Ax(o,t,r,!0);return i}}var JY=Ox(["string","number","integer","boolean","null"]);function zVe(e,t){if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++){var n=t[i];(JY[n]||e==="array"&&n==="array")&&(r[r.length]=n)}if(r.length)return r}else{if(JY[t])return[t];if(e==="array"&&t==="array")return["array"]}}function Ox(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var VVe=/^[a-z$_][a-z$_0-9]*$/i,WVe=/'|\\/g;function kx(e){return typeof e=="number"?"["+e+"]":VVe.test(e)?"."+e:"['"+Ix(e)+"']"}function Ix(e){return e.replace(WVe,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function YVe(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0}function qVe(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")}function XVe(e,t){if(typeof e=="boolean")return!e;for(var r in e)if(t[r])return!0}function KVe(e,t,r){if(typeof e=="boolean")return!e&&r!="not";for(var i in e)if(i!=r&&t[i])return!0}function ZVe(e,t){if(typeof e!="boolean"){for(var r in e)if(!t[r])return r}}function Cx(e){return"'"+Ix(e)+"'"}function QVe(e,t,r,i){var n=r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return eq(e,n)}function JVe(e,t,r){var i=Cx(r?"/"+Px(t):kx(t));return eq(e,i)}var eWe=/^\/(?:[^~]|~0|~1)*$/,tWe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function rWe(e,t,r){var i,n,o,a;if(e==="")return"rootData";if(e[0]=="/"){if(!eWe.test(e))throw new Error("Invalid JSON-pointer: "+e);n=e,o="rootData"}else{if(a=e.match(tWe),!a)throw new Error("Invalid JSON-pointer: "+e);if(i=+a[1],n=a[2],n=="#"){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(o="data"+(t-i||""),!n)return o}for(var s=o,c=n.split("/"),u=0;u<c.length;u++){var l=c[u];l&&(o+=kx(Dx(l)),s+=" && "+o)}return s}function eq(e,t){return e=='""'?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function nWe(e){return Dx(decodeURIComponent(e))}function iWe(e){return encodeURIComponent(Px(e))}function Px(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function Dx(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var oWe=ed,tq=aWe;function aWe(e){oWe.copy(e,this)}var rq={exports:{}},vl=rq.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var i=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};JT(t,i,n,e,"",e)};vl.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},vl.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},vl.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},vl.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function JT(e,t,r,i,n,o,a,s,c,u){if(i&&typeof i=="object"&&!Array.isArray(i)){t(i,n,o,a,s,c,u);for(var l in i){var h=i[l];if(Array.isArray(h)){if(l in vl.arrayKeywords)for(var f=0;f<h.length;f++)JT(e,t,r,h[f],n+"/"+l+"/"+f,o,n,l,i,f)}else if(l in vl.propsKeywords){if(h&&typeof h=="object")for(var d in h)JT(e,t,r,h[d],n+"/"+l+"/"+sWe(d),o,n,l,i,d)}else(l in vl.keywords||e.allKeys&&!(l in vl.skipKeywords))&&JT(e,t,r,h,n+"/"+l,o,n,l,i)}r(i,n,o,a,s,c,u)}}function sWe(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var lWe=rq.exports,Mg=FVe,nq=wx,eE=ed,tE=tq,cWe=lWe,xx=yl;yl.normalizeId=bl,yl.fullPath=nE,yl.url=iE,yl.ids=pWe,yl.inlineRef=Nx,yl.schema=rE;function yl(e,t,r){var i=this._refs[r];if(typeof i=="string")if(this._refs[i])i=this._refs[i];else return yl.call(this,e,t,i);if(i=i||this._schemas[r],i instanceof tE)return Nx(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var n=rE.call(this,t,r),o,a,s;return n&&(o=n.schema,t=n.root,s=n.baseId),o instanceof tE?a=o.validate||e.call(this,o.schema,t,void 0,s):o!==void 0&&(a=Nx(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,s)),a}function rE(e,t){var r=Mg.parse(t),i=oq(r),n=nE(this._getId(e.schema));if(Object.keys(e.schema).length===0||i!==n){var o=bl(i),a=this._refs[o];if(typeof a=="string")return uWe.call(this,e,a,r);if(a instanceof tE)a.validate||this._compile(a),e=a;else if(a=this._schemas[o],a instanceof tE){if(a.validate||this._compile(a),o==bl(t))return{schema:a,root:e,baseId:n};e=a}else return;if(!e.schema)return;n=nE(this._getId(e.schema))}return iq.call(this,r,n,e.schema,e)}function uWe(e,t,r){var i=rE.call(this,e,t);if(i){var n=i.schema,o=i.baseId;e=i.root;var a=this._getId(n);return a&&(o=iE(o,a)),iq.call(this,r,o,n,e)}}var fWe=eE.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function iq(e,t,r,i){if(e.fragment=e.fragment||"",e.fragment.slice(0,1)=="/"){for(var n=e.fragment.split("/"),o=1;o<n.length;o++){var a=n[o];if(a){if(a=eE.unescapeFragment(a),r=r[a],r===void 0)break;var s;if(!fWe[a]&&(s=this._getId(r),s&&(t=iE(t,s)),r.$ref)){var c=iE(t,r.$ref),u=rE.call(this,i,c);u&&(r=u.schema,i=u.root,t=u.baseId)}}}if(r!==void 0&&r!==i.schema)return{schema:r,root:i,baseId:t}}}var hWe=eE.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Nx(e,t){if(t===!1)return!1;if(t===void 0||t===!0)return Rx(e);if(t)return Mx(e)<=t}function Rx(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(t=e[r],typeof t=="object"&&!Rx(t))return!1}else for(var i in e)if(i=="$ref"||(t=e[i],typeof t=="object"&&!Rx(t)))return!1;return!0}function Mx(e){var t=0,r;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(r=e[i],typeof r=="object"&&(t+=Mx(r)),t==1/0)return 1/0}else for(var n in e){if(n=="$ref")return 1/0;if(hWe[n])t++;else if(r=e[n],typeof r=="object"&&(t+=Mx(r)+1),t==1/0)return 1/0}return t}function nE(e,t){t!==!1&&(e=bl(e));var r=Mg.parse(e);return oq(r)}function oq(e){return Mg.serialize(e).split("#")[0]+"#"}var dWe=/#\/?$/;function bl(e){return e?e.replace(dWe,""):""}function iE(e,t){return t=bl(t),Mg.resolve(e,t)}function pWe(e){var t=bl(this._getId(e)),r={"":t},i={"":nE(t,!1)},n={},o=this;return cWe(e,{allKeys:!0},function(a,s,c,u,l,h,f){if(s!==""){var d=o._getId(a),p=r[u],m=i[u]+"/"+l;if(f!==void 0&&(m+="/"+(typeof f=="number"?f:eE.escapeFragment(f))),typeof d=="string"){d=p=bl(p?Mg.resolve(p,d):d);var g=o._refs[d];if(typeof g=="string"&&(g=o._refs[g]),g&&g.schema){if(!nq(a,g.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=bl(m))if(d[0]=="#"){if(n[d]&&!nq(a,n[d]))throw new Error('id "'+d+'" resolves to more than one schema');n[d]=a}else o._refs[d]=m}r[s]=p,i[s]=m}}),n}var Lx=xx,Bx={Validation:aq(mWe),MissingRef:aq(Hx)};function mWe(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}Hx.message=function(e,t){return"can't resolve reference "+t+" from id "+e};function Hx(e,t,r){this.message=r||Hx.message(e,t),this.missingRef=Lx.url(e,t),this.missingSchema=Lx.normalizeId(Lx.fullPath(this.missingRef))}function aq(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var sq=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var r=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&function(o){return function(a){return function(s,c){var u={key:s,value:a[s]},l={key:c,value:a[c]};return o(u,l)}}}(t.cmp),n=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var s,c;if(Array.isArray(a)){for(c="[",s=0;s<a.length;s++)s&&(c+=","),c+=o(a[s])||"null";return c+"]"}if(a===null)return"null";if(n.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=n.push(a)-1,l=Object.keys(a).sort(i&&i(a));for(c="",s=0;s<l.length;s++){var h=l[s],f=o(a[h]);f&&(c&&(c+=","),c+=JSON.stringify(h)+":"+f)}return n.splice(u,1),"{"+c+"}"}}(e)},lq=function(t,r,i){var n="",o=t.schema.$async===!0,a=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),s=t.self._getId(t.schema);if(t.opts.strictKeywords){var c=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(c){var u="unknown keyword: "+c;if(t.opts.strictKeywords==="log")t.logger.warn(u);else throw new Error(u)}}if(t.isTop&&(n+=" var validate = ",o&&(t.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(t.opts.sourceCode||t.opts.processCode)&&(n+=" "+("/*# sourceURL="+s+" */")+" ")),typeof t.schema=="boolean"||!(a||t.schema.$ref)){var r="false schema",l=t.level,h=t.dataLevel,f=t.schema[r],d=t.schemaPath+t.util.getProperty(r),p=t.errSchemaPath+"/"+r,T=!t.opts.allErrors,O,m="data"+(h||""),b="valid"+l;if(t.schema===!1){t.isTop?T=!0:n+=" var "+b+" = false; ";var g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(O||"false schema")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: {} ",t.opts.messages!==!1&&(n+=" , message: 'boolean schema is false' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!t.compositeRule&&T?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?o?n+=" return data; ":n+=" validate.errors = null; return true; ":n+=" var "+b+" = true; ";return t.isTop&&(n+=" }; return validate; "),n}if(t.isTop){var _=t.isTop,l=t.level=0,h=t.dataLevel=0,m="data";if(t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[""],t.schema.default!==void 0&&t.opts.useDefaults&&t.opts.strictDefaults){var y="default is ignored in the schema root";if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{var l=t.level,h=t.dataLevel,m="data"+(h||"");if(s&&(t.baseId=t.resolve.url(t.baseId,s)),o&&!t.async)throw new Error("async schema in sync schema");n+=" var errs_"+l+" = errors;"}var b="valid"+l,T=!t.opts.allErrors,S="",k="",O,D=t.schema.type,R=Array.isArray(D);if(D&&t.opts.nullable&&t.schema.nullable===!0&&(R?D.indexOf("null")==-1&&(D=D.concat("null")):D!="null"&&(D=[D,"null"],R=!0)),R&&D.length==1&&(D=D[0],R=!1),t.schema.$ref&&a){if(t.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');t.opts.extendRefs!==!0&&(a=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(n+=" "+t.RULES.all.$comment.code(t,"$comment")),D){if(t.opts.coerceTypes)var w=t.util.coerceToTypes(t.opts.coerceTypes,D);var L=t.RULES.types[D];if(w||R||L===!0||L&&!_t(L)){var d=t.schemaPath+".type",p=t.errSchemaPath+"/type",d=t.schemaPath+".type",p=t.errSchemaPath+"/type",B=R?"checkDataTypes":"checkDataType";if(n+=" if ("+t.util[B](D,m,t.opts.strictNumbers,!0)+") { ",w){var A="dataType"+l,M="coerced"+l;n+=" var "+A+" = typeof "+m+"; var "+M+" = undefined; ",t.opts.coerceTypes=="array"&&(n+=" if ("+A+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+A+" = typeof "+m+"; if ("+t.util.checkDataType(t.schema.type,m,t.opts.strictNumbers)+") "+M+" = "+m+"; } "),n+=" if ("+M+" !== undefined) ; ";var j=w;if(j)for(var W,K=-1,oe=j.length-1;K<oe;)W=j[K+=1],W=="string"?n+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+M+" = '' + "+m+"; else if ("+m+" === null) "+M+" = ''; ":W=="number"||W=="integer"?(n+=" else if ("+A+" == 'boolean' || "+m+" === null || ("+A+" == 'string' && "+m+" && "+m+" == +"+m+" ",W=="integer"&&(n+=" && !("+m+" % 1)"),n+=")) "+M+" = +"+m+"; "):W=="boolean"?n+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+M+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+M+" = true; ":W=="null"?n+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+M+" = null; ":t.opts.coerceTypes=="array"&&W=="array"&&(n+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+m+" == null) "+M+" = ["+m+"]; ");n+=" else {   ";var g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(O||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",R?n+=""+D.join(","):n+=""+D,n+="' } ",t.opts.messages!==!1&&(n+=" , message: 'should be ",R?n+=""+D.join(","):n+=""+D,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!t.compositeRule&&T?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+M+" !== undefined) {  ";var fe=h?"data"+(h-1||""):"parentData",Ae=h?t.dataPathArr[h]:"parentDataProperty";n+=" "+m+" = "+M+"; ",h||(n+="if ("+fe+" !== undefined)"),n+=" "+fe+"["+Ae+"] = "+M+"; } "}else{var g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(O||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",R?n+=""+D.join(","):n+=""+D,n+="' } ",t.opts.messages!==!1&&(n+=" , message: 'should be ",R?n+=""+D.join(","):n+=""+D,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!t.compositeRule&&T?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(t.schema.$ref&&!a)n+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",T&&(n+=" } if (errors === ",_?n+="0":n+="errs_"+l,n+=") { ",k+="}");else{var de=t.RULES;if(de){for(var L,Z=-1,ne=de.length-1;Z<ne;)if(L=de[Z+=1],_t(L)){if(L.type&&(n+=" if ("+t.util.checkDataType(L.type,m,t.opts.strictNumbers)+") { "),t.opts.useDefaults){if(L.type=="object"&&t.schema.properties){var f=t.schema.properties,ue=Object.keys(f),Oe=ue;if(Oe)for(var Ce,je=-1,Pe=Oe.length-1;je<Pe;){Ce=Oe[je+=1];var Ue=f[Ce];if(Ue.default!==void 0){var Ye=m+t.util.getProperty(Ce);if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+Ye;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else n+=" if ("+Ye+" === undefined ",t.opts.useDefaults=="empty"&&(n+=" || "+Ye+" === null || "+Ye+" === '' "),n+=" ) "+Ye+" = ",t.opts.useDefaults=="shared"?n+=" "+t.useDefault(Ue.default)+" ":n+=" "+JSON.stringify(Ue.default)+" ",n+="; "}}}else if(L.type=="array"&&Array.isArray(t.schema.items)){var xe=t.schema.items;if(xe){for(var Ue,K=-1,qe=xe.length-1;K<qe;)if(Ue=xe[K+=1],Ue.default!==void 0){var Ye=m+"["+K+"]";if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+Ye;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else n+=" if ("+Ye+" === undefined ",t.opts.useDefaults=="empty"&&(n+=" || "+Ye+" === null || "+Ye+" === '' "),n+=" ) "+Ye+" = ",t.opts.useDefaults=="shared"?n+=" "+t.useDefault(Ue.default)+" ":n+=" "+JSON.stringify(Ue.default)+" ",n+="; "}}}}var We=L.rules;if(We){for(var vt,dt=-1,Ze=We.length-1;dt<Ze;)if(vt=We[dt+=1],Rt(vt)){var Et=vt.code(t,vt.keyword,L.type);Et&&(n+=" "+Et+" ",T&&(S+="}"))}}if(T&&(n+=" "+S+" ",S=""),L.type&&(n+=" } ",D&&D===L.type&&!w)){n+=" else { ";var d=t.schemaPath+".type",p=t.errSchemaPath+"/type",g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(O||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",R?n+=""+D.join(","):n+=""+D,n+="' } ",t.opts.messages!==!1&&(n+=" , message: 'should be ",R?n+=""+D.join(","):n+=""+D,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!t.compositeRule&&T?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}T&&(n+=" if (errors === ",_?n+="0":n+="errs_"+l,n+=") { ",k+="}")}}}T&&(n+=" "+k+" "),_?(o?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+b+" = errors === errs_"+l+";";function _t(Mt){for(var ke=Mt.rules,te=0;te<ke.length;te++)if(Rt(ke[te]))return!0}function Rt(Mt){return t.schema[Mt.keyword]!==void 0||Mt.implements&&Kr(Mt)}function Kr(Mt){for(var ke=Mt.implements,te=0;te<ke.length;te++)if(t.schema[ke[te]]!==void 0)return!0}return n},oE=xx,aE=ed,cq=Bx,gWe=sq,uq=lq,vWe=aE.ucs2length,yWe=wx,bWe=cq.Validation,_We=$x;function $x(e,t,r,i){var n=this,o=this._opts,a=[void 0],s={},c=[],u={},l=[],h={},f=[];t=t||{schema:e,refVal:a,refs:s};var d=TWe.call(this,e,t,i),p=this._compilations[d.index];if(d.compiling)return p.callValidate=y;var m=this._formats,g=this.RULES;try{var v=b(e,t,r,i);p.validate=v;var _=p.callValidate;return _&&(_.schema=v.schema,_.errors=null,_.refs=v.refs,_.refVal=v.refVal,_.root=v.root,_.$async=v.$async,o.sourceCode&&(_.source=v.source)),v}finally{EWe.call(this,e,t,i)}function y(){var B=p.validate,A=B.apply(this,arguments);return y.errors=B.errors,A}function b(B,A,M,j){var W=!A||A&&A.schema==B;if(A.schema!=t.schema)return $x.call(n,B,A,M,j);var K=B.$async===!0,oe=uq({isTop:!0,schema:B,isRoot:W,baseId:j,root:A,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:cq.MissingRef,RULES:g,validate:uq,util:aE,resolve:oE,resolveRef:T,usePattern:R,useDefault:w,useCustomRule:L,opts:o,formats:m,logger:n.logger,self:n});oe=sE(a,AWe)+sE(c,SWe)+sE(l,wWe)+sE(f,OWe)+oe,o.processCode&&(oe=o.processCode(oe,B));var fe;try{var Ae=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",oe);fe=Ae(n,g,m,t,a,l,f,yWe,vWe,bWe),a[0]=fe}catch(de){throw n.logger.error("Error compiling schema, function code:",oe),de}return fe.schema=B,fe.errors=null,fe.refs=s,fe.refVal=a,fe.root=W?fe:A,K&&(fe.$async=!0),o.sourceCode===!0&&(fe.source={code:oe,patterns:c,defaults:l}),fe}function T(B,A,M){A=oE.url(B,A);var j=s[A],W,K;if(j!==void 0)return W=a[j],K="refVal["+j+"]",D(W,K);if(!M&&t.refs){var oe=t.refs[A];if(oe!==void 0)return W=t.refVal[oe],K=S(A,W),D(W,K)}K=S(A);var fe=oE.call(n,b,t,A);if(fe===void 0){var Ae=r&&r[A];Ae&&(fe=oE.inlineRef(Ae,o.inlineRefs)?Ae:$x.call(n,Ae,t,r,B))}if(fe===void 0)k(A);else return O(A,fe),D(fe,K)}function S(B,A){var M=a.length;return a[M]=A,s[B]=M,"refVal"+M}function k(B){delete s[B]}function O(B,A){var M=s[B];a[M]=A}function D(B,A){return typeof B=="object"||typeof B=="boolean"?{code:A,schema:B,inline:!0}:{code:A,$async:B&&!!B.$async}}function R(B){var A=u[B];return A===void 0&&(A=u[B]=c.length,c[A]=B),"pattern"+A}function w(B){switch(typeof B){case"boolean":case"number":return""+B;case"string":return aE.toQuotedString(B);case"object":if(B===null)return"null";var A=gWe(B),M=h[A];return M===void 0&&(M=h[A]=l.length,l[M]=B),"default"+M}}function L(B,A,M,j){if(n._opts.validateSchema!==!1){var W=B.definition.dependencies;if(W&&!W.every(function(Oe){return Object.prototype.hasOwnProperty.call(M,Oe)}))throw new Error("parent schema must have all required keywords: "+W.join(","));var K=B.definition.validateSchema;if(K){var oe=K(A);if(!oe){var fe="keyword schema is invalid: "+n.errorsText(K.errors);if(n._opts.validateSchema=="log")n.logger.error(fe);else throw new Error(fe)}}}var Ae=B.definition.compile,de=B.definition.inline,Z=B.definition.macro,ne;if(Ae)ne=Ae.call(n,A,M,j);else if(Z)ne=Z.call(n,A,M,j),o.validateSchema!==!1&&n.validateSchema(ne,!0);else if(de)ne=de.call(n,j,B.keyword,A,M);else if(ne=B.definition.validate,!ne)return;if(ne===void 0)throw new Error('custom keyword "'+B.keyword+'"failed to compile');var ue=f.length;return f[ue]=ne,{code:"customRule"+ue,validate:ne}}}function TWe(e,t,r){var i=fq.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}function EWe(e,t,r){var i=fq.call(this,e,t,r);i>=0&&this._compilations.splice(i,1)}function fq(e,t,r){for(var i=0;i<this._compilations.length;i++){var n=this._compilations[i];if(n.schema==e&&n.root==t&&n.baseId==r)return i}return-1}function SWe(e,t){return"var pattern"+e+" = new RegExp("+aE.toQuotedString(t[e])+");"}function wWe(e){return"var default"+e+" = defaults["+e+"];"}function AWe(e,t){return t[e]===void 0?"":"var refVal"+e+" = refVal["+e+"];"}function OWe(e){return"var customRule"+e+" = customRules["+e+"];"}function sE(e,t){if(!e.length)return"";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}var hq={exports:{}},lE=hq.exports=function(){this._cache={}};lE.prototype.put=function(t,r){this._cache[t]=r},lE.prototype.get=function(t){return this._cache[t]},lE.prototype.del=function(t){delete this._cache[t]},lE.prototype.clear=function(){this._cache={}};var kWe=hq.exports,IWe=ed,CWe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,PWe=[0,31,28,31,30,31,30,31,31,30,31,30,31],DWe=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,dq=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,xWe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,NWe=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,pq=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,mq=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,gq=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,vq=/^(?:\/(?:[^~/]|~0|~1)*)*$/,yq=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,bq=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,RWe=cE;function cE(e){return e=e=="full"?"full":"fast",IWe.copy(cE[e])}cE.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":pq,url:mq,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:dq,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Eq,uuid:gq,"json-pointer":vq,"json-pointer-uri-fragment":yq,"relative-json-pointer":bq},cE.full={date:_q,time:Tq,"date-time":BWe,uri:$We,"uri-reference":NWe,"uri-template":pq,url:mq,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:dq,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Eq,uuid:gq,"json-pointer":vq,"json-pointer-uri-fragment":yq,"relative-json-pointer":bq};function MWe(e){return e%4===0&&(e%100!==0||e%400===0)}function _q(e){var t=e.match(CWe);if(!t)return!1;var r=+t[1],i=+t[2],n=+t[3];return i>=1&&i<=12&&n>=1&&n<=(i==2&&MWe(r)?29:PWe[i])}function Tq(e,t){var r=e.match(DWe);if(!r)return!1;var i=r[1],n=r[2],o=r[3],a=r[5];return(i<=23&&n<=59&&o<=59||i==23&&n==59&&o==60)&&(!t||a)}var LWe=/t|\s/i;function BWe(e){var t=e.split(LWe);return t.length==2&&_q(t[0])&&Tq(t[1],!0)}var HWe=/\/|:/;function $We(e){return HWe.test(e)&&xWe.test(e)}var FWe=/[^\\]\\Z/;function Eq(e){if(FWe.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}var jWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.errSchemaPath+"/"+r,u=!t.opts.allErrors,l="data"+(a||""),h="valid"+o,f,d;if(s=="#"||s=="#/")t.isRoot?(f=t.async,d="validate"):(f=t.root.schema.$async===!0,d="root.refVal[0]");else{var p=t.resolveRef(t.baseId,s,t.isRoot);if(p===void 0){var m=t.MissingRefError.message(t.baseId,s);if(t.opts.missingRefs=="fail"){t.logger.error(m);var g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { ref: '"+t.util.escapeQuotes(s)+"' } ",t.opts.messages!==!1&&(n+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(s)+"' "),t.opts.verbose&&(n+=" , schema: "+t.util.toQuotedString(s)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!t.compositeRule&&u?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(n+=" if (false) { ")}else if(t.opts.missingRefs=="ignore")t.logger.warn(m),u&&(n+=" if (true) { ");else throw new t.MissingRefError(t.baseId,s,m)}else if(p.inline){var _=t.util.copy(t);_.level++;var y="valid"+_.level;_.schema=p.schema,_.schemaPath="",_.errSchemaPath=s;var b=t.validate(_).replace(/validate\.schema/g,p.code);n+=" "+b+" ",u&&(n+=" if ("+y+") { ")}else f=p.$async===!0||t.async&&p.$async!==!1,d=p.code}if(d){var g=g||[];g.push(n),n="",t.opts.passContext?n+=" "+d+".call(this, ":n+=" "+d+"( ",n+=" "+l+", (dataPath || '')",t.errorPath!='""'&&(n+=" + "+t.errorPath);var T=a?"data"+(a-1||""):"parentData",S=a?t.dataPathArr[a]:"parentDataProperty";n+=" , "+T+" , "+S+", rootData)  ";var k=n;if(n=g.pop(),f){if(!t.async)throw new Error("async schema referenced by sync schema");u&&(n+=" var "+h+"; "),n+=" try { await "+k+"; ",u&&(n+=" "+h+" = true; "),n+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(n+=" "+h+" = false; "),n+=" } ",u&&(n+=" if ("+h+") { ")}else n+=" if (!"+k+") { if (vErrors === null) vErrors = "+d+".errors; else vErrors = vErrors.concat("+d+".errors); errors = vErrors.length; } ",u&&(n+=" else { ")}return n},UWe=function(t,r,i){var n=" ",o=t.schema[r],a=t.schemaPath+t.util.getProperty(r),s=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,u=t.util.copy(t),l="";u.level++;var h="valid"+u.level,f=u.baseId,d=!0,p=o;if(p)for(var m,g=-1,v=p.length-1;g<v;)m=p[g+=1],(t.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:t.util.schemaHasRules(m,t.RULES.all))&&(d=!1,u.schema=m,u.schemaPath=a+"["+g+"]",u.errSchemaPath=s+"/"+g,n+="  "+t.validate(u)+" ",u.baseId=f,c&&(n+=" if ("+h+") { ",l+="}"));return c&&(d?n+=" if (true) { ":n+=" "+l.slice(0,-1)+" "),n},GWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d="errs__"+o,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v=s.every(function(O){return t.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:t.util.schemaHasRules(O,t.RULES.all)});if(v){var _=p.baseId;n+=" var "+d+" = errors; var "+f+" = false;  ";var y=t.compositeRule;t.compositeRule=p.compositeRule=!0;var b=s;if(b)for(var T,S=-1,k=b.length-1;S<k;)T=b[S+=1],p.schema=T,p.schemaPath=c+"["+S+"]",p.errSchemaPath=u+"/"+S,n+="  "+t.validate(p)+" ",p.baseId=_,n+=" "+f+" = "+f+" || "+g+"; if (!"+f+") { ",m+="}";t.compositeRule=p.compositeRule=y,n+=" "+m+" if (!"+f+") {   var err =   ",t.createErrors!==!1?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",t.opts.messages!==!1&&(n+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else l&&(n+=" if (true) { ");return n},zWe=function(t,r,i){var n=" ",o=t.schema[r],a=t.errSchemaPath+"/"+r;t.opts.allErrors;var s=t.util.toQuotedString(o);return t.opts.$comment===!0?n+=" console.log("+s+");":typeof t.opts.$comment=="function"&&(n+=" self._opts.$comment("+s+", "+t.util.toQuotedString(a)+", validate.root.schema);"),n},VWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d=t.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; "),d||(n+=" var schema"+o+" = validate.schema"+c+";"),n+="var "+f+" = equal("+h+", schema"+o+"); if (!"+f+") {   ";var p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValue: schema"+o+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be equal to constant' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n},WWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d="errs__"+o,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v="i"+o,_=p.dataLevel=t.dataLevel+1,y="data"+_,b=t.baseId,T=t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all);if(n+="var "+d+" = errors;var "+f+";",T){var S=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.schema=s,p.schemaPath=c,p.errSchemaPath=u,n+=" var "+g+" = false; for (var "+v+" = 0; "+v+" < "+h+".length; "+v+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0);var k=h+"["+v+"]";p.dataPathArr[_]=v;var O=t.validate(p);p.baseId=b,t.util.varOccurences(O,y)<2?n+=" "+t.util.varReplace(O,y,k)+" ":n+=" var "+y+" = "+k+"; "+O+" ",n+=" if ("+g+") break; }  ",t.compositeRule=p.compositeRule=S,n+=" "+m+" if (!"+g+") {"}else n+=" if ("+h+".length == 0) {";var D=D||[];D.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",t.opts.messages!==!1&&(n+=" , message: 'should contain a valid item' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var R=n;return n=D.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+R+"]); ":n+=" validate.errors = ["+R+"]; return false; ":n+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",T&&(n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),t.opts.allErrors&&(n+=" } "),n},YWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="errs__"+o,d=t.util.copy(t),p="";d.level++;var m="valid"+d.level,g={},v={},_=t.opts.ownProperties;for(S in s)if(S!="__proto__"){var y=s[S],b=Array.isArray(y)?v:g;b[S]=y}n+="var "+f+" = errors;";var T=t.errorPath;n+="var missing"+o+";";for(var S in v)if(b=v[S],b.length){if(n+=" if ( "+h+t.util.getProperty(S)+" !== undefined ",_&&(n+=" && Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(S)+"') "),l){n+=" && ( ";var k=b;if(k)for(var O,D=-1,R=k.length-1;D<R;){O=k[D+=1],D&&(n+=" || ");var w=t.util.getProperty(O),L=h+w;n+=" ( ( "+L+" === undefined ",_&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(O)+"') "),n+=") && (missing"+o+" = "+t.util.toQuotedString(t.opts.jsonPointers?O:w)+") ) "}n+=")) {  ";var B="missing"+o,A="' + "+B+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(T,B,!0):T+" + "+B);var M=M||[];M.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+A+"', depsCount: "+b.length+", deps: '"+t.util.escapeQuotes(b.length==1?b[0]:b.join(", "))+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should have ",b.length==1?n+="property "+t.util.escapeQuotes(b[0]):n+="properties "+t.util.escapeQuotes(b.join(", ")),n+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var j=n;n=M.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+j+"]); ":n+=" validate.errors = ["+j+"]; return false; ":n+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var W=b;if(W)for(var O,K=-1,oe=W.length-1;K<oe;){O=W[K+=1];var w=t.util.getProperty(O),A=t.util.escapeQuotes(O),L=h+w;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(T,O,t.opts.jsonPointers)),n+=" if ( "+L+" === undefined ",_&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",t.createErrors!==!1?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+A+"', depsCount: "+b.length+", deps: '"+t.util.escapeQuotes(b.length==1?b[0]:b.join(", "))+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should have ",b.length==1?n+="property "+t.util.escapeQuotes(b[0]):n+="properties "+t.util.escapeQuotes(b.join(", ")),n+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(p+="}",n+=" else { ")}t.errorPath=T;var fe=d.baseId;for(var S in g){var y=g[S];(t.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:t.util.schemaHasRules(y,t.RULES.all))&&(n+=" "+m+" = true; if ( "+h+t.util.getProperty(S)+" !== undefined ",_&&(n+=" && Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(S)+"') "),n+=") { ",d.schema=y,d.schemaPath=c+t.util.getProperty(S),d.errSchemaPath=u+"/"+t.util.escapeFragment(S),n+="  "+t.validate(d)+" ",d.baseId=fe,n+=" }  ",l&&(n+=" if ("+m+") { ",p+="}"))}return l&&(n+="   "+p+" if ("+f+" == errors) {"),n},qWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d=t.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ");var p="i"+o,m="schema"+o;d||(n+=" var "+m+" = validate.schema"+c+";"),n+="var "+f+";",d&&(n+=" if (schema"+o+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+o+")) "+f+" = false; else {"),n+=""+f+" = false;for (var "+p+"=0; "+p+"<"+m+".length; "+p+"++) if (equal("+h+", "+m+"["+p+"])) { "+f+" = true; break; }",d&&(n+="  }  "),n+=" if (!"+f+") {   ";var g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValues: schema"+o+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var v=n;return n=g.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n},XWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||"");if(t.opts.format===!1)return l&&(n+=" if (true) { "),n;var f=t.opts.$data&&s&&s.$data,d;f?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",d="schema"+o):d=s;var p=t.opts.unknownFormats,m=Array.isArray(p);if(f){var g="format"+o,v="isObject"+o,_="formatType"+o;n+=" var "+g+" = formats["+d+"]; var "+v+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+_+" = "+v+" && "+g+".type || 'string'; if ("+v+") { ",t.async&&(n+=" var async"+o+" = "+g+".async; "),n+=" "+g+" = "+g+".validate; } if (  ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),n+=" (",p!="ignore"&&(n+=" ("+d+" && !"+g+" ",m&&(n+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),n+=") || "),n+=" ("+g+" && "+_+" == '"+i+"' && !(typeof "+g+" == 'function' ? ",t.async?n+=" (async"+o+" ? await "+g+"("+h+") : "+g+"("+h+")) ":n+=" "+g+"("+h+") ",n+=" : "+g+".test("+h+"))))) {"}else{var g=t.formats[s];if(!g){if(p=="ignore")return t.logger.warn('unknown format "'+s+'" ignored in schema at path "'+t.errSchemaPath+'"'),l&&(n+=" if (true) { "),n;if(m&&p.indexOf(s)>=0)return l&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+t.errSchemaPath+'"')}var v=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,_=v&&g.type||"string";if(v){var y=g.async===!0;g=g.validate}if(_!=i)return l&&(n+=" if (true) { "),n;if(y){if(!t.async)throw new Error("async format in sync schema");var b="formats"+t.util.getProperty(s)+".validate";n+=" if (!(await "+b+"("+h+"))) { "}else{n+=" if (! ";var b="formats"+t.util.getProperty(s);v&&(b+=".validate"),typeof g=="function"?n+=" "+b+"("+h+") ":n+=" "+b+".test("+h+") ",n+=") { "}}var T=T||[];T.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { format:  ",f?n+=""+d:n+=""+t.util.toQuotedString(s),n+="  } ",t.opts.messages!==!1&&(n+=` , message: 'should match format "`,f?n+="' + "+d+" + '":n+=""+t.util.escapeQuotes(s),n+=`"' `),t.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+c:n+=""+t.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var S=n;return n=T.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n},KWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d="errs__"+o,p=t.util.copy(t);p.level++;var m="valid"+p.level,g=t.schema.then,v=t.schema.else,_=g!==void 0&&(t.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:t.util.schemaHasRules(g,t.RULES.all)),y=v!==void 0&&(t.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:t.util.schemaHasRules(v,t.RULES.all)),b=p.baseId;if(_||y){var T;p.createErrors=!1,p.schema=s,p.schemaPath=c,p.errSchemaPath=u,n+=" var "+d+" = errors; var "+f+" = true;  ";var S=t.compositeRule;t.compositeRule=p.compositeRule=!0,n+="  "+t.validate(p)+" ",p.baseId=b,p.createErrors=!0,n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",t.compositeRule=p.compositeRule=S,_?(n+=" if ("+m+") {  ",p.schema=t.schema.then,p.schemaPath=t.schemaPath+".then",p.errSchemaPath=t.errSchemaPath+"/then",n+="  "+t.validate(p)+" ",p.baseId=b,n+=" "+f+" = "+m+"; ",_&&y?(T="ifClause"+o,n+=" var "+T+" = 'then'; "):T="'then'",n+=" } ",y&&(n+=" else { ")):n+=" if (!"+m+") { ",y&&(p.schema=t.schema.else,p.schemaPath=t.schemaPath+".else",p.errSchemaPath=t.errSchemaPath+"/else",n+="  "+t.validate(p)+" ",p.baseId=b,n+=" "+f+" = "+m+"; ",_&&y?(T="ifClause"+o,n+=" var "+T+" = 'else'; "):T="'else'",n+=" } "),n+=" if (!"+f+") {   var err =   ",t.createErrors!==!1?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { failingKeyword: "+T+" } ",t.opts.messages!==!1&&(n+=` , message: 'should match "' + `+T+` + '" schema' `),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n},ZWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d="errs__"+o,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v="i"+o,_=p.dataLevel=t.dataLevel+1,y="data"+_,b=t.baseId;if(n+="var "+d+" = errors;var "+f+";",Array.isArray(s)){var T=t.schema.additionalItems;if(T===!1){n+=" "+f+" = "+h+".length <= "+s.length+"; ";var S=u;u=t.errSchemaPath+"/additionalItems",n+="  if (!"+f+") {   ";var k=k||[];k.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { limit: "+s.length+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var O=n;n=k.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+O+"]); ":n+=" validate.errors = ["+O+"]; return false; ":n+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=S,l&&(m+="}",n+=" else { ")}var D=s;if(D){for(var R,w=-1,L=D.length-1;w<L;)if(R=D[w+=1],t.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:t.util.schemaHasRules(R,t.RULES.all)){n+=" "+g+" = true; if ("+h+".length > "+w+") { ";var B=h+"["+w+"]";p.schema=R,p.schemaPath=c+"["+w+"]",p.errSchemaPath=u+"/"+w,p.errorPath=t.util.getPathExpr(t.errorPath,w,t.opts.jsonPointers,!0),p.dataPathArr[_]=w;var A=t.validate(p);p.baseId=b,t.util.varOccurences(A,y)<2?n+=" "+t.util.varReplace(A,y,B)+" ":n+=" var "+y+" = "+B+"; "+A+" ",n+=" }  ",l&&(n+=" if ("+g+") { ",m+="}")}}if(typeof T=="object"&&(t.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:t.util.schemaHasRules(T,t.RULES.all))){p.schema=T,p.schemaPath=t.schemaPath+".additionalItems",p.errSchemaPath=t.errSchemaPath+"/additionalItems",n+=" "+g+" = true; if ("+h+".length > "+s.length+") {  for (var "+v+" = "+s.length+"; "+v+" < "+h+".length; "+v+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0);var B=h+"["+v+"]";p.dataPathArr[_]=v;var A=t.validate(p);p.baseId=b,t.util.varOccurences(A,y)<2?n+=" "+t.util.varReplace(A,y,B)+" ":n+=" var "+y+" = "+B+"; "+A+" ",l&&(n+=" if (!"+g+") break; "),n+=" } }  ",l&&(n+=" if ("+g+") { ",m+="}")}}else if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){p.schema=s,p.schemaPath=c,p.errSchemaPath=u,n+="  for (var "+v+" = 0; "+v+" < "+h+".length; "+v+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0);var B=h+"["+v+"]";p.dataPathArr[_]=v;var A=t.validate(p);p.baseId=b,t.util.varOccurences(A,y)<2?n+=" "+t.util.varReplace(A,y,B)+" ":n+=" var "+y+" = "+B+"; "+A+" ",l&&(n+=" if (!"+g+") break; "),n+=" }"}return l&&(n+=" "+m+" if ("+d+" == errors) {"),n},Sq=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,b,h="data"+(a||""),f=t.opts.$data&&s&&s.$data,d;f?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",d="schema"+o):d=s;var p=r=="maximum",m=p?"exclusiveMaximum":"exclusiveMinimum",g=t.schema[m],v=t.opts.$data&&g&&g.$data,_=p?"<":">",y=p?">":"<",b=void 0;if(!(f||typeof s=="number"||s===void 0))throw new Error(r+" must be number");if(!(v||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(m+" must be number or boolean");if(v){var T=t.util.getData(g.$data,a,t.dataPathArr),S="exclusive"+o,k="exclType"+o,O="exclIsNumber"+o,D="op"+o,R="' + "+D+" + '";n+=" var schemaExcl"+o+" = "+T+"; ",T="schemaExcl"+o,n+=" var "+S+"; var "+k+" = typeof "+T+"; if ("+k+" != 'boolean' && "+k+" != 'undefined' && "+k+" != 'number') { ";var b=m,w=w||[];w.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",t.opts.messages!==!1&&(n+=" , message: '"+m+" should be boolean' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var L=n;n=w.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+L+"]); ":n+=" validate.errors = ["+L+"]; return false; ":n+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),n+=" "+k+" == 'number' ? ( ("+S+" = "+d+" === undefined || "+T+" "+_+"= "+d+") ? "+h+" "+y+"= "+T+" : "+h+" "+y+" "+d+" ) : ( ("+S+" = "+T+" === true) ? "+h+" "+y+"= "+d+" : "+h+" "+y+" "+d+" ) || "+h+" !== "+h+") { var op"+o+" = "+S+" ? '"+_+"' : '"+_+"='; ",s===void 0&&(b=m,u=t.errSchemaPath+"/"+m,d=T,f=v)}else{var O=typeof g=="number",R=_;if(O&&f){var D="'"+R+"'";n+=" if ( ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),n+=" ( "+d+" === undefined || "+g+" "+_+"= "+d+" ? "+h+" "+y+"= "+g+" : "+h+" "+y+" "+d+" ) || "+h+" !== "+h+") { "}else{O&&s===void 0?(S=!0,b=m,u=t.errSchemaPath+"/"+m,d=g,y+="="):(O&&(d=Math[p?"min":"max"](g,s)),g===(O?d:!0)?(S=!0,b=m,u=t.errSchemaPath+"/"+m,y+="="):(S=!1,R+="="));var D="'"+R+"'";n+=" if ( ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),n+=" "+h+" "+y+" "+d+" || "+h+" !== "+h+") { "}}b=b||r;var w=w||[];w.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { comparison: "+D+", limit: "+d+", exclusive: "+S+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be "+R+" ",f?n+="' + "+d:n+=""+d+"'"),t.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+c:n+=""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var L=n;return n=w.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+L+"]); ":n+=" validate.errors = ["+L+"]; return false; ":n+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n},wq=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,m,h="data"+(a||""),f=t.opts.$data&&s&&s.$data,d;if(f?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",d="schema"+o):d=s,!(f||typeof s=="number"))throw new Error(r+" must be number");var p=r=="maxItems"?">":"<";n+="if ( ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),n+=" "+h+".length "+p+" "+d+") { ";var m=r,g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(m||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { limit: "+d+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have ",r=="maxItems"?n+="more":n+="fewer",n+=" than ",f?n+="' + "+d+" + '":n+=""+s,n+=" items' "),t.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+c:n+=""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var v=n;return n=g.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n},Aq=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,m,h="data"+(a||""),f=t.opts.$data&&s&&s.$data,d;if(f?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",d="schema"+o):d=s,!(f||typeof s=="number"))throw new Error(r+" must be number");var p=r=="maxLength"?">":"<";n+="if ( ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t.opts.unicode===!1?n+=" "+h+".length ":n+=" ucs2length("+h+") ",n+=" "+p+" "+d+") { ";var m=r,g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { limit: "+d+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT be ",r=="maxLength"?n+="longer":n+="shorter",n+=" than ",f?n+="' + "+d+" + '":n+=""+s,n+=" characters' "),t.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+c:n+=""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var v=n;return n=g.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n},Oq=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,m,h="data"+(a||""),f=t.opts.$data&&s&&s.$data,d;if(f?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",d="schema"+o):d=s,!(f||typeof s=="number"))throw new Error(r+" must be number");var p=r=="maxProperties"?">":"<";n+="if ( ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),n+=" Object.keys("+h+").length "+p+" "+d+") { ";var m=r,g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(m||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { limit: "+d+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have ",r=="maxProperties"?n+="more":n+="fewer",n+=" than ",f?n+="' + "+d+" + '":n+=""+s,n+=" properties' "),t.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+c:n+=""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var v=n;return n=g.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n},QWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f=t.opts.$data&&s&&s.$data,d;if(f?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",d="schema"+o):d=s,!(f||typeof s=="number"))throw new Error(r+" must be number");n+="var division"+o+";if (",f&&(n+=" "+d+" !== undefined && ( typeof "+d+" != 'number' || "),n+=" (division"+o+" = "+h+" / "+d+", ",t.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+t.opts.multipleOfPrecision+" ":n+=" division"+o+" !== parseInt(division"+o+") ",n+=" ) ",f&&(n+="  )  "),n+=" ) {   ";var p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { multipleOf: "+d+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be multiple of ",f?n+="' + "+d:n+=""+d+"'"),t.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+c:n+=""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n},JWe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="errs__"+o,d=t.util.copy(t);d.level++;var p="valid"+d.level;if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){d.schema=s,d.schemaPath=c,d.errSchemaPath=u,n+=" var "+f+" = errors;  ";var m=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.createErrors=!1;var g;d.opts.allErrors&&(g=d.opts.allErrors,d.opts.allErrors=!1),n+=" "+t.validate(d)+" ",d.createErrors=!0,g&&(d.opts.allErrors=g),t.compositeRule=d.compositeRule=m,n+=" if ("+p+") {   ";var v=v||[];v.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",t.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var _=n;n=v.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",t.createErrors!==!1?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",t.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n},eYe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d="errs__"+o,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v=p.baseId,_="prevValid"+o,y="passingSchemas"+o;n+="var "+d+" = errors , "+_+" = false , "+f+" = false , "+y+" = null; ";var b=t.compositeRule;t.compositeRule=p.compositeRule=!0;var T=s;if(T)for(var S,k=-1,O=T.length-1;k<O;)S=T[k+=1],(t.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:t.util.schemaHasRules(S,t.RULES.all))?(p.schema=S,p.schemaPath=c+"["+k+"]",p.errSchemaPath=u+"/"+k,n+="  "+t.validate(p)+" ",p.baseId=v):n+=" var "+g+" = true; ",k&&(n+=" if ("+g+" && "+_+") { "+f+" = false; "+y+" = ["+y+", "+k+"]; } else { ",m+="}"),n+=" if ("+g+") { "+f+" = "+_+" = true; "+y+" = "+k+"; }";return t.compositeRule=p.compositeRule=b,n+=""+m+"if (!"+f+") {   var err =   ",t.createErrors!==!1?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { passingSchemas: "+y+" } ",t.opts.messages!==!1&&(n+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",t.opts.allErrors&&(n+=" } "),n},tYe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f=t.opts.$data&&s&&s.$data,d;f?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",d="schema"+o):d=s;var p=f?"(new RegExp("+d+"))":t.usePattern(s);n+="if ( ",f&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),n+=" !"+p+".test("+h+") ) {   ";var m=m||[];m.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { pattern:  ",f?n+=""+d:n+=""+t.util.toQuotedString(s),n+="  } ",t.opts.messages!==!1&&(n+=` , message: 'should match pattern "`,f?n+="' + "+d+" + '":n+=""+t.util.escapeQuotes(s),n+=`"' `),t.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+c:n+=""+t.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n},rYe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="errs__"+o,d=t.util.copy(t),p="";d.level++;var m="valid"+d.level,g="key"+o,v="idx"+o,_=d.dataLevel=t.dataLevel+1,y="data"+_,b="dataProperties"+o,T=Object.keys(s||{}).filter(K),S=t.schema.patternProperties||{},k=Object.keys(S).filter(K),O=t.schema.additionalProperties,D=T.length||k.length,R=O===!1,w=typeof O=="object"&&Object.keys(O).length,L=t.opts.removeAdditional,B=R||w||L,A=t.opts.ownProperties,M=t.baseId,j=t.schema.required;if(j&&!(t.opts.$data&&j.$data)&&j.length<t.opts.loopRequired)var W=t.util.toHash(j);function K(Q){return Q!=="__proto__"}if(n+="var "+f+" = errors;var "+m+" = true;",A&&(n+=" var "+b+" = undefined;"),B){if(A?n+=" "+b+" = "+b+" || Object.keys("+h+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+g+" = "+b+"["+v+"]; ":n+=" for (var "+g+" in "+h+") { ",D){if(n+=" var isAdditional"+o+" = !(false ",T.length)if(T.length>8)n+=" || validate.schema"+c+".hasOwnProperty("+g+") ";else{var oe=T;if(oe)for(var fe,Ae=-1,de=oe.length-1;Ae<de;)fe=oe[Ae+=1],n+=" || "+g+" == "+t.util.toQuotedString(fe)+" "}if(k.length){var Z=k;if(Z)for(var ne,ue=-1,Oe=Z.length-1;ue<Oe;)ne=Z[ue+=1],n+=" || "+t.usePattern(ne)+".test("+g+") "}n+=" ); if (isAdditional"+o+") { "}if(L=="all")n+=" delete "+h+"["+g+"]; ";else{var Ce=t.errorPath,je="' + "+g+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers)),R)if(L)n+=" delete "+h+"["+g+"]; ";else{n+=" "+m+" = false; ";var Pe=u;u=t.errSchemaPath+"/additionalProperties";var Ue=Ue||[];Ue.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { additionalProperty: '"+je+"' } ",t.opts.messages!==!1&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var Ye=n;n=Ue.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+Ye+"]); ":n+=" validate.errors = ["+Ye+"]; return false; ":n+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=Pe,l&&(n+=" break; ")}else if(w)if(L=="failing"){n+=" var "+f+" = errors;  ";var xe=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.schema=O,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var qe=h+"["+g+"]";d.dataPathArr[_]=g;var We=t.validate(d);d.baseId=M,t.util.varOccurences(We,y)<2?n+=" "+t.util.varReplace(We,y,qe)+" ":n+=" var "+y+" = "+qe+"; "+We+" ",n+=" if (!"+m+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+h+"["+g+"]; }  ",t.compositeRule=d.compositeRule=xe}else{d.schema=O,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var qe=h+"["+g+"]";d.dataPathArr[_]=g;var We=t.validate(d);d.baseId=M,t.util.varOccurences(We,y)<2?n+=" "+t.util.varReplace(We,y,qe)+" ":n+=" var "+y+" = "+qe+"; "+We+" ",l&&(n+=" if (!"+m+") break; ")}t.errorPath=Ce}D&&(n+=" } "),n+=" }  ",l&&(n+=" if ("+m+") { ",p+="}")}var vt=t.opts.useDefaults&&!t.compositeRule;if(T.length){var dt=T;if(dt)for(var fe,Ze=-1,Et=dt.length-1;Ze<Et;){fe=dt[Ze+=1];var _t=s[fe];if(t.opts.strictKeywords?typeof _t=="object"&&Object.keys(_t).length>0||_t===!1:t.util.schemaHasRules(_t,t.RULES.all)){var Rt=t.util.getProperty(fe),qe=h+Rt,Kr=vt&&_t.default!==void 0;d.schema=_t,d.schemaPath=c+Rt,d.errSchemaPath=u+"/"+t.util.escapeFragment(fe),d.errorPath=t.util.getPath(t.errorPath,fe,t.opts.jsonPointers),d.dataPathArr[_]=t.util.toQuotedString(fe);var We=t.validate(d);if(d.baseId=M,t.util.varOccurences(We,y)<2){We=t.util.varReplace(We,y,qe);var Mt=qe}else{var Mt=y;n+=" var "+y+" = "+qe+"; "}if(Kr)n+=" "+We+" ";else{if(W&&W[fe]){n+=" if ( "+Mt+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(fe)+"') "),n+=") { "+m+" = false; ";var Ce=t.errorPath,Pe=u,ke=t.util.escapeQuotes(fe);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(Ce,fe,t.opts.jsonPointers)),u=t.errSchemaPath+"/required";var Ue=Ue||[];Ue.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+ke+"' } ",t.opts.messages!==!1&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ke+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var Ye=n;n=Ue.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+Ye+"]); ":n+=" validate.errors = ["+Ye+"]; return false; ":n+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=Pe,t.errorPath=Ce,n+=" } else { "}else l?(n+=" if ( "+Mt+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(fe)+"') "),n+=") { "+m+" = true; } else { "):(n+=" if ("+Mt+" !== undefined ",A&&(n+=" &&   Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(fe)+"') "),n+=" ) { ");n+=" "+We+" } "}}l&&(n+=" if ("+m+") { ",p+="}")}}if(k.length){var te=k;if(te)for(var ne,ae=-1,ye=te.length-1;ae<ye;){ne=te[ae+=1];var _t=S[ne];if(t.opts.strictKeywords?typeof _t=="object"&&Object.keys(_t).length>0||_t===!1:t.util.schemaHasRules(_t,t.RULES.all)){d.schema=_t,d.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(ne),d.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(ne),A?n+=" "+b+" = "+b+" || Object.keys("+h+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+g+" = "+b+"["+v+"]; ":n+=" for (var "+g+" in "+h+") { ",n+=" if ("+t.usePattern(ne)+".test("+g+")) { ",d.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var qe=h+"["+g+"]";d.dataPathArr[_]=g;var We=t.validate(d);d.baseId=M,t.util.varOccurences(We,y)<2?n+=" "+t.util.varReplace(We,y,qe)+" ":n+=" var "+y+" = "+qe+"; "+We+" ",l&&(n+=" if (!"+m+") break; "),n+=" } ",l&&(n+=" else "+m+" = true; "),n+=" }  ",l&&(n+=" if ("+m+") { ",p+="}")}}}return l&&(n+=" "+p+" if ("+f+" == errors) {"),n},nYe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="errs__"+o,d=t.util.copy(t),p="";d.level++;var m="valid"+d.level;if(n+="var "+f+" = errors;",t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){d.schema=s,d.schemaPath=c,d.errSchemaPath=u;var g="key"+o,v="idx"+o,_="i"+o,y="' + "+g+" + '",b=d.dataLevel=t.dataLevel+1,T="data"+b,S="dataProperties"+o,k=t.opts.ownProperties,O=t.baseId;k&&(n+=" var "+S+" = undefined; "),k?n+=" "+S+" = "+S+" || Object.keys("+h+"); for (var "+v+"=0; "+v+"<"+S+".length; "+v+"++) { var "+g+" = "+S+"["+v+"]; ":n+=" for (var "+g+" in "+h+") { ",n+=" var startErrs"+o+" = errors; ";var D=g,R=t.compositeRule;t.compositeRule=d.compositeRule=!0;var w=t.validate(d);d.baseId=O,t.util.varOccurences(w,T)<2?n+=" "+t.util.varReplace(w,T,D)+" ":n+=" var "+T+" = "+D+"; "+w+" ",t.compositeRule=d.compositeRule=R,n+=" if (!"+m+") { for (var "+_+"=startErrs"+o+"; "+_+"<errors; "+_+"++) { vErrors["+_+"].propertyName = "+g+"; }   var err =   ",t.createErrors!==!1?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { propertyName: '"+y+"' } ",t.opts.messages!==!1&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),l&&(n+=" break; "),n+=" } }"}return l&&(n+=" "+p+" if ("+f+" == errors) {"),n},iYe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d=t.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ");var p="schema"+o;if(!d)if(s.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var m=[],g=s;if(g)for(var v,_=-1,y=g.length-1;_<y;){v=g[_+=1];var b=t.schema.properties[v];b&&(t.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:t.util.schemaHasRules(b,t.RULES.all))||(m[m.length]=v)}}else var m=s;if(d||m.length){var T=t.errorPath,S=d||m.length>=t.opts.loopRequired,k=t.opts.ownProperties;if(l)if(n+=" var missing"+o+"; ",S){d||(n+=" var "+p+" = validate.schema"+c+"; ");var O="i"+o,D="schema"+o+"["+O+"]",R="' + "+D+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(T,D,t.opts.jsonPointers)),n+=" var "+f+" = true; ",d&&(n+=" if (schema"+o+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+o+")) "+f+" = false; else {"),n+=" for (var "+O+" = 0; "+O+" < "+p+".length; "+O+"++) { "+f+" = "+h+"["+p+"["+O+"]] !== undefined ",k&&(n+=" &&   Object.prototype.hasOwnProperty.call("+h+", "+p+"["+O+"]) "),n+="; if (!"+f+") break; } ",d&&(n+="  }  "),n+="  if (!"+f+") {   ";var w=w||[];w.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+R+"' } ",t.opts.messages!==!1&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+R+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var L=n;n=w.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+L+"]); ":n+=" validate.errors = ["+L+"]; return false; ":n+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var B=m;if(B)for(var A,O=-1,M=B.length-1;O<M;){A=B[O+=1],O&&(n+=" || ");var j=t.util.getProperty(A),W=h+j;n+=" ( ( "+W+" === undefined ",k&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(A)+"') "),n+=") && (missing"+o+" = "+t.util.toQuotedString(t.opts.jsonPointers?A:j)+") ) "}n+=") {  ";var D="missing"+o,R="' + "+D+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(T,D,!0):T+" + "+D);var w=w||[];w.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+R+"' } ",t.opts.messages!==!1&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+R+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var L=n;n=w.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+L+"]); ":n+=" validate.errors = ["+L+"]; return false; ":n+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(S){d||(n+=" var "+p+" = validate.schema"+c+"; ");var O="i"+o,D="schema"+o+"["+O+"]",R="' + "+D+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(T,D,t.opts.jsonPointers)),d&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+R+"' } ",t.opts.messages!==!1&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+R+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+O+" = 0; "+O+" < "+p+".length; "+O+"++) { if ("+h+"["+p+"["+O+"]] === undefined ",k&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", "+p+"["+O+"]) "),n+=") {  var err =   ",t.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+R+"' } ",t.opts.messages!==!1&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+R+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(n+="  }  ")}else{var K=m;if(K)for(var A,oe=-1,fe=K.length-1;oe<fe;){A=K[oe+=1];var j=t.util.getProperty(A),R=t.util.escapeQuotes(A),W=h+j;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(T,A,t.opts.jsonPointers)),n+=" if ( "+W+" === undefined ",k&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(A)+"') "),n+=") {  var err =   ",t.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+R+"' } ",t.opts.messages!==!1&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+R+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=T}else l&&(n+=" if (true) {");return n},oYe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h="data"+(a||""),f="valid"+o,d=t.opts.$data&&s&&s.$data,p;if(d?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",p="schema"+o):p=s,(s||d)&&t.opts.uniqueItems!==!1){d&&(n+=" var "+f+"; if ("+p+" === false || "+p+" === undefined) "+f+" = true; else if (typeof "+p+" != 'boolean') "+f+" = false; else { "),n+=" var i = "+h+".length , "+f+" = true , j; if (i > 1) { ";var m=t.schema.items&&t.schema.items.type,g=Array.isArray(m);if(!m||m=="object"||m=="array"||g&&(m.indexOf("object")>=0||m.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+f+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var v="checkDataType"+(g?"s":"");n+=" if ("+t.util[v](m,"item",t.opts.strictNumbers,!0)+") continue; ",g&&(n+=` if (typeof item == 'string') item = '"' + item; `),n+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",d&&(n+="  }  "),n+=" if (!"+f+") {   ";var _=_||[];_.push(n),n="",t.createErrors!==!1?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { i: i, j: j } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+c:n+=""+s,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var y=n;n=_.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n},aYe={$ref:jWe,allOf:UWe,anyOf:GWe,$comment:zWe,const:VWe,contains:WWe,dependencies:YWe,enum:qWe,format:XWe,if:KWe,items:ZWe,maximum:Sq,minimum:Sq,maxItems:wq,minItems:wq,maxLength:Aq,minLength:Aq,maxProperties:Oq,minProperties:Oq,multipleOf:QWe,not:JWe,oneOf:eYe,pattern:tYe,properties:rYe,propertyNames:nYe,required:iYe,uniqueItems:oYe,validate:lq},kq=aYe,Fx=ed.toHash,sYe=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],i=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],n=["number","integer","string","array","object","boolean","null"];return t.all=Fx(r),t.types=Fx(n),t.forEach(function(o){o.rules=o.rules.map(function(a){var s;if(typeof a=="object"){var c=Object.keys(a)[0];s=a[c],a=c,s.forEach(function(l){r.push(l),t.all[l]=!0})}r.push(a);var u=t.all[a]={keyword:a,code:kq[a],implements:s};return u}),t.all.$comment={keyword:"$comment",code:kq.$comment},o.type&&(t.types[o.type]=o)}),t.keywords=Fx(r.concat(i)),t.custom={},t},Iq=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],lYe=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i=t[r].split("/"),n=e,o;for(o=1;o<i.length;o++)n=n[i[o]];for(o=0;o<Iq.length;o++){var a=Iq[o],s=n[a];s&&(n[a]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},cYe=Bx.MissingRef,uYe=Cq;function Cq(e,t,r){var i=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof t=="function"&&(r=t,t=void 0);var n=o(e).then(function(){var s=i._addSchema(e,void 0,t);return s.validate||a(s)});return r&&n.then(function(s){r(null,s)},r),n;function o(s){var c=s.$schema;return c&&!i.getSchema(c)?Cq.call(i,{$ref:c},!0):Promise.resolve()}function a(s){try{return i._compile(s)}catch(u){if(u instanceof cYe)return c(u);throw u}function c(u){var l=u.missingSchema;if(d(l))throw new Error("Schema "+l+" is loaded but "+u.missingRef+" cannot be resolved");var h=i._loadingSchemas[l];return h||(h=i._loadingSchemas[l]=i._opts.loadSchema(l),h.then(f,f)),h.then(function(p){if(!d(l))return o(p).then(function(){d(l)||i.addSchema(p,l,void 0,t)})}).then(function(){return a(s)});function f(){delete i._loadingSchemas[l]}function d(p){return i._refs[p]||i._schemas[p]}}}}var fYe=function(t,r,i){var n=" ",o=t.level,a=t.dataLevel,s=t.schema[r],c=t.schemaPath+t.util.getProperty(r),u=t.errSchemaPath+"/"+r,l=!t.opts.allErrors,h,f="data"+(a||""),d="valid"+o,p="errs__"+o,m=t.opts.$data&&s&&s.$data,g;m?(n+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",g="schema"+o):g=s;var v=this,_="definition"+o,y=v.definition,b="",T,S,k,O,D;if(m&&y.$data){D="keywordValidate"+o;var R=y.validateSchema;n+=" var "+_+" = RULES.custom['"+r+"'].definition; var "+D+" = "+_+".validate;"}else{if(O=t.useCustomRule(v,s,t.schema,t),!O)return;g="validate.schema"+c,D=O.code,T=y.compile,S=y.inline,k=y.macro}var w=D+".errors",L="i"+o,B="ruleErr"+o,A=y.async;if(A&&!t.async)throw new Error("async keyword in sync schema");if(S||k||(n+=""+w+" = null;"),n+="var "+p+" = errors;var "+d+";",m&&y.$data&&(b+="}",n+=" if ("+g+" === undefined) { "+d+" = true; } else { ",R&&(b+="}",n+=" "+d+" = "+_+".validateSchema("+g+"); if ("+d+") { ")),S)y.statements?n+=" "+O.validate+" ":n+=" "+d+" = "+O.validate+"; ";else if(k){var M=t.util.copy(t),b="";M.level++;var j="valid"+M.level;M.schema=O.validate,M.schemaPath="";var W=t.compositeRule;t.compositeRule=M.compositeRule=!0;var K=t.validate(M).replace(/validate\.schema/g,D);t.compositeRule=M.compositeRule=W,n+=" "+K}else{var oe=oe||[];oe.push(n),n="",n+="  "+D+".call( ",t.opts.passContext?n+="this":n+="self",T||y.schema===!1?n+=" , "+f+" ":n+=" , "+g+" , "+f+" , validate.schema"+t.schemaPath+" ",n+=" , (dataPath || '')",t.errorPath!='""'&&(n+=" + "+t.errorPath);var fe=a?"data"+(a-1||""):"parentData",Ae=a?t.dataPathArr[a]:"parentDataProperty";n+=" , "+fe+" , "+Ae+" , rootData )  ";var de=n;n=oe.pop(),y.errors===!1?(n+=" "+d+" = ",A&&(n+="await "),n+=""+de+"; "):A?(w="customErrors"+o,n+=" var "+w+" = null; try { "+d+" = await "+de+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+w+" = e.errors; else throw e; } "):n+=" "+w+" = null; "+d+" = "+de+"; "}if(y.modifying&&(n+=" if ("+fe+") "+f+" = "+fe+"["+Ae+"];"),n+=""+b,y.valid)l&&(n+=" if (true) { ");else{n+=" if ( ",y.valid===void 0?(n+=" !",k?n+=""+j:n+=""+d):n+=" "+!y.valid+" ",n+=") { ",h=v.keyword;var oe=oe||[];oe.push(n),n="";var oe=oe||[];oe.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(h||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { keyword: '"+v.keyword+"' } ",t.opts.messages!==!1&&(n+=` , message: 'should pass "`+v.keyword+`" keyword validation' `),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var Z=n;n=oe.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+Z+"]); ":n+=" validate.errors = ["+Z+"]; return false; ":n+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ne=n;n=oe.pop(),S?y.errors?y.errors!="full"&&(n+="  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+B+" = vErrors["+L+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+u+'"; } ',t.opts.verbose&&(n+=" "+B+".schema = "+g+"; "+B+".data = "+f+"; "),n+=" } "):y.errors===!1?n+=" "+ne+" ":(n+=" if ("+p+" == errors) { "+ne+" } else {  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+B+" = vErrors["+L+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+u+'"; } ',t.opts.verbose&&(n+=" "+B+".schema = "+g+"; "+B+".data = "+f+"; "),n+=" } } "):k?(n+="   var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(h||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { keyword: '"+v.keyword+"' } ",t.opts.messages!==!1&&(n+=` , message: 'should pass "`+v.keyword+`" keyword validation' `),t.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; ")):y.errors===!1?n+=" "+ne+" ":(n+=" if (Array.isArray("+w+")) { if (vErrors === null) vErrors = "+w+"; else vErrors = vErrors.concat("+w+"); errors = vErrors.length;  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+B+" = vErrors["+L+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+t.errorPath+";  "+B+'.schemaPath = "'+u+'";  ',t.opts.verbose&&(n+=" "+B+".schema = "+g+"; "+B+".data = "+f+"; "),n+=" } } else { "+ne+" } "),n+=" } ",l&&(n+=" else { ")}return n};const Pq={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var Dq=Pq,hYe={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Dq.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Dq.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},dYe=/^[a-z_$][a-z0-9_$-]*$/i,pYe=fYe,mYe=hYe,gYe={add:vYe,get:yYe,remove:bYe,validate:jx};function vYe(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!dYe.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var n=0;n<i.length;n++)a(e,i[n],t);else a(e,i,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}r.keywords[e]=r.all[e]=!0;function a(s,c,u){for(var l,h=0;h<r.length;h++){var f=r[h];if(f.type==c){l=f;break}}l||(l={type:c,rules:[]},r.push(l));var d={keyword:s,definition:u,custom:!0,code:pYe,implements:u.implements};l.rules.push(d),r.custom[s]=d}return this}function yYe(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1}function bYe(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,n=0;n<i.length;n++)if(i[n].keyword==e){i.splice(n,1);break}return this}function jx(e,t){jx.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(mYe,!0);if(r(e))return!0;if(jx.errors=r.errors,t)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}const _Ye={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var xq=_We,nu=xx,TYe=kWe,Nq=tq,EYe=sq,SYe=RWe,wYe=sYe,Rq=lYe,Mq=ed,AYe=jr;jr.prototype.validate=kYe,jr.prototype.compile=IYe,jr.prototype.addSchema=CYe,jr.prototype.addMetaSchema=PYe,jr.prototype.validateSchema=DYe,jr.prototype.getSchema=NYe,jr.prototype.removeSchema=MYe,jr.prototype.addFormat=GYe,jr.prototype.errorsText=UYe,jr.prototype._addSchema=LYe,jr.prototype._compile=BYe,jr.prototype.compileAsync=uYe;var uE=gYe;jr.prototype.addKeyword=uE.add,jr.prototype.getKeyword=uE.get,jr.prototype.removeKeyword=uE.remove,jr.prototype.validateKeyword=uE.validate;var Lq=Bx;jr.ValidationError=Lq.Validation,jr.MissingRefError=Lq.MissingRef,jr.$dataMetaSchema=Rq;var fE="http://json-schema.org/draft-07/schema",Bq=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],OYe=["/properties"];function jr(e){if(!(this instanceof jr))return new jr(e);e=this._opts=Mq.copy(e)||{},XYe(this),this._schemas={},this._refs={},this._fragments={},this._formats=SYe(e.format),this._cache=e.cache||new TYe,this._loadingSchemas={},this._compilations=[],this.RULES=wYe(),this._getId=HYe(e),e.loopRequired=e.loopRequired||1/0,e.errorDataPath=="property"&&(e._errorDataPathProperty=!0),e.serialize===void 0&&(e.serialize=EYe),this._metaOpts=qYe(this),e.formats&&WYe(this),e.keywords&&YYe(this),zYe(this),typeof e.meta=="object"&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),VYe(this)}function kYe(e,t){var r;if(typeof e=="string"){if(r=this.getSchema(e),!r)throw new Error('no schema with key or ref "'+e+'"')}else{var i=this._addSchema(e);r=i.validate||this._compile(i)}var n=r(t);return r.$async!==!0&&(this.errors=r.errors),n}function IYe(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)}function CYe(e,t,r,i){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.addSchema(e[n],void 0,r,i);return this}var o=this._getId(e);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return t=nu.normalizeId(t||o),$q(this,t),this._schemas[t]=this._addSchema(e,r,i,!0),this}function PYe(e,t,r){return this.addSchema(e,t,r,!0),this}function DYe(e,t){var r=e.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||xYe(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(r,e);if(!i&&t){var n="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(n);else throw new Error(n)}return i}function xYe(e){var t=e._opts.meta;return e._opts.defaultMeta=typeof t=="object"?e._getId(t)||t:e.getSchema(fE)?fE:void 0,e._opts.defaultMeta}function NYe(e){var t=Hq(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return RYe(this,e)}}function RYe(e,t){var r=nu.schema.call(e,{schema:{}},t);if(r){var i=r.schema,n=r.root,o=r.baseId,a=xq.call(e,i,n,void 0,o);return e._fragments[t]=new Nq({ref:t,fragment:!0,schema:i,root:n,baseId:o,validate:a}),a}}function Hq(e,t){return t=nu.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function MYe(e){if(e instanceof RegExp)return hE(this,this._schemas,e),hE(this,this._refs,e),this;switch(typeof e){case"undefined":return hE(this,this._schemas),hE(this,this._refs),this._cache.clear(),this;case"string":var t=Hq(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,i=r?r(e):e;this._cache.del(i);var n=this._getId(e);n&&(n=nu.normalizeId(n),delete this._schemas[n],delete this._refs[n])}return this}function hE(e,t,r){for(var i in t){var n=t[i];!n.meta&&(!r||r.test(i))&&(e._cache.del(n.cacheKey),delete t[i])}}function LYe(e,t,r,i){if(typeof e!="object"&&typeof e!="boolean")throw new Error("schema should be object or boolean");var n=this._opts.serialize,o=n?n(e):e,a=this._cache.get(o);if(a)return a;i=i||this._opts.addUsedSchema!==!1;var s=nu.normalizeId(this._getId(e));s&&i&&$q(this,s);var c=this._opts.validateSchema!==!1&&!t,u;c&&!(u=s&&s==nu.normalizeId(e.$schema))&&this.validateSchema(e,!0);var l=nu.ids.call(this,e),h=new Nq({id:s,schema:e,localRefs:l,cacheKey:o,meta:r});return s[0]!="#"&&i&&(this._refs[s]=h),this._cache.put(o,h),c&&u&&this.validateSchema(e,!0),h}function BYe(e,t){if(e.compiling)return e.validate=n,n.schema=e.schema,n.errors=null,n.root=t||n,e.schema.$async===!0&&(n.$async=!0),n;e.compiling=!0;var r;e.meta&&(r=this._opts,this._opts=this._metaOpts);var i;try{i=xq.call(this,e.schema,t,e.localRefs)}catch(o){throw delete e.validate,o}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function n(){var o=e.validate,a=o.apply(this,arguments);return n.errors=o.errors,a}}function HYe(e){switch(e.schemaId){case"auto":return jYe;case"id":return $Ye;default:return FYe}}function $Ye(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function FYe(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function jYe(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function UYe(e,t){if(e=e||this.errors,!e)return"No errors";t=t||{};for(var r=t.separator===void 0?", ":t.separator,i=t.dataVar===void 0?"data":t.dataVar,n="",o=0;o<e.length;o++){var a=e[o];a&&(n+=i+a.dataPath+" "+a.message+r)}return n.slice(0,-r.length)}function GYe(e,t){return typeof t=="string"&&(t=new RegExp(t)),this._formats[e]=t,this}function zYe(e){var t;if(e._opts.$data&&(t=_Ye,e.addMetaSchema(t,t.$id,!0)),e._opts.meta!==!1){var r=Pq;e._opts.$data&&(r=Rq(r,OYe)),e.addMetaSchema(r,fE,!0),e._refs["http://json-schema.org/schema"]=fE}}function VYe(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}function WYe(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}function YYe(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}function $q(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function qYe(e){for(var t=Mq.copy(e._opts),r=0;r<Bq.length;r++)delete t[Bq[r]];return t}function XYe(e){var t=e._opts.logger;if(t===!1)e.logger={log:Ux,warn:Ux,error:Ux};else{if(t===void 0&&(t=console),!(typeof t=="object"&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}function Ux(){}const Fq=ui(AYe),Gx={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://higlass.io/#viewconf",title:"HiGlass viewconf",type:"object",additionalProperties:!1,required:[],properties:{editable:{type:"boolean",default:!0},viewEditable:{type:"boolean",default:!0},tracksEditable:{type:"boolean",default:!0},zoomFixed:{type:"boolean"},compactLayout:{type:"boolean"},exportViewUrl:{type:"string"},trackSourceServers:{type:"array",items:{type:"string"},minLength:1},zoomLocks:{$ref:"#/definitions/locks/zoomLocks"},locationLocks:{$ref:"#/definitions/locks/locationLocks"},valueScaleLocks:{$ref:"#/definitions/locks/valueScaleLocks"},views:{type:"array",items:{$ref:"#/definitions/view"},minLength:1},chromInfoPath:{type:"string"}},definitions:{data:{type:"object",properties:{url:{type:"string"},server:{type:"string"},filetype:{type:"string"},type:{type:"string"},tilesetInfo:{type:"object"},children:{type:"array"},tiles:{type:"object"}}},locks:{slug:{type:"string"},locksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{$ref:"#/definitions/locks/slug"}}},axisSpecificLocks:{additionalProperties:!1,properties:{axis:{enum:["x","y"],type:"string"},lock:{type:"string"}},required:["lock","axis"],type:"object"},locationLocksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{anyOf:[{type:"string"},{additionalProperties:!1,properties:{x:{$ref:"#/definitions/locks/axisSpecificLocks"},y:{$ref:"#/definitions/locks/axisSpecificLocks"}},type:"object"}]}}},zoomLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},locationLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locationLocksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},valueScaleLocks:{type:"object",additionalProperties:!1,required:["locksByViewUid","locksDict"],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"},ignoreOffScreenValues:{type:"boolean"}},patternProperties:{"^(?!(uid|ignoreOffScreenValues)).":{type:"object",additionalProperties:!1,required:["view","track"],properties:{view:{type:"string"},track:{$ref:"#/definitions/locks/slug"}}}}}}}}}},view:{type:"object",additionalProperties:!1,required:["tracks","layout"],properties:{autocompleteSource:{type:"string"},chromInfoPath:{type:"string"},genomePositionSearchBox:{$ref:"#/definitions/viewProperties/genomePositionSearchBox"},genomePositionSearchBoxVisible:{type:"boolean"},initialXDomain:{$ref:"#/definitions/viewProperties/domain"},initialYDomain:{$ref:"#/definitions/viewProperties/domain"},layout:{$ref:"#/definitions/viewProperties/layout"},overlays:{type:"array",items:{$ref:"#/definitions/viewProperties/overlay"}},selectionView:{type:"boolean"},tracks:{$ref:"#/definitions/viewProperties/tracks_object"},uid:{type:"string"},zoomFixed:{type:"boolean"},zoomLimits:{type:"array",minLength:2,maxLength:2,default:[1,null]}}},viewProperties:{genomePositionSearchBox:{type:"object",title:"The Genome Position Search Box Schema",required:["chromInfoServer","chromInfoId"],properties:{autocompleteServer:{type:"string",title:"The Autocomplete Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},autocompleteId:{type:"string",title:"The Autocomplete ID",default:"",examples:["OHJakQICQD6gTD7skx4EWA"],pattern:"^(.*)$"},chromInfoServer:{type:"string",title:"The Chrominfo Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},chromInfoId:{type:"string",title:"The Chromosome Info ID",default:"",examples:["hg19"],pattern:"^(.*)$"},visible:{type:"boolean",title:"The Visible Schema",default:!1}}},overlay:{type:"object",additionalProperties:!1,properties:{chromInfoPath:{type:"string"},includes:{type:"array"},options:{type:"object",properties:{extent:{type:"array"},minWidth:{type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},strokePos:{type:["string","array"]},outline:{type:"string"},outlineOpacity:{type:"number"},outlineWidth:{type:"number"},outlinePos:{type:["string","array"]}}},type:{type:"string"},uid:{type:"string"}}},layout:{type:"object",additionalProperties:!1,required:["w","h","x","y"],properties:{x:{type:"integer",title:"The X Position",default:0},y:{type:"integer",title:"The Y Position",default:0},w:{type:"integer",title:"Width",default:12},h:{type:"integer",title:"Height",default:12},moved:{type:"boolean"},static:{type:"boolean"}}},tracks_object:{type:"object",additionalProperties:!1,properties:{left:{$ref:"#/definitions/viewProperties/tracks_array"},right:{$ref:"#/definitions/viewProperties/tracks_array"},top:{$ref:"#/definitions/viewProperties/tracks_array"},bottom:{$ref:"#/definitions/viewProperties/tracks_array"},center:{$ref:"#/definitions/viewProperties/tracks_array"},whole:{$ref:"#/definitions/viewProperties/tracks_array"},gallery:{$ref:"#/definitions/viewProperties/tracks_array"}}},tracks_array:{type:"array",items:{oneOf:[{$ref:"#/definitions/tracks/enum_track"},{$ref:"#/definitions/tracks/combined_track"},{$ref:"#/definitions/tracks/heatmap_track"},{$ref:"#/definitions/tracks/independent_viewport_projection_track"}]}},domain:{type:"array",items:{type:"number"},maxItems:2,minItems:2}},tracks:{heatmap_track:{type:"object",additionalProperties:!1,required:[],properties:{uid:{type:"string"},type:{const:"heatmap"},data:{$ref:"#/definitions/data"},height:{type:"number"},options:{type:"object"},position:{type:"string"},server:{type:"string"},tilesetUid:{type:"string"},width:{type:"number"},transforms:{type:"array"}}},combined_track:{type:"object",additionalProperties:!1,required:["contents"],properties:{contents:{$ref:"#/definitions/viewProperties/tracks_array"},height:{type:"number"},options:{},position:{type:"string"},type:{const:"combined"},uid:{type:"string"},width:{type:"number"}}},enum_track:{type:"object",additionalProperties:!1,required:["type"],properties:{server:{type:"string"},tilesetUid:{type:"string"},data:{$ref:"#/definitions/data"},uid:{type:"string"},type:{enum:["multivec","1d-heatmap","line","point","bar","divergent-bar","stacked-interval","gene-annotations","linear-2d-rectangle-domains","chromosome-labels","linear-heatmap","1d-value-interval","2d-annotations","2d-chromosome-annotations","2d-chromosome-grid","2d-chromosome-labels","2d-rectangle-domains","2d-tiles","arrowhead-domains","bedlike","cross-rule","dummy","horizontal-1d-annotations","horizontal-1d-heatmap","horizontal-1d-tiles","horizontal-1d-value-interval","horizontal-2d-rectangle-domains","horizontal-bar","horizontal-chromosome-grid","horizontal-chromosome-labels","horizontal-divergent-bar","horizontal-gene-annotations","horizontal-heatmap","horizontal-line","horizontal-multivec","horizontal-point","horizontal-rule","horizontal-vector-heatmap","image-tiles","left-axis","left-stacked-interval","mapbox-tiles","osm-2d-tile-ids","osm-tiles","raster-tiles","simple-svg","square-markers","top-axis","top-stacked-interval","vertical-1d-annotations","vertical-1d-heatmap","vertical-1d-tiles","vertical-1d-value-interval","vertical-2d-rectangle-domains","vertical-bar","vertical-bedlike","vertical-chromosome-grid","vertical-chromosome-labels","vertical-gene-annotations","vertical-heatmap","vertical-line","vertical-multivec","vertical-point","vertical-rule","vertical-vector-heatmap","viewport-projection-center","viewport-projection-horizontal","viewport-projection-vertical"]},chromInfoPath:{type:"string"},fromViewUid:{type:"string"},height:{type:"number"},options:{type:"object"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}},independent_viewport_projection_track:{type:"object",additionalProperties:!1,properties:{uid:{type:"string"},type:{enum:["viewport-projection-horizontal","viewport-projection-vertical","viewport-projection-center"]},fromViewUid:{type:"null"},projectionXDomain:{$ref:"#/definitions/viewProperties/domain"},projectionYDomain:{$ref:"#/definitions/viewProperties/domain"},options:{type:"object"},transforms:{type:"array"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}}}}},iu={"view-config-editor-header":"_view-config-editor-header_1hlm6_1","view-config-editor":"_view-config-editor_1hlm6_1","view-config-log":"_view-config-log_1hlm6_34","view-config-log-header":"_view-config-log-header_1hlm6_46","view-config-log-msg":"_view-config-log-msg_1hlm6_60",title:"_title_1hlm6_70",Warning:"_Warning_1hlm6_76",Success:"_Success_1hlm6_79",Error:"_Error_1hlm6_82"};function KYe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jq(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,QYe(i.key),i)}}function ZYe(e,t,r){return t&&jq(e.prototype,t),r&&jq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function QYe(e){var t=JYe(e,"string");return typeof t=="symbol"?t:String(t)}function JYe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zx(e,t)}function zx(e,t){return zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},zx(e,t)}function tqe(e){var t=nqe();return function(){var i=dE(e),n;if(t){var o=dE(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return rqe(this,n)}}function rqe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _l(e)}function _l(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dE(e){return dE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dE(e)}let Uq=function(e){eqe(r,e);var t=tqe(r);function r(i){var n;return KYe(this,r),n=t.call(this,i),n.state={code:i.viewConfig,hide:!1,showLog:!1,logMsgs:n.getLogMsgs(i.viewConfig)},n.handleChangeBound=n.handleChange.bind(_l(n)),n.handleKeyDownBound=n.handleKeyDown.bind(_l(n)),n.handleKeyUpBound=n.handleKeyUp.bind(_l(n)),n.handleSubmitBound=n.handleSubmit.bind(_l(n)),n.hideBound=n.hide.bind(_l(n)),n.showBound=n.show.bind(_l(n)),n.toggleLogBound=n.toggleLog.bind(_l(n)),n.pubSubs=[],n.pubSubs.push(n.props.pubSub.subscribe("keydown",n.handleKeyDownBound)),n.pubSubs.push(n.props.pubSub.subscribe("keyup",n.handleKeyUpBound)),n}return ZYe(r,[{key:"componentDidMount",value:async function(){this.editor&&(this.editor._input.focus(),this.editor._input.setSelectionRange(0,0),await rw(0),this.editorWrap&&(this.editorWrap.scrollTop=0))}},{key:"componentWillUnmount",value:function(){this.pubSubs.forEach(n=>this.props.pubSub.unsubscribe(n)),this.pubSubs=[]}},{key:"handleChange",value:function(n){const o=this.getLogMsgs(n);this.setState({code:n,logMsgs:o})}},{key:"handleKeyDown",value:function(n){n.key==="s"&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),this.props.onChange(this.state.code)),n.key==="Enter"&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),this.props.onChange(this.state.code),this.props.modal.close())}},{key:"handleKeyUp",value:function(n){this.setState({hide:!1}),n.key==="Escape"&&(n.preventDefault(),this.props.modal.close(),this.props.onCancel())}},{key:"handleSubmit",value:function(n){n&&n.preventDefault(),this.props.onSave(this.state.code)}},{key:"getLogMsgs",value:function(n){const o=[];let a;try{a=JSON.parse(n)}catch(u){return console.warn(u),o.push({type:"Error",msg:u.toString()}),o}const s=new Fq().compile(Gx);return s(a)||(console.warn("Invalid viewconf"),o.push({type:"Warning",msg:"Invalid viewconf"})),s.errors&&(console.warn(JSON.stringify(s.errors,null,2)),s.errors.forEach(u=>{o.push({type:"Warning",msg:JSON.stringify(u,null,2)})})),o.length===0&&o.push({type:"Success",msg:"No error or warnings"}),o}},{key:"hide",value:function(){this.setState({hide:!0})}},{key:"show",value:function(){this.setState({hide:!1})}},{key:"hideLog",value:function(){this.setState({showLog:!1})}},{key:"showLog",value:function(){this.setState({showLog:!0})}},{key:"toggleLog",value:function(){this.state.showLog?this.hideLog():this.showLog()}},{key:"render",value:function(){const n=this.state.logMsgs.map((o,a)=>{const s=`${a}-${o.msg}`;return E.createElement("tr",{key:s},E.createElement("td",{className:Zt(iu.title,iu[o.type])},`[${a}] ${o.type}`),E.createElement("td",null,E.createElement("pre",null,o.msg)))});return E.createElement(lg,{cancelShortcut:"ESC",cancelTitle:"Discard Changes",hide:this.state.hide,maxHeight:!0,okayShortcut:"\u2318+Enter",okayTitle:"Save and Close",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Edit View Config"},E.createElement(E.Fragment,null,E.createElement("header",{className:iu["view-config-editor-header"]},E.createElement(fs,{onBlur:this.showBound,onMouseDown:this.hideBound,onMouseOut:this.showBound,onMouseUp:this.showBound},"Hide While Mousedown"),E.createElement(fs,{onClick:()=>{this.props.onChange(this.state.code)},shortcut:"\u2318+S"},"Save")),E.createElement("div",{ref:o=>{this.editorWrap=o},className:iu["view-config-editor"]},E.createElement($Ve,{ref:o=>{this.editor=o},highlight:o=>QY.highlight(o,QY.languages.json),onValueChange:this.handleChangeBound,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:"inherit"},value:this.state.code})),E.createElement("div",{className:iu["view-config-log"],style:{height:this.state.showLog?"50%":"30px"}},E.createElement("div",{className:iu["view-config-log-header"],onClick:()=>this.toggleLogBound()},`Log Messages (${this.state.logMsgs.filter(o=>o.type!=="Success").length})`),E.createElement("div",{className:iu["view-config-log-msg"],style:{padding:this.state.showLog?"10px":0}},E.createElement("table",null,E.createElement("tbody",null,n))))))}}]),r}(E.Component);Uq.propTypes={modal:N.object.isRequired,onCancel:N.func.isRequired,onChange:N.func.isRequired,onSave:N.func.isRequired,pubSub:N.object.isRequired,viewConfig:N.string.isRequired};const iqe=Mf(iT(Uq));function oqe(e,t,r,i){const n=e.append("symbol").attr("id",t).attr("viewBox",i);r.forEach(o=>n.append("path").attr("d",o).attr("fill","currentColor"))}const aqe=e=>{e.setState(e.state)},sqe=function(t,r){const i=t;let n=[];const o=Uv(),a=()=>{n.forEach(s=>r.unsubscribe(s)),n=[]};return{destroy:a,publish:o.publish,stack:o.stack,public:{get version(){return LP},setBroadcastMousePositionGlobally(s=!1){i.setBroadcastMousePositionGlobally(s)},setShowGlobalMousePosition(s=!1){i.setShowGlobalMousePosition(s)},setGlobalMousePosition(s=!1){i.setBroadcastMousePositionGlobally(s),i.setShowGlobalMousePosition(s)},setAuthHeader(s){Kd(s),i.reload()},getAuthHeader(){return Kd()},getComponent(){return i},reload(s){let c;s?c=s.flatMap(u=>typeof u=="string"?i.iterateOverTracksInView(u):u):c=i.iterateOverTracks();for(const{viewId:u,trackId:l}of c){const h=i.getTrackObject(u,l);for(const f of h.childTracks||[h])f.fetchedTiles&&(f.removeTiles(Object.keys(f.fetchedTiles)),f.fetching.clear(),f.refreshTiles()),f.rerender(f.options,!0)}},destroy(){a(),Br.unmountComponentAtNode(i.topDiv.parentNode)},setRangeSelectionToInt(){i.setState({rangeSelectionToInt:!0})},setRangeSelectionToFloat(){i.setState({rangeSelectionToInt:!1})},setRangeSelection1dSize(s=0,c=1/0){i.setState({rangeSelection1dSize:[s,c]})},setViewConfig(s,c=!1){const u=i.processViewConfig(s);return new Promise(h=>{this.requestsInFlight=0,n.push(r.subscribe("requestSent",()=>{this.requestsInFlight+=1})),n.push(r.subscribe("requestReceived",()=>{this.requestsInFlight-=1,this.requestsInFlight===0&&h()})),i.setState({viewConfig:s,views:u},()=>{c&&h()})})},getViewConfig(){return i.getViewsAsJson()},validateViewConfig(s,{verbose:c=!1}={}){const u=new Fq().compile(Gx),l=u(s);return c&&u.errors&&console.warn(JSON.stringify(u.errors,null,2)),l},getMinMaxValue(s,c,u=!1,l=!1){return i.getMinMaxValue(s,c,u,l)},shareViewConfigAsLink(s){return i.handleExportViewsAsLink(s,!0)},showAvailableTrackPositions(s){i.setState({draggingHappening:s})},hideAvailableTrackPositions(){i.setState({draggingHappening:null})},showTrackChooser(s){i.setState({chooseTrackHandler:(...c)=>{i.setState({chooseTrackHandler:null}),s(...c)}})},hideTrackChooser(){this.setState({chooseTrackHandler:null})},setTrackValueScaleLimits(s,c,u,l){i.setTrackValueScaleLimits(s,c,u,l)},setDarkTheme(s){console.warn('`setDarkTheme(true)` is deprecated. Please use `setTheme("dark")`.');const c=s?"dark":"light";i.setTheme(c)},setTheme(s){console.warn("Please note that theming is still in beta!"),i.setTheme(s)},zoomTo(s,c,u,l,h,f=0){i.zoomTo(s,c,u,l,h,f)},zoomToGene(s,c,u=0,l=0){i.zoomToGene(s,c,u,l)},suggestGene(s,c,u){return i.suggestGene(s,c,u)},zoomToDataExtent(s){i.handleZoomToData(s)},resetViewport(s){i.resetViewport(s)},activateTool(s){switch(s){case"select":i.setMouseTool(qi);break;default:i.setMouseTool(ly);break}},exportAsPngBlobPromise(){return i.createPNGBlobPromise()},exportAsSvg(){return i.createSVGString()},exportAsViewConfString(){return i.getViewsAsString()},getRangeSelection(){return i.rangeSelection},getLocation(s){const c=s?i.xScales[s]&&i.yScales[s]&&s:Object.values(i.tiledPlots)[0]&&Object.values(i.tiledPlots)[0].props.uid;return c?{xDomain:i.xScales[c].domain(),yDomain:i.yScales[c].domain(),xRange:i.xScales[c].range(),yRange:i.yScales[c].range()}:"Please provide a valid view UUID sweetheart \u{1F619}"},getTrackObject(s,c){let u=s,l=c;return c||(u=Object.values(i.state.views)[0].uid,l=s),Ay(i,u,l)},option(s,c){if(typeof c>"u")return i.props.options[s];switch(s){case"sizeMode":i.props.options[s]=c,aqe(i);break;default:console.warn(`This option "${s}" is either unknown or not settable.`)}},off(s,c,u){const l=typeof c=="object"?c.callback:c;switch(s){case"click":o.unsubscribe("click",l);break;case"cursorLocation":o.unsubscribe("cursorLocation",l);break;case"location":i.offLocationChange(u,c);break;case"mouseMoveZoom":o.unsubscribe("mouseMoveZoom",l);break;case"wheel":o.unsubscribe("wheel",l);break;case"rangeSelection":o.unsubscribe("rangeSelection",l);break;case"viewConfig":i.offViewChange(c);break;case"createSVG":i.offPostCreateSVG();break;case"geneSearch":o.unsubscribe("geneSearch",l);break}},on(s,c,u,l){switch(s){case"click":return o.subscribe("click",c);case"cursorLocation":return o.subscribe("cursorLocation",c);case"location":return i.onLocationChange(u,c,l);case"mouseMoveZoom":return o.subscribe("mouseMoveZoom",c);case"wheel":return o.subscribe("wheel",c);case"rangeSelection":return o.subscribe("rangeSelection",c);case"viewConfig":return i.onViewChange(c);case"createSVG":return i.onPostCreateSVG(c);case"geneSearch":return o.subscribe("geneSearch",c);default:return}}}}},td={higlass:"_higlass_1uoq8_1","higlass-dark-theme":"_higlass-dark-theme_1uoq8_5","higlass-container-overflow":"_higlass-container-overflow_1uoq8_9","higlass-scroll-container-overflow":"_higlass-scroll-container-overflow_1uoq8_10","higlass-scroll-container-scroll":"_higlass-scroll-container-scroll_1uoq8_11","higlass-canvas":"_higlass-canvas_1uoq8_28","higlass-drawing-surface":"_higlass-drawing-surface_1uoq8_34","higlass-svg":"_higlass-svg_1uoq8_38","tiled-area":"_tiled-area_1uoq8_47","track-mouseover-menu":"_track-mouseover-menu_1uoq8_52"};function lqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gq(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,uqe(i.key),i)}}function cqe(e,t,r){return t&&Gq(e.prototype,t),r&&Gq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uqe(e){var t=fqe(e,"string");return typeof t=="symbol"?t:String(t)}function fqe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vx(e,t)}function Vx(e,t){return Vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Vx(e,t)}function dqe(e){var t=mqe();return function(){var i=pE(e),n;if(t){var o=pE(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return pqe(this,n)}}function pqe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vr(e)}function vr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pE(e){return pE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pE(e)}const zq=12,gqe=12,vqe=20,yqe="default",Vq="bounded",Wq="overflow",Lg="scroll";let rd=function(e){hqe(r,e);var t=dqe(r);function r(i){var n;lqe(this,r),n=t.call(this,i),rB(E.version)<15.6&&console.warn("HiGlass requires React v15.6 or higher. Current version: ",E.version),n.pubSub=Uv(),n.domEvent=O5(n.pubSub),n.pubSubs=[],n.minHorizontalHeight=20,n.minVerticalWidth=20,n.resizeSensor=null,n.uid=xt.nice(),n.tiledPlots={},n.genomePositionSearchBoxes={},n.xScales={},n.yScales={},n.projectionXDomains={},n.projectionYDomains={},n.topDiv=null,n.zoomToDataExtentOnInit=new Set,n.viewTrackUidsToCombinedUid={},n.combinedUidToViewTrack={},n.scalesChangedListeners={},n.draggingChangedListeners={},n.valueScalesChangedListeners={},n.zoomLocks={},n.locationLocks={},n.locationLocksAxisWise={x:{},y:{}},n.valueScaleLocks={},n.prevAuthToken=i.options.authToken,n.setCenters={},n.plusImg={},n.configImg={},He.PIXI=i.options&&i.options.PIXI||_E,n.viewMarginTop=+i.options.viewMarginTop>=0?+i.options.viewMarginTop:Fd,n.viewMarginBottom=+i.options.viewMarginBottom>=0?+i.options.viewMarginBottom:Fd,n.viewMarginLeft=+i.options.viewMarginLeft>=0?+i.options.viewMarginLeft:Fd,n.viewMarginRight=+i.options.viewMarginRight>=0?+i.options.viewMarginRight:Fd,n.viewPaddingTop=+i.options.viewPaddingTop>=0?+i.options.viewPaddingTop:jd,n.viewPaddingBottom=+i.options.viewPaddingBottom>=0?+i.options.viewPaddingBottom:jd,n.viewPaddingLeft=+i.options.viewPaddingLeft>=0?+i.options.viewPaddingLeft:jd,n.viewPaddingRight=+i.options.viewPaddingRight>=0?+i.options.viewPaddingRight:jd,n.genomePositionSearchBox=null,n.viewHeaders={},n.boundRefreshView=()=>{n.refreshView(Ud)},n.unsetOnLocationChange=[],n.setTheme(i.options.theme,i.options.isDarkTheme),n.viewconfLoaded=!1;const{viewConfig:o}=n.props,a=n.loadIfRemoteViewConfig(n.props.viewConfig);i.options.authToken&&Kd(i.options.authToken),n.pixiRoot=new He.PIXI.Container,n.pixiRoot.interactive=!0,n.pixiStage=new He.PIXI.Container,n.pixiStage.interactive=!0,n.pixiRoot.addChild(n.pixiStage),n.pixiMask=new He.PIXI.Graphics,n.pixiRoot.addChild(n.pixiMask),n.pixiStage.mask=n.pixiMask,n.element=null,n.scrollTop=0;let s=ly;if(n.props.options)switch(n.props.options.mouseTool){case qi:s=qi;break}n.props.options.pluginTracks&&(window.higlassTracksByType=Object.assign(window.higlassTracksByType||{},n.props.options.pluginTracks));const c={};try{window.higlassTracksByType&&Object.entries(window.higlassTracksByType).forEach(([m,g])=>{c[m]=g})}catch{console.warn("Broken config of a plugin track")}n.props.options.pluginDataFetchers&&(window.higlassDataFetchersByType=Object.assign(window.higlassDataFetchersByType||{},n.props.options.pluginDataFetchers));const u=window.higlassDataFetchersByType,l=n.props.options.pixelPreciseMarginPadding?1:30;n.mounted=!1,n.pluginTracks=c,n.pluginDataFetchers=u,n.state={currentBreakpoint:"lg",width:0,height:0,rowHeight:l,svgElement:null,canvasElement:null,customDialog:null,views:a,viewConfig:o,addTrackPositionMenuPosition:null,typedEditable:void 0,mouseOverOverlayUid:null,mouseTool:s,isDarkTheme:!1,rangeSelection1dSize:[0,1/0],rangeSelectionToInt:!1,modal:null,isShiftDown:!1},n.attachedToDOM=!1;const{public:h,destroy:f,publish:d,stack:p}=sqe(vr(n),n.pubSub);return n.api=h,n.apiDestroy=f,n.apiPublish=d,n.apiStack=p,n.viewChangeListener=[],n.triggerViewChangeDb=HS(n.triggerViewChange.bind(vr(n)),250),n.pubSubs=[],n.rangeSelection=[null,null],n.prevMouseHoverTrack=null,n.zooming=!1,n.appClickHandlerBound=n.appClickHandler.bind(vr(n)),n.canvasClickHandlerBound=n.canvasClickHandler.bind(vr(n)),n.keyDownHandlerBound=n.keyDownHandler.bind(vr(n)),n.keyUpHandlerBound=n.keyUpHandler.bind(vr(n)),n.resizeHandlerBound=n.resizeHandler.bind(vr(n)),n.resizeHandlerBound=n.resizeHandler.bind(vr(n)),n.dispatchEventBound=n.dispatchEvent.bind(vr(n)),n.animateOnMouseMoveHandlerBound=n.animateOnMouseMoveHandler.bind(vr(n)),n.zoomStartHandlerBound=n.zoomStartHandler.bind(vr(n)),n.zoomEndHandlerBound=n.zoomEndHandler.bind(vr(n)),n.zoomHandlerBound=n.zoomHandler.bind(vr(n)),n.trackDroppedHandlerBound=n.trackDroppedHandler.bind(vr(n)),n.trackDimensionsModifiedHandlerBound=n.trackDimensionsModifiedHandler.bind(vr(n)),n.animateBound=n.animate.bind(vr(n)),n.animateOnGlobalEventBound=n.animateOnGlobalEvent.bind(vr(n)),n.requestReceivedHandlerBound=n.requestReceivedHandler.bind(vr(n)),n.wheelHandlerBound=n.wheelHandler.bind(vr(n)),n.mouseMoveHandlerBound=n.mouseMoveHandler.bind(vr(n)),n.onMouseLeaveHandlerBound=n.onMouseLeaveHandler.bind(vr(n)),n.onBlurHandlerBound=n.onBlurHandler.bind(vr(n)),n.openModalBound=n.openModal.bind(vr(n)),n.closeModalBound=n.closeModal.bind(vr(n)),n.handleEditViewConfigBound=n.handleEditViewConfig.bind(vr(n)),n.onScrollHandlerBound=n.onScrollHandler.bind(vr(n)),n.typedText="",n.typedTextTimeout=null,n.modal={open:n.openModalBound,close:n.closeModalBound},n.setBroadcastMousePositionGlobally(n.props.options.broadcastMousePositionGlobally||n.props.options.globalMousePosition),n.setShowGlobalMousePosition(n.props.options.showGlobalMousePosition||n.props.options.globalMousePosition),n}return cqe(r,[{key:"UNSAFE_componentWillMount",value:function(){this.domEvent.register("keydown",document),this.domEvent.register("keyup",document),this.domEvent.register("scroll",document),this.domEvent.register("resize",window),this.domEvent.register("orientationchange",window),this.domEvent.register("wheel",window),this.domEvent.register("mousedown",window,!0),this.domEvent.register("mouseup",window,!0),this.domEvent.register("click",window,!0),this.domEvent.register("mousemove",window),this.domEvent.register("touchmove",window),this.domEvent.register("touchstart",window),this.domEvent.register("touchend",window),this.domEvent.register("touchcancel",window),this.domEvent.register("blur",window),this.pubSubs.push(this.pubSub.subscribe("app.click",this.appClickHandlerBound),this.pubSub.subscribe("blur",this.onBlurHandlerBound),this.pubSub.subscribe("keydown",this.keyDownHandlerBound),this.pubSub.subscribe("keyup",this.keyUpHandlerBound),this.pubSub.subscribe("resize",this.resizeHandlerBound),this.pubSub.subscribe("wheel",this.wheelHandlerBound),this.pubSub.subscribe("orientationchange",this.resizeHandlerBound),this.pubSub.subscribe("app.event",this.dispatchEventBound),this.pubSub.subscribe("app.animateOnMouseMove",this.animateOnMouseMoveHandlerBound),this.pubSub.subscribe("trackDropped",this.trackDroppedHandlerBound),this.pubSub.subscribe("trackDimensionsModified",this.trackDimensionsModifiedHandlerBound),this.pubSub.subscribe("app.zoomStart",this.zoomStartHandlerBound),this.pubSub.subscribe("app.zoomEnd",this.zoomEndHandlerBound),this.pubSub.subscribe("app.zoom",this.zoomHandlerBound),this.pubSub.subscribe("requestReceived",this.requestReceivedHandlerBound)),this.props.getApi&&this.props.getApi(this.api)}},{key:"sizeMode",get:function(){return typeof this.props.options.sizeMode>"u"?this.props.options.bounded?"bounded":yqe:this.props.options.sizeMode}},{key:"setBroadcastMousePositionGlobally",value:function(n=!1){this.isBroadcastMousePositionGlobally=n}},{key:"setShowGlobalMousePosition",value:function(n=!1){if(this.isShowGlobalMousePosition=n,this.isShowGlobalMousePosition&&!this.globalMousePositionListener&&(this.globalMousePositionListener=Ad.subscribe("higlass.mouseMove",this.animateOnGlobalEventBound),this.pubSubs.push(this.globalMousePositionListener)),this.isShowGlobalMousePosition&&!this.globalMousePositionListener){const o=this.pubSubs.findIndex(a=>a===this.globalMousePositionListener);Ad.unsubscribe(this.globalMousePositionListener),o>=0&&this.pubSubs.splice(o,1),this.globalMousePositionListener=void 0}}},{key:"zoomStartHandler",value:function(){this.hideHoverMenu(),this.zooming=!0}},{key:"zoomEndHandler",value:function(){this.zooming=!1}},{key:"zoomHandler",value:function(n){n.sourceEvent&&this.mouseMoveHandler(n.sourceEvent)}},{key:"waitForDOMAttachment",value:function(n){if(!this.mounted)return;const o=Br.findDOMNode(this);document.body.contains(o)?n():requestAnimationFrame(()=>this.waitForDOMAttachment(n))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=Br.findDOMNode(this),window.addEventListener("focus",this.boundRefreshView),Object.values(this.state.views).forEach(s=>{this.adjustLayoutToTrackSizes(s),s.layout?s.layout.i=s.uid:s.layout=this.generateViewLayout(s)});const n={width:this.state.width,height:this.state.height,view:this.canvasElement,antialias:!0,backgroundAlpha:0,resolution:2,autoResize:!0},o=parseInt(_E.VERSION[0],10);o===4?(console.warn("Deprecation warning: please update Pixi.js to version 5 or above!"),this.props.options.renderer==="canvas"?this.pixiRenderer=new He.PIXI.CanvasRenderer(n):this.pixiRenderer=new He.PIXI.WebGLRenderer(n)):(o<4&&console.warn("Deprecation warning: please update Pixi.js to version 5 or above! This version of Pixi.js is unsupported. Good luck \u{1F91E}"),this.props.options.renderer==="canvas"?this.pixiRenderer=new He.PIXI.CanvasRenderer(n):this.pixiRenderer=new He.PIXI.Renderer(n)),this.fitPixiToParentContainer(),this.setState({svgElement:this.svgElement,canvasElement:this.canvasElement}),this.waitForDOMAttachment(()=>{$v.ElementQueries.listen(),this.resizeSensor=new $v.ResizeSensor(this.element.parentNode,this.updateAfterResize.bind(this)),this.updateAfterResize()}),this.handleDragStart(),this.handleDragStop(),this.animate();const a=Ht(this.element).append("svg").style("display","none");Tie.forEach(s=>oqe(a,s.id,s.paths,s.viewBox))}},{key:"getTrackObject",value:function(n,o){return this.tiledPlots[n].trackRenderer.getTrackObject(o)}},{key:"getTrackRenderer",value:function(n){return this.tiledPlots[n].trackRenderer}},{key:"loadIfRemoteViewConfig",value:function(n){let o={};return typeof n=="string"?at.json(n,(a,s)=>{n=s,this.setState({views:this.processViewConfig(JSON.parse(JSON.stringify(s))),viewConfig:s}),this.unsetOnLocationChange.forEach(({viewId:c,callback:u,callbackId:l})=>{this.onLocationChange(c,u,l)})},this.pubSub):(o=this.processViewConfig(JSON.parse(JSON.stringify(n))),this.mounted&&this.setState({viewConfig:n})),o}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){const o=this.loadIfRemoteViewConfig(n.viewConfig);if(n.options.authToken!==this.prevAuthToken){Kd(n.options.authToken);for(const a of this.iterateOverViews()){const s=this.getTrackRenderer(a),c=JSON.parse(s.prevTrackDefinitions);s.syncTrackObjects([]),s.syncTrackObjects(c)}this.prevAuthToken=n.options.authToken}for(const a of ur(o))this.adjustLayoutToTrackSizes(a);this.setState({views:o})}},{key:"UNSAFE_componentWillUpdate",value:function(){this.pixiRenderer.render(this.pixiRoot)}},{key:"componentDidUpdate",value:function(){this.setTheme(this.props.options.theme,this.props.options.isDarkTheme),this.animate(),this.triggerViewChangeDb()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pixiStage.destroy(!1),this.pixiStage=null,this.pixiRenderer.destroy(!0),this.pixiRenderer=null,window.removeEventListener("focus",this.boundRefreshView),this.resizeSensor&&this.resizeSensor.detach(),this.domEvent.unregister("keydown",document),this.domEvent.unregister("keyup",document),this.domEvent.unregister("scroll",document),this.domEvent.unregister("wheel",window),this.domEvent.unregister("mousedown",window),this.domEvent.unregister("mouseup",window),this.domEvent.unregister("click",window),this.domEvent.unregister("mousemove",window),this.domEvent.unregister("touchmove",window),this.domEvent.unregister("touchstart",window),this.domEvent.unregister("touchend",window),this.domEvent.unregister("touchcancel",window),this.pubSubs.forEach(n=>this.pubSub.unsubscribe(n)),this.pubSubs=[],this.apiDestroy()}},{key:"setTheme",value:function(n=this.props.options.theme,o=this.props.options.isDarkTheme){if(typeof o<"u")console.warn("The option `isDarkTheme` is deprecated. Please use `theme` instead."),this.theme=o?"dark":"light";else switch(n){case"dark":this.theme=mr;break;case"light":case void 0:this.theme=uy;break;default:console.warn(`Unknown theme "${n}". Using light theme.`),this.theme=uy;break}}},{key:"dispatchEvent",value:function(n){this.canvasElement&&hy(n,this.canvasElement)}},{key:"trackDroppedHandler",value:function(){this.setState({draggingHappening:null})}},{key:"requestReceivedHandler",value:function(){!this.viewconfLoaded&&Xd===0&&(this.viewconfLoaded=!0,this.props.options.onViewConfLoaded&&this.props.options.onViewConfLoaded())}},{key:"animateOnMouseMoveHandler",value:function(n){n&&!this.animateOnMouseMove&&this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.animateBound)),this.animateOnMouseMove=n}},{key:"fitPixiToParentContainer",value:function(){if(!this.element||!this.element.parentNode){console.warn("No parentNode:",this.element);return}const n=this.element.parentNode.clientWidth,o=this.element.parentNode.clientHeight;this.pixiMask.beginFill(16777215).drawRect(0,0,n,o).endFill(),this.pixiRenderer.resize(n,o),this.pixiRenderer.view.style.width=`${n}px`,this.pixiRenderer.view.style.height=`${o}px`,this.pixiRenderer.render(this.pixiRoot)}},{key:"addDefaultTrackOptions",value:function(n){const o=this.getTrackInfo(n.type);if(!o)return;typeof n.options>"u"&&(n.options={});const a=n.options?n.options:{};if(this.props.options.defaultTrackOptions){if(this.props.options.defaultTrackOptions.trackSpecific&&this.props.options.defaultTrackOptions.trackSpecific[n.type]){const s=this.props.options.defaultTrackOptions.trackSpecific[n.type];for(const c in s)n.options[c]=typeof n.options[c]<"u"?n.options[c]:JSON.parse(JSON.stringify(s[c]))}if(this.props.options.defaultTrackOptions.all){const s=this.props.options.defaultTrackOptions.all;for(const c in s)n.options[c]=typeof n.options[c]<"u"?n.options[c]:JSON.parse(JSON.stringify(s[c]))}}if(o.defaultOptions){const s=o.defaultOptionsByTheme&&o.defaultOptionsByTheme[this.theme]?o.defaultOptionsByTheme[this.theme]:{},c={...o.defaultOptions,...s};if(!n.options)n.options=JSON.parse(JSON.stringify(c));else for(const u in c)n.options[u]=typeof n.options[u]<"u"?n.options[u]:JSON.parse(JSON.stringify(c[u]))}else n.options=a}},{key:"toggleTypedEditable",value:function(){this.setState({typedEditable:!this.isEditable()})}},{key:"typedTextHandler",value:function(n){if(!this.props.options.cheatCodesEnabled)return;this.typedText=this.typedText.concat(n.key),this.typedText.endsWith("hgedit")&&(this.toggleTypedEditable(),this.typedText="");const o=750;this.typedTextTimeout&&clearTimeout(this.typedTextTimeout),this.typedTextTimeout=setTimeout(()=>{this.typedText=""},o)}},{key:"keyDownHandler",value:function(n){this.typedTextHandler(n),this.props.options.rangeSelectionOnAlt&&n.key==="Alt"&&this.setState({mouseTool:qi}),n.key==="Shift"&&this.setState({isShiftDown:!0})}},{key:"keyUpHandler",value:function(n){n.key==="Shift"&&this.setState({isShiftDown:!1}),this.props.options.rangeSelectionOnAlt&&n.key==="Alt"&&this.setState({mouseTool:ly})}},{key:"openModal",value:function(n){this.setState({modal:E.cloneElement(n,{ref:o=>{this.modalRef=o}})})}},{key:"closeModal",value:function(){this.modalRef=null,this.setState({modal:null})}},{key:"handleEditViewConfig",value:function(){const{viewConfig:n}=this.state;this.setState({viewConfigTmp:n}),this.openModal(E.createElement(iqe,{onCancel:()=>{const{viewConfigTmp:o}=this.state,a=this.processViewConfig(o);for(const s of ur(a))this.adjustLayoutToTrackSizes(s);this.setState({views:a,viewConfig:o,viewConfigTmp:null})},onChange:o=>{const a=JSON.parse(o),s=this.processViewConfig(a);for(const c of ur(s))this.adjustLayoutToTrackSizes(c);this.setState({views:s,viewConfig:a})},onSave:o=>{const a=JSON.parse(o),s=this.processViewConfig(a);for(const c of ur(s))this.adjustLayoutToTrackSizes(c);this.setState({views:s,viewConfig:a,viewConfigTmp:null})},viewConfig:this.getViewsAsString()}))}},{key:"animate",value:function(){this.isRequestingAnimationFrame||(this.isRequestingAnimationFrame=!0,requestAnimationFrame(()=>{this.pixiRenderer&&(this.pixiRenderer.render(this.pixiRoot),this.isRequestingAnimationFrame=!1)}))}},{key:"animateOnGlobalEvent",value:function({sourceUid:n}={}){n!==this.uid&&this.animateOnMouseMove&&this.animate()}},{key:"measureSize",value:function(){const[n,o]=j5(this.element);n>0&&o>0&&this.setState({sizeMeasured:!0,width:n,height:o})}},{key:"updateAfterResize",value:function(){this.measureSize(),this.updateRowHeight(),this.fitPixiToParentContainer(),this.refreshView(Ud),this.resizeHandler()}},{key:"onBreakpointChange",value:function(n){this.setState({currentBreakpoint:n})}},{key:"handleOverlayMouseEnter",value:function(n){this.setState({mouseOverOverlayUid:n})}},{key:"handleOverlayMouseLeave",value:function(){this.setState({mouseOverOverlayUid:null})}},{key:"handleLockLocation",value:function(n){this.setState({chooseViewHandler:o=>this.handleLocationLockChosen(n,o),mouseOverOverlayUid:n})}},{key:"isEditable",value:function(){return this.state.typedEditable!==void 0?this.state.typedEditable:!this.props.options||!("editable"in this.props.options)?this.state.viewConfig.editable:this.props.options.editable&&this.state.viewConfig.editable}},{key:"isTrackMenuDisabled",value:function(){return this.props.options&&(this.props.options.editable===!1||this.props.options.tracksEditable===!1)?!0:this.state.viewConfig&&(this.state.viewConfig.tracksEditable===!1||this.state.viewConfig.editable===!1)}},{key:"isViewHeaderDisabled",value:function(){return this.props.options&&(this.props.options.editable===!1||this.props.options.viewEditable===!1)?!0:this.state.viewConfig&&(this.state.viewConfig.viewEditable===!1||this.state.viewConfig.editable===!1)}},{key:"iterateOverViews",value:function(){const n=[];for(const o in Object.keys(this.state.views))n.push(o);return n}},{key:"iterateOverTracksInView",value:function(n){const o=[],{tracks:a}=this.state.views[n];for(const s in a)for(const c of a[s])if(c.type==="combined"&&c.contents)for(const u of c.contents)o.push({viewId:n,trackId:u.uid,track:u});else o.push({viewId:n,trackId:c.uid,track:c});return o}},{key:"iterateOverTracks",value:function(){const n=[];for(const o in this.state.views){const{tracks:a}=this.state.views[o];for(const s in a)for(const c of a[s])if(c.type==="combined"&&c.contents)for(const u of c.contents)n.push({viewId:o,trackId:u.uid,track:u});else n.push({viewId:o,trackId:c.uid,track:c})}return n}},{key:"setMouseTool",value:function(n){this.setState({mouseTool:n})}},{key:"isValueScaleLocked",value:function(n,o){const a=this.combineViewAndTrackUid(n,o);return this.state.views[n]?!!this.valueScaleLocks[a]:!1}},{key:"getLockGroupExtrema",value:function(n,o){const a=this.combineViewAndTrackUid(n,o);if(!this.state.views[n]||!this.valueScaleLocks[a])return null;const s=this.valueScaleLocks[a],c=Object.values(s).filter(d=>this.tiledPlots[d.view]).map(d=>this.tiledPlots[d.view].trackRenderer.getTrackObject(d.track)).filter(d=>d).map(d=>d.originalTrack===void 0?d:d.originalTrack),u=c.filter(d=>d.minRawValue&&d.maxRawValue).map(d=>s.ignoreOffScreenValues?d.minVisibleValue(!0):d.minVisibleValueInTiles(!0)),l=c.filter(d=>d.minRawValue&&d.maxRawValue).map(d=>s.ignoreOffScreenValues?d.maxVisibleValue(!0):d.maxVisibleValueInTiles(!0));if(u.length===0||u.filter(d=>d===null||d===1/0).length>0||l.length===0||l.filter(d=>d===null||d===-1/0).length>0)return null;const h=Math.min(...u),f=Math.max(...l);return[h,f]}},{key:"syncValueScales",value:function(n,o){const a=this.combineViewAndTrackUid(n,o);if(!this.state.views[n])return;const s=Ci(this.state.views[n].tracks,o);if(this.valueScaleLocks[a]){const c=this.valueScaleLocks[a],u=Object.values(c).filter(p=>this.tiledPlots[p.view]).map(p=>this.tiledPlots[p.view].trackRenderer.getTrackObject(p.track)).filter(p=>p).map(p=>p.originalTrack===void 0?p:p.originalTrack),l=this.getLockGroupExtrema(n,o);if(l===null)return;const h=l[0],f=l[1],d=1e-6;for(const p of u){if(p.minValue&&p.minValue(h),p.maxValue&&p.maxValue(f),!p.valueScale)continue;const m=Math.abs(p.minValue()-p.valueScale.domain()[0])>d||Math.abs(p.maxValue()-p.valueScale.domain()[1])>d;let g=!1;try{g=s.options&&p.options&&typeof s.options.scaleStartPercent<"u"&&typeof s.options.scaleEndPercent<"u"&&(Math.abs(p.options.scaleStartPercent-s.options.scaleStartPercent)>d||Math.abs(p.options.scaleEndPercent-s.options.scaleEndPercent)>d)}catch{}p.continuousScaling&&!m&&!g||(p.valueScale.domain([h,f]),p.prevValueScale=p.valueScale.copy(),g&&(p.options.scaleStartPercent=s.options.scaleStartPercent,p.options.scaleEndPercent=s.options.scaleEndPercent),p.rerender(p.options,!0))}}}},{key:"handleNewTilesLoaded",value:function(n,o){this.animate()}},{key:"notifyDragChangedListeners",value:function(n){ur(this.draggingChangedListeners).forEach(o=>{ur(o).forEach(a=>a(n))})}},{key:"addDraggingChangedListener",value:function(n,o,a){this.draggingChangedListeners.hasOwnProperty(n)||(this.draggingChangedListeners[n]={}),this.draggingChangedListeners[n][o]=a,a(!0),a(!1)}},{key:"removeDraggingChangedListener",value:function(n,o){if(this.draggingChangedListeners.hasOwnProperty(n)){const a=this.draggingChangedListeners[n];a.hasOwnProperty(o)&&(a[o](!1),delete a[o])}}},{key:"addScalesChangedListener",value:function(n,o,a){this.scalesChangedListeners[n]||(this.scalesChangedListeners[n]={}),this.scalesChangedListeners[n][o]=a,!(!this.xScales[n]||!this.yScales[n])&&a(this.xScales[n],this.yScales[n])}},{key:"removeScalesChangedListener",value:function(n,o){if(this.scalesChangedListeners[n]){const a=this.scalesChangedListeners[n];a[o]&&delete a[o]}}},{key:"createSVG",value:function(){const n=document.createElement("svg");n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("version","1.1");for(const o of ur(this.tiledPlots))if(o){for(const a of ur(o.trackRenderer.trackDefObjects))if(a.trackObject.exportSVG){const s=a.trackObject.exportSVG();s&&n.appendChild(s[0])}}return n.setAttribute("width",this.canvasElement.style.width),n.setAttribute("height",this.canvasElement.style.height),this.postCreateSVGCallback?this.postCreateSVGCallback(n):n}},{key:"createSVGString",value:function(){const n=this.createSVG();let o=Xte.xml(new window.XMLSerializer().serializeToString(n));return o=o.replace(/<a0:/g,"<"),o=o.replace(/<\/a0:/g,"</"),o=o.replace(/(<svg[\n\r])(\s+xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"[\n\r])/gm,"$1"),o=o.replace(/(\s+<clipPath[\n\r]\s+)(xmlns="http:\/\/www\.w3\.org\/2000\/svg")/gm,"$1"),o=o.replace('xmlns="http://www.w3.org/1999/xhtml"',""),`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
${o}`}},{key:"handleExportSVG",value:function(){$d("export.svg",new Blob([this.createSVGString()],{type:"image/svg+xml"}))}},{key:"offPostCreateSVG",value:function(){this.postCreateSVGCallback=null}},{key:"onPostCreateSVG",value:function(n){this.postCreateSVGCallback=n}},{key:"createPNGBlobPromise",value:function(){return new Promise(n=>{const o=this.createSVGString(),a=new Image(this.canvasElement.width,this.canvasElement.height);a.src=`data:image/svg+xml;base64,${btoa(o)}`,a.onload=()=>{const s=document.createElement("canvas");s.width=this.canvasElement.width/2,s.height=this.canvasElement.height/2;const c=s.getContext("2d");c.globalCompositeOperation="source-over",c.fillStyle="#ffffff",c.fillRect(0,0,s.width,s.height),s.getContext("2d").drawImage(a,0,0),s.toBlob(u=>{n(u)})}})}},{key:"handleExportPNG",value:function(){this.createPNGBlobPromise().then(n=>{$d("export.png",n)})}},{key:"handleScalesChanged",value:function(n,o,a,s=!0){if(this.xScales[n]=o,this.yScales[n]=a,s&&n in this.scalesChangedListeners&&ur(this.scalesChangedListeners[n]).forEach(c=>{c(o,a)}),this.zoomLocks[n]){const c=this.zoomLocks[n],u=Wi(c),[l,h,f]=tn(this.xScales[n],this.yScales[n]);for(let d=0;d<u.length;d++){const p=u[d][0],m=u[d][1];if(!this.xScales[p]||!this.yScales[p]||p===n)continue;const[g,v,_]=tn(this.xScales[p],this.yScales[p]),y=m[2]/c[n][2],b=f*y;if(!this.setCenters[p])continue;const[T,S]=this.setCenters[p](g,v,b,!1);this.xScales[p]=T,this.yScales[p]=S,this.scalesChangedListeners.hasOwnProperty(p)&&ur(this.scalesChangedListeners[p]).forEach(k=>{k(T,S)})}}if(this.locationLocks[n]){const c=this.locationLocks[n],u=Wi(c),[l,h,f]=tn(this.xScales[n],this.yScales[n]);for(let d=0;d<u.length;d++){const p=u[d][0],m=u[d][1];if(!this.xScales[p]||!this.yScales[p])continue;const[g,v,_]=tn(this.xScales[p],this.yScales[p]);if(p===n)continue;const y=m[0]-c[n][0],b=m[1]-c[n][1],T=l+y,S=h+b;if(!this.setCenters[p])continue;const[k,O]=this.setCenters[p](T,S,_,!1);this.xScales[p]=k,this.yScales[p]=O,this.scalesChangedListeners.hasOwnProperty(p)&&ur(this.scalesChangedListeners[p]).forEach(D=>{D(k,O)})}}if(this.locationLocksAxisWise.x[n]){const c=this.locationLocksAxisWise.x[n].lock,u=Wi(c),l=this.locationLocksAxisWise.x[n].axis!=="x",[h,f,d]=tn(this.xScales[n],this.yScales[n]);for(let p=0;p<u.length;p++){const m=u[p][0],g=u[p][1];if(!this.xScales[m]||!this.yScales[m])continue;const[v,_,y]=tn(this.xScales[m],this.yScales[m]);if(m===n)continue;const b=g[0]-c[n][0],T=h+b;if(!this.setCenters[m])continue;const[S,k]=this.setCenters[m](l?v:T,l?T:_,y,!1);this.xScales[m]=S,this.yScales[m]=k,this.scalesChangedListeners.hasOwnProperty(m)&&ur(this.scalesChangedListeners[m]).forEach(O=>{O(S,k)})}}if(this.locationLocksAxisWise.y[n]){const c=this.locationLocksAxisWise.y[n].lock,u=Wi(c),l=this.locationLocksAxisWise.y[n].axis!=="y",[h,f,d]=tn(this.xScales[n],this.yScales[n]);for(let p=0;p<u.length;p++){const m=u[p][0],g=u[p][1];if(!this.xScales[m]||!this.yScales[m])continue;const[v,_,y]=tn(this.xScales[m],this.yScales[m]);if(m===n)continue;const b=g[1]-c[n][1],T=f+b;if(!this.setCenters[m])continue;const[S,k]=this.setCenters[m](l?T:v,l?_:T,y,!1);this.xScales[m]=S,this.yScales[m]=k,this.scalesChangedListeners.hasOwnProperty(m)&&ur(this.scalesChangedListeners[m]).forEach(O=>{O(S,k)})}}this.animate(),this.triggerViewChangeDb()}},{key:"handleProjectViewport",value:function(n){this.setState({chooseTrackHandler:(o,a)=>this.handleViewportProjected(n,o,a)})}},{key:"handleZoomToData",value:function(n){if(n&&!this.tiledPlots[n])throw new Error(`View uid ${n} does not exist in the current viewConfig`);n?this.tiledPlots[n].handleZoomToData():Object.values(this.tiledPlots).forEach(o=>o.handleZoomToData())}},{key:"resetViewport",value:function(n){if(n&&!this.tiledPlots[n])throw new Error(`View uid ${n} does not exist in the current viewConfig`);n?this.tiledPlots[n].resetViewport():Object.values(this.tiledPlots).forEach(o=>o.resetViewport())}},{key:"handleYankFunction",value:function(n,o){this.setState({chooseViewHandler:a=>o(n,a),mouseOverOverlayUid:n})}},{key:"handleUnlock",value:function(n,o){const a=o[n],s=Yi(a);if(s.length===2){delete o[s[0]],delete o[s[1]];return}o[n]&&o[n][n]&&delete o[n][n],o[n]&&delete o[n]}},{key:"viewScalesLockData",value:function(n){return!this.xScales[n]||!this.yScales[n]?(console.warn("View scale lock doesn't correspond to existing uid: ",n),null):tn(this.xScales[n],this.yScales[n])}},{key:"addLock",value:function(n,o,a,s){let c=[],u=[];a[n]?c=Wi(a[n]).filter(f=>s(f[0])).map(f=>[f[0],s(f[0])]):c=[[n,s.bind(this)(n)]],a[o]?u=Wi(a[o]).filter(f=>s.bind(this)(f[0])).map(f=>[f[0],s.bind(this)(f[0])]):u=[[o,s.bind(this)(o)]];const l=c.concat(u),h=r5(l);l.forEach(f=>{a[f[0]]=h})}},{key:"handleLocationLockChosen",value:function(n,o){if(n===o){this.setState({chooseViewHandler:null});return}this.addLock(n,o,this.locationLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleZoomLockChosen",value:function(n,o){if(n===o){this.setState({chooseViewHandler:null});return}this.addLock(n,o,this.zoomLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleViewportProjected",value:function(n,o,a){let s=null;if(n===o)console.warn("A view can not show its own viewport.");else{const c=Ci(this.state.views[o].tracks,a),u=Qd(this.state.views[o].tracks,a);s=xt.nice();const h={uid:s,type:`viewport-projection-${{top:"horizontal",bottom:"horizontal",center:"center",left:"vertical",right:"vertical"}[u]}`,fromViewUid:n};this.addCallbacks(o,h),this.handleTrackAdded(o,h,u,c)}return this.setState({chooseTrackHandler:null}),s}},{key:"handleLocationYanked",value:function(n,o){const a=this.xScales[o],s=this.yScales[o],c=this.xScales[n],u=this.yScales[n],[l,h,f]=tn(c,u),[d,p,m]=tn(a,s);this.setCenters[n](d,p,f,!0),this.setState({chooseViewHandler:null})}},{key:"handleZoomYanked",value:function(n,o){const a=this.xScales[o],s=this.yScales[o],c=this.xScales[n],u=this.yScales[n],[l,h,f]=tn(c,u),[d,p,m]=tn(a,s);this.setCenters[n](l,h,m,!0),this.setState({chooseViewHandler:null})}},{key:"handleTrackPositionChosen",value:function(n,o){this.setState({addTrackPosition:o,addTrackPositionView:n})}},{key:"updateRowHeight",value:function(){if(!this.props.options||this.sizeMode!==Vq||this.props.options.pixelPreciseMarginPadding)return;const n=this.element.parentNode.clientHeight;let o=0;for(const h of ur(this.state.views))o=Math.max(o,h.layout.y+h.layout.h);this.handleDragStart(),this.handleDragStop();const s=(this.isEditable()?10:0)*o-1,u=(n-s)/o,l=Math.floor(u);this.setState({rowHeight:l})}},{key:"handleLayoutChange",value:function(n){this.element&&(n.forEach(o=>{const a=this.state.views[o.i];a&&(a.layout.x=o.x,a.layout.y=o.y,a.layout.w=o.w,a.layout.h=o.h,a.layout.i=o.i)}),this.updateRowHeight(),this.refreshView(Ud))}},{key:"clearDragTimeout",value:function(){this.dragTimeout&&(clearTimeout(this.dragTimeout),this.dragTimeout=null)}},{key:"getTrackInfo",value:function(n){if(dr[n])return dr[n];if(this.pluginTracks&&this.pluginTracks[n])return this.pluginTracks[n].config;if(window.higlassTracksByType&&window.higlassTracksByType[n])return window.higlassTracksByType[n].config;console.warn("Track type not found:",n,"(check app/scripts/config/ for a list of defined track types)")}},{key:"forceRefreshView",value:function(){this.setState(this.state)}},{key:"refreshView",value:function(n=a5){this.clearDragTimeout(),this.notifyDragChangedListeners(!0),this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},n)}},{key:"handleDragStart",value:function(){this.clearDragTimeout(),this.notifyDragChangedListeners(!0)}},{key:"handleDragStop",value:function(){this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},Ud)}},{key:"resizeHandler",value:function(){_y(this.viewHeaders).filter(n=>n).forEach(n=>n.checkWidth())}},{key:"calculateViewDimensions",value:function(n){let u=this.viewMarginTop+this.viewMarginBottom+this.viewPaddingTop+this.viewPaddingBottom,l=this.viewMarginLeft+this.viewMarginRight+this.viewPaddingLeft+this.viewPaddingRight,h=0;h+=10;const f=20;if(n.tracks.top)for(let S=0;S<n.tracks.top.length;S++){const k=n.tracks.top[S];u+=k.height?k.height:20,h+=k.height?k.height:20}if(n.tracks.bottom)for(let S=0;S<n.tracks.bottom.length;S++){const k=n.tracks.bottom[S];u+=k.height?k.height:20,h+=k.height?k.height:20}(n.tracks.left&&n.tracks.left.length>0||n.tracks.right&&n.tracks.right.length>0||n.tracks.center&&n.tracks.center.length>0)&&(h+=f);let d=0;if(n.tracks.left)for(let S=0;S<n.tracks.left.length;S++){const k=n.tracks.left[S],O=k.height?k.height:100;l+=k.width?k.width:0,d=Math.max(d,O)}let p=0;if(n.tracks.right)for(let S=0;S<n.tracks.right.length;S++){const k=n.tracks.right[S],O=k.height?k.height:100;l+=k.width?k.width:0,p=Math.max(p,O)}const m=Math.max(d,p);let g=0,v=0;if(n.tracks.center&&ur(n.tracks.center).length>0){if(!n.tracks.center[0].contents||n.tracks.center[0].contents.length>0){let S=null,k=null;if(n.tracks.center[0].contents)for(const O of n.tracks.center[0].contents)S=Math.max(S,O.height?O.height:100),k=Math.max(k,O.width?O.width:100);else S=n.tracks.center[0].height?n.tracks.center[0].height:100,k=n.tracks.center[0].width?n.tracks.center[0].width:100;u+=S,l+=k}}else(n.tracks.top&&ur(n.tracks.top).length>1||n.tracks.bottom&&ur(n.tracks.bottom).length>1)&&(n.tracks.left&&ur(n.tracks.left).length||n.tracks.right&&ur(n.tracks.right).length)&&(v=100,g=100);m>g?u+=m:u+=g;let _=0,y=0,b=0,T=0;return"top"in n.tracks&&(_=n.tracks.top.map(S=>S.height?S.height:20).reduce((S,k)=>S+k,0)),"bottom"in n.tracks&&(y=n.tracks.bottom.map(S=>S.height?S.height:20).reduce((S,k)=>S+k,0)),"left"in n.tracks&&(b=n.tracks.left.map(S=>S.width?S.width:0).reduce((S,k)=>S+k,0)),"right"in n.tracks&&(T=n.tracks.right.map(S=>S.width?S.width:0).reduce((S,k)=>S+k,0)),{totalWidth:l,totalHeight:u,topHeight:_,bottomHeight:y,leftWidth:b,rightWidth:T,centerWidth:v,centerHeight:g,minNecessaryHeight:h}}},{key:"calculateZoomLimits",value:function(n,o){const a=[0,1/0],s=n.zoomLimits||[1,null],c=o[1]-o[0];if(s.length!==2)return a;if(s[0]!==null&&s[0]>0){const u=c/s[0];a[1]=Math.max(u,1),u<1&&console.warn(`Invalid zoom limits. Lower limit set to ${c}`)}if(s[1]!==null&&s[1]>s[0]){const u=c/s[1];a[0]=Math.min(u,1),u>1&&console.warn(`Invalid zoom limits. Upper limit set to ${c}`)}return a}},{key:"generateViewLayout",value:function(n){let o=null;return"layout"in n?{layout:o}=n.layout:o={x:0,y:0,w:zq,h:gqe},o}},{key:"handleClearView",value:function(n){const{views:o}=this.state;o[n].tracks.top=[],o[n].tracks.bottom=[],o[n].tracks.center=[],o[n].tracks.left=[],o[n].tracks.right=[],o[n].tracks.whole=[],this.setState({views:o})}},{key:"handleCloseView",value:function(n){ur(this.state.views).length!==1&&(this.handleUnlock(n,this.zoomLocks),this.setState(o=>(delete o.views[n],{views:this.removeInvalidTracks(o.views)})))}},{key:"handleSeriesAdded",value:function(n,o,a,s){const{tracks:c}=this.state.views[n];if(s.type==="combined")s.contents.push(o),o.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(o,s);else{const u={type:"combined",uid:xt.nice(),height:s.height,width:s.width,contents:[s,o]},l=c[a];for(let h=0;h<l.length;h++)l[h].uid===s.uid&&(l[h]=u)}this.setState(u=>({views:u.views}))}},{key:"handleNoTrackAdded",value:function(){this.state.addTrackPosition&&this.setState({addTrackPosition:null})}},{key:"handleTracksAdded",value:function(n,o,a,s){this.storeTrackSizes(n);for(const c of o)this.handleTrackAdded(n,c,a,s)}},{key:"handleChangeTrackType",value:function(n,o,a){const s=this.state.views[n],c=Ci(s.tracks,o),u=c.uid;c.uid=xt.nice(),c.type=a;const l=c.uid;this.updateTrackLocks(n,u,l),this.setState(h=>({views:h.views}))}},{key:"handleChangeTrackData",value:function(n,o,a){const s=this.state.views[n],c=Ci(s.tracks,o);c.uid=xt.nice(),c.data=a,this.setState(u=>({views:u.views}))}},{key:"handleTrackAdded",value:function(n,o,a,s=null){if(this.addDefaultTrackOptions(o),o.uid||(o.uid=xt.nice()),o.contents)for(const h of o.contents)this.addDefaultTrackOptions(h);if(this.state.addTrackPosition&&this.setState({addTrackPosition:null}),s)return this.handleSeriesAdded(n,o,a,s),null;o.position=a;const c=this.getTrackInfo(o.type);o.width=c.defaultWidth||c.defaultOptions&&c.defaultOptions.minWidth||this.minVerticalWidth,o.height=c.defaultHeight||c.defaultOptions&&c.defaultOptions.minHeight||this.minHorizontalHeight;const{tracks:u}=this.state.views[n];let l=0;if(La(u,()=>l++),a==="left"||a==="top")u[a].unshift(o);else if(a==="center")if(u.center.length===0){const h={uid:xt.nice(),type:"combined",contents:[o]};u.center=[h]}else if(u.center[0].type==="combined")u.center[0].contents.push(o),o.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(o,u.center[0]);else{const h={uid:xt.nice(),type:"combined",contents:[u.center[0],o]};u.center=[h],o.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(o,h)}else u[a]||(u[a]=[]),u[a].push(o);return this.adjustLayoutToTrackSizes(this.state.views[n]),Object.keys(this.state.views).length===1&&l===0&&(this.handleZoomToData(n),this.zoomToDataExtentOnInit.add(n)),o}},{key:"compatibilityfyStackedHeatmaps",value:function(n,o){let a;o.contents.some(c=>(a=c,c.type==="heatmap"))&&(n.options.backgroundColor="transparent",n.options.showTooltip=a.options.showTooltip,n.options.showMousePosition=a.options.showMousePosition,n.options.mousePositionColor=a.options.mousePositionColor)}},{key:"storeTrackSizes",value:function(n){La(this.state.views[n].tracks,o=>{const a=this.tiledPlots[n].trackRenderer.getTrackObject(o.uid);a&&([o.width,o.height]=a.dimensions)})}},{key:"adjustLayoutToTrackSizes",value:function(n){if(!n.layout)return;const o=this.isEditable();let a=0;o&&(a+=vqe);const{totalHeight:s}=this.calculateViewDimensions(n);a+=s;const c=this.isEditable()?10:0;a+=c;const u=this.state.rowHeight+c;this.sizeMode!==Vq&&(n.layout.h=Math.ceil(a/u))}},{key:"handleCloseTrack",value:function(n,o){const{tracks:a}=this.state.views[n];this.handleUnlockValueScale(n,o);for(const s in a){const c=a[s],u=c.filter(l=>l.uid!==o);u.length===c.length?u.filter(h=>h.type==="combined").forEach(h=>{h.contents=h.contents.filter(f=>f.uid!==o)}):a[s]=u}return this.storeTrackSizes(n),this.adjustLayoutToTrackSizes(this.state.views[n]),this.setState(s=>({views:s.views})),this.state.views}},{key:"handleLockValueScale",value:function(n,o){this.setState({chooseTrackHandler:(a,s)=>this.handleValueScaleLocked(n,o,a,s)})}},{key:"combineViewAndTrackUid",value:function(n,o){const a=`${n}.${o}`;if(this.combinedUidToViewTrack[a]={view:n,track:o},this.viewTrackUidsToCombinedUid[n]){if(this.viewTrackUidsToCombinedUid[o])return this.viewTrackUidsToCombinedUid[n][o];this.viewTrackUidsToCombinedUid[n][o]=a}else this.viewTrackUidsToCombinedUid[n]={},this.viewTrackUidsToCombinedUid[n][o]=a;return a}},{key:"updateTrackLocks",value:function(n,o,a){const s=this.combineViewAndTrackUid(n,o),c=this.combineViewAndTrackUid(n,a);if(this.valueScaleLocks[s]){const u=this.valueScaleLocks[s];this.valueScaleLocks[c]=u,delete this.valueScaleLocks[s]}for(const u in this.valueScaleLocks)if(this.valueScaleLocks[u][s]){const l=this.valueScaleLocks[u][s];this.valueScaleLocks[u][c]=l,l.track=a,delete this.valueScaleLocks[u][s]}}},{key:"handleUnlockValueScale",value:function(n,o){if(this.tiledPlots[n].trackRenderer.getTrackObject(o).createdTracks){const a=Yi(this.tiledPlots[n].trackRenderer.getTrackObject(o).createdTracks);for(const s of a)this.handleUnlock(this.combineViewAndTrackUid(n,s),this.valueScaleLocks)}else this.handleUnlock(this.combineViewAndTrackUid(n,o),this.valueScaleLocks)}},{key:"handleValueScaleLocked",value:function(n,o,a,s){if(this.tiledPlots[n].trackRenderer.getTrackObject(o).createdTracks){const l=Yi(this.tiledPlots[n].trackRenderer.getTrackObject(o).createdTracks);for(const h of l)this.handleValueScaleLocked(n,h,a,s);return}if(this.tiledPlots[a].trackRenderer.getTrackObject(s).createdTracks){const l=Yi(this.tiledPlots[a].trackRenderer.getTrackObject(s).createdTracks);for(const h of l)this.handleValueScaleLocked(n,o,a,h);return}const c=this.combineViewAndTrackUid(n,o),u=this.combineViewAndTrackUid(a,s);this.addLock(c,u,this.valueScaleLocks,l=>this.combinedUidToViewTrack[l]),this.syncValueScales(n,o),this.setState({chooseTrackHandler:null})}},{key:"addCallbacks",value:function(n,o){const a=this.getTrackInfo(o.type);if(o.type==="viewport-projection-center"||o.type==="viewport-projection-horizontal"||o.type==="viewport-projection-vertical"||a&&a.projection){const s=o.fromViewUid;o.registerViewportChanged=(c,u)=>this.addScalesChangedListener(s,c,u),o.removeViewportChanged=c=>this.removeScalesChangedListener(s,c),o.setDomainsCallback=(c,u)=>{if(!s){this.projectionXDomains[n]||(this.projectionXDomains[n]={}),this.projectionYDomains[n]||(this.projectionYDomains[n]={}),(o.type==="viewport-projection-horizontal"||o.type==="viewport-projection-center")&&(this.projectionXDomains[n][o.uid]=c),(o.type==="viewport-projection-vertical"||o.type==="viewport-projection-center")&&(this.projectionYDomains[n][o.uid]=u),this.triggerViewChangeDb();return}const l=bt().domain(c).range(this.xScales[s].range()),h=bt().domain(u).range(this.yScales[s].range()),[f,d,p]=tn(l,h);this.setCenters[s](f,d,p,!1);let m=!1,g=!1;n in this.zoomLocks&&(m=s in this.zoomLocks[n]),m&&this.handleUnlock(n,this.zoomLocks),n in this.locationLocks&&(g=s in this.locationLocks[n]),g&&this.handleUnlock(n,this.locationLocks),this.handleScalesChanged(s,l,h,!0),m&&this.addLock(n,s,this.zoomLocks,this.viewScalesLockData),g&&this.addLock(n,s,this.locationLocks,this.viewScalesLockData)}}}},{key:"validateLocks",value:function(n){const o=[];for(const a of Yi(n))(!n[a]||!n[a][a])&&o.push(a);for(const a of o)n[a]&&(console.warn(`View ${a} not present in lock group. Removing...`),this.handleUnlock(a,n),delete n[a])}},{key:"deserializeLocationLocks",value:function(n){if(this.locationLocks={},n.locationLocks)for(const o of Yi(n.locationLocks.locksByViewUid))if(typeof n.locationLocks.locksByViewUid[o]!="object")this.locationLocks[o]=n.locationLocks.locksDict[n.locationLocks.locksByViewUid[o]];else{if("x"in n.locationLocks.locksByViewUid[o]){const a=n.locationLocks.locksDict[n.locationLocks.locksByViewUid[o].x.lock];this.locationLocksAxisWise.x[o]={lock:a,axis:n.locationLocks.locksByViewUid[o].x.axis}}if("y"in n.locationLocks.locksByViewUid[o]){const a=n.locationLocks.locksDict[n.locationLocks.locksByViewUid[o].y.lock];this.locationLocksAxisWise.y[o]={lock:a,axis:n.locationLocks.locksByViewUid[o].y.axis}}}this.validateLocks(this.locationLocks)}},{key:"deserializeZoomLocks",value:function(n){if(this.zoomLocks={},n.zoomLocks)for(const o of Yi(n.zoomLocks.locksByViewUid))this.zoomLocks[o]=n.zoomLocks.locksDict[n.zoomLocks.locksByViewUid[o]];this.validateLocks(this.zoomLocks)}},{key:"deserializeValueScaleLocks",value:function(n){if(this.valueScaleLocks={},n.valueScaleLocks)for(const o of Yi(n.valueScaleLocks.locksByViewUid))this.valueScaleLocks[o]=n.valueScaleLocks.locksDict[n.valueScaleLocks.locksByViewUid[o]]}},{key:"serializeLocks",value:function(n){const o={},a={};for(const s of Yi(n)){let c=n[s]&&n[s].uid;c||(c=xt.nice()),n[s].uid=c,o[c]=n[s],a[s]=n[s].uid}return{locksByViewUid:a,locksDict:o}}},{key:"getViewsAsJson",value:function(){const n=JSON.parse(JSON.stringify(this.state.viewConfig));return n.views=Object.values(this.state.views).map(o=>{const a=JSON.parse(JSON.stringify(o));return La(a.tracks,s=>{if(s.server){const c=cre(s.server,{});if(!c.hostname.length){const u=window.location.host,{protocol:l}=window.location,h=`${l}//${u}${c.pathname}`;s.server=h}}(s.type==="viewport-projection-center"||s.type==="viewport-projection-horizontal")&&this.projectionXDomains[o.uid]&&this.projectionXDomains[o.uid][s.uid]&&(s.projectionXDomain=this.projectionXDomains[o.uid][s.uid]),(s.type==="viewport-projection-center"||s.type==="viewport-projection-vertical")&&this.projectionYDomains[o.uid]&&this.projectionYDomains[o.uid][s.uid]&&(s.projectionYDomain=this.projectionYDomains[o.uid][s.uid]),delete s.name,delete s.position,delete s.header,delete s.description,delete s.created,delete s.project,delete s.project_name,delete s.serverUidKey,delete s.uuid,delete s.private,delete s.maxZoom,delete s.coordSystem,delete s.coordSystem2,delete s.datatype,delete s.maxWidth,delete s.datafile,delete s.binsPerDimension,delete s.resolutions,delete s.aggregationModes}),a.uid=o.uid,a.initialXDomain=this.xScales[o.uid].domain(),a.initialYDomain=this.yScales[o.uid].domain(),delete a.layout.i,a}),n.zoomLocks=this.serializeLocks(this.zoomLocks),n.locationLocks=this.serializeLocks(this.locationLocks),n.valueScaleLocks=this.serializeLocks(this.valueScaleLocks),n}},{key:"getViewsAsString",value:function(){return JSON.stringify(this.getViewsAsJson(),null,2)}},{key:"handleExportViewAsJSON",value:function(){const n=this.getViewsAsString();$d("viewconf.json",n)}},{key:"handleExportViewsAsLink",value:function(n=this.state.viewConfig.exportViewUrl,o=!1){const a=new URL(n,window.location.origin),s=fetch(n,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:`{"viewconf":${this.getViewsAsString()}}`,credentials:"same-origin"}).then(c=>{if(!c.ok)throw c;return c.json()}).catch(c=>{console.warn("err:",c)}).then(c=>({id:c.uid,url:`${a.origin}/l/?d=${c.uid}`}));return o||s.then(c=>{this.openModal(E.createElement(yx,{onDone:()=>{this.closeModalBound()},url:c.url}))}).catch(c=>console.error("Exporting view config as link failed:",c)),s}},{key:"handleDataDomainChanged",value:function(n,o,a){const{views:s}=this.state;if(s[n].initialXDomain=o,s[n].initialYDomain=a,this.xScales[n]=bt().domain(o),this.yScales[n]=bt().domain(a),this.zoomLocks[n]){const c=this.zoomLocks[n],u=Wi(c);for(let l=0;l<u.length;l++){const h=u[l][0];h in this.locationLocks&&(s[h].initialXDomain=o,s[h].initialYDomain=a,this.xScales[h]=bt().domain(o),this.yScales[h]=bt().domain(a))}}this.setState({views:s})}},{key:"viewPositionAvailable",value:function(n,o,a,s){const c=n+a,u=o+s;if(n+a>zq)return!1;const l=ur(this.state.views);for(let h=0;h<l.length;h++){const f=l[h].layout.x,d=l[h].layout.y,p=f+l[h].layout.w,m=d+l[h].layout.h;if(n<p&&c>f&&o<m&&u>d)return!1}return!0}},{key:"handleAddView",value:function(n){const o=ur(this.state.views),a=n,s=[];n.layout.w===12&&(n.layout.w=6);for(let l=0;l<o.length;l++){let h=o[l].layout.x+o[l].layout.w,f=o[l].layout.y;this.viewPositionAvailable(h,f,n.layout.w,n.layout.h)&&s.push([h,f]),h=o[l].layout.x,f=o[l].layout.y+o[l].layout.h,this.viewPositionAvailable(h,f,n.layout.w,n.layout.h)&&s.push([h,f])}s.sort((l,h)=>{const f=l[1]-h[1];return f===0?l[0]-h[0]:f});const c=JSON.stringify(a),u=JSON.parse(c);u.initialXDomain=this.xScales[u.uid].domain(),u.initialYDomain=this.yScales[u.uid].domain(),[[u.layout.x,u.layout.y]]=s,u.uid=xt.nice(),u.layout.i=u.uid,La(u.tracks,l=>{this.addCallbacks(u.uid,l)}),this.setState(l=>{const h=JSON.parse(JSON.stringify(l.views));return h[u.uid]=u,{views:h}})}},{key:"handleSelectedAssemblyChanged",value:function(n,o,a,s){const{views:c}=this.state;c[n].genomePositionSearchBox.chromInfoId=o,c[n].genomePositionSearchBox.autocompleteId=a,c[n].genomePositionSearchBox.autocompleteServer=s}},{key:"createGenomePostionSearchBoxEntry",value:function(n,o){let a=n;const s={autocompleteServer:jS,chromInfoServer:jS,visible:!1};return a||(a=JSON.parse(JSON.stringify(s))),a.autocompleteServer||(a.autocompleteServer=s.autocompleteServer),a.chromInfoId||(a.chromInfoId=o),a.chromInfoServer||(a.chromInfoServer=s.chromInfoServer),a.visible||(a.visible=!1),a}},{key:"handleTogglePositionSearchBox",value:function(n){const o=this.state.views[n];o.genomePositionSearchBoxVisible=!o.genomePositionSearchBoxVisible;const a={};La(o.tracks,u=>{u.coordSystem&&(a[u.coordSystem]||(a[u.coordSystem]=0),a[u.coordSystem]+=1)});const s=Wi(a).sort((u,l)=>l[1]-u[1]);let c="hg19";s.length&&(c=s[0][0]),o.genomePositionSearchBox=this.createGenomePostionSearchBoxEntry(o.genomePositionSearchBox,c),o.genomePositionSearchBox.visible=!o.genomePositionSearchBox.visible,this.refreshView(),this.setState({configMenuUid:null})}},{key:"handleTrackOptionsChanged",value:function(n,o,a){const s=this.state.views[n],c=Ci(s.tracks,o);c&&(c.options=Object.assign(c.options,a),this.mounted&&(this.setState(u=>({views:u.views})),this.adjustSplitHeatmapTrackOptions(c,a,s.tracks,n)))}},{key:"adjustSplitHeatmapTrackOptions",value:function(n,o,a,s){n.type==="heatmap"&&(o.extent==="upper-right"&&a.center[0].type==="combined"&&a.center[0].contents.length>1&&a.center[0].contents.some(c=>{if(c.type==="heatmap"&&c.uid!==n.uid&&c.options.extent!=="lower-left"){const u={...c.options,extent:"lower-left",labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"},l={...o,labelPosition:"topRight",colorbarPosition:"topRight"};return this.handleTrackOptionsChanged(s,c.uid,u),this.handleTrackOptionsChanged(s,n.uid,l),!0}return!1}),o.extent==="lower-left"&&o.extent==="lower-left"&&a.center[0].type==="combined"&&a.center[0].contents.length>1&&a.center[0].contents.some(c=>{if(c.type==="heatmap"&&c.uid!==n.uid&&c.options.extent!=="upper-right"){const u={...c.options,extent:"upper-right",labelPosition:"topRight",colorbarPosition:"topRight"},l={...o,labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"};return this.handleTrackOptionsChanged(s,c.uid,u),this.handleTrackOptionsChanged(s,n.uid,l),!0}return!1}))}},{key:"handleViewOptionsChanged",value:function(n,o){const a=this.state.views[n];a&&(a.options=Object.assign(a.options||{},o),this.mounted&&this.setState(s=>({views:s.views})))}},{key:"isTrackValid",value:function(n,o){return!(n.type==="viewport-projection-center"&&!o.has(n.fromViewUid))}},{key:"removeInvalidTracks",value:function(n){const o=new Set(Yi(n));for(const a of ur(n))for(const s of["left","top","center","right","bottom"])a.tracks&&a.tracks.hasOwnProperty(s)&&(a.tracks[s]=a.tracks[s].filter(c=>this.isTrackValid(c,o)),a.tracks[s].forEach(c=>{c.type==="combined"&&(c.contents=c.contents.filter(u=>this.isTrackValid(u,o)))}));return n}},{key:"processViewConfig",value:function(n){let{views:o}=n,a={};return(!n.views||n.views.length===0)&&(console.warn("No views provided in viewConfig"),o=[{editable:!0,tracks:{}}]),o.forEach(s=>{s.tracks&&_5(s.tracks),s.uid||(s.uid=xt.nice()),a[s.uid]=s,this.zoomToDataExtentOnInit.has(s.uid)&&this.zoomToDataExtentOnInit.delete(s.uid),s.initialXDomain?(s.initialXDomain[0]=+s.initialXDomain[0],s.initialXDomain[1]=+s.initialXDomain[1]):(s.initialXDomain=[0,100],this.zoomToDataExtentOnInit.add(s.uid)),s.initialYDomain?(s.initialXDomain[0]=+s.initialXDomain[0],s.initialXDomain[1]=+s.initialXDomain[1]):s.initialYDomain=[s.initialXDomain[0],s.initialXDomain[1]],this.xScales[s.uid]||(this.xScales[s.uid]=bt().domain(s.initialXDomain)),this.yScales[s.uid]||(this.yScales[s.uid]=bt().domain(s.initialYDomain)),La(s.tracks,c=>{if(c.uid||(c.uid=xt.nice()),this.addCallbacks(s.uid,c),this.addDefaultTrackOptions(c),c.contents)for(const u of c.contents)this.addDefaultTrackOptions(u)}),s.layout?s.layout.i=s.uid:s.layout=this.generateViewLayout(s)}),this.deserializeZoomLocks(n),this.deserializeLocationLocks(n),this.deserializeValueScaleLocks(n),a=this.removeInvalidTracks(a),a}},{key:"handleWindowFocused",value:function(){}},{key:"rangeSelectionHandler",value:function(n){this.rangeSelection=n,this.apiPublish("rangeSelection",n)}},{key:"offViewChange",value:function(n){this.viewChangeListener.splice(n,1)}},{key:"onViewChange",value:function(n){return this.viewChangeListener.push(n)-1}},{key:"triggerViewChange",value:function(){this.viewChangeListener.forEach(n=>n(this.getViewsAsString()))}},{key:"getGenomeLocation",value:function(n){return QS.get(this.state.views[n].chromInfoPath).then(o=>nB(this.xScales[n],this.yScales[n],o))}},{key:"offLocationChange",value:function(n,o){this.removeScalesChangedListener(n,o)}},{key:"zoomTo",value:function(n,o,a,s,c,u){if(!(n in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(Number.isNaN(+o)||Number.isNaN(+a)){const d=[o,a].join(", ");console.warn([`Invalid coordinates (${d}). All coordinates need to be numbers
        and should represent absolute coordinates (not chromosome
        coordinates).`].join(" "));return}(Number.isNaN(+s)||Number.isNaN(+c)||s===null||c===null)&&(s=o,c=a);const[l,h,f]=tn(this.xScales[n].copy().domain([o,a]),this.yScales[n].copy().domain([s,c]));this.setCenters[n](l,h,f,!1,u)}},{key:"zoomToGene",value:function(n,o,a,s){if(!(n in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[n].genomePositionSearchBox||!this.state.views[n].genomePositionSearchBox.autocompleteServer||!this.state.views[n].genomePositionSearchBox.autocompleteId||!this.state.views[n].chromInfoPath){console.warn("Please set chromInfoPath, autocompleteServer, and autocompleteId to use the zoomToGene API");return}this.suggestGene(n,o,c=>{if(c){const u=c.find(l=>l.geneName.toLowerCase()===o.toLowerCase());if(u){const{chr:l,txStart:h,txEnd:f}=u;ca(this.state.views[n].chromInfoPath,d=>{const p=d.chrToAbs([l,h])-a,m=d.chrToAbs([l,f])+a,[g,v,_]=tn(this.xScales[n].copy().domain([p,m]),this.yScales[n].copy().domain([p,m]));this.setCenters[n](g,v,_,!1,s)},this.pubSub)}else console.warn(`Couldn't find the gene symbol: ${o}`)}})}},{key:"suggestGene",value:function(n,o,a){if(!(n in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[n].genomePositionSearchBox||!this.state.views[n].genomePositionSearchBox.autocompleteServer||!this.state.views[n].genomePositionSearchBox.autocompleteId){console.warn("Please set autocompleteServer and autocompleteId to use the suggestGene API");return}const s=this.state.views[n].genomePositionSearchBox.autocompleteServer,c=this.state.views[n].genomePositionSearchBox.autocompleteId,u=`${s}/suggest/?d=${c}&ac=${o.toLowerCase()}`;at.json(u,ql,this.pubSub).then(l=>{a(l)}).catch(l=>console.error(l))}},{key:"onLocationChange",value:function(n,o,a){const s=Object.keys(this.state.views);if(!s.length)return this.unsetOnLocationChange.push({viewId:n,callback:o,callbackId:a}),null;if(n=typeof n>"u"&&s.length===1?s[0]:n,typeof n>"u"||s.indexOf(n)===-1)return console.error("onLocationChange either missing a viewId or passed an invalid viewId: ",n),null;const c=this.state.views[n],u=(h,f)=>{o({xDomain:h.domain(),yDomain:f.domain(),xRange:h.range(),yRange:f.range()})};let l=1;return this.scalesChangedListeners[c.uid]&&(l=Object.keys(this.scalesChangedListeners[c.uid]).filter(h=>h.indexOf(Gd)===0).map(h=>parseInt(h.slice(Gd.length+1),10)).reduce((h,f)=>Math.max(h,f),0)+1),this.addScalesChangedListener(c.uid,`${Gd}.${l}`,u),a&&a(`${Gd}.${l}`),l}},{key:"getTiledPlotAtPosition",value:function(n,o){let a;const s=ur(this.state.views);for(let c=0;c<s.length;c++){const u=this.tiledPlots[s[c].uid],l=this.tiledAreasDivs[s[c].uid].getBoundingClientRect(),{top:h,left:f}=l,d=h+l.height,p=f+l.width,m=n>=f&&n<=p,g=o>=h&&o<=d;if(m&&g){a=u;break}}return a}},{key:"mouseMoveHandler",value:function(n){if(!this.topDiv||this.state.modal)return;const o=n.clientX,a=n.clientY,s=lr(n,this.topDiv);s[1]+=this.scrollTop;const c=this.getTiledPlotAtPosition(o,a),u=c?c.listTracksAtPosition(s[0],s[1],!0).map(m=>m.originalTrack||m):[],l=u.find(m=>!m.isAugmentationTrack),h=l?[s[0]-l.position[0],s[1]-l.position[1]]:s;let f=-1,d=-1;l&&(f=l.flipText?l._xScale.invert(h[1]):l._xScale.invert(h[0]),d=l.is2d?l._yScale.invert(h[1]):f);const p={x:s[0],y:s[1],relTrackX:l&&l.flipText?h[1]:h[0],relTrackY:l&&l.flipText?h[0]:h[1],dataX:f,dataY:d,isFrom2dTrack:!!(l&&l.is2d),isFromVerticalTrack:!!(l&&l.flipText),track:l,origEvt:n,sourceUid:this.uid,hoveredTracks:u,noHoveredTracks:u.length===0};if(this.pubSub.publish("app.mouseMove",p),this.isBroadcastMousePositionGlobally){const m={...p};m.origEvt=void 0,m.track=void 0,m.hoveredTracks=void 0,delete m.origEvt,delete m.track,delete m.hoveredTracks,Ad.publish("higlass.mouseMove",m)}this.apiPublish("cursorLocation",{absX:o,absY:a,relX:p.x,relY:p.y,relTrackX:p.relTrackX,relTrackY:p.relTrackY,dataX:p.dataX,dataY:p.dataY,isFrom2dTrack:p.isFrom2dTrack,isFromVerticalTrack:p.isFromVerticalTrack}),this.showHoverMenu(p,this.state.isShiftDown)}},{key:"getMinMaxValue",value:function(n,o,a,s){const c=Zd(this.tiledPlots,n,o);if(!c){console.warn(`Track with ID: ${o} not found!`);return}if(!c.minVisibleValueInTiles||!c.maxVisibleValueInTiles){console.warn(`Track ${o} doesn't support the retrieval of min or max values.`);return}return a&&c.getAggregatedVisibleValue?[c.getAggregatedVisibleValue("min"),c.getAggregatedVisibleValue("max")]:[c.minVisibleValueInTiles(s),c.maxVisibleValueInTiles(s)]}},{key:"showHoverMenu",value:function(n,o){const a=n.track&&n.track.getMouseOverHtml?n.track.getMouseOverHtml(n.relTrackX,n.relTrackY,o):"";if(n.track!==this.prevMouseHoverTrack&&this.prevMouseHoverTrack&&this.prevMouseHoverTrack.stopHover&&this.prevMouseHoverTrack.stopHover(),this.prevMouseHoverTrack=n.track,this.zooming)return;const s=a&&a.length?[1]:[];let c=Ht("body").selectAll(".track-mouseover-menu").data(s);c.exit().remove(),c.enter().append("div").classed("track-mouseover-menu",!0).classed(td["track-mouseover-menu"],!0),c=Ht("body").selectAll(".track-mouseover-menu");const u=lr(n.origEvt,Ht("body").node()),l=[u[0]-window.scrollX,u[1]-window.scrollY];if(c.style("left",`${l[0]}px`).style("top",`${l[1]}px`),!c.node())return;const h=c.node().getBoundingClientRect();h.x+h.width>window.innerWidth&&c.style("left",`${l[0]-h.width}px`),h.y+h.height>window.innerHeight&&c.style("top",`${l[1]-h.height}px`),c.html(a)}},{key:"hideHoverMenu",value:function(){Ht("body").selectAll(".track-mouseover-menu").remove()}},{key:"closeCustomDialog",value:function(){this.setState(n=>({customDialog:null}))}},{key:"appClickHandler",value:function(n){this.apiPublish("click",n)}},{key:"canvasClickHandler",value:function(n){const o=n.nativeEvent||n,a=o.clientX,s=o.clientY,c=this.getTiledPlotAtPosition(a,s),u=lr(o,this.topDiv);u[1]+=this.scrollTop;const l=c?c.listTracksAtPosition(u[0],u[1],!0).map(v=>v.originalTrack||v):[],h=l.find(v=>!v.isAugmentationTrack),f=h?[u[0]-h.position[0],u[1]-h.position[1]]:u,d=h&&h.flipText?f[1]:f[0],p=h&&h.flipText?f[0]:f[1];for(const v of this.iterateOverTracks()){const _=Zd(this.tiledPlots,v.viewId,v.trackId);_.respondsToPosition(u[0],u[1])||_.clickOutside()}const m=[];for(const v of l)if(v.childTracks){for(const _ of v.childTracks)m.push({trackUid:_.context.trackUid,viewUid:_.context.viewUid,trackType:_.context.trackType,data:_.click(d,p,n)});m.push({trackUid:v.context.trackUid,viewUid:v.context.viewUid,trackType:v.context.trackType,data:{type:"generic",event:n}})}else m.push({trackUid:v.context.trackUid,viewUid:v.context.viewUid,trackType:v.context.trackType,data:v.click(d,p,n)});const g=[];m.forEach((v,_)=>{const y=Zd(this.tiledPlots,v.viewUid,v.trackUid);if(typeof y.clickDialog=="function"){const b=y.clickDialog();b&&g.push(b)}}),g.length>0&&this.setState(v=>({customDialog:g})),this.pubSub.publish("app.click",m)}},{key:"mouseMoveZoomHandler",value:function(n){this.apiPublish("mouseMoveZoom",n)}},{key:"geneSearchHandler",value:function(n){this.apiPublish("geneSearch",n)}},{key:"mouseDownHandler",value:function(n){}},{key:"onScrollHandler",value:function(){this.props.options.sizeMode===Lg&&(this.scrollTop=this.scrollContainer.scrollTop,this.pixiStage.y=-this.scrollTop,this.pubSub.publish("app.scroll",this.scrollTop),this.animate())}},{key:"setTrackValueScaleLimits",value:function(n,o,a,s){const c=Zd(this.tiledPlots,n,o);if(!c){console.warn(`Could't find track: ${o}`);return}c.setFixedValueScaleMin&&c.setFixedValueScaleMax?(c.setFixedValueScaleMin(a),c.setFixedValueScaleMax(s),c.rerender(c.options,!0),c.animate()):console.warn("Track doesn't support fixed value scales.")}},{key:"setChromInfo",value:function(n,o){ca(n,a=>{this.chromInfo=a,o()},this.pubSub)}},{key:"onMouseLeaveHandler",value:function(){this.pubSub.publish("app.mouseLeave"),this.hideHoverMenu(),this.animate()}},{key:"onBlurHandler",value:function(){this.animate()}},{key:"isZoomFixed",value:function(n){return this.props.zoomFixed||this.props.options.zoomFixed||this.state.viewConfig.zoomFixed||this.props.options.sizeMode===Lg||n&&n.zoomFixed}},{key:"trackDimensionsModifiedHandler",value:function(n){const o=this.state.views[n.viewId];if(!o)return;const a=Ci(o.tracks,n.trackId);a&&(n.height!==void 0&&(a.height=n.height),n.width!==void 0&&(a.width=n.width),this.adjustLayoutToTrackSizes(o),this.setState(s=>({views:s.views})))}},{key:"wheelHandler",value:function(n){if(this.state.modal||this.props.options.sizeMode===Lg)return;const o=n.nativeEvent||n,a=n.target===this.canvasElement;if(!V5(o.target,this.topDiv)||this.isZoomFixed())return;const s=o.clientX,c=o.clientY,u=this.getTiledPlotAtPosition(s,c);if(this.apiStack.wheel&&this.apiStack.wheel.length>0){const l=lr(o,this.topDiv);l[1]+=this.scrollTop;const h=u?u.listTracksAtPosition(l[0],l[1],!0).map(m=>m.originalTrack||m):[],f=h.find(m=>!m.isAugmentationTrack),d=f?[l[0]-f.position[0],l[1]-f.position[1]]:l,p={x:l[0],y:l[1],relTrackX:f&&f.flipText?d[1]:d[0],relTrackY:f&&f.flipText?d[0]:d[1],track:f,origEvt:o,sourceUid:this.uid,hoveredTracks:h,noHoveredTracks:h.length===0};this.apiPublish("wheel",p)}if(o.forwarded||a){n.stopPropagation(),n.preventDefault();return}if(n.preventDefault(),u){const{trackRenderer:l}=u;o.forwarded=!0,o&&(hy(o,l.eventTracker),o.preventDefault())}}},{key:"render",value:function(){this.tiledAreasDivs={},this.tiledAreas=E.createElement("div",{className:td["tiled-area"]}),this.mounted&&(this.tiledAreas=ur(this.state.views).map(l=>{const h=l.uid===this.state.addTrackPositionMenuUid?this.state.addTrackPositionMenuPosition:null;let f=null;if(this.state.chooseViewHandler){let g="transparent";this.state.mouseOverOverlayUid===l.uid&&(g="green"),f=E.createElement("div",{className:"tiled-plot-overlay",onClick:()=>this.state.chooseViewHandler(l.uid),onMouseEnter:()=>this.handleOverlayMouseEnter(l.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(l.uid),onMouseMove:()=>this.handleOverlayMouseEnter(l.uid),style:{position:"absolute",width:"100%",height:"100%",background:g,opacity:.3,zIndex:1}})}const d=E.createElement(u3e,{key:`tp${l.uid}`,ref:g=>{this.tiledPlots[l.uid]=g},addTrackPosition:this.state.addTrackPositionView===l.uid?this.state.addTrackPosition:null,addTrackPositionMenuPosition:h,canvasElement:this.state.canvasElement,chooseTrackHandler:this.state.chooseTrackHandler?g=>this.state.chooseTrackHandler(l.uid,g):null,customDialog:this.state.customDialog,closeCustomDialog:()=>this.closeCustomDialog(),chromInfoPath:l.chromInfoPath,disableTrackMenu:this.isTrackMenuDisabled(),draggingHappening:this.state.draggingHappening!==null,editable:this.isEditable(),getLockGroupExtrema:g=>this.getLockGroupExtrema(l.uid,g),initialXDomain:l.initialXDomain,initialYDomain:l.initialYDomain,isShowGlobalMousePosition:this.isShowGlobalMousePosition,isValueScaleLocked:g=>this.isValueScaleLocked(l.uid,g),marginBottom:this.viewMarginBottom,marginLeft:this.viewMarginLeft,marginRight:this.viewMarginRight,marginTop:this.viewMarginTop,metaTracks:l.metaTracks,mouseTool:this.state.mouseTool,onChangeTrackData:(g,v)=>this.handleChangeTrackData(l.uid,g,v),onChangeTrackType:(g,v)=>this.handleChangeTrackType(l.uid,g,v),onCloseTrack:g=>this.handleCloseTrack(l.uid,g),onDataDomainChanged:(g,v)=>this.handleDataDomainChanged(l.uid,g,v),onLockValueScale:g=>this.handleLockValueScale(l.uid,g),onMouseMoveZoom:this.mouseMoveZoomHandler.bind(this),onNewTilesLoaded:g=>this.handleNewTilesLoaded(l.uid,g),onNoTrackAdded:this.handleNoTrackAdded.bind(this),onRangeSelection:this.rangeSelectionHandler.bind(this),onResizeTrack:this.triggerViewChangeDb,onScalesChanged:(g,v)=>this.handleScalesChanged(l.uid,g,v),onTrackOptionsChanged:(g,v)=>this.handleTrackOptionsChanged(l.uid,g,v),onTrackPositionChosen:this.handleTrackPositionChosen.bind(this),onTracksAdded:(g,v,_)=>this.handleTracksAdded(l.uid,g,v,_),onUnlockValueScale:g=>this.handleUnlockValueScale(l.uid,g),onValueScaleChanged:g=>this.syncValueScales(l.uid,g),overlays:l.overlays,paddingBottom:this.viewPaddingBottom,paddingLeft:this.viewPaddingLeft,paddingRight:this.viewPaddingRight,paddingTop:this.viewPaddingTop,pixiRenderer:this.pixiRenderer,pixiStage:this.pixiStage,pluginDataFetchers:this.pluginDataFetchers,pluginTracks:this.pluginTracks,rangeSelection1dSize:this.state.rangeSelection1dSize,rangeSelectionToInt:this.state.rangeSelectionToInt,registerDraggingChangedListener:g=>this.addDraggingChangedListener(l.uid,l.uid,g),removeDraggingChangedListener:g=>this.removeDraggingChangedListener(l.uid,l.uid,g),setCentersFunction:g=>{this.setCenters[l.uid]=g},svgElement:this.state.svgElement,tracks:l.tracks,trackSourceServers:this.state.viewConfig.trackSourceServers,uid:l.uid,verticalMargin:this.verticalMargin,viewOptions:l.options,xDomainLimits:l.xDomainLimits,yDomainLimits:l.yDomainLimits,zoomable:!this.isZoomFixed(l),zoomLimits:this.calculateZoomLimits(l,l.initialXDomain),zoomToDataExtentOnInit:()=>this.zoomToDataExtentOnInit.has(l.uid)}),p=(g,v)=>l.genomePositionSearchBox?E.createElement(q3e,{key:`gpsb${l.uid}`,ref:_=>{this.genomePositionSearchBoxes[l.uid]=_},autocompleteId:l.genomePositionSearchBox.autocompleteId,autocompleteServer:l.genomePositionSearchBox.autocompleteServer,chromInfoId:l.genomePositionSearchBox.chromInfoId,chromInfoPath:l.genomePositionSearchBox.chromInfoPath,chromInfoServer:l.genomePositionSearchBox.chromInfoServer,hideAvailableAssemblies:l.genomePositionSearchBox.hideAvailableAssemblies,isFocused:g,onFocus:v,onGeneSearch:this.geneSearchHandler.bind(this),onSelectedAssemblyChanged:(_,y,b)=>this.handleSelectedAssemblyChanged(l.uid,_,y,b),registerViewportChangedListener:_=>this.addScalesChangedListener(l.uid,l.uid,_),removeViewportChangedListener:()=>this.removeScalesChangedListener(l.uid,l.uid),setCenters:(_,y,b,T)=>this.setCenters[l.uid](_,y,b,!1,T),trackSourceServers:this.state.viewConfig.trackSourceServers,twoD:!!(l.tracks.left.length||l.tracks.right.length||l.tracks.center.length)}):null,m=this.isEditable()&&!this.isViewHeaderDisabled()&&!this.state.viewConfig.hideHeader?E.createElement(SVe,{ref:g=>{this.viewHeaders[l.uid]=g},getGenomePositionSearchBox:p,isGenomePositionSearchBoxVisible:l.genomePositionSearchBox&&l.genomePositionSearchBox.visible,mouseTool:this.state.mouseTool,onAddView:()=>this.handleAddView(l),onClearView:()=>this.handleClearView(l.uid),onCloseView:()=>this.handleCloseView(l.uid),onEditViewConfig:this.handleEditViewConfigBound,onExportPNG:this.handleExportPNG.bind(this),onExportSVG:this.handleExportSVG.bind(this),onExportViewsAsJSON:this.handleExportViewAsJSON.bind(this),onExportViewsAsLink:this.handleExportViewsAsLink.bind(this),onLockLocation:g=>this.handleYankFunction(g,this.handleLocationLockChosen.bind(this)),onLockZoom:g=>this.handleYankFunction(g,this.handleZoomLockChosen.bind(this)),onLockZoomAndLocation:g=>this.handleYankFunction(g,(v,_)=>{this.handleZoomLockChosen(v,_),this.handleLocationLockChosen(v,_)}),onProjectViewport:this.handleProjectViewport.bind(this),onTakeAndLockZoomAndLocation:g=>{this.handleYankFunction(g,(v,_)=>{this.handleZoomYanked(v,_),this.handleLocationYanked(v,_),this.handleZoomLockChosen(v,_),this.handleLocationLockChosen(v,_)})},onTogglePositionSearchBox:this.handleTogglePositionSearchBox.bind(this),onTrackPositionChosen:g=>this.handleTrackPositionChosen(l.uid,g),onUnlockLocation:g=>this.handleUnlock(g,this.locationLocks),onUnlockZoom:g=>this.handleUnlock(g,this.zoomLocks),onUnlockZoomAndLocation:g=>{this.handleUnlock(g,this.zoomLocks),this.handleUnlock(g,this.locationLocks)},onViewOptionsChanged:g=>this.handleViewOptionsChanged(l.uid,g),onYankLocation:g=>this.handleYankFunction(g,this.handleLocationYanked.bind(this)),onYankZoom:g=>this.handleYankFunction(g,this.handleZoomYanked.bind(this)),onYankZoomAndLocation:g=>this.handleYankFunction(g,(v,_)=>{this.handleZoomYanked(v,_),this.handleLocationYanked(v,_)}),onZoomToData:g=>this.handleZoomToData(g),viewUid:l.uid}):null;return E.createElement("div",{key:l.uid,ref:g=>{this.tiledAreasDivs[l.uid]=g},className:td["tiled-area"]},m,d,f)}));let n=this.mounted?Object.values(this.state.views).filter(l=>l.layout).map(l=>l.layout):[];n=JSON.parse(JSON.stringify(n));const o=this.isEditable()?n5:0,a=this.isEditable()?i5:0,s=+this.props.options.containerPaddingX>=0?+this.props.options.containerPaddingX:o,c=+this.props.options.containerPaddingY>=0?+this.props.options.containerPaddingY:a,u=E.createElement(zte,{ref:l=>{this.gridLayout=l},cols:12,containerPadding:[s,c],draggableHandle:`.${Xi["multitrack-header-grabber"]}`,isDraggable:this.isEditable(),isResizable:this.isEditable(),layout:n,margin:this.isEditable()?[10,10]:[0,0],measureBeforeMount:!1,onBreakpointChange:this.onBreakpointChange.bind(this),onDragStart:this.handleDragStart.bind(this),onDragStop:this.handleDragStop.bind(this),onLayoutChange:this.handleLayoutChange.bind(this),onResize:this.resizeHandler.bind(this),rowHeight:this.state.rowHeight,useCSSTransforms:this.mounted,verticalCompact:this.state.viewConfig.compactLayout,width:this.state.width},this.tiledAreas);return E.createElement("div",{key:this.uid,ref:l=>{this.topDiv=l},className:Zt("higlass",{"higlass-dark-theme":this.theme===mr,"higlass-container-overflow":this.props.options.sizeMode===Wq||this.props.options.sizeMode===Lg}),onMouseLeave:this.onMouseLeaveHandlerBound,onMouseMove:this.mouseMoveHandlerBound},E.createElement(_Se,{value:this.pubSub},E.createElement(BHe,{value:this.modal},E.createElement(cSe,{value:this.theme},this.state.modal,E.createElement("canvas",{key:this.uid,ref:l=>{this.canvasElement=l},onClick:this.canvasClickHandlerBound,className:td["higlass-canvas"]}),E.createElement("div",{ref:l=>{this.scrollContainer=l},className:Zt("higlass-scroll-container",{"higlass-scroll-container-overflow":this.props.options.sizeMode===Wq,"higlass-scroll-container-scroll":this.props.options.sizeMode===Lg}),onScroll:this.onScrollHandlerBound},E.createElement("div",{ref:l=>{this.divDrawingSurface=l},className:Zt("higlass-drawing-surface",td["higlass-drawing-surface"])},u),E.createElement("svg",{ref:l=>{this.svgElement=l},className:td["higlass-svg"],style:{position:"absolute",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none"}}))))))}}]),r}(E.Component);rd.defaultProps={options:{},zoomFixed:!1,compactLayout:!0},rd.propTypes={getApi:N.func,options:N.object,viewConfig:N.oneOfType([N.string,N.object]).isRequired,zoomFixed:N.bool,compactLayout:N.bool};function bqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yq(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Tqe(i.key),i)}}function _qe(e,t,r){return t&&Yq(e.prototype,t),r&&Yq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tqe(e){var t=Eqe(e,"string");return typeof t=="symbol"?t:String(t)}function Eqe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wx(e,t)}function Wx(e,t){return Wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Wx(e,t)}function wqe(e){var t=kqe();return function(){var i=mE(e),n;if(t){var o=mE(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Aqe(this,n)}}function Aqe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oqe(e)}function Oqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mE(e){return mE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mE(e)}const qq=(e,[t,r,i,n],o)=>{o.options.colorbarPosition||(o.options.colorbarPosition="hidden"),o.options.labelPosition||(o.options.labelPosition="hidden");const a="arbitary-id",c=Kq(e,{editable:!1,zoomFixed:!1,views:[{uid:a,initialXDomain:[t,r],initialYDomain:[i,n],tracks:{center:[o]},layout:{w:12,h:12,x:0,y:0,moved:!1,static:!1}}]},{sizeMode:"bounded"});return{id:a,hgApi:c}};let Xq=function(e){Sqe(r,e);var t=wqe(r);function r(i){var n;return bqe(this,r),n=t.call(this,i),n.id=`id-${Math.random()}`,n}return _qe(r,[{key:"componentDidMount",value:function(){this.initTrackViewer()}},{key:"shouldComponentUpdate",value:function(n){const{x:o,y:a,width:s,height:c}=n;return this.zoomTo(o,a,s,c),!1}},{key:"initTrackViewer",value:function(){const{trackConfig:n,x:o,y:a,width:s,height:c}=this.props,u=document.getElementById(this.id),{id:l,hgApi:h}=qq(u,[o,o+s,a,a+c],n);this.viewUid=l,this.viewer=h}},{key:"zoomTo",value:function(n,o,a,s){this.viewer.zoomTo(this.viewUid,n,n+a,o,o+s)}},{key:"render",value:function(){return E.createElement("div",{id:this.id,style:{height:"100%",width:"100%"}})}}]),r}(E.Component);Xq.propTypes={trackConfig:N.object,width:N.number,height:N.number,x:N.number,y:N.number};const Iqe=Object.freeze(Object.defineProperty({__proto__:null,DataFetcher:rm,DenseDataExtrema1D:Yd,HeatmapTiledPixiTrack:Hf,PixiTrack:jn,SVGTrack:Ka,TiledPixiTrack:qa,Track:pc,ViewportTrackerHorizontal:LI,absToChr:Dr,chrToAbs:Hd,chromInfoBisector:BS,colorToHex:it,fakePubSub:o_,pixiTextToSvg:Ey,showMousePosition:Ss,svgLine:dw,tileProxy:at},Symbol.toStringTag,{value:"Module"})),Cqe={SVGTrack:Ka,TiledPixiTrack:qa,HorizontalGeneAnnotationsTrack:yI},Pqe=(e,t,r)=>{const i=E.createRef();return Br.render(E.createElement(rd,{ref:i,options:r||{},viewConfig:t}),e),i.current},Kq=(e,t,r)=>Pqe(e,t,r).api;Bt.ChromosomeInfo=ca,Bt.HiGlassComponent=rd,Bt.HiGlassTrackComponent=Xq,Bt.getTrackObjectFromHGC=Ay,Bt.hggos=Iqe,Bt.mountHGComponent=ok,Bt.schema=Gx,Bt.trackViewer=qq,Bt.tracks=Cqe,Bt.version=LP,Bt.viewer=Kq,Bt.waitForJsonComplete=Vb,Bt.waitForTilesLoaded=Xp,Bt.waitForTransitionsFinished=ik,Object.defineProperty(Bt,Symbol.toStringTag,{value:"Module"})});
