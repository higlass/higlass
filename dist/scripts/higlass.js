!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.higlass=e():t.higlass=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){return Math.sqrt(Math.sqrt(t+1))}function e(t){return t.join("/")}function n(n){function U(t){return e(t)in O}function j(t){return e(t)in R}function z(t,e,n){var r=document.createElement("canvas");r.width=256,r.height=256;var i=r.getContext("2d");i.fillStyle="white",i.fillRect(0,0,r.width,r.height);var o=i.createImageData(r.width,r.height);t.map(function(t,e){var n=(Math.floor(T(t)),h[Math.floor(T(t))]);o.data[4*e]=n[0],o.data[4*e+1]=n[1],o.data[4*e+2]=n[2],o.data[4*e+3]=255});return i.putImageData(o,0,0),r}function Y(t){var n=!0,r=[],i={};if(t.forEach(function(t){n=n&&j(t),j(t)&&(r=r.concat(R[e(t)]))}),n){for(var a=r,h=Number.MAX_VALUE,c=Number.MIN_VALUE,f=0;f<a.length;f++)a[f]<h&&(h=a[f]),a[f]>c&&(c=a[f]);T.domain([h,c]);for(var p=0;p<t.length;p++)if(i[e(t[p])]=!0,!(e(t[p])in D)){var d=new u["default"].Graphics,g=z(R[e(t[p])]),v=new u["default"].Sprite(u["default"].Texture.fromCanvas(g)),y=t[p][0],m=t[p][1],M=t[p][2],w=_/Math.pow(2,y),S=x/Math.pow(2,y),A=o+m*w,O=l+M*S,C=o+(m+1)*w,L=l+(M+1)*S;v.x=b(A),v.y=E(O),v.width=b(C)-b(A),v.height=E(L)-E(O),d.addChild(v),D[e(t[p])]=d,console.log("adding child:",t[p]),P.addChild(d)}for(var F in D)F in i||(console.log("removing child:",F),P.removeChild(D[F]),delete D[F]);var N=I.selectAll(".tile-g").data(t,e),B=N.enter(),k=N.exit();B.append("g").attr("id",function(t){return"i-"+e(t)}).classed("tile-g",!0).each(function(t){s["default"].select(this);void 0===R[e(t)]}),k.remove(),(B.size()>0||k.size()>0)&&G()}}function X(t){t.forEach(function(n){if(j(n)||U(n))Y(t);else{var r=n.join("/")+".json",i=v+"/"+r;O[e(n)]=!0,s["default"].json(i,function(r,i){null!=r?R[e(n)]=[]:R[e(n)]=i,delete O[e(n)],Y(t)})}})}function H(){C.render(K),requestAnimationFrame(H)}function q(){var t=0;if(M.domain()[1]-M.domain()[0]>=a-o&&(A.x(M.domain([o,a])),t=1),w.domain()[1]-w.domain()[0]>=c-l&&(A.y(w.domain([l,c])),t+=1),2==t)A.scale(1),A.translate([0,0]);else{if(M.domain()[0]<o&&(M.domain([o,M.domain()[1]-M.domain()[0]+o]),A.translate([b.range()[0]-b(M.domain()[0])*A.scale(),A.translate()[1]])),M.domain()[1]>a){var e=M.domain()[0]-M.domain()[1]+a;M.domain([e,a]),A.translate([b.range()[0]-b(M.domain()[0])*A.scale(),A.translate()[1]])}if(w.domain()[0]<l&&(w.domain([l,w.domain()[1]-w.domain()[0]+l]),A.translate([A.translate()[0],E.range()[0]-E(w.domain()[0])*A.scale()])),w.domain()[1]>c){var n=w.domain()[0]-w.domain()[1]+c;w.domain([n,c]),A.translate([A.translate()[0],E.range()[0]-E(w.domain()[0])*A.scale()])}}P.position.x=A.translate()[0],P.position.y=A.translate()[1],P.scale.x=A.scale(),P.scale.y=A.scale(),k&&k(M,A.scale()),G()}function G(){J.call(y),Q.call(m),I.selectAll(".data-point").attr("cx",function(t){return M(t.pos[0])}).attr("cy",function(t){return w(t.pos[1])}).attr("r",function(e){return T(t(e.count+1))});for(var e=Math.round(Math.log(A.scale())/Math.LN2)+1,n=_/Math.pow(2,e),r=x/Math.pow(2,e),i=1e-6,a=[],u=s["default"].range(Math.floor((A.x().domain()[0]-o)/n),Math.ceil((A.x().domain()[1]-o-i)/n)),h=s["default"].range(Math.floor((A.y().domain()[0]-l)/r),Math.ceil((A.y().domain()[1]-l-i)/r)),c=0;c<u.length;c++)for(var f=0;f<h.length;f++)a.push([e,u[c],h[f]]);X(a)}var W=n.append("canvas").attr("width",0).attr("height",0).style("left",g.left+"px").style("top",g.top+"px").style("position","absolute");C=u["default"].autoDetectRenderer(r-g.right,i-g.top-g.bottom,{backgroundColor:16777215,antialias:!0,view:W.node()});var V=n.append("svg").attr("width",r).attr("height",i).style("left",0).style("top",0).style("position","absolute"),Z=V.append("g").attr("transform","translate("+g.left+", "+g.top+")"),K=new u["default"].Container;P=new u["default"].Graphics,K.addChild(P),H(),A=s["default"].behavior.zoom().on("zoom",q),Z.insert("rect","g").attr("class","pane").attr("width",r).attr("height",i).attr("pointer-events","all"),Z.call(A);var J=Z.append("g").attr("class","y axis").attr("transform","translate("+(r-g.right)+",0)"),Q=Z.append("g").attr("class","x axis").attr("transform","translate(0,"+(i-g.bottom-g.top)+")");I=Z.append("g").classed("main-g",!0).attr("transform","translate("+g.left+",0)"),I.append("clipPath").attr("id","clip").append("rect").attr("x",0).attr("y",0).attr("width",r-g.left-g.right).attr("height",i-g.top-g.bottom),s["default"].json(v+"/tile_info.json",function(e,n){o=n.min_pos[0],a=n.max_pos[0]+.001,l=n.min_pos[1],c=n.max_pos[1],f=n.min_value,p=n.max_value,L=n.min_importance,F=n.max_importance,d=n.max_zoom,_=n.max_width,x=n.max_width,N=[o,a],B=[l,c],M=s["default"].scale.linear().domain(N).range([0,r-g.left-g.right]),w=s["default"].scale.linear().domain(B).range([i-g.top-g.bottom,0]),T=s["default"].scale.linear().domain([t(f+1),t(p+1)]).range([255,0]),b=M.copy(),E=w.copy(),A.x(M).y(w).scaleExtent([1,Math.pow(2,d-1)]),y=s["default"].svg.axis().scale(w).orient("right").tickSize(-(r-g.left-g.right)).tickPadding(6).ticks(4),m=s["default"].svg.axis().scale(M).orient("bottom").tickSize(-(i-g.top-g.bottom)).tickPadding(6).ticks(4),J.call(y),Q.call(m),X([[0,0,0]])}),S=function(t,e,n){var r=1/(20/_),i=[b.range()[0]-b((t-10-n)*r),E.range()[0]-E((e-10-n)*r)];Z.transition().duration(750).call(A.translate(i).scale(r).event)}}var r=550,i=400,o=0,a=0,l=0,c=0,f=0,p=0,d=1,g={top:50,left:30,bottom:30,right:120},v=null,y=null,m=null,x=null,_=null,b=null,E=null,M=null,w=null,T=null,S=null,A=null,R={},O={},C=null,P=null,D={},L=0,F=0,N=null,B=null,k=null,I=null,U=(new Set,document.createElement("canvas"));return U.width=256,U.height=256,n.width=function(t){return arguments.length?(r=t,n):r},n.height=function(t){return arguments.length?(i=t,n):i},n.minX=function(t){return arguments.length?(o=t,n):o},n.minY=function(t){return arguments.length?(l=t,n):l},n.maxX=function(t){return arguments.length?(a=t,n):a},n.maxY=function(t){return arguments.length?(c=t,n):c},n.maxZoom=function(t){return arguments.length?(d=t,n):d},n.tileDirectory=function(t){return arguments.length?(v=t,n):v},n.zoomTo=function(t){return S},n.xScale=function(t){return M},n.zoomLevel=function(t){return A.scale()},n.zoomCallback=function(t){return arguments.length?(k=t,n):k},n}Object.defineProperty(e,"__esModule",{value:!0}),e.MassiveMatrixPlot=i,n(2);var o=n(6),s=r(o),a=n(7),u=r(a),h=[[0,0,0],[35,0,0],[52,0,0],[60,0,0],[63,1,0],[64,2,0],[68,5,0],[69,6,0],[72,8,0],[74,10,0],[77,12,0],[78,14,0],[81,16,0],[83,17,0],[85,19,0],[86,20,0],[89,22,0],[91,24,0],[92,25,0],[94,26,0],[95,28,0],[98,30,0],[100,31,0],[102,33,0],[103,34,0],[105,35,0],[106,36,0],[108,38,0],[109,39,0],[111,40,0],[112,42,0],[114,43,0],[115,44,0],[117,45,0],[119,47,0],[119,47,0],[120,48,0],[122,49,0],[123,51,0],[125,52,0],[125,52,0],[126,53,0],[128,54,0],[129,56,0],[129,56,0],[131,57,0],[132,58,0],[134,59,0],[134,59,0],[136,61,0],[137,62,0],[137,62,0],[139,63,0],[139,63,0],[140,65,0],[142,66,0],[142,66,0],[143,67,0],[143,67,0],[145,68,0],[145,68,0],[146,70,0],[146,70,0],[148,71,0],[148,71,0],[149,72,0],[149,72,0],[151,73,0],[151,73,0],[153,75,0],[153,75,0],[154,76,0],[154,76,0],[154,76,0],[156,77,0],[156,77,0],[157,79,0],[157,79,0],[159,80,0],[159,80,0],[159,80,0],[160,81,0],[160,81,0],[162,82,0],[162,82,0],[163,84,0],[163,84,0],[165,85,0],[165,85,0],[166,86,0],[166,86,0],[166,86,0],[168,87,0],[168,87,0],[170,89,0],[170,89,0],[171,90,0],[171,90,0],[173,91,0],[173,91,0],[174,93,0],[174,93,0],[176,94,0],[176,94,0],[177,95,0],[177,95,0],[179,96,0],[179,96,0],[180,98,0],[182,99,0],[182,99,0],[183,100,0],[183,100,0],[185,102,0],[185,102,0],[187,103,0],[187,103,0],[188,104,0],[188,104,0],[190,105,0],[191,107,0],[191,107,0],[193,108,0],[193,108,0],[194,109,0],[196,110,0],[196,110,0],[197,112,0],[197,112,0],[199,113,0],[200,114,0],[200,114,0],[202,116,0],[202,116,0],[204,117,0],[205,118,0],[205,118,0],[207,119,0],[208,121,0],[208,121,0],[210,122,0],[211,123,0],[211,123,0],[213,124,0],[214,126,0],[214,126,0],[216,127,0],[217,128,0],[217,128,0],[219,130,0],[221,131,0],[221,131,0],[222,132,0],[224,133,0],[224,133,0],[225,135,0],[227,136,0],[227,136,0],[228,137,0],[230,138,0],[230,138,0],[231,140,0],[233,141,0],[233,141,0],[234,142,0],[236,144,0],[236,144,0],[238,145,0],[239,146,0],[241,147,0],[241,147,0],[242,149,0],[244,150,0],[244,150,0],[245,151,0],[247,153,0],[247,153,0],[248,154,0],[250,155,0],[251,156,0],[251,156,0],[253,158,0],[255,159,0],[255,159,0],[255,160,0],[255,161,0],[255,163,0],[255,163,0],[255,164,0],[255,165,0],[255,167,0],[255,167,0],[255,168,0],[255,169,0],[255,169,0],[255,170,0],[255,172,0],[255,173,0],[255,173,0],[255,174,0],[255,175,0],[255,177,0],[255,178,0],[255,179,0],[255,181,0],[255,181,0],[255,182,0],[255,183,0],[255,184,0],[255,187,7],[255,188,10],[255,189,14],[255,191,18],[255,192,21],[255,193,25],[255,195,29],[255,197,36],[255,198,40],[255,200,43],[255,202,51],[255,204,54],[255,206,61],[255,207,65],[255,210,72],[255,211,76],[255,214,83],[255,216,91],[255,219,98],[255,221,105],[255,223,109],[255,225,116],[255,228,123],[255,232,134],[255,234,142],[255,237,149],[255,239,156],[255,240,160],[255,243,167],[255,246,174],[255,248,182],[255,249,185],[255,252,193],[255,253,196],[255,255,204],[255,255,207],[255,255,211],[255,255,218],[255,255,222],[255,255,225],[255,255,229],[255,255,233],[255,255,236],[255,255,240],[255,255,244],[255,255,247],[255,255,255]]},function(t,e,n){var r=n(3);"string"==typeof r&&(r=[[t.id,r,""]]);n(5)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(4)(),e.push([t.id,"svg {\n  font: 10px sans-serif;\n}\n\n.axis {\n  shape-rendering: crispEdges;\n}\n\n.axis path, .axis line {\n  fill: none;\n  stroke-width: .5px;\n}\n\n.x.axis line {\n  stroke: #ddd;\n  stroke-width: 1px;\n}\n\n.y.axis line {\n  stroke: #ddd;\n  stroke-width: 1px;\n}\n\n.data-point {\n    stroke: black;\n    stroke-width: 0px;\n    fill: #888888;\n}\n\n.pane {\n    fill: transparent;\n    stroke: transparent;\n}\n.resort-name {\n    font: 11px sans-serif;\n}\n\n.hovered {\n    stroke-width: 1px;\n}\n",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=p[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(h(r.parts[o],e))}else{for(var s=[],o=0;o<r.parts.length;o++)s.push(h(r.parts[o],e));p[r.id]={id:r.id,refs:1,parts:s}}}}function i(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],s=i[1],a=i[2],u=i[3],h={css:s,media:a,sourceMap:u};n[o]?n[o].parts.push(h):e.push(n[o]={id:o,parts:[h]})}return e}function o(t,e){var n=v(),r=x[x.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),x.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=x.indexOf(t);e>=0&&x.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function u(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function h(t,e){var n,r,i;if(e.singleton){var o=m++;n=y||(y=a(e)),r=l.bind(null,n,o,!1),i=l.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),r=f.bind(null,n),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),r=c.bind(null,n),i=function(){s(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function l(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function c(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var p={},d=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},g=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=d(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,m=0,x=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=g()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=i(t);return r(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var a=n[s],u=p[a.id];u.refs--,o.push(u)}if(t){var h=i(t);r(h,e)}for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var _=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var r,i;!function(){function o(t){return t&&(t.ownerDocument||t.document||t).documentElement}function s(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function a(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function u(t){return null===t?NaN:+t}function h(t){return!isNaN(t)}function l(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function c(t){return t.length}function f(t){for(var e=1;t*e%1;)e*=10;return e}function p(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function d(){this._=Object.create(null)}function g(t){return(t+="")===Ss||t[0]===As?As+t:t}function v(t){return(t+="")[0]===As?t.slice(1):t}function y(t){return g(t)in this._}function m(t){return(t=g(t))in this._&&delete this._[t]}function x(){var t=[];for(var e in this._)t.push(v(e));return t}function _(){var t=0;for(var e in this._)++t;return t}function b(){for(var t in this._)return!1;return!0}function E(){this._=Object.create(null)}function M(t){return t}function w(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function T(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=Rs.length;r>n;++n){var i=Rs[n]+e;if(i in t)return i}}function S(){}function A(){}function R(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new d;return e.on=function(e,i){var o,s=r.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function O(){ps.event.preventDefault()}function C(){for(var t,e=ps.event;t=e.sourceEvent;)e=t;return e}function P(t){for(var e=new A,n=0,r=arguments.length;++n<r;)e[arguments[n]]=R(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=ps.event;i.target=t,ps.event=i,e[i.type].apply(n,r)}finally{ps.event=o}}},e}function D(t){return Cs(t,Fs),t}function L(t){return"function"==typeof t?t:function(){return Ps(t,this)}}function F(t){return"function"==typeof t?t:function(){return Ds(t,this)}}function N(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ps.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?a:s:t.local?o:i}function B(t){return t.trim().replace(/\s+/g," ")}function k(t){return new RegExp("(?:^|\\s+)"+ps.requote(t)+"(?:\\s+|$)","g")}function I(t){return(t+"").trim().split(/^|\s+/)}function U(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=I(t).map(j);var i=t.length;return"function"==typeof e?r:n}function j(t){var e=k(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",B(i+" "+t))):n.setAttribute("class",B(i.replace(e," ")))}}function z(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function Y(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function X(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ns&&e.documentElement.namespaceURI===Ns?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ps.ns.qualify(t)).local?n:e}function H(){var t=this.parentNode;t&&t.removeChild(this)}function q(t){return{__data__:t}}function G(t){return function(){return Ls(this,t)}}function W(t){return arguments.length||(t=a),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function V(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],s=0,a=o.length;a>s;s++)(i=o[s])&&e(i,s,n);return t}function Z(t){return Cs(t,ks),t}function K(t){var e,n;return function(r,i,o){var s,a=t[o].update,u=a.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(s=a[e])&&++e<u;);return s}}function J(t,e,n){function r(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function i(){var i=u(e,gs(arguments));r.call(this),this.addEventListener(t,this[s]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+ps.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var s="__on"+t,a=t.indexOf("."),u=Q;a>0&&(t=t.slice(0,a));var h=Is.get(t);return h&&(t=h,u=$),a?e?i:r:e?S:o}function Q(t,e){return function(n){var r=ps.event;ps.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ps.event=r}}}function $(t,e){var n=Q(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function tt(t){var e=".dragsuppress-"+ ++js,n="click"+e,r=ps.select(s(t)).on("touchmove"+e,O).on("dragstart"+e,O).on("selectstart"+e,O);if(null==Us&&(Us="onselectstart"in t?!1:T(t.style,"userSelect")),Us){var i=o(t).style,a=i[Us];i[Us]="none"}return function(t){if(r.on(e,null),Us&&(i[Us]=a),t){var o=function(){r.on(n,null)};r.on(n,function(){O(),o()},!0),setTimeout(o,0)}}}function et(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>zs){var i=s(t);if(i.scrollX||i.scrollY){n=ps.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();zs=!(o.f||o.e),n.remove()}}return zs?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function nt(){return ps.event.changedTouches[0].identifier}function rt(t){return t>0?1:0>t?-1:0}function it(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function ot(t){return t>1?0:-1>t?Hs:Math.acos(t)}function st(t){return t>1?Ws:-1>t?-Ws:Math.asin(t)}function at(t){return((t=Math.exp(t))-1/t)/2}function ut(t){return((t=Math.exp(t))+1/t)/2}function ht(t){return((t=Math.exp(2*t))-1)/(t+1)}function lt(t){return(t=Math.sin(t/2))*t}function ct(){}function ft(t,e,n){return this instanceof ft?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ft?new ft(t.h,t.s,t.l):St(""+t,At,ft):new ft(t,e,n)}function pt(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,s;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,new Et(i(t+120),i(t),i(t-120))}function dt(t,e,n){return this instanceof dt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof dt?new dt(t.h,t.c,t.l):t instanceof vt?mt(t.l,t.a,t.b):mt((t=Rt((t=ps.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new dt(t,e,n)}function gt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new vt(n,Math.cos(t*=Vs)*e,Math.sin(t)*e)}function vt(t,e,n){return this instanceof vt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof vt?new vt(t.l,t.a,t.b):t instanceof dt?gt(t.h,t.c,t.l):Rt((t=Et(t)).r,t.g,t.b):new vt(t,e,n)}function yt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=xt(i)*oa,r=xt(r)*sa,o=xt(o)*aa,new Et(bt(3.2404542*i-1.5371385*r-.4985314*o),bt(-.969266*i+1.8760108*r+.041556*o),bt(.0556434*i-.2040259*r+1.0572252*o))}function mt(t,e,n){return t>0?new dt(Math.atan2(n,e)*Zs,Math.sqrt(e*e+n*n),t):new dt(NaN,NaN,t)}function xt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function _t(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function bt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function Et(t,e,n){return this instanceof Et?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof Et?new Et(t.r,t.g,t.b):St(""+t,Et,pt):new Et(t,e,n)}function Mt(t){return new Et(t>>16,t>>8&255,255&t)}function wt(t){return Mt(t)+""}function Tt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function St(t,e,n){var r,i,o,s=0,a=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Ct(i[0]),Ct(i[1]),Ct(i[2]))}return(o=la.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&o)>>4,s=s>>4|s,a=240&o,a=a>>4|a,u=15&o,u=u<<4|u):7===t.length&&(s=(16711680&o)>>16,a=(65280&o)>>8,u=255&o)),e(s,a,u))}function At(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,u=(s+o)/2;return a?(i=.5>u?a/(s+o):a/(2-s-o),r=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new ft(r,i,u)}function Rt(t,e,n){t=Ot(t),e=Ot(e),n=Ot(n);var r=_t((.4124564*t+.3575761*e+.1804375*n)/oa),i=_t((.2126729*t+.7151522*e+.072175*n)/sa),o=_t((.0193339*t+.119192*e+.9503041*n)/aa);return vt(116*i-16,500*(r-i),200*(i-o))}function Ot(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ct(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Pt(t){return"function"==typeof t?t:function(){return t}}function Dt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Lt(e,n,t,r)}}function Lt(t,e,n,r){function i(){var t,e=u.status;if(!e&&Nt(u)||e>=200&&300>e||304===e){try{t=n.call(o,u)}catch(r){return void s.error.call(o,r)}s.load.call(o,t)}else s.error.call(o,u)}var o={},s=ps.dispatch("beforesend","progress","load","error"),a={},u=new XMLHttpRequest,h=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(t){var e=ps.event;ps.event=t;try{s.progress.call(o,u)}finally{ps.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a[t]:(null==e?delete a[t]:a[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(h=t,o):h},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(gs(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),u.setRequestHeader)for(var l in a)u.setRequestHeader(l,a[l]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=h&&(u.responseType=h),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},ps.rebind(o,s,"on"),null==r?o:o.get(Ft(r))}function Ft(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Nt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Bt(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return fa?fa.n=o:ca=o,fa=o,pa||(da=clearTimeout(da),pa=1,ga(kt)),o}function kt(){var t=It(),e=Ut()-t;e>24?(isFinite(e)&&(clearTimeout(da),da=setTimeout(kt,e)),pa=0):(pa=1,ga(kt))}function It(){for(var t=Date.now(),e=ca;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ut(){for(var t,e=ca,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ca=e.n;return fa=t,n}function jt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function zt(t,e){var n=Math.pow(10,3*Ts(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Yt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],s=0,a=r[0],u=0;i>0&&a>0&&(u+a+1>e&&(a=Math.max(1,e-u)),o.push(t.substring(i-=a,i+a)),!((u+=a+1)>e));)a=r[s=(s+1)%r.length];return o.reverse().join(n)}:M;return function(t){var n=ya.exec(t),r=n[1]||" ",s=n[2]||">",a=n[3]||"-",u=n[4]||"",h=n[5],l=+n[6],c=n[7],f=n[8],p=n[9],d=1,g="",v="",y=!1,m=!0;switch(f&&(f=+f.substring(1)),(h||"0"===r&&"="===s)&&(h=r="0",s="="),p){case"n":c=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(g="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,f=0;break;case"s":d=-1,p="r"}"$"===u&&(g=i[0],v=i[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=ma.get(p)||Xt;var x=h&&c;return function(t){var n=v;if(y&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===a?"":a;if(0>d){var u=ps.formatPrefix(t,f);t=u.scale(t),n=u.symbol+v}else t*=d;t=p(t,f);var _,b,E=t.lastIndexOf(".");if(0>E){var M=m?t.lastIndexOf("e"):-1;0>M?(_=t,b=""):(_=t.substring(0,M),b=t.substring(M))}else _=t.substring(0,E),b=e+t.substring(E+1);!h&&c&&(_=o(_,1/0));var w=g.length+_.length+b.length+(x?0:i.length),T=l>w?new Array(w=l-w+1).join(r):"";return x&&(_=o(T+_,T.length?l-b.length:1/0)),i+=g,t=_+b,("<"===s?i+t+T:">"===s?T+i+t:"^"===s?T.substring(0,w>>=1)+i+t+T.substring(w):i+(x?t:T+t))+n}}}function Xt(t){return t+""}function Ht(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function qt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new _a(n-1)),1),n}function o(t,n){return e(t=new _a(+t),n),t}function s(t,r,o){var s=i(t),a=[];if(o>1)for(;r>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;r>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{_a=Ht;var r=new Ht;return r._=t,s(r,e,n)}finally{_a=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=s;var u=t.utc=Gt(t);return u.floor=u,u.round=Gt(r),u.ceil=Gt(i),u.offset=Gt(o),u.range=a,t}function Gt(t){return function(e,n){try{_a=Ht;var r=new Ht;return r._=e,t(r,n)._}finally{_a=Date}}}function Wt(t){function e(t){function e(e){for(var n,i,o,s=[],a=-1,u=0;++a<r;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(i=Ea[n=t.charAt(++a)])&&(n=t.charAt(++a)),(o=R[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),s.push(n),u=a+1);return s.push(t.slice(u,a)),s.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&_a!==Ht,s=new(o?Ht:_a);return"j"in r?s.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),s.setFullYear(r.y,0,1),s.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(s.getDay()+5)%7:r.w+7*r.U-(s.getDay()+6)%7)):s.setFullYear(r.y,r.m,r.d),s.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?s._:s},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,s,a=0,u=e.length,h=n.length;u>a;){if(r>=h)return-1;if(i=e.charCodeAt(a++),37===i){if(s=e.charAt(a++),o=O[s in Ea?e.charAt(a++):s],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){E.lastIndex=0;var r=E.exec(e.slice(n));return r?(t.w=M.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=b.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){S.lastIndex=0;var r=S.exec(e.slice(n));return r?(t.m=A.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,n){w.lastIndex=0;var r=w.exec(e.slice(n));return r?(t.m=T.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,r){return n(t,R.c.toString(),e,r)}function u(t,e,r){return n(t,R.x.toString(),e,r)}function h(t,e,r){return n(t,R.X.toString(),e,r)}function l(t,e,n){var r=x.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var c=t.dateTime,f=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;e.utc=function(t){function n(t){try{_a=Ht;var e=new _a;return e._=t,r(e)}finally{_a=Date}}var r=e(t);return n.parse=function(t){try{_a=Ht;var e=r.parse(t);return e&&e._}finally{_a=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=pe;var x=ps.map(),_=Zt(g),b=Kt(g),E=Zt(v),M=Kt(v),w=Zt(y),T=Kt(y),S=Zt(m),A=Kt(m);d.forEach(function(t,e){x.set(t.toLowerCase(),e)});var R={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:e(c),d:function(t,e){return Vt(t.getDate(),e,2)},e:function(t,e){return Vt(t.getDate(),e,2)},H:function(t,e){return Vt(t.getHours(),e,2)},I:function(t,e){return Vt(t.getHours()%12||12,e,2)},j:function(t,e){return Vt(1+xa.dayOfYear(t),e,3)},L:function(t,e){return Vt(t.getMilliseconds(),e,3)},m:function(t,e){return Vt(t.getMonth()+1,e,2)},M:function(t,e){return Vt(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return Vt(t.getSeconds(),e,2)},U:function(t,e){return Vt(xa.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Vt(xa.mondayOfYear(t),e,2)},x:e(f),X:e(p),y:function(t,e){return Vt(t.getFullYear()%100,e,2)},Y:function(t,e){return Vt(t.getFullYear()%1e4,e,4)},Z:ce,"%":function(){return"%"}},O={a:r,A:i,b:o,B:s,c:a,d:oe,e:oe,H:ae,I:ae,j:se,L:le,m:ie,M:ue,p:l,S:he,U:Qt,w:Jt,W:$t,x:u,X:h,y:ee,Y:te,Z:ne,"%":fe};return e}function Vt(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Zt(t){return new RegExp("^(?:"+t.map(ps.requote).join("|")+")","i")}function Kt(t){for(var e=new d,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Jt(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Qt(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n));
return r?(t.U=+r[0],n+r[0].length):-1}function $t(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function te(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ee(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+2));return r?(t.y=re(+r[0]),n+r[0].length):-1}function ne(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function re(t){return t+(t>68?1900:2e3)}function ie(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function oe(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function se(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ae(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ue(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function he(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function le(t,e,n){Ma.lastIndex=0;var r=Ma.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ce(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=Ts(e)/60|0,i=Ts(e)%60;return n+Vt(r,"0",2)+Vt(i,"0",2)}function fe(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function pe(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function de(){}function ge(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function ve(t,e){t&&Ra.hasOwnProperty(t.type)&&Ra[t.type](t,e)}function ye(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function me(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ye(t[n],e,1);e.polygonEnd()}function xe(){function t(t,e){t*=Vs,e=e*Vs/2+Hs/4;var n=t-r,s=n>=0?1:-1,a=s*n,u=Math.cos(e),h=Math.sin(e),l=o*h,c=i*u+l*Math.cos(a),f=l*s*Math.sin(a);Ca.add(Math.atan2(f,c)),r=t,i=u,o=h}var e,n,r,i,o;Pa.point=function(s,a){Pa.point=t,r=(e=s)*Vs,i=Math.cos(a=(n=a)*Vs/2+Hs/4),o=Math.sin(a)},Pa.lineEnd=function(){t(e,n)}}function _e(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function be(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ee(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Me(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function we(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Te(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Se(t){return[Math.atan2(t[1],t[0]),st(t[2])]}function Ae(t,e){return Ts(t[0]-e[0])<Ys&&Ts(t[1]-e[1])<Ys}function Re(t,e){t*=Vs;var n=Math.cos(e*=Vs);Oe(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Oe(t,e,n){++Da,Fa+=(t-Fa)/Da,Na+=(e-Na)/Da,Ba+=(n-Ba)/Da}function Ce(){function t(t,i){t*=Vs;var o=Math.cos(i*=Vs),s=o*Math.cos(t),a=o*Math.sin(t),u=Math.sin(i),h=Math.atan2(Math.sqrt((h=n*u-r*a)*h+(h=r*s-e*u)*h+(h=e*a-n*s)*h),e*s+n*a+r*u);La+=h,ka+=h*(e+(e=s)),Ia+=h*(n+(n=a)),Ua+=h*(r+(r=u)),Oe(e,n,r)}var e,n,r;Xa.point=function(i,o){i*=Vs;var s=Math.cos(o*=Vs);e=s*Math.cos(i),n=s*Math.sin(i),r=Math.sin(o),Xa.point=t,Oe(e,n,r)}}function Pe(){Xa.point=Re}function De(){function t(t,e){t*=Vs;var n=Math.cos(e*=Vs),s=n*Math.cos(t),a=n*Math.sin(t),u=Math.sin(e),h=i*u-o*a,l=o*s-r*u,c=r*a-i*s,f=Math.sqrt(h*h+l*l+c*c),p=r*s+i*a+o*u,d=f&&-ot(p)/f,g=Math.atan2(f,p);ja+=d*h,za+=d*l,Ya+=d*c,La+=g,ka+=g*(r+(r=s)),Ia+=g*(i+(i=a)),Ua+=g*(o+(o=u)),Oe(r,i,o)}var e,n,r,i,o;Xa.point=function(s,a){e=s,n=a,Xa.point=t,s*=Vs;var u=Math.cos(a*=Vs);r=u*Math.cos(s),i=u*Math.sin(s),o=Math.sin(a),Oe(r,i,o)},Xa.lineEnd=function(){t(e,n),Xa.lineEnd=Pe,Xa.point=Re}}function Le(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Fe(){return!0}function Ne(t,e,n,r,i){var o=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Ae(n,r)){i.lineStart();for(var a=0;e>a;++a)i.point((n=t[a])[0],n[1]);return void i.lineEnd()}var u=new ke(n,t,null,!0),h=new ke(n,null,u,!1);u.o=h,o.push(u),s.push(h),u=new ke(r,t,null,!1),h=new ke(r,null,u,!0),u.o=h,o.push(u),s.push(h)}}),s.sort(e),Be(o),Be(s),o.length){for(var a=0,u=n,h=s.length;h>a;++a)s[a].e=u=!u;for(var l,c,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var a=0,h=l.length;h>a;++a)i.point((c=l[a])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Be(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ke(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ie(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);v.point(n[0],n[1])}function u(){m.point=a,v.lineStart()}function h(){m.point=s,v.lineEnd()}function l(t,e){g.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function c(){_.lineStart(),g=[]}function f(){l(g[0][0],g[0][1]),_.lineEnd();var t,e=_.clean(),n=x.buffer(),r=n.length;if(g.pop(),d.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,s=-1;if(r>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++s<r;)o.point((i=t[s])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Ue))}var p,d,g,v=e(o),y=i.invert(r[0],r[1]),m={point:s,lineStart:u,lineEnd:h,polygonStart:function(){m.point=l,m.lineStart=c,m.lineEnd=f,p=[],d=[]},polygonEnd:function(){m.point=s,m.lineStart=u,m.lineEnd=h,p=ps.merge(p);var t=qe(y,d);p.length?(b||(o.polygonStart(),b=!0),Ne(p,ze,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=je(),_=e(x),b=!1;return m}}function Ue(t){return t.length>1}function je(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:S,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ze(t,e){return((t=t.x)[0]<0?t[1]-Ws-Ys:Ws-t[1])-((e=e.x)[0]<0?e[1]-Ws-Ys:Ws-e[1])}function Ye(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Hs:-Hs,u=Ts(o-n);Ts(u-Hs)<Ys?(t.point(n,r=(r+s)/2>0?Ws:-Ws),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Hs&&(Ts(n-i)<Ys&&(n-=i*Ys),Ts(o-a)<Ys&&(o-=a*Ys),r=Xe(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Xe(t,e,n,r){var i,o,s=Math.sin(t-n);return Ts(s)>Ys?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*s)):(e+r)/2}function He(t,e,n,r){var i;if(null==t)i=n*Ws,r.point(-Hs,i),r.point(0,i),r.point(Hs,i),r.point(Hs,0),r.point(Hs,-i),r.point(0,-i),r.point(-Hs,-i),r.point(-Hs,0),r.point(-Hs,i);else if(Ts(t[0]-e[0])>Ys){var o=t[0]<e[0]?Hs:-Hs;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function qe(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,s=0;Ca.reset();for(var a=0,u=e.length;u>a;++a){var h=e[a],l=h.length;if(l)for(var c=h[0],f=c[0],p=c[1]/2+Hs/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===l&&(v=0),t=h[v];var y=t[0],m=t[1]/2+Hs/4,x=Math.sin(m),_=Math.cos(m),b=y-f,E=b>=0?1:-1,M=E*b,w=M>Hs,T=d*x;if(Ca.add(Math.atan2(T*E*Math.sin(M),g*_+T*Math.cos(M))),o+=w?b+E*qs:b,w^f>=n^y>=n){var S=Ee(_e(c),_e(t));Te(S);var A=Ee(i,S);Te(A);var R=(w^b>=0?-1:1)*st(A[2]);(r>R||r===R&&(S[0]||S[1]))&&(s+=w^b>=0?1:-1)}if(!v++)break;f=y,d=x,g=_,c=t}}return(-Ys>o||Ys>o&&0>Ca)^1&s}function Ge(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,h,l;return{lineStart:function(){h=u=!1,l=1},point:function(c,f){var p,d=[c,f],g=e(c,f),v=s?g?0:i(c,f):g?i(c+(0>c?Hs:-Hs),f):0;if(!n&&(h=u=g)&&t.lineStart(),g!==u&&(p=r(n,d),(Ae(n,p)||Ae(d,p))&&(d[0]+=Ys,d[1]+=Ys,g=e(d[0],d[1]))),g!==u)l=0,g?(t.lineStart(),p=r(d,n),t.point(p[0],p[1])):(p=r(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(a&&n&&s^g){var y;v&o||!(y=r(d,n,!0))||(l=0,s?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||n&&Ae(n,d)||t.point(d[0],d[1]),n=d,u=g,o=v},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return l|(h&&u)<<1}}}function r(t,e,n){var r=_e(t),i=_e(e),s=[1,0,0],a=Ee(r,i),u=be(a,a),h=a[0],l=u-h*h;if(!l)return!n&&t;var c=o*u/l,f=-o*h/l,p=Ee(s,a),d=we(s,c),g=we(a,f);Me(d,g);var v=p,y=be(d,v),m=be(v,v),x=y*y-m*(be(d,d)-1);if(!(0>x)){var _=Math.sqrt(x),b=we(v,(-y-_)/m);if(Me(b,d),b=Se(b),!n)return b;var E,M=t[0],w=e[0],T=t[1],S=e[1];M>w&&(E=M,M=w,w=E);var A=w-M,R=Ts(A-Hs)<Ys,O=R||Ys>A;if(!R&&T>S&&(E=T,T=S,S=E),O?R?T+S>0^b[1]<(Ts(b[0]-M)<Ys?T:S):T<=b[1]&&b[1]<=S:A>Hs^(M<=b[0]&&b[0]<=w)){var C=we(v,(-y+_)/m);return Me(C,d),[b,Se(C)]}}}function i(e,n){var r=s?t:Hs-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),s=o>0,a=Ts(o)>Ys,u=_n(t,6*Vs);return Ie(e,n,u,s?[0,-t]:[-Hs,t-Hs])}function We(t,e,n,r){return function(i){var o,s=i.a,a=i.b,u=s.x,h=s.y,l=a.x,c=a.y,f=0,p=1,d=l-u,g=c-h;if(o=t-u,d||!(o>0)){if(o/=d,0>d){if(f>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=n-u,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>f&&(f=o)}else if(d>0){if(f>o)return;p>o&&(p=o)}if(o=e-h,g||!(o>0)){if(o/=g,0>g){if(f>o)return;p>o&&(p=o)}else if(g>0){if(o>p)return;o>f&&(f=o)}if(o=r-h,g||!(0>o)){if(o/=g,0>g){if(o>p)return;o>f&&(f=o)}else if(g>0){if(f>o)return;p>o&&(p=o)}return f>0&&(i.a={x:u+f*d,y:h+f*g}),1>p&&(i.b={x:u+p*d,y:h+p*g}),i}}}}}}function Ve(t,e,n,r){function i(r,i){return Ts(r[0]-t)<Ys?i>0?0:3:Ts(r[0]-n)<Ys?i>0?2:1:Ts(r[1]-e)<Ys?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t){for(var e=0,n=v.length,r=t[1],i=0;n>i;++i)for(var o,s=1,a=v[i],u=a.length,h=a[0];u>s;++s)o=a[s],h[1]<=r?o[1]>r&&it(h,o,t)>0&&++e:o[1]<=r&&it(h,o,t)<0&&--e,h=o;return 0!==e}function h(o,a,u,h){var l=0,c=0;if(null==o||(l=i(o,u))!==(c=i(a,u))||s(o,a)<0^u>0){do h.point(0===l||3===l?t:n,l>1?r:e);while((l=(l+u+4)%4)!==c)}else h.point(a[0],a[1])}function l(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function c(t,e){l(t,e)&&a.point(t,e)}function f(){O.point=d,v&&v.push(y=[]),w=!0,M=!1,b=E=NaN}function p(){g&&(d(m,x),_&&M&&A.rejoin(),g.push(A.buffer())),O.point=c,M&&a.lineEnd()}function d(t,e){t=Math.max(-qa,Math.min(qa,t)),e=Math.max(-qa,Math.min(qa,e));var n=l(t,e);if(v&&y.push([t,e]),w)m=t,x=e,_=n,w=!1,n&&(a.lineStart(),a.point(t,e));else if(n&&M)a.point(t,e);else{var r={a:{x:b,y:E},b:{x:t,y:e}};R(r)?(M||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),T=!1):n&&(a.lineStart(),a.point(t,e),T=!1)}b=t,E=e,M=n}var g,v,y,m,x,_,b,E,M,w,T,S=a,A=je(),R=We(t,e,n,r),O={point:c,lineStart:f,lineEnd:p,polygonStart:function(){a=A,g=[],v=[],T=!0},polygonEnd:function(){a=S,g=ps.merge(g);var e=u([t,r]),n=T&&e,i=g.length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),h(null,null,1,a),a.lineEnd()),i&&Ne(g,o,e,h,a),a.polygonEnd()),g=v=y=null}};return O}}function Ze(t){var e=0,n=Hs/3,r=fn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Hs/180,n=t[1]*Hs/180):[e/Hs*180,n/Hs*180]},i}function Ke(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),s-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),s=Math.sqrt(o)/i;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/i,st((o-(t*t+n*n)*i*i)/(2*i))]},n}function Je(){function t(t,e){Wa+=i*t-r*e,r=t,i=e}var e,n,r,i;Qa.point=function(o,s){Qa.point=t,e=r=o,n=i=s},Qa.lineEnd=function(){t(e,n)}}function Qe(t,e){Va>t&&(Va=t),t>Ka&&(Ka=t),Za>e&&(Za=e),e>Ja&&(Ja=e)}function $e(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function r(){a.point=t}function i(){s.push("Z")}var o=tn(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=t},pointRadius:function(t){return o=tn(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function tn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function en(t,e){Fa+=t,Na+=e,++Ba}function nn(){function t(t,r){var i=t-e,o=r-n,s=Math.sqrt(i*i+o*o);ka+=s*(e+t)/2,Ia+=s*(n+r)/2,Ua+=s,en(e=t,n=r)}var e,n;tu.point=function(r,i){tu.point=t,en(e=r,n=i)}}function rn(){tu.point=en}function on(){function t(t,e){var n=t-r,o=e-i,s=Math.sqrt(n*n+o*o);ka+=s*(r+t)/2,Ia+=s*(i+e)/2,Ua+=s,s=i*t-r*e,ja+=s*(r+t),za+=s*(i+e),Ya+=3*s,en(r=t,i=e)}var e,n,r,i;tu.point=function(o,s){tu.point=t,en(e=r=o,n=i=s)},tu.lineEnd=function(){t(e,n)}}function sn(t){function e(e,n){t.moveTo(e+s,n),t.arc(e,n,s,0,qs)}function n(e,n){t.moveTo(e,n),a.point=r}function r(e,n){t.lineTo(e,n)}function i(){a.point=e}function o(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:i,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=i,a.point=e},pointRadius:function(t){return s=t,a},result:S};return a}function an(t){function e(t){return(a?r:n)(t)}function n(e){return ln(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=NaN,w.point=o,e.lineStart()}function o(n,r){var o=_e([n,r]),s=t(n,r);i(x,_,m,b,E,M,x=s[0],_=s[1],m=n,b=o[0],E=o[1],M=o[2],a,e),e.point(x,_)}function s(){w.point=n,e.lineEnd()}function u(){r(),w.point=h,w.lineEnd=l}function h(t,e){o(c=t,f=e),p=x,d=_,g=b,v=E,y=M,w.point=o}function l(){i(x,_,m,b,E,M,p,d,c,g,v,y,a,e),w.lineEnd=s,s()}var c,f,p,d,g,v,y,m,x,_,b,E,M,w={point:n,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),w.lineStart=u},polygonEnd:function(){e.polygonEnd(),w.lineStart=r}};return w}function i(e,n,r,a,u,h,l,c,f,p,d,g,v,y){var m=l-e,x=c-n,_=m*m+x*x;if(_>4*o&&v--){var b=a+p,E=u+d,M=h+g,w=Math.sqrt(b*b+E*E+M*M),T=Math.asin(M/=w),S=Ts(Ts(M)-1)<Ys||Ts(r-f)<Ys?(r+f)/2:Math.atan2(E,b),A=t(S,T),R=A[0],O=A[1],C=R-e,P=O-n,D=x*C-m*P;(D*D/_>o||Ts((m*C+x*P)/_-.5)>.3||s>a*p+u*d+h*g)&&(i(e,n,r,a,u,h,R,O,S,b/=w,E/=w,M,v,y),y.point(R,O),i(R,O,S,b,E,M,l,c,f,p,d,g,v,y))}}var o=.5,s=Math.cos(30*Vs),a=16;return e.precision=function(t){return arguments.length?(a=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function un(t){var e=an(function(e,n){return t([e*Zs,n*Zs])});return function(t){return pn(e(t))}}function hn(t){this.stream=t}function ln(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function cn(t){return fn(function(){return t})()}function fn(t){function e(t){return t=a(t[0]*Vs,t[1]*Vs),[t[0]*f+u,h-t[1]*f]}function n(t){return t=a.invert((t[0]-u)/f,(h-t[1])/f),t&&[t[0]*Zs,t[1]*Zs]}function r(){a=Le(s=vn(y,m,x),o);var t=o(g,v);return u=p-t[0]*f,h=d+t[1]*f,i()}function i(){return l&&(l.valid=!1,l=null),e}var o,s,a,u,h,l,c=an(function(t,e){return t=o(t,e),[t[0]*f+u,h-t[1]*f]}),f=150,p=480,d=250,g=0,v=0,y=0,m=0,x=0,_=Ha,b=M,E=null,w=null;return e.stream=function(t){return l&&(l.valid=!1),l=pn(_(s,c(b(t)))),l.valid=!0,l},e.clipAngle=function(t){return arguments.length?(_=null==t?(E=t,Ha):Ge((E=+t)*Vs),i()):E},e.clipExtent=function(t){return arguments.length?(w=t,b=t?Ve(t[0][0],t[0][1],t[1][0],t[1][1]):M,i()):w},e.scale=function(t){return arguments.length?(f=+t,r()):f},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},e.center=function(t){return arguments.length?(g=t[0]%360*Vs,v=t[1]%360*Vs,r()):[g*Zs,v*Zs]},e.rotate=function(t){return arguments.length?(y=t[0]%360*Vs,m=t[1]%360*Vs,x=t.length>2?t[2]%360*Vs:0,r()):[y*Zs,m*Zs,x*Zs]},ps.rebind(e,c,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function pn(t){return ln(t,function(e,n){t.point(e*Vs,n*Vs)})}function dn(t,e){return[t,e]}function gn(t,e){return[t>Hs?t-qs:-Hs>t?t+qs:t,e]}function vn(t,e,n){return t?e||n?Le(mn(t),xn(e,n)):mn(t):e||n?xn(e,n):gn}function yn(t){return function(e,n){return e+=t,[e>Hs?e-qs:-Hs>e?e+qs:e,n]}}function mn(t){var e=yn(t);return e.invert=yn(-t),e}function xn(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,h=Math.sin(e),l=h*r+a*i;return[Math.atan2(u*o-l*s,a*r-h*i),st(l*o+u*s)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,h=Math.sin(e),l=h*o-u*s;return[Math.atan2(u*o+h*s,a*r+l*i),st(l*r-a*i)]},n}function _n(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,s,a){var u=s*e;null!=i?(i=bn(n,i),o=bn(n,o),(s>0?o>i:i>o)&&(i+=s*qs)):(i=t+s*qs,o=t-.5*u);for(var h,l=i;s>0?l>o:o>l;l-=u)a.point((h=Se([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],h[1])}}function bn(t,e){var n=_e(e);n[0]-=t,Te(n);var r=ot(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ys)%(2*Math.PI)}function En(t,e,n){var r=ps.range(t,e-Ys,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Mn(t,e,n){var r=ps.range(t,e-Ys,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function wn(t){return t.source}function Tn(t){return t.target}function Sn(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),s=Math.cos(r),a=Math.sin(r),u=i*Math.cos(t),h=i*Math.sin(t),l=s*Math.cos(n),c=s*Math.sin(n),f=2*Math.asin(Math.sqrt(lt(r-e)+i*s*lt(n-t))),p=1/Math.sin(f),d=f?function(t){var e=Math.sin(t*=f)*p,n=Math.sin(f-t)*p,r=n*u+e*l,i=n*h+e*c,s=n*o+e*a;return[Math.atan2(i,r)*Zs,Math.atan2(s,Math.sqrt(r*r+i*i))*Zs]}:function(){return[t*Zs,e*Zs]};return d.distance=f,d}function An(){function t(t,i){var o=Math.sin(i*=Vs),s=Math.cos(i),a=Ts((t*=Vs)-e),u=Math.cos(a);eu+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=r*o-n*s*u)*a),n*o+r*s*u),e=t,n=o,r=s}var e,n,r;nu.point=function(i,o){e=i*Vs,n=Math.sin(o*=Vs),r=Math.cos(o),nu.point=t},nu.lineEnd=function(){nu.point=nu.lineEnd=S}}function Rn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),s=Math.cos(i);return[Math.atan2(t*o,r*s),Math.asin(r&&n*o/r)]},n}function On(t,e){function n(t,e){s>0?-Ws+Ys>e&&(e=-Ws+Ys):e>Ws-Ys&&(e=Ws-Ys);var n=s/Math.pow(i(e),o);return[n*Math.sin(o*t),s-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Hs/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),s=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=s-e,r=rt(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(s/r,1/o))-Ws]},n):Pn}function Cn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return Ts(i)<Ys?dn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-rt(i)*Math.sqrt(t*t+n*n)]},n)}function Pn(t,e){return[t,Math.log(Math.tan(Hs/4+e/2))]}function Dn(t){var e,n=cn(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var a=Hs*r(),u=i();o([[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function Ln(t,e){return[Math.log(Math.tan(Hs/4+e/2)),-t]}function Fn(t){return t[0]}function Nn(t){return t[1]}function Bn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&it(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function kn(t,e){return t[0]-e[0]||t[1]-e[1]}function In(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Un(t,e,n,r){var i=t[0],o=n[0],s=e[0]-i,a=r[0]-o,u=t[1],h=n[1],l=e[1]-u,c=r[1]-h,f=(a*(u-h)-c*(i-o))/(c*s-a*l);return[i+f*s,u+f*l]}function jn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function zn(){ur(this),this.edge=this.site=this.circle=null}function Yn(t){var e=du.pop()||new zn;return e.site=t,e}function Xn(t){$n(t),cu.remove(t),du.push(t),ur(t)}function Hn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,s=t.N,a=[t];Xn(t);for(var u=o;u.circle&&Ts(n-u.circle.x)<Ys&&Ts(r-u.circle.cy)<Ys;)o=u.P,a.unshift(u),Xn(u),u=o;a.unshift(u),$n(u);for(var h=s;h.circle&&Ts(n-h.circle.x)<Ys&&Ts(r-h.circle.cy)<Ys;)s=h.N,a.push(h),Xn(h),h=s;a.push(h),$n(h);var l,c=a.length;for(l=1;c>l;++l)h=a[l],u=a[l-1],or(h.edge,u.site,h.site,i);u=a[0],h=a[c-1],h.edge=rr(u.site,h.site,null,i),Qn(u),Qn(h)}function qn(t){for(var e,n,r,i,o=t.x,s=t.y,a=cu._;a;)if(r=Gn(a,s)-o,r>Ys)a=a.L;else{if(i=o-Wn(a,s),!(i>Ys)){r>-Ys?(e=a.P,n=a):i>-Ys?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}var u=Yn(t);if(cu.insert(e,u),e||n){if(e===n)return $n(e),n=Yn(e.site),cu.insert(u,n),u.edge=n.edge=rr(e.site,u.site),Qn(e),void Qn(n);if(!n)return void(u.edge=rr(e.site,u.site));$n(e),$n(n);var h=e.site,l=h.x,c=h.y,f=t.x-l,p=t.y-c,d=n.site,g=d.x-l,v=d.y-c,y=2*(f*v-p*g),m=f*f+p*p,x=g*g+v*v,_={x:(v*m-p*x)/y+l,y:(f*x-g*m)/y+c};or(n.edge,h,d,_),u.edge=rr(h,t,null,_),n.edge=rr(t,d,null,_),Qn(e),Qn(n)}}function Gn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var s=t.P;if(!s)return-(1/0);n=s.site;var a=n.x,u=n.y,h=u-e;if(!h)return a;var l=a-r,c=1/o-1/h,f=l/h;return c?(-f+Math.sqrt(f*f-2*c*(l*l/(-2*h)-u+h/2+i-o/2)))/c+r:(r+a)/2}function Wn(t,e){var n=t.N;if(n)return Gn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Vn(t){this.site=t,this.edges=[]}function Zn(t){for(var e,n,r,i,o,s,a,u,h,l,c=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],g=lu,v=g.length;v--;)if(o=g[v],o&&o.prepare())for(a=o.edges,u=a.length,s=0;u>s;)l=a[s].end(),r=l.x,i=l.y,h=a[++s%u].start(),e=h.x,n=h.y,(Ts(r-e)>Ys||Ts(i-n)>Ys)&&(a.splice(s,0,new sr(ir(o.site,l,Ts(r-c)<Ys&&d-i>Ys?{x:c,y:Ts(e-c)<Ys?n:d}:Ts(i-d)<Ys&&f-r>Ys?{x:Ts(n-d)<Ys?e:f,y:d}:Ts(r-f)<Ys&&i-p>Ys?{x:f,y:Ts(e-f)<Ys?n:p}:Ts(i-p)<Ys&&r-c>Ys?{x:Ts(n-p)<Ys?e:c,y:p}:null),o.site,null)),++u)}function Kn(t,e){return e.angle-t.angle}function Jn(){ur(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i.x,a=i.y,u=r.x-s,h=r.y-a,l=o.x-s,c=o.y-a,f=2*(u*c-h*l);if(!(f>=-Xs)){var p=u*u+h*h,d=l*l+c*c,g=(c*p-h*d)/f,v=(u*d-l*p)/f,c=v+a,y=gu.pop()||new Jn;y.arc=t,y.site=i,y.x=g+s,y.y=c+Math.sqrt(g*g+v*v),y.cy=c,t.circle=y;for(var m=null,x=pu._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}pu.insert(m,y),m||(fu=y)}}}}function $n(t){var e=t.circle;e&&(e.P||(fu=e.N),pu.remove(e),gu.push(e),ur(e),t.circle=null)}function tr(t){for(var e,n=hu,r=We(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!er(e,t)||!r(e)||Ts(e.a.x-e.b.x)<Ys&&Ts(e.a.y-e.b.y)<Ys)&&(e.a=e.b=null,n.splice(i,1))}function er(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,s=e[0][0],a=e[1][0],u=e[0][1],h=e[1][1],l=t.l,c=t.r,f=l.x,p=l.y,d=c.x,g=c.y,v=(f+d)/2,y=(p+g)/2;if(g===p){if(s>v||v>=a)return;if(f>d){if(o){if(o.y>=h)return}else o={x:v,y:u};n={x:v,y:h}}else{if(o){if(o.y<u)return}else o={x:v,y:h};n={x:v,y:u}}}else if(r=(f-d)/(g-p),i=y-r*v,-1>r||r>1)if(f>d){if(o){if(o.y>=h)return}else o={x:(u-i)/r,y:u};n={x:(h-i)/r,y:h}}else{if(o){if(o.y<u)return}else o={x:(h-i)/r,y:h};n={x:(u-i)/r,y:u}}else if(g>p){if(o){if(o.x>=a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}else{if(o){if(o.x<s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}return t.a=o,t.b=n,!0}function nr(t,e){this.l=t,this.r=e,this.a=this.b=null}function rr(t,e,n,r){var i=new nr(t,e);return hu.push(i),n&&or(i,t,e,n),r&&or(i,e,t,r),lu[t.i].edges.push(new sr(i,t,e)),lu[e.i].edges.push(new sr(i,e,t)),i}function ir(t,e,n){var r=new nr(t,null);return r.a=e,r.b=n,hu.push(r),r}function or(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function sr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ar(){this._=null}function ur(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function hr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function lr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function cr(t){for(;t.L;)t=t.L;return t}function fr(t,e){var n,r,i,o=t.sort(pr).pop();for(hu=[],lu=new Array(t.length),cu=new ar,pu=new ar;;)if(i=fu,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(lu[o.i]=new Vn(o),qn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Hn(i.arc)}e&&(tr(e),Zn(e));var s={cells:lu,edges:hu};return cu=pu=hu=lu=null,s}function pr(t,e){return e.y-t.y||e.x-t.x}function dr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function gr(t){return t.x}function vr(t){return t.y}function yr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function mr(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var s=.5*(n+i),a=.5*(r+o),u=e.nodes;u[0]&&mr(t,u[0],n,r,s,a),u[1]&&mr(t,u[1],s,r,i,a),u[2]&&mr(t,u[2],n,a,s,o),u[3]&&mr(t,u[3],s,a,i,o)}}function xr(t,e,n,r,i,o,s){var a,u=1/0;return function h(t,l,c,f,p){if(!(l>o||c>s||r>f||i>p)){if(d=t.point){var d,g=e-t.x,v=n-t.y,y=g*g+v*v;if(u>y){var m=Math.sqrt(u=y);r=e-m,i=n-m,o=e+m,s=n+m,a=d}}for(var x=t.nodes,_=.5*(l+f),b=.5*(c+p),E=e>=_,M=n>=b,w=M<<1|E,T=w+4;T>w;++w)if(t=x[3&w])switch(3&w){case 0:h(t,l,c,_,b);break;case 1:h(t,_,c,f,b);break;case 2:h(t,l,b,_,p);break;case 3:h(t,_,b,f,p)}}}(t,r,i,o,s),a}function _r(t,e){t=ps.rgb(t),e=ps.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,s=e.g-r,a=e.b-i;return function(t){return"#"+Tt(Math.round(n+o*t))+Tt(Math.round(r+s*t))+Tt(Math.round(i+a*t))}}function br(t,e){var n,r={},i={};for(n in t)n in e?r[n]=wr(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Er(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Mr(t,e){var n,r,i,o=yu.lastIndex=mu.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=yu.exec(t))&&(r=mu.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:Er(n,r)})),o=mu.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;e>r;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function wr(t,e){for(var n,r=ps.interpolators.length;--r>=0&&!(n=ps.interpolators[r](t,e)););return n}function Tr(t,e){var n,r=[],i=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)r.push(wr(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;s>n;++n)i[n]=e[n];return function(t){for(n=0;a>n;++n)i[n]=r[n](t);return i}}function Sr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Ar(t){return function(e){return 1-t(1-e)}}function Rr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Or(t){return t*t}function Cr(t){return t*t*t}function Pr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Dr(t){return function(e){return Math.pow(e,t)}}function Lr(t){return 1-Math.cos(t*Ws)}function Fr(t){return Math.pow(2,10*(t-1))}function Nr(t){return 1-Math.sqrt(1-t*t)}function Br(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/qs*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*qs/e)}}function kr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Ir(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ur(t,e){t=ps.hcl(t),e=ps.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,s=e.c-r,a=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return gt(n+o*t,r+s*t,i+a*t)+""}}function jr(t,e){t=ps.hsl(t),e=ps.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,s=e.s-r,a=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return pt(n+o*t,r+s*t,i+a*t)+""}}function zr(t,e){t=ps.lab(t),e=ps.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,s=e.a-r,a=e.b-i;return function(t){return yt(n+o*t,r+s*t,i+a*t)+""}}function Yr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Xr(t){var e=[t.a,t.b],n=[t.c,t.d],r=qr(e),i=Hr(e,n),o=qr(Gr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Zs,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Zs:0}function Hr(t,e){return t[0]*e[0]+t[1]*e[1]}function qr(t){var e=Math.sqrt(Hr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Gr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Wr(t){return t.length?t.pop()+",":""}function Vr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Er(t[0],e[0])},{i:i-2,x:Er(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Zr(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Wr(n)+"rotate(",null,")")-2,x:Er(t,e)})):e&&n.push(Wr(n)+"rotate("+e+")")}function Kr(t,e,n,r){t!==e?r.push({i:n.push(Wr(n)+"skewX(",null,")")-2,x:Er(t,e)}):e&&n.push(Wr(n)+"skewX("+e+")")}function Jr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Wr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Er(t[0],e[0])},{i:i-2,x:Er(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Wr(n)+"scale("+e+")")}function Qr(t,e){var n=[],r=[];return t=ps.transform(t),e=ps.transform(e),Vr(t.translate,e.translate,n,r),Zr(t.rotate,e.rotate,n,r),Kr(t.skew,e.skew,n,r),Jr(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function $r(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function ti(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ei(t){for(var e=t.source,n=t.target,r=ri(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function ni(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ri(t,e){if(t===e)return t;for(var n=ni(t),r=ni(e),i=n.pop(),o=r.pop(),s=null;i===o;)s=i,i=n.pop(),o=r.pop();return s}function ii(t){t.fixed|=2}function oi(t){t.fixed&=-7}function si(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ai(t){t.fixed&=-5}function ui(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,u=-1;++u<a;)o=s[u],null!=o&&(ui(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*n[t.point.index];t.charge+=t.pointCharge=h,r+=h*t.point.x,i+=h*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function hi(t,e){return ps.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=gi,t}function li(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ci(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,s=-1;++s<i;)n.push(o[s]);for(;null!=(t=r.pop());)e(t)}function fi(t){return t.children}function pi(t){return t.value}function di(t,e){return e.value-t.value}function gi(t){return ps.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function vi(t){return t.x}function yi(t){return t.y}function mi(t,e,n){t.y0=e,t.y=n}function xi(t){return ps.range(t.length)}function _i(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function bi(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Ei(t){return t.reduce(Mi,0)}function Mi(t,e){return t+e[1];
}function wi(t,e){return Ti(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ti(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Si(t){return[ps.min(t),ps.max(t)]}function Ai(t,e){return t.value-e.value}function Ri(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Oi(t,e){t._pack_next=e,e._pack_prev=t}function Ci(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Pi(t){function e(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(h=n.length)){var n,r,i,o,s,a,u,h,l=1/0,c=-(1/0),f=1/0,p=-(1/0);if(n.forEach(Di),r=n[0],r.x=-r.r,r.y=0,e(r),h>1&&(i=n[1],i.x=i.r,i.y=0,e(i),h>2))for(o=n[2],Ni(r,i,o),e(o),Ri(r,o),r._pack_prev=o,Ri(o,i),i=r._pack_next,s=3;h>s;s++){Ni(r,i,o=n[s]);var d=0,g=1,v=1;for(a=i._pack_next;a!==i;a=a._pack_next,g++)if(Ci(a,o)){d=1;break}if(1==d)for(u=r._pack_prev;u!==a._pack_prev&&!Ci(u,o);u=u._pack_prev,v++);d?(v>g||g==v&&i.r<r.r?Oi(r,i=a):Oi(r=u,i),s--):(Ri(r,o),i=o,e(o))}var y=(l+c)/2,m=(f+p)/2,x=0;for(s=0;h>s;s++)o=n[s],o.x-=y,o.y-=m,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,n.forEach(Li)}}function Di(t){t._pack_next=t._pack_prev=t}function Li(t){delete t._pack_next,delete t._pack_prev}function Fi(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,s=i.length;++o<s;)Fi(i[o],e,n,r)}function Ni(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var s=e.r+n.r,a=i*i+o*o;s*=s,r*=r;var u=.5+(r-s)/(2*a),h=Math.sqrt(Math.max(0,2*s*(r+a)-(r-=a)*r-s*s))/(2*a);n.x=t.x+u*i+h*o,n.y=t.y+u*o-h*i}else n.x=t.x+r,n.y=t.y}function Bi(t,e){return t.parent==e.parent?1:2}function ki(t){var e=t.children;return e.length?e[0]:t.t}function Ii(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ui(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ji(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function zi(t,e,n){return t.a.parent===e.parent?t.a:n}function Yi(t){return 1+ps.max(t,function(t){return t.y})}function Xi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Hi(t){var e=t.children;return e&&e.length?Hi(e[0]):t}function qi(t){var e,n=t.children;return n&&(e=n.length)?qi(n[e-1]):t}function Gi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Wi(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Vi(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Zi(t){return t.rangeExtent?t.rangeExtent():Vi(t.range())}function Ki(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Ji(t,e){var n,r=0,i=t.length-1,o=t[r],s=t[i];return o>s&&(n=r,r=i,i=n,n=o,o=s,s=n),t[r]=e.floor(o),t[i]=e.ceil(s),t}function Qi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Ou}function $i(t,e,n,r){var i=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)i.push(n(t[s-1],t[s])),o.push(r(e[s-1],e[s]));return function(e){var n=ps.bisect(t,e,1,a)-1;return o[n](i[n](e))}}function to(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?$i:Ki,u=r?ti:$r;return s=i(t,e,u,n),a=i(e,t,u,wr),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(Yr)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return io(t,e)},o.tickFormat=function(e,n){return oo(t,e,n)},o.nice=function(e){return no(t,e),i()},o.copy=function(){return to(t,e,n,r)},i()}function eo(t,e){return ps.rebind(t,e,"range","rangeRound","interpolate","clamp")}function no(t,e){return Ji(t,Qi(ro(t,e)[2])),Ji(t,Qi(ro(t,e)[2])),t}function ro(t,e){null==e&&(e=10);var n=Vi(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function io(t,e){return ps.range.apply(ps,ro(t,e))}function oo(t,e,n){var r=ro(t,e);if(n){var i=ya.exec(n);if(i.shift(),"s"===i[8]){var o=ps.formatPrefix(Math.max(Ts(r[0]),Ts(r[1])));return i[7]||(i[7]="."+so(o.scale(r[2]))),i[8]="f",n=ps.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+ao(i[8],r)),n=i.join("")}else n=",."+so(r[2])+"f";return ps.format(n)}function so(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ao(t,e){var n=so(e[2]);return t in Cu?Math.abs(n-so(Math.max(Ts(e[0]),Ts(e[1]))))+ +("e"!==t):n-2*("%"===t)}function uo(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(i(e))}return s.invert=function(e){return o(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),s):r},s.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),s):e},s.nice=function(){var e=Ji(r.map(i),n?Math:Du);return t.domain(e),r=e.map(o),s},s.ticks=function(){var t=Vi(r),s=[],a=t[0],u=t[1],h=Math.floor(i(a)),l=Math.ceil(i(u)),c=e%1?2:e;if(isFinite(l-h)){if(n){for(;l>h;h++)for(var f=1;c>f;f++)s.push(o(h)*f);s.push(o(h))}else for(s.push(o(h));h++<l;)for(var f=c-1;f>0;f--)s.push(o(h)*f);for(h=0;s[h]<a;h++);for(l=s.length;s[l-1]>u;l--);s=s.slice(h,l)}return s},s.tickFormat=function(t,n){if(!arguments.length)return Pu;arguments.length<2?n=Pu:"function"!=typeof n&&(n=ps.format(n));var r=Math.max(1,e*t/s.ticks().length);return function(t){var s=t/o(Math.round(i(t)));return e-.5>s*e&&(s*=e),r>=s?n(t):""}},s.copy=function(){return uo(t.copy(),e,n,r)},eo(s,t)}function ho(t,e,n){function r(e){return t(i(e))}var i=lo(e),o=lo(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return io(n,t)},r.tickFormat=function(t,e){return oo(n,t,e)},r.nice=function(t){return r.domain(no(n,t))},r.exponent=function(s){return arguments.length?(i=lo(e=s),o=lo(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return ho(t.copy(),e,n)},eo(r,t)}function lo(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function co(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return ps.range(t.length).map(function(t){return e+n*t})}var i,o,s;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new d;for(var o,s=-1,a=r.length;++s<a;)i.has(o=r[s])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,s=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,a){arguments.length<2&&(a=0);var u=i[0],h=i[1],l=t.length<2?(u=(u+h)/2,0):(h-u)/(t.length-1+a);return o=r(u+l*a/2,l),s=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,a){arguments.length<2&&(a=0);var u=i[0],h=i[1],l=t.length<2?(u=h=Math.round((u+h)/2),0):(h-u)/(t.length-1+a)|0;return o=r(u+Math.round(l*a/2+(h-u-(t.length-1+a)*l)/2),l),s=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var h=i[1]<i[0],l=i[h-0],c=i[1-h],f=(c-l)/(t.length-a+2*u);return o=r(l+f*u,f),h&&o.reverse(),s=f*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var h=i[1]<i[0],l=i[h-0],c=i[1-h],f=Math.floor((c-l)/(t.length-a+2*u));return o=r(l+Math.round((c-l-(t.length-a)*f)/2),f),h&&o.reverse(),s=Math.round(f*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Vi(e.a[0])},n.copy=function(){return co(t,e)},n.domain(t)}function fo(t,e){function n(){var n=0,o=e.length;for(i=[];++n<o;)i[n-1]=ps.quantile(t,n/o);return r}function r(t){return isNaN(t=+t)?void 0:e[ps.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.map(u).filter(h).sort(a),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},r.copy=function(){return fo(t,e)},n()}function po(t,e,n){function r(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),s=n.length-1,r}var o,s;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return po(t,e,n)},i()}function go(t,e){function n(n){return n>=n?e[ps.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return go(t,e)},n}function vo(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return io(t,e)},e.tickFormat=function(e,n){return oo(t,e,n)},e.copy=function(){return vo(t)},e}function yo(){return 0}function mo(t){return t.innerRadius}function xo(t){return t.outerRadius}function _o(t){return t.startAngle}function bo(t){return t.endAngle}function Eo(t){return t&&t.padAngle}function Mo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function wo(t,e,n,r,i){var o=t[0]-e[0],s=t[1]-e[1],a=(i?r:-r)/Math.sqrt(o*o+s*s),u=a*s,h=-a*o,l=t[0]+u,c=t[1]+h,f=e[0]+u,p=e[1]+h,d=(l+f)/2,g=(c+p)/2,v=f-l,y=p-c,m=v*v+y*y,x=n-r,_=l*p-f*c,b=(0>y?-1:1)*Math.sqrt(Math.max(0,x*x*m-_*_)),E=(_*y-v*b)/m,M=(-_*v-y*b)/m,w=(_*y+v*b)/m,T=(-_*v+y*b)/m,S=E-d,A=M-g,R=w-d,O=T-g;return S*S+A*A>R*R+O*O&&(E=w,M=T),[[E-u,M-h],[E*n/x,M*n/x]]}function To(t){function e(e){function s(){h.push("M",o(t(l),a))}for(var u,h=[],l=[],c=-1,f=e.length,p=Pt(n),d=Pt(r);++c<f;)i.call(this,u=e[c],c)?l.push([+p.call(this,u,c),+d.call(this,u,c)]):l.length&&(s(),l=[]);return l.length&&s(),h.length?h.join(""):null}var n=Fn,r=Nn,i=Fe,o=So,s=o.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Iu.get(t)||So).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function So(t){return t.length>1?t.join("L"):t+"Z"}function Ao(t){return t.join("L")+"Z"}function Ro(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Oo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Co(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Po(t,e){return t.length<4?So(t):t[1]+Fo(t.slice(1,-1),No(t,e))}function Do(t,e){return t.length<3?Ao(t):t[0]+Fo((t.push(t[0]),t),No([t[t.length-2]].concat(t,[t[1]]),e))}function Lo(t,e){return t.length<3?So(t):t[0]+Fo(t,No(t,e))}function Fo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return So(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],s=e[0],a=s,u=1;if(n&&(r+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){a=e[1],o=t[u],u++,r+="C"+(i[0]+s[0])+","+(i[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var h=2;h<e.length;h++,u++)o=t[u],a=e[h],r+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var l=t[u];r+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+l[0]+","+l[1]}return r}function No(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],s=t[1],a=1,u=t.length;++a<u;)n=o,o=s,s=t[a],r.push([i*(s[0]-n[0]),i*(s[1]-n[1])]);return r}function Bo(t){if(t.length<3)return So(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],s=[i,i,i,(r=t[1])[0]],a=[o,o,o,r[1]],u=[i,",",o,"L",jo(zu,s),",",jo(zu,a)];for(t.push(t[n-1]);++e<=n;)r=t[e],s.shift(),s.push(r[0]),a.shift(),a.push(r[1]),zo(u,s,a);return t.pop(),u.push("L",r),u.join("")}function ko(t){if(t.length<4)return So(t);for(var e,n=[],r=-1,i=t.length,o=[0],s=[0];++r<3;)e=t[r],o.push(e[0]),s.push(e[1]);for(n.push(jo(zu,o)+","+jo(zu,s)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),zo(n,o,s);return n.join("")}function Io(t){for(var e,n,r=-1,i=t.length,o=i+4,s=[],a=[];++r<4;)n=t[r%i],s.push(n[0]),a.push(n[1]);for(e=[jo(zu,s),",",jo(zu,a)],--r;++r<o;)n=t[r%i],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),zo(e,s,a);return e.join("")}function Uo(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],s=t[0][1],a=t[n][0]-o,u=t[n][1]-s,h=-1;++h<=n;)r=t[h],i=h/n,r[0]=e*r[0]+(1-e)*(o+i*a),r[1]=e*r[1]+(1-e)*(s+i*u);return Bo(t)}function jo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function zo(t,e,n){t.push("C",jo(Uu,e),",",jo(Uu,n),",",jo(ju,e),",",jo(ju,n),",",jo(zu,e),",",jo(zu,n))}function Yo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Xo(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],s=r[0]=Yo(i,o);++e<n;)r[e]=(s+(s=Yo(i=o,o=t[e+1])))/2;return r[e]=s,r}function Ho(t){for(var e,n,r,i,o=[],s=Xo(t),a=-1,u=t.length-1;++a<u;)e=Yo(t[a],t[a+1]),Ts(e)<Ys?s[a]=s[a+1]=0:(n=s[a]/e,r=s[a+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),s[a]=i*n,s[a+1]=i*r));for(a=-1;++a<=u;)i=(t[Math.min(u,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([i||0,s[a]*i||0]);return o}function qo(t){return t.length<3?So(t):t[0]+Fo(t,Ho(t))}function Go(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]-Ws,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Wo(t){function e(e){function u(){g.push("M",a(t(y),c),l,h(t(v.reverse()),c),"Z")}for(var f,p,d,g=[],v=[],y=[],m=-1,x=e.length,_=Pt(n),b=Pt(i),E=n===r?function(){return p}:Pt(r),M=i===o?function(){return d}:Pt(o);++m<x;)s.call(this,f=e[m],m)?(v.push([p=+_.call(this,f,m),d=+b.call(this,f,m)]),y.push([+E.call(this,f,m),+M.call(this,f,m)])):v.length&&(u(),v=[],y=[]);return v.length&&u(),g.length?g.join(""):null}var n=Fn,r=Fn,i=0,o=Nn,s=Fe,a=So,u=a.key,h=a,l="L",c=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?a=t:(a=Iu.get(t)||So).key,h=a.reverse||a,l=a.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(c=t,e):c},e}function Vo(t){return t.radius}function Zo(t){return[t.x,t.y]}function Ko(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Ws;return[n*Math.cos(r),n*Math.sin(r)]}}function Jo(){return 64}function Qo(){return"circle"}function $o(t){var e=Math.sqrt(t/Hs);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function ts(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function es(t,e,n){return Cs(t,Vu),t.namespace=e,t.id=n,t}function ns(t,e,n,r){var i=t.id,o=t.namespace;return V(t,"function"==typeof n?function(t,s,a){t[o][i].tween.set(e,r(n.call(t,t.__data__,s,a)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function rs(t){return null==t&&(t=""),function(){this.textContent=t}}function is(t){return null==t?"__transition__":"__transition_"+t+"__"}function os(t,e,n,r,i){function o(t){var e=g.delay;return h.t=e+u,t>=e?s(t-e):void(h.c=s)}function s(n){var i=p.active,o=p[i];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var s in p)if(r>+s){var d=p[s];d.timer.c=null,d.timer.t=NaN,--p.count,delete p[s]}h.c=a,Bt(function(){return h.c&&a(n||1)&&(h.c=null,h.t=NaN),1},0,u),p.active=r,g.event&&g.event.start.call(t,t.__data__,e),f=[],g.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&f.push(r)}),c=g.ease,l=g.duration}function a(i){for(var o=i/l,s=c(o),a=f.length;a>0;)f[--a].call(t,s);return o>=1?(g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[r]:delete t[n],1):void 0}var u,h,l,c,f,p=t[n]||(t[n]={active:0,count:0}),g=p[r];g||(u=i.time,h=Bt(o,0,u),g=p[r]={tween:new d,time:u,timer:h,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++p.count)}function ss(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function as(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function us(t){return t.toISOString()}function hs(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=ps.bisect(rh,i);return o==rh.length?[e.year,ro(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/rh[o-1]<rh[o]/i?o-1:o]:[sh,ro(t,n)[2]]}return r.invert=function(e){return ls(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(ls)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ls(+n+1),e).length}var o=r.domain(),s=Vi(o),a=null==t?i(s,10):"number"==typeof t&&i(s,t);return a&&(t=a[0],e=a[1]),r.domain(Ji(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ls(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ls(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Vi(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],ls(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return hs(t.copy(),e,n)},eo(r,t)}function ls(t){return new Date(t)}function cs(t){return JSON.parse(t.responseText)}function fs(t){var e=vs.createRange();return e.selectNode(vs.body),e.createContextualFragment(t.responseText)}var ps={version:"3.5.16"},ds=[].slice,gs=function(t){return ds.call(t)},vs=this.document;if(vs)try{gs(vs.documentElement.childNodes)[0].nodeType}catch(ys){gs=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),vs)try{vs.createElement("DIV").style.setProperty("opacity",0,"")}catch(ms){var xs=this.Element.prototype,_s=xs.setAttribute,bs=xs.setAttributeNS,Es=this.CSSStyleDeclaration.prototype,Ms=Es.setProperty;xs.setAttribute=function(t,e){_s.call(this,t,e+"")},xs.setAttributeNS=function(t,e,n){bs.call(this,t,e,n+"")},Es.setProperty=function(t,e,n){Ms.call(this,t,e+"",n)}}ps.ascending=a,ps.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},ps.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},ps.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},ps.extent=function(t,e){var n,r,i,o=-1,s=t.length;if(1===arguments.length){for(;++o<s;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<s;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<s;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<s;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ps.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)h(n=+t[o])&&(r+=n);else for(;++o<i;)h(n=+e.call(t,t[o],o))&&(r+=n);return r},ps.mean=function(t,e){var n,r=0,i=t.length,o=-1,s=i;if(1===arguments.length)for(;++o<i;)h(n=u(t[o]))?r+=n:--s;else for(;++o<i;)h(n=u(e.call(t,t[o],o)))?r+=n:--s;return s?r/s:void 0},ps.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},ps.median=function(t,e){var n,r=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)h(n=u(t[o]))&&r.push(n);else for(;++o<i;)h(n=u(e.call(t,t[o],o)))&&r.push(n);return r.length?ps.quantile(r.sort(a),.5):void 0},ps.variance=function(t,e){var n,r,i=t.length,o=0,s=0,a=-1,l=0;if(1===arguments.length)for(;++a<i;)h(n=u(t[a]))&&(r=n-o,o+=r/++l,s+=r*(n-o));else for(;++a<i;)h(n=u(e.call(t,t[a],a)))&&(r=n-o,o+=r/++l,s+=r*(n-o));return l>1?s/(l-1):void 0},ps.deviation=function(){var t=ps.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ws=l(a);ps.bisectLeft=ws.left,ps.bisect=ps.bisectRight=ws.right,ps.bisector=function(t){return l(1===t.length?function(e,n){return a(t(e),n)}:t)},ps.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},ps.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ps.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=i,i=t[++n]];return o},ps.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=ps.min(t,c),r=new Array(n);++e<n;)for(var i,o=-1,s=r[e]=new Array(i);++o<i;)s[o]=t[o][e];return r},ps.zip=function(){return ps.transpose(arguments)},ps.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ps.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ps.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ps.merge=function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--s]=r[e];return n};var Ts=Math.abs;ps.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=f(Ts(n)),s=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++s)>e;)i.push(r/o);else for(;(r=t+n*++s)<e;)i.push(r/o);return i},ps.map=function(t,e){var n=new d;if(t instanceof d)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var s in t)n.set(s,t[s]);return n};var Ss="__proto__",As="\x00";p(d,{has:y,get:function(t){return this._[g(t)]},set:function(t,e){return this._[g(t)]=e},remove:m,keys:x,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:v(e),value:this._[e]});return t},size:_,empty:b,forEach:function(t){for(var e in this._)t.call(this,v(e),this._[e])}}),ps.nest=function(){function t(e,s,a){if(a>=o.length)return r?r.call(i,s):n?s.sort(n):s;for(var u,h,l,c,f=-1,p=s.length,g=o[a++],v=new d;++f<p;)(c=v.get(u=g(h=s[f])))?c.push(h):v.set(u,[h]);return e?(h=e(),l=function(n,r){h.set(n,t(e,r,a))}):(h={},l=function(n,r){h[n]=t(e,r,a)}),v.forEach(l),h}function e(t,n){if(n>=o.length)return t;var r=[],i=s[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],s=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(ps.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return s[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},ps.set=function(t){var e=new E;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},p(E,{has:y,add:function(t){return this._[g(t+="")]=!0,t},remove:m,values:x,size:_,empty:b,forEach:function(t){for(var e in this._)t.call(this,v(e))}}),ps.behavior={},ps.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=w(t,e,e[n]);return t};var Rs=["webkit","ms","moz","Moz","o","O"];ps.dispatch=function(){for(var t=new A,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=R(t);return t},A.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ps.event=null,ps.requote=function(t){return t.replace(Os,"\\$&")};var Os=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Cs={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Ps=function(t,e){return e.querySelector(t)},Ds=function(t,e){return e.querySelectorAll(t)},Ls=function(t,e){var n=t.matches||t[T(t,"matchesSelector")];return(Ls=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Ps=function(t,e){return Sizzle(t,e)[0]||null},Ds=Sizzle,Ls=Sizzle.matchesSelector),ps.selection=function(){return ps.select(vs.documentElement)};var Fs=ps.selection.prototype=[];Fs.select=function(t){var e,n,r,i,o=[];t=L(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(r=this[s]).parentNode;for(var u=-1,h=r.length;++u<h;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,s)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return D(o)},Fs.selectAll=function(t){var e,n,r=[];t=F(t);for(var i=-1,o=this.length;++i<o;)for(var s=this[i],a=-1,u=s.length;++a<u;)(n=s[a])&&(r.push(e=gs(t.call(n,n.__data__,a,i))),e.parentNode=n);return D(r)};var Ns="http://www.w3.org/1999/xhtml",Bs={svg:"http://www.w3.org/2000/svg",xhtml:Ns,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ps.ns={prefix:Bs,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Bs.hasOwnProperty(n)?{space:Bs[n],local:t}:t}},Fs.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ps.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},Fs.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=I(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!k(t[i]).test(e))return!1;return!0}for(e in t)this.each(U(e,t[e]));return this}return this.each(U(t,e))},Fs.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(z(n,t[n],e));return this}if(2>r){var i=this.node();return s(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(z(t,e,n))},Fs.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(Y(e,t[e]));return this}return this.each(Y(t,e))},Fs.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Fs.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Fs.append=function(t){return t=X(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Fs.insert=function(t,e){return t=X(t),e=L(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Fs.remove=function(){return this.each(H)},Fs.data=function(t,e){function n(t,n){var r,i,o,s=t.length,l=n.length,c=Math.min(s,l),f=new Array(l),p=new Array(l),g=new Array(s);if(e){var v,y=new d,m=new Array(s);for(r=-1;++r<s;)(i=t[r])&&(y.has(v=e.call(i,i.__data__,r))?g[r]=i:y.set(v,i),m[r]=v);for(r=-1;++r<l;)(i=y.get(v=e.call(n,o=n[r],r)))?i!==!0&&(f[r]=i,i.__data__=o):p[r]=q(o),y.set(v,!0);for(r=-1;++r<s;)r in m&&y.get(m[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<c;)i=t[r],o=n[r],i?(i.__data__=o,f[r]=i):p[r]=q(o);for(;l>r;++r)p[r]=q(n[r]);for(;s>r;++r)g[r]=t[r]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,a.push(p),u.push(f),h.push(g)}var r,i,o=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(r=this[0]).length);++o<s;)(i=r[o])&&(t[o]=i.__data__);return t}var a=Z([]),u=D([]),h=D([]);if("function"==typeof t)for(;++o<s;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<s;)n(r=this[o],t);return u.enter=function(){return a},u.exit=function(){return h},u},Fs.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Fs.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=G(t));for(var o=0,s=this.length;s>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,u=n.length;u>a;a++)(r=n[a])&&t.call(r,r.__data__,a,o)&&e.push(r)}return D(i)},Fs.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Fs.sort=function(t){t=W.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Fs.each=function(t){return V(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Fs.call=function(t){var e=gs(arguments);return t.apply(e[0]=this,e),this},Fs.empty=function(){return!this.node()},Fs.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Fs.size=function(){var t=0;return V(this,function(){++t}),t};var ks=[];ps.selection.enter=Z,ps.selection.enter.prototype=ks,ks.append=Fs.append,ks.empty=Fs.empty,ks.node=Fs.node,ks.call=Fs.call,ks.size=Fs.size,ks.select=function(t){for(var e,n,r,i,o,s=[],a=-1,u=this.length;++a<u;){r=(i=this[a]).update,s.push(e=[]),e.parentNode=i.parentNode;for(var h=-1,l=i.length;++h<l;)(o=i[h])?(e.push(r[h]=n=t.call(i.parentNode,o.__data__,h,a)),n.__data__=o.__data__):e.push(null)}return D(s)},ks.insert=function(t,e){return arguments.length<2&&(e=K(this)),Fs.insert.call(this,t,e)},ps.select=function(t){var e;return"string"==typeof t?(e=[Ps(t,vs)],e.parentNode=vs.documentElement):(e=[t],e.parentNode=o(t)),D([e])},ps.selectAll=function(t){var e;return"string"==typeof t?(e=gs(Ds(t,vs)),e.parentNode=vs.documentElement):(e=gs(t),e.parentNode=null),D([e])},Fs.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(J(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(J(t,e,n))};var Is=ps.map({mouseenter:"mouseover",mouseleave:"mouseout"});vs&&Is.forEach(function(t){"on"+t in vs&&Is.remove(t)});var Us,js=0;ps.mouse=function(t){return et(t,C())};var zs=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ps.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=C().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return et(t,r)},ps.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(t,e,i,o,s){return function(){function a(){var t,n,r=e(f,g);r&&(t=r[0]-x[0],n=r[1]-x[1],d|=t|n,x=r,p({type:"drag",x:r[0]+h[0],y:r[1]+h[1],dx:t,dy:n}))}function u(){e(f,g)&&(y.on(o+v,null).on(s+v,null),m(d),p({type:"dragend"}))}var h,l=this,c=ps.event.target.correspondingElement||ps.event.target,f=l.parentNode,p=n.of(l,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),y=ps.select(i(c)).on(o+v,a).on(s+v,u),m=tt(c),x=e(f,g);r?(h=r.apply(l,arguments),h=[h.x-x[0],h.y-x[1]]):h=[0,0],p({type:"dragstart"})}}var n=P(t,"drag","dragstart","dragend"),r=null,i=e(S,ps.mouse,s,"mousemove","mouseup"),o=e(nt,ps.touch,M,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},ps.rebind(t,n,"on")},ps.touches=function(t,e){return arguments.length<2&&(e=C().touches),e?gs(e).map(function(e){var n=et(t,e);return n.identifier=e.identifier,n}):[]};var Ys=1e-6,Xs=Ys*Ys,Hs=Math.PI,qs=2*Hs,Gs=qs-Ys,Ws=Hs/2,Vs=Hs/180,Zs=180/Hs,Ks=Math.SQRT2,Js=2,Qs=4;ps.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],s=t[2],a=e[0],u=e[1],h=e[2],l=a-i,c=u-o,f=l*l+c*c;if(Xs>f)r=Math.log(h/s)/Ks,n=function(t){
return[i+t*l,o+t*c,s*Math.exp(Ks*t*r)]};else{var p=Math.sqrt(f),d=(h*h-s*s+Qs*f)/(2*s*Js*p),g=(h*h-s*s-Qs*f)/(2*h*Js*p),v=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/Ks,n=function(t){var e=t*r,n=ut(v),a=s/(Js*p)*(n*ht(Ks*e+v)-at(v));return[i+a*l,o+a*c,s*n/ut(Ks*e+v)]}}return n.duration=1e3*r,n},ps.behavior.zoom=function(){function t(t){t.on(C,c).on(ta+".zoom",p).on("dblclick.zoom",d).on(F,f)}function e(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function n(t){return[t[0]*w.k+w.x,t[1]*w.k+w.y]}function r(t){w.k=Math.max(S[0],Math.min(S[1],t))}function i(t,e){e=n(e),w.x+=t[0]-e[0],w.y+=t[1]-e[1]}function o(e,n,o,s){e.__chart__={x:w.x,y:w.y,k:w.k},r(Math.pow(2,s)),i(v=n,o),e=ps.select(e),A>0&&(e=e.transition().duration(A)),e.call(t.event)}function a(){b&&b.domain(_.range().map(function(t){return(t-w.x)/w.k}).map(_.invert)),M&&M.domain(E.range().map(function(t){return(t-w.y)/w.k}).map(E.invert))}function u(t){R++||t({type:"zoomstart"})}function h(t){a(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function l(t){--R||(t({type:"zoomend"}),v=null)}function c(){function t(){a=1,i(ps.mouse(r),f),h(o)}function n(){c.on(D,null).on(L,null),p(a),l(o)}var r=this,o=N.of(r,arguments),a=0,c=ps.select(s(r)).on(D,t).on(L,n),f=e(ps.mouse(r)),p=tt(r);Wu.call(r),u(o)}function f(){function t(){var t=ps.touches(d);return p=w.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=e(t))}),t}function n(){var e=ps.event.target;ps.select(e).on(_,s).on(b,a),E.push(e);for(var n=ps.event.changedTouches,r=0,i=n.length;i>r;++r)v[n[r].identifier]=null;var u=t(),h=Date.now();if(1===u.length){if(500>h-x){var l=u[0];o(d,l,v[l.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),O()}x=h}else if(u.length>1){var l=u[0],c=u[1],f=l[0]-c[0],p=l[1]-c[1];y=f*f+p*p}}function s(){var t,e,n,o,s=ps.touches(d);Wu.call(d);for(var a=0,u=s.length;u>a;++a,o=null)if(n=s[a],o=v[n.identifier]){if(e)break;t=n,e=o}if(o){var l=(l=n[0]-t[0])*l+(l=n[1]-t[1])*l,c=y&&Math.sqrt(l/y);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r(c*p)}x=null,i(t,e),h(g)}function a(){if(ps.event.touches.length){for(var e=ps.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var i in v)return void t()}ps.selectAll(E).on(m,null),M.on(C,c).on(F,f),T(),l(g)}var p,d=this,g=N.of(d,arguments),v={},y=0,m=".zoom-"+ps.event.changedTouches[0].identifier,_="touchmove"+m,b="touchend"+m,E=[],M=ps.select(d),T=tt(d);n(),u(g),M.on(C,null).on(F,n)}function p(){var t=N.of(this,arguments);m?clearTimeout(m):(Wu.call(this),g=e(v=y||ps.mouse(this)),u(t)),m=setTimeout(function(){m=null,l(t)},50),O(),r(Math.pow(2,.002*$s())*w.k),i(v,g),h(t)}function d(){var t=ps.mouse(this),n=Math.log(w.k)/Math.LN2;o(this,t,e(t),ps.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,v,y,m,x,_,b,E,M,w={x:0,y:0,k:1},T=[960,500],S=ea,A=250,R=0,C="mousedown.zoom",D="mousemove.zoom",L="mouseup.zoom",F="touchstart.zoom",N=P(t,"zoomstart","zoom","zoomend");return ta||(ta="onwheel"in vs?($s=function(){return-ps.event.deltaY*(ps.event.deltaMode?120:1)},"wheel"):"onmousewheel"in vs?($s=function(){return ps.event.wheelDelta},"mousewheel"):($s=function(){return-ps.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=N.of(this,arguments),e=w;qu?ps.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var n=T[0],r=T[1],i=v?v[0]:n/2,o=v?v[1]:r/2,s=ps.interpolateZoom([(i-w.x)/w.k,(o-w.y)/w.k,n/w.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=s(e),a=n/r[2];this.__chart__=w={x:i-r[0]*a,y:o-r[1]*a,k:a},h(t)}}).each("interrupt.zoom",function(){l(t)}).each("end.zoom",function(){l(t)}):(this.__chart__=w,u(t),h(t),l(t))})},t.translate=function(e){return arguments.length?(w={x:+e[0],y:+e[1],k:w.k},a(),t):[w.x,w.y]},t.scale=function(e){return arguments.length?(w={x:w.x,y:w.y,k:null},r(+e),a(),t):w.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?ea:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(y=e&&[+e[0],+e[1]],t):y},t.size=function(e){return arguments.length?(T=e&&[+e[0],+e[1]],t):T},t.duration=function(e){return arguments.length?(A=+e,t):A},t.x=function(e){return arguments.length?(b=e,_=e.copy(),w={x:0,y:0,k:1},t):b},t.y=function(e){return arguments.length?(M=e,E=e.copy(),w={x:0,y:0,k:1},t):M},ps.rebind(t,N,"on")};var $s,ta,ea=[0,1/0];ps.color=ct,ct.prototype.toString=function(){return this.rgb()+""},ps.hsl=ft;var na=ft.prototype=new ct;na.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,this.l/t)},na.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,t*this.l)},na.rgb=function(){return pt(this.h,this.s,this.l)},ps.hcl=dt;var ra=dt.prototype=new ct;ra.brighter=function(t){return new dt(this.h,this.c,Math.min(100,this.l+ia*(arguments.length?t:1)))},ra.darker=function(t){return new dt(this.h,this.c,Math.max(0,this.l-ia*(arguments.length?t:1)))},ra.rgb=function(){return gt(this.h,this.c,this.l).rgb()},ps.lab=vt;var ia=18,oa=.95047,sa=1,aa=1.08883,ua=vt.prototype=new ct;ua.brighter=function(t){return new vt(Math.min(100,this.l+ia*(arguments.length?t:1)),this.a,this.b)},ua.darker=function(t){return new vt(Math.max(0,this.l-ia*(arguments.length?t:1)),this.a,this.b)},ua.rgb=function(){return yt(this.l,this.a,this.b)},ps.rgb=Et;var ha=Et.prototype=new ct;ha.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new Et(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new Et(i,i,i)},ha.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Et(t*this.r,t*this.g,t*this.b)},ha.hsl=function(){return At(this.r,this.g,this.b)},ha.toString=function(){return"#"+Tt(this.r)+Tt(this.g)+Tt(this.b)};var la=ps.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});la.forEach(function(t,e){la.set(t,Mt(e))}),ps.functor=Pt,ps.xhr=Dt(M),ps.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var s=Lt(t,e,null==n?r:i(n),o);return s.row=function(t){return arguments.length?s.response(null==(n=t)?r:i(t)):n},s}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(s).join(t)}function s(t){return a.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(l>=h)return s;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<h;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}l=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++l):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;h>l;){var r=t.charCodeAt(l++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(l)&&(++l,++a);else if(r!==u)continue;return t.slice(e,l-a)}return t.slice(e)}for(var r,i,o={},s={},a=[],h=t.length,l=0,c=0;(r=n())!==s;){for(var f=[];r!==o&&r!==s;)f.push(r),r=n();e&&null==(f=e(f,c++))||a.push(f)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new E,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(s).join(t)].concat(e.map(function(e){return i.map(function(t){return s(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ps.csv=ps.dsv(",","text/csv"),ps.tsv=ps.dsv("	","text/tab-separated-values");var ca,fa,pa,da,ga=this[T(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ps.timer=function(){Bt.apply(this,arguments)},ps.timer.flush=function(){It(),Ut()},ps.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var va=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(zt);ps.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=ps.round(t,jt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),va[8+n/3]};var ya=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ma=ps.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ps.round(t,jt(t,e))).toFixed(Math.max(0,Math.min(20,jt(t*(1+1e-15),e))))}}),xa=ps.time={},_a=Date;Ht.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ba.setUTCDate.apply(this._,arguments)},setDay:function(){ba.setUTCDay.apply(this._,arguments)},setFullYear:function(){ba.setUTCFullYear.apply(this._,arguments)},setHours:function(){ba.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ba.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ba.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ba.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ba.setUTCSeconds.apply(this._,arguments)},setTime:function(){ba.setTime.apply(this._,arguments)}};var ba=Date.prototype;xa.year=qt(function(t){return t=xa.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),xa.years=xa.year.range,xa.years.utc=xa.year.utc.range,xa.day=qt(function(t){var e=new _a(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),xa.days=xa.day.range,xa.days.utc=xa.day.utc.range,xa.dayOfYear=function(t){var e=xa.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=xa[t]=qt(function(t){return(t=xa.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=xa.year(t).getDay();return Math.floor((xa.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});xa[t+"s"]=n.range,xa[t+"s"].utc=n.utc.range,xa[t+"OfYear"]=function(t){var n=xa.year(t).getDay();return Math.floor((xa.dayOfYear(t)+(n+e)%7)/7)}}),xa.week=xa.sunday,xa.weeks=xa.sunday.range,xa.weeks.utc=xa.sunday.utc.range,xa.weekOfYear=xa.sundayOfYear;var Ea={"-":"",_:" ",0:"0"},Ma=/^\s*\d+/,wa=/^%/;ps.locale=function(t){return{numberFormat:Yt(t),timeFormat:Wt(t)}};var Ta=ps.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ps.format=Ta.numberFormat,ps.geo={},de.prototype={s:0,t:0,add:function(t){ge(t,this.t,Sa),ge(Sa.s,this.s,this),this.s?this.t+=Sa.t:this.s=Sa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Sa=new de;ps.geo.stream=function(t,e){t&&Aa.hasOwnProperty(t.type)?Aa[t.type](t,e):ve(t,e)};var Aa={Feature:function(t,e){ve(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ve(n[r].geometry,e)}},Ra={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ye(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ye(n[r],e,0)},Polygon:function(t,e){me(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)me(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ve(n[r],e)}};ps.geo.area=function(t){return Oa=0,ps.geo.stream(t,Pa),Oa};var Oa,Ca=new de,Pa={sphere:function(){Oa+=4*Hs},point:S,lineStart:S,lineEnd:S,polygonStart:function(){Ca.reset(),Pa.lineStart=xe},polygonEnd:function(){var t=2*Ca;Oa+=0>t?4*Hs+t:t,Pa.lineStart=Pa.lineEnd=Pa.point=S}};ps.geo.bounds=function(){function t(t,e){x.push(_=[l=t,f=t]),c>e&&(c=e),e>p&&(p=e)}function e(e,n){var r=_e([e*Vs,n*Vs]);if(y){var i=Ee(y,r),o=[i[1],-i[0],0],s=Ee(o,i);Te(s),s=Se(s);var u=e-d,h=u>0?1:-1,g=s[0]*Zs*h,v=Ts(u)>180;if(v^(g>h*d&&h*e>g)){var m=s[1]*Zs;m>p&&(p=m)}else if(g=(g+360)%360-180,v^(g>h*d&&h*e>g)){var m=-s[1]*Zs;c>m&&(c=m)}else c>n&&(c=n),n>p&&(p=n);v?d>e?a(l,e)>a(l,f)&&(f=e):a(e,f)>a(l,f)&&(l=e):f>=l?(l>e&&(l=e),e>f&&(f=e)):e>d?a(l,e)>a(l,f)&&(f=e):a(e,f)>a(l,f)&&(l=e)}else t(e,n);y=r,d=e}function n(){b.point=e}function r(){_[0]=l,_[1]=f,b.point=t,y=null}function i(t,n){if(y){var r=t-d;m+=Ts(r)>180?r+(r>0?360:-360):r}else g=t,v=n;Pa.point(t,n),e(t,n)}function o(){Pa.lineStart()}function s(){i(g,v),Pa.lineEnd(),Ts(m)>Ys&&(l=-(f=180)),_[0]=l,_[1]=f,y=null}function a(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function h(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var l,c,f,p,d,g,v,y,m,x,_,b={point:t,lineStart:n,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=o,b.lineEnd=s,m=0,Pa.polygonStart()},polygonEnd:function(){Pa.polygonEnd(),b.point=t,b.lineStart=n,b.lineEnd=r,0>Ca?(l=-(f=180),c=-(p=90)):m>Ys?p=90:-Ys>m&&(c=-90),_[0]=l,_[1]=f}};return function(t){p=f=-(l=c=1/0),x=[],ps.geo.stream(t,b);var e=x.length;if(e){x.sort(u);for(var n,r=1,i=x[0],o=[i];e>r;++r)n=x[r],h(n[0],i)||h(n[1],i)?(a(i[0],n[1])>a(i[0],i[1])&&(i[1]=n[1]),a(n[0],i[1])>a(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var s,n,d=-(1/0),e=o.length-1,r=0,i=o[e];e>=r;i=n,++r)n=o[r],(s=a(i[1],n[0]))>d&&(d=s,l=n[0],f=i[1])}return x=_=null,l===1/0||c===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,c],[f,p]]}}(),ps.geo.centroid=function(t){Da=La=Fa=Na=Ba=ka=Ia=Ua=ja=za=Ya=0,ps.geo.stream(t,Xa);var e=ja,n=za,r=Ya,i=e*e+n*n+r*r;return Xs>i&&(e=ka,n=Ia,r=Ua,Ys>La&&(e=Fa,n=Na,r=Ba),i=e*e+n*n+r*r,Xs>i)?[NaN,NaN]:[Math.atan2(n,e)*Zs,st(r/Math.sqrt(i))*Zs]};var Da,La,Fa,Na,Ba,ka,Ia,Ua,ja,za,Ya,Xa={sphere:S,point:Re,lineStart:Ce,lineEnd:Pe,polygonStart:function(){Xa.lineStart=De},polygonEnd:function(){Xa.lineStart=Ce}},Ha=Ie(Fe,Ye,He,[-Hs,-Hs/2]),qa=1e9;ps.geo.clipExtent=function(){var t,e,n,r,i,o,s={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(a){return arguments.length?(o=Ve(t=+a[0][0],e=+a[0][1],n=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),s):[[t,e],[n,r]]}};return s.extent([[0,0],[960,500]])},(ps.geo.conicEqualArea=function(){return Ze(Ke)}).raw=Ke,ps.geo.albers=function(){return ps.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ps.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return e=null,n(o,s),e||(r(o,s),e)||i(o,s),e}var e,n,r,i,o=ps.geo.albers(),s=ps.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ps.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?s:i>=.166&&.234>i&&r>=-.214&&-.115>r?a:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=s.stream(t),r=a.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),a.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),a.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var h=o.scale(),l=+e[0],c=+e[1];return n=o.translate(e).clipExtent([[l-.455*h,c-.238*h],[l+.455*h,c+.238*h]]).stream(u).point,r=s.translate([l-.307*h,c+.201*h]).clipExtent([[l-.425*h+Ys,c+.12*h+Ys],[l-.214*h-Ys,c+.234*h-Ys]]).stream(u).point,i=a.translate([l-.205*h,c+.212*h]).clipExtent([[l-.214*h+Ys,c+.166*h+Ys],[l-.115*h-Ys,c+.234*h-Ys]]).stream(u).point,t},t.scale(1070)};var Ga,Wa,Va,Za,Ka,Ja,Qa={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Wa=0,Qa.lineStart=Je},polygonEnd:function(){Qa.lineStart=Qa.lineEnd=Qa.point=S,Ga+=Ts(Wa/2)}},$a={point:Qe,lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S},tu={point:en,lineStart:nn,lineEnd:rn,polygonStart:function(){tu.lineStart=on},polygonEnd:function(){tu.point=en,tu.lineStart=nn,tu.lineEnd=rn}};ps.geo.path=function(){function t(t){return t&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),s&&s.valid||(s=i(o)),ps.geo.stream(t,s)),o.result()}function e(){return s=null,t}var n,r,i,o,s,a=4.5;return t.area=function(t){return Ga=0,ps.geo.stream(t,i(Qa)),Ga},t.centroid=function(t){return Fa=Na=Ba=ka=Ia=Ua=ja=za=Ya=0,ps.geo.stream(t,i(tu)),Ya?[ja/Ya,za/Ya]:Ua?[ka/Ua,Ia/Ua]:Ba?[Fa/Ba,Na/Ba]:[NaN,NaN]},t.bounds=function(t){return Ka=Ja=-(Va=Za=1/0),ps.geo.stream(t,i($a)),[[Va,Za],[Ka,Ja]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||un(t):M,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new $e:new sn(t),"function"!=typeof a&&o.pointRadius(a),e()):r},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),t):a},t.projection(ps.geo.albersUsa()).context(null)},ps.geo.transform=function(t){return{stream:function(e){var n=new hn(e);for(var r in t)n[r]=t[r];return n}}},hn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ps.geo.projection=cn,ps.geo.projectionMutator=fn,(ps.geo.equirectangular=function(){return cn(dn)}).raw=dn.invert=dn,ps.geo.rotation=function(t){function e(e){return e=t(e[0]*Vs,e[1]*Vs),e[0]*=Zs,e[1]*=Zs,e}return t=vn(t[0]%360*Vs,t[1]*Vs,t.length>2?t[2]*Vs:0),e.invert=function(e){return e=t.invert(e[0]*Vs,e[1]*Vs),e[0]*=Zs,e[1]*=Zs,e},e},gn.invert=dn,ps.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=vn(-t[0]*Vs,-t[1]*Vs,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Zs,t[1]*=Zs}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=_n((e=+r)*Vs,i*Vs),t):e},t.precision=function(r){return arguments.length?(n=_n(e*Vs,(i=+r)*Vs),t):i},t.angle(90)},ps.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Vs,i=t[1]*Vs,o=e[1]*Vs,s=Math.sin(r),a=Math.cos(r),u=Math.sin(i),h=Math.cos(i),l=Math.sin(o),c=Math.cos(o);return Math.atan2(Math.sqrt((n=c*s)*n+(n=h*l-u*c*a)*n),u*l+h*c*a)},ps.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ps.range(Math.ceil(o/v)*v,i,v).map(f).concat(ps.range(Math.ceil(h/y)*y,u,y).map(p)).concat(ps.range(Math.ceil(r/d)*d,n,d).filter(function(t){return Ts(t%v)>Ys}).map(l)).concat(ps.range(Math.ceil(a/g)*g,s,g).filter(function(t){return Ts(t%y)>Ys}).map(c))}var n,r,i,o,s,a,u,h,l,c,f,p,d=10,g=d,v=90,y=360,m=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(u).slice(1),f(i).reverse().slice(1),p(h).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],h=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),h>u&&(e=h,h=u,u=e),t.precision(m)):[[o,h],[i,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(m)):[[r,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],y=+e[1],t):[v,y]},t.minorStep=function(e){return arguments.length?(d=+e[0],g=+e[1],t):[d,g]},t.precision=function(e){return arguments.length?(m=+e,l=En(a,s,90),c=Mn(r,n,m),f=En(h,u,90),p=Mn(o,i,m),t):m},t.majorExtent([[-180,-90+Ys],[180,90-Ys]]).minorExtent([[-180,-80-Ys],[180,80+Ys]])},ps.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=wn,i=Tn;return t.distance=function(){return ps.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},ps.geo.interpolate=function(t,e){return Sn(t[0]*Vs,t[1]*Vs,e[0]*Vs,e[1]*Vs)},ps.geo.length=function(t){return eu=0,ps.geo.stream(t,nu),eu};var eu,nu={sphere:S,point:S,lineStart:An,lineEnd:S,polygonStart:S,polygonEnd:S},ru=Rn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ps.geo.azimuthalEqualArea=function(){return cn(ru)}).raw=ru;var iu=Rn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},M);(ps.geo.azimuthalEquidistant=function(){return cn(iu)}).raw=iu,(ps.geo.conicConformal=function(){return Ze(On)}).raw=On,(ps.geo.conicEquidistant=function(){return Ze(Cn)}).raw=Cn;var ou=Rn(function(t){return 1/t},Math.atan);(ps.geo.gnomonic=function(){return cn(ou)}).raw=ou,Pn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ws]},(ps.geo.mercator=function(){return Dn(Pn)}).raw=Pn;var su=Rn(function(){return 1},Math.asin);(ps.geo.orthographic=function(){return cn(su)}).raw=su;var au=Rn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ps.geo.stereographic=function(){return cn(au)}).raw=au,Ln.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ws]},(ps.geo.transverseMercator=function(){var t=Dn(Ln),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Ln,ps.geom={},ps.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Pt(n),o=Pt(r),s=t.length,a=[],u=[];for(e=0;s>e;e++)a.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(a.sort(kn),e=0;s>e;e++)u.push([a[e][0],-a[e][1]]);var h=Bn(a),l=Bn(u),c=l[0]===h[0],f=l[l.length-1]===h[h.length-1],p=[];for(e=h.length-1;e>=0;--e)p.push(t[a[h[e]][2]]);for(e=+c;e<l.length-f;++e)p.push(t[a[l[e]][2]]);return p}var n=Fn,r=Nn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},ps.geom.polygon=function(t){return Cs(t,uu),t};var uu=ps.geom.polygon.prototype=[];uu.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},uu.centroid=function(t){var e,n,r=-1,i=this.length,o=0,s=0,a=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=a,a=this[r],n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o*t,s*t]},uu.clip=function(t){for(var e,n,r,i,o,s,a=jn(t),u=-1,h=this.length-jn(this),l=this[h-1];++u<h;){for(e=t.slice(),t.length=0,i=this[u],o=e[(r=e.length-a)-1],n=-1;++n<r;)s=e[n],In(s,l,i)?(In(o,l,i)||t.push(Un(o,s,l,i)),t.push(s)):In(o,l,i)&&t.push(Un(o,s,l,i)),o=s;a&&t.push(t[0]),l=i}return t};var hu,lu,cu,fu,pu,du=[],gu=[];Vn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Kn),e.length},sr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ar.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=cr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(hr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,lr(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(lr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,hr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?cr(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,hr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,lr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,hr(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,lr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,hr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,lr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ps.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=a[0][0],i=a[0][1],o=a[1][0],s=a[1][1];return fr(n(t),a).cells.forEach(function(n,a){var u=n.edges,h=n.site,l=e[a]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):h.x>=r&&h.x<=o&&h.y>=i&&h.y<=s?[[r,s],[o,s],[o,i],[r,i]]:[];l.point=t[a]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ys)*Ys,y:Math.round(s(t,e)/Ys)*Ys,i:e}})}var r=Fn,i=Nn,o=r,s=i,a=vu;return t?e(t):(e.links=function(t){return fr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return fr(n(t)).cells.forEach(function(n,r){for(var i,o,s=n.site,a=n.edges.sort(Kn),u=-1,h=a.length,l=a[h-1].edge,c=l.l===s?l.r:l.l;++u<h;)i=l,o=c,l=a[u].edge,c=l.l===s?l.r:l.l,r<o.i&&r<c.i&&dr(s,o,c)<0&&e.push([t[r],t[o.i],t[c.i]])}),e},e.x=function(t){return arguments.length?(o=Pt(r=t),e):r},e.y=function(t){return arguments.length?(s=Pt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(a=null==t?vu:t,e):a===vu?null:a},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):a===vu?null:a&&a[1]},e)};var vu=[[-1e6,-1e6],[1e6,1e6]];ps.geom.delaunay=function(t){return ps.geom.voronoi().triangles(t)},ps.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,s,a){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(Ts(u-n)+Ts(l-r)<.01)h(t,e,n,r,i,o,s,a);else{var c=t.point;t.x=t.y=t.point=null,h(t,c,u,l,i,o,s,a),h(t,e,n,r,i,o,s,a)}else t.x=n,t.y=r,t.point=e}else h(t,e,n,r,i,o,s,a)}function h(t,e,n,r,i,s,a,u){var h=.5*(i+a),l=.5*(s+u),c=n>=h,f=r>=l,p=f<<1|c;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=yr()),c?i=h:a=h,f?s=l:u=l,o(t,e,n,r,i,s,a,u)}var l,c,f,p,d,g,v,y,m,x=Pt(a),_=Pt(u);if(null!=e)g=e,v=n,y=r,m=i;else if(y=m=-(g=v=1/0),c=[],f=[],d=t.length,s)for(p=0;d>p;++p)l=t[p],l.x<g&&(g=l.x),l.y<v&&(v=l.y),l.x>y&&(y=l.x),l.y>m&&(m=l.y),c.push(l.x),f.push(l.y);else for(p=0;d>p;++p){var b=+x(l=t[p],p),E=+_(l,p);g>b&&(g=b),v>E&&(v=E),b>y&&(y=b),E>m&&(m=E),c.push(b),f.push(E)}var M=y-g,w=m-v;M>w?m=v+M:y=g+w;var T=yr();if(T.add=function(t){o(T,t,+x(t,++p),+_(t,p),g,v,y,m)},T.visit=function(t){mr(t,T,g,v,y,m)},T.find=function(t){return xr(T,t[0],t[1],g,v,y,m)},p=-1,null==e){for(;++p<d;)o(T,t[p],c[p],f[p],g,v,y,m);--p}else t.forEach(T.add);return c=f=t=l=null,T}var s,a=Fn,u=Nn;return(s=arguments.length)?(a=gr,u=vr,3===s&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},ps.interpolateRgb=_r,ps.interpolateObject=br,ps.interpolateNumber=Er,ps.interpolateString=Mr;var yu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mu=new RegExp(yu.source,"g");ps.interpolate=wr,ps.interpolators=[function(t,e){var n=typeof e;return("string"===n?la.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?_r:Mr:e instanceof ct?_r:Array.isArray(e)?Tr:"object"===n&&isNaN(e)?br:Er)(t,e)}],ps.interpolateArray=Tr;var xu=function(){return M},_u=ps.map({linear:xu,poly:Dr,quad:function(){return Or},cubic:function(){return Cr},sin:function(){
return Lr},exp:function(){return Fr},circle:function(){return Nr},elastic:Br,back:kr,bounce:function(){return Ir}}),bu=ps.map({"in":M,out:Ar,"in-out":Rr,"out-in":function(t){return Rr(Ar(t))}});ps.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=_u.get(n)||xu,r=bu.get(r)||M,Sr(r(n.apply(null,ds.call(arguments,1))))},ps.interpolateHcl=Ur,ps.interpolateHsl=jr,ps.interpolateLab=zr,ps.interpolateRound=Yr,ps.transform=function(t){var e=vs.createElementNS(ps.ns.prefix.svg,"g");return(ps.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Xr(n?n.matrix:Eu)})(t)},Xr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Eu={a:1,b:0,c:0,d:1,e:0,f:0};ps.interpolateTransform=Qr,ps.layout={},ps.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(ei(t[n]));return e}},ps.layout.chord=function(){function t(){var t,h,c,f,p,d={},g=[],v=ps.range(o),y=[];for(n=[],r=[],t=0,f=-1;++f<o;){for(h=0,p=-1;++p<o;)h+=i[f][p];g.push(h),y.push(ps.range(o)),t+=h}for(s&&v.sort(function(t,e){return s(g[t],g[e])}),a&&y.forEach(function(t,e){t.sort(function(t,n){return a(i[e][t],i[e][n])})}),t=(qs-l*o)/t,h=0,f=-1;++f<o;){for(c=h,p=-1;++p<o;){var m=v[f],x=y[m][p],_=i[m][x],b=h,E=h+=_*t;d[m+"-"+x]={index:m,subindex:x,startAngle:b,endAngle:E,value:_}}r[m]={index:m,startAngle:c,endAngle:h,value:g[m]},h+=l}for(f=-1;++f<o;)for(p=f-1;++p<o;){var M=d[f+"-"+p],w=d[p+"-"+f];(M.value||w.value)&&n.push(M.value<w.value?{source:w,target:M}:{source:M,target:w})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,s,a,u,h={},l=0;return h.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,h):i},h.padding=function(t){return arguments.length?(l=t,n=r=null,h):l},h.sortGroups=function(t){return arguments.length?(s=t,n=r=null,h):s},h.sortSubgroups=function(t){return arguments.length?(a=t,n=null,h):a},h.sortChords=function(t){return arguments.length?(u=t,n&&e(),h):u},h.chords=function(){return n||t(),n},h.groups=function(){return r||t(),r},h},ps.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=i-n,u=o*o+s*s;if(u>a*a/y){if(g>u){var h=e.charge/u;t.px-=o*h,t.py-=s*h}return!0}if(e.point&&u&&g>u){var h=e.pointCharge/u;t.px-=o*h,t.py-=s*h}}return!e.charge}}function e(t){t.px=ps.event.x,t.py=ps.event.y,u.resume()}var n,r,i,o,s,a,u={},h=ps.dispatch("start","tick","end"),l=[1,1],c=.9,f=Mu,p=wu,d=-30,g=Tu,v=.1,y=.64,m=[],x=[];return u.tick=function(){if((i*=.99)<.005)return n=null,h.end({type:"end",alpha:i=0}),!0;var e,r,u,f,p,g,y,_,b,E=m.length,M=x.length;for(r=0;M>r;++r)u=x[r],f=u.source,p=u.target,_=p.x-f.x,b=p.y-f.y,(g=_*_+b*b)&&(g=i*s[r]*((g=Math.sqrt(g))-o[r])/g,_*=g,b*=g,p.x-=_*(y=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=b*y,f.x+=_*(y=1-y),f.y+=b*y);if((y=i*v)&&(_=l[0]/2,b=l[1]/2,r=-1,y))for(;++r<E;)u=m[r],u.x+=(_-u.x)*y,u.y+=(b-u.y)*y;if(d)for(ui(e=ps.geom.quadtree(m),i,a),r=-1;++r<E;)(u=m[r]).fixed||e.visit(t(u));for(r=-1;++r<E;)u=m[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*c,u.y-=(u.py-(u.py=u.y))*c);h.tick({type:"tick",alpha:i})},u.nodes=function(t){return arguments.length?(m=t,u):m},u.links=function(t){return arguments.length?(x=t,u):x},u.size=function(t){return arguments.length?(l=t,u):l},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.friction=function(t){return arguments.length?(c=+t,u):c},u.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.chargeDistance=function(t){return arguments.length?(g=t*t,u):Math.sqrt(g)},u.gravity=function(t){return arguments.length?(v=+t,u):v},u.theta=function(t){return arguments.length?(y=t*t,u):Math.sqrt(y)},u.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,h.end({type:"end",alpha:i=0})):t>0&&(h.start({type:"start",alpha:i=t}),n=Bt(u.tick)),u):i},u.start=function(){function t(t,r){if(!n){for(n=new Array(i),u=0;i>u;++u)n[u]=[];for(u=0;h>u;++u){var o=x[u];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var s,a=n[e],u=-1,l=a.length;++u<l;)if(!isNaN(s=a[u][t]))return s;return Math.random()*r}var e,n,r,i=m.length,h=x.length,c=l[0],g=l[1];for(e=0;i>e;++e)(r=m[e]).index=e,r.weight=0;for(e=0;h>e;++e)r=x[e],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(e=0;i>e;++e)r=m[e],isNaN(r.x)&&(r.x=t("x",c)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof f)for(e=0;h>e;++e)o[e]=+f.call(this,x[e],e);else for(e=0;h>e;++e)o[e]=f;if(s=[],"function"==typeof p)for(e=0;h>e;++e)s[e]=+p.call(this,x[e],e);else for(e=0;h>e;++e)s[e]=p;if(a=[],"function"==typeof d)for(e=0;i>e;++e)a[e]=+d.call(this,m[e],e);else for(e=0;i>e;++e)a[e]=d;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return r||(r=ps.behavior.drag().origin(M).on("dragstart.force",ii).on("drag.force",e).on("dragend.force",oi)),arguments.length?void this.on("mouseover.force",si).on("mouseout.force",ai).call(r):r},ps.rebind(u,h,"on")};var Mu=20,wu=1,Tu=1/0;ps.layout.hierarchy=function(){function t(i){var o,s=[i],a=[];for(i.depth=0;null!=(o=s.pop());)if(a.push(o),(h=n.call(t,o,o.depth))&&(u=h.length)){for(var u,h,l;--u>=0;)s.push(l=h[u]),l.parent=o,l.depth=o.depth+1;r&&(o.value=0),o.children=h}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return ci(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),a}var e=di,n=fi,r=pi;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(li(e,function(t){t.children&&(t.value=0)}),ci(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},ps.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(s=o.length)){var s,a,u,h=-1;for(r=e.value?r/e.value:0;++h<s;)t(a=o[h],n,u=a.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var s=r.call(this,n,o);return t(s[0],0,i[0],i[1]/e(s[0])),s}var r=ps.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},hi(n,r)},ps.layout.pie=function(){function t(s){var a,u=s.length,h=s.map(function(n,r){return+e.call(t,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),c=("function"==typeof i?i.apply(this,arguments):i)-l,f=Math.min(Math.abs(c)/u,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(0>c?-1:1),d=ps.sum(h),g=d?(c-u*p)/d:0,v=ps.range(u),y=[];return null!=n&&v.sort(n===Su?function(t,e){return h[e]-h[t]}:function(t,e){return n(s[t],s[e])}),v.forEach(function(t){y[t]={data:s[t],value:a=h[t],startAngle:l,endAngle:l+=a*g+p,padAngle:f}}),y}var e=Number,n=Su,r=0,i=qs,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var Su={};ps.layout.stack=function(){function t(a,u){if(!(f=a.length))return a;var h=a.map(function(n,r){return e.call(t,n,r)}),l=h.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),c=n.call(t,l,u);h=ps.permute(h,c),l=ps.permute(l,c);var f,p,d,g,v=r.call(t,l,u),y=h[0].length;for(d=0;y>d;++d)for(i.call(t,h[0][d],g=v[d],l[0][d][1]),p=1;f>p;++p)i.call(t,h[p][d],g+=l[p-1][d][1],l[p][d][1]);return a}var e=M,n=xi,r=_i,i=mi,o=vi,s=yi;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Au.get(e)||xi,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:Ru.get(e)||_i,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(i=e,t):i},t};var Au=ps.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(bi),o=t.map(Ei),s=ps.range(r).sort(function(t,e){return i[t]-i[e]}),a=0,u=0,h=[],l=[];for(e=0;r>e;++e)n=s[e],u>a?(a+=o[n],h.push(n)):(u+=o[n],l.push(n));return l.reverse().concat(h)},reverse:function(t){return ps.range(t.length).reverse()},"default":xi}),Ru=ps.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,s=[],a=0,u=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>a&&(a=r),s.push(r)}for(n=0;o>n;++n)u[n]=(a-s[n])/2;return u},wiggle:function(t){var e,n,r,i,o,s,a,u,h,l=t.length,c=t[0],f=c.length,p=[];for(p[0]=u=h=0,n=1;f>n;++n){for(e=0,i=0;l>e;++e)i+=t[e][n][1];for(e=0,o=0,a=c[n][0]-c[n-1][0];l>e;++e){for(r=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>r;++r)s+=(t[r][n][1]-t[r][n-1][1])/a;o+=s*t[e][n][1]}p[n]=u-=i?o/i*a:0,h>u&&(h=u)}for(n=0;f>n;++n)p[n]-=h;return p},expand:function(t){var e,n,r,i=t.length,o=t[0].length,s=1/i,a=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:_i});ps.layout.histogram=function(){function t(t,o){for(var s,a,u=[],h=t.map(n,this),l=r.call(this,h,o),c=i.call(this,l,h,o),o=-1,f=h.length,p=c.length-1,d=e?1:1/f;++o<p;)s=u[o]=[],s.dx=c[o+1]-(s.x=c[o]),s.y=0;if(p>0)for(o=-1;++o<f;)a=h[o],a>=l[0]&&a<=l[1]&&(s=u[ps.bisect(c,a,1,p)-1],s.y+=d,s.push(t[o]));return u}var e=!0,n=Number,r=Si,i=wi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Pt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return Ti(t,e)}:Pt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ps.layout.pack=function(){function t(t,o){var s=n.call(this,t,o),a=s[0],u=i[0],h=i[1],l=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(a.x=a.y=0,ci(a,function(t){t.r=+l(t.value)}),ci(a,Pi),r){var c=r*(e?1:Math.max(2*a.r/u,2*a.r/h))/2;ci(a,function(t){t.r+=c}),ci(a,Pi),ci(a,function(t){t.r-=c})}return Fi(a,u/2,h/2,e?1:1/Math.max(2*a.r/u,2*a.r/h)),s}var e,n=ps.layout.hierarchy().sort(Ai),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},hi(t,n)},ps.layout.tree=function(){function t(t,i){var l=s.call(this,t,i),c=l[0],f=e(c);if(ci(f,n),f.parent.m=-f.z,li(f,r),h)li(c,o);else{var p=c,d=c,g=c;li(c,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var v=a(p,d)/2-p.x,y=u[0]/(d.x+a(d,p)/2+v),m=u[1]/(g.depth||1);li(c,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return l}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,s=0,a=o.length;a>s;++s)r.push((o[s]=i={_:o[s],parent:e,children:(i=o[s].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){ji(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+a(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+a(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,s=e,u=i.parent.children[0],h=i.m,l=o.m,c=s.m,f=u.m;s=Ii(s),i=ki(i),s&&i;)u=ki(u),o=Ii(o),o.a=t,r=s.z+c-i.z-h+a(s._,i._),r>0&&(Ui(zi(s,t,n),t,r),h+=r,l+=r),c+=s.m,h+=i.m,f+=u.m,l+=o.m;s&&!Ii(o)&&(o.t=s,o.m+=c-l),i&&!ki(u)&&(u.t=i,u.m+=h-f,n=t)}return n}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var s=ps.layout.hierarchy().sort(null).value(null),a=Bi,u=[1,1],h=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(h=null==(u=e)?o:null,t):h?null:u},t.nodeSize=function(e){return arguments.length?(h=null==(u=e)?null:o,t):h?u:null},hi(t,s)},ps.layout.cluster=function(){function t(t,o){var s,a=e.call(this,t,o),u=a[0],h=0;ci(u,function(t){var e=t.children;e&&e.length?(t.x=Xi(e),t.y=Yi(e)):(t.x=s?h+=n(t,s):0,t.y=0,s=t)});var l=Hi(u),c=qi(u),f=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return ci(u,i?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),a}var e=ps.layout.hierarchy().sort(null).value(null),n=Bi,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},hi(t,e)},ps.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var s,a,u,h=c(n),l=[],f=o.slice(),d=1/0,g="slice"===p?h.dx:"dice"===p?h.dy:"slice-dice"===p?1&n.depth?h.dy:h.dx:Math.min(h.dx,h.dy);for(t(f,h.dx*h.dy/n.value),l.area=0;(u=f.length)>0;)l.push(s=f[u-1]),l.area+=s.area,"squarify"!==p||(a=r(l,g))<=d?(f.pop(),d=a):(l.area-=l.pop().area,i(l,g,h,!1),g=Math.min(h.dx,h.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,g,h,!0),l.length=l.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,s=c(e),a=r.slice(),u=[];for(t(a,s.dx*s.dy/e.value),u.area=0;o=a.pop();)u.push(o),u.area+=o.area,null!=o.z&&(i(u,o.z?s.dx:s.dy,s,!a.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*d/r,r/(e*o*d)):1/0}function i(t,e,n,r){var i,o=-1,s=t.length,a=n.x,h=n.y,l=e?u(t.area/e):0;if(e==n.dx){for((r||l>n.dy)&&(l=n.dy);++o<s;)i=t[o],i.x=a,i.y=h,i.dy=l,a+=i.dx=Math.min(n.x+n.dx-a,l?u(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-a,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++o<s;)i=t[o],i.x=a,i.y=h,i.dx=l,h+=i.dy=Math.min(n.y+n.dy-h,l?u(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-h,n.x+=l,n.dx-=l}}function o(r){var i=s||a(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=h[0],o.dy=h[1]):o.dx=o.dy=0,s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),f&&(s=i),i}var s,a=ps.layout.hierarchy(),u=Math.round,h=[1,1],l=null,c=Gi,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(h=t,o):h},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Gi(e):Wi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Wi(e,t)}if(!arguments.length)return l;var r;return c=null==(l=t)?Gi:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(f=t,s=null,o):f},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},hi(o,a)},ps.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ps.random.normal.apply(ps,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ps.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},ps.scale={};var Ou={floor:M,ceil:M};ps.scale.linear=function(){return to([0,1],[0,1],wr,!1)};var Cu={s:1,g:1,p:1,r:1,e:1};ps.scale.log=function(){return uo(ps.scale.linear().domain([0,1]),10,!0,[1,10])};var Pu=ps.format(".0e"),Du={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ps.scale.pow=function(){return ho(ps.scale.linear(),1,[0,1])},ps.scale.sqrt=function(){return ps.scale.pow().exponent(.5)},ps.scale.ordinal=function(){return co([],{t:"range",a:[[]]})},ps.scale.category10=function(){return ps.scale.ordinal().range(Lu)},ps.scale.category20=function(){return ps.scale.ordinal().range(Fu)},ps.scale.category20b=function(){return ps.scale.ordinal().range(Nu)},ps.scale.category20c=function(){return ps.scale.ordinal().range(Bu)};var Lu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wt),Fu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wt),Nu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wt),Bu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(wt);ps.scale.quantile=function(){return fo([],[])},ps.scale.quantize=function(){return po(0,1,[0,1])},ps.scale.threshold=function(){return go([.5],[0,1])},ps.scale.identity=function(){return vo([0,1])},ps.svg={},ps.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),h=Math.max(0,+r.apply(this,arguments)),l=s.apply(this,arguments)-Ws,c=a.apply(this,arguments)-Ws,f=Math.abs(c-l),p=l>c?0:1;if(t>h&&(d=h,h=t,t=d),f>=Gs)return e(h,p)+(t?e(t,1-p):"")+"Z";var d,g,v,y,m,x,_,b,E,M,w,T,S=0,A=0,R=[];if((y=(+u.apply(this,arguments)||0)/2)&&(v=o===ku?Math.sqrt(t*t+h*h):+o.apply(this,arguments),p||(A*=-1),h&&(A=st(v/h*Math.sin(y))),t&&(S=st(v/t*Math.sin(y)))),h){m=h*Math.cos(l+A),x=h*Math.sin(l+A),_=h*Math.cos(c-A),b=h*Math.sin(c-A);var O=Math.abs(c-l-2*A)<=Hs?0:1;if(A&&Mo(m,x,_,b)===p^O){var C=(l+c)/2;m=h*Math.cos(C),x=h*Math.sin(C),_=b=null}}else m=x=0;if(t){E=t*Math.cos(c-S),M=t*Math.sin(c-S),w=t*Math.cos(l+S),T=t*Math.sin(l+S);var P=Math.abs(l-c+2*S)<=Hs?0:1;if(S&&Mo(E,M,w,T)===1-p^P){var D=(l+c)/2;E=t*Math.cos(D),M=t*Math.sin(D),w=T=null}}else E=M=0;if(f>Ys&&(d=Math.min(Math.abs(h-t)/2,+i.apply(this,arguments)))>.001){g=h>t^p?0:1;var L=d,F=d;if(Hs>f){var N=null==w?[E,M]:null==_?[m,x]:Un([m,x],[w,T],[_,b],[E,M]),B=m-N[0],k=x-N[1],I=_-N[0],U=b-N[1],j=1/Math.sin(Math.acos((B*I+k*U)/(Math.sqrt(B*B+k*k)*Math.sqrt(I*I+U*U)))/2),z=Math.sqrt(N[0]*N[0]+N[1]*N[1]);F=Math.min(d,(t-z)/(j-1)),L=Math.min(d,(h-z)/(j+1))}if(null!=_){var Y=wo(null==w?[E,M]:[w,T],[m,x],h,L,p),X=wo([_,b],[E,M],h,L,p);d===L?R.push("M",Y[0],"A",L,",",L," 0 0,",g," ",Y[1],"A",h,",",h," 0 ",1-p^Mo(Y[1][0],Y[1][1],X[1][0],X[1][1]),",",p," ",X[1],"A",L,",",L," 0 0,",g," ",X[0]):R.push("M",Y[0],"A",L,",",L," 0 1,",g," ",X[0])}else R.push("M",m,",",x);if(null!=w){var H=wo([m,x],[w,T],t,-F,p),q=wo([E,M],null==_?[m,x]:[_,b],t,-F,p);d===F?R.push("L",q[0],"A",F,",",F," 0 0,",g," ",q[1],"A",t,",",t," 0 ",p^Mo(q[1][0],q[1][1],H[1][0],H[1][1]),",",1-p," ",H[1],"A",F,",",F," 0 0,",g," ",H[0]):R.push("L",q[0],"A",F,",",F," 0 0,",g," ",H[0])}else R.push("L",E,",",M)}else R.push("M",m,",",x),null!=_&&R.push("A",h,",",h," 0 ",O,",",p," ",_,",",b),R.push("L",E,",",M),null!=w&&R.push("A",t,",",t," 0 ",P,",",1-p," ",w,",",T);return R.push("Z"),R.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=mo,r=xo,i=yo,o=ku,s=_o,a=bo,u=Eo;return t.innerRadius=function(e){return arguments.length?(n=Pt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Pt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Pt(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==ku?ku:Pt(e),t):o},t.startAngle=function(e){return arguments.length?(s=Pt(e),t):s},t.endAngle=function(e){return arguments.length?(a=Pt(e),t):a},t.padAngle=function(e){return arguments.length?(u=Pt(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-Ws;return[Math.cos(e)*t,Math.sin(e)*t]},t};var ku="auto";ps.svg.line=function(){return To(M)};var Iu=ps.map({linear:So,"linear-closed":Ao,step:Ro,"step-before":Oo,"step-after":Co,basis:Bo,"basis-open":ko,"basis-closed":Io,bundle:Uo,cardinal:Lo,"cardinal-open":Po,"cardinal-closed":Do,monotone:qo});Iu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Uu=[0,2/3,1/3,0],ju=[0,1/3,2/3,0],zu=[0,1/6,2/3,1/6];ps.svg.line.radial=function(){var t=To(Go);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Oo.reverse=Co,Co.reverse=Oo,ps.svg.area=function(){return Wo(M)},ps.svg.area.radial=function(){var t=Wo(Go);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ps.svg.chord=function(){function t(t,a){var u=e(this,o,t,a),h=e(this,s,t,a);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,h)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,h.r,h.p0)+r(h.r,h.p1,h.a1-h.a0)+i(h.r,h.p1,u.r,u.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=a.call(t,i,r),s=u.call(t,i,r)-Ws,l=h.call(t,i,r)-Ws;return{r:o,a0:s,a1:l,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Hs)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=wn,s=Tn,a=Vo,u=_o,h=bo;return t.radius=function(e){return arguments.length?(a=Pt(e),t):a},t.source=function(e){return arguments.length?(o=Pt(e),t):o},t.target=function(e){return arguments.length?(s=Pt(e),t):s},t.startAngle=function(e){return arguments.length?(u=Pt(e),t):u},t.endAngle=function(e){return arguments.length?(h=Pt(e),t):h},t},ps.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),s=n.call(this,t,i),a=(o.y+s.y)/2,u=[o,{x:o.x,y:a},{x:s.x,y:a},s];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=wn,n=Tn,r=Zo;return t.source=function(n){return arguments.length?(e=Pt(n),t):e},t.target=function(e){return arguments.length?(n=Pt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},ps.svg.diagonal.radial=function(){var t=ps.svg.diagonal(),e=Zo,n=t.projection;return t.projection=function(t){return arguments.length?n(Ko(e=t)):e},t},ps.svg.symbol=function(){function t(t,r){return(Yu.get(e.call(this,t,r))||$o)(n.call(this,t,r))}var e=Qo,n=Jo;return t.type=function(n){return arguments.length?(e=Pt(n),t):e},t.size=function(e){return arguments.length?(n=Pt(e),t):n},t};var Yu=ps.map({circle:$o,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Hu)),n=e*Hu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Xu),n=e*Xu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Xu),n=e*Xu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ps.svg.symbolTypes=Yu.keys();var Xu=Math.sqrt(3),Hu=Math.tan(30*Vs);Fs.transition=function(t){for(var e,n,r=qu||++Zu,i=is(t),o=[],s=Gu||{time:Date.now(),ease:Pr,delay:0,duration:250},a=-1,u=this.length;++a<u;){o.push(e=[]);for(var h=this[a],l=-1,c=h.length;++l<c;)(n=h[l])&&os(n,l,i,r,s),e.push(n)}return es(o,i,r)},Fs.interrupt=function(t){return this.each(null==t?Wu:ts(is(t)))};var qu,Gu,Wu=ts(is()),Vu=[],Zu=0;Vu.call=Fs.call,Vu.empty=Fs.empty,Vu.node=Fs.node,Vu.size=Fs.size,ps.transition=function(t,e){return t&&t.transition?qu?t.transition(e):t:ps.selection().transition(t)},ps.transition.prototype=Vu,Vu.select=function(t){var e,n,r,i=this.id,o=this.namespace,s=[];t=L(t);for(var a=-1,u=this.length;++a<u;){s.push(e=[]);for(var h=this[a],l=-1,c=h.length;++l<c;)(r=h[l])&&(n=t.call(r,r.__data__,l,a))?("__data__"in r&&(n.__data__=r.__data__),os(n,l,o,i,r[o][i]),e.push(n)):e.push(null)}return es(s,o,i)},Vu.selectAll=function(t){var e,n,r,i,o,s=this.id,a=this.namespace,u=[];t=F(t);for(var h=-1,l=this.length;++h<l;)for(var c=this[h],f=-1,p=c.length;++f<p;)if(r=c[f]){o=r[a][s],n=t.call(r,r.__data__,f,h),u.push(e=[]);for(var d=-1,g=n.length;++d<g;)(i=n[d])&&os(i,d,a,s,o),e.push(i)}return es(u,a,s)},Vu.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=G(t));for(var o=0,s=this.length;s>o;o++){i.push(e=[]);for(var n=this[o],a=0,u=n.length;u>a;a++)(r=n[a])&&t.call(r,r.__data__,a,o)&&e.push(r)}return es(i,this.namespace,this.id)},Vu.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):V(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Vu.attr=function(t,e){function n(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var s="transform"==t?Qr:wr,a=ps.ns.qualify(t);return ns(this,"attr."+t,e,a.local?o:i)},Vu.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ps.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Vu.style=function(t,e,n){function r(){this.style.removeProperty(t)}function i(e){return null==e?r:(e+="",function(){var r,i=s(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=wr(i,e),function(e){this.style.setProperty(t,r(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return ns(this,"style."+t,e,i)},Vu.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,s(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Vu.text=function(t){return ns(this,"text",t,rs)},Vu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Vu.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ps.ease.apply(ps,arguments)),V(this,function(r){r[n][e].ease=t}))},Vu.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:V(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Vu.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:V(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Vu.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Gu,o=qu;try{qu=n,V(this,function(e,i,o){Gu=e[r][n],t.call(e,e.__data__,i,o)})}finally{Gu=i,qu=o}}else V(this,function(i){var o=i[r][n];(o.event||(o.event=ps.dispatch("start","end","interrupt"))).on(t,e)});return this},Vu.transition=function(){for(var t,e,n,r,i=this.id,o=++Zu,s=this.namespace,a=[],u=0,h=this.length;h>u;u++){a.push(t=[]);for(var e=this[u],l=0,c=e.length;c>l;l++)(n=e[l])&&(r=n[s][i],os(n,l,s,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return es(a,s,o)},ps.svg.axis=function(){function t(t){t.each(function(){var t,h=ps.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),f=null==u?c.ticks?c.ticks.apply(c,a):c.domain():u,p=null==e?c.tickFormat?c.tickFormat.apply(c,a):M:e,d=h.selectAll(".tick").data(f,c),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ys),v=ps.transition(d.exit()).style("opacity",Ys).remove(),y=ps.transition(d.order()).style("opacity",1),m=Math.max(i,0)+s,x=Zi(c),_=h.selectAll(".domain").data([0]),b=(_.enter().append("path").attr("class","domain"),ps.transition(_));g.append("line"),g.append("text");var E,w,T,S,A=g.select("line"),R=y.select("line"),O=d.select("text").text(p),C=g.select("text"),P=y.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ss,E="x",T="y",w="x2",S="y2",O.attr("dy",0>D?"0em":".71em").style("text-anchor","middle"),b.attr("d","M"+x[0]+","+D*o+"V0H"+x[1]+"V"+D*o)):(t=as,E="y",T="x",w="y2",S="x2",O.attr("dy",".32em").style("text-anchor",0>D?"end":"start"),b.attr("d","M"+D*o+","+x[0]+"H0V"+x[1]+"H"+D*o)),A.attr(S,D*i),C.attr(T,D*m),R.attr(w,0).attr(S,D*i),P.attr(E,0).attr(T,D*m),c.rangeBand){var L=c,F=L.rangeBand()/2;l=c=function(t){return L(t)+F}}else l.rangeBand?l=c:v.call(t,c,l);g.call(t,l,c),y.call(t,c,c)})}var e,n=ps.scale.linear(),r=Ku,i=6,o=6,s=3,a=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Ju?e+"":Ku,t):r},t.ticks=function(){return arguments.length?(a=gs(arguments),t):a},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(){return arguments.length&&t},t};var Ku="bottom",Ju={top:1,right:1,bottom:1,left:1};ps.svg.brush=function(){function t(o){o.each(function(){var o=ps.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),s=o.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=o.selectAll(".resize").data(g,M);a.exit().remove(),a.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Qu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",t.empty()?"none":null);var u,c=ps.transition(o),f=ps.transition(s);h&&(u=Zi(h),f.attr("x",u[0]).attr("width",u[1]-u[0]),n(c)),l&&(u=Zi(l),f.attr("y",u[0]).attr("height",u[1]-u[0]),r(c)),e(c)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function i(){function i(){32==ps.event.keyCode&&(R||(x=null,P[0]-=c[1],P[1]-=f[1],R=2),O())}function g(){32==ps.event.keyCode&&2==R&&(P[0]+=c[1],P[1]+=f[1],R=0,O())}function v(){var t=ps.mouse(b),i=!1;_&&(t[0]+=_[0],t[1]+=_[1]),R||(ps.event.altKey?(x||(x=[(c[0]+c[1])/2,(f[0]+f[1])/2]),P[0]=c[+(t[0]<x[0])],P[1]=f[+(t[1]<x[1])]):x=null),S&&y(t,h,0)&&(n(w),i=!0),A&&y(t,l,1)&&(r(w),i=!0),i&&(e(w),M({type:"brush",mode:R?"move":"resize"}))}function y(t,e,n){var r,i,s=Zi(e),u=s[0],h=s[1],l=P[n],g=n?f:c,v=g[1]-g[0];return R&&(u-=l,h-=v+l),r=(n?d:p)?Math.max(u,Math.min(h,t[n])):t[n],R?i=(r+=l)+v:(x&&(l=Math.max(u,Math.min(h,2*x[n]-r))),r>l?(i=r,r=l):i=l),g[0]!=r||g[1]!=i?(n?a=null:o=null,g[0]=r,g[1]=i,!0):void 0}function m(){v(),w.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),
ps.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),M({type:"brushend"})}var x,_,b=this,E=ps.select(ps.event.target),M=u.of(b,arguments),w=ps.select(b),T=E.datum(),S=!/^(n|s)$/.test(T)&&h,A=!/^(e|w)$/.test(T)&&l,R=E.classed("extent"),C=tt(b),P=ps.mouse(b),D=ps.select(s(b)).on("keydown.brush",i).on("keyup.brush",g);if(ps.event.changedTouches?D.on("touchmove.brush",v).on("touchend.brush",m):D.on("mousemove.brush",v).on("mouseup.brush",m),w.interrupt().selectAll("*").interrupt(),R)P[0]=c[0]-P[0],P[1]=f[0]-P[1];else if(T){var L=+/w$/.test(T),F=+/^n/.test(T);_=[c[1-L]-P[0],f[1-F]-P[1]],P[0]=c[L],P[1]=f[F]}else ps.event.altKey&&(x=P.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),ps.select("body").style("cursor",E.style("cursor")),M({type:"brushstart"}),v()}var o,a,u=P(t,"brushstart","brush","brushend"),h=null,l=null,c=[0,0],f=[0,0],p=!0,d=!0,g=$u[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:c,y:f,i:o,j:a},n=this.__chart__||e;this.__chart__=e,qu?ps.select(this).transition().each("start.brush",function(){o=n.i,a=n.j,c=n.x,f=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Tr(c,e.x),r=Tr(f,e.y);return o=a=null,function(i){c=e.x=n(i),f=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(h=e,g=$u[!h<<1|!l],t):h},t.y=function(e){return arguments.length?(l=e,g=$u[!h<<1|!l],t):l},t.clamp=function(e){return arguments.length?(h&&l?(p=!!e[0],d=!!e[1]):h?p=!!e:l&&(d=!!e),t):h&&l?[p,d]:h?p:l?d:null},t.extent=function(e){var n,r,i,s,u;return arguments.length?(h&&(n=e[0],r=e[1],l&&(n=n[0],r=r[0]),o=[n,r],h.invert&&(n=h(n),r=h(r)),n>r&&(u=n,n=r,r=u),n==c[0]&&r==c[1]||(c=[n,r])),l&&(i=e[0],s=e[1],h&&(i=i[1],s=s[1]),a=[i,s],l.invert&&(i=l(i),s=l(s)),i>s&&(u=i,i=s,s=u),i==f[0]&&s==f[1]||(f=[i,s])),t):(h&&(o?(n=o[0],r=o[1]):(n=c[0],r=c[1],h.invert&&(n=h.invert(n),r=h.invert(r)),n>r&&(u=n,n=r,r=u))),l&&(a?(i=a[0],s=a[1]):(i=f[0],s=f[1],l.invert&&(i=l.invert(i),s=l.invert(s)),i>s&&(u=i,i=s,s=u))),h&&l?[[n,i],[r,s]]:h?[n,r]:l&&[i,s])},t.clear=function(){return t.empty()||(c=[0,0],f=[0,0],o=a=null),t},t.empty=function(){return!!h&&c[0]==c[1]||!!l&&f[0]==f[1]},ps.rebind(t,u,"on")};var Qu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$u=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],th=xa.format=Ta.timeFormat,eh=th.utc,nh=eh("%Y-%m-%dT%H:%M:%S.%LZ");th.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?us:nh,us.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},us.toString=nh.toString,xa.second=qt(function(t){return new _a(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),xa.seconds=xa.second.range,xa.seconds.utc=xa.second.utc.range,xa.minute=qt(function(t){return new _a(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),xa.minutes=xa.minute.range,xa.minutes.utc=xa.minute.utc.range,xa.hour=qt(function(t){var e=t.getTimezoneOffset()/60;return new _a(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),xa.hours=xa.hour.range,xa.hours.utc=xa.hour.utc.range,xa.month=qt(function(t){return t=xa.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),xa.months=xa.month.range,xa.months.utc=xa.month.utc.range;var rh=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ih=[[xa.second,1],[xa.second,5],[xa.second,15],[xa.second,30],[xa.minute,1],[xa.minute,5],[xa.minute,15],[xa.minute,30],[xa.hour,1],[xa.hour,3],[xa.hour,6],[xa.hour,12],[xa.day,1],[xa.day,2],[xa.week,1],[xa.month,1],[xa.month,3],[xa.year,1]],oh=th.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Fe]]),sh={range:function(t,e,n){return ps.range(Math.ceil(t/n)*n,+e,n).map(ls)},floor:M,ceil:M};ih.year=xa.year,xa.scale=function(){return hs(ps.scale.linear(),ih,oh)};var ah=ih.map(function(t){return[t[0].utc,t[1]]}),uh=eh.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Fe]]);ah.year=xa.year.utc,xa.scale.utc=function(){return hs(ps.scale.linear(),ah,uh)},ps.text=Dt(function(t){return t.responseText}),ps.json=function(t,e){return Lt(t,"application/json",cs,e)},ps.html=function(t,e){return Lt(t,"text/html",fs,e)},ps.xml=Dt(function(t){return t.responseXML}),this.d3=ps,r=ps,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i))}()},function(t,e,n){(function(e){n(8);var r=t.exports=n(13);r.extras=n(76),r.filters=n(83),r.interaction=n(111),r.loaders=n(115),r.mesh=n(134),r.accessibility=n(140),r.loader=new r.loaders.Loader,Object.assign(r,n(143)),e.PIXI=r}).call(e,function(){return this}())},function(t,e,n){n(9),n(11),n(12)},function(t,e,n){Object.assign||(Object.assign=n(10))},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,e){for(var o,s,a=n(t),u=1;u<arguments.length;u++){o=Object(arguments[u]);for(var h in o)r.call(o,h)&&(a[h]=o[h]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(o);for(var l=0;l<s.length;l++)i.call(o,s[l])&&(a[s[l]]=o[s[l]])}}return a}},function(t,e){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[r[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[r[i]+"CancelAnimationFrame"]||t[r[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+n-e;return 0>r&&(r=0),n=e,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(e,function(){return this}())},function(t,e){Math.sign||(Math.sign=function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,n){var r=t.exports=Object.assign(n(14),n(15),{utils:n(24),ticker:n(30),DisplayObject:n(32),Container:n(44),Sprite:n(45),ParticleContainer:n(47),SpriteRenderer:n(48),ParticleRenderer:n(64),Text:n(67),Graphics:n(68),GraphicsData:n(70),GraphicsRenderer:n(71),Texture:n(35),BaseTexture:n(34),RenderTexture:n(33),VideoBaseTexture:n(36),TextureUvs:n(37),CanvasRenderer:n(74),CanvasGraphics:n(69),CanvasBuffer:n(43),WebGLRenderer:n(50),WebGLManager:n(41),ShaderManager:n(52),Shader:n(54),TextureShader:n(53),PrimitiveShader:n(56),ComplexPrimitiveShader:n(55),ObjectRenderer:n(49),RenderTarget:n(38),AbstractFilter:n(59),FXAAFilter:n(63),SpriteMaskFilter:n(58),autoDetectRenderer:function(t,e,n,i){return t=t||800,e=e||600,!i&&r.utils.isWebGLSupported()?new r.WebGLRenderer(t,e,n):new r.CanvasRenderer(t,e,n)}})},function(t,e){var n={VERSION:"__VERSION__",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};t.exports=n},function(t,e,n){t.exports={Point:n(16),Matrix:n(17),GroupD8:n(18),Circle:n(19),Ellipse:n(21),Polygon:n(22),Rectangle:n(20),RoundedRectangle:n(23)}},function(t,e){function n(t,e){this.x=t||0,this.y=e||0}n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},function(t,e,n){function r(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var i=n(16);r.prototype.constructor=r,t.exports=r,r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},r.prototype.apply=function(t,e){e=e||new i;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new i;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,o=t.y;return e.x=this.d*n*r+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*o+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},r.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},r.prototype.setTransform=function(t,e,n,r,i,o,s,a,u){var h,l,c,f,p,d,g,v,y,m;return p=Math.sin(s),d=Math.cos(s),g=Math.cos(u),v=Math.sin(u),y=-Math.sin(a),m=Math.cos(a),h=d*i,l=p*i,c=-p*o,f=d*o,this.a=g*h+v*c,this.b=g*l+v*f,this.c=y*h+m*c,this.d=y*l+m*f,this.tx=t+(n*h+r*c),this.ty=e+(n*l+r*f),this},r.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.IDENTITY=new r,r.TEMP_MATRIX=new r},function(t,e,n){function r(t){return 0>t?-1:t>0?1:0}function i(){for(var t=0;16>t;t++){var e=[];c.push(e);for(var n=0;16>n;n++)for(var i=r(o[t]*o[n]+a[t]*s[n]),f=r(s[t]*o[n]+u[t]*s[n]),p=r(o[t]*a[n]+a[t]*u[n]),d=r(s[t]*a[n]+u[t]*u[n]),g=0;16>g;g++)if(o[g]===i&&s[g]===f&&a[g]===p&&u[g]===d){e.push(g);break}}for(t=0;16>t;t++){var v=new l;v.set(o[t],s[t],a[t],u[t],0,0),h.push(v)}}var o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],l=n(17),c=[];i();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return o[t]},uY:function(t){return s[t]},vX:function(t){return a[t]},vY:function(t){return u[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][f.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e,n,r){var i=h[f.inv(e)];n=n||0,r=r||0,i.tx=n,i.ty=r,t.append(i)}};t.exports=f},function(t,e,n){function r(t,e,n){this.x=t||0,this.y=e||0,this.radius=n||0,this.type=o.SHAPES.CIRC}var i=n(20),o=n(14);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-e,i=this.radius*this.radius;return n*=n,r*=r,i>=n+r},r.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},function(t,e,n){function r(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.type=i.SHAPES.RECT}var i=n(14);r.prototype.constructor=r,t.exports=r,r.EMPTY=new r(0,0,0,0),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}},function(t,e,n){function r(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.type=o.SHAPES.ELIP}var i=n(20),o=n(14);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return n*=n,r*=r,1>=n+r},r.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},function(t,e,n){function r(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}if(e[0]instanceof i){for(var r=[],s=0,a=e.length;a>s;s++)r.push(e[s].x,e[s].y);e=r}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}var i=n(16),o=n(14);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.points.slice())},r.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;r>i;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],h=this.points[2*o+1],l=a>e!=h>e&&(u-s)*(e-a)/(h-a)+s>t;l&&(n=!n)}return n}},function(t,e,n){function r(t,e,n,r,o){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.radius=o||20,this.type=i.SHAPES.RREC}var i=n(14);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}},function(t,e,n){var r=n(14),i=t.exports={_uid:0,_saidHello:!1,EventEmitter:n(25),pluginTarget:n(26),async:n(27),uid:function(){return++i._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",n=new Image;n.src=t+"AP804Oa6"+e;var r=new Image;r.src=t+"/wCKxvRF"+e;var i=document.createElement("canvas");i.width=6,i.height=1;var o=i.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(n,0,0),o.drawImage(r,2,0);var s=o.getImageData(2,0,1,1).data;return 255===s[0]&&0===s[1]&&0===s[2]},getNextPowerOfTwo:function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},getResolutionOfUrl:function(t){var e=r.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!i._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+r.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+r.VERSION+" - "+t+" - http://www.pixijs.com/");i._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!n||!n.getContextAttributes().stencil)}catch(r){return!1}},sign:function(t){return t?0>t?-1:1:0},removeItems:function(t,e,n){var r=t.length;if(!(e>=r||0===n)){n=e+n>r?r-e:n;for(var i=e,o=r-n;o>i;++i)t[i]=t[i+n];t.length=o}},TextureCache:{},BaseTextureCache:{}}},function(t,e,n){"use strict";function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){}var o=Object.prototype.hasOwnProperty,s="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.eventNames=function(){var t,e=this._events,n=[];if(!e)return n;for(t in e)o.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},i.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events&&this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);o>i;i++)a[i]=r[i].fn;return a},i.prototype.emit=function(t,e,n,r,i,o){var a=s?s+t:t;if(!this._events||!this._events[a])return!1;var u,h,l=this._events[a],c=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(h=1,u=new Array(c-1);c>h;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var f,p=l.length;for(h=0;p>h;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,n);break;default:if(!u)for(f=1,u=new Array(c-1);c>f;f++)u[f-1]=arguments[f];l[h].fn.apply(l[h].context,u)}}return!0},i.prototype.on=function(t,e,n){var i=new r(e,n||this),o=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(t,e,n){var i=new r(e,n||this,!0),o=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(t,e,n,r){var i=s?s+t:t;if(!this._events||!this._events[i])return this;var o=this._events[i],a=[];if(e)if(o.fn)(o.fn!==e||r&&!o.once||n&&o.context!==n)&&a.push(o);else for(var u=0,h=o.length;h>u;u++)(o[u].fn!==e||r&&!o[u].once||n&&o[u].context!==n)&&a.push(o[u]);return a.length?this._events[i]=1===a.length?a[0]:a:delete this._events[i],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[s?s+t:t]:this._events=s?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=s,t.exports=i},function(t,e){function n(t){t.__plugins={},t.registerPlugin=function(e,n){t.__plugins[e]=n},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}t.exports={mixin:function(t){n(t)}}},function(t,e,n){var r,i;(function(n,o,s){!function(){function a(){}function u(t){return t}function h(t){return!!t}function l(t){return!t}function c(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function f(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function p(t){return X(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function d(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function g(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function v(t){return g(Array(t),function(t,e){return e})}function y(t,e,n){return d(t,function(t,r,i){n=e(n,t,r,i)}),n}function m(t,e){d(q(t),function(n){e(t[n],n)})}function x(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function _(t){var e,n,r=-1;return p(t)?(e=t.length,function(){return r++,e>r?r:null}):(n=q(t),e=n.length,function(){return r++,e>r?n[r]:null})}function b(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;n>i;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function E(t){return function(e,n,r){return t(e,r)}}function M(t){return function(e,n,r){r=f(r||a),e=e||[];var i=_(e);if(0>=t)return r(null);var o=!1,s=0,u=!1;!function h(){if(o&&0>=s)return r(null);for(;t>s&&!u;){var a=i();if(null===a)return o=!0,void(0>=s&&r(null));s+=1,n(e[a],a,c(function(t){s-=1,t?(r(t),u=!0):h()}))}}()}}function w(t){return function(e,n,r){return t(j.eachOf,e,n,r)}}function T(t){return function(e,n,r,i){return t(M(n),e,r,i)}}function S(t){return function(e,n,r){return t(j.eachOfSeries,e,n,r)}}function A(t,e,n,r){r=f(r||a),e=e||[];var i=p(e)?[]:{};t(e,function(t,e,r){n(t,function(t,n){i[e]=n,r(t)})},function(t){r(t,i)})}function R(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(g(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function O(t,e,n,r){R(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function C(t,e,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function u(t,r,i){return s?void o(t,function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()}):i()}arguments.length>3?t(r,i,u,a):(s=o,o=i,t(r,u,a))}}function P(t,e){return e}function D(t,e,n){n=n||a;var r=p(e)?[]:{};t(e,function(t,e,n){t(b(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function L(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function F(t,e,n){function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,X(e)||(e=[e]),0===e.length&&t.idle()?j.setImmediate(function(){t.drain()}):(d(e,function(e){var i={data:e,callback:r||a};n?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),void j.setImmediate(t.process))}function i(t,e){return function(){o-=1;var n=!1,r=arguments;d(e,function(t){d(s,function(e,r){e!==t||n||(s.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+o===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,s=[],u={tasks:[],concurrency:e,payload:n,saturated:a,empty:a,drain:a,started:!1,paused:!1,push:function(t,e){r(u,t,!1,e)},kill:function(){u.drain=a,u.tasks=[]},unshift:function(t,e){r(u,t,!0,e)},process:function(){for(;!u.paused&&o<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=g(e,function(t){return t.data});0===u.tasks.length&&u.empty(),o+=1,s.push(e[0]);var r=c(i(u,e));t(n,r)}},length:function(){return u.tasks.length},running:function(){return o},workersList:function(){return s},idle:function(){return u.tasks.length+o===0},pause:function(){u.paused=!0},resume:function(){if(u.paused!==!1){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;t>=e;e++)j.setImmediate(u.process)}}};return u}function N(t){return b(function(e,n){e.apply(null,n.concat([b(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&d(n,function(e){console[t](e)}))})]))})}function B(t){return function(e,n,r){t(v(e),n,r)}}function k(t){return b(function(e,n){var r=b(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function I(t){return b(function(e){var n=e.pop();e.push(function(){var t=arguments;r?j.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}var U,j={},z="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=z&&(U=z.async),j.noConflict=function(){return z.async=U,j};var Y=Object.prototype.toString,X=Array.isArray||function(t){return"[object Array]"===Y.call(t)},H=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},q=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},G="function"==typeof o&&o,W=G?function(t){G(t)}:function(t){setTimeout(t,0)};"object"==typeof s&&"function"==typeof s.nextTick?j.nextTick=s.nextTick:j.nextTick=W,j.setImmediate=G?W:j.nextTick,j.forEach=j.each=function(t,e,n){return j.eachOf(t,E(e),n)},j.forEachSeries=j.eachSeries=function(t,e,n){return j.eachOfSeries(t,E(e),n)},j.forEachLimit=j.eachLimit=function(t,e,n,r){return M(e)(t,E(n),r)},j.forEachOf=j.eachOf=function(t,e,n){function r(t){s--,t?n(t):null===i&&0>=s&&n(null)}n=f(n||a),t=t||[];for(var i,o=_(t),s=0;null!=(i=o());)s+=1,e(t[i],i,c(r));0===s&&n(null)},j.forEachOfSeries=j.eachOfSeries=function(t,e,n){function r(){var s=!0;return null===o?n(null):(e(t[o],o,c(function(t){if(t)n(t);else{if(o=i(),null===o)return n(null);s?j.setImmediate(r):r()}})),void(s=!1))}n=f(n||a),t=t||[];var i=_(t),o=i();r()},j.forEachOfLimit=j.eachOfLimit=function(t,e,n,r){M(e)(t,n,r)},j.map=w(A),j.mapSeries=S(A),j.mapLimit=T(A),j.inject=j.foldl=j.reduce=function(t,e,n,r){j.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},j.foldr=j.reduceRight=function(t,e,n,r){var i=g(t,u).reverse();j.reduce(i,e,n,r)},j.transform=function(t,e,n,r){3===arguments.length&&(r=n,n=e,e=X(t)?[]:{}),j.eachOf(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})},j.select=j.filter=w(R),j.selectLimit=j.filterLimit=T(R),j.selectSeries=j.filterSeries=S(R),j.reject=w(O),j.rejectLimit=T(O),j.rejectSeries=S(O),j.any=j.some=C(j.eachOf,h,u),j.someLimit=C(j.eachOfLimit,h,u),j.all=j.every=C(j.eachOf,l,l),j.everyLimit=C(j.eachOfLimit,l,l),j.detect=C(j.eachOf,u,P),j.detectSeries=C(j.eachOfSeries,u,P),j.detectLimit=C(j.eachOfLimit,u,P),j.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0}j.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){return t?n(t):void n(null,g(e.sort(r),function(t){return t.value}))})},j.auto=function(t,e,n){function r(t){p.unshift(t)}function i(t){var e=x(p,t);e>=0&&p.splice(e,1)}function o(){u--,d(p.slice(0),function(t){t()})}"function"==typeof arguments[1]&&(n=e,e=null),n=f(n||a);var s=q(t),u=s.length;if(!u)return n(null);e||(e=u);var h={},l=0,c=!1,p=[];r(function(){u||n(null,h)}),d(s,function(s){function a(){return e>l&&y(g,function(t,e){return t&&h.hasOwnProperty(e)},!0)&&!h.hasOwnProperty(s)}function u(){a()&&(l++,i(u),p[p.length-1](d,h))}if(!c){for(var f,p=X(t[s])?t[s]:[t[s]],d=b(function(t,e){if(l--,e.length<=1&&(e=e[0]),t){var r={};m(h,function(t,e){r[e]=t}),r[s]=e,c=!0,n(t,r)}else h[s]=e,j.setImmediate(o)}),g=p.slice(0,p.length-1),v=g.length;v--;){if(!(f=t[g[v]]))throw new Error("Has nonexistent dependency in "+g.join(", "));if(X(f)&&x(f,s)>=0)throw new Error("Has cyclic dependencies")}a()?(l++,p[p.length-1](d,h)):r(u)}})},j.retry=function(t,e,n){function r(t,e){if("number"==typeof e)t.times=parseInt(e,10)||o;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||o,t.interval=parseInt(e.interval,10)||s}}function i(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;u.times;){var i=!(u.times-=1);a.push(n(u.task,i)),!i&&u.interval>0&&a.push(r(u.interval))}j.series(a,function(e,n){n=n[n.length-1],(t||u.callback)(n.err,n.result)})}var o=5,s=0,a=[],u={times:o,interval:s},h=arguments.length;if(1>h||h>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=h&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&r(u,t),u.callback=n,u.task=e,u.callback?i():i},j.waterfall=function(t,e){function n(t){return b(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=t.next();o?i.push(n(o)):i.push(e),I(t).apply(null,i)}})}if(e=f(e||a),!X(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void n(j.iterator(t))():e()},j.parallel=function(t,e){D(j.eachOf,t,e)},j.parallelLimit=function(t,e,n){D(M(e),t,n)},j.series=function(t,e){D(j.eachOfSeries,t,e)},j.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},j.apply=b(function(t,e){return b(function(n){return t.apply(null,e.concat(n))})}),j.concat=w(L),j.concatSeries=S(L),j.whilst=function(t,e,n){if(n=n||a,t()){var r=b(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},j.doWhilst=function(t,e,n){var r=0;return j.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},j.until=function(t,e,n){return j.whilst(function(){return!t.apply(this,arguments)},e,n)},j.doUntil=function(t,e,n){return j.doWhilst(t,function(){return!e.apply(this,arguments)},n)},j.during=function(t,e,n){n=n||a;var r=b(function(e,r){e?n(e):(r.push(i),t.apply(this,r))}),i=function(t,i){t?n(t):i?e(r):n(null)};t(i)},j.doDuring=function(t,e,n){var r=0;j.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},j.queue=function(t,e){var n=F(function(e,n){t(e[0],n)},e,1);return n},j.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function r(t,e,n){for(var r=-1,i=t.length-1;i>r;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function i(t,e,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,X(e)||(e=[e]),0===e.length?j.setImmediate(function(){t.drain()}):void d(e,function(e){var s={data:e,priority:i,callback:"function"==typeof o?o:a};t.tasks.splice(r(t.tasks,s,n)+1,0,s),
t.tasks.length===t.concurrency&&t.saturated(),j.setImmediate(t.process)})}var o=j.queue(t,e);return o.push=function(t,e,n){i(o,t,e,n)},delete o.unshift,o},j.cargo=function(t,e){return F(t,1,e)},j.log=N("log"),j.dir=N("dir"),j.memoize=function(t,e){var n={},r={},i=Object.prototype.hasOwnProperty;e=e||u;var o=b(function(o){var s=o.pop(),a=e.apply(null,o);i.call(n,a)?j.setImmediate(function(){s.apply(null,n[a])}):i.call(r,a)?r[a].push(s):(r[a]=[s],t.apply(null,o.concat([b(function(t){n[a]=t;var e=r[a];delete r[a];for(var i=0,o=e.length;o>i;i++)e[i].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},j.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},j.times=B(j.map),j.timesSeries=B(j.mapSeries),j.timesLimit=function(t,e,n,r){return j.mapLimit(v(t),e,n,r)},j.seq=function(){var t=arguments;return b(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=a,j.reduce(t,e,function(t,e,r){e.apply(n,t.concat([b(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},j.compose=function(){return j.seq.apply(null,Array.prototype.reverse.call(arguments))},j.applyEach=k(j.eachOf),j.applyEachSeries=k(j.eachOfSeries),j.forever=function(t,e){function n(t){return t?r(t):void i(n)}var r=c(e||a),i=I(t);n()},j.ensureAsync=I,j.constant=b(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),j.wrapSync=j.asyncify=function(t){return b(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(i){return r(i)}H(n)&&"function"==typeof n.then?n.then(function(t){r(null,t)})["catch"](function(t){r(t.message?t:new Error(t))}):r(null,n)})},"object"==typeof t&&t.exports?t.exports=j:(r=[],i=function(){return j}.apply(e,r),!(void 0!==i&&(t.exports=i)))}()}).call(e,function(){return this}(),n(28).setImmediate,n(29))},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(29).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},h=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=h++,r=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(28).setImmediate,n(28).clearImmediate)},function(t,e){function n(){h=!1,s.length?u=s.concat(u):l=-1,u.length&&r()}function r(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(s=u,u=[];++l<e;)s&&s[l].run();l=-1,e=u.length}s=null,h=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],h=!1,l=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new i(t,e)),1!==u.length||h||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){var r=n(31),i=new r;i.autoStart=!0,t.exports={shared:i,Ticker:r}},function(t,e,n){function r(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(s,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new o,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var i=n(14),o=n(25),s="tick";Object.defineProperties(r.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,i.TARGET_FPMS);this._maxElapsedMS=1/e}}}),r.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(s,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e){return this._emitter.on(s,t,e),this._startIfPossible(),this},r.prototype.addOnce=function(t,e){return this._emitter.once(s,t,e),this._startIfPossible(),this},r.prototype.remove=function(t,e){return this._emitter.off(s,t,e),this._emitter.listeners(s,!0)||this._cancelIfNeeded(),this},r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.update=function(t){var e;t=t||performance.now(),e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*i.TARGET_FPMS*this.speed,this._emitter.emit(s,this.deltaTime),this.lastTime=t},t.exports=r},function(t,e,n){function r(){s.call(this),this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.skew=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new i.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var i=n(15),o=n(33),s=n(25),a=n(14),u=new i.Matrix,h={worldTransform:new i.Matrix,worldAlpha:1,children:[]};r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),r.prototype.updateTransform=function(){var t,e,n,r,i,o,s=this.parent.worldTransform,h=this.worldTransform;this.skew.x||this.skew.y?(u.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),h.a=u.a*s.a+u.b*s.c,h.b=u.a*s.b+u.b*s.d,h.c=u.c*s.a+u.d*s.c,h.d=u.c*s.b+u.d*s.d,h.tx=u.tx*s.a+u.ty*s.c+s.tx,h.ty=u.tx*s.b+u.ty*s.d+s.ty):this.rotation%a.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,n=-this._sr*this.scale.y,r=this._cr*this.scale.y,i=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*t+this.pivot.y*n,o-=this.pivot.x*e+this.pivot.y*r),h.a=t*s.a+e*s.c,h.b=t*s.b+e*s.d,h.c=n*s.a+r*s.c,h.d=n*s.b+r*s.d,h.tx=i*s.a+o*s.c+s.tx,h.ty=i*s.b+o*s.d+s.ty):(t=this.scale.x,r=this.scale.y,i=this.position.x-this.pivot.x*t,o=this.position.y-this.pivot.y*r,h.a=t*s.a,h.b=t*s.b,h.c=r*s.c,h.d=r*s.d,h.tx=i*s.a+o*s.c+s.tx,h.ty=i*s.b+o*s.d+s.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},r.prototype.displayObjectUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(t){return i.Rectangle.EMPTY},r.prototype.getLocalBounds=function(){return this.getBounds(i.Matrix.IDENTITY)},r.prototype.toGlobal=function(t){return this.parent?this.displayObjectUpdateTransform():(this.parent=h,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(t)},r.prototype.toLocal=function(t,e,n){return e&&(t=e.toGlobal(t)),this.parent?this.displayObjectUpdateTransform():(this.parent=h,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(t,n)},r.prototype.renderWebGL=function(t){},r.prototype.renderCanvas=function(t){},r.prototype.generateTexture=function(t,e,n){var r=this.getLocalBounds(),i=new o(t,0|r.width,0|r.height,e,n);return u.tx=-r.x,u.ty=-r.y,i.render(this,u),i},r.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},r.prototype.setTransform=function(t,e,n,r,i,o,s,a,u){return this.position.x=t||0,this.position.y=e||0,this.scale.x=n?n:1,this.scale.y=r?r:1,this.rotation=i||0,this.skew.x=o||0,this.skew.y=s||0,this.pivot.x=a||0,this.pivot.y=u||0,this},r.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},function(t,e,n){function r(t,e,n,r,c){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,n=n||100,c=c||l.RESOLUTION;var f=new i;if(f.width=e,f.height=n,f.resolution=c,f.scaleMode=r||l.SCALE_MODES.DEFAULT,f.hasLoaded=!0,o.call(this,f,new h.Rectangle(0,0,e,n)),this.width=e,this.height=n,this.resolution=c,this.render=null,this.renderer=t,this.renderer.type===l.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;this.textureBuffer=new s(p,this.width,this.height,f.scaleMode,this.resolution),this.baseTexture._glTextures[p.id]=this.textureBuffer.texture,this.filterManager=new a(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,n),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new u(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var i=n(34),o=n(35),s=n(38),a=n(40),u=n(43),h=n(15),l=n(14),c=new h.Matrix;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.resize=function(t,e,n){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,n&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},r.prototype.clear=function(){this.valid&&(this.renderer.type===l.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},r.prototype.renderWebGL=function(t,e,n,r){if(this.valid){if(r=void 0!==r?r:!0,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,r){t.worldTransform.identity(),t.currentBounds=null;var i,o,s=t.children;for(i=0,o=s.length;o>i;++i)s[i].updateTransform()}var a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,n),this.renderer.filterManager=a}},r.prototype.renderCanvas=function(t,e,n,r){if(this.valid){r=!!r;var i=c;i.identity(),e&&i.append(e);var o=t.worldTransform;t.worldTransform=i,t.worldAlpha=1;var s,a,u=t.children;for(s=0,a=u.length;a>s;++s)u[s].updateTransform();n&&this.textureBuffer.clear();var h=this.textureBuffer.context,l=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,h),this.renderer.resolution=l,t.worldTransform===i&&(t.worldTransform=o)}},r.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},r.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},r.prototype.getBase64=function(){return this.getCanvas().toDataURL()},r.prototype.getCanvas=function(){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,n=this.textureBuffer.size.height,r=new Uint8Array(4*e*n);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,n,t.RGBA,t.UNSIGNED_BYTE,r),t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new u(e,n),o=i.context.getImageData(0,0,e,n);return o.data.set(r),i.context.putImageData(o,0,0),i.canvas}return this.textureBuffer.canvas},r.prototype.getPixels=function(){var t,e;if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var n=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var r=new Uint8Array(4*t*e);return n.bindFramebuffer(n.FRAMEBUFFER,this.textureBuffer.frameBuffer),n.readPixels(0,0,t,e,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},r.prototype.getPixel=function(t,e){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var n=this.renderer.gl,r=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,this.textureBuffer.frameBuffer),n.readPixels(t,e,1,1,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},function(t,e,n){function r(t,e,n){s.call(this),this.uid=i.uid(),this.resolution=n||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||o.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},t&&this.loadSource(t)}var i=n(24),o=n(14),s=n(25);r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},r.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var n=this;t.onload=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),n.emit("loaded",n))},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},r.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},r.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},r.fromImage=function(t,e,n){var o=i.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!o){var s=new Image;e&&(s.crossOrigin=""),o=new r(s,n),o.imageUrl=t,s.src=t,i.BaseTextureCache[t]=o,o.resolution=i.getResolutionOfUrl(t)}return o},r.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+i.uid());var n=i.BaseTextureCache[t._pixiId];return n||(n=new r(t,e),i.BaseTextureCache[t._pixiId]=n),n}},function(t,e,n){function r(t,e,n,i,o){if(a.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new u.Rectangle(0,0,1,1)),t instanceof r&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=n||e,this._rotate=+(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";t.hasLoaded?(this.noFrame&&(e=new u.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this)}var i=n(34),o=n(36),s=n(37),a=n(25),u=n(15),h=n(24);r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}}}),r.prototype.update=function(){this.baseTexture.update()},r.prototype.onBaseTextureLoaded=function(t){this.noFrame?this.frame=new u.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.emit("update",this)},r.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},r.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},r.prototype.clone=function(){return new r(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},r.prototype._updateUvs=function(){this._uvs||(this._uvs=new s),this._uvs.set(this.crop,this.baseTexture,this.rotate)},r.fromImage=function(t,e,n){var o=h.TextureCache[t];return o||(o=new r(i.fromImage(t,e,n)),h.TextureCache[t]=o),o},r.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},r.fromCanvas=function(t,e){return new r(i.fromCanvas(t,e))},r.fromVideo=function(t,e){return"string"==typeof t?r.fromVideoUrl(t,e):new r(o.fromVideo(t,e))},r.fromVideoUrl=function(t,e){return new r(o.fromUrl(t,e))},r.addTextureToCache=function(t,e){h.TextureCache[e]=t},r.removeTextureFromCache=function(t){var e=h.TextureCache[t];return delete h.TextureCache[t],delete h.BaseTextureCache[t],e},r.EMPTY=new r(new i)},function(t,e,n){function r(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),o.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function i(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=e,n}var o=n(34),s=n(24);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,t.exports=r,r.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},r.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},r.prototype._onPlayStop=function(){this.autoUpdate=!1},r.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},r.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete s.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),o.prototype.destroy.call(this)},r.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+s.uid());var n=s.BaseTextureCache[t._pixiId];return n||(n=new r(t,e),s.BaseTextureCache[t._pixiId]=n),n},r.fromUrl=function(t,e){var n=document.createElement("video");if(Array.isArray(t))for(var o=0;o<t.length;++o)n.appendChild(i(t[o].src||t[o],t[o].mime));else n.appendChild(i(t.src||t,t.mime));return n.load(),n.play(),r.fromVideo(n,e)},r.fromUrls=r.fromUrl},function(t,e,n){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}t.exports=r;var i=n(18);r.prototype.set=function(t,e,n){var r=e.width,o=e.height;if(n){var s=i.isSwapWidthHeight(n),a=(s?t.height:t.width)/2/r,u=(s?t.width:t.height)/2/o,h=t.x/r+a,l=t.y/o+u;n=i.add(n,i.NW),this.x0=h+a*i.uX(n),this.y0=l+u*i.uY(n),n=i.add(n,2),this.x1=h+a*i.uX(n),this.y1=l+u*i.uY(n),n=i.add(n,2),this.x2=h+a*i.uX(n),this.y2=l+u*i.uY(n),n=i.add(n,2),this.x3=h+a*i.uX(n),this.y3=l+u*i.uY(n)}else this.x0=t.x/r,this.y0=t.y/o,this.x1=(t.x+t.width)/r,this.y1=t.y/o,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/o,this.x3=t.x/r,this.y3=(t.y+t.height)/o}},function(t,e,n){var r=n(15),i=n(24),o=n(14),s=n(39),a=function(t,e,n,a,u,h){if(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new r.Rectangle(0,0,1,1),this.resolution=u||o.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new s,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=a||o.SCALE_MODES.DEFAULT,this.root=h,!this.root){this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST);var l=i.isPowerOfTwo(e,n);l?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}this.resize(e,n)};a.prototype.constructor=a,t.exports=a,a.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},a.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},a.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},a.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},a.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t*this.resolution,e*this.resolution,0,n.RGBA,n.UNSIGNED_BYTE,null),this.stencilBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencilBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var r=this.frame||this.size;this.calculateProjection(r)}},a.prototype.destroy=function(){var t=this.gl;t.deleteRenderbuffer(this.stencilBuffer),t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},function(t,e){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,t.exports=n},function(t,e,n){function r(t){i.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new u.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var i=n(41),o=n(38),s=n(14),a=n(42),u=n(15);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new a(t)},r.prototype.setFilterStack=function(t){this.filterStack=t},r.prototype.pushFilter=function(t,e){var n=t.filterArea?t.filterArea.clone():t.getBounds();n.x=0|n.x,n.y=0|n.y,n.width=0|n.width,n.height=0|n.height;var r=0|e[0].padding;if(n.x-=r,n.y-=r,n.width+=2*r,n.height+=2*r,this.renderer.currentRenderTarget.transform){var i=this.renderer.currentRenderTarget.transform;n.x+=i.tx,n.y+=i.ty,this.capFilterArea(n),n.x-=i.tx,n.y-=i.ty}else this.capFilterArea(n);if(n.width>0&&n.height>0){this.currentFrame=n;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},r.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],n=t.renderTarget;if(t.renderTarget){var r=e.renderTarget,i=this.renderer.gl;this.currentFrame=n.frame,this.quad.map(this.textureSize,n.frame),i.bindBuffer(i.ARRAY_BUFFER,this.quad.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=t.filter;if(i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,i.FLOAT,!1,0,32),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,i.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(s.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,n,r),this.returnRenderTarget(n);else{for(var a=n,u=this.getRenderTarget(!0),h=0;h<o.length-1;h++){var l=o[h];l.uniforms.dimensions&&(l.uniforms.dimensions.value[0]=this.renderer.width,l.uniforms.dimensions.value[1]=this.renderer.height,l.uniforms.dimensions.value[2]=this.quad.vertices[0],l.uniforms.dimensions.value[3]=this.quad.vertices[5]),l.applyFilter(this.renderer,a,u);var c=a;a=u,u=c}o[o.length-1].applyFilter(this.renderer,a,r),this.returnRenderTarget(a),this.returnRenderTarget(u)}return t.filter}},r.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,s.SCALE_MODES.LINEAR,this.renderer.resolution*s.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},r.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},r.prototype.applyFilter=function(t,e,n,r){var i=this.renderer.gl;this.renderer.setRenderTarget(n),r&&n.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),this.renderer.drawCount++},r.prototype.calculateMappedMatrix=function(t,e,n){var r=e.worldTransform.copy(u.Matrix.TEMP_MATRIX),i=e._texture.baseTexture,o=n.identity(),s=this.textureSize.height/this.textureSize.width;o.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),o.scale(1,s);var a=this.textureSize.width/i.width,h=this.textureSize.height/i.height;return r.tx/=i.width*a,r.ty/=i.width*a,r.invert(),o.prepend(r),o.scale(1,1/s),o.scale(a,h),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},r.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var n=0;n<this.texturePool.length;n++)this.texturePool[n].resize(t,e)},r.prototype.destroy=function(){this.quad.destroy(),i.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},function(t,e){function n(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,t.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},function(t,e){function n(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(t,e){var n=0,r=0;this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.upload()},n.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},n.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t.exports=n},function(t,e){function n(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},n.prototype.destroy=function(){
this.context=null,this.canvas=null}},function(t,e,n){function r(){s.call(this),this.children=[]}var i=n(15),o=n(24),s=n(32),a=n(33),u=new i.Matrix;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}}),r.prototype.onChildrenChange=function(){},r.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var n=0;e>n;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},r.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},r.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);if(0>n||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[n]=e,this.children[r]=t,this.onChildrenChange(r>n?n:r)}},r.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},r.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(t);o.removeItems(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},r.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},r.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var n=0;e>n;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(t);if(-1===r)return;t.parent=null,o.removeItems(this.children,r,1),this.onChildrenChange(r),t.emit("removed",this)}return t},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,o.removeItems(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},r.prototype.removeChildren=function(t,e){var n,r,i=t||0,o="number"==typeof e?e:this.children.length,s=o-i;if(s>0&&o>=s){for(n=this.children.splice(i,s),r=0;r<n.length;++r)n[r].parent=null;for(this.onChildrenChange(t),r=0;r<n.length;++r)n[r].emit("removed",this);return n}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.generateTexture=function(t,e,n){var r=this.getLocalBounds(),i=new a(t,0|r.width,0|r.height,n,e);return u.tx=-r.x,u.ty=-r.y,i.render(this,u),i},r.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},r.prototype.containerUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return i.Rectangle.EMPTY;for(var t,e,n,r=1/0,o=1/0,s=-(1/0),a=-(1/0),u=!1,h=0,l=this.children.length;l>h;++h){var c=this.children[h];c.visible&&(u=!0,t=this.children[h].getBounds(),r=r<t.x?r:t.x,o=o<t.y?o:t.y,e=t.width+t.x,n=t.height+t.y,s=s>e?s:e,a=a>n?a:n)}if(!u)return i.Rectangle.EMPTY;var f=this._bounds;f.x=r,f.y=o,f.width=s-r,f.height=a-o,this._currentBounds=f}return this._currentBounds},r.prototype.containerGetBounds=r.prototype.getBounds,r.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=i.Matrix.IDENTITY;for(var e=0,n=this.children.length;n>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(i.Matrix.IDENTITY)},r.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,n;if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&this._filters.length&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,n=this.children.length;n>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,n=this.children.length;n>e;++e)this.children[e].renderWebGL(t)}},r.prototype._renderWebGL=function(t){},r.prototype._renderCanvas=function(t){},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,n=this.children.length;n>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},r.prototype.destroy=function(t){if(s.prototype.destroy.call(this),t)for(var e=0,n=this.children.length;n>e;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},function(t,e,n){function r(t){s.call(this),this.anchor=new i.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=h.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||o.EMPTY}var i=n(15),o=n(35),s=n(44),a=n(46),u=n(24),h=n(14),l=new i.Point,c=i.GroupD8,f=new i.Matrix;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(t){var e=u.sign(this.scale.x)||1;this.scale.x=e*t/this.texture._frame.width,this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(t){var e=u.sign(this.scale.y)||1;this.scale.y=e*t/this.texture._frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),r.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=u.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=u.sign(this.scale.y)*this._height/this.texture.frame.height)},r.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},r.prototype.getBounds=function(t){if(!this._currentBounds){var e,n,r,i,o=this._texture._frame.width,s=this._texture._frame.height,a=o*(1-this.anchor.x),u=o*-this.anchor.x,h=s*(1-this.anchor.y),l=s*-this.anchor.y,c=t||this.worldTransform,f=c.a,p=c.b,d=c.c,g=c.d,v=c.tx,y=c.ty,m=f*u+d*l+v,x=g*l+p*u+y,_=f*a+d*l+v,b=g*l+p*a+y,E=f*a+d*h+v,M=g*h+p*a+y,w=f*u+d*h+v,T=g*h+p*u+y;if(e=m,e=e>_?_:e,e=e>E?E:e,e=e>w?w:e,r=x,r=r>b?b:r,r=r>M?M:r,r=r>T?T:r,n=m,n=_>n?_:n,n=E>n?E:n,n=w>n?w:n,i=x,i=b>i?b:i,i=M>i?M:i,i=T>i?T:i,this.children.length){var S=this.containerGetBounds();a=S.x,u=S.x+S.width,h=S.y,l=S.y+S.height,e=a>e?e:a,r=h>r?r:h,n=n>u?n:u,i=i>l?i:l}var A=this._bounds;A.x=e,A.width=n-e,A.y=r,A.height=i-r,this._currentBounds=A}return this._currentBounds},r.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e,n=this._texture._frame.width,r=this._texture._frame.height,i=-n*this.anchor.x;return l.x>i&&l.x<i+n&&(e=-r*this.anchor.y,l.y>e&&l.y<e+r)},r.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var e=t.blendModes[this.blendMode];if(e!==t.context.globalCompositeOperation&&(t.context.globalCompositeOperation=e),this.texture.valid){var n,r,i=this._texture,o=this.worldTransform,s=i.crop.width,u=i.crop.height;t.context.globalAlpha=this.worldAlpha;var l=i.baseTexture.scaleMode===h.SCALE_MODES.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==l&&(t.context[t.smoothProperty]=l),2===(3&i.rotate)&&(s=i.crop.height,u=i.crop.width),i.trim?(n=i.crop.width/2+i.trim.x-this.anchor.x*i.trim.width,r=i.crop.height/2+i.trim.y-this.anchor.y*i.trim.height):(n=(.5-this.anchor.x)*i._frame.width,r=(.5-this.anchor.y)*i._frame.height),i.rotate&&(o.copy(f),o=f,c.matrixAppendRotationInv(o,i.rotate,n,r),n=0,r=0),n-=s/2,r-=u/2,t.roundPixels?(t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution|0,o.ty*t.resolution|0),n=0|n,r=0|r):t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution,o.ty*t.resolution);var p=i.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,s*p,u*p,n*t.resolution,r*t.resolution,s*t.resolution,u*t.resolution)):t.context.drawImage(i.baseTexture.source,i.crop.x*p,i.crop.y*p,s*p,u*p,n*t.resolution,r*t.resolution,s*t.resolution,u*t.resolution)}}},r.prototype.destroy=function(t,e){s.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},r.fromFrame=function(t){var e=u.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new r(e)},r.fromImage=function(t,e,n){return new r(o.fromImage(t,e,n))}},function(t,e,n){var r=n(24),i={};t.exports=i,i.getTintedTexture=function(t,e){var n=t.texture;e=i.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[r])return n.tintCache[r];var o=i.canvas||document.createElement("canvas");if(i.tintMethod(n,e,o),i.convertTintToImage){var s=new Image;s.src=o.toDataURL(),n.tintCache[r]=s}else n.tintCache[r]=o,i.canvas=null;return o},i.tintWithMultiply=function(t,e,n){var r=n.getContext("2d"),i=t.baseTexture.resolution,o=t.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,n.width=o.width,n.height=o.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,o.width,o.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithOverlay=function(t,e,n){var r=n.getContext("2d"),i=t.baseTexture.resolution,o=t.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,n.width=o.width,n.height=o.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,o.width,o.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithPerPixel=function(t,e,n){var i=n.getContext("2d"),o=t.baseTexture.resolution,s=t.crop.clone();s.x*=o,s.y*=o,s.width*=o,s.height*=o,n.width=s.width,n.height=s.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var a=r.hex2rgb(e),u=a[0],h=a[1],l=a[2],c=i.getImageData(0,0,s.width,s.height),f=c.data,p=0;p<f.length;p+=4)f[p+0]*=u,f[p+1]*=h,f[p+2]*=l;i.putImageData(c,0,0)},i.roundColor=function(t){var e=i.cacheStepsPerColorChannel,n=r.hex2rgb(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),r.rgb2hex(n)},i.cacheStepsPerColorChannel=8,i.convertTintToImage=!1,i.canUseMultiply=r.canUseNewCanvasBlendModes(),i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},function(t,e,n){function r(t,e,n){i.call(this),n=n||15e3,t=t||15e3;var r=16384;n>r&&(n=r),n>t&&(n=t),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=n,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=o.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var i=n(44),o=n(14);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},r.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,s=0,a=0,u=t.blendModes[this.blendMode];u!==e.globalCompositeOperation&&(e.globalCompositeOperation=u),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var c=l.texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)===0)r&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),r=!1),i=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,s=c.width*l.scale.x,a=c.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var f=l.worldTransform;t.roundPixels?e.setTransform(f.a,f.b,f.c,f.d,0|f.tx,0|f.ty):e.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),i=l.anchor.x*-c.width+.5,o=l.anchor.y*-c.height+.5,s=c.width,a=c.height}e.drawImage(l.texture.baseTexture.source,c.x,c.y,c.width,c.height,i,o,s,a)}}}},r.prototype.destroy=function(){if(i.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},function(t,e,n){function r(t){i.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=s.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,n=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(n);for(var r=0,o=0;n>r;r+=6,o+=4)this.indices[r+0]=o+0,this.indices[r+1]=o+1,this.indices[r+2]=o+2,this.indices[r+3]=o+0,this.indices[r+4]=o+2,this.indices[r+5]=o+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var i=n(49),o=n(50),s=n(14);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,o.registerPlugin("sprite",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},r.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var n=e._uvs;if(n){var r,i,o,s,a=t.anchor.x,u=t.anchor.y;if(e.trim&&void 0===t.tileScale){var h=e.trim;i=h.x-a*h.width,r=i+e.crop.width,s=h.y-u*h.height,o=s+e.crop.height}else r=e._frame.width*(1-a),i=e._frame.width*-a,o=e._frame.height*(1-u),s=e._frame.height*-u;var l=this.currentBatchSize*this.vertByteSize,c=t.worldTransform,f=c.a,p=c.b,d=c.c,g=c.d,v=c.tx,y=c.ty,m=this.colors,x=this.positions;if(this.renderer.roundPixels){var _=this.renderer.resolution;x[l]=((f*i+d*s+v)*_|0)/_,x[l+1]=((g*s+p*i+y)*_|0)/_,x[l+5]=((f*r+d*s+v)*_|0)/_,x[l+6]=((g*s+p*r+y)*_|0)/_,x[l+10]=((f*r+d*o+v)*_|0)/_,x[l+11]=((g*o+p*r+y)*_|0)/_,x[l+15]=((f*i+d*o+v)*_|0)/_,x[l+16]=((g*o+p*i+y)*_|0)/_}else x[l]=f*i+d*s+v,x[l+1]=g*s+p*i+y,x[l+5]=f*r+d*s+v,x[l+6]=g*s+p*r+y,x[l+10]=f*r+d*o+v,x[l+11]=g*o+p*r+y,x[l+15]=f*i+d*o+v,x[l+16]=g*o+p*i+y;x[l+2]=n.x0,x[l+3]=n.y0,x[l+7]=n.x1,x[l+8]=n.y1,x[l+12]=n.x2,x[l+13]=n.y2,x[l+17]=n.x3,x[l+18]=n.y3;var b=t.tint;m[l+4]=m[l+9]=m[l+14]=m[l+19]=(b>>16)+(65280&b)+((255&b)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},r.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var n=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,n)}for(var r,i,o,s,a=0,u=0,h=null,l=this.renderer.blendModeManager.currentBlendMode,c=null,f=!1,p=!1,d=0,g=this.currentBatchSize;g>d;d++)s=this.sprites[d],r=s._texture.baseTexture,i=s.blendMode,o=s.shader||this.shader,f=l!==i,p=c!==o,(h!==r||f||p)&&(this.renderBatch(h,a,u),u=d,a=0,h=r,f&&(l=i,this.renderer.blendModeManager.setBlendMode(l)),p&&(c=o,t=c.shaders?c.shaders[e.id]:c,t||(t=c.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),a++;this.renderBatch(h,a,u),this.currentBatchSize=0}},r.prototype.renderBatch=function(t,e,n){if(0!==e){var r=this.renderer.gl;t._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]):this.renderer.updateTexture(t),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*n*2),this.renderer.drawCount++}},r.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},r.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},function(t,e,n){function r(t){i.call(this,t)}var i=n(41);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.flush=function(){},r.prototype.render=function(t){}},function(t,e,n){function r(t,e,n){n=n||{},i.call(this,"WebGL",t,e,n),this.type=d.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!n.forceFXAA&&n.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:n.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new o(this),this.maskManager=new s(this),this.stencilManager=new a(this),this.filterManager=new u(this),this.blendModeManager=new h(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var i=n(51),o=n(52),s=n(57),a=n(61),u=n(40),h=n(62),l=n(38),c=n(49),f=n(63),p=n(24),d=n(14);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,p.pluginTarget.mixin(r),r.glContextId=0,r.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=r.glContextId++,t.id=this.glContextId,t.renderer=this},r.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new l(t,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new f])},r.prototype.render=function(t){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var n=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?n.clearColor(0,0,0,0):n.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),n.clear(n.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget),this.emit("postrender")}},r.prototype.renderDisplayObject=function(t,e,n){this.setRenderTarget(e),n&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},r.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},r.prototype.updateTexture=function(t){if(t=t.baseTexture||t,t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===d.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===d.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===d.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},r.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.gl.id]&&(this.gl.deleteTexture(t._glTextures[this.gl.id]),delete t._glTextures[this.gl.id],!e)){var n=this._managedTextures.indexOf(t);-1!==n&&p.removeItems(this._managedTextures,n,1)}},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this._initContext();for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.gl.id]&&delete e._glTextures[this.gl.id]}},r.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var e=0;e<this._managedTextures.length;++e){var n=this._managedTextures[e];this.destroyTexture(n,!0),n.off("update",this.updateTexture,this),n.off("dispose",this.destroyTexture,this)}i.prototype.destroy.call(this,t),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl.flush(),this.gl=null},r.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[d.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],this.blendModes[d.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[d.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[d.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[d.DRAW_MODES.LINES]=t.LINES,this.drawModes[d.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[d.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[d.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[d.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[d.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},function(t,e,n){function r(t,e,n,r){if(a.call(this),i.sayHello(t),r)for(var u in s.DEFAULT_RENDER_OPTIONS)"undefined"==typeof r[u]&&(r[u]=s.DEFAULT_RENDER_OPTIONS[u]);else r=s.DEFAULT_RENDER_OPTIONS;this.type=s.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=n||600,this.view=r.view||document.createElement("canvas"),this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.roundPixels=r.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=r.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var i=n(24),o=n(15),s=n(14),a=n(25);r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=i.hex2string(t),i.hex2rgb(t,this._backgroundColorRgb)}}}),r.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},r.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},function(t,e,n){function r(t){i.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var i=n(41),o=n(53),s=n(55),a=n(56),u=n(24);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,u.pluginTarget.mixin(r),t.exports=r,r.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new o(this),this.primitiveShader=new a(this),this.complexPrimitiveShader=new s(this)},r.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var n in t)this.tempAttribState[t[n]]=!0;var r=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},r.prototype.setShader=function(t){return this._currentId===t.uid?!1:(this._currentId=t.uid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},r.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),i.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},function(t,e,n){function r(t,e,n,o,s){var a={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(o)for(var u in o)a[u]=o[u];var h={aVertexPosition:0,aTextureCoord:0,aColor:0};if(s)for(var l in s)h[l]=s[l];e=e||r.defaultVertexSrc,n=n||r.defaultFragmentSrc,i.call(this,t,e,n,a,h)}var i=n(54);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),r.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},function(t,e,n){function r(t,e,n,r,o){if(!e||!n)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=i.uid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=r||{},this.attributes=o||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=n,this.init()}var i=n(24);r.prototype.constructor=r,t.exports=r,r.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},r.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},r.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},r.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),n=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),r=t.createProgram();
return t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(r,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(r)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(r)),t.deleteProgram(r),r=null),t.deleteShader(e),t.deleteShader(n),this.program=r},r.prototype.syncUniform=function(t){var e,n,r=t._location,o=t.value,s=this.gl;switch(t.type){case"b":case"bool":case"boolean":s.uniform1i(r,o?1:0);break;case"i":case"1i":s.uniform1i(r,o);break;case"f":case"1f":s.uniform1f(r,o);break;case"2f":s.uniform2f(r,o[0],o[1]);break;case"3f":s.uniform3f(r,o[0],o[1],o[2]);break;case"4f":s.uniform4f(r,o[0],o[1],o[2],o[3]);break;case"v2":s.uniform2f(r,o.x,o.y);break;case"v3":s.uniform3f(r,o.x,o.y,o.z);break;case"v4":s.uniform4f(r,o.x,o.y,o.z,o.w);break;case"1iv":s.uniform1iv(r,o);break;case"2iv":s.uniform2iv(r,o);break;case"3iv":s.uniform3iv(r,o);break;case"4iv":s.uniform4iv(r,o);break;case"1fv":s.uniform1fv(r,o);break;case"2fv":s.uniform2fv(r,o);break;case"3fv":s.uniform3fv(r,o);break;case"4fv":s.uniform4fv(r,o);break;case"m2":case"mat2":case"Matrix2fv":s.uniformMatrix2fv(r,t.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":s.uniformMatrix3fv(r,t.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":s.uniformMatrix4fv(r,t.transpose,o);break;case"c":"number"==typeof o&&(o=i.hex2rgb(o)),s.uniform3f(r,o[0],o[1],o[2]);break;case"iv1":s.uniform1iv(r,o);break;case"iv":s.uniform3iv(r,o);break;case"fv1":s.uniform1fv(r,o);break;case"fv":s.uniform3fv(r,o);break;case"v2v":for(t._array||(t._array=new Float32Array(2*o.length)),e=0,n=o.length;n>e;++e)t._array[2*e]=o[e].x,t._array[2*e+1]=o[e].y;s.uniform2fv(r,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*o.length)),e=0,n=o.length;n>e;++e)t._array[3*e]=o[e].x,t._array[3*e+1]=o[e].y,t._array[3*e+2]=o[e].z;s.uniform3fv(r,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*o.length)),e=0,n=o.length;n>e;++e)t._array[4*e]=o[e].x,t._array[4*e+1]=o[e].y,t._array[4*e+2]=o[e].z,t._array[4*e+3]=o[e].w;s.uniform4fv(r,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;s.activeTexture(s["TEXTURE"+this.textureCount]);var a=t.value.baseTexture._glTextures[s.id];a||(this.initSampler2D(t),a=t.value.baseTexture._glTextures[s.id]),s.bindTexture(s.TEXTURE_2D,a),s.uniform1i(t._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+t.type)}},r.prototype.syncUniforms=function(){this.textureCount=1;for(var t in this.uniforms)this.syncUniform(this.uniforms[t])},r.prototype.initSampler2D=function(t){var e=this.gl,n=t.value.baseTexture;if(n.hasLoaded)if(t.textureData){var r=t.textureData;n._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,n._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,r.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.magFilter?r.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r.wrapS?r.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r.wrapS?r.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r.wrapT?r.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(n)},r.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},r.prototype._glCompile=function(t,e){var n=this.gl.createShader(t);return this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(console.log(this.gl.getShaderInfoLog(n)),null)}},function(t,e,n){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var i=n(54);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var i=n(54);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){function r(t){i.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var i=n(41),o=n(58);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},r.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},r.prototype.pushSpriteMask=function(t,e){var n=this.alphaMaskPool.pop();n||(n=[new o(e)]),n[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,n)},r.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},r.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},r.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},function(t,e,n){(function(e){function r(t){var n=new o.Matrix;i.call(this,s.readFileSync(e+"/spriteMaskFilter.vert","utf8"),s.readFileSync(e+"/spriteMaskFilter.frag","utf8"),{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:n.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=n}var i=n(59),o=n(15),s=n(60);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,r.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var i=this.getShader(t);r.applyFilter(i,e,n)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})}).call(e,"/")},function(t,e,n){function r(t,e,n){this.shaders=[],this.padding=0,this.uniforms=n||{},this.vertexSrc=t||i.defaultVertexSrc,this.fragmentSrc=e||i.defaultFragmentSrc}var i=n(53);r.prototype.constructor=r,t.exports=r,r.prototype.getShader=function(t){var e=t.gl,n=this.shaders[e.id];return n||(n=new i(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=n),n},r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);t.filterManager.applyFilter(i,e,n,r)},r.prototype.syncUniform=function(t){for(var e=0,n=this.shaders.length;n>e;++e)this.shaders[e].syncUniform(t)}},function(t,e){console.log("I'm `fs` modules")},function(t,e,n){function r(t){i.call(this,t),this.stencilMaskStack=null}var i=n(41),o=n(24);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},r.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var n=this.renderer.gl,r=this.stencilMaskStack;this.bindGraphics(t,e),0===r.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),r.reverse=!0,r.count=0),r.stencilStack.push(e);var i=r.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===e.mode?(n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),r.reverse?(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),r.reverse?n.stencilFunc(n.EQUAL,255-(i+1),255):n.stencilFunc(n.EQUAL,i+1,255),r.reverse=!r.reverse):(r.reverse?(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),r.reverse?n.stencilFunc(n.EQUAL,i+1,255):n.stencilFunc(n.EQUAL,255-(i+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),r.count++},r.prototype.bindGraphics=function(t,e){var n,r=this.renderer.gl;1===e.mode?(n=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(n),r.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(n.uniforms.tint._location,o.hex2rgb(t.tint)),r.uniform3fv(n.uniforms.color._location,e.color),r.uniform1f(n.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,8,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(n=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(n),r.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(n.uniforms.tint._location,o.hex2rgb(t.tint)),r.uniform1f(n.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(n.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},r.prototype.popStencil=function(t,e){var n=this.renderer.gl,r=this.stencilMaskStack;if(r.stencilStack.pop(),r.count--,0===r.stencilStack.length)n.disable(n.STENCIL_TEST);else{var i=r.count;this.bindGraphics(t,e),n.colorMask(!1,!1,!1,!1),1===e.mode?(r.reverse=!r.reverse,r.reverse?(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,r.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)):(r.reverse?(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.renderer.drawCount++,r.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0])},r.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0])}},function(t,e,n){function r(t){i.call(this,t),this.currentBlendMode=99999}var i=n(41);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},function(t,e,n){(function(e){function r(){i.call(this,o.readFileSync(e+"/FXAA.vert","utf8"),o.readFileSync(e+"/FXAA.frag","utf8"),{resolution:{type:"v2",value:{x:1,y:1}}})}var i=n(59),o=n(60);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager,i=this.getShader(t);r.applyFilter(i,e,n)}}).call(e,"/")},function(t,e,n){function r(t){i.call(this,t);var e=98304;this.indices=new Uint16Array(e);for(var n=0,r=0;e>n;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new u.Matrix}var i=n(49),o=n(50),s=n(65),a=n(66),u=n(15);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,o.registerPlugin("particle",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},r.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},r.prototype.render=function(t){var e=t.children,n=e.length,r=t._maxSize,i=t._batchSize;if(0!==n){n>r&&(n=r),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var o=this.renderer.gl,s=t.worldTransform.copy(this.tempMatrix);s.prepend(this.renderer.currentRenderTarget.projectionMatrix),o.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,s.toArray(!0)),o.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var a=e[0]._texture.baseTexture;if(a._glTextures[o.id])o.bindTexture(o.TEXTURE_2D,a._glTextures[o.id]);else{if(!this.renderer.updateTexture(a))return;t._properties[0]&&t._properties[3]||(t._bufferToUpdate=0)}for(var u=0,h=0;n>u;u+=i,h+=1){var l=n-u;l>i&&(l=i);var c=t._buffers[h];c.uploadDynamic(e,u,l),t._bufferToUpdate===h&&(c.uploadStatic(e,u,l),t._bufferToUpdate=h+1),c.bind(this.shader),o.drawElements(o.TRIANGLES,6*l,o.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},r.prototype.generateBuffers=function(t){var e,n=this.renderer.gl,r=[],i=t._maxSize,o=t._batchSize,s=t._properties;for(e=0;i>e;e+=o)r.push(new a(n,this.properties,s,o));return r},r.prototype.uploadVertices=function(t,e,n,r,i,o){for(var s,a,u,h,l,c,f,p,d,g=0;n>g;g++)s=t[e+g],a=s._texture,h=s.scale.x,l=s.scale.y,a.trim?(u=a.trim,f=u.x-s.anchor.x*u.width,c=f+a.crop.width,d=u.y-s.anchor.y*u.height,p=d+a.crop.height):(c=a._frame.width*(1-s.anchor.x),f=a._frame.width*-s.anchor.x,p=a._frame.height*(1-s.anchor.y),d=a._frame.height*-s.anchor.y),r[o]=f*h,r[o+1]=d*l,r[o+i]=c*h,r[o+i+1]=d*l,r[o+2*i]=c*h,r[o+2*i+1]=p*l,r[o+3*i]=f*h,r[o+3*i+1]=p*l,o+=4*i},r.prototype.uploadPosition=function(t,e,n,r,i,o){for(var s=0;n>s;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+2*i]=a.x,r[o+2*i+1]=a.y,r[o+3*i]=a.x,r[o+3*i+1]=a.y,o+=4*i}},r.prototype.uploadRotation=function(t,e,n,r,i,o){for(var s=0;n>s;s++){var a=t[e+s].rotation;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},r.prototype.uploadUvs=function(t,e,n,r,i,o){for(var s=0;n>s;s++){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+2*i]=a.x2,r[o+2*i+1]=a.y2,r[o+3*i]=a.x3,r[o+3*i+1]=a.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},r.prototype.uploadAlpha=function(t,e,n,r,i,o){for(var s=0;n>s;s++){var a=t[e+s].alpha;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},r.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},function(t,e,n){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var i=n(53);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e){function n(t,e,n,r){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;i++){var o=e[i];n[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,t.exports=n,n.prototype.initBuffers=function(){var t,e,n=this.gl,r=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=r,r+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferData(n.ARRAY_BUFFER,this.dynamicData,n.DYNAMIC_DRAW);var i=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=i,i+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferData(n.ARRAY_BUFFER,this.staticData,n.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(t,e,n){for(var r=this.gl,i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,e,n,this.dynamicData,this.dynamicStride,o.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(t,e,n){for(var r=this.gl,i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,e,n,this.staticData,this.staticStride,o.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var t,e,n=this.gl;for(n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],n.vertexAttribPointer(e.attribute,e.size,n.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],n.vertexAttribPointer(e.attribute,e.size,n.FLOAT,!1,4*this.staticStride,4*e.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},function(t,e,n){function r(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||u.RESOLUTION,this._text=null,this._style=null;var r=o.fromCanvas(this.canvas);r.trim=new s.Rectangle,i.call(this,r),this.text=t,this.style=e}var i=n(45),o=n(35),s=n(15),a=n(24),u=n(14);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.fontPropertiesCache={},r.fontPropertiesCanvas=document.createElement("canvas"),r.fontPropertiesContext=r.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(r.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){t=t||{},"number"==typeof t.fill&&(t.fill=a.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=a.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=a.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.breakWords=t.breakWords||!1,t.letterSpacing=t.letterSpacing||0,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:5,t.dropShadowBlur=void 0!==t.dropShadowBlur?t.dropShadowBlur:0,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),r.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,n=e.split(/(?:\r\n|\r|\n)/),r=new Array(n.length),i=0,o=this.determineFontProperties(t.font),s=0;s<n.length;s++){var a=this.context.measureText(n[s]).width+(n[s].length-1)*t.letterSpacing;r[s]=a,i=Math.max(i,a)}var u=i+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance),this.canvas.width=Math.ceil((u+this.context.lineWidth)*this.resolution);var h=this.style.lineHeight||o.fontSize+t.strokeThickness,l=h*n.length;t.dropShadow&&(l+=t.dropShadowDistance),this.canvas.height=Math.ceil((l+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var c,f;if(t.dropShadow){t.dropShadowBlur>0?(this.context.shadowColor=t.dropShadowColor,this.context.shadowBlur=t.dropShadowBlur):this.context.fillStyle=t.dropShadowColor;var p=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,d=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(s=0;s<n.length;s++)c=t.strokeThickness/2,f=t.strokeThickness/2+s*h+o.ascent,"right"===t.align?c+=i-r[s]:"center"===t.align&&(c+=(i-r[s])/2),t.fill&&this.drawLetterSpacing(n[s],c+p,f+d+t.padding)}for(this.context.fillStyle=t.fill,s=0;s<n.length;s++)c=t.strokeThickness/2,f=t.strokeThickness/2+s*h+o.ascent,"right"===t.align?c+=i-r[s]:"center"===t.align&&(c+=(i-r[s])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(n[s],c,f+t.padding,!0),t.fill&&this.drawLetterSpacing(n[s],c,f+t.padding);this.updateTexture()},r.prototype.drawLetterSpacing=function(t,e,n,r){var i=this._style,o=i.letterSpacing;if(0===o)return void(r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));for(var s,a=String.prototype.split.call(t,""),u=0,h=e;u<t.length;)s=a[u++],r?this.context.strokeText(s,h,n):this.context.fillText(s,h,n),h+=this.context.measureText(s).width+o},r.prototype.updateTexture=function(){var t=this._texture,e=this._style;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-e.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*e.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},r.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),i.prototype.renderWebGL.call(this,t)},r.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),i.prototype._renderCanvas.call(this,t)},r.prototype.determineFontProperties=function(t){var e=r.fontPropertiesCache[t];if(!e){e={};var n=r.fontPropertiesCanvas,i=r.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|Mq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,n.width=o,n.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,s);var u,h,l=i.getImageData(0,0,o,a).data,c=l.length,f=4*o,p=0,d=!1;for(u=0;s>u;u++){for(h=0;f>h;h+=4)if(255!==l[p+h]){d=!0;break}if(d)break;p+=f}for(e.ascent=s-u,p=c-f,d=!1,u=a;u>s;u--){for(h=0;f>h;h+=4)if(255!==l[p+h]){d=!0;break}if(d)break;p-=f}e.descent=u-s,e.fontSize=e.ascent+e.descent,r.fontPropertiesCache[t]=e}return e},r.prototype.wordWrap=function(t){for(var e="",n=t.split("\n"),r=this._style.wordWrapWidth,i=0;i<n.length;i++){for(var o=r,s=n[i].split(" "),a=0;a<s.length;a++){var u=this.context.measureText(s[a]).width;if(this._style.breakWords&&u>r)for(var h=s[a].split(""),l=0;l<h.length;l++){var c=this.context.measureText(h[l]).width;c>o?(e+="\n"+h[l],o=r-c):(0===l&&(e+=" "),e+=h[l],o-=c)}else{var f=u+this.context.measureText(" ").width;0===a||f>o?(a>0&&(e+="\n"),e+=s[a],o=r-u):(o-=f,e+=" "+s[a])}}i<n.length-1&&(e+="\n")}return e},r.prototype.getBounds=function(t){return this.dirty&&this.updateText(),i.prototype.getBounds.call(this,t)},r.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t?!0:t)}},function(t,e,n){function r(){i.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new h.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var i=n(44),o=n(35),s=n(43),a=n(69),u=n(70),h=n(15),l=n(14),c=new h.Point;r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){var t=new r;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=!0,t.glDirty=!0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},r.prototype.lineStyle=function(t,e,n){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===n?1:n,this.currentPath)if(this.currentPath.shape.points.length){var r=new h.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},r.prototype.moveTo=function(t,e){var n=new h.Polygon([t,e]);return n.closed=!1,this.drawShape(n),this},r.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},r.prototype.quadraticCurveTo=function(t,e,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,s=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var u=a[a.length-2],h=a[a.length-1],l=0,c=1;s>=c;++c)l=c/s,i=u+(t-u)*l,o=h+(e-h)*l,a.push(i+(t+(n-t)*l-i)*l,o+(e+(r-e)*l-o)*l);return this.dirty=this.boundsDirty=!0,this},r.prototype.bezierCurveTo=function(t,e,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,u,h,l,c=20,f=this.currentPath.shape.points,p=f[f.length-2],d=f[f.length-1],g=0,v=1;c>=v;++v)g=v/c,s=1-g,a=s*s,u=a*s,h=g*g,l=h*g,f.push(u*p+3*a*g*t+3*s*h*n+l*i,u*d+3*a*g*e+3*s*h*r+l*o);return this.dirty=this.boundsDirty=!0,this},r.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],u=a-e,h=s-t,l=r-e,c=n-t,f=Math.abs(u*c-h*l);if(1e-8>f||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var p=u*u+h*h,d=l*l+c*c,g=u*l+h*c,v=i*Math.sqrt(p)/f,y=i*Math.sqrt(d)/f,m=v*g/p,x=y*g/d,_=v*c+y*h,b=v*l+y*u,E=h*(y+m),M=u*(y+m),w=c*(v+x),T=l*(v+x),S=Math.atan2(M-b,E-_),A=Math.atan2(T-b,w-_);this.arc(_+t,b+e,i,S,A,h*l>c*u)}return this.dirty=this.boundsDirty=!0,this},r.prototype.arc=function(t,e,n,r,i,o){if(o=o||!1,r===i)return this;!o&&r>=i?i+=2*Math.PI:o&&i>=r&&(r+=2*Math.PI);var s=o?-1*(r-i):i-r,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var u=t+Math.cos(r)*n,h=e+Math.sin(r)*n;this.currentPath?this.currentPath.shape.points.push(u,h):this.moveTo(u,h);for(var l=this.currentPath.shape.points,c=s/(2*a),f=2*c,p=Math.cos(c),d=Math.sin(c),g=a-1,v=g%1/g,y=0;g>=y;y++){var m=y+v*y,x=c+r+f*m,_=Math.cos(x),b=-Math.sin(x);l.push((p*_+d*b)*n+t,(p*-b+d*_)*n+e)}return this.dirty=this.boundsDirty=!0,this},r.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},r.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},r.prototype.drawRect=function(t,e,n,r){return this.drawShape(new h.Rectangle(t,e,n,r)),this},r.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new h.RoundedRectangle(t,e,n,r,i)),this},r.prototype.drawCircle=function(t,e,n){return this.drawShape(new h.Circle(t,e,n)),this},r.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new h.Ellipse(t,e,n,r)),this},r.prototype.drawPolygon=function(t){
var e=t,n=!0;if(e instanceof h.Polygon&&(n=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var i=new h.Polygon(e);return i.closed=n,this.drawShape(i),this},r.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},r.prototype.generateTexture=function(t,e,n){e=e||1;var r=this.getLocalBounds(),i=new s(r.width*e,r.height*e),u=o.fromCanvas(i.canvas,n);return u.baseTexture.resolution=e,i.context.scale(e,e),i.context.translate(-r.x,-r.y),a.renderGraphics(this,i.context),u},r.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},r.prototype._renderCanvas=function(t){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0);var e=t.context,n=this.worldTransform,r=t.blendModes[this.blendMode];r!==e.globalCompositeOperation&&(e.globalCompositeOperation=r);var i=t.resolution;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),a.renderGraphics(this,e)}},r.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return h.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,n=e.x,r=e.width+e.x,i=e.y,o=e.height+e.y,s=t||this.worldTransform,a=s.a,u=s.b,l=s.c,c=s.d,f=s.tx,p=s.ty,d=a*r+l*o+f,g=c*o+u*r+p,v=a*n+l*o+f,y=c*o+u*n+p,m=a*n+l*i+f,x=c*i+u*n+p,_=a*r+l*i+f,b=c*i+u*r+p,E=d,M=g,w=d,T=g;w=w>v?v:w,w=w>m?m:w,w=w>_?_:w,T=T>y?y:T,T=T>x?x:T,T=T>b?b:T,E=v>E?v:E,E=m>E?m:E,E=_>E?_:E,M=y>M?y:M,M=x>M?x:M,M=b>M?b:M,this._bounds.x=w,this._bounds.width=E-w,this._bounds.y=T,this._bounds.height=M-T,this._currentBounds=this._bounds}return this._currentBounds},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);for(var e=this.graphicsData,n=0;n<e.length;n++){var r=e[n];if(r.fill&&r.shape&&r.shape.contains(c.x,c.y))return!0}return!1},r.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),n=1/0,r=-(1/0);if(this.graphicsData.length)for(var i,o,s,a,u,h,c=0;c<this.graphicsData.length;c++){var f=this.graphicsData[c],p=f.type,d=f.lineWidth;if(i=f.shape,p===l.SHAPES.RECT||p===l.SHAPES.RREC)s=i.x-d/2,a=i.y-d/2,u=i.width+d,h=i.height+d,t=t>s?s:t,e=s+u>e?s+u:e,n=n>a?a:n,r=a+h>r?a+h:r;else if(p===l.SHAPES.CIRC)s=i.x,a=i.y,u=i.radius+d/2,h=i.radius+d/2,t=t>s-u?s-u:t,e=s+u>e?s+u:e,n=n>a-h?a-h:n,r=a+h>r?a+h:r;else if(p===l.SHAPES.ELIP)s=i.x,a=i.y,u=i.width+d/2,h=i.height+d/2,t=t>s-u?s-u:t,e=s+u>e?s+u:e,n=n>a-h?a-h:n,r=a+h>r?a+h:r;else{o=i.points;for(var g=0;g<o.length;g+=2)s=o[g],a=o[g+1],t=t>s-d?s-d:t,e=s+d>e?s+d:e,n=n>a-d?a-d:n,r=a+d>r?a+d:r}}else t=0,e=0,n=0,r=0;var v=this.boundsPadding;this._localBounds.x=t-v,this._localBounds.width=e-t+2*v,this._localBounds.y=n-v,this._localBounds.height=r-n+2*v},r.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===l.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},r.prototype.destroy=function(){i.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var n=0;n<this._webgl[e].data.length;++n)this._webgl[e].data[n].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},function(t,e,n){var r=n(14),i={};t.exports=i,i.renderGraphics=function(t,e){var n=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=o.shape,a=o._fillTint,u=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===r.SHAPES.POLY){e.beginPath();var h=s.points;e.moveTo(h[0],h[1]);for(var l=1;l<h.length/2;l++)e.lineTo(h[2*l],h[2*l+1]);s.closed&&e.lineTo(h[0],h[1]),h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===r.SHAPES.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===r.SHAPES.CIRC)e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke());else if(o.type===r.SHAPES.ELIP){var c=2*s.width,f=2*s.height,p=s.x-c/2,d=s.y-f/2;e.beginPath();var g=.5522848,v=c/2*g,y=f/2*g,m=p+c,x=d+f,_=p+c/2,b=d+f/2;e.moveTo(p,b),e.bezierCurveTo(p,b-y,_-v,d,_,d),e.bezierCurveTo(_+v,d,m,b-y,m,b),e.bezierCurveTo(m,b+y,_+v,x,_,x),e.bezierCurveTo(_-v,x,p,b+y,p,b),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===r.SHAPES.RREC){var E=s.x,M=s.y,w=s.width,T=s.height,S=s.radius,A=Math.min(w,T)/2|0;S=S>A?A:S,e.beginPath(),e.moveTo(E,M+S),e.lineTo(E,M+T-S),e.quadraticCurveTo(E,M+T,E+S,M+T),e.lineTo(E+w-S,M+T),e.quadraticCurveTo(E+w,M+T,E+w,M+T-S),e.lineTo(E+w,M+S),e.quadraticCurveTo(E+w,M,E+w-S,M),e.lineTo(E+S,M),e.quadraticCurveTo(E,M,E,M+S),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}}},i.renderGraphicsMask=function(t,e){var n=t.graphicsData.length;if(0!==n){e.beginPath();for(var i=0;n>i;i++){var o=t.graphicsData[i],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points;e.moveTo(a[0],a[1]);for(var u=1;u<a.length/2;u++)e.lineTo(a[2*u],a[2*u+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===r.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var h=2*s.width,l=2*s.height,c=s.x-h/2,f=s.y-l/2,p=.5522848,d=h/2*p,g=l/2*p,v=c+h,y=f+l,m=c+h/2,x=f+l/2;e.moveTo(c,x),e.bezierCurveTo(c,x-g,m-d,f,m,f),e.bezierCurveTo(m+d,f,v,x-g,v,x),e.bezierCurveTo(v,x+g,m+d,y,m,y),e.bezierCurveTo(m-d,y,c,x+g,c,x),e.closePath()}else if(o.type===r.SHAPES.RREC){var _=s.x,b=s.y,E=s.width,M=s.height,w=s.radius,T=Math.min(E,M)/2|0;w=w>T?T:w,e.moveTo(_,b+w),e.lineTo(_,b+M-w),e.quadraticCurveTo(_,b+M,_+w,b+M),e.lineTo(_+E-w,b+M),e.quadraticCurveTo(_+E,b+M,_+E,b+M-w),e.lineTo(_+E,b+w),e.quadraticCurveTo(_+E,b,_+E-w,b),e.lineTo(_+w,b),e.quadraticCurveTo(_,b,_,b+w),e.closePath()}}}},i.updateGraphicsTint=function(t){if(16777215!==t.tint||t._prevTint!==t.tint){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255}}}},function(t,e){function n(t,e,n,r,i,o,s){this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this._lineTint=e,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.shape=s,this.type=s.type}n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},function(t,e,n){function r(t){a.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var i=n(24),o=n(15),s=n(14),a=n(49),u=n(50),h=n(72),l=n(73);r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,u.registerPlugin("graphics",r),r.prototype.onContextChange=function(){},r.prototype.destroy=function(){a.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},r.prototype.render=function(t){var e,n=this.renderer,r=n.gl,o=n.shaderManager.plugins.primitiveShader;!t.dirty&&t._webGL[r.id]||this.updateGraphics(t);var s=t._webGL[r.id];n.blendModeManager.setBlendMode(t.blendMode);for(var a=0,u=s.data.length;u>a;a++)e=s.data[a],1===s.data[a].mode?(n.stencilManager.pushStencil(t,e),r.uniform1f(n.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),n.stencilManager.popStencil(t,e)):(o=n.shaderManager.primitiveShader,n.shaderManager.setShader(o),r.uniformMatrix3fv(o.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(o.uniforms.projectionMatrix._location,!1,n.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(o.uniforms.tint._location,i.hex2rgb(t.tint)),r.uniform1f(o.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(o.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(o.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0)),n.drawCount++},r.prototype.updateGraphics=function(t){var e=this.renderer.gl,n=t._webGL[e.id];n||(n=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var r;if(t.clearDirty){for(t.clearDirty=!1,r=0;r<n.data.length;r++){var i=n.data[r];i.reset(),this.graphicsDataPool.push(i)}n.data=[],n.lastIndex=0}var o;for(r=n.lastIndex;r<t.graphicsData.length;r++){var a=t.graphicsData[r];if(a.type===s.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]===a.points[a.points.length-2]&&a.points[1]===a.points[a.points.length-1]||a.points.push(a.points[0],a.points[1])),a.fill&&a.points.length>=6)if(a.points.length<2*this.maximumSimplePolySize){o=this.switchMode(n,0);var u=this.buildPoly(a,o);u||(o=this.switchMode(n,1),this.buildComplexPoly(a,o))}else o=this.switchMode(n,1),this.buildComplexPoly(a,o);a.lineWidth>0&&(o=this.switchMode(n,0),this.buildLine(a,o))}else o=this.switchMode(n,0),a.type===s.SHAPES.RECT?this.buildRectangle(a,o):a.type===s.SHAPES.CIRC||a.type===s.SHAPES.ELIP?this.buildCircle(a,o):a.type===s.SHAPES.RREC&&this.buildRoundedRectangle(a,o);n.lastIndex++}for(r=0;r<n.data.length;r++)o=n.data[r],o.dirty&&o.upload()},r.prototype.switchMode=function(t,e){var n;return t.data.length?(n=t.data[t.data.length-1],(n.points.length>32e4||n.mode!==e||1===e)&&(n=this.graphicsDataPool.pop()||new h(t.gl),n.mode=e,t.data.push(n))):(n=this.graphicsDataPool.pop()||new h(t.gl),n.mode=e,t.data.push(n)),n.dirty=!0,n},r.prototype.buildRectangle=function(t,e){var n=t.shape,r=n.x,o=n.y,s=n.width,a=n.height;if(t.fill){var u=i.hex2rgb(t.fillColor),h=t.fillAlpha,l=u[0]*h,c=u[1]*h,f=u[2]*h,p=e.points,d=e.indices,g=p.length/6;p.push(r,o),p.push(l,c,f,h),p.push(r+s,o),p.push(l,c,f,h),p.push(r,o+a),p.push(l,c,f,h),p.push(r+s,o+a),p.push(l,c,f,h),d.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var v=t.points;t.points=[r,o,r+s,o,r+s,o+a,r,o+a,r,o],this.buildLine(t,e),t.points=v}},r.prototype.buildRoundedRectangle=function(t,e){var n=t.shape,r=n.x,o=n.y,s=n.width,a=n.height,u=n.radius,h=[];if(h.push(r,o+u),this.quadraticBezierCurve(r,o+a-u,r,o+a,r+u,o+a,h),this.quadraticBezierCurve(r+s-u,o+a,r+s,o+a,r+s,o+a-u,h),this.quadraticBezierCurve(r+s,o+u,r+s,o,r+s-u,o,h),this.quadraticBezierCurve(r+u,o,r,o,r,o+u+1e-10,h),t.fill){var c=i.hex2rgb(t.fillColor),f=t.fillAlpha,p=c[0]*f,d=c[1]*f,g=c[2]*f,v=e.points,y=e.indices,m=v.length/6,x=l(h,null,2),_=0;for(_=0;_<x.length;_+=3)y.push(x[_]+m),y.push(x[_]+m),y.push(x[_+1]+m),y.push(x[_+2]+m),y.push(x[_+2]+m);for(_=0;_<h.length;_++)v.push(h[_],h[++_],p,d,g,f)}if(t.lineWidth){var b=t.points;t.points=h,this.buildLine(t,e),t.points=b}},r.prototype.quadraticBezierCurve=function(t,e,n,r,i,o,s){function a(t,e,n){var r=e-t;return t+r*n}for(var u,h,l,c,f,p,d=20,g=s||[],v=0,y=0;d>=y;y++)v=y/d,u=a(t,n,v),h=a(e,r,v),l=a(n,i,v),c=a(r,o,v),f=a(u,l,v),p=a(h,c,v),g.push(f,p);return g},r.prototype.buildCircle=function(t,e){var n,r,o=t.shape,a=o.x,u=o.y;t.type===s.SHAPES.CIRC?(n=o.radius,r=o.radius):(n=o.width,r=o.height);var h=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),l=2*Math.PI/h,c=0;if(t.fill){var f=i.hex2rgb(t.fillColor),p=t.fillAlpha,d=f[0]*p,g=f[1]*p,v=f[2]*p,y=e.points,m=e.indices,x=y.length/6;for(m.push(x),c=0;h+1>c;c++)y.push(a,u,d,g,v,p),y.push(a+Math.sin(l*c)*n,u+Math.cos(l*c)*r,d,g,v,p),m.push(x++,x++);m.push(x-1)}if(t.lineWidth){var _=t.points;for(t.points=[],c=0;h+1>c;c++)t.points.push(a+Math.sin(l*c)*n,u+Math.cos(l*c)*r);this.buildLine(t,e),t.points=_}},r.prototype.buildLine=function(t,e){var n=0,r=t.points;if(0!==r.length){var s=new o.Point(r[0],r[1]),a=new o.Point(r[r.length-2],r[r.length-1]);if(s.x===a.x&&s.y===a.y){r=r.slice(),r.pop(),r.pop(),a=new o.Point(r[r.length-2],r[r.length-1]);var u=a.x+.5*(s.x-a.x),h=a.y+.5*(s.y-a.y);r.unshift(u,h),r.push(u,h)}var l,c,f,p,d,g,v,y,m,x,_,b,E,M,w,T,S,A,R,O,C,P,D,L=e.points,F=e.indices,N=r.length/2,B=r.length,k=L.length/6,I=t.lineWidth/2,U=i.hex2rgb(t.lineColor),j=t.lineAlpha,z=U[0]*j,Y=U[1]*j,X=U[2]*j;for(f=r[0],p=r[1],d=r[2],g=r[3],m=-(p-g),x=f-d,D=Math.sqrt(m*m+x*x),m/=D,x/=D,m*=I,x*=I,L.push(f-m,p-x,z,Y,X,j),L.push(f+m,p+x,z,Y,X,j),n=1;N-1>n;n++)f=r[2*(n-1)],p=r[2*(n-1)+1],d=r[2*n],g=r[2*n+1],v=r[2*(n+1)],y=r[2*(n+1)+1],m=-(p-g),x=f-d,D=Math.sqrt(m*m+x*x),m/=D,x/=D,m*=I,x*=I,_=-(g-y),b=d-v,D=Math.sqrt(_*_+b*b),_/=D,b/=D,_*=I,b*=I,w=-x+p-(-x+g),T=-m+d-(-m+f),S=(-m+f)*(-x+g)-(-m+d)*(-x+p),A=-b+y-(-b+g),R=-_+d-(-_+v),O=(-_+v)*(-b+g)-(-_+d)*(-b+y),C=w*R-A*T,Math.abs(C)<.1?(C+=10.1,L.push(d-m,g-x,z,Y,X,j),L.push(d+m,g+x,z,Y,X,j)):(l=(T*O-R*S)/C,c=(A*S-w*O)/C,P=(l-d)*(l-d)+(c-g)*(c-g),P>19600?(E=m-_,M=x-b,D=Math.sqrt(E*E+M*M),E/=D,M/=D,E*=I,M*=I,L.push(d-E,g-M),L.push(z,Y,X,j),L.push(d+E,g+M),L.push(z,Y,X,j),L.push(d-E,g-M),L.push(z,Y,X,j),B++):(L.push(l,c),L.push(z,Y,X,j),L.push(d-(l-d),g-(c-g)),L.push(z,Y,X,j)));for(f=r[2*(N-2)],p=r[2*(N-2)+1],d=r[2*(N-1)],g=r[2*(N-1)+1],m=-(p-g),x=f-d,D=Math.sqrt(m*m+x*x),m/=D,x/=D,m*=I,x*=I,L.push(d-m,g-x),L.push(z,Y,X,j),L.push(d+m,g+x),L.push(z,Y,X,j),F.push(k),n=0;B>n;n++)F.push(k++);F.push(k-1)}},r.prototype.buildComplexPoly=function(t,e){var n=t.points.slice();if(!(n.length<6)){var r=e.indices;e.points=n,e.alpha=t.fillAlpha,e.color=i.hex2rgb(t.fillColor);for(var o,s,a=1/0,u=-(1/0),h=1/0,l=-(1/0),c=0;c<n.length;c+=2)o=n[c],s=n[c+1],a=a>o?o:a,u=o>u?o:u,h=h>s?s:h,l=s>l?s:l;n.push(a,h,u,h,u,l,a,l);var f=n.length/2;for(c=0;f>c;c++)r.push(c)}},r.prototype.buildPoly=function(t,e){var n=t.points;if(!(n.length<6)){var r=e.points,o=e.indices,s=n.length/2,a=i.hex2rgb(t.fillColor),u=t.fillAlpha,h=a[0]*u,c=a[1]*u,f=a[2]*u,p=l(n,null,2);if(!p)return!1;var d=r.length/6,g=0;for(g=0;g<p.length;g+=3)o.push(p[g]+d),o.push(p[g]+d),o.push(p[g+1]+d),o.push(p[g+2]+d),o.push(p[g+2]+d);for(g=0;s>g;g++)r.push(n[2*g],n[2*g+1],h,c,f,u);return!0}}},function(t,e){function n(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,t.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},function(t,e){"use strict";function n(t,e,n){n=n||2;var i=e&&e.length,s=i?e[0]*n:t.length,a=r(t,0,s,n,!0),u=[];if(!a)return u;var h,c,f,p,d,g,v;if(i&&(a=l(t,e,a,n)),t.length>80*n){h=f=t[0],c=p=t[1];for(var y=n;s>y;y+=n)d=t[y],g=t[y+1],h>d&&(h=d),c>g&&(c=g),d>f&&(f=d),g>p&&(p=g);v=Math.max(f-h,p-c)}return o(a,u,n,h,c,v),u}function r(t,e,n,r,i){var o,s;if(i===C(t,e,n,r)>0)for(o=e;n>o;o+=r)s=A(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=A(o,t[o],t[o+1],s);return s&&b(s,s.next)&&(R(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!b(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{if(R(r),r=e=r.prev,r===r.next)return null;n=!0}while(n||r!==e);return e}function o(t,e,n,r,l,c,f){if(t){!f&&c&&d(t,r,l,c);for(var p,g,v=t;t.prev!==t.next;)if(p=t.prev,g=t.next,c?a(t,r,l,c):s(t))e.push(p.i/n),e.push(t.i/n),e.push(g.i/n),R(t),t=g.next,v=g.next;else if(t=g,t===v){f?1===f?(t=u(t,e,n),o(t,e,n,r,l,c,2)):2===f&&h(t,e,n,r,l,c):o(i(t),e,n,r,l,c,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(_(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&_(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(t,e,n,r){var i=t.prev,o=t,s=t.next;if(_(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=v(a,u,e,n,r),f=v(h,l,e,n,r),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function u(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!b(i,o)&&E(i,r,r.next,o)&&w(i,o)&&w(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),R(r),R(r.next),r=t=o),r=r.next}while(r!==t);return r}function h(t,e,n,r,s,a){var u=t;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&x(u,h)){var l=S(u,h);return u=i(u,u.next),l=i(l,l.next),o(u,e,n,r,s,a),void o(l,e,n,r,s,a)}h=h.next}u=u.next}while(u!==t)}function l(t,e,n,o){var s,a,u,h,l,p=[];for(s=0,a=e.length;a>s;s++)u=e[s]*o,h=a-1>s?e[s+1]*o:t.length,l=r(t,u,h,o,!1),l===l.next&&(l.steiner=!0),p.push(y(l));for(p.sort(c),s=0;s<p.length;s++)f(p[s],n),n=i(n,n.next);return n}function c(t,e){return t.x-e.x}function f(t,e){if(e=p(t,e)){var n=S(e,t);i(n,n.next)}}function p(t,e){var n,r=e,i=t.x,o=t.y,s=-(1/0);do{if(o<=r.y&&o>=r.next.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(i>=a&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,h=n,l=n.x,c=n.y,f=1/0;for(r=n.next;r!==h;)i>=r.x&&r.x>=l&&m(c>o?i:s,o,l,c,c>o?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(f>u||u===f&&r.x>n.x)&&w(r,t)&&(n=r,f=u)),r=r.next;return n}function d(t,e,n,r){var i=t;do null===i.z&&(i.z=v(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(t){var e,n,r,i,o,s,a,u,h=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;h>e&&(a++,r=r.nextZ,r);e++);for(u=h;a>0||u>0&&r;)0===a?(i=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,a--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,h*=2}while(s>1);return t}function v(t,e,n,r,i){return t=32767*(t-n)/i,e=32767*(e-r)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function m(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!M(t,e)&&w(t,e)&&w(e,t)&&T(t,e)}function _(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,n,r){return b(t,e)&&b(n,r)||b(t,r)&&b(n,e)?!0:_(t,e,n)>0!=_(t,e,r)>0&&_(n,r,t)>0!=_(n,r,e)>0}function M(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function w(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function T(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function S(t,e){var n=new O(t.i,t.x,t.y),r=new O(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function A(t,e,n,r){var i=new O(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function R(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,n,r){for(var i=0,o=e,s=n-r;n>o;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=n,n.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(C(t,0,o,n));if(i)for(var a=0,u=e.length;u>a;a++){var h=e[a]*n,l=u-1>a?e[a+1]*n:t.length;s-=Math.abs(C(t,h,l,n))}var c=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,d=r[a+2]*n;c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;e>s;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){function r(t,e,n){n=n||{},i.call(this,"Canvas",t,e,n),this.type=u.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new o,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1},this.resize(t,e)}var i=n(51),o=n(75),s=n(24),a=n(15),u=n(14);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,s.pluginTarget.mixin(r),r.prototype.render=function(t){this.emit("prerender");var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context),this.emit("postrender")},r.prototype.destroy=function(t){this.destroyPlugins(),i.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},r.prototype.renderDisplayObject=function(t,e){var n=this.context;this.context=e,t.renderCanvas(this),this.context=n},r.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.smoothProperty&&(this.context[this.smoothProperty]=u.SCALE_MODES.DEFAULT===u.SCALE_MODES.LINEAR)},r.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},s.canUseNewCanvasBlendModes()?(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[u.BLEND_MODES.SCREEN]="screen",this.blendModes[u.BLEND_MODES.OVERLAY]="overlay",this.blendModes[u.BLEND_MODES.DARKEN]="darken",this.blendModes[u.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[u.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[u.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[u.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[u.BLEND_MODES.HUE]="hue",this.blendModes[u.BLEND_MODES.SATURATION]="saturate",this.blendModes[u.BLEND_MODES.COLOR]="color",this.blendModes[u.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[u.BLEND_MODES.SCREEN]="source-over",this.blendModes[u.BLEND_MODES.OVERLAY]="source-over",this.blendModes[u.BLEND_MODES.DARKEN]="source-over",this.blendModes[u.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[u.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[u.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[u.BLEND_MODES.HUE]="source-over",this.blendModes[u.BLEND_MODES.SATURATION]="source-over",this.blendModes[u.BLEND_MODES.COLOR]="source-over",this.blendModes[u.BLEND_MODES.LUMINOSITY]="source-over"))}},function(t,e,n){function r(){}var i=n(69);r.prototype.constructor=r,t.exports=r,r.prototype.pushMask=function(t,e){e.context.save();var n=t.alpha,r=t.worldTransform,o=e.resolution;e.context.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.texture||(i.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=n},r.prototype.popMask=function(t){t.context.restore()},r.prototype.destroy=function(){}},function(t,e,n){n(77),n(78),n(79),t.exports={MovieClip:n(80),TilingSprite:n(81),BitmapText:n(82)}},function(t,e,n){var r=n(13),i=r.DisplayObject,o=new r.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._originalRenderWebGL=null,i.prototype._originalRenderCanvas=null,i.prototype._originalUpdateTransform=null,i.prototype._originalHitTest=null,i.prototype._originalDestroy=null,i.prototype._cachedSprite=null,Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),i.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},i.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n}var i=t.currentRenderTarget,s=t.filterManager.filterStack,a=new r.RenderTexture(t,0|e.width,0|e.height),u=o;u.tx=-e.x,u.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,a.render(this,u,!0,!0),t.setRenderTarget(i),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(a),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},i.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),n=t.context,i=new r.RenderTexture(t,0|e.width,0|e.height),s=o;s.tx=-e.x,s.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,i.render(this,s,!0),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},i.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},function(t,e,n){var r=n(13);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,n){var r=n(13);r.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new r.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,n){function r(t){i.Sprite.call(this,t[0]instanceof i.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var i=n(13);r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof i.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},currentFrame:{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return 0>t&&(t+=this._textures.length),t}}}),r.prototype.stop=function(){this.playing&&(this.playing=!1,i.ticker.shared.remove(this.update,this))},r.prototype.play=function(){this.playing||(this.playing=!0,i.ticker.shared.add(this.update,this))},r.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t,this._texture=this._textures[this.currentFrame]},r.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},r.prototype.update=function(t){
var e=this.animationSpeed*t;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;0>n;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},r.prototype.destroy=function(){this.stop(),i.Sprite.prototype.destroy.call(this)},r.fromFrames=function(t){for(var e=[],n=0;n<t.length;++n)e.push(new i.Texture.fromFrame(t[n]));return new r(e)},r.fromImages=function(t){for(var e=[],n=0;n<t.length;++n)e.push(new i.Texture.fromImage(t[n]));return new r(e)}},function(t,e,n){function r(t,e,n){i.Sprite.call(this,t),this.tileScale=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this._width=e||100,this._height=n||100,this._uvs=new i.TextureUvs,this._canvasPattern=null,this.shader=new i.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var i=n(13),o=new i.Point,s=n(46);r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),r.prototype._onTextureUpdate=function(){},r.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var n=e._uvs,r=e._frame.width,i=e._frame.height,o=e.baseTexture.width,s=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/o,this.shader.uniforms.uPixelSize.value[1]=1/s,this.shader.uniforms.uFrame.value[0]=n.x0,this.shader.uniforms.uFrame.value[1]=n.y0,this.shader.uniforms.uFrame.value[2]=n.x1-n.x0,this.shader.uniforms.uFrame.value[3]=n.y2-n.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(r*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(i*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=s/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=n,e._frame.width=r,e._frame.height=i}},r.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var n=t.context,r=this.worldTransform,o=t.resolution,a=e.baseTexture,u=this.tilePosition.x/this.tileScale.x%e._frame.width,h=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var l=new i.CanvasBuffer(e._frame.width*o,e._frame.height*o);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.getTintedTexture(this,this.tint)),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(a.source,-e._frame.x*o,-e._frame.y*o),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),n.scale(this.tileScale.x/o,this.tileScale.y/o),n.translate(u+this.anchor.x*-this._width,h+this.anchor.y*-this._height);var c=t.blendModes[this.blendMode];c!==t.context.globalCompositeOperation&&(n.globalCompositeOperation=c),n.fillStyle=this._canvasPattern,n.fillRect(-u,-h,this._width*o/this.tileScale.x,this._height*o/this.tileScale.y)}},r.prototype.getBounds=function(){var t,e,n,r,i=this._width,o=this._height,s=i*(1-this.anchor.x),a=i*-this.anchor.x,u=o*(1-this.anchor.y),h=o*-this.anchor.y,l=this.worldTransform,c=l.a,f=l.b,p=l.c,d=l.d,g=l.tx,v=l.ty,y=c*a+p*h+g,m=d*h+f*a+v,x=c*s+p*h+g,_=d*h+f*s+v,b=c*s+p*u+g,E=d*u+f*s+v,M=c*a+p*u+g,w=d*u+f*a+v;t=y,t=t>x?x:t,t=t>b?b:t,t=t>M?M:t,n=m,n=n>_?_:n,n=n>E?E:n,n=n>w?w:n,e=y,e=x>e?x:e,e=b>e?b:e,e=M>e?M:e,r=m,r=_>r?_:r,r=E>r?E:r,r=w>r?w:r;var T=this._bounds;return T.x=t,T.width=e-t,T.y=n,T.height=r-n,this._currentBounds=T,T},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,o);var e,n=this._width,r=this._height,i=-n*this.anchor.x;return o.x>i&&o.x<i+n&&(e=-r*this.anchor.y,o.y>e&&o.y<e+r)},r.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},r.fromFrame=function(t,e,n){var o=i.utils.TextureCache[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new r(o,e,n)},r.fromImage=function(t,e,n,o,s){return new r(i.Texture.fromImage(t,o,s),e,n)}},function(t,e,n){function r(t,e){i.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var i=n(13);r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):r.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),r.prototype.updateText=function(){for(var t=r.fonts[this._font.name],e=new i.Point,n=null,o=[],s=0,a=0,u=[],h=0,l=this._font.size/t.size,c=-1,f=0,p=0;p<this.text.length;p++){var d=this.text.charCodeAt(p);if(c=/(\s)/.test(this.text.charAt(p))?p:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))u.push(s),a=Math.max(a,s),h++,e.x=0,e.y+=t.lineHeight,n=null;else if(-1!==c&&this.maxWidth>0&&e.x*l>this.maxWidth)i.utils.removeItems(o,c,p-c),p=c,c=-1,u.push(s),a=Math.max(a,s),h++,e.x=0,e.y+=t.lineHeight,n=null;else{var g=t.chars[d];g&&(n&&g.kerning[n]&&(e.x+=g.kerning[n]),o.push({texture:g.texture,line:h,charCode:d,position:new i.Point(e.x+g.xOffset,e.y+g.yOffset)}),s=e.x+(g.texture.width+g.xOffset),e.x+=g.xAdvance,f=Math.max(f,g.yOffset+g.texture.height),n=d)}}u.push(s),a=Math.max(a,s);var v=[];for(p=0;h>=p;p++){var y=0;"right"===this._font.align?y=a-u[p]:"center"===this._font.align&&(y=(a-u[p])/2),v.push(y)}var m=o.length,x=this.tint;for(p=0;m>p;p++){var _=this._glyphs[p];_?_.texture=o[p].texture:(_=new i.Sprite(o[p].texture),this._glyphs.push(_)),_.position.x=(o[p].position.x+v[o[p].line])*l,_.position.y=o[p].position.y*l,_.scale.x=_.scale.y=l,_.tint=x,_.parent||this.addChild(_)}for(p=m;p<this._glyphs.length;++p)this.removeChild(this._glyphs[p]);this.textWidth=a*l,this.textHeight=(e.y+t.lineHeight)*l,this.maxLineHeight=f*l},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),i.Container.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},r.fonts={}},function(t,e,n){t.exports={AsciiFilter:n(84),BloomFilter:n(85),BlurFilter:n(88),BlurXFilter:n(86),BlurYFilter:n(87),BlurDirFilter:n(89),ColorMatrixFilter:n(90),ColorStepFilter:n(91),ConvolutionFilter:n(92),CrossHatchFilter:n(93),DisplacementFilter:n(94),DotScreenFilter:n(95),GrayFilter:n(96),DropShadowFilter:n(97),InvertFilter:n(99),NoiseFilter:n(100),PixelateFilter:n(101),RGBSplitFilter:n(102),ShockwaveFilter:n(103),SepiaFilter:n(104),SmartBlurFilter:n(105),TiltShiftFilter:n(106),TiltShiftXFilter:n(107),TiltShiftYFilter:n(109),TwistFilter:n(110)}},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/ascii.frag","utf8"),{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s,this.defaultFilter=new i.AbstractFilter}var i=n(13),o=n(86),s=n(87);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,n),this.blurXFilter.applyFilter(t,e,r),t.blendModeManager.setBlendMode(i.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,r,n),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,o.readFileSync(e+"/blurX.vert","utf8"),o.readFileSync(e+"/blur.frag","utf8"),{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,s,a,!0);var h=a;a=s,s=h}t.filterManager.applyFilter(i,s,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,o.readFileSync(e+"/blurY.vert","utf8"),o.readFileSync(e+"/blur.frag","utf8"),{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,s,a,!0);var h=a;a=s,s=h}t.filterManager.applyFilter(i,s,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s}var i=n(13),o=n(86),s=n(87);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,r),this.blurYFilter.applyFilter(t,r,n),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},function(t,e,n){(function(e){function r(t,n){i.AbstractFilter.call(this,o.readFileSync(e+"/blurDir.vert","utf8"),o.readFileSync(e+"/blurDir.frag","utf8"),{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:n||0}}),this.defaultFilter=new i.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=n||0,this.strength=4}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{var o=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(i,e,o,r);for(var s=0;s<this.passes-2;s++)t.filterManager.applyFilter(i,o,o,r);t.filterManager.applyFilter(i,o,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/colorMatrix.frag","utf8"),{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype._loadMatrix=function(t,e){e=!!e;var n=t;e&&(this._multiply(n,this.uniforms.m.value,t),n=this._colorMatrix(n)),this.uniforms.m.value=n},r.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19],t},r.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},r.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.grayscale=r.prototype.greyscale,r.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=.213,o=.715,s=.072,a=[i+n*(1-i)+r*-i,o+n*-o+r*-o,s+n*-s+r*(1-s),0,0,i+n*-i+.143*r,o+n*(1-o)+.14*r,s+n*-s+r*-.283,0,0,i+n*-i+r*-(1-i),o+n*-o+r*o,s+n*(1-s)+r*s,0,0,0,0,0,1,0];this._loadMatrix(a,e)},r.prototype.contrast=function(t,e){var n=(t||0)+1,r=-128*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.saturate=function(t,e){var n=2*(t||0)/3+1,r=(n-1)*-.5,i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.desaturate=function(t){this.saturate(-1)},r.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.colorTone=function(t,e,n,r,i){t=t||.2,e=e||.15,n=n||16770432,r=r||3375104;var o=(n>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,u=(r>>16&255)/255,h=(r>>8&255)/255,l=(255&r)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,u,h,l,e,0,o-u,s-h,a-l,0,0];this._loadMatrix(c,i)},r.prototype.night=function(t,e){t=t||.1;var n=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/colorStep.frag","utf8"),{step:{type:"1f",value:5}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(t,n,r){i.AbstractFilter.call(this,null,o.readFileSync(e+"/convolution.frag","utf8"),{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/n,y:1/r}}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/crosshatch.frag","utf8"))}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r}).call(e,"/")},function(t,e,n){(function(e){function r(t,n){var r=new i.Matrix;t.renderable=!1,i.AbstractFilter.call(this,o.readFileSync(e+"/displacement.vert","utf8"),o.readFileSync(e+"/displacement.frag","utf8"),{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:r.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=r,null!==n&&void 0!==n||(n=20),this.scale=new i.Point(n,n)}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager;r.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var i=this.getShader(t);r.applyFilter(i,e,n)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/dotScreen.frag","utf8"),{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/gray.frag","utf8"),{gray:{type:"1f",value:1}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYTintFilter=new s,this.defaultFilter=new i.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=i.BLEND_MODES.MULTIPLY}var i=n(13),o=n(86),s=n(98);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,r),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,r,n),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,n),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return i.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=i.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,o.readFileSync(e+"/blurYTint.vert","utf8"),o.readFileSync(e+"/blurYTint.frag","utf8"),{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,s,a,r);var h=a;a=s,s=h}t.filterManager.applyFilter(i,s,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/invert.frag","utf8"),{invert:{type:"1f",value:1}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/noise.frag","utf8"),{noise:{type:"1f",value:.5}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/pixelate.frag","utf8"),{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/rgbSplit.frag","utf8"),{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/shockwave.frag","utf8"),{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/sepia.frag","utf8"),{sepia:{type:"1f",value:1}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/smartBlur.frag","utf8"),{delta:{type:"v2",value:{x:.1,y:0}}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.tiltShiftXFilter=new o,this.tiltShiftYFilter=new s}var i=n(13),o=n(107),s=n(109);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,r),this.tiltShiftYFilter.applyFilter(t,r,n),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},function(t,e,n){function r(){i.call(this)}var i=n(108);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,n=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/n,this.uniforms.delta.value.y=e/n}},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/tiltShift.frag","utf8"),{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,
this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})}).call(e,"/")},function(t,e,n){function r(){i.call(this)}var i=n(108);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,n=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/n,this.uniforms.delta.value.y=t/n}},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/twist.frag","utf8"),{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var i=n(13),o=n(60);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})}).call(e,"/")},function(t,e,n){t.exports={InteractionData:n(112),InteractionManager:n(113),interactiveTarget:n(114)}},function(t,e,n){function r(){this.global=new i.Point,this.target=null,this.originalEvent=null}var i=n(13);r.prototype.constructor=r,t.exports=r,r.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)}},function(t,e,n){function r(t,e){e=e||{},this.renderer=t,this.autoPreventDefault=void 0!==e.autoPreventDefault?e.autoPreventDefault:!0,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new o,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new i.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var i=n(13),o=n(112);Object.assign(i.DisplayObject.prototype,n(114)),r.prototype.constructor=r,t.exports=r,r.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},r.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},r.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},r.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},r.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.target=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},r.prototype.mapPositionToPoint=function(t,e,n){var r=this.interactionDOMElement.getBoundingClientRect();t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution},r.prototype.processInteractive=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=!1,s=i=e.interactive||i;if(e.hitArea&&(s=!1),e.interactiveChildren)for(var a=e.children,u=a.length-1;u>=0;u--){var h=a[u];if(this.processInteractive(t,h,n,r,s)){if(!h.parent)continue;o=!0,s=!1,r=!1}}return i&&(r&&!o&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),o=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(o=e.containsPoint(t))),e.interactive&&n(e,o)),o},r.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},r.prototype.processMouseDown=function(t,e){var n=this.mouse.originalEvent,r=2===n.button||3===n.which;e&&(t[r?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,r?"rightdown":"mousedown",this.eventData))},r.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},r.prototype.processMouseUp=function(t,e){var n=this.mouse.originalEvent,r=2===n.button||3===n.which,i=r?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,r?"rightup":"mouseup",this.eventData),t[i]&&(t[i]=!1,this.dispatchEvent(t,r?"rightclick":"click",this.eventData))):t[i]&&(t[i]=!1,this.dispatchEvent(t,r?"rightupoutside":"mouseupoutside",this.eventData))},r.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},r.prototype.processMouseMove=function(t,e){this.processMouseOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,"mousemove",this.eventData)},r.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},r.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},r.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,n=e.length,r=0;n>r;r++){var i=e[r],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},r.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},r.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,n=e.length,r=0;n>r;r++){var i=e[r],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},r.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},r.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,n=e.length,r=0;n>r;r++){var i=e[r],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.returnTouchData(o)}},r.prototype.processTouchMove=function(t,e){this.moveWhenInside&&!e||this.dispatchEvent(t,"touchmove",this.eventData)},r.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new o),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},r.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},r.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},i.WebGLRenderer.registerPlugin("interaction",r),i.CanvasRenderer.registerPlugin("interaction",r)},function(t,e){var n={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};t.exports=n},function(t,e,n){t.exports={Loader:n(116),bitmapFontParser:n(133),spritesheetParser:n(131),textureParser:n(130),Resource:n(117).Resource}},function(t,e,n){function r(t,e){i.call(this,t,e);for(var n=0;n<r._pixiMiddleware.length;++n)this.use(r._pixiMiddleware[n]())}var i=n(117),o=n(130),s=n(131),a=n(133);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r._pixiMiddleware=[i.middleware.parsing.blob,o,s,a],r.addPixiMiddleware=function(t){r._pixiMiddleware.push(t)};var u=i.Resource;u.setExtensionXhrType("fnt",u.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,n){t.exports=n(118),t.exports.Resource=n(126),t.exports.middleware={caching:{memory:n(127)},parsing:{blob:n(128)}}},function(t,e,n){function r(t,e){a.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=i.queue(this._boundLoadResource,e),this.resources={}}var i=n(119),o=n(120),s=n(126),a=n(25);r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.add=r.prototype.enqueue=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(r=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new s(t,e,n),"function"==typeof r&&this.resources[t].once("afterMiddleware",r),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},r.prototype._handleBaseUrl=function(t){var e=o.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},r.prototype.before=r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.after=r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},r.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},r.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,function(){t.load(n._boundOnLoad)})},r.prototype._onComplete=function(){this.emit("complete",this,this.resources)},r.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),this._runMiddleware(t,this._afterMiddleware,function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&(this.progress=100,this._onComplete()),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t)}),t._dequeue()},r.prototype._runMiddleware=function(t,e,n){var r=this;i.eachSeries(e,function(e,n){e.call(r,t,n)},n.bind(this,t))},r.LOAD_TYPE=s.LOAD_TYPE,r.XHR_READY_STATE=s.XHR_READY_STATE,r.XHR_RESPONSE_TYPE=s.XHR_RESPONSE_TYPE},function(t,e,n){var r,i;(function(n,o){!function(){function s(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(a,arguments)}}var a,u,h={};a=this,null!=a&&(u=a.async),h.noConflict=function(){return a.async=u,h};var l=Object.prototype.toString,c=Array.isArray||function(t){return"[object Array]"===l.call(t)},f=function(t,e){for(var n=0;n<t.length;n+=1)e(t[n],n,t)},p=function(t,e){if(t.map)return t.map(e);var n=[];return f(t,function(t,r,i){n.push(e(t,r,i))}),n},d=function(t,e,n){return t.reduce?t.reduce(e,n):(f(t,function(t,r,i){n=e(n,t,r,i)}),n)},g=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};"undefined"!=typeof n&&n.nextTick?(h.nextTick=n.nextTick,"undefined"!=typeof o?h.setImmediate=function(t){o(t)}:h.setImmediate=h.nextTick):"function"==typeof o?(h.nextTick=function(t){o(t)},h.setImmediate=h.nextTick):(h.nextTick=function(t){setTimeout(t,0)},h.setImmediate=h.nextTick),h.each=function(t,e,n){function r(e){e?(n(e),n=function(){}):(i+=1,i>=t.length&&n())}if(n=n||function(){},!t.length)return n();var i=0;f(t,function(t){e(t,s(r))})},h.forEach=h.each,h.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,i=function(){e(t[r],function(e){e?(n(e),n=function(){}):(r+=1,r>=t.length?n():i())})};i()},h.forEachSeries=h.eachSeries,h.eachLimit=function(t,e,n,r){var i=v(e);i.apply(null,[t,n,r])},h.forEachLimit=h.eachLimit;var v=function(t){return function(e,n,r){if(r=r||function(){},!e.length||0>=t)return r();var i=0,o=0,s=0;!function a(){if(i>=e.length)return r();for(;t>s&&o<e.length;)o+=1,s+=1,n(e[o-1],function(t){t?(r(t),r=function(){}):(i+=1,s-=1,i>=e.length?r():a())})}()}},y=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[h.each].concat(e))}},m=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[v(t)].concat(n))}},x=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[h.eachSeries].concat(e))}},_=function(t,e,n,r){if(e=p(e,function(t,e){return{index:e,value:t}}),r){var i=[];t(e,function(t,e){n(t.value,function(n,r){i[t.index]=r,e(n)})},function(t){r(t,i)})}else t(e,function(t,e){n(t.value,function(t){e(t)})})};h.map=y(_),h.mapSeries=x(_),h.mapLimit=function(t,e,n,r){return b(e)(t,n,r)};var b=function(t){return m(t,_)};h.reduce=function(t,e,n,r){h.eachSeries(t,function(t,r){n(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)})},h.inject=h.reduce,h.foldl=h.reduce,h.reduceRight=function(t,e,n,r){var i=p(t,function(t){return t}).reverse();h.reduce(i,e,n,r)},h.foldr=h.reduceRight;var E=function(t,e,n,r){var i=[];e=p(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n&&i.push(t),e()})},function(t){r(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};h.filter=y(E),h.filterSeries=x(E),h.select=h.filter,h.selectSeries=h.filterSeries;var M=function(t,e,n,r){var i=[];e=p(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n||i.push(t),e()})},function(t){r(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};h.reject=y(M),h.rejectSeries=x(M);var w=function(t,e,n,r){t(e,function(t,e){n(t,function(n){n?(r(t),r=function(){}):e()})},function(t){r()})};h.detect=y(w),h.detectSeries=x(w),h.some=function(t,e,n){h.each(t,function(t,r){e(t,function(t){t&&(n(!0),n=function(){}),r()})},function(t){n(!1)})},h.any=h.some,h.every=function(t,e,n){h.each(t,function(t,r){e(t,function(t){t||(n(!1),n=function(){}),r()})},function(t){n(!0)})},h.all=h.every,h.sortBy=function(t,e,n){h.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);var r=function(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0};n(null,p(e.sort(r),function(t){return t.value}))})},h.auto=function(t,e){e=e||function(){};var n=g(t),r=n.length;if(!r)return e();var i={},o=[],s=function(t){o.unshift(t)},a=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},u=function(){r--,f(o.slice(0),function(t){t()})};s(function(){if(!r){var t=e;e=function(){},t(null,i)}}),f(n,function(n){var r=c(t[n])?t[n]:[t[n]],o=function(t){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),t){var o={};f(g(i),function(t){o[t]=i[t]}),o[n]=r,e(t,o),e=function(){}}else i[n]=r,h.setImmediate(u)},l=r.slice(0,Math.abs(r.length-1))||[],p=function(){return d(l,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(n)};if(p())r[r.length-1](o,i);else{var v=function(){p()&&(a(v),r[r.length-1](o,i))};s(v)}})},h.retry=function(t,e,n){var r=5,i=[];"function"==typeof t&&(n=e,e=t,t=r),t=parseInt(t,10)||r;var o=function(r,o){for(var s=function(t,e){return function(n){t(function(t,r){n(!t||e,{err:t,result:r})},o)}};t;)i.push(s(e,!(t-=1)));h.series(i,function(t,e){e=e[e.length-1],(r||n)(e.err,e.result)})};return n?o():o},h.waterfall=function(t,e){if(e=e||function(){},!c(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();var r=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();o?i.push(r(o)):i.push(e),h.setImmediate(function(){t.apply(null,i)})}}};r(h.iterator(t))()};var T=function(t,e,n){if(n=n||function(){},c(e))t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var r={};t.each(g(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(t){n(t,r)})}};h.parallel=function(t,e){T({map:h.map,each:h.each},t,e)},h.parallelLimit=function(t,e,n){T({map:b(e),each:v(e)},t,n)},h.series=function(t,e){if(e=e||function(){},c(t))h.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};h.eachSeries(g(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(t){e(t,n)})}},h.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},h.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var S=function(t,e,n,r){var i=[];t(e,function(t,e){n(t,function(t,n){i=i.concat(n||[]),e(t)})},function(t){r(t,i)})};h.concat=y(S),h.concatSeries=x(S),h.whilst=function(t,e,n){t()?e(function(r){return r?n(r):void h.whilst(t,e,n)}):n()},h.doWhilst=function(t,e,n){t(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?h.doWhilst(t,e,n):n()})},h.until=function(t,e,n){t()?n():e(function(r){return r?n(r):void h.until(t,e,n)})},h.doUntil=function(t,e,n){t(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?n():h.doUntil(t,e,n)})},h.queue=function(t,e){function n(t,e,n,r){return t.started||(t.started=!0),c(e)||(e=[e]),0==e.length?h.setImmediate(function(){t.drain&&t.drain()}):void f(e,function(e){var i={data:e,callback:"function"==typeof r?r:null};n?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),h.setImmediate(t.process)})}void 0===e&&(e=1);var r=0,i={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){n(i,t,!1,e)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(t,e){n(i,t,!0,e)},process:function(){if(!i.paused&&r<i.concurrency&&i.tasks.length){var e=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),r+=1;var n=function(){r-=1,e.callback&&e.callback.apply(e,arguments),i.drain&&i.tasks.length+r===0&&i.drain(),i.process()},o=s(n);t(e.data,o)}},length:function(){return i.tasks.length},running:function(){return r},idle:function(){return i.tasks.length+r===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var t=1;t<=i.concurrency;t++)h.setImmediate(i.process)}}};return i},h.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function r(t,e,n){for(var r=-1,i=t.length-1;i>r;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function i(t,e,i,o){return t.started||(t.started=!0),c(e)||(e=[e]),0==e.length?h.setImmediate(function(){t.drain&&t.drain()}):void f(e,function(e){var s={data:e,priority:i,callback:"function"==typeof o?o:null};t.tasks.splice(r(t.tasks,s,n)+1,0,s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),h.setImmediate(t.process)})}var o=h.queue(t,e);return o.push=function(t,e,n){i(o,t,e,n)},delete o.unshift,o},h.cargo=function(t,e){var n=!1,r=[],i={tasks:r,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,n){c(t)||(t=[t]),f(t,function(t){r.push({data:t,callback:"function"==typeof n?n:null}),i.drained=!1,i.saturated&&r.length===e&&i.saturated()}),h.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var s="number"==typeof e?r.splice(0,e):r.splice(0,r.length),a=p(s,function(t){return t.data});i.empty&&i.empty(),n=!0,t(a,function(){n=!1;var t=arguments;f(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return r.length},running:function(){return n}};return i};var A=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&f(n,function(e){console[t](e)}))}]))}};h.log=A("log"),h.dir=A("dir"),h.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in n?h.nextTick(function(){o.apply(null,n[s])}):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([function(){n[s]=arguments;var t=r[s];delete r[s];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=t,i},h.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},h.times=function(t,e,n){for(var r=[],i=0;t>i;i++)r.push(i);return h.map(r,e,n)},h.timesSeries=function(t,e,n){for(var r=[],i=0;t>i;i++)r.push(i);return h.mapSeries(r,e,n)},h.seq=function(){var t=arguments;return function(){var e=this,n=Array.prototype.slice.call(arguments),r=n.pop();h.reduce(t,n,function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,n){r.apply(e,[t].concat(n))})}},h.compose=function(){return h.seq.apply(null,Array.prototype.reverse.call(arguments))};var R=function(t,e){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return t(e,function(t,e){t.apply(n,r.concat([e]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};h.applyEach=y(R),h.applyEachSeries=x(R),h.forever=function(t,e){function n(r){if(r){if(e)return e(r);throw r}t(n)}n()},"undefined"!=typeof t&&t.exports?t.exports=h:(r=[],i=function(){return h}.apply(e,r),!(void 0!==i&&(t.exports=i)))}()}).call(e,n(29),n(28).setImmediate)},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&h(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return u(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function h(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function c(t){return null==t}var f=n(121);e.parse=i,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(g),y=["'"].concat(v),m=["%","/","?",";","#"].concat(y),x=["/","?","#"],_=255,b=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,M={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(123);r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=p.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||i&&w[i]||(r=r.substr(2),this.slashes=!0)}if(!w[i]&&(s||i&&!T[i])){for(var a=-1,h=0;h<x.length;h++){var l=r.indexOf(x[h]);-1!==l&&(-1===a||a>l)&&(a=l)}var c,d;d=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==d&&(c=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(c)),a=-1;for(var h=0;h<m.length;h++){var l=r.indexOf(m[h]);-1!==l&&(-1===a||a>l)&&(a=l)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),h=0,A=v.length;A>h;h++){var R=v[h];if(R&&!R.match(b)){for(var O="",C=0,P=R.length;P>C;C++)O+=R.charCodeAt(C)>127?"x":R[C];if(!O.match(b)){var D=v.slice(0,h),L=v.slice(h+1),F=R.match(E);F&&(D.push(F[1]),L.unshift(F[2])),L.length&&(r="/"+L.join(".")+r),this.hostname=D.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var N=this.hostname.split("."),B=[],h=0;h<N.length;++h){var k=N[h];B.push(k.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(k):k)}this.hostname=B.join(".")}var I=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+I,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!M[o])for(var h=0,A=y.length;A>h;h++){var j=y[h],z=encodeURIComponent(j);z===j&&(z=escape(j)),r=r.split(j).join(z)}var Y=r.indexOf("#");-1!==Y&&(this.hash=r.substr(Y),r=r.slice(0,Y));var X=r.indexOf("?");if(-1!==X?(this.search=r.substr(X),this.query=r.substr(X+1),e&&(this.query=S.parse(this.query)),r=r.slice(0,X)):e&&(this.search="",this.query={}),r&&(this.pathname=r),T[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",k=this.search||"";this.path=I+k}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!T[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||w[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",s=n.search||"";n.path=o+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),h=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=h||a||n.host&&t.pathname,p=f,d=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],g=n.protocol&&!T[n.protocol];if(g&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),f=f&&(""===i[0]||""===d[0])),h)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=t.search,n.query=t.query;else if(!c(t.search)){
if(g){n.hostname=n.host=d.shift();var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=d.slice(-1)[0],m=(n.host||t.host)&&("."===y||".."===y)||""===y,x=0,_=d.length;_>=0;_--)y=d[_],"."==y?d.splice(_,1):".."===y?(d.splice(_,1),x++):x&&(d.splice(_,1),x--);if(!f&&!p)for(;x--;x)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),m&&"/"!==d.join("/").substr(-1)&&d.push("");var b=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){n.hostname=n.host=b?"":d.length?d.shift():"";var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return f=f||n.host&&d.length,f&&!b&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,i){!function(o){function s(t){throw RangeError(D[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(P,".");var i=t.split("."),o=a(i,e).join(".");return r+o}function h(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function l(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:b}function f(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,n){var r=0;for(t=n?F(t/T):t>>1,t+=F(t/e);t>L*M>>1;r+=b)t=F(t/L);return F(r+(L+1)*t/(t+w))}function d(t){var e,n,r,i,o,a,u,h,f,d,g=[],v=t.length,y=0,m=A,x=S;for(n=t.lastIndexOf(R),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&s("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;v>i;){for(o=y,a=1,u=b;i>=v&&s("invalid-input"),h=c(t.charCodeAt(i++)),(h>=b||h>F((_-y)/a))&&s("overflow"),y+=h*a,f=x>=u?E:u>=x+M?M:u-x,!(f>h);u+=b)d=b-f,a>F(_/d)&&s("overflow"),a*=d;e=g.length+1,x=p(y-o,e,0==o),F(y/e)>_-m&&s("overflow"),m+=F(y/e),y%=e,g.splice(y++,0,m)}return l(g)}function g(t){var e,n,r,i,o,a,u,l,c,d,g,v,y,m,x,w=[];for(t=h(t),v=t.length,e=A,n=0,o=S,a=0;v>a;++a)g=t[a],128>g&&w.push(N(g));for(r=i=w.length,i&&w.push(R);v>r;){for(u=_,a=0;v>a;++a)g=t[a],g>=e&&u>g&&(u=g);for(y=r+1,u-e>F((_-n)/y)&&s("overflow"),n+=(u-e)*y,e=u,a=0;v>a;++a)if(g=t[a],e>g&&++n>_&&s("overflow"),g==e){for(l=n,c=b;d=o>=c?E:c>=o+M?M:c-o,!(d>l);c+=b)x=l-d,m=b-d,w.push(N(f(d+x%m,0))),l=F(x/m);w.push(N(f(l,0))),o=p(n,y,r==i),n=0,++r}++n,++e}return w.join("")}function v(t){return u(t,function(t){return O.test(t)?d(t.slice(4).toLowerCase()):t})}function y(t){return u(t,function(t){return C.test(t)?"xn--"+g(t):t})}var m=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);m.global!==m&&m.window!==m&&m.self!==m||(o=m);var x,_=2147483647,b=36,E=1,M=26,w=38,T=700,S=72,A=128,R="-",O=/^xn--/,C=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=b-E,F=Math.floor,N=String.fromCharCode;x={version:"1.3.2",ucs2:{decode:h,encode:l},decode:d,encode:g,toASCII:y,toUnicode:v},r=function(){return x}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(122)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";e.decode=e.parse=n(124),e.encode=e.stringify=n(125)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var h=0;u>h;++h){var l,c,f,p,d=t[h].replace(s,"%20"),g=d.indexOf(r);g>=0?(l=d.substr(0,g),c=d.substr(g+1)):(l=d,c=""),f=decodeURIComponent(l),p=decodeURIComponent(c),n(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,i){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(n(t))}).join(e):o+encodeURIComponent(n(t[i]))}).join(e):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(t)):""}},function(t,e,n){function r(t,e,n){if(s.call(this),n=n||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(t){return t.toString().replace("object ","")}function o(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}var s=n(25),a=n(120),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),h=null;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},r.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this._loadImage();break;case r.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case r.LOAD_TYPE.VIDEO:this._loadElement("video");break;case r.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},r.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},r.prototype._loadElement=function(t){if("audio"===t&&"undefined"!=typeof Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return this.error=new Error("Unsupported element "+t),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},r.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=r.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},r.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},r.prototype._createSource=function(t,e,n){n||(n=t+"/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=n,r},r.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},r.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},r.prototype._xhrOnError=function(){this.error=new Error(i(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},r.prototype._xhrOnAbort=function(){this.error=new Error(i(this.xhr)+" Request was aborted by the user."),this.complete()},r.prototype._xdrOnTimeout=function(){this.error=new Error(i(this.xhr)+" Request timed out."),this.complete()},r.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(n){this.error=new Error("Error trying to parse loaded json:",n)}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(t.responseText,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t.responseText,this.data=o}this.isXml=!0}catch(n){this.error=new Error("Error trying to parse loaded xml:",n)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},r.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,h||(h=document.createElement("a")),h.href=t,t=a.parse(h.href);var n=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&n&&t.protocol===e.protocol?"":"anonymous"},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this._getExtension()]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this._getExtension()]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?");-1!==r&&(e=e.substring(0,r)),t=e.substring(e.lastIndexOf(".")+1)}return t},r.prototype._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},r.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},r.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT},r.setExtensionLoadType=function(t,e){o(r._loadTypeMap,t,e)},r.setExtensionXhrType=function(t,e){o(r._xhrTypeMap,t,e)}},function(t,e){var n={};t.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",function(){n[this.url]=this.data}),e()}}},function(t,e,n){var r=n(126),i=n(129);window.URL=window.URL||window.webkitURL,t.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===r.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=n,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(n),t.data.onload=null,e()}}}else{var o=t.xhr.getResponseHeader("content-type");o&&0===o.indexOf("image")&&(t.data=new Image,t.data.src="data:"+o+";base64,"+i.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},function(t,e){t.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,n="",r=new Array(4),i=0,o=0,s=0;i<t.length;){for(e=new Array(3),o=0;o<e.length;o++)i<t.length?e[o]=255&t.charCodeAt(i++):e[o]=0;switch(r[0]=e[0]>>2,r[1]=(3&e[0])<<4|e[1]>>4,r[2]=(15&e[1])<<2|e[2]>>6,r[3]=63&e[2],s=i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(o=0;o<r.length;o++)n+=this._keyStr.charAt(r[o])}return n}}},function(t,e,n){var r=n(13);t.exports=function(){return function(t,e){if(t.data&&t.isImage){var n=new r.BaseTexture(t.data,null,r.utils.getResolutionOfUrl(t.url));n.imageUrl=t.url,t.texture=new r.Texture(n),r.utils.BaseTextureCache[t.url]=n,r.utils.TextureCache[t.url]=t.texture}e()}}},function(t,e,n){var r=n(117).Resource,i=n(132),o=n(13),s=n(27),a=1e3;t.exports=function(){return function(t,e){var n=t.name+"_image";if(!t.data||!t.isJson||!t.data.frames||this.resources[n])return e();var u={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata},h=i.dirname(t.url.replace(this.baseUrl,""));this.add(n,h+"/"+t.data.meta.image,u,function(n){function r(e,r){for(var i=e;r>i-e&&i<l.length;){var s=h[l[i]],a=s.frame;if(a){var u=null,f=null;if(u=s.rotated?new o.Rectangle(a.x,a.y,a.h,a.w):new o.Rectangle(a.x,a.y,a.w,a.h),s.trimmed&&(f=new o.Rectangle(s.spriteSourceSize.x/c,s.spriteSourceSize.y/c,s.sourceSize.w/c,s.sourceSize.h/c)),s.rotated){var p=u.width;u.width=u.height,u.height=p}u.x/=c,u.y/=c,u.width/=c,u.height/=c,t.textures[l[i]]=new o.Texture(n.texture.baseTexture,u,u.clone(),f,s.rotated),o.utils.TextureCache[l[i]]=t.textures[l[i]]}i++}}function i(){return f*a<l.length}function u(t){r(f*a,a),f++,setTimeout(t,0)}t.textures={};var h=t.data.frames,l=Object.keys(h),c=o.utils.getResolutionOfUrl(t.url),f=0;l.length<=a?(r(0,a),e()):s.whilst(i,u,e)})}}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===s(t,-1);return t=n(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,u=0;s>u;u++)if(i[u]!==o[u]){a=u;break}for(var h=[],u=a;u<i.length;u++)h.push("..");return h=h.concat(o.slice(a)),h.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(e,n(29))},function(t,e,n){function r(t,e){var n={},r=t.data.getElementsByTagName("info")[0],i=t.data.getElementsByTagName("common")[0];n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(i.getAttribute("lineHeight"),10),n.chars={};for(var a=t.data.getElementsByTagName("char"),u=0;u<a.length;u++){var h=parseInt(a[u].getAttribute("id"),10),l=new o.Rectangle(parseInt(a[u].getAttribute("x"),10)+e.frame.x,parseInt(a[u].getAttribute("y"),10)+e.frame.y,parseInt(a[u].getAttribute("width"),10),parseInt(a[u].getAttribute("height"),10));n.chars[h]={xOffset:parseInt(a[u].getAttribute("xoffset"),10),yOffset:parseInt(a[u].getAttribute("yoffset"),10),xAdvance:parseInt(a[u].getAttribute("xadvance"),10),kerning:{},texture:new o.Texture(e.baseTexture,l)}}var c=t.data.getElementsByTagName("kerning");for(u=0;u<c.length;u++){var f=parseInt(c[u].getAttribute("first"),10),p=parseInt(c[u].getAttribute("second"),10),d=parseInt(c[u].getAttribute("amount"),10);n.chars[p]&&(n.chars[p].kerning[f]=d)}t.bitmapFont=n,s.BitmapText.fonts[n.font]=n}var i=n(117).Resource,o=n(13),s=n(76),a=n(132);t.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var n=a.dirname(t.url);"."===n&&(n=""),this.baseUrl&&n&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/"),n=n.replace(this.baseUrl,"")),n&&"/"!==n.charAt(n.length-1)&&(n+="/");var s=n+t.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[s])r(t,o.utils.TextureCache[s]),e();else{var u={crossOrigin:t.crossOrigin,loadType:i.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+"_image",s,u,function(n){r(t,n.texture),e()})}}}},function(t,e,n){t.exports={Mesh:n(135),Plane:n(136),Rope:n(137),MeshRenderer:n(138),MeshShader:n(139)}},function(t,e,n){function r(t,e,n,o,s){i.Container.call(this),this._texture=null,this.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=i.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=s||r.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null}var i=n(13),o=new i.Point,s=new i.Polygon;r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),r.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},r.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,i=t.resolution;t.roundPixels?e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),this.drawMode===r.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},r.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,n=this.uvs,r=e.length/2,i=0;r-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(t,e,n,o,o+2,o+4)}},r.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,n=this.uvs,r=this.indices,i=r.length,o=0;i>o;o+=3){var s=2*r[o],a=2*r[o+1],u=2*r[o+2];this._renderCanvasDrawTriangle(t,e,n,s,a,u)}},r.prototype._renderCanvasDrawTriangle=function(t,e,n,r,i,o){var s=this._texture.baseTexture,a=s.source,u=s.width,h=s.height,l=e[r],c=e[i],f=e[o],p=e[r+1],d=e[i+1],g=e[o+1],v=n[r]*s.width,y=n[i]*s.width,m=n[o]*s.width,x=n[r+1]*s.height,_=n[i+1]*s.height,b=n[o+1]*s.height;if(this.canvasPadding>0){var E=this.canvasPadding/this.worldTransform.a,M=this.canvasPadding/this.worldTransform.d,w=(l+c+f)/3,T=(p+d+g)/3,S=l-w,A=p-T,R=Math.sqrt(S*S+A*A);l=w+S/R*(R+E),p=T+A/R*(R+M),S=c-w,A=d-T,R=Math.sqrt(S*S+A*A),c=w+S/R*(R+E),d=T+A/R*(R+M),S=f-w,A=g-T,R=Math.sqrt(S*S+A*A),f=w+S/R*(R+E),g=T+A/R*(R+M)}t.save(),t.beginPath(),t.moveTo(l,p),t.lineTo(c,d),t.lineTo(f,g),t.closePath(),t.clip();var O=v*_+x*m+y*b-_*m-x*y-v*b,C=l*_+x*f+c*b-_*f-x*c-l*b,P=v*c+l*m+y*f-c*m-l*y-v*f,D=v*_*f+x*c*m+l*y*b-l*_*m-x*y*f-v*c*b,L=p*_+x*g+d*b-_*g-x*d-p*b,F=v*d+p*m+y*g-d*m-p*y-v*g,N=v*_*g+x*d*m+p*y*b-p*_*m-x*y*g-v*d*b;t.transform(C/O,L/O,P/O,F/O,D/O,N/O),t.drawImage(a,0,0,u*s.resolution,h*s.resolution,0,0,u,h),t.restore()},r.prototype.renderMeshFlat=function(t){var e=this.context,n=t.vertices,r=n.length/2;e.beginPath();for(var i=1;r-2>i;i++){var o=2*i,s=n[o],a=n[o+2],u=n[o+4],h=n[o+1],l=n[o+3],c=n[o+5];e.moveTo(s,h),e.lineTo(a,l),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},r.prototype._onTextureUpdate=function(){this.updateFrame=!0},r.prototype.getBounds=function(t){if(!this._currentBounds){for(var e=t||this.worldTransform,n=e.a,r=e.b,o=e.c,s=e.d,a=e.tx,u=e.ty,h=-(1/0),l=-(1/0),c=1/0,f=1/0,p=this.vertices,d=0,g=p.length;g>d;d+=2){var v=p[d],y=p[d+1],m=n*v+o*y+a,x=s*y+r*v+u;c=c>m?m:c,f=f>x?x:f,h=m>h?m:h,l=x>l?x:l}if(c===-(1/0)||l===1/0)return i.Rectangle.EMPTY;var _=this._bounds;_.x=c,_.width=h-c,_.y=f,_.height=l-f,this._currentBounds=_}return this._currentBounds},r.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,o);var e,n,i=this.vertices,a=s.points;if(this.drawMode===r.DRAW_MODES.TRIANGLES){var u=this.indices;for(n=this.indices.length,e=0;n>e;e+=3){var h=2*u[e],l=2*u[e+1],c=2*u[e+2];if(a[0]=i[h],a[1]=i[h+1],a[2]=i[l],a[3]=i[l+1],a[4]=i[c],a[5]=i[c+1],s.contains(o.x,o.y))return!0}}else for(n=i.length,e=0;n>e;e+=6)if(a[0]=i[e],a[1]=i[e+1],a[2]=i[e+2],a[3]=i[e+3],a[4]=i[e+4],a[5]=i[e+5],s.contains(o.x,o.y))return!0;return!1},r.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,n){function r(t,e,n){i.call(this,t),this._ready=!0,this.segmentsX=e||10,this.segmentsY=n||10,this.drawMode=i.DRAW_MODES.TRIANGLES,this.refresh()}var i=n(135);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.refresh=function(){var t=this.segmentsX*this.segmentsY,e=[],n=[],r=[],i=[],o=this.texture,s=this.segmentsX-1,a=this.segmentsY-1,u=0,h=o.width/s,l=o.height/a;for(u=0;t>u;u++){var c=u%this.segmentsX,f=u/this.segmentsX|0;e.push(c*h,f*l),r.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(c/(this.segmentsX-1)),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(f/(this.segmentsY-1)))}var p=s*a;for(u=0;p>u;u++){var d=u%s,g=u/s|0,v=g*this.segmentsX+d,y=g*this.segmentsX+d+1,m=(g+1)*this.segmentsX+d,x=(g+1)*this.segmentsX+d+1;i.push(v,y,m),i.push(y,x,m)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(r),this.colors=new Float32Array(n),this.indices=new Uint16Array(i)},r.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},function(t,e,n){function r(t,e){i.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var i=n(135),o=n(13);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,n=this.indices,r=this.colors,i=this._texture._uvs,s=new o.Point(i.x0,i.y0),a=new o.Point(i.x2-i.x0,i.y2-i.y0);e[0]=0+s.x,e[1]=0+s.y,e[2]=0+s.x,e[3]=1*a.y+s.y,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var u,h,l,c=t.length,f=1;c>f;f++)u=t[f],h=4*f,l=f/(c-1),e[h]=l*a.x+s.x,e[h+1]=0+s.y,e[h+2]=l*a.x+s.x,e[h+3]=1*a.y+s.y,h=2*f,r[h]=1,r[h+1]=1,h=2*f,n[h]=h,n[h+1]=h+1;this.dirty=!0}},r.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},r.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,n,r,i,o,s,a=t[0],u=0,h=0,l=this.vertices,c=t.length,f=0;c>f;f++)n=t[f],r=4*f,e=f<t.length-1?t[f+1]:n,h=-(e.x-a.x),u=e.y-a.y,i=10*(1-f/(c-1)),i>1&&(i=1),o=Math.sqrt(u*u+h*h),s=this._texture.height/2,u/=o,h/=o,u*=s,h*=s,l[r]=n.x+u,l[r+1]=n.y+h,l[r+2]=n.x-u,l[r+3]=n.y-h,a=n;this.containerUpdateTransform()}}},function(t,e,n){function r(t){i.ObjectRenderer.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,n=0;15e3>e;e+=6,n+=4)this.indices[e+0]=n+0,this.indices[e+1]=n+1,this.indices[e+2]=n+2,this.indices[e+3]=n+0,this.indices[e+4]=n+2,this.indices[e+5]=n+3;this.currentShader=null}var i=n(13),o=n(135);r.prototype=Object.create(i.ObjectRenderer.prototype),r.prototype.constructor=r,t.exports=r,i.WebGLRenderer.registerPlugin("mesh",r),r.prototype.onContextChange=function(){},r.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,n=e.gl,r=t._texture.baseTexture,i=t.shader,s=t.drawMode===o.DRAW_MODES.TRIANGLE_MESH?n.TRIANGLE_STRIP:n.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),i=i?i.shaders[n.id]||i.getShader(e):e.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(i),i.uniforms.translationMatrix.value=t.worldTransform.toArray(!0),i.uniforms.projectionMatrix.value=e.currentRenderTarget.projectionMatrix.toArray(!0),i.uniforms.alpha.value=t.worldAlpha,i.syncUniforms(),t.dirty?(t.dirty=!1,n.bindBuffer(n.ARRAY_BUFFER,t._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,t.vertices,n.STATIC_DRAW),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t._uvBuffer),n.bufferData(n.ARRAY_BUFFER,t.uvs,n.STATIC_DRAW),n.vertexAttribPointer(i.attributes.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),r._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,r._glTextures[n.id]):this.renderer.updateTexture(r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.indices,n.STATIC_DRAW)):(n.bindBuffer(n.ARRAY_BUFFER,t._vertexBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,t.vertices),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t._uvBuffer),n.vertexAttribPointer(i.attributes.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),r._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,r._glTextures[n.id]):this.renderer.updateTexture(r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._indexBuffer),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.indices)),n.drawElements(s,t.indices.length,n.UNSIGNED_SHORT,0)},r.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},r.prototype.flush=function(){},r.prototype.start=function(){this.currentShader=null},r.prototype.destroy=function(){i.ObjectRenderer.prototype.destroy.call(this)}},function(t,e,n){function r(t){i.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var i=n(13);r.prototype=Object.create(i.Shader.prototype),r.prototype.constructor=r,t.exports=r,i.ShaderManager.registerPlugin("meshShader",r)},function(t,e,n){t.exports={accessibleTarget:n(141),AccessibilityManager:n(142)}},function(t,e){var n={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};t.exports=n},function(t,e,n){function r(t){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var i=n(13);Object.assign(i.DisplayObject.prototype,n(141)),r.prototype.constructor=r,t.exports=r,r.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},r.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(t){if(t.visible&&(t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId),t.interactiveChildren))for(var e=t.children,n=e.length-1;n>=0;n--)this.updateAccessibleObjects(e[n])},r.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,n=t.height/this.renderer.height,r=this.div;
r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{r=s._accessibleDiv;var a=s.hitArea,u=s.worldTransform;s.hitArea?(r.style.left=(u.tx+a.x*u.a)*e+"px",r.style.top=(u.ty+a.y*u.d)*n+"px",r.style.width=a.width*u.a*e+"px",r.style.height=a.height*u.d*n+"px"):(a=s.getBounds(),this.capHitArea(a),r.style.left=a.x*e+"px",r.style.top=a.y*n+"px",r.style.width=a.width*e+"px",r.style.height=a.height*n+"px")}}this.renderId++},r.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},r.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.title=t.accessibleTitle||"displayObject "+this.tabIndex,t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},r.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},r.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},r.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},r.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},r.prototype._onMouseMove=function(){this.deactivate()},r.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i.WebGLRenderer.registerPlugin("accessibility",r),i.CanvasRenderer.registerPlugin("accessibility",r)},function(t,e,n){var r=n(13),i=n(134),o=n(76),s=n(83);r.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},r.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(r,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),r.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),r.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),i.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),i.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),o.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),o.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),o.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),r.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),r.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),r.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),r.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),r}}}),r.Sprite.prototype.setTexture=function(t){this.texture=t,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},o.BitmapText.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},r.Text.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},r.Text.prototype.setStyle=function(t){this.style=t,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},r.Texture.prototype.setFrame=function(t){this.frame=t,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(s,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),r.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),r.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),r.SpriteMaskFilter}}}),r.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),r.utils.uid()}}])});