<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>HiGlass</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">
  <link rel="stylesheet" href="styles/page.css">
  <link rel="stylesheet" href="hglib.css">
  <style type="text/css">
    #demo {
      position: absolute;
      left: 1rem;
      top: 1rem;
      bottom: 1rem;
      right: 1rem;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div style="height: 50px" />
      <div style="margin: auto; width: 100%;">
      <div id="demo"></div>
  </div>

  <script
    crossorigin
    src="https://unpkg.com/react@16/umd/react.development.js"
  ></script>
  <script
    crossorigin
    src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
  ></script>
  <script
    crossorigin
    src="https://unpkg.com/pixi.js-legacy@5/dist/pixi-legacy.js"
  ></script>
  <script
    crossorigin
    src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap/0.32.1/react-bootstrap.min.js"
  ></script>
  <script
    crossorigin
    src="https://unpkg.com/lodash@4.17.15/lodash.min.js"
  ></script>
  <script src="hglib.js"></script>
  <script>

const viewConfig = {
  editable: true,
  zoomFixed: false,
  trackSourceServers: [
    'http://higlass.io/api/v1'
  ],
  exportViewUrl: 'http://higlass.io/api/v1/viewconfs/',
  views: [
    {
      uid: 'aa',
      initialXDomain: [1000000000, 3000000000],
      initialYDomain: [1000000000, 3000000000],
      autocompleteSource: 'http://higlass.io/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',
      genomePositionSearchBox: {
        autocompleteId: 'OHJakQICQD6gTD7skx4EWA',
        autocompleteServer: 'http://higlass.io/api/v1',
        chromInfoId: 'hg19',
        chromInfoServer: 'http://higlass.io/api/v1',
        visible: true
      },
      chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',
      tracks: {
        top: [
          {
            uuid: 'OHJakQICQD6gTD7skx4EWA',
            filetype: 'beddb',
            datatype: 'gene-annotation',
            private: false,
            name: 'Gene Annotations (hg19)',
            coordSystem: 'hg19',
            coordSystem2: '',
            server: 'http://higlass.io/api/v1',
            tilesetUid: 'OHJakQICQD6gTD7skx4EWA',
            serverUidKey: 'http://higlass.io/api/v1/OHJakQICQD6gTD7skx4EWA',
            uid: 'BEEMEjU7QCa2krDO9C0yOQ',
            type: 'horizontal-gene-annotations',
            options: {
              labelPosition: 'outerTop',
              name: 'Gene Annotations (hg19)'
            },
            width: 20,
            height: 60,
            maxWidth: 4294967296,
            maxZoom: 22
          },
          {
            filetype: 'hitile',
            datatype: 'vector',
            private: false,
            name: 'wgEncodeSydhTfbsGm12878Rad21IggrabSig.hitile',
            coordSystem: 'hg19',
            coordSystem2: '',
            server: 'http://higlass.io/api/v1',
            tilesetUid: 'F2vbUeqhS86XkxuO1j2rPA',
            serverUidKey: 'http://higlass.io/api/v1/F2vbUeqhS86XkxuO1j2rPA',
            type: 'horizontal-line',
            options: {
              labelColor: 'red',
              labelPosition: 'outerLeft',
              axisPositionHorizontal: 'right',
              lineStrokeColor: 'blue',
              name: 'wgEncodeSydhTfbsGm12878Rad21IggrabSig.hitile',
              valueScaling: 'log'
            },
            width: 20,
            height: 20,
            maxWidth: 4294967296,
            maxZoom: 22
          },
          {
            chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',
            type: 'horizontal-chromosome-labels',
            position: 'top',
            name: 'Chromosome Labels (hg19)',
            height: 30,
            uid: 'I1QUF22JQJuJ38j9PS4iqw',
            options: {}
          }
        ],
        left: [
          {
            name: 'wgEncodeSydhTfbsGm12878Rad21IggrabSig.hitile',
            server: 'http://higlass.io/api/v1',
            tilesetUid: 'F2vbUeqhS86XkxuO1j2rPA',
            type: 'vertical-line',
            options: {
              labelColor: 'red',
              labelPosition: 'outerLeft',
              axisPositionHorizontal: 'right',
              lineStrokeColor: 'blue',
              name: 'wgEncodeSydhTfbsGm12878Rad21IggrabSig.hitile',
              valueScaling: 'log'
            }
          },
          {
            type: 'vertical-gene-annotations',
            width: 60,
            tilesetUid: 'OHJakQICQD6gTD7skx4EWA',
            server: 'http://higlass.io/api/v1',
            position: 'left',
            name: 'Gene Annotations (hg19)',
            options: {
              labelPosition: 'bottomRight',
              name: 'Gene Annotations (hg19)'
            },
            uid: 'OgnAEKSHRaG-gR1RqPOuBQ',
            maxWidth: 4294967296,
            maxZoom: 22
          },
          {
            chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',
            type: 'vertical-chromosome-labels',
            position: 'left',
            name: 'Chromosome Labels (hg19)',
            width: 30,
            uid: 'a-mFiHnBQ8uuI6UG3USWVA',
            options: {}
          }
        ],
        center: [
          {
            type: 'horizontal-multivec',
            uid: 'cistrome-track-1',
            tilesetUid: 'UvVPeLHuRDiYA3qwFlm7xQ',
            server: 'https://resgen.io/api/v1',
            options: {
              labelPosition: 'hidden',
              labelColor: 'black',
              labelTextOpacity: 0.4,
              valueScaling: 'linear',
              trackBorderWidth: 0,
              trackBorderColor: 'black',
              heatmapValueScaling: 'log',
              name: 'my_file_genome_wide.multires.mv5',
              labelLeftMargin: 0,
              labelRightMargin: 0,
              labelTopMargin: 0,
              labelBottomMargin: 0,
              labelShowResolution: true,
              minHeight: 100,
              colorbarPosition: 'bottomLeft',
              labelShowAssembly: true,
              selectRows: null,
              colorbarBackgroundColor: '#ffffff',
              scaleStartPercent: '0.00000',
              scaleEndPercent: '1.00000'
            },
            width: 1607,
            height: 482
          }
        ],
        right: [
          {
            type: 'vertical-gene-annotations',
            width: 60,
            tilesetUid: 'OHJakQICQD6gTD7skx4EWA',
            server: 'http://higlass.io/api/v1',
            name: 'Gene Annotations (hg19)',
            options: {
              labelPosition: 'outerBottom',
              name: 'Gene Annotations (hg19)'
            },
            maxWidth: 4294967296,
            maxZoom: 22
          },
          {
            chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',
            type: 'vertical-chromosome-labels',
            name: 'Chromosome Labels (hg19)',
            width: 30,
            options: {
              labelPosition: 'outerBottom',
              name: 'Chromosome labels'
            }
          }
        ],
        bottom: [
          {
            filetype: 'hitile',
            datatype: 'vector',
            private: false,
            name: 'wgEncodeSydhTfbsGm12878Rad21IggrabSig.hitile',
            coordSystem: 'hg19',
            coordSystem2: '',
            server: 'http://higlass.io/api/v1',
            tilesetUid: 'F2vbUeqhS86XkxuO1j2rPA',
            serverUidKey: 'http://higlass.io/api/v1/F2vbUeqhS86XkxuO1j2rPA',
            type: 'horizontal-line',
            options: {
              labelPosition: 'outerLeft',
              axisPositionHorizontal: 'right',
              lineStrokeColor: 'blue',
              name: 'wgEncodeSydhTfbsGm12878Rad21IggrabSig.hitile',
              valueScaling: 'log'
            },
            width: 20,
            height: 50,
            maxWidth: 4294967296,
            maxZoom: 22
          },
        ]
      },
      layout: {
        w: 12,
        h: 12,
        x: 0,
        y: 0,
        i: 'aa',
        moved: false,
        static: false
      }
    }
  ],
  zoomLocks: {
    locksByViewUid: {},
    locksDict: {}
  },
  locationLocks: {
    locksByViewUid: {},
    locksDict: {}
  }
};

const hgApi = hglib.viewer(document.getElementById('demo'), viewConfig, {
        bounded: true
      });

setTimeout(() => {
  hgApi.activateTool('select');
}, 2000);

const rangeSelectionHander = (rangeSelection) => {
  console.log(
    'Selected the following range:',
    rangeSelection.dataRange,
    rangeSelection.genomicRange,
  );
};
hgApi.on('rangeSelection', rangeSelectionHander);

setTimeout(() => {
  hgApi.off('rangeSelection', rangeSelectionHander);
}, 10000);

</script>
</body>
</html>
