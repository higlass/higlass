{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://higlass.io/#viewconf",
  "title": "HiGlass viewconf",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "editable": {
      "type": "boolean",
      "default": true
    },
    "viewEditable": {
      "type": "boolean",
      "default": true
    },
    "tracksEditable": {
      "type": "boolean",
      "default": true
    },
    "zoomFixed": { "type": "boolean" },
    "exportViewUrl": { "type": "string" },
    "trackSourceServers": {
      "type": "array",
      "items": { "type": "string" }
    },
    "zoomLocks": { "$ref": "#/definitions/locks" },
    "locationLocks": { "$ref": "#/definitions/locks" },
    "valueScaleLocks": { "$ref": "#/definitions/locks" },
    "views": {
      "type": "array",
      "items": { "$ref": "#/definitions/view" }
    }
  },
  "definitions": {

    "locks": {
      "type": "object",
      "additionalProperties": false,
      "required": ["locksByViewUid", "locksDict"],
      "properties": {
        "locksByViewUid": { "type": "object", "TODO": "more precise" },
        "locksDict": { "type": "object", "TODO": "more precise" }
      }
    },

    "view": {
      "type": "object",
      "additionalProperties": false,
      "required": ["tracks", "layout"],
      "properties": {
        "uid": { "type": "string" },
        "initialXDomain": { "$ref": "#/definitions/domain" },
        "initialYDomain": { "$ref": "#/definitions/domain" },
        "genomePositionSearchBox": {
          "type": "object",
          "title": "The Genome Position Search Box Schema",
          "required": [
            "autocompleteServer",
            "autocompleteId",
            "chromInfoServer",
            "chromInfoId",
            "visible"
          ],
          "properties": {
            "autocompleteServer": {
              "type": "string",
              "title": "The Autocomplete Server URL",
              "default": "",
              "examples": ["//higlass.io/api/v1"],
              "pattern": "^(.*)$"
            },
            "autocompleteId": {
              "type": "string",
              "title": "The Autocomplete ID",
              "default": "",
              "examples": ["OHJakQICQD6gTD7skx4EWA"],
              "pattern": "^(.*)$"
            },
            "chromInfoServer": {
              "type": "string",
              "title": "The Chrominfo Server URL",
              "default": "",
              "examples": ["//higlass.io/api/v1"],
              "pattern": "^(.*)$"
            },
            "chromInfoId": {
              "type": "string",
              "title": "The Chromosome Info ID",
              "default": "",
              "examples": ["hg19"],
              "pattern": "^(.*)$"
            },
            "visible": {
              "type": "boolean",
              "title": "The Visible Schema",
              "default": false
            }
          }
        },
        "chromInfoPath": { "type": "string" },
        "tracks": { "type": "object", "TODO": "more precise" },
        "layout": {
          "type": "object",
          "properties": {
            "x": {
              "type": "integer",
              "title": "The X Position",
              "default": 0
            },
            "y": {
              "type": "integer",
              "title": "The Y Position",
              "default": 0
            },
            "w": {
              "type": "integer",
              "title": "Width",
              "default": 12
            },
            "h": {
              "type": "integer",
              "title": "Height",
              "default": 12
            },
            "i": {
              "type": "string",
              "title": "The View Identifier",
              "default": "",
              "examples": ["aa"],
              "pattern": "^(.*)$"
            }
          }
        },
        "overlays": { "type": "array" }
      }
    },

    "domain": {
      "type": "array",
      "items": { "type": "number" },
      "maxItems": 2,
      "minItems": 2
    }
  }
}
